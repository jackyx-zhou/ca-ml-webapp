/*! For license information please see 2.37ede93b.chunk.js.LICENSE.txt */
(this["webpackJsonpca-ml-webapp"]=this["webpackJsonpca-ml-webapp"]||[]).push([[2],[function(e,t,n){"use strict";n.r(t),n.d(t,"AdadeltaOptimizer",(function(){return mt})),n.d(t,"AdagradOptimizer",(function(){return bt})),n.d(t,"AdamOptimizer",(function(){return _t})),n.d(t,"AdamaxOptimizer",(function(){return Ot})),n.d(t,"MomentumOptimizer",(function(){return jt})),n.d(t,"Optimizer",(function(){return vt})),n.d(t,"RMSPropOptimizer",(function(){return Et})),n.d(t,"SGDOptimizer",(function(){return St})),n.d(t,"Tensor",(function(){return le.a})),n.d(t,"TensorBuffer",(function(){return le.b})),n.d(t,"Variable",(function(){return le.c})),n.d(t,"Rank",(function(){return Ct.a})),n.d(t,"sumOutType",(function(){return Ct.b})),n.d(t,"upcastType",(function(){return Ct.c})),n.d(t,"abs",(function(){return At.b})),n.d(t,"acos",(function(){return At.c})),n.d(t,"acosh",(function(){return At.d})),n.d(t,"add",(function(){return At.e})),n.d(t,"addN",(function(){return At.f})),n.d(t,"all",(function(){return At.g})),n.d(t,"any",(function(){return At.h})),n.d(t,"argMax",(function(){return At.i})),n.d(t,"argMin",(function(){return At.j})),n.d(t,"asin",(function(){return At.k})),n.d(t,"asinh",(function(){return At.l})),n.d(t,"atan",(function(){return At.m})),n.d(t,"atan2",(function(){return At.n})),n.d(t,"atanh",(function(){return At.o})),n.d(t,"avgPool",(function(){return At.p})),n.d(t,"avgPool3d",(function(){return At.q})),n.d(t,"basicLSTMCell",(function(){return At.r})),n.d(t,"batchToSpaceND",(function(){return At.w})),n.d(t,"batchNorm",(function(){return At.s})),n.d(t,"batchNorm2d",(function(){return At.t})),n.d(t,"batchNorm3d",(function(){return At.u})),n.d(t,"batchNorm4d",(function(){return At.v})),n.d(t,"bincount",(function(){return At.x})),n.d(t,"broadcastTo",(function(){return At.z})),n.d(t,"buffer",(function(){return At.A})),n.d(t,"cast",(function(){return At.B})),n.d(t,"ceil",(function(){return At.C})),n.d(t,"clipByValue",(function(){return At.D})),n.d(t,"clone",(function(){return At.E})),n.d(t,"complex",(function(){return At.F})),n.d(t,"concat",(function(){return At.G})),n.d(t,"concat1d",(function(){return At.H})),n.d(t,"concat2d",(function(){return At.I})),n.d(t,"concat3d",(function(){return At.J})),n.d(t,"concat4d",(function(){return At.K})),n.d(t,"conv1d",(function(){return At.L})),n.d(t,"conv2d",(function(){return At.M})),n.d(t,"conv2dTranspose",(function(){return At.N})),n.d(t,"conv3d",(function(){return At.O})),n.d(t,"conv3dTranspose",(function(){return At.P})),n.d(t,"cos",(function(){return At.Q})),n.d(t,"cosh",(function(){return At.R})),n.d(t,"cumsum",(function(){return At.T})),n.d(t,"denseBincount",(function(){return At.U})),n.d(t,"depthToSpace",(function(){return At.V})),n.d(t,"depthwiseConv2d",(function(){return At.W})),n.d(t,"diag",(function(){return At.X})),n.d(t,"dilation2d",(function(){return At.Y})),n.d(t,"div",(function(){return At.Z})),n.d(t,"divNoNan",(function(){return At.ab})),n.d(t,"dot",(function(){return At.bb})),n.d(t,"elu",(function(){return At.db})),n.d(t,"equal",(function(){return At.fb})),n.d(t,"erf",(function(){return At.gb})),n.d(t,"exp",(function(){return At.hb})),n.d(t,"expandDims",(function(){return At.ib})),n.d(t,"expm1",(function(){return At.jb})),n.d(t,"eye",(function(){return At.kb})),n.d(t,"fill",(function(){return At.mb})),n.d(t,"floor",(function(){return At.nb})),n.d(t,"floorDiv",(function(){return At.ob})),n.d(t,"gather",(function(){return At.qb})),n.d(t,"greater",(function(){return At.sb})),n.d(t,"greaterEqual",(function(){return At.tb})),n.d(t,"imag",(function(){return At.vb})),n.d(t,"isFinite",(function(){return At.zb})),n.d(t,"isInf",(function(){return At.Ab})),n.d(t,"isNaN",(function(){return At.Bb})),n.d(t,"leakyRelu",(function(){return At.Cb})),n.d(t,"less",(function(){return At.Db})),n.d(t,"lessEqual",(function(){return At.Eb})),n.d(t,"linspace",(function(){return At.Gb})),n.d(t,"localResponseNormalization",(function(){return At.Hb})),n.d(t,"log",(function(){return At.Ib})),n.d(t,"log1p",(function(){return At.Jb})),n.d(t,"logSigmoid",(function(){return At.Kb})),n.d(t,"logSoftmax",(function(){return At.Lb})),n.d(t,"logSumExp",(function(){return At.Mb})),n.d(t,"logicalAnd",(function(){return At.Nb})),n.d(t,"logicalNot",(function(){return At.Ob})),n.d(t,"logicalOr",(function(){return At.Pb})),n.d(t,"logicalXor",(function(){return At.Qb})),n.d(t,"matMul",(function(){return At.Sb})),n.d(t,"max",(function(){return At.Tb})),n.d(t,"maxPool",(function(){return At.Ub})),n.d(t,"maxPool3d",(function(){return At.Vb})),n.d(t,"maxPoolWithArgmax",(function(){return At.Wb})),n.d(t,"maximum",(function(){return At.Xb})),n.d(t,"mean",(function(){return At.Yb})),n.d(t,"min",(function(){return At.Zb})),n.d(t,"minimum",(function(){return At.ac})),n.d(t,"mirrorPad",(function(){return At.bc})),n.d(t,"mod",(function(){return At.cc})),n.d(t,"moments",(function(){return At.dc})),n.d(t,"mul",(function(){return At.fc})),n.d(t,"multiRNNCell",(function(){return At.gc})),n.d(t,"multinomial",(function(){return At.hc})),n.d(t,"neg",(function(){return At.ic})),n.d(t,"notEqual",(function(){return At.kc})),n.d(t,"oneHot",(function(){return At.lc})),n.d(t,"ones",(function(){return At.mc})),n.d(t,"onesLike",(function(){return At.nc})),n.d(t,"outerProduct",(function(){return At.pc})),n.d(t,"pad",(function(){return At.qc})),n.d(t,"pad1d",(function(){return At.rc})),n.d(t,"pad2d",(function(){return At.sc})),n.d(t,"pad3d",(function(){return At.tc})),n.d(t,"pad4d",(function(){return At.uc})),n.d(t,"pool",(function(){return At.vc})),n.d(t,"pow",(function(){return At.wc})),n.d(t,"prelu",(function(){return At.xc})),n.d(t,"print",(function(){return At.yc})),n.d(t,"prod",(function(){return At.zc})),n.d(t,"rand",(function(){return At.Ac})),n.d(t,"randomGamma",(function(){return At.Bc})),n.d(t,"randomNormal",(function(){return At.Cc})),n.d(t,"randomUniform",(function(){return At.Dc})),n.d(t,"range",(function(){return At.Ec})),n.d(t,"real",(function(){return At.Fc})),n.d(t,"reciprocal",(function(){return At.Gc})),n.d(t,"relu",(function(){return At.Hc})),n.d(t,"relu6",(function(){return At.Ic})),n.d(t,"reshape",(function(){return At.Jc})),n.d(t,"reverse",(function(){return At.Kc})),n.d(t,"reverse1d",(function(){return At.Lc})),n.d(t,"reverse2d",(function(){return At.Mc})),n.d(t,"reverse3d",(function(){return At.Nc})),n.d(t,"reverse4d",(function(){return At.Oc})),n.d(t,"round",(function(){return At.Qc})),n.d(t,"rsqrt",(function(){return At.Rc})),n.d(t,"scalar",(function(){return At.Sc})),n.d(t,"selu",(function(){return At.Uc})),n.d(t,"separableConv2d",(function(){return At.Vc})),n.d(t,"setdiff1dAsync",(function(){return At.Wc})),n.d(t,"sigmoid",(function(){return At.Xc})),n.d(t,"sign",(function(){return At.Yc})),n.d(t,"sin",(function(){return At.ad})),n.d(t,"sinh",(function(){return At.bd})),n.d(t,"slice",(function(){return At.cd})),n.d(t,"slice1d",(function(){return At.dd})),n.d(t,"slice2d",(function(){return At.ed})),n.d(t,"slice3d",(function(){return At.fd})),n.d(t,"slice4d",(function(){return At.gd})),n.d(t,"softmax",(function(){return At.hd})),n.d(t,"softplus",(function(){return At.id})),n.d(t,"spaceToBatchND",(function(){return At.jd})),n.d(t,"fft",(function(){return At.lb})),n.d(t,"ifft",(function(){return At.ub})),n.d(t,"irfft",(function(){return At.yb})),n.d(t,"rfft",(function(){return At.Pc})),n.d(t,"split",(function(){return At.md})),n.d(t,"sqrt",(function(){return At.nd})),n.d(t,"square",(function(){return At.od})),n.d(t,"squaredDifference",(function(){return At.pd})),n.d(t,"squeeze",(function(){return At.qd})),n.d(t,"stack",(function(){return At.rd})),n.d(t,"step",(function(){return At.sd})),n.d(t,"stridedSlice",(function(){return At.td})),n.d(t,"sub",(function(){return At.ud})),n.d(t,"sum",(function(){return At.vd})),n.d(t,"tan",(function(){return At.wd})),n.d(t,"tanh",(function(){return At.xd})),n.d(t,"tensor",(function(){return At.yd})),n.d(t,"tensor1d",(function(){return At.zd})),n.d(t,"tensor2d",(function(){return At.Ad})),n.d(t,"tensor3d",(function(){return At.Bd})),n.d(t,"tensor4d",(function(){return At.Cd})),n.d(t,"tensor5d",(function(){return At.Dd})),n.d(t,"tensor6d",(function(){return At.Ed})),n.d(t,"tile",(function(){return At.Fd})),n.d(t,"topk",(function(){return At.Gd})),n.d(t,"truncatedNormal",(function(){return At.Id})),n.d(t,"unique",(function(){return At.Jd})),n.d(t,"unsortedSegmentSum",(function(){return At.Kd})),n.d(t,"unstack",(function(){return At.Ld})),n.d(t,"variable",(function(){return At.Md})),n.d(t,"where",(function(){return At.Nd})),n.d(t,"whereAsync",(function(){return At.Od})),n.d(t,"zeros",(function(){return At.Pd})),n.d(t,"zerosLike",(function(){return At.Qd})),n.d(t,"booleanMaskAsync",(function(){return At.y})),n.d(t,"transpose",(function(){return At.Hd})),n.d(t,"norm",(function(){return At.jc})),n.d(t,"movingAverage",(function(){return At.ec})),n.d(t,"scatterND",(function(){return At.Tc})),n.d(t,"sparseToDense",(function(){return At.kd})),n.d(t,"gatherND",(function(){return At.rb})),n.d(t,"dropout",(function(){return At.cb})),n.d(t,"enclosingPowerOfTwo",(function(){return At.eb})),n.d(t,"cosineWindow",(function(){return At.S})),n.d(t,"inTopKAsync",(function(){return At.xb})),n.d(t,"op",(function(){return At.oc})),n.d(t,"OP_SCOPE_SUFFIX",(function(){return At.a})),n.d(t,"image",(function(){return At.wb})),n.d(t,"linalg",(function(){return At.Fb})),n.d(t,"losses",(function(){return At.Rb})),n.d(t,"spectral",(function(){return At.ld})),n.d(t,"fused",(function(){return At.pb})),n.d(t,"signal",(function(){return At.Zc})),n.d(t,"Reduction",(function(){return Tt.a})),n.d(t,"train",(function(){return Mt})),n.d(t,"enableProdMode",(function(){return ot.g})),n.d(t,"enableDebugMode",(function(){return ot.f})),n.d(t,"disableDeprecationWarnings",(function(){return ot.c})),n.d(t,"deprecationWarn",(function(){return ot.b})),n.d(t,"disposeVariables",(function(){return ot.e})),n.d(t,"engine",(function(){return ot.h})),n.d(t,"memory",(function(){return ot.m})),n.d(t,"profile",(function(){return ot.n})),n.d(t,"tidy",(function(){return ot.t})),n.d(t,"dispose",(function(){return ot.d})),n.d(t,"keep",(function(){return ot.l})),n.d(t,"time",(function(){return ot.u})),n.d(t,"setBackend",(function(){return ot.r})),n.d(t,"ready",(function(){return ot.o})),n.d(t,"getBackend",(function(){return ot.k})),n.d(t,"removeBackend",(function(){return ot.q})),n.d(t,"findBackend",(function(){return ot.i})),n.d(t,"findBackendFactory",(function(){return ot.j})),n.d(t,"registerBackend",(function(){return ot.p})),n.d(t,"backend",(function(){return ot.a})),n.d(t,"setPlatform",(function(){return ot.s})),n.d(t,"getKernel",(function(){return Ve.c})),n.d(t,"getGradient",(function(){return Ve.b})),n.d(t,"getKernelsForBackend",(function(){return Ve.d})),n.d(t,"registerKernel",(function(){return Ve.f})),n.d(t,"registerGradient",(function(){return Ve.e})),n.d(t,"unregisterKernel",(function(){return Ve.h})),n.d(t,"unregisterGradient",(function(){return Ve.g})),n.d(t,"copyRegisteredKernels",(function(){return Ve.a})),n.d(t,"customGrad",(function(){return ht.a})),n.d(t,"grad",(function(){return ht.b})),n.d(t,"grads",(function(){return ht.c})),n.d(t,"valueAndGrad",(function(){return ht.d})),n.d(t,"valueAndGrads",(function(){return ht.e})),n.d(t,"variableGrads",(function(){return ht.f})),n.d(t,"Environment",(function(){return p.b})),n.d(t,"env",(function(){return p.c})),n.d(t,"ENV",(function(){return p.a})),n.d(t,"version_core",(function(){return rt})),n.d(t,"nextFrame",(function(){return Dt.a})),n.d(t,"browser",(function(){return i})),n.d(t,"io",(function(){return r})),n.d(t,"math",(function(){return a})),n.d(t,"serialization",(function(){return u})),n.d(t,"test_util",(function(){return tt})),n.d(t,"util",(function(){return nt})),n.d(t,"backend_util",(function(){return c})),n.d(t,"tensor_util",(function(){return et})),n.d(t,"slice_util",(function(){return $e})),n.d(t,"gather_util",(function(){return o})),n.d(t,"scatter_util",(function(){return Ke})),n.d(t,"device_util",(function(){return bn})),n.d(t,"kernel_impls",(function(){return l})),n.d(t,"KernelBackend",(function(){return _n.b})),n.d(t,"DataStorage",(function(){return _n.a})),n.d(t,"Abs",(function(){return We.a})),n.d(t,"Acos",(function(){return We.b})),n.d(t,"Acosh",(function(){return We.c})),n.d(t,"Add",(function(){return We.d})),n.d(t,"AddN",(function(){return We.e})),n.d(t,"All",(function(){return We.f})),n.d(t,"Any",(function(){return We.g})),n.d(t,"ArgMax",(function(){return We.h})),n.d(t,"ArgMin",(function(){return We.i})),n.d(t,"Asin",(function(){return We.j})),n.d(t,"Asinh",(function(){return We.k})),n.d(t,"Atan",(function(){return We.l})),n.d(t,"Atanh",(function(){return We.n})),n.d(t,"Atan2",(function(){return We.m})),n.d(t,"AvgPool",(function(){return We.o})),n.d(t,"AvgPoolGrad",(function(){return We.r})),n.d(t,"AvgPool3D",(function(){return We.p})),n.d(t,"AvgPool3DGrad",(function(){return We.q})),n.d(t,"BatchMatMul",(function(){return We.s})),n.d(t,"BatchToSpaceND",(function(){return We.t})),n.d(t,"Bincount",(function(){return We.u})),n.d(t,"BroadcastTo",(function(){return We.v})),n.d(t,"Cast",(function(){return We.w})),n.d(t,"Ceil",(function(){return We.x})),n.d(t,"ClipByValue",(function(){return We.y})),n.d(t,"Complex",(function(){return We.z})),n.d(t,"ComplexAbs",(function(){return We.A})),n.d(t,"Concat",(function(){return We.B})),n.d(t,"Conv2D",(function(){return We.C})),n.d(t,"Conv2DBackpropFilter",(function(){return We.D})),n.d(t,"Conv2DBackpropInput",(function(){return We.E})),n.d(t,"Conv3D",(function(){return We.F})),n.d(t,"Conv3DBackpropFilterV2",(function(){return We.G})),n.d(t,"Conv3DBackpropInputV2",(function(){return We.H})),n.d(t,"Cos",(function(){return We.I})),n.d(t,"Cosh",(function(){return We.J})),n.d(t,"Cumsum",(function(){return We.L})),n.d(t,"CropAndResize",(function(){return We.K})),n.d(t,"DenseBincount",(function(){return We.M})),n.d(t,"DepthToSpace",(function(){return We.N})),n.d(t,"DepthwiseConv2dNative",(function(){return We.O})),n.d(t,"DepthwiseConv2dNativeBackpropFilter",(function(){return We.P})),n.d(t,"DepthwiseConv2dNativeBackpropInput",(function(){return We.Q})),n.d(t,"Diag",(function(){return We.R})),n.d(t,"Dilation2D",(function(){return We.S})),n.d(t,"Dilation2DBackpropInput",(function(){return We.U})),n.d(t,"Dilation2DBackpropFilter",(function(){return We.T})),n.d(t,"RealDiv",(function(){return We.kc})),n.d(t,"Elu",(function(){return We.V})),n.d(t,"EluGrad",(function(){return We.W})),n.d(t,"Erf",(function(){return We.Y})),n.d(t,"Equal",(function(){return We.X})),n.d(t,"Exp",(function(){return We.Z})),n.d(t,"ExpandDims",(function(){return We.ab})),n.d(t,"Expm1",(function(){return We.bb})),n.d(t,"FFT",(function(){return We.cb})),n.d(t,"Fill",(function(){return We.db})),n.d(t,"FlipLeftRight",(function(){return We.eb})),n.d(t,"Floor",(function(){return We.fb})),n.d(t,"FloorDiv",(function(){return We.gb})),n.d(t,"FusedBatchNorm",(function(){return We.ib})),n.d(t,"GatherV2",(function(){return We.mb})),n.d(t,"GatherNd",(function(){return We.lb})),n.d(t,"Greater",(function(){return We.nb})),n.d(t,"GreaterEqual",(function(){return We.ob})),n.d(t,"Identity",(function(){return We.qb})),n.d(t,"IFFT",(function(){return We.pb})),n.d(t,"Imag",(function(){return We.rb})),n.d(t,"IsFinite",(function(){return We.sb})),n.d(t,"IsInf",(function(){return We.tb})),n.d(t,"IsNan",(function(){return We.ub})),n.d(t,"LeakyRelu",(function(){return We.xb})),n.d(t,"Less",(function(){return We.yb})),n.d(t,"LessEqual",(function(){return We.zb})),n.d(t,"LinSpace",(function(){return We.Ab})),n.d(t,"Log",(function(){return We.Bb})),n.d(t,"Log1p",(function(){return We.Cb})),n.d(t,"LogicalAnd",(function(){return We.Eb})),n.d(t,"LogicalNot",(function(){return We.Fb})),n.d(t,"LogicalOr",(function(){return We.Gb})),n.d(t,"LogSoftmax",(function(){return We.Db})),n.d(t,"LRN",(function(){return We.vb})),n.d(t,"LRNGrad",(function(){return We.wb})),n.d(t,"Max",(function(){return We.Hb})),n.d(t,"Maximum",(function(){return We.Nb})),n.d(t,"MaxPool",(function(){return We.Ib})),n.d(t,"MaxPoolGrad",(function(){return We.Lb})),n.d(t,"MaxPool3D",(function(){return We.Jb})),n.d(t,"MaxPool3DGrad",(function(){return We.Kb})),n.d(t,"MaxPoolWithArgmax",(function(){return We.Mb})),n.d(t,"Mean",(function(){return We.Ob})),n.d(t,"Min",(function(){return We.Pb})),n.d(t,"Minimum",(function(){return We.Qb})),n.d(t,"MirrorPad",(function(){return We.Rb})),n.d(t,"Mod",(function(){return We.Sb})),n.d(t,"Multinomial",(function(){return We.Tb})),n.d(t,"Multiply",(function(){return We.Ub})),n.d(t,"Neg",(function(){return We.Vb})),n.d(t,"NotEqual",(function(){return We.Zb})),n.d(t,"NonMaxSuppressionV3",(function(){return We.Wb})),n.d(t,"NonMaxSuppressionV4",(function(){return We.Xb})),n.d(t,"NonMaxSuppressionV5",(function(){return We.Yb})),n.d(t,"OnesLike",(function(){return We.bc})),n.d(t,"OneHot",(function(){return We.ac})),n.d(t,"Pack",(function(){return We.cc})),n.d(t,"PadV2",(function(){return We.dc})),n.d(t,"Pool",(function(){return We.ec})),n.d(t,"Pow",(function(){return We.fc})),n.d(t,"Prelu",(function(){return We.gc})),n.d(t,"Prod",(function(){return We.hc})),n.d(t,"Range",(function(){return We.ic})),n.d(t,"Real",(function(){return We.jc})),n.d(t,"Reciprocal",(function(){return We.lc})),n.d(t,"Relu",(function(){return We.mc})),n.d(t,"Reshape",(function(){return We.oc})),n.d(t,"ResizeNearestNeighbor",(function(){return We.rc})),n.d(t,"ResizeNearestNeighborGrad",(function(){return We.sc})),n.d(t,"ResizeBilinear",(function(){return We.pc})),n.d(t,"ResizeBilinearGrad",(function(){return We.qc})),n.d(t,"Relu6",(function(){return We.nc})),n.d(t,"Reverse",(function(){return We.tc})),n.d(t,"Round",(function(){return We.vc})),n.d(t,"Rsqrt",(function(){return We.wc})),n.d(t,"ScatterNd",(function(){return We.xc})),n.d(t,"Select",(function(){return We.yc})),n.d(t,"Selu",(function(){return We.zc})),n.d(t,"Slice",(function(){return We.Ec})),n.d(t,"Sin",(function(){return We.Cc})),n.d(t,"Sinh",(function(){return We.Dc})),n.d(t,"Sign",(function(){return We.Bc})),n.d(t,"Sigmoid",(function(){return We.Ac})),n.d(t,"Softplus",(function(){return We.Gc})),n.d(t,"Sqrt",(function(){return We.Kc})),n.d(t,"Sum",(function(){return We.Qc})),n.d(t,"SpaceToBatchND",(function(){return We.Hc})),n.d(t,"SplitV",(function(){return We.Jc})),n.d(t,"Softmax",(function(){return We.Fc})),n.d(t,"SquaredDifference",(function(){return We.Mc})),n.d(t,"Square",(function(){return We.Lc})),n.d(t,"Sub",(function(){return We.Pc})),n.d(t,"SparseToDense",(function(){return We.Ic})),n.d(t,"StridedSlice",(function(){return We.Oc})),n.d(t,"Tan",(function(){return We.Rc})),n.d(t,"Tanh",(function(){return We.Sc})),n.d(t,"Tile",(function(){return We.Tc})),n.d(t,"TopK",(function(){return We.Uc})),n.d(t,"Transpose",(function(){return We.Vc})),n.d(t,"Unique",(function(){return We.Wc})),n.d(t,"Unpack",(function(){return We.Xc})),n.d(t,"UnsortedSegmentSum",(function(){return We.Yc})),n.d(t,"ZerosLike",(function(){return We.Zc})),n.d(t,"Step",(function(){return We.Nc})),n.d(t,"FromPixels",(function(){return We.hb})),n.d(t,"RotateWithOffset",(function(){return We.uc})),n.d(t,"_FusedMatMul",(function(){return We.ad})),n.d(t,"FusedConv2D",(function(){return We.jb})),n.d(t,"FusedDepthwiseConv2D",(function(){return We.kb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return te})),n.d(r,"listModels",(function(){return Z})),n.d(r,"moveModel",(function(){return re})),n.d(r,"removeModel",(function(){return Q})),n.d(r,"browserFiles",(function(){return me})),n.d(r,"browserHTTPRequest",(function(){return Te})),n.d(r,"concatenateArrayBuffers",(function(){return y.d})),n.d(r,"decodeWeights",(function(){return y.e})),n.d(r,"encodeWeights",(function(){return y.f})),n.d(r,"fromMemory",(function(){return De})),n.d(r,"getLoadHandlers",(function(){return O})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return y.g})),n.d(r,"getSaveHandlers",(function(){return k})),n.d(r,"http",(function(){return Ae})),n.d(r,"isHTTPScheme",(function(){return Ee})),n.d(r,"loadWeights",(function(){return we})),n.d(r,"registerLoadRouter",(function(){return w})),n.d(r,"registerSaveRouter",(function(){return _})),n.d(r,"weightsLoaderFactory",(function(){return Oe})),n.d(r,"withSaveHandler",(function(){return Ie}));var a={};n.r(a),n.d(a,"confusionMatrix",(function(){return Ue}));var i={};n.r(i),n.d(i,"toPixels",(function(){return qe})),n.d(i,"fromPixels",(function(){return Xe}));var o={};n.r(o),n.d(o,"prepareAndValidate",(function(){return Ye}));var u={};n.r(u),n.d(u,"Serializable",(function(){return Ze})),n.d(u,"SerializationMap",(function(){return Je})),n.d(u,"registerClass",(function(){return Qe}));var s={};n.r(s),n.d(s,"segOpComputeOptimalWindowSize",(function(){return hn})),n.d(s,"computeOutShape",(function(){return pn})),n.d(s,"collectGatherOpShapeInfo",(function(){return vn}));var c={};n.r(c),n.d(c,"axesAreInnerMostDims",(function(){return It.b})),n.d(c,"combineLocations",(function(){return It.c})),n.d(c,"computeOutAndReduceShapes",(function(){return It.d})),n.d(c,"expandShapeToKeepDim",(function(){return It.e})),n.d(c,"assertAxesAreInnerMostDims",(function(){return It.a})),n.d(c,"getAxesPermutation",(function(){return It.f})),n.d(c,"getUndoAxesPermutation",(function(){return It.h})),n.d(c,"getInnerMostAxes",(function(){return It.g})),n.d(c,"getBroadcastDims",(function(){return Ft.b})),n.d(c,"getReductionAxes",(function(){return Ft.c})),n.d(c,"assertAndGetBroadcastShape",(function(){return Ft.a})),n.d(c,"assertParamsConsistent",(function(){return Rt})),n.d(c,"computeOutShape",(function(){return Pt})),n.d(c,"computeDilation2DInfo",(function(){return Lt.d})),n.d(c,"computePool2DInfo",(function(){return Lt.e})),n.d(c,"computePool3DInfo",(function(){return Lt.f})),n.d(c,"computeConv2DInfo",(function(){return Lt.a})),n.d(c,"computeConv3DInfo",(function(){return Lt.b})),n.d(c,"computeDefaultPad",(function(){return Lt.c})),n.d(c,"tupleValuesAreOne",(function(){return Lt.i})),n.d(c,"eitherStridesOrDilationsAreOne",(function(){return Lt.h})),n.d(c,"convertConv2DDataFormat",(function(){return Lt.g})),n.d(c,"getFusedDyActivation",(function(){return Bt.c})),n.d(c,"getFusedBiasGradient",(function(){return Bt.b})),n.d(c,"applyActivation",(function(){return Bt.a})),n.d(c,"shouldFuse",(function(){return Bt.d})),n.d(c,"PARALLELIZE_THRESHOLD",(function(){return zt})),n.d(c,"computeOptimalWindowSize",(function(){return Ut})),n.d(c,"slice_util",(function(){return $e})),n.d(c,"upcastType",(function(){return Ct.c})),n.d(c,"getImageCenter",(function(){return Wt})),n.d(c,"getReshaped",(function(){return Vt})),n.d(c,"getPermuted",(function(){return Gt})),n.d(c,"getReshapedPermuted",(function(){return qt})),n.d(c,"getSliceBeginCoords",(function(){return Ht})),n.d(c,"getSliceSize",(function(){return Xt})),n.d(c,"prepareAndValidate",(function(){return Ye})),n.d(c,"validateUpdateShape",(function(){return Ke.validateUpdateShape})),n.d(c,"validateInput",(function(){return Ke.validateInput})),n.d(c,"calculateShapes",(function(){return Ke.calculateShapes})),n.d(c,"SELU_SCALEALPHA",(function(){return Yt.b})),n.d(c,"SELU_SCALE",(function(){return Yt.a})),n.d(c,"ERF_P",(function(){return Kt})),n.d(c,"ERF_A1",(function(){return $t})),n.d(c,"ERF_A2",(function(){return Zt})),n.d(c,"ERF_A3",(function(){return Jt})),n.d(c,"ERF_A4",(function(){return Qt})),n.d(c,"ERF_A5",(function(){return en})),n.d(c,"warn",(function(){return tn})),n.d(c,"log",(function(){return nn})),n.d(c,"mergeRealAndImagArrays",(function(){return rn})),n.d(c,"splitRealAndImagArrays",(function(){return an})),n.d(c,"complexWithEvenIndex",(function(){return on})),n.d(c,"complexWithOddIndex",(function(){return un})),n.d(c,"getComplexWithIndex",(function(){return sn})),n.d(c,"assignToTypedArray",(function(){return cn})),n.d(c,"exponents",(function(){return ln})),n.d(c,"exponent",(function(){return fn})),n.d(c,"prepareSplitSize",(function(){return dn})),n.d(c,"segment_util",(function(){return s})),n.d(c,"fromUint8ToStringArray",(function(){return mn})),n.d(c,"fromStringArrayToUint8",(function(){return gn}));var l={};n.r(l),n.d(l,"nonMaxSuppressionV3Impl",(function(){return yn.a})),n.d(l,"nonMaxSuppressionV4Impl",(function(){return yn.b})),n.d(l,"nonMaxSuppressionV5Impl",(function(){return yn.c})),n.d(l,"whereImpl",(function(){return xn.a}));var f=n(11),d=(n(215),n(1)),h=n(9),p=n(41),v=n(8),m=n(2),g=n.n(m),b=n(16),y=n(68),x=function(){function e(){Object(d.a)(this,e),this.saveRouters=[],this.loadRouters=[]}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),_=function(e){return x.registerSaveRouter(e)},w=function(e){return x.registerLoadRouter(e)},k=function(e){return x.getSaveHandlers(e)},O=function(e,t){return x.getLoadHandlers(e,t)},S="tensorflowjs",j="models_store",E="model_info_store";function C(){if(!Object(p.c)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function A(e){var t=e.result;t.createObjectStore(j,{keyPath:"modelPath"}),t.createObjectStore(E,{keyPath:"modelPath"})}var T=function(){function e(t){if(Object(d.a)(this,e),this.indexedDB=C(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(S,1);a.onupgradeneeded=function(){return A(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(j,"readonly"),u=o.objectStore(j).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){return i.close()}}else{var s,c=Object(y.g)(t),l=i.transaction(E,"readwrite"),f=l.objectStore(E),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var a=(s=i.transaction(j,"readwrite")).objectStore(j).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(E)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},l.oncomplete=function(){null==s?i.close():s.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();T.URL_SCHEME="indexeddb://";var N=function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(T.URL_SCHEME)?(t=e.slice(T.URL_SCHEME.length),new T(t)):null;var t};x.registerSaveRouter(N),x.registerLoadRouter(N);var M=function(){function e(){Object(d.a)(this,e),this.indexedDB=C()}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(S,1);r.onupgradeneeded=function(){return A(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(E,"readonly"),i=a.objectStore(E).getAll();i.onsuccess=function(){var t,n={},r=Object(v.a)(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(T.URL_SCHEME)?r.slice(T.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(S,1);a.onupgradeneeded=function(){return A(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(E,"readwrite"),u=o.objectStore(E),s=u.get(t);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=u.delete(t),o=function(){var a=(n=i.transaction(j,"readwrite")).objectStore(j).delete(t);a.onsuccess=function(){return e(s.result.modelArtifactsInfo)},a.onerror=function(e){return r(s.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(s.error)}},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=n(20),I="/",F="tensorflowjs_models",R="info",P="model_topology",L="weight_specs",B="weight_data",z="model_metadata";function U(e){return{info:[F,e,R].join(I),topology:[F,e,P].join(I),weightSpecs:[F,e,L].join(I),weightData:[F,e,B].join(I),modelMetadata:[F,e,z].join(I)}}function W(e){var t=e.split(I);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(I)}var V=function(){function e(t){if(Object(d.a)(this,e),!Object(p.c)().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=U(this.modelPath)}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Object(y.g)(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Object(y.a)(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 20:throw e.prev=20,e.t0=e.catch(7),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 28:case"end":return e.stop()}}),e,this,[[7,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(u=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Object(y.b)(u),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();V.URL_SCHEME="localstorage://";var G=function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(V.URL_SCHEME)?(t=e.slice(V.URL_SCHEME.length),new V(t)):null;var t};x.registerSaveRouter(G),x.registerLoadRouter(G);var q=function(){function e(){Object(d.a)(this,e),Object(D.b)(Object(p.c)().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Object(D.b)("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Object(h.a)(e,[{key:"listModels",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=F+I,r=I+R,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=W(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(V.URL_SCHEME)?a.slice(V.URL_SCHEME.length):a,n=U(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),e.abrupt("return",r);case 10:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),H="://",X=function(){function e(){Object(d.a)(this,e),this.managers={}}return Object(h.a)(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Object(D.b)(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(H)&&(t=t.slice(0,t.indexOf(H))),Object(D.b)(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Object(D.b)(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Y(e){if(-1===e.indexOf(H))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(X.getSchemes().join(",")));return{scheme:e.split(H)[0],path:e.split(H)[1]}}function K(e,t){return $.apply(this,arguments)}function $(){return($=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],Object(D.b)(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),a=x.getLoadHandlers(t),Object(D.b)(a.length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Object(D.b)(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],o=x.getSaveHandlers(n),Object(D.b)(o.length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Object(D.b)(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),u=o[0],s=Y(t).scheme,c=Y(t).path,l=s===Y(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,X.getManager(s).removeModel(c);case 19:return e.next=21,u.save(f);case 21:if(d=e.sent,!r||l){e.next=25;break}return e.next=25,X.getManager(s).removeModel(c);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=X.getSchemes(),n={},r=Object(v.a)(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,X.getManager(i).listModels();case 9:for(u in o=e.sent)n[i+H+u]=o[u];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y(t),r=X.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(b.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",K(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",K(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Object(p.c)().get("IS_BROWSER")){Object(p.c)().setPlatform("browser",new ie);try{X.registerManager(V.URL_SCHEME,new q)}catch(wn){}try{X.registerManager(T.URL_SCHEME,new M)}catch(wn){}}n(441);var oe=n(77),ue=n(27),se=n(101),ce=n(243),le=n(15);Object(f.b)();var fe={buffer:oe.a,cast:ue.a,clone:se.a,print:ce.a};Object(le.f)(fe);var de=n(12);function he(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var pe=function(){function e(t){if(Object(d.a)(this,e),!Object(p.c)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,e.next=18,he((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:if(null==t.weightData){e.next=24;break}return(u=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=n,e.next=24,he((function(){return u.dispatchEvent(new MouseEvent("click"))}));case 24:return e.abrupt("return",{modelArtifactsInfo:Object(y.g)(t)});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();pe.URL_SCHEME="downloads://";var ve=function(){function e(t){if(Object(d.a)(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.files=t}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),u=o.modelTopology;if(null!=u){0===n.length&&e({modelTopology:u});var s=o.weightsManifest;if(null!=s){var c;try{c=r.checkManifestAndWeightFiles(s,n)}catch(wn){return void a(wn)}var l=[],f=[],d=[];s.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),l.push.apply(l,Object(de.a)(e.weights))})),s.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=f.indexOf(t);if(d[a]=r,-1===d.indexOf(null)){var i={modelTopology:u,weightSpecs:l,weightData:Object(y.d)(d),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),e(i)}},n.onerror=function(e){return a("Failed to weights data from file of path '".concat(t,"'."))},n.readAsArrayBuffer(c[t])}))}))}else a(new Error("weightManifest field is missing from file ".concat(t.name)))}else a(new Error("modelTopology field is missing from file ".concat(t.name)))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkManifestAndWeightFiles",value:function(e,t){var n,r=[],a=t.map((function(e){return Object(y.c)(e.name)})),i={},o=Object(v.a)(e);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(e){var n=Object(y.c)(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[e]=t[a.indexOf(n)]}))}}catch(wn){o.e(wn)}finally{o.f()}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(t.length,")."));return i}}]),e}();function me(e){return new ve(e)}x.registerSaveRouter((function(e){return Object(p.c)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pe.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new pe(e)}(e.slice(pe.URL_SCHEME.length)):null}));var ge=n(7);function be(e,t,n,r){!function(e){Object(D.b)(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Object(D.b)(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Object(D.b)(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Object(D.b)(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}var ye=n(227);function xe(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Object(p.c)().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,be(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(u=e.t0,s=u.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(s);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,be(s,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Oe((function(e){return xe(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return function(){var t=Object(b.a)(g.a.mark((function t(n){var r,a,i,o,u,s,c,l,f,d,h,p,v=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},u=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=ye.a[r]*D.O(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),u[n]=!0)})):l(),s.push(e.name),n+=c}))})),u.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!u[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(s.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,h={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[p+a].byteLength;for(var i=new ArrayBuffer(r),u=new Uint8Array(i),s=0,c=0;c<t;c++){var l=new Uint8Array(d[p+c]);u.set(l,s),s+=l.byteLength}o[e].forEach((function(e){var t=i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(y.e)(t,[e.manifestEntry]);for(var r in n)h[r]=n[r]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Se=function(){function e(t,n){if(Object(d.a)(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Object(D.b)("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Object(p.c)().platform.fetch,Object(D.b)(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Object(D.b)(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=13,this.fetch(this.path,n);case 13:if(!(i=e.sent).ok){e.next=18;break}return e.abrupt("return",{modelArtifactsInfo:Object(y.g)(t),responses:[i]});case 18:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t,n,r,a,i,o,u,s,c,l,f,d,h,p,v,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,u=n.convertedBy,s=n.format,c=n.signature,l=n.userDefinedMetadata,null!=a||null!=i){e.next=25;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 25:if(null==i){e.next=32;break}return e.next=28,this.loadWeights(i);case 28:h=e.sent,p=Object(ge.a)(h,2),f=p[0],d=p[1];case 32:return v={modelTopology:a,weightSpecs:f,weightData:d,generatedBy:o,convertedBy:u,format:s},null!=c&&(v.signature=c),null!=l&&(v.userDefinedMetadata=l),(m=n.modelInitializer)&&(v.modelInitializer=m),e.abrupt("return",v);case 38:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r,a,i,o,u,s,c,l,f,d,h,p,m,b,x,_,w,k;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=je(n),a=Object(ge.a)(r,2),i=a[0],o=a[1],u=this.weightPathPrefix||i,s=[],c=Object(v.a)(t);try{for(c.s();!(l=c.n()).done;)f=l.value,s.push.apply(s,Object(de.a)(f.weights))}catch(wn){c.e(wn)}finally{c.f()}d=[],h=[],p=Object(v.a)(t);try{for(p.s();!(m=p.n()).done;){b=m.value,x=Object(v.a)(b.paths);try{for(x.s();!(_=x.n()).done;)w=_.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(w)):d.push(u+w+o)}catch(wn){x.e(wn)}finally{x.f()}}}catch(wn){p.e(wn)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=de.a,e.next=16,Promise.all(h);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,xe(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return k=e.sent,e.abrupt("return",[s,Object(y.d)(k)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function je(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Ee(e){return null!=e.match(Se.URL_SCHEME_REGEX)}Se.URL_SCHEME_REGEX=/^https?:\/\//;var Ce=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Ee(e)})):Ee(e))?Ae(e,t):null};function Ae(e,t){return new Se(e,t)}function Te(e,t){return Ae(e,t)}x.registerSaveRouter(Ce),x.registerLoadRouter(Ce);var Ne=function(){function e(t){Object(d.a)(this,e),this.modelArtifacts=t}return Object(h.a)(e,[{key:"load",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Me=function(){function e(t){Object(d.a)(this,e),this.saveHandler=t}return Object(h.a)(e,[{key:"save",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function De(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new Ne(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ne({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ne({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Ie(e){return new Me(e)}var Fe=n(5),Re=n(45),Pe=n(159),Le=n(10),Be=n(81);var ze,Ue=Object(Le.b)({confusionMatrix_:function(e,t,n){var r=Object(Fe.a)(e,"labels","confusionMatrix"),a=Object(Fe.a)(t,"predictions","confusionMatrix");D.b(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),D.b(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),D.b(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),D.b(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),D.b(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=Object(Pe.a)(Object(ue.a)(r,"int32"),n),o=Object(Pe.a)(Object(ue.a)(a,"int32"),n),u=Object(Be.a)(i),s=Object(Re.a)(u,o);return Object(ue.a)(s,"int32")}}),We=n(4),Ve=n(94),Ge=n(271);function qe(e,t){return He.apply(this,arguments)}function He(){return(He=Object(b.a)(g.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h,p,v,m,b,y,x;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(Fe.a)(t,"img","toPixels"),t instanceof le.a||(a=r,r=Object(ue.a)(a,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=Object(ge.a)(i,2),u=o[0],s=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,d=new Uint8ClampedArray(s*u*4),h=0;case 16:if(!(h<u*s)){e.next=41;break}p=[0,0,0,255],v=0;case 19:if(!(v<c)){e.next=33;break}if(m=l[h*c+v],"float32"!==r.dtype){e.next=26;break}if(!(m<0||m>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(m,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(m<0||m>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(m,"."));case 29:1===c?(p[0]=m*f,p[1]=m*f,p[2]=m*f):p[v]=m*f;case 30:v++,e.next=19;break;case 33:d[(b=4*h)+0]=Math.round(p[0]),d[b+1]=Math.round(p[1]),d[b+2]=Math.round(p[2]),d[b+3]=Math.round(p[3]);case 38:++h,e.next=16;break;case 41:return null!=n&&(n.width=s,n.height=u,y=n.getContext("2d"),x=new ImageData(d,s,u),y.putImageData(x,0,0)),r!==t&&r.dispose(),e.abrupt("return",d);case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=Object(Le.b)({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,u=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));u=!0}if(a){var s=2;if(a&&e.readyState<s)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=Object(Ve.c)(We.hb,f.a.backendName);if(null!=c){var l={pixels:e},d={numChannels:t};return f.a.runKernel(We.hb,l,d)}var h,p,v=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],m=Object(ge.a)(v,2),g=m[0],b=m[1];if(o?h=e.getContext("2d").getImageData(0,0,g,b).data:r||n?h=e.data:(i||a||u)&&(null==ze&&(ze=document.createElement("canvas").getContext("2d")),ze.canvas.width=g,ze.canvas.height=b,ze.drawImage(e,0,0,g,b),h=ze.getImageData(0,0,g,b).data),4===t)p=new Int32Array(h);else{var y=g*b;p=new Int32Array(y*t);for(var x=0;x<y;x++)for(var _=0;_<t;++_)p[x*t+_]=h[4*x+_]}var w=[b,g,t];return Object(Ge.a)(p,w,"int32")}});function Ye(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Object(D.O)(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,u=0;u<a.length-1;++u)o*=a[u];var s=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=s[f],c.push(s[f]);var d=[].concat(Object(de.a)(Object(D.j)(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,d]}var Ke=n(174),$e=n(175),Ze=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Je=function(){function e(){Object(d.a)(this,e),this.classNameMap={}}return Object(h.a)(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Qe(e){Object(D.b)(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Object(D.b)("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Object(D.b)(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Je.register(e)}var et=n(40),tt=n(204),nt=n(22),rt="3.2.0",at=n(13),it=n(14),ot=n(43),ut=n(29),st=n(31),ct=n(21),lt=n(64),ft=n(42),dt=n(37),ht=n(60),pt=n(32),vt=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Object(ot.d)(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return Object(ht.f)(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Object(ot.d)(this.iterations_)}},{key:"saveIterations",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:Object(pt.a)(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ze);Object.defineProperty(vt,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var mt=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(d.a)(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=f.a.backend.epsilon()),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;Object(ot.t)((function(){var e=Object(ut.a)(Object(ct.a)(o,t.rho),Object(ct.a)(Object(ft.a)(i),1-t.rho)),n=Object(ct.a)(Object(st.a)(Object(lt.a)(Object(ut.a)(u,t.epsilon)),Object(lt.a)(Object(ut.a)(o,t.epsilon))),i),r=Object(ut.a)(Object(ct.a)(u,t.rho),Object(ct.a)(Object(ft.a)(n),1-t.rho));o.assign(e),u.assign(r);var s=Object(ut.a)(Object(ct.a)(n,-t.learningRate),a);a.assign(s)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Object(ot.d)(this.accumulatedGrads.map((function(e){return e.variable}))),Object(ot.d)(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(de.a)(this.accumulatedGrads),Object(de.a)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(vt);mt.className="Adadelta",Qe(mt);var gt=n(177),bt=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Object(ot.t)((function(){return Object(gt.a)(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Object(ot.t)((function(){var e=Object(ut.a)(o,Object(ft.a)(i));o.assign(e);var n=Object(ut.a)(Object(ct.a)(Object(st.a)(i,Object(lt.a)(Object(ut.a)(e,f.a.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Object(ot.d)(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(vt);bt.className="Adagrad",Qe(bt);var yt=n(85),xt=n(30),_t=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(d.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Object(ot.t)((function(){i.accBeta1=Object(pt.a)(r).variable(),i.accBeta2=Object(pt.a)(a).variable()})),null==o&&(i.epsilon=f.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(ot.t)((function(){var r=Object(xt.a)(1,t.accBeta1),a=Object(xt.a)(1,t.accBeta2);n.forEach((function(n,i){var o=f.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(ot.t)((function(){return Object(dt.a)(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Object(ot.t)((function(){return Object(dt.a)(o).variable(false)}))});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=Object(ut.a)(Object(ct.a)(s,t.beta1),Object(ct.a)(u,1-t.beta1)),d=Object(ut.a)(Object(ct.a)(c,t.beta2),Object(ct.a)(Object(ft.a)(u),1-t.beta2)),h=Object(st.a)(l,r),p=Object(st.a)(d,a);s.assign(l),c.assign(d);var v=Object(ut.a)(Object(ct.a)(Object(st.a)(h,Object(ut.a)(Object(lt.a)(p),t.epsilon)),-t.learningRate),o);o.assign(v)}})),t.accBeta1.assign(Object(ct.a)(t.accBeta1,t.beta1)),t.accBeta2.assign(Object(ct.a)(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Object(ot.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Object(ot.d)(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(de.a)(this.accumulatedFirstMoment),Object(de.a)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Object(ot.t)((function(){r.accBeta1.assign(Object(yt.a)(r.beta1,r.iterations_+1)),r.accBeta2.assign(Object(yt.a)(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(vt);_t.className="Adam",Qe(_t);var wt=n(72),kt=n(136),Ot=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Object(d.a)(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=u,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Object(ot.t)((function(){i.iteration=Object(pt.a)(0).variable(),i.accBeta1=Object(pt.a)(r).variable()})),null==o&&(i.epsilon=f.a.backend.epsilon()),i}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Object(ot.t)((function(){var r=Object(xt.a)(1,t.accBeta1),a=Object(st.a)(-t.learningRate,Object(ut.a)(Object(ct.a)(t.iteration,t.decay),1));n.forEach((function(n,i){var o=f.a.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Object(dt.a)(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Object(dt.a)(o).variable(false)});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=Object(ut.a)(Object(ct.a)(s,t.beta1),Object(ct.a)(u,1-t.beta1)),d=Object(ct.a)(c,t.beta2),h=Object(wt.a)(u),p=Object(kt.a)(d,h);s.assign(l),c.assign(p);var v=Object(ut.a)(Object(ct.a)(Object(st.a)(a,r),Object(st.a)(l,Object(ut.a)(p,t.epsilon))),o);o.assign(v)}})),t.iteration.assign(Object(ut.a)(t.iteration,1)),t.accBeta1.assign(Object(ct.a)(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Object(ot.d)(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Object(ot.d)(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(vt);Ot.className="Adamax",Qe(Ot);var St=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=f.a.registeredVariables[n];Object(ot.t)((function(){var e=Object(ut.a)(Object(ct.a)(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Object(ot.l)(Object(pt.a)(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(vt);St.className="SGD",Qe(St);var jt=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(d.a)(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Object(pt.a)(a.momentum),a}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Object(ot.t)((function(){var e,n=Object(ut.a)(Object(ct.a)(t.m,i),o);e=t.useNesterov?Object(ut.a)(Object(ct.a)(t.c,Object(ut.a)(o,Object(ct.a)(n,t.m))),a):Object(ut.a)(Object(ct.a)(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Object(ot.d)(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(St);jt.className="Momentum",Qe(jt);var Et=function(e){Object(at.a)(n,e);var t=Object(it.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(d.a)(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=u,null==o&&(r.epsilon=f.a.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return Object(h.a)(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=f.a.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Object(ot.t)((function(){return Object(dt.a)(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var u=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Object(ot.t)((function(){var e=Object(ut.a)(Object(ct.a)(u,t.decay),Object(ct.a)(Object(ft.a)(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Object(ut.a)(Object(ct.a)(n,t.decay),Object(ct.a)(o,1-t.decay)),c=Object(st.a)(Object(ct.a)(o,t.learningRate),Object(lt.a)(Object(xt.a)(e,Object(ut.a)(Object(ft.a)(i),t.epsilon)))),l=Object(ut.a)(Object(ct.a)(s,t.momentum),c);u.assign(e),n.assign(i),s.assign(l);var f=Object(xt.a)(a,l);a.assign(f)}else{var d=Object(ut.a)(Object(ct.a)(u,t.decay),Object(ct.a)(Object(ft.a)(o),1-t.decay)),h=Object(ut.a)(Object(ct.a)(s,t.momentum),Object(st.a)(Object(ct.a)(o,t.learningRate),Object(lt.a)(Object(ut.a)(d,t.epsilon))));u.assign(d),s.assign(h);var p=Object(xt.a)(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Object(ot.d)(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Object(ot.d)(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Object(ot.d)(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Object(de.a)(this.accumulatedMeanSquares),Object(de.a)(this.accumulatedMoments)),this.centered&&t.push.apply(t,Object(de.a)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(vt);Et.className="RMSProp",Qe(Et);var Ct=n(135),At=n(39),Tt=n(61),Nt=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"sgd",value:function(e){return new St(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new jt(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Et(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new _t(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new mt(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Ot(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new bt(e,t)}}]),e}(),Mt={sgd:Nt.sgd,momentum:Nt.momentum,adadelta:Nt.adadelta,adagrad:Nt.adagrad,rmsprop:Nt.rmsprop,adamax:Nt.adamax,adam:Nt.adam},Dt=n(363),It=n(67),Ft=n(33);function Rt(e,t){var n=e[0].length;e.forEach((function(e,t){D.b(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),D.b(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)D.b(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Pt(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Lt=n(54),Bt=n(73),zt=30;function Ut(e){return e<=zt?e:Object(D.G)(e,Math.floor(Math.sqrt(e)))}function Wt(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function Vt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Gt(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],u=1;u<e;++u)u>=2*t+1||u%2===1?o.push(u):i.push(u);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function qt(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Ht(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Xt(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Yt=n(223),Kt=.3275911,$t=.254829592,Zt=-.284496736,Jt=1.421413741,Qt=-1.453152027,en=1.061405429;function tn(){var e;Object(p.c)().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}function nn(){var e;Object(p.c)().getBool("IS_TEST")||(e=console).log.apply(e,arguments)}function rn(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function an(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function on(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function un(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function sn(e,t){return{real:e[2*t],imag:e[2*t+1]}}function cn(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ln(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function fn(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Object(D.b)(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Object(D.b)(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Object(D.b)(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function hn(e,t){var n,r=!1;for(e<=zt?(n=e,r=!0):n=Object(D.G)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Object(D.G)(e,n+1);return n}function pn(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function vn(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var u=e.shape[n],s=[],c=1,l=1,f=1,d=0;d<r;++d)s.push(e.shape[d]),c*=e.shape[d];for(var h=r;h<n;h++)s.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<a;p++)s.push(t.shape[p]);for(var v=n+1;v<i;v++)s.push(e.shape[v]),f*=e.shape[v];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:u,outputShape:s}}function mn(e){try{return e.map((function(e){return Object(nt.decodeString)(e)}))}catch(wn){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(wn))}}function gn(e){return e.map((function(e){return Object(nt.encodeString)(e)}))}var bn=n(242),yn=n(115),xn=n(275),_n=n(220)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){e.exports=n(437)},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return d}));var r=n(7),a=n(0);function i(e,t,n,r,i){var u=t.inputParams[e];if(u&&void 0!==u.inputIndexStart){var s=u.inputIndexStart,c=0===u.inputIndexEnd?void 0:void 0===u.inputIndexEnd?s+1:u.inputIndexEnd;if("tensor"===u.type)return o(t.inputNames[u.inputIndexStart],n,r,i);if("tensors"===u.type)return t.inputNames.slice(s,c).map((function(e){return o(e,n,r,i)}));var l=o(t.inputNames.slice(s)[0],n,r,i),f=l.dataSync();return"number"===u.type?f[0]:a.util.toNestedArray(l.shape,f)}var d=t.attrParams[e];return d&&d.value}function o(e,t,n,a){var i=l(e),o=Object(r.a)(i,2),u=o[0],s=o[1];if(null!=a){var f=a.getHashTableHandleByName(u);if(null!=f)return f}var d=n.currentContextIds.find((function(e){return!!t[c(u,e)]}));return void 0!==d?t[c(u,d)][s]:void 0}function u(e,t,n){return t[c(e,n.currentContextId)]}function s(e,t){var n=l(e),a=Object(r.a)(n,2),i=a[0],o=a[1];return[c(i,t&&t.currentContextId),o]}function c(e,t){return t?"".concat(e,"-").concat(t):e}function l(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function f(e,t,n){var r=i("pad",e,t,n);if("explicit"===r){r=i("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],o=0;o<4;o++)a[o][0]=r[2*o],a[o][1]=r[2*o+1];return a}return r}function d(e){return e.kept?e:Object(a.clone)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return p})),n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return m})),n.d(t,"o",(function(){return g})),n.d(t,"r",(function(){return b})),n.d(t,"p",(function(){return y})),n.d(t,"q",(function(){return x})),n.d(t,"s",(function(){return _})),n.d(t,"t",(function(){return w})),n.d(t,"u",(function(){return k})),n.d(t,"v",(function(){return O})),n.d(t,"w",(function(){return S})),n.d(t,"x",(function(){return j})),n.d(t,"y",(function(){return E})),n.d(t,"z",(function(){return C})),n.d(t,"A",(function(){return A})),n.d(t,"B",(function(){return T})),n.d(t,"C",(function(){return N})),n.d(t,"D",(function(){return M})),n.d(t,"E",(function(){return D})),n.d(t,"F",(function(){return I})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return R})),n.d(t,"I",(function(){return P})),n.d(t,"J",(function(){return L})),n.d(t,"L",(function(){return B})),n.d(t,"K",(function(){return z})),n.d(t,"M",(function(){return U})),n.d(t,"N",(function(){return W})),n.d(t,"O",(function(){return V})),n.d(t,"P",(function(){return G})),n.d(t,"Q",(function(){return q})),n.d(t,"R",(function(){return H})),n.d(t,"S",(function(){return X})),n.d(t,"U",(function(){return Y})),n.d(t,"T",(function(){return K})),n.d(t,"kc",(function(){return $})),n.d(t,"V",(function(){return Z})),n.d(t,"W",(function(){return J})),n.d(t,"Y",(function(){return Q})),n.d(t,"X",(function(){return ee})),n.d(t,"Z",(function(){return te})),n.d(t,"ab",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return ae})),n.d(t,"db",(function(){return ie})),n.d(t,"eb",(function(){return oe})),n.d(t,"fb",(function(){return ue})),n.d(t,"gb",(function(){return se})),n.d(t,"ib",(function(){return ce})),n.d(t,"mb",(function(){return le})),n.d(t,"lb",(function(){return fe})),n.d(t,"nb",(function(){return de})),n.d(t,"ob",(function(){return he})),n.d(t,"qb",(function(){return pe})),n.d(t,"pb",(function(){return ve})),n.d(t,"rb",(function(){return me})),n.d(t,"sb",(function(){return ge})),n.d(t,"tb",(function(){return be})),n.d(t,"ub",(function(){return ye})),n.d(t,"xb",(function(){return xe})),n.d(t,"yb",(function(){return _e})),n.d(t,"zb",(function(){return we})),n.d(t,"Ab",(function(){return ke})),n.d(t,"Bb",(function(){return Oe})),n.d(t,"Cb",(function(){return Se})),n.d(t,"Eb",(function(){return je})),n.d(t,"Fb",(function(){return Ee})),n.d(t,"Gb",(function(){return Ce})),n.d(t,"Db",(function(){return Ae})),n.d(t,"vb",(function(){return Te})),n.d(t,"wb",(function(){return Ne})),n.d(t,"Hb",(function(){return Me})),n.d(t,"Nb",(function(){return De})),n.d(t,"Ib",(function(){return Ie})),n.d(t,"Lb",(function(){return Fe})),n.d(t,"Jb",(function(){return Re})),n.d(t,"Kb",(function(){return Pe})),n.d(t,"Mb",(function(){return Le})),n.d(t,"Ob",(function(){return Be})),n.d(t,"Pb",(function(){return ze})),n.d(t,"Qb",(function(){return Ue})),n.d(t,"Rb",(function(){return We})),n.d(t,"Sb",(function(){return Ve})),n.d(t,"Tb",(function(){return Ge})),n.d(t,"Ub",(function(){return qe})),n.d(t,"Vb",(function(){return He})),n.d(t,"Zb",(function(){return Xe})),n.d(t,"Wb",(function(){return Ye})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"Yb",(function(){return $e})),n.d(t,"bc",(function(){return Ze})),n.d(t,"ac",(function(){return Je})),n.d(t,"cc",(function(){return Qe})),n.d(t,"dc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return at})),n.d(t,"ic",(function(){return it})),n.d(t,"jc",(function(){return ot})),n.d(t,"lc",(function(){return ut})),n.d(t,"mc",(function(){return st})),n.d(t,"oc",(function(){return ct})),n.d(t,"rc",(function(){return lt})),n.d(t,"sc",(function(){return ft})),n.d(t,"pc",(function(){return dt})),n.d(t,"qc",(function(){return ht})),n.d(t,"nc",(function(){return pt})),n.d(t,"tc",(function(){return vt})),n.d(t,"vc",(function(){return mt})),n.d(t,"wc",(function(){return gt})),n.d(t,"xc",(function(){return bt})),n.d(t,"yc",(function(){return yt})),n.d(t,"zc",(function(){return xt})),n.d(t,"Ec",(function(){return _t})),n.d(t,"Cc",(function(){return wt})),n.d(t,"Dc",(function(){return kt})),n.d(t,"Bc",(function(){return Ot})),n.d(t,"Ac",(function(){return St})),n.d(t,"Gc",(function(){return jt})),n.d(t,"Kc",(function(){return Et})),n.d(t,"Qc",(function(){return Ct})),n.d(t,"Hc",(function(){return At})),n.d(t,"Jc",(function(){return Tt})),n.d(t,"Fc",(function(){return Nt})),n.d(t,"Mc",(function(){return Mt})),n.d(t,"Lc",(function(){return Dt})),n.d(t,"Pc",(function(){return It})),n.d(t,"Ic",(function(){return Ft})),n.d(t,"Oc",(function(){return Rt})),n.d(t,"Rc",(function(){return Pt})),n.d(t,"Sc",(function(){return Lt})),n.d(t,"Tc",(function(){return Bt})),n.d(t,"Uc",(function(){return zt})),n.d(t,"Vc",(function(){return Ut})),n.d(t,"Wc",(function(){return Wt})),n.d(t,"Xc",(function(){return Vt})),n.d(t,"Yc",(function(){return Gt})),n.d(t,"Zc",(function(){return qt})),n.d(t,"Nc",(function(){return Ht})),n.d(t,"hb",(function(){return Xt})),n.d(t,"uc",(function(){return Yt})),n.d(t,"ad",(function(){return Kt})),n.d(t,"jb",(function(){return $t})),n.d(t,"kb",(function(){return Zt}));var r="Abs",a="Acos",i="Acosh",o="Add",u="AddN",s="All",c="Any",l="ArgMax",f="ArgMin",d="Asin",h="Asinh",p="Atan",v="Atanh",m="Atan2",g="AvgPool",b="AvgPoolGrad",y="AvgPool3D",x="AvgPool3DGrad",_="BatchMatMul",w="BatchToSpaceND",k="Bincount",O="BroadcastTo",S="Cast",j="Ceil",E="ClipByValue",C="Complex",A="ComplexAbs",T="Concat",N="Conv2D",M="Conv2DBackpropFilter",D="Conv2DBackpropInput",I="Conv3D",F="Conv3DBackpropFilterV2",R="Conv3DBackpropInputV2",P="Cos",L="Cosh",B="Cumsum",z="CropAndResize",U="DenseBincount",W="DepthToSpace",V="DepthwiseConv2dNative",G="DepthwiseConv2dNativeBackpropFilter",q="DepthwiseConv2dNativeBackpropInput",H="Diag",X="Dilation2D",Y="Dilation2DBackpropInput",K="Dilation2DBackpropFilter",$="RealDiv",Z="Elu",J="EluGrad",Q="Erf",ee="Equal",te="Exp",ne="ExpandDims",re="Expm1",ae="FFT",ie="Fill",oe="FlipLeftRight",ue="Floor",se="FloorDiv",ce="FusedBatchNorm",le="GatherV2",fe="GatherNd",de="Greater",he="GreaterEqual",pe="Identity",ve="IFFT",me="Imag",ge="IsFinite",be="IsInf",ye="IsNan",xe="LeakyRelu",_e="Less",we="LessEqual",ke="LinSpace",Oe="Log",Se="Log1p",je="LogicalAnd",Ee="LogicalNot",Ce="LogicalOr",Ae="LogSoftmax",Te="LRN",Ne="LRNGrad",Me="Max",De="Maximum",Ie="MaxPool",Fe="MaxPoolGrad",Re="MaxPool3D",Pe="MaxPool3DGrad",Le="MaxPoolWithArgmax",Be="Mean",ze="Min",Ue="Minimum",We="MirrorPad",Ve="Mod",Ge="Multinomial",qe="Multiply",He="Neg",Xe="NotEqual",Ye="NonMaxSuppressionV3",Ke="NonMaxSuppressionV4",$e="NonMaxSuppressionV5",Ze="OnesLike",Je="OneHot",Qe="Pack",et="PadV2",tt="Pool",nt="Pow",rt="Prelu",at="Prod",it="Range",ot="Real",ut="Reciprocal",st="Relu",ct="Reshape",lt="ResizeNearestNeighbor",ft="ResizeNearestNeighborGrad",dt="ResizeBilinear",ht="ResizeBilinearGrad",pt="Relu6",vt="Reverse",mt="Round",gt="Rsqrt",bt="ScatterNd",yt="Select",xt="Selu",_t="Slice",wt="Sin",kt="Sinh",Ot="Sign",St="Sigmoid",jt="Softplus",Et="Sqrt",Ct="Sum",At="SpaceToBatchND",Tt="SplitV",Nt="Softmax",Mt="SquaredDifference",Dt="Square",It="Sub",Ft="SparseToDense",Rt="StridedSlice",Pt="Tan",Lt="Tanh",Bt="Tile",zt="TopK",Ut="Transpose",Wt="Unique",Vt="Unpack",Gt="UnsortedSegmentSum",qt="ZerosLike",Ht="Step",Xt="FromPixels",Yt="RotateWithOffset",Kt="_FusedMatMul",$t="FusedConv2D",Zt="FusedDepthwiseConv2D"},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(11),a=n(41),i=n(15),o=n(20),u=n(22);function s(e,t){var n=e;if(Object(o.A)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Object(o.A)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Object(a.c)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&c(e,r,[]),r}function c(e,t,n){if(n=n||[],Array.isArray(e)||Object(o.A)(e)){Object(o.b)(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Object(o.b)(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)c(e[a],r,n.concat(a))}else Object(o.b)(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof i.a)return l(a,e.dtype,t,n),e;var c=Object(o.r)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!Object(o.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var f=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(f,"'"))}var d=s(e,c);Object(o.A)(e)||Array.isArray(e)||(e=[e]);var h=!0,p="string"!==c?Object(u.toTypedArray)(e,c):Object(o.m)(e,[],h);return r.a.makeTensor(p,d,c)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return f(e,"".concat(t,"[").concat(a,"]"),n,r)}))}},function(e,t,n){"use strict";e.exports=n(428)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(277);var a=n(145),i=n(278);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}(e,t)||Object(a.a)(e,t)||Object(i.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(145);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(11),a=n(20),i="__op";function o(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;var u=function(){r.a.startScope(n);try{var e=o.apply(void 0,arguments);return Object(a.x)(e)&&console.error("Cannot return a Promise inside of tidy."),r.a.endScope(e),e}catch(t){throw r.a.endScope(null),t}};return Object.defineProperty(u,"name",{value:n,configurable:!0}),u}},function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return C}));var r=n(8),a=n(12),i=n(2),o=n.n(i),u=n(16),s=n(1),c=n(9),l=n(220),f=n(41),d=n(163),h=n(4),p=n(94),v=n(22),m=n(20),g=function(){function e(t,n){Object(s.a)(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new b)}return Object(c.a)(e,[{key:"profileKernel",value:function(e,t,n){var a,i,o=function(){a=n()},u=v.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();var s,c=Object(r.a)(a);try{for(c.s();!(s=c.n()).done;){s.value.dataSync()}}catch(h){c.e(h)}finally{c.f()}i=Promise.resolve({kernelMs:v.now()-u})}if(Object(f.c)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=a[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},d=0;d<a.length;d++)l(d);return{kernelName:e,outputs:a,inputs:t,timeMs:i.then((function(e){return e.kernelMs})),extraInfo:i.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var b=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?m.L("".concat(r,"ms"),9):r.error,u=m.L(e,25),s=t.rank,c=t.size,l=m.L(t.shape.toString(),14),f="";for(var d in a){var h=a[d];if(null!=h){var p=h.shape||t.shape,v=p.length;f+="".concat(d,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(u,"\t%c").concat(o,"\t%c").concat(s,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function y(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var u=e[o],s=u.inputs;for(var c in s){for(var l=s[c],f=!1,d=0;d<t.length;d++)if(r[l.id]){u.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[u.id]=!0;break}if(f)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,b=0;b<m.outputs.length;b++)if(h[m.outputs[b].id]){for(var y in g)h[g[y].id]=!0,p[m.id]=!0;break}for(var x=[],_=0;_<e.length;_++){var w=e[_];if(a[w.id]&&p[w.id]){var k={};for(var O in w.inputs){var S=w.inputs[O];r[S.id]&&(k[O]=S)}var j=Object.assign({},w);j.inputs=k,j.outputs=w.outputs,x.push(j)}}return x}function x(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var u=i.gradient(o),s=function(t){if(!(t in u))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(u),"."));var a=n((function(){return u[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!m.a(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var s=e[o.id];e[o.id]=r(s,a),s.dispose()}};for(var c in i.inputs)s(c)},i=t.length-1;i>=0;i--)a(i)}var _=n(15),w=n(40);function k(e){return null!=e.kernelName}var O=function(){function e(){Object(s.a)(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Object(c.a)(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),S=function(){function e(t){Object(s.a)(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new O}return Object(c.a)(e,[{key:"ready",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new g(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Object(p.d)(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Object(p.d)(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof l.b||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=C.runKernel(h.qb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return C.runKernel(h.w,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(!(null!=Object(p.c)(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),u=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=k(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(k(e)){var l=e.kernelName,f=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var h=Object(p.c)(l,this.backendName);m.b(null!=h,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:f,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var u=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(u)}return n}}else{var v=e.forwardFunc,g=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return v(a.backend,g)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var b,y=e.inputs,x=e.attrs,_=k(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(b=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(b),t=b.outputs):t=n()})),o&&this.addTapeNode(c,y,t,_,i,x),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-u,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(e){return null!=y[e]?y[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:b.timeMs,extraInfo:b.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Object(p.b)(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(m.b(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var u=n.filter((function(e,t){return o[t]}));return a.concat(u)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&m.z(e[0])&&(a=e.map((function(e){return v.encodeString(e)})));var i=r.write(a,t,n),o=new _.a(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var u=this.state.tensorInfo.get(i),s=Object(m.f)(a);this.state.numBytes+=s-u.bytes,u.bytes=s}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){n=n||"float32";var a=new _.a(t,n,e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new _.c(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*m.g(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof _.c||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*m.g(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,i,u,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,i=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Object(a.a)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-i,u=Object(r.a)(this.state.activeProfile.kernels),e.prev=12,u.s();case 14:if((s=u.n()).done){e.next=24;break}return c=s.value,e.next=18,c.kernelTimeMs;case 18:return c.kernelTimeMs=e.sent,e.next=21,c.extraInfo;case 21:c.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},s=Object(p.b)(e);null!=s&&(r=s.gradFunc),null!=r&&(u.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=m.F(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(u)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Object(w.getTensorsInContainer)(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(m.b(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));m.b(o instanceof _.a,(function(){return"The result y returned by f() must be a tensor."}));var u=y(this.state.activeTape,t,o);if(!i&&0===u.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[o.id]=null==n?j(o.shape):n,x(e,u,(function(e){return a.tidy(e)}),A);var i=t.map((function(t){return e[t.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){var t,n=Object(r.a)(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(a){n.e(a)}finally{n.f()}})),a.state.activeTape=null),{value:o,grads:i}}))}},{key:"customGrad",value:function(e){var t=this;return m.b(m.u(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;m.b(r.every((function(e){return e instanceof _.a})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var u=function(t,n){return i=e.apply(void 0,[].concat(r,[n])),m.b(i.value instanceof _.a,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),m.b(m.u(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},s=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];m.b(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),m.b(a.every((function(e){return e instanceof _.a})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:u,backwardsFunc:s,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(v.now)(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Object(v.now)()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new O,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function j(e){var t=Object(m.D)(Object(m.O)(e),"float32");return C.makeTensor(t,e,"float32")}function E(){var e=Object(d.b)();if(null==e._tfengine){var t=new f.b(e);e._tfengine=new S(t)}return Object(f.d)(e._tfengine.ENV),Object(_.g)((function(){return e._tfengine})),e._tfengine}S.nextTensorId=0,S.nextVariableId=0;var C=E();function A(e,t){var n={a:e,b:t};return C.runKernel(h.d,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(224);var a=n(282),i=n(145);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(a.a)(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(202);function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(25),a=n(283);function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=n(55);function u(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function s(e){var t=Object(a.a)();return function(){var n,a=Object(r.a)(e);if(t){var i=Object(r.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return u(this,n)}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return E}));var r=n(13),a=n(14),i=n(2),o=n.n(i),u=n(16),s=n(1),c=n(9),l=n(163),f=n(12),d=n(20);function h(e,t,n,r){var a=Object(d.j)(t),i=function(e,t,n,r){var a=Object(d.O)(t),i=r[r.length-1],o=new Array(i).fill(0),u=t.length,s="complex64"===n?g(e):e;if(u>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],p(s[l+f],0,n).length);return o}(e,t,n,a),o=t.length,u=m(e,t,n,a,i),s=["Tensor"];return r&&(s.push("  dtype: ".concat(n)),s.push("  rank: ".concat(o)),s.push("  shape: [".concat(t,"]")),s.push("  values:")),s.push(u.map((function(e){return"    "+e})).join("\n")),s.join("\n")}function p(e,t,n){var r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):Object(d.z)(e)?"'".concat(e,"'"):"bool"===n?v(e):parseFloat(e.toFixed(7)).toString(),Object(d.L)(r,t)}function v(e){return 0===e?"false":"true"}function m(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,u=t[0],s=t.length;if(0===s){if("complex64"===n){var c=g(e);return[p(c[0],0,n)]}return"bool"===n?[v(e[0])]:[e[0].toString()]}if(1===s){if(u>20){var l=3*o,d=Array.from(e.slice(0,l)),h=Array.from(e.slice((u-3)*o,u*o));return"complex64"===n&&(d=g(d),h=g(h)),["["+d.map((function(e,t){return p(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return p(e,a[u-3+t],n)})).join(", ")+"]"]}var b="complex64"===n?g(e):Array.from(e);return["["+b.map((function(e,t){return p(e,a[t],n)})).join(", ")+"]"]}var y=t.slice(1),x=r.slice(1),_=r[0]*o,w=[];if(u>20){for(var k=0;k<3;k++){var O=k*_,S=O+_;w.push.apply(w,Object(f.a)(m(e.slice(O,S),y,n,x,a,!1)))}w.push("...");for(var j=u-3;j<u;j++){var E=j*_,C=E+_;w.push.apply(w,Object(f.a)(m(e.slice(E,C),y,n,x,a,j===u-1)))}}else for(var A=0;A<u;A++){var T=A*_,N=T+_;w.push.apply(w,Object(f.a)(m(e.slice(T,N),y,n,x,a,A===u-1)))}var M=2===s?",":"";w[0]="["+w[0]+M;for(var D=1;D<w.length-1;D++)w[D]=" "+w[D]+M;for(var I=",\n",F=2;F<s;F++)I+="\n";return w[w.length-1]=" "+w[w.length-1]+"]"+(i?"":I),w}function g(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var b=n(22),y=function(){function e(t,n,r){var a=this;if(Object(s.a)(this,e),this.dtype=n,this.shape=t.slice(),this.size=d.O(t),null!=r){var i=r.length;d.b(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||d.n(n,this.size),this.strides=Object(d.j)(t)}return Object(c.a)(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),d.b(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(u)}r++}for(var s=t[t.length-1],c=0;c<t.length-1;++c)s+=this.strides[c]*t[c];return this.values[s]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return x().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),x=null,_=null;function w(e){x=e}function k(e){_=e}function O(e){e}var S=function(){function e(t,n,r,a){Object(s.a)(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=d.O(t),this.strides=Object(d.j)(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Object(c.a)(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",_.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return _.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Object(d.T)(this.shape,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Object(d.T)(this.shape,this.dataSync())}},{key:"data",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=x().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return b.decodeString(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataSync",value:function(){this.throwIfDisposed();var e=x().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return b.decodeString(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,x().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(x().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),_.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return h(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),_.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),x().makeVariable(this,e,t,n)}}]),e}();function j(){return Object(l.a)("Tensor",(function(){return S}))}Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),j();var E=function(e){Object(r.a)(n,e);var t=Object(a.a)(n);function n(e,r,a,i){var o;return Object(s.a)(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Object(c.a)(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!d.a(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));x().disposeTensor(this),this.dataId=e.dataId,x().incRef(this,null)}},{key:"dispose",value:function(){x().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(S);Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return e instanceof S&&null!=e.assign&&e.assign instanceof Function}})},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,s,"next",e)}function s(e){r(o,a,i,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({reshape_:function(e,t){var n={x:Object(i.a)(e,"x","reshape","string_or_numeric")},o={shape:t};return r.a.runKernel(a.oc,n,o)}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n,r,a=e.length,i=0;a>0;)i=Math.random()*a|0,n=e[--a],r=t[a],e[a]=e[i],t[a]=t[i],e[i]=n,t[i]=r}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2===0?e:e+1}function u(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function s(e,t){var n=Math.random();return t*n+(1-n)*e}function c(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function l(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";l(m(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function d(e){l(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||N(e)&&!n)for(var r=0;r<e.length;++r)h(e[r],t,n);else t.push(e);return t}function p(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function v(e){return 0===e.length}function m(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function g(e){return e%1===0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function y(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function x(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return r(t),t}function _(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var u=t(i);null!=n&&i>=n?a():setTimeout(o,u)}}()}))}function k(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function O(e,t){var n=t.length;return l((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),l(e.every((function(e){return g(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function S(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:O(t,e).sort(),o=0,u=0;u<e.length;++u){if(null!=i){if(i[o]===u&&1!==e[u])throw new Error("Can't squeeze axis ".concat(u," since its dim '").concat(e[u],"' is not 1"));(null==i[o]||i[o]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[o]<=u&&o++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function j(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function E(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function C(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function A(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function T(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function N(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function M(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function D(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function I(e){return"string"===typeof e||e instanceof String}function F(e){return"boolean"===typeof e}function R(e){return"number"===typeof e}function P(e){return Array.isArray(e)?P(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":R(e)?"float32":I(e)?"string":F(e)?"bool":"float32"}function L(e){return!!(e&&e.constructor&&e.call&&e.apply)}function B(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],i=0;i<a;i++)r[i]=n[e+i];else for(var o=t[0],u=t.slice(1),s=u.reduce((function(e,t){return e*t})),c=0;c<o;c++)r[c]=U(e+c*s,u,n);return r}function W(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return U(0,e,t)}function V(e,t){for(var n=G(e,t),r=0;r<n.length;r++)n[r]=1;return n}function G(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function q(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return W(e,new Float32Array(n));if("int32"===t)return W(e,new Int32Array(n));if("bool"===t)return W(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function H(e){e.forEach((function(t){l(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function X(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Y(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function K(e){return e&&e.then&&"function"===typeof e.then}n.d(t,"M",(function(){return r})),n.d(t,"N",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"H",(function(){return o})),n.d(t,"R",(function(){return u})),n.d(t,"J",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"m",(function(){return h})),n.d(t,"O",(function(){return p})),n.d(t,"y",(function(){return v})),n.d(t,"a",(function(){return m})),n.d(t,"v",(function(){return g})),n.d(t,"S",(function(){return b})),n.d(t,"P",(function(){return y})),n.d(t,"k",(function(){return x})),n.d(t,"L",(function(){return _})),n.d(t,"K",(function(){return w})),n.d(t,"s",(function(){return k})),n.d(t,"I",(function(){return O})),n.d(t,"Q",(function(){return S})),n.d(t,"o",(function(){return j})),n.d(t,"n",(function(){return E})),n.d(t,"h",(function(){return C})),n.d(t,"B",(function(){return A})),n.d(t,"p",(function(){return T})),n.d(t,"A",(function(){return N})),n.d(t,"g",(function(){return M})),n.d(t,"f",(function(){return D})),n.d(t,"z",(function(){return I})),n.d(t,"t",(function(){return F})),n.d(t,"w",(function(){return R})),n.d(t,"r",(function(){return P})),n.d(t,"u",(function(){return L})),n.d(t,"G",(function(){return B})),n.d(t,"j",(function(){return z})),n.d(t,"T",(function(){return W})),n.d(t,"D",(function(){return V})),n.d(t,"F",(function(){return G})),n.d(t,"E",(function(){return q})),n.d(t,"c",(function(){return H})),n.d(t,"C",(function(){return X})),n.d(t,"q",(function(){return Y})),n.d(t,"x",(function(){return K}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({mul_:function(e,t){var n=Object(u.a)(e,"a","mul"),s=Object(u.a)(t,"b","mul"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Ub,f)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"createScalarValue",(function(){return i})),n.d(t,"toTypedArray",(function(){return o})),n.d(t,"now",(function(){return u})),n.d(t,"fetch",(function(){return s})),n.d(t,"encodeString",(function(){return c})),n.d(t,"decodeString",(function(){return l}));var r=n(41),a=n(20);function i(e,t){return"string"===t?c(e):o([e],t)}function o(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.m(e)),Object(r.c)().getBool("DEBUG")&&a.h(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),i=0;i<n.length;++i)0!==Math.round(e[i])&&(n[i]=1);return n}throw new Error("Unknown data type ".concat(t))}function u(){return Object(r.c)().platform.now()}function s(e,t){return Object(r.c)().platform.fetch(e,t)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.encode(e,t)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Object(r.c)().platform.decode(e,t)}n.d(t,"shuffle",(function(){return a.M})),n.d(t,"shuffleCombo",(function(){return a.N})),n.d(t,"clamp",(function(){return a.i})),n.d(t,"nearestLargerEven",(function(){return a.H})),n.d(t,"sum",(function(){return a.R})),n.d(t,"randUniform",(function(){return a.J})),n.d(t,"distSquared",(function(){return a.l})),n.d(t,"assert",(function(){return a.b})),n.d(t,"assertShapesMatch",(function(){return a.e})),n.d(t,"assertNonNull",(function(){return a.d})),n.d(t,"flatten",(function(){return a.m})),n.d(t,"sizeFromShape",(function(){return a.O})),n.d(t,"isScalarShape",(function(){return a.y})),n.d(t,"arraysEqual",(function(){return a.a})),n.d(t,"isInt",(function(){return a.v})),n.d(t,"tanh",(function(){return a.S})),n.d(t,"sizeToSquarishShape",(function(){return a.P})),n.d(t,"createShuffledIndices",(function(){return a.k})),n.d(t,"rightPad",(function(){return a.L})),n.d(t,"repeatedTry",(function(){return a.K})),n.d(t,"inferFromImplicitShape",(function(){return a.s})),n.d(t,"parseAxisParam",(function(){return a.I})),n.d(t,"squeezeShape",(function(){return a.Q})),n.d(t,"getTypedArrayFromDType",(function(){return a.o})),n.d(t,"getArrayFromDType",(function(){return a.n})),n.d(t,"checkConversionForErrors",(function(){return a.h})),n.d(t,"isValidDtype",(function(){return a.B})),n.d(t,"hasEncodingLoss",(function(){return a.p})),n.d(t,"isTypedArray",(function(){return a.A})),n.d(t,"bytesPerElement",(function(){return a.g})),n.d(t,"bytesFromStringArray",(function(){return a.f})),n.d(t,"isString",(function(){return a.z})),n.d(t,"isBoolean",(function(){return a.t})),n.d(t,"isNumber",(function(){return a.w})),n.d(t,"inferDtype",(function(){return a.r})),n.d(t,"isFunction",(function(){return a.u})),n.d(t,"nearestDivisor",(function(){return a.G})),n.d(t,"computeStrides",(function(){return a.j})),n.d(t,"toNestedArray",(function(){return a.T})),n.d(t,"makeOnesTypedArray",(function(){return a.D})),n.d(t,"makeZerosTypedArray",(function(){return a.F})),n.d(t,"makeZerosNestedTypedArray",(function(){return a.E})),n.d(t,"assertNonNegativeIntegerDimensions",(function(){return a.c})),n.d(t,"locToIndex",(function(){return a.C})),n.d(t,"indexToLoc",(function(){return a.q})),n.d(t,"isPromise",(function(){return a.x}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(86);function a(e,t){if(null==e)return{};var n,a,i=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},function(e,t,n){"use strict";e.exports=n(433)},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"===typeof e||"number"===typeof e)a+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({cast_:function(e,t){var n=Object(i.a)(e,"x","cast");if(!o.B(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var u={x:n},s={dtype:t};return r.a.runKernel(a.w,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(25);function a(e,t,n){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({add_:function(e,t){var n=Object(u.a)(e,"a","add"),s=Object(u.a)(t,"b","add"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({sub_:function(e,t){var n=Object(u.a)(e,"a","sub"),s=Object(u.a)(t,"b","sub"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Pc,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(176),c=n(10);var l=Object(c.b)({div_:function(e,t){var n=Object(u.a)(e,"a","div"),c=Object(u.a)(t,"b","div"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);if(n=f[0],c=f[1],"int32"===n.dtype&&"int32"===c.dtype)return Object(s.a)(n,c);var d={a:n,b:c};return a.a.runKernel(i.kc,d,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(20),a=n(80);function i(e,t){if((Object(r.A)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Object(r.A)(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Object(a.a)(e,[],[],t)}},function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function a(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var u="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(u)}n.unshift(i)}}return n}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=n.n(i),u=(n(38),n(201)),s=n.n(u),c=n(553),l=n(605),f=n(554),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var i=t.defaultTheme,u=t.withTheme,d=void 0!==u&&u,h=t.name,p=Object(a.a)(t,["defaultTheme","withTheme","name"]);var v=h,m=Object(c.a)(e,Object(r.a)({defaultTheme:i,Component:n,name:h||n.displayName,classNamePrefix:v},p)),g=o.a.forwardRef((function(e,t){e.classes;var u,s=e.innerRef,c=Object(a.a)(e,["classes","innerRef"]),p=m(Object(r.a)({},n.defaultProps,e)),v=c;return("string"===typeof h||d)&&(u=Object(f.a)()||i,h&&(v=Object(l.a)({theme:u,name:h,props:c})),d&&!v.theme&&(v.theme=u)),o.a.createElement(n,Object(r.a)({ref:s||t,classes:p},v))}));return s()(g,n),g}},h=n(149);t.a=function(e,t){return d(e,Object(r.a)({defaultTheme:h.a},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(27),u=n(10);var s=Object(u.b)({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=Object(i.a)(e,"x","sum");"bool"===u.dtype&&(u=Object(o.a)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.a.runKernel(a.Qc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return X})),n.d(t,"b",(function(){return Y})),n.d(t,"c",(function(){return K})),n.d(t,"d",(function(){return $})),n.d(t,"e",(function(){return Q})),n.d(t,"f",(function(){return Z})),n.d(t,"g",(function(){return q})),n.d(t,"h",(function(){return G})),n.d(t,"i",(function(){return J})),n.d(t,"j",(function(){return ee})),n.d(t,"k",(function(){return H})),n.d(t,"l",(function(){return V})),n.d(t,"m",(function(){return ue})),n.d(t,"n",(function(){return Ze})),n.d(t,"o",(function(){return ke})),n.d(t,"p",(function(){return Ae})),n.d(t,"q",(function(){return Me})),n.d(t,"r",(function(){return Fe})),n.d(t,"s",(function(){return ae})),n.d(t,"t",(function(){return ne})),n.d(t,"u",(function(){return je})),n.d(t,"v",(function(){return Te})),n.d(t,"w",(function(){return De})),n.d(t,"x",(function(){return Re})),n.d(t,"y",(function(){return he})),n.d(t,"z",(function(){return pe})),n.d(t,"A",(function(){return se}));var r=n(19);function a(e,t,n){return e.fields=t||[],e.fname=n,e}function i(e){return 1===e.length?o(e[0]):u(e)}var o=function(e){return function(t){return t[e]}},u=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function s(e){throw Error(e)}function c(e){var t,n,r,a=[],i=e.length,o=null,u=0,c="";function l(){a.push(c+e.substring(t,n)),c="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))c+=e.substring(t,n),c+=e.substring(++n,++n),t=n;else if(r===o)l(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&l(),u=t=n+1):"]"===r&&(u||s("Access path missing open bracket: "+e),u>0&&l(),u=0,t=n+1):n>t?l():t=n+1}return u&&s("Access path missing closing bracket: "+e),o&&s("Access path missing closing quote: "+e),n>t&&(n++,l()),a}function l(e,t,n){var r=c(e);return e=1===r.length?r[0]:e,a((n&&n.get||i)(r),[e],t||e)}l("id"),a((function(e){return e}),[],"identity");var f=a((function(){return 0}),[],"zero"),d=a((function(){return 1}),[],"one");a((function(){return!0}),[],"true"),a((function(){return!1}),[],"false");var h=Array.isArray;function p(e){return e[e.length-1]}function v(e){return null!=e?h(e)?e:[e]:[]}function m(e){return"function"===typeof e}function g(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var b=Object.prototype.hasOwnProperty;function y(e,t){return b.call(e,t)}var x,_,w,k,O,S,j,E=n(416),C=n(131),A=n(417),T=n(132),N=n(229),M=n(606),D=n(607),I=n(608),F=n(609),R=n(610),P=n(230),L=n(611),B=n(612),z=n(613),U=n(316),W=n(614),V="year",G="quarter",q="month",H="week",X="date",Y="day",K="dayofyear",$="hours",Z="minutes",J="seconds",Q="milliseconds",ee=[V,G,q,H,X,Y,K,$,Z,J,Q],te=ee.reduce((function(e,t,n){return e[t]=1+n,e}),{});function ne(e){var t=v(e).slice(),n={};return t.length||s("Missing time unit."),t.forEach((function(e){y(te,e)?n[e]=1:s("Invalid time unit: ".concat(e,"."))})),(n[H]||n[Y]?1:0)+(n[G]||n[q]||n[X]?1:0)+(n[K]?1:0)>1&&s("Incompatible time units: ".concat(e)),t.sort((function(e,t){return te[e]-te[t]})),t}var re=(x={},Object(r.a)(x,V,"%Y "),Object(r.a)(x,G,"Q%q "),Object(r.a)(x,q,"%b "),Object(r.a)(x,X,"%d "),Object(r.a)(x,H,"W%U "),Object(r.a)(x,Y,"%a "),Object(r.a)(x,K,"%j "),Object(r.a)(x,$,"%H:00"),Object(r.a)(x,Z,"00:%M"),Object(r.a)(x,J,":%S"),Object(r.a)(x,Q,".%L"),Object(r.a)(x,"".concat(V,"-").concat(q),"%Y-%m "),Object(r.a)(x,"".concat(V,"-").concat(q,"-").concat(X),"%Y-%m-%d "),Object(r.a)(x,"".concat($,"-").concat(Z),"%H:%M"),x);function ae(e,t){var n,r,a=g({},re,t),i=ne(e),o=i.length,u="",s=0;for(s=0;s<o;)for(n=i.length;n>s;--n)if(null!=a[r=i.slice(s,n).join("-")]){u+=a[r],s=n;break}return u.trim()}var ie=new Date;function oe(e){return ie.setFullYear(e),ie.setMonth(0),ie.setDate(1),ie.setHours(0,0,0,0),ie}function ue(e){return ce(new Date(e))}function se(e){return le(new Date(e))}function ce(e){return E.a.count(oe(e.getFullYear())-1,e)}function le(e){return C.b.count(oe(e.getFullYear())-1,e)}function fe(e){return oe(e).getDay()}function de(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(-1,t,n,r,a,i,o);return u.setFullYear(e),u}return new Date(e,t,n,r,a,i,o)}function he(e){return ve(new Date(e))}function pe(e){return me(new Date(e))}function ve(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return A.a.count(t-1,e)}function me(e){var t=Date.UTC(e.getUTCFullYear(),0,1);return T.b.count(t-1,e)}function ge(e){return ie.setTime(Date.UTC(e,0,1)),ie.getUTCDay()}function be(e,t,n,r,a,i,o){if(0<=e&&e<100){var u=new Date(Date.UTC(-1,t,n,r,a,i,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,r,a,i,o))}function ye(e,t,n,r,a){var i=t||1,o=p(e),u=function(e,t,a){return function(e,t,n,r){var a=n<=1?e:r?function(t,a){return r+n*Math.floor((e(t,a)-r)/n)}:function(t,r){return n*Math.floor(e(t,r)/n)};return t?function(e,n){return t(a(e,n),n)}:a}(n[a=a||e],r[a],e===o&&i,t)},s=new Date,c=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(e),l=c[V]?u(V):function(e){return m(e)?e:function(){return e}}(2012),h=c[q]?u(q):c[G]?u(G):f,v=c[H]&&c[Y]?u(Y,1,H+Y):c[H]?u(H,1):c[Y]?u(Y,1):c[X]?u(X,1):c[K]?u(K,1):d,g=c[$]?u($):f,b=c[Z]?u(Z):f,y=c[J]?u(J):f,x=c[Q]?u(Q):f;return function(e){s.setTime(+e);var t=l(s);return a(t,h(s),v(s,t),g(s),b(s),y(s),x(s))}}function xe(e,t,n){return t+7*e-(n+6)%7}var _e=(_={},Object(r.a)(_,V,(function(e){return e.getFullYear()})),Object(r.a)(_,G,(function(e){return Math.floor(e.getMonth()/3)})),Object(r.a)(_,q,(function(e){return e.getMonth()})),Object(r.a)(_,X,(function(e){return e.getDate()})),Object(r.a)(_,$,(function(e){return e.getHours()})),Object(r.a)(_,Z,(function(e){return e.getMinutes()})),Object(r.a)(_,J,(function(e){return e.getSeconds()})),Object(r.a)(_,Q,(function(e){return e.getMilliseconds()})),Object(r.a)(_,K,(function(e){return ce(e)})),Object(r.a)(_,H,(function(e){return le(e)})),Object(r.a)(_,H+Y,(function(e,t){return xe(le(e),e.getDay(),fe(t))})),Object(r.a)(_,Y,(function(e,t){return xe(1,e.getDay(),fe(t))})),_),we=(w={},Object(r.a)(w,G,(function(e){return 3*e})),Object(r.a)(w,H,(function(e,t){return xe(e,0,fe(t))})),w);function ke(e,t){return ye(e,t||1,_e,we,de)}var Oe=(k={},Object(r.a)(k,V,(function(e){return e.getUTCFullYear()})),Object(r.a)(k,G,(function(e){return Math.floor(e.getUTCMonth()/3)})),Object(r.a)(k,q,(function(e){return e.getUTCMonth()})),Object(r.a)(k,X,(function(e){return e.getUTCDate()})),Object(r.a)(k,$,(function(e){return e.getUTCHours()})),Object(r.a)(k,Z,(function(e){return e.getUTCMinutes()})),Object(r.a)(k,J,(function(e){return e.getUTCSeconds()})),Object(r.a)(k,Q,(function(e){return e.getUTCMilliseconds()})),Object(r.a)(k,K,(function(e){return ve(e)})),Object(r.a)(k,H,(function(e){return me(e)})),Object(r.a)(k,Y,(function(e,t){return xe(1,e.getUTCDay(),ge(t))})),Object(r.a)(k,H+Y,(function(e,t){return xe(me(e),e.getUTCDay(),ge(t))})),k),Se=(O={},Object(r.a)(O,G,(function(e){return 3*e})),Object(r.a)(O,H,(function(e,t){return xe(e,0,ge(t))})),O);function je(e,t){return ye(e,t||1,Oe,Se,be)}var Ee=(S={},Object(r.a)(S,V,N.a),Object(r.a)(S,G,M.a.every(3)),Object(r.a)(S,q,M.a),Object(r.a)(S,H,C.b),Object(r.a)(S,X,E.a),Object(r.a)(S,Y,E.a),Object(r.a)(S,K,E.a),Object(r.a)(S,$,D.a),Object(r.a)(S,Z,I.a),Object(r.a)(S,J,F.a),Object(r.a)(S,Q,R.a),S),Ce=(j={},Object(r.a)(j,V,P.a),Object(r.a)(j,G,L.a.every(3)),Object(r.a)(j,q,L.a),Object(r.a)(j,H,T.b),Object(r.a)(j,X,A.a),Object(r.a)(j,Y,A.a),Object(r.a)(j,K,A.a),Object(r.a)(j,$,B.a),Object(r.a)(j,Z,z.a),Object(r.a)(j,J,F.a),Object(r.a)(j,Q,R.a),j);function Ae(e){return Ee[e]}function Te(e){return Ce[e]}function Ne(e,t,n){return e?e.offset(t,n):void 0}function Me(e,t,n){return Ne(Ae(e),t,n)}function De(e,t,n){return Ne(Te(e),t,n)}function Ie(e,t,n,r){return e?e.range(t,n,r):void 0}function Fe(e,t,n,r){return Ie(Ae(e),t,n,r)}function Re(e,t,n,r){return Ie(Te(e),t,n,r)}var Pe=1e3,Le=6e4,Be=36e5,ze=864e5,Ue=2592e6,We=31536e6,Ve=[V,q,X,$,Z,J,Q],Ge=Ve.slice(0,-1),qe=Ge.slice(0,-1),He=qe.slice(0,-1),Xe=He.slice(0,-1),Ye=[V,q],Ke=[V],$e=[[Ge,1,Pe],[Ge,5,5e3],[Ge,15,15e3],[Ge,30,3e4],[qe,1,Le],[qe,5,3e5],[qe,15,9e5],[qe,30,18e5],[He,1,Be],[He,3,108e5],[He,6,216e5],[He,12,432e5],[Xe,1,ze],[[V,H],1,6048e5],[Ye,1,Ue],[Ye,3,7776e6],[Ke,1,We]];function Ze(e){var t,n,r=e.extent,a=e.maxbins||40,i=Math.abs(function(e){return e&&p(e)-e[0]||0}(r))/a,o=Object(U.a)((function(e){return e[2]})).right($e,i);return o===$e.length?(t=Ke,n=Object(W.c)(r[0]/We,r[1]/We,a)):o?(t=(o=$e[i/$e[o-1][2]<$e[o][2]/i?o-1:o])[0],n=o[1]):(t=Ve,n=Math.max(Object(W.c)(r[0],r[1],a),1)),{units:t,step:n}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({zerosLike_:function(e){var t={x:Object(i.a)(e,"x","zerosLike")};return r.a.runKernel(a.Zc,t)}})},function(e,t,n){e.exports=n(434)()},function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return i.a})),n.d(t,"d",(function(){return o.a})),n.d(t,"e",(function(){return u.a})),n.d(t,"f",(function(){return s.a})),n.d(t,"g",(function(){return c.a})),n.d(t,"h",(function(){return l.a})),n.d(t,"i",(function(){return f.a})),n.d(t,"j",(function(){return d.a})),n.d(t,"k",(function(){return h.a})),n.d(t,"l",(function(){return p.a})),n.d(t,"m",(function(){return v.a})),n.d(t,"n",(function(){return m.a})),n.d(t,"o",(function(){return g.a})),n.d(t,"p",(function(){return b.a})),n.d(t,"q",(function(){return y.a})),n.d(t,"r",(function(){return C})),n.d(t,"w",(function(){return A.a})),n.d(t,"s",(function(){return T.a})),n.d(t,"t",(function(){return M})),n.d(t,"u",(function(){return D})),n.d(t,"v",(function(){return I})),n.d(t,"x",(function(){return F.a})),n.d(t,"z",(function(){return R.a})),n.d(t,"A",(function(){return P.a})),n.d(t,"B",(function(){return L.a})),n.d(t,"C",(function(){return B.a})),n.d(t,"D",(function(){return z.a})),n.d(t,"E",(function(){return U.a})),n.d(t,"F",(function(){return W.a})),n.d(t,"G",(function(){return _.a})),n.d(t,"H",(function(){return V})),n.d(t,"I",(function(){return G})),n.d(t,"J",(function(){return q})),n.d(t,"K",(function(){return H})),n.d(t,"L",(function(){return X.a})),n.d(t,"M",(function(){return Y.a})),n.d(t,"N",(function(){return K.a})),n.d(t,"O",(function(){return $.a})),n.d(t,"P",(function(){return J})),n.d(t,"Q",(function(){return Q.a})),n.d(t,"R",(function(){return ee.a})),n.d(t,"T",(function(){return te.a})),n.d(t,"U",(function(){return ne.a})),n.d(t,"V",(function(){return re.a})),n.d(t,"W",(function(){return ae.a})),n.d(t,"X",(function(){return ue})),n.d(t,"Y",(function(){return se.a})),n.d(t,"Z",(function(){return ce.a})),n.d(t,"ab",(function(){return le.a})),n.d(t,"bb",(function(){return fe.a})),n.d(t,"db",(function(){return de.a})),n.d(t,"fb",(function(){return he.a})),n.d(t,"gb",(function(){return pe.a})),n.d(t,"hb",(function(){return ve.a})),n.d(t,"ib",(function(){return me.a})),n.d(t,"jb",(function(){return ge.a})),n.d(t,"kb",(function(){return xe})),n.d(t,"mb",(function(){return _e.a})),n.d(t,"nb",(function(){return we.a})),n.d(t,"ob",(function(){return ke.a})),n.d(t,"qb",(function(){return Oe.a})),n.d(t,"sb",(function(){return Se.a})),n.d(t,"tb",(function(){return je.a})),n.d(t,"vb",(function(){return Ee.a})),n.d(t,"zb",(function(){return Ce.a})),n.d(t,"Ab",(function(){return Ae.a})),n.d(t,"Bb",(function(){return Te.a})),n.d(t,"Cb",(function(){return Ne.a})),n.d(t,"Db",(function(){return Me.a})),n.d(t,"Eb",(function(){return De.a})),n.d(t,"Gb",(function(){return Ie.a})),n.d(t,"Hb",(function(){return Fe.a})),n.d(t,"Ib",(function(){return Re.a})),n.d(t,"Jb",(function(){return Pe.a})),n.d(t,"Kb",(function(){return Le.a})),n.d(t,"Lb",(function(){return Be.a})),n.d(t,"Mb",(function(){return ze.a})),n.d(t,"Nb",(function(){return Ue.a})),n.d(t,"Ob",(function(){return We.a})),n.d(t,"Pb",(function(){return Ve.a})),n.d(t,"Qb",(function(){return Ge.a})),n.d(t,"Sb",(function(){return w.a})),n.d(t,"Tb",(function(){return qe.a})),n.d(t,"Ub",(function(){return He.a})),n.d(t,"Vb",(function(){return Xe.a})),n.d(t,"Wb",(function(){return Ye.a})),n.d(t,"Xb",(function(){return Ke.a})),n.d(t,"Yb",(function(){return $e.a})),n.d(t,"Zb",(function(){return Ze.a})),n.d(t,"ac",(function(){return Je.a})),n.d(t,"bc",(function(){return Qe.a})),n.d(t,"cc",(function(){return et.a})),n.d(t,"dc",(function(){return at})),n.d(t,"fc",(function(){return k.a})),n.d(t,"gc",(function(){return it})),n.d(t,"hc",(function(){return ot.a})),n.d(t,"ic",(function(){return ut.a})),n.d(t,"kc",(function(){return st.a})),n.d(t,"lc",(function(){return ct.a})),n.d(t,"mc",(function(){return lt.a})),n.d(t,"nc",(function(){return ft.a})),n.d(t,"pc",(function(){return dt})),n.d(t,"qc",(function(){return ht.a})),n.d(t,"rc",(function(){return pt})),n.d(t,"sc",(function(){return vt})),n.d(t,"tc",(function(){return mt})),n.d(t,"uc",(function(){return gt})),n.d(t,"vc",(function(){return bt.a})),n.d(t,"wc",(function(){return yt.a})),n.d(t,"xc",(function(){return xt.a})),n.d(t,"yc",(function(){return _t.a})),n.d(t,"zc",(function(){return wt.a})),n.d(t,"Ac",(function(){return kt})),n.d(t,"Bc",(function(){return St})),n.d(t,"Cc",(function(){return jt})),n.d(t,"Dc",(function(){return Et.a})),n.d(t,"Ec",(function(){return Ct.a})),n.d(t,"Fc",(function(){return At.a})),n.d(t,"Gc",(function(){return Tt.a})),n.d(t,"Hc",(function(){return Nt.a})),n.d(t,"Ic",(function(){return Mt.a})),n.d(t,"Jc",(function(){return be.a})),n.d(t,"Kc",(function(){return Dt.a})),n.d(t,"Lc",(function(){return It})),n.d(t,"Mc",(function(){return Ft})),n.d(t,"Nc",(function(){return Rt})),n.d(t,"Oc",(function(){return Pt})),n.d(t,"Qc",(function(){return Lt.a})),n.d(t,"Rc",(function(){return Bt.a})),n.d(t,"Sc",(function(){return zt.a})),n.d(t,"Uc",(function(){return Ut.a})),n.d(t,"Vc",(function(){return Wt.a})),n.d(t,"Wc",(function(){return Vt.a})),n.d(t,"Xc",(function(){return S.a})),n.d(t,"Yc",(function(){return Gt.a})),n.d(t,"ad",(function(){return qt.a})),n.d(t,"bd",(function(){return Ht.a})),n.d(t,"cd",(function(){return j.a})),n.d(t,"dd",(function(){return Xt})),n.d(t,"ed",(function(){return Yt})),n.d(t,"fd",(function(){return Kt})),n.d(t,"gd",(function(){return $t})),n.d(t,"hd",(function(){return Zt.a})),n.d(t,"id",(function(){return Jt.a})),n.d(t,"jd",(function(){return Qt.a})),n.d(t,"lb",(function(){return en.a})),n.d(t,"ub",(function(){return tn.a})),n.d(t,"yb",(function(){return nn.a})),n.d(t,"Pc",(function(){return rn.a})),n.d(t,"md",(function(){return an.a})),n.d(t,"nd",(function(){return on.a})),n.d(t,"od",(function(){return nt.a})),n.d(t,"pd",(function(){return un.a})),n.d(t,"qd",(function(){return sn.a})),n.d(t,"rd",(function(){return cn.a})),n.d(t,"sd",(function(){return ln.a})),n.d(t,"td",(function(){return fn.a})),n.d(t,"ud",(function(){return rt.a})),n.d(t,"vd",(function(){return dn.a})),n.d(t,"wd",(function(){return hn.a})),n.d(t,"xd",(function(){return E.a})),n.d(t,"yd",(function(){return pn.a})),n.d(t,"zd",(function(){return vn.a})),n.d(t,"Ad",(function(){return gn})),n.d(t,"Bd",(function(){return bn.a})),n.d(t,"Cd",(function(){return yn})),n.d(t,"Dd",(function(){return xn})),n.d(t,"Ed",(function(){return _n})),n.d(t,"Fd",(function(){return ye.a})),n.d(t,"Gd",(function(){return wn.a})),n.d(t,"Id",(function(){return kn.a})),n.d(t,"Jd",(function(){return On.a})),n.d(t,"Kd",(function(){return Sn.a})),n.d(t,"Ld",(function(){return jn.a})),n.d(t,"Md",(function(){return En})),n.d(t,"Nd",(function(){return Cn.a})),n.d(t,"Od",(function(){return An.a})),n.d(t,"Pd",(function(){return Tn.a})),n.d(t,"Qd",(function(){return Nn.a})),n.d(t,"y",(function(){return Rn})),n.d(t,"Hd",(function(){return Pn.a})),n.d(t,"jc",(function(){return Ln.a})),n.d(t,"ec",(function(){return zn})),n.d(t,"Tc",(function(){return Un.a})),n.d(t,"kd",(function(){return Wn.a})),n.d(t,"rb",(function(){return Vn.a})),n.d(t,"cb",(function(){return qn})),n.d(t,"eb",(function(){return Hn})),n.d(t,"S",(function(){return Xn})),n.d(t,"xb",(function(){return Kn})),n.d(t,"oc",(function(){return O.b})),n.d(t,"a",(function(){return O.a})),n.d(t,"wb",(function(){return Xr})),n.d(t,"Fb",(function(){return Yr})),n.d(t,"Rb",(function(){return Kr})),n.d(t,"ld",(function(){return qr})),n.d(t,"pb",(function(){return r})),n.d(t,"Zc",(function(){return Hr}));var r={};n.r(r),n.d(r,"conv2d",(function(){return rr})),n.d(r,"depthwiseConv2d",(function(){return or})),n.d(r,"matMul",(function(){return ur}));var a=n(72),i=n(328),o=n(329),u=n(29),s=n(330),c=n(244),l=n(245),f=n(246),d=n(247),h=n(331),p=n(332),v=n(333),m=n(248),g=n(334),b=n(178),y=n(335),x=n(5),_=n(53),w=n(45),k=n(21),O=n(10),S=n(122),j=n(44),E=n(221);var C=Object(O.b)({basicLSTMCell_:function(e,t,n,r,a,i){var o=Object(x.a)(e,"forgetBias","basicLSTMCell"),s=Object(x.a)(t,"lstmKernel","basicLSTMCell"),c=Object(x.a)(n,"lstmBias","basicLSTMCell"),l=Object(x.a)(r,"data","basicLSTMCell"),f=Object(x.a)(a,"c","basicLSTMCell"),d=Object(x.a)(i,"h","basicLSTMCell"),h=Object(_.a)([l,d],1),p=Object(w.a)(h,s),v=Object(u.a)(p,c),m=v.shape[0],g=v.shape[1]/4,b=[m,g],y=Object(j.a)(v,[0,0],b),O=Object(j.a)(v,[0,g],b),C=Object(j.a)(v,[0,2*g],b),A=Object(j.a)(v,[0,3*g],b),T=Object(u.a)(Object(k.a)(Object(S.a)(y),Object(E.a)(O)),Object(k.a)(f,Object(S.a)(Object(u.a)(o,C))));return[T,Object(k.a)(Object(E.a)(T),Object(S.a)(A))]}}),A=n(137),T=n(121),N=n(20);var M=Object(O.b)({batchNorm2d_:function(e,t,n,r,a,i){var o,u,s=Object(x.a)(e,"x","batchNorm"),c=Object(x.a)(t,"mean","batchNorm"),l=Object(x.a)(n,"variance","batchNorm");return null!=a&&(o=Object(x.a)(a,"scale","batchNorm")),null!=r&&(u=Object(x.a)(r,"offset","batchNorm")),N.b(2===s.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,".")})),N.b(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}});var D=Object(O.b)({batchNorm3d_:function(e,t,n,r,a,i){var o,u,s=Object(x.a)(e,"x","batchNorm"),c=Object(x.a)(t,"mean","batchNorm"),l=Object(x.a)(n,"variance","batchNorm");return null!=a&&(o=Object(x.a)(a,"scale","batchNorm")),null!=r&&(u=Object(x.a)(r,"offset","batchNorm")),N.b(3===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,".")})),N.b(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}});var I=Object(O.b)({batchNorm4d_:function(e,t,n,r,a,i){var o,u,s=Object(x.a)(e,"x","batchNorm"),c=Object(x.a)(t,"mean","batchNorm"),l=Object(x.a)(n,"variance","batchNorm");return null!=a&&(o=Object(x.a)(a,"scale","batchNorm")),null!=r&&(u=Object(x.a)(r,"offset","batchNorm")),N.b(4===s.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,".")})),N.b(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),N.b(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&N.b(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=u&&N.b(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")})),Object(T.a)(s,c,l,u,o,i)}}),F=n(336),R=n(157),P=n(77),L=n(27),B=n(337),z=n(338),U=n(101),W=n(91);var V=Object(O.b)({concat1d_:function(e){return Object(_.a)(e,0)}});var G=Object(O.b)({concat2d_:function(e,t){return Object(_.a)(e,t)}});var q=Object(O.b)({concat3d_:function(e,t){return Object(_.a)(e,t)}});var H=Object(O.b)({concat4d_:function(e,t){return Object(_.a)(e,t)}}),X=n(249),Y=n(98),K=n(250),$=n(339),Z=n(284);var J=Object(O.b)({conv3dTranspose_:function(e,t,n,r,a){var i=Object(x.a)(e,"x","conv3dTranspose"),o=Object(x.a)(t,"filter","conv3dTranspose");return Object(Z.a)(n,i,o,r,a)}}),Q=n(179),ee=n(251),te=n(180),ne=n(340),re=n(252),ae=n(138),ie=n(11),oe=n(4);var ue=Object(O.b)({diag_:function(e){var t={x:Object(x.a)(e,"x","diag")};return ie.a.runKernel(oe.R,t)}}),se=n(253),ce=n(31),le=n(254),fe=n(255),de=n(181),he=n(139),pe=n(341),ve=n(69),me=n(95),ge=n(342),be=n(18),ye=n(123);var xe=Object(O.b)({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Object(P.a)([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var u=Object(be.a)(a.toTensor(),[e,t]);if(null==n)return u;if(1===n.length)return Object(ye.a)(Object(me.a)(u,0),[n[0],1,1]);if(2===n.length)return Object(ye.a)(Object(me.a)(Object(me.a)(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return Object(ye.a)(Object(me.a)(Object(me.a)(Object(me.a)(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}}),_e=n(177),we=n(182),ke=n(176),Oe=n(140),Se=n(79),je=n(99),Ee=n(183),Ce=n(343),Ae=n(344),Te=n(345),Ne=n(184),Me=n(185),De=n(100),Ie=n(346),Fe=n(256),Re=n(110),Pe=n(257),Le=n(347),Be=n(348),ze=n(186),Ue=n(92),We=n(141),Ve=n(187),Ge=n(259),qe=n(102),He=n(188),Xe=n(349),Ye=n(350),Ke=n(136),$e=n(130),Ze=n(158),Je=n(189),Qe=n(260),et=n(261),tt=n(67),nt=n(42),rt=n(30);var at=Object(O.b)({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Object(x.a)(e,"x","moments");var r=Object(N.I)(t,e.shape),a=Object($e.a)(e,r,n),i=a.shape;n||(i=Object(tt.e)(a.shape,r));var o=Object(nt.a)(Object(rt.a)(Object(L.a)(e,"float32"),Object(be.a)(a,i))),u=Object($e.a)(o,r,n);return{mean:a,variance:u}}});var it=Object(O.b)({multiRNNCell_:function(e,t,n,r){for(var a=Object(x.a)(t,"data","multiRNNCell"),i=Object(x.b)(n,"c","multiRNNCell"),o=Object(x.b)(r,"h","multiRNNCell"),u=a,s=[],c=0;c<e.length;c++){var l=e[c](u,i[c],o[c]);s.push(l[0]),s.push(l[1]),u=l[1]}for(var f=[],d=[],h=0;h<s.length;h+=2)f.push(s[h]),d.push(s[h+1]);return[f,d]}}),ot=n(351),ut=n(48),st=n(190),ct=n(159),lt=n(116),ft=n(352);var dt=Object(O.b)({outerProduct_:function(e,t){var n=Object(x.a)(e,"v1","outerProduct"),r=Object(x.a)(t,"v2","outerProduct");N.b(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Object(be.a)(n,[-1,1]),i=Object(be.a)(r,[1,-1]);return Object(w.a)(a,i)}}),ht=n(88);var pt=Object(O.b)({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Object(ht.a)(e,[t],n)}});var vt=Object(O.b)({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(ht.a)(e,t,n)}});var mt=Object(O.b)({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(ht.a)(e,t,n)}});var gt=Object(O.b)({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(N.b)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Object(ht.a)(e,t,n)}}),bt=n(262),yt=n(85),xt=n(191),_t=n(243),wt=n(263);var kt=Object(O.b)({rand_:function(e,t,n){var r=Object(N.O)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return ie.a.makeTensor(a,e,n)}}),Ot=n(147);var St=Object(O.b)({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ot.b(t,n,r,a),o=Object(P.a)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}});var jt=Object(O.b)({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Ot.a(t,n,r,!1,a),o=Object(P.a)(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),Et=n(264),Ct=n(222),At=n(160),Tt=n(353),Nt=n(118),Mt=n(192),Dt=n(78);var It=Object(O.b)({reverse1d_:function(e){var t=Object(x.a)(e,"x","reverse");return N.b(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Object(Dt.a)(t,0)}});var Ft=Object(O.b)({reverse2d_:function(e,t){var n=Object(x.a)(e,"x","reverse");return N.b(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Object(Dt.a)(n,t)}});var Rt=Object(O.b)({reverse3d_:function(e,t){var n=Object(x.a)(e,"x","reverse");return N.b(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Object(Dt.a)(n,t)}});var Pt=Object(O.b)({reverse4d_:function(e,t){var n=Object(x.a)(e,"x","reverse");return N.b(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Object(Dt.a)(n,t)}}),Lt=n(354),Bt=n(265),zt=n(32),Ut=n(266),Wt=n(267),Vt=n(355),Gt=n(356),qt=n(268),Ht=n(269);var Xt=Object(O.b)({slice1d_:function(e,t,n){var r=Object(x.a)(e,"x","slice1d");return N.b(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Object(j.a)(r,[t],[n])}});var Yt=Object(O.b)({slice2d_:function(e,t,n){var r=Object(x.a)(e,"x","slice2d");return N.b(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Object(j.a)(r,t,n)}});var Kt=Object(O.b)({slice3d_:function(e,t,n){var r=Object(x.a)(e,"x","slice3d");return N.b(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Object(j.a)(r,t,n)}});var $t=Object(O.b)({slice4d_:function(e,t,n){var r=Object(x.a)(e,"x","slice4d");return N.b(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Object(j.a)(r,t,n)}}),Zt=n(357),Jt=n(258),Qt=n(142),en=n(193),tn=n(161),nn=n(270),rn=n(194),an=n(111),on=n(64),un=n(195),sn=n(143),cn=n(93),ln=n(119),fn=n(358),dn=n(35),hn=n(359),pn=n(146),vn=n(112),mn=n(80);function gn(e,t,n){if(Object(N.d)(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Object(x.c)(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Object(mn.a)(e,t,r,n)}var bn=n(271);function yn(e,t,n){if(Object(N.d)(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Object(x.c)(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Object(mn.a)(e,t,r,n)}function xn(e,t,n){if(Object(N.d)(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Object(x.c)(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Object(mn.a)(e,t,r,n)}function _n(e,t,n){if(Object(N.d)(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Object(x.c)(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Object(mn.a)(e,t,r,n)}var wn=n(272),kn=n(360),On=n(273),Sn=n(196),jn=n(120);function En(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return ie.a.makeVariable(e,t,n,r)}var Cn=n(62),An=n(274),Tn=n(117),Nn=n(37),Mn=n(2),Dn=n.n(Mn),In=n(16);function Fn(){return(Fn=Object(In.a)(Dn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m;return Dn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Object(x.a)(t,"tensor","boolMask"),i=Object(x.a)(n,"mask","boolMask","bool"),o=null==r?0:r,u=i.rank,s=a.shape,N.b(u>0,(function(){return"mask cannot be scalar"})),N.e(s.slice(o,o+u),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+u;l++)c*=s[l];return f=s.slice(0,o).concat([c],s.slice(o+u)),d=Object(be.a)(a,f),h=Object(be.a)(i,[-1]),e.next=14,Object(An.a)(h);case 14:return p=e.sent,v=Object(sn.a)(p,[1]),m=Object(Oe.a)(d,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),d.dispose(),h.dispose(),p.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rn=function(e,t,n){return Fn.apply(this,arguments)},Pn=n(81),Ln=n(197),Bn=n(40);var zn=Object(O.b)({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Object(x.a)(e,"v","movingAverage"),o=Object(x.a)(t,"x","movingAverage"),s=Object(x.a)(n,"decay","movingAverage");Object(Bn.assertTypesMatch)(i,o),N.b(N.a(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var c=Object(zt.a)(1),l=Object(rt.a)(c,s),f=Object(k.a)(Object(rt.a)(o,i),l);if(a){N.b(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Object(x.a)(r,"step","movingAverage");f=Object(ce.a)(f,Object(rt.a)(c,Object(yt.a)(s,d)))}return Object(u.a)(i,f)}}),Un=n(361),Wn=n(376),Vn=n(362),Gn=n(15);var qn=Object(O.b)({dropout_:function(e,t,n,r){var a=Object(x.a)(e,"x","dropout");if(N.b("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),N.b(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Gn.a?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(N.a(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=Object(ce.a)(Object(we.a)(Object(u.a)(Object(Et.a)(i,0,1,"float32",r),o)),o);return Object(k.a)(a,s)}});function Hn(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Xn(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Object(vn.a)(a,"float32")}function Yn(){return(Yn=Object(In.a)(Dn.a.mark((function e(t,n){var r,a,i,o,u,s,c,l,f,d,h,p,v,m,g,b=arguments;return Dn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>2&&void 0!==b[2]?b[2]:1,a=Object(x.a)(t,"predictions","inTopK"),i=Object(x.a)(n,"targets","inTopK"),Object(N.b)(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Object(N.b)(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),Object(N.e)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Object(N.b)(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return u=e.sent,e.next=13,i.data();case 13:s=e.sent,c=u.length/o,l=o,f=Object(N.o)("bool",c),d=0;case 17:if(!(d<c)){e.next=35;break}for(h=d*l,p=u.subarray(h,h+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort((function(e,t){return t.value-e.value})),f[d]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(v[g].index!==s[d]){e.next=29;break}return f[d]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:d++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Object(pn.a)(f,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kn=function(e,t){return Yn.apply(this,arguments)},$n=n(7),Zn=n(60),Jn=n(33),Qn=n(206),er=n(203),tr=n(54),nr=n(73);var rr=Object(O.b)({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,f=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,v=e.leakyreluAlpha;if(h=h||"linear",!1===Object(nr.d)(ie.a.state.gradientDepth,h)){var m=Object(Y.a)(t,n,r,a,o,c,l);return null!=f&&(m=Object(u.a)(m,f)),Object(nr.a)(m,h,p,v)}var g=Object(x.a)(t,"x","conv2d"),b=Object(x.a)(n,"filter","conv2d"),y=g,_=!1;3===g.rank&&(_=!0,y=Object(be.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),N.b(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),N.b(4===b.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(b.rank,".")})),null!=l&&N.b(N.v(a),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(a,".")})),N.b(y.shape[3]===b.shape[2],(function(){return"Error in conv2d: depth of input (".concat(y.shape[3],") must match ")+"input depth for filter ".concat(b.shape[2],".")})),N.b(tr.h(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(c,"'")})),N.b("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var w,k,O=tr.a(y.shape,b.shape,r,c,a,l);if(null!=f){w=Object(x.a)(f,"bias","fused conv2d");var S=Object(Bn.makeTypesMatch)(w,g);w=Object($n.a)(S,1)[0],Jn.a(O.outShape,w.shape)}null!=p&&(k=Object(x.a)(p,"prelu weights","fused conv2d"));var j=function(e,t){var n=Object($n.a)(t,4),i=n[0],o=n[1],u=n[2],s=n[3],l=Object(nr.c)(e,u,h);N.b(tr.i(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(c,"'")}));var f=[Object(er.a)(o.shape,l,i,r,a),Object(Qn.a)(o,l,i.shape,r,a)];if(null!=s){var d=Object(nr.b)(s,l);f.push(d)}return f},E={x:y,filter:b,bias:w,preluActivationWeights:k},C={strides:r,pad:a,dataFormat:o,dilations:c,dimRoundingMode:l,activation:h,leakyreluAlpha:v};return null==f?Object(Zn.a)((function(e,t,n){var r=ie.a.runKernel(oe.jb,E,C);return n([t,e,r]),_&&(r=Object(be.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:j}}))(y,b):Object(Zn.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.jb,E,C);return r([t,e,a,n]),_&&(a=Object(be.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:j}}))(y,b,w)}}),ar=n(288),ir=n(287);var or=Object(O.b)({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,c=void 0===s?[1,1]:s,l=e.dimRoundingMode,f=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,v=e.leakyreluAlpha;if(!1===Object(nr.d)(ie.a.state.gradientDepth,h)){var m=Object(ae.a)(t,n,r,a,o,c,l);return null!=f&&(m=Object(u.a)(m,f)),Object(nr.a)(m,h,p,v)}var g=Object(x.a)(t,"x","depthwiseConv2d"),b=Object(x.a)(n,"filter","depthwiseConv2d"),y=g,_=!1;3===g.rank&&(_=!0,y=Object(be.a)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),N.b(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),N.b(4===b.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(b.rank,".")})),N.b(y.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(b.shape[2],".")})),null==c&&(c=[1,1]),N.b(tr.h(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(c,"'")})),null!=l&&N.b(N.v(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(l," but got pad ").concat(a,".")}));var w,k,O=tr.a(y.shape,b.shape,r,c,a,l,!0);if(null!=f){w=Object(x.a)(f,"bias","fused conv2d");var S=Object(Bn.makeTypesMatch)(w,g),j=Object($n.a)(S,1);w=j[0],Jn.a(O.outShape,w.shape)}null!=p&&(k=Object(x.a)(p,"prelu weights","fused depthwiseConv2d"));var E=function(e,t){N.b(tr.i(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(c,"'")}));var n=Object($n.a)(t,4),i=n[0],o=n[1],u=n[2],s=n[3],f=Object(nr.c)(e,u,h),d=Object(ir.a)(o.shape,f,i,r,a,c,l),p=Object(ar.a)(o,f,i.shape,r,a,c,l);return null!=s?[d,p,Object(nr.b)(w,f)]:[d,p]},C={x:y,filter:b,bias:w,preluActivationWeights:k},A={strides:r,pad:a,dataFormat:o,dilations:c,dimRoundingMode:l,activation:h,leakyreluAlpha:v};return null==f?Object(Zn.a)((function(e,t,n){var r=ie.a.runKernel(oe.kb,C,A);return n([t,e,r]),_&&(r=Object(be.a)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}))(y,b):Object(Zn.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.kb,C,A);return r([t,e,a,n]),_&&(a=Object(be.a)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}))(y,b,w)}});var ur=Object(O.b)({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===Object(nr.d)(ie.a.state.gradientDepth,l)){var h=Object(w.a)(t,n,a,o);return null!=s&&(h=Object(u.a)(h,s)),Object(nr.a)(h,l,f,d)}var p=Object(x.a)(t,"a","fused matMul"),v=Object(x.a)(n,"b","fused matMul"),m=Object(Bn.makeTypesMatch)(p,v),g=Object($n.a)(m,2);p=g[0],v=g[1];var b=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],_=a?p.shape[p.rank-1]:p.shape[p.rank-2],k=o?v.shape[v.rank-2]:v.shape[v.rank-1],O=p.shape.slice(0,-2),S=v.shape.slice(0,-2),j=N.O(O),E=N.O(S);N.b(p.rank>=2&&v.rank>=2&&p.rank===v.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(p.rank," and ").concat(v.rank,".")})),N.b(N.a(O,S),(function(){return"Error in fused matMul: outer dimensions (".concat(O,") and (")+"".concat(S,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," must match.")})),N.b(b===y,(function(){return"Error in fused matMul: inner shapes (".concat(b,") and (")+"".concat(y,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var C,A,T=p.shape.slice(0,-2).concat([_,k]),M=a?Object(be.a)(p,[j,b,_]):Object(be.a)(p,[j,_,b]),D=o?Object(be.a)(v,[E,k,y]):Object(be.a)(v,[E,y,k]);if(null!=s){C=Object(x.a)(s,"bias","fused matMul");var I=Object(Bn.makeTypesMatch)(C,p);C=Object($n.a)(I,1)[0],Jn.a(T,C.shape)}null!=f&&(A=Object(x.a)(f,"prelu weights","fused matMul"));var F=function(e,t){var n,r,i=Object($n.a)(t,4),u=i[0],c=i[1],f=i[2],d=i[3],h=Object(nr.c)(Object(be.a)(e,f.shape),f,l);return a||o?!a&&o?(n=Object(w.a)(h,c,!1,!1),r=Object(w.a)(h,u,!0,!1)):a&&!o?(n=Object(w.a)(c,h,!1,!0),r=Object(w.a)(u,h,!1,!1)):(n=Object(w.a)(c,h,!0,!0),r=Object(w.a)(h,u,!0,!0)):(n=Object(w.a)(h,c,!1,!0),r=Object(w.a)(u,h,!0,!1)),null!=s?[n,r,Object(nr.b)(d,h)]:[n,r]},R={a:M,b:D,bias:C,preluActivationWeights:A},P={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};return null==s?Object(Zn.a)((function(e,t,n){var r=ie.a.runKernel(oe.ad,R,P);return n([e,t,r]),{value:Object(be.a)(r,T),gradFunc:F}}))(M,D):Object(Zn.a)((function(e,t,n,r){var a=ie.a.runKernel(oe.ad,R,P);return r([e,t,a,n]),{value:Object(be.a)(a,T),gradFunc:F}}))(M,D,C)}});var sr=Object(O.b)({hammingWindow_:function(e){return Xn(e,.54,.46)}});var cr=Object(O.b)({hannWindow_:function(e){return Xn(e,.5,.5)}});var lr=Object(O.b)({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Object(j.a)(e,i,t)),i+=n;if(r)for(;i<e.size;){var u=i+t-e.size,s=Object(_.a)([Object(j.a)(e,i,t-u),Object(_e.a)([u],a)]);o.push(s),i+=n}return 0===o.length?gn([],[0,t]):Object(be.a)(Object(_.a)(o),[o.length,t])}});var fr=Object(O.b)({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cr;null==r&&(r=Hn(t));for(var i=lr(e,t,n),o=Object(k.a)(i,a(t)),u=[],s=0;s<i.shape[0];s++)u.push(Object(rn.a)(Object(j.a)(o,[s,0],[1,t]),r));return Object(_.a)(u)}});var dr=Object(O.b)({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(x.a)(e,"image","cropAndResize"),u=Object(x.a)(t,"boxes","cropAndResize","float32"),s=Object(x.a)(n,"boxInd","cropAndResize","int32"),c=u.shape[0];N.b(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),N.b(2===u.rank&&4===u.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(u.shape,".")})),N.b(1===s.rank&&s.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(u.shape,".")})),N.b(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),N.b(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),N.b("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:u,boxInd:s},f={method:a,extrapolationValue:i,cropSize:r},d=ie.a.runKernel(oe.K,l,f);return d}});var hr=Object(O.b)({flipLeftRight_:function(e){var t=Object(x.a)(e,"image","flipLeftRight","float32");N.b(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return ie.a.runKernel(oe.eb,n,{})}});var pr=Object(O.b)({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Object(x.a)(e,"image","rotateWithOffset","float32");N.b(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},u=ie.a.runKernel(oe.uc,i,o);return u}});function vr(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),N.b(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),N.b(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),N.b(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),N.b(1===t.rank,(function(){return"scores must be a 1D tensor"})),N.b(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),N.b(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var mr=Object(O.b)({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Object(x.a)(e,"boxes","nonMaxSuppression"),o=Object(x.a)(t,"scores","nonMaxSuppression"),u=vr(i,o,n,r,a),s={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold};return ie.a.runKernel(oe.Wb,{boxes:i,scores:o},s)}}),gr=n(115);function br(){return(br=Object(In.a)(Dn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p=arguments;return Dn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Object(x.a)(t,"boxes","nonMaxSuppressionAsync"),u=Object(x.a)(n,"scores","nonMaxSuppressionAsync"),s=vr(o,u,r,a,i),r=s.maxOutputSize,a=s.iouThreshold,i=s.scoreThreshold,e.next=10,Promise.all([o.data(),u.data()]);case 10:return c=e.sent,l=c[0],f=c[1],d=Object(gr.a)(l,f,r,a,i),h=d.selectedIndices,o!==t&&o.dispose(),u!==n&&u.dispose(),e.abrupt("return",Object(vn.a)(h,"int32"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yr=function(e,t,n){return br.apply(this,arguments)};var xr=Object(O.b)({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Object(x.a)(e,"boxes","nonMaxSuppression"),u=Object(x.a)(t,"scores","nonMaxSuppression"),s=vr(o,u,n,r,a,i),c={boxes:o,scores:u},l={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold,softNmsSigma:i=s.softNmsSigma},f=ie.a.runKernel(oe.Yb,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function _r(){return(_r=Object(In.a)(Dn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m=arguments;return Dn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,u=Object(x.a)(t,"boxes","nonMaxSuppressionAsync"),s=Object(x.a)(n,"scores","nonMaxSuppressionAsync"),c=vr(u,s,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([u.data(),s.data()]);case 12:return l=e.sent,f=l[0],d=l[1],h=Object(gr.c)(f,d,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Object(vn.a)(p,"int32"),selectedScores:Object(vn.a)(v)});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wr=function(e,t,n){return _r.apply(this,arguments)};var kr=Object(O.b)({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Object(x.a)(e,"boxes","nonMaxSuppression"),u=Object(x.a)(t,"scores","nonMaxSuppression"),s=vr(o,u,n,r,a,null),c=s.maxOutputSize,l=s.iouThreshold,f=s.scoreThreshold,d={boxes:o,scores:u},h={maxOutputSize:c,iouThreshold:l,scoreThreshold:f,padToMaxOutputSize:i},p=ie.a.runKernel(oe.Xb,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}});function Or(){return(Or=Object(In.a)(Dn.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,_=arguments;return Dn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_.length>3&&void 0!==_[3]?_[3]:.5,i=_.length>4&&void 0!==_[4]?_[4]:Number.NEGATIVE_INFINITY,o=_.length>5&&void 0!==_[5]&&_[5],u=Object(x.a)(t,"boxes","nonMaxSuppressionAsync"),s=Object(x.a)(n,"scores","nonMaxSuppressionAsync"),c=vr(u,s,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,d=c.scoreThreshold,e.next=11,Promise.all([u.data(),s.data()]);case 11:return h=e.sent,p=Object($n.a)(h,2),v=p[0],m=p[1],g=Object(gr.b)(v,m,l,f,d,o),b=g.selectedIndices,y=g.validOutputs,u!==t&&u.dispose(),s!==n&&s.dispose(),e.abrupt("return",{selectedIndices:Object(vn.a)(b,"int32"),validOutputs:Object(zt.a)(y,"int32")});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Sr=function(e,t,n){return Or.apply(this,arguments)},jr=n(286),Er=n(285);var Cr=Object(O.b)({bandPart_:function(e,t,n){Object(N.b)(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Object(N.b)(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Object(x.a)(e,"a","bandPart");Object(N.b)(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=Object($n.a)(i,2),u=o[0],s=o[1];if(!(t<=u))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(u,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=u),n<0&&(n=s);var c=Object(be.a)(Object(Ct.a)(0,u,1,"int32"),[-1,1]),l=Object(Ct.a)(0,s,1,"int32"),f=Object(rt.a)(c,l),d=Object(Ue.a)(Object(De.a)(f,Object(zt.a)(+t,"int32")),Object(je.a)(f,Object(zt.a)(-n,"int32"))),h=Object(Tn.a)([u,s],r.dtype);return Object(be.a)(Object(cn.a)(Object(jn.a)(Object(be.a)(r,[-1,u,s])).map((function(e){return Object(Cn.a)(d,e,h)}))),a)}});var Ar=Object(O.b)({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Object(N.b)(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Object(N.b)(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Object(an.a)(e,e.shape[0],0).map((function(e){return Object(sn.a)(e,[0])}))),Object(N.b)(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(ie.a.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Object(k.a)(Object(dn.a)(Object(k.a)(n[a],t)),n[a]);t=Object(rt.a)(t,i)}return Object(ce.a)(t,Object(Ln.a)(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Object(cn.a)(n,0):n}}),Tr=n(43);function Nr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ie.a.tidy((function(){Object(N.b)(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=xe(n),i=Object(U.a)(e),o=gn([[1]],[1,1]),u=Object(U.a)(o),s=n>=r?r:n,c=function(e){var t=i,s=u,c=a,l=ie.a.tidy((function(){var t=Object(j.a)(i,[e,e],[n-e,1]),s=Object(Ln.a)(t),c=Object(j.a)(i,[e,e],[1,1]),l=Object(Cn.a)(Object(Se.a)(c,0),gn([[-1]]),gn([[1]])),f=Object(rt.a)(c,Object(k.a)(l,s)),d=Object(ce.a)(t,f);u=1===d.shape[0]?Object(U.a)(o):Object(_.a)([o,Object(j.a)(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var h=Object(ut.a)(Object(ce.a)(Object(w.a)(l,f),s)),p=Object(j.a)(i,[e,0],[n-e,r]),v=Object(k.a)(h,u),m=Object(Pn.a)(u);if(0===e)i=Object(rt.a)(p,Object(w.a)(v,Object(w.a)(m,p)));else{var g=Object(rt.a)(p,Object(w.a)(v,Object(w.a)(m,p)));i=Object(_.a)([Object(j.a)(i,[0,0],[e,r]),g],0)}var b=Object(Pn.a)(v),y=Object(j.a)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Object(rt.a)(y,Object(w.a)(Object(w.a)(y,u),b));else{var x=Object(rt.a)(y,Object(w.a)(Object(w.a)(y,u),b));a=Object(_.a)([Object(j.a)(a,[0,0],[n,e]),x],1)}return[u,i,a]})),f=Object($n.a)(l,3);u=f[0],i=f[1],a=f[2],Object(Tr.d)([t,s,c])},l=0;l<s;++l)c(l);return!t&&n>r&&(a=Object(j.a)(a,[0,0],[n,r]),i=Object(j.a)(i,[0,0],[r,r])),[a,i]}))}var Mr=Object(O.b)({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Object(N.b)(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Nr(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Object(jn.a)(Object(be.a)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Nr(e,t),r=Object($n.a)(n,2),o=r[0],u=r[1];a.push(o),i.push(u)}));var o=Object(be.a)(Object(cn.a)(a,0),e.shape),u=Object(be.a)(Object(cn.a)(i,0),e.shape);return[o,u]}}),Dr=n(61);var Ir=Object(O.b)({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dr.a.SUM_BY_NONZERO_WEIGHTS,r=Object(x.a)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Object(x.a)(t,"weights","computeWeightedLoss"));var i=null==a?r:Object(k.a)(r,a);if(n===Dr.a.NONE)return i;if(n===Dr.a.SUM)return Object(dn.a)(i);if(n===Dr.a.MEAN){if(null==a)return Object($e.a)(i);var o=r.size/a.size,u=Object(ce.a)(Object(dn.a)(i),Object(dn.a)(a));return o>1?Object(ce.a)(u,Object(zt.a)(o)):u}if(n===Dr.a.SUM_BY_NONZERO_WEIGHTS){if(null==a)return Object(ce.a)(Object(dn.a)(i),Object(zt.a)(r.size));var s=Object(k.a)(a,Object(lt.a)(r.shape)),c=Object(L.a)(Object(dn.a)(Object(st.a)(s,Object(zt.a)(0))),"float32");return Object(ce.a)(Object(dn.a)(i),c)}throw Error("Unknown reduction: ".concat(n))}});var Fr=Object(O.b)({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(x.a)(e,"labels","absoluteDifference"),o=Object(x.a)(t,"predictions","absoluteDifference"),u=null;null!=n&&(u=Object(x.a)(n,"weights","absoluteDifference")),Object(N.e)(i.shape,o.shape,"Error in absoluteDifference: ");var s=Object(a.a)(Object(rt.a)(i,o));return Ir(s,u,r)}});var Rr=Object(O.b)({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(x.a)(e,"labels","cosineDistance"),o=Object(x.a)(t,"predictions","cosineDistance"),u=null;null!=r&&(u=Object(x.a)(r,"weights","cosineDistance")),Object(N.e)(i.shape,o.shape,"Error in cosineDistance: ");var s=Object(zt.a)(1),c=Object(rt.a)(s,Object(dn.a)(Object(k.a)(i,o),n,!0));return Ir(c,u,a)}});var Pr=Object(O.b)({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.a.SUM_BY_NONZERO_WEIGHTS,a=Object(x.a)(e,"labels","hingeLoss"),i=Object(x.a)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Object(x.a)(n,"weights","hingeLoss")),Object(N.e)(a.shape,i.shape,"Error in hingeLoss: ");var u=Object(zt.a)(1);a=Object(rt.a)(Object(k.a)(Object(zt.a)(2),a),u);var s=Object(Nt.a)(Object(rt.a)(u,Object(k.a)(a,i)));return Ir(s,o,r)}});var Lr=Object(O.b)({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.a.SUM_BY_NONZERO_WEIGHTS,o=Object(x.a)(e,"labels","huberLoss"),s=Object(x.a)(t,"predictions","huberLoss"),c=null;null!=n&&(c=Object(x.a)(n,"weights","huberLoss")),Object(N.e)(o.shape,s.shape,"Error in huberLoss: ");var l=Object(zt.a)(r),f=Object(a.a)(Object(rt.a)(s,o)),d=Object(Je.a)(f,l),h=Object(rt.a)(f,d),p=Object(u.a)(Object(k.a)(Object(zt.a)(.5),Object(nt.a)(d)),Object(k.a)(l,h));return Ir(p,c,i)}});var Br=Object(O.b)({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(x.a)(e,"labels","logLoss"),o=Object(x.a)(t,"predictions","logLoss"),s=null;null!=n&&(s=Object(x.a)(n,"weights","logLoss")),Object(N.e)(i.shape,o.shape,"Error in logLoss: ");var c=Object(zt.a)(1),l=Object(zt.a)(r),f=Object(ut.a)(Object(k.a)(i,Object(Re.a)(Object(u.a)(o,l)))),d=Object(k.a)(Object(rt.a)(c,i),Object(Re.a)(Object(u.a)(Object(rt.a)(c,o),l))),h=Object(rt.a)(f,d);return Ir(h,s,a)}});var zr=Object(O.b)({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dr.a.SUM_BY_NONZERO_WEIGHTS,a=Object(x.a)(e,"labels","meanSquaredError"),i=Object(x.a)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Object(x.a)(n,"weights","meanSquaredError")),Object(N.e)(a.shape,i.shape,"Error in meanSquaredError: ");var u=Object(un.a)(a,i);return Ir(u,o,r)}});function Ur(e,t){var n=Object(x.a)(e,"labels","sigmoidCrossEntropyWithLogits"),r=Object(x.a)(t,"logits","sigmoidCrossEntropyWithLogits");Object(N.e)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=Object(Nt.a)(r),o=Object(k.a)(r,n),s=Object(Pe.a)(Object(ve.a)(Object(ut.a)(Object(a.a)(r))));return Object(u.a)(Object(rt.a)(i,o),s)}var Wr=Object(O.b)({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(x.a)(e,"multiClassLabels","sigmoidCrossEntropy"),o=Object(x.a)(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Object(x.a)(n,"weights","sigmoidCrossEntropy")),Object(N.e)(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Object(zt.a)(r),l=Object(zt.a)(1),f=Object(zt.a)(.5);i=Object(u.a)(Object(k.a)(i,Object(rt.a)(l,c)),Object(k.a)(f,c))}var d=Ur(i,o);return Ir(d,s,a)}});function Vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=Object(Zn.a)((function(e,t,r){var a=Object(ze.a)(t,[n],!0),i=Object(rt.a)(Object(L.a)(t,"float32"),a);r([e,i]);var o=Object(ut.a)(Object(k.a)(i,e));return{value:Object(dn.a)(o,[n]),gradFunc:function(e,t){var r=Object($n.a)(t,2),a=r[0],i=r[1],o=Object(tt.e)(e.shape,[n]);return[Object(k.a)(Object(be.a)(e,o),Object(rt.a)(Object(L.a)(a,"float32"),Object(ve.a)(i))),Object(k.a)(Object(be.a)(e,o),Object(rt.a)(Object(ve.a)(i),Object(L.a)(a,"float32")))]}}}));return r(e,t)}var Gr=Object(O.b)({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dr.a.SUM_BY_NONZERO_WEIGHTS,i=Object(x.a)(e,"onehotLabels","softmaxCrossEntropy"),o=Object(x.a)(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Object(x.a)(n,"weights","softmaxCrossEntropy")),Object(N.e)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Object(zt.a)(r),l=Object(zt.a)(1),f=Object(zt.a)(i.shape[1]);i=Object(u.a)(Object(k.a)(i,Object(rt.a)(l,c)),Object(ce.a)(c,f))}var d=Vr(i,o);return Ir(d,s,a)}}),qr={fft:en.a,ifft:tn.a,rfft:rn.a,irfft:nn.a},Hr={hammingWindow:sr,hannWindow:cr,frame:lr,stft:fr},Xr={flipLeftRight:hr,resizeNearestNeighbor:Er.a,resizeBilinear:jr.a,rotateWithOffset:pr,cropAndResize:dr,nonMaxSuppression:mr,nonMaxSuppressionAsync:yr,nonMaxSuppressionWithScore:xr,nonMaxSuppressionWithScoreAsync:wr,nonMaxSuppressionPadded:kr,nonMaxSuppressionPaddedAsync:Sr},Yr={bandPart:Cr,gramSchmidt:Ar,qr:Mr},Kr={absoluteDifference:Fr,computeWeightedLoss:Ir,cosineDistance:Rr,hingeLoss:Pr,huberLoss:Lr,logLoss:Br,meanSquaredError:zr,sigmoidCrossEntropy:Wr,softmaxCrossEntropy:Gr}},function(e,t,n){"use strict";n.r(t),n.d(t,"makeTypesMatch",(function(){return o})),n.d(t,"assertTypesMatch",(function(){return u})),n.d(t,"isTensorInList",(function(){return s})),n.d(t,"getTensorsInContainer",(function(){return c}));var r=n(15),a=n(135),i=n(20);function o(e,t){if(e.dtype===t.dtype)return[e,t];var n=Object(a.c)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function u(e,t){Object(i.b)(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function s(e,t){return t.some((function(t){return t.id===e.id}))}function c(e){var t=[];return l(e,t,new Set),t}function l(e,t,n){if(null!=e)if(e instanceof r.a)t.push(e);else if(a=e,Array.isArray(a)||"object"===typeof a){var a,i=e;for(var o in i){var u=i[o];n.has(u)||(n.add(u),l(u,t,n))}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return v}));var r=n(7),a=n(2),i=n.n(a),o=n(16),u=n(1),s=n(9),c=n(20),l="tfjsflags",f=function(){function e(t){Object(u.a)(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return Object(s.a)(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Object(c.x)(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return d(t,r[0],r[1]),r.join("=")})),t}(this.global.location.search);if(l in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),a=Object(r.a)(n,2),i=a[0],o=a[1];e.urlFlags[i]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(i,o)}))}}}]),e}();function d(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function h(){return p}var p=null;function v(e){p=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),a=n(5),i=n(10);var o=Object(i.b)({square_:function(e){var t=Object(a.a)(e,"x","square");return r.a.runKernel("Square",{x:t},{})}})},function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return p})),n.d(t,"t",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"l",(function(){return g})),n.d(t,"u",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"o",(function(){return x})),n.d(t,"k",(function(){return _})),n.d(t,"q",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return O})),n.d(t,"p",(function(){return S})),n.d(t,"a",(function(){return j})),n.d(t,"s",(function(){return E}));var r=n(11),a=n(41),i=n(15),o=n(40);function u(){Object(a.c)().set("PROD",!0)}function s(){Object(a.c)().set("DEBUG",!0)}function c(){Object(a.c)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function l(e){Object(a.c)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function f(){r.a.disposeVariables()}function d(){return r.a}function h(){return r.a.memory()}function p(e){return r.a.profile(e)}function v(e,t){return r.a.tidy(e,t)}function m(e){Object(o.getTensorsInContainer)(e).forEach((function(e){return e.dispose()}))}function g(e){return r.a.keep(e)}function b(e){return r.a.time(e)}function y(e){return r.a.setBackend(e)}function x(){return r.a.ready()}function _(){return r.a.backendName}function w(e){r.a.removeBackend(e)}function k(e){return r.a.findBackend(e)}function O(e){return r.a.findBackendFactory(e)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return r.a.registerBackend(e,t,n)}function j(){return r.a.backend}function E(e,t){Object(a.c)().setPlatform(e,t)}Object(i.e)(l)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({slice_:function(e,t,n){var o=Object(i.a)(e,"x","slice","string_or_numeric");if(0===o.rank)throw new Error("Slicing scalar is not possible");var u={x:o},s={begin:t,size:n};return r.a.runKernel(a.Ec,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(u.a)(e,"a","matMul"),l=Object(u.a)(t,"b","matMul"),f=Object(o.makeTypesMatch)(c,l),d=Object(r.a)(f,2),h={a:c=d[0],b:l=d[1]},p={transposeA:n,transposeB:s};return a.a.runKernel(i.s,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(415);function a(e){if("string"!==typeof e)throw new Error(Object(r.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({neg_:function(e){var t={x:Object(i.a)(e,"x","neg")};return r.a.runKernel(a.Vb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=n(124);function i(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){Object(a.a)(e,n),Object(a.a)(t,n)}}),[e,t])}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=new Date,a=new Date;function i(e,t,n,o){function u(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return u.floor=function(t){return e(t=new Date(+t)),t},u.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},u.round=function(e){var t=u(e),n=u.ceil(e);return e-t<n-e?t:n},u.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},u.range=function(n,r,a){var i,o=[];if(n=u.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return o;do{o.push(i=new Date(+n)),t(n,a),e(n)}while(i<n&&n<r);return o},u.filter=function(n){return i((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(u.count=function(t,i){return r.setTime(+t),a.setTime(+i),e(r),e(a),Math.floor(n(r,a))},u.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?u.filter(o?function(t){return o(t)%e===0}:function(t){return u.count(0,t)%e===0}):u:null}),u}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(101),s=n(10);var c=Object(s.b)({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.b)(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Object(i.b)(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Object(u.a)(n[0]);var s=n,c={axis:t};return r.a.runKernel(a.B,s,c)}})},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return y}));var r=n(7),a=n(12);function i(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0,u=e[3],c=[].concat(Object(a.a)(t),[u]),l=y(i);return s(e,c,n,o,r,null,null,l)}function o(e,t,n,a,i,o){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=f(t),d=Object(r.a)(l,2),h=d[0],p=d[1];if("channelsLast"===c)u=[h,p,e[3],e[3]];else{if("channelsFirst"!==c)throw new Error("Unknown dataFormat ".concat(c));u=[h,p,e[1],e[1]]}return s(e,u,n,a,i,o,!1,c)}function u(e,t,n,a,i,o){var u,s,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",f=d(t),h=Object(r.a)(f,3),p=h[0],v=h[1],m=h[2];if("NDHWC"===l)s="channelsLast",u=[p,v,m,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));s="channelsFirst",u=[p,v,m,e[1],e[1]]}return c(e,u,n,a,i,!1,s,o)}function s(e,t,n,a,i,o){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,v=-1;if("channelsLast"===s){var m=Object(r.a)(e,4);c=m[0],l=m[1],d=m[2],v=m[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var g=Object(r.a)(e,4);c=g[0],v=g[1],l=g[2],d=g[3]}var b,y=Object(r.a)(t,4),x=y[0],_=y[1],w=y[3],k=f(n),O=Object(r.a)(k,2),S=O[0],j=O[1],E=f(a),C=Object(r.a)(E,2),A=C[0],T=C[1],N=h(x,A),M=h(_,T),D=p(i,l,d,S,j,N,M,o,s),I=D.padInfo,F=D.outHeight,R=D.outWidth,P=u?w*v:w;return"channelsFirst"===s?b=[c,P,F,R]:"channelsLast"===s&&(b=[c,F,R,P]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:d,inChannels:v,outHeight:F,outWidth:R,outChannels:P,padInfo:I,strideHeight:S,strideWidth:j,filterHeight:x,filterWidth:_,effectiveFilterHeight:N,effectiveFilterWidth:M,dilationHeight:A,dilationWidth:T,inShape:e,outShape:b,filterShape:t}}function c(e,t,n,a,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,f=-1,p=-1,m=-1;if("channelsLast"===u){var g=Object(r.a)(e,5);c=g[0],l=g[1],f=g[2],p=g[3],m=g[4]}else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat ".concat(u));var b=Object(r.a)(e,5);c=b[0],m=b[1],l=b[2],f=b[3],p=b[4]}var y,x=Object(r.a)(t,5),_=x[0],w=x[1],k=x[2],O=x[4],S=d(n),j=Object(r.a)(S,3),E=j[0],C=j[1],A=j[2],T=d(a),N=Object(r.a)(T,3),M=N[0],D=N[1],I=N[2],F=h(_,M),R=h(w,D),P=h(k,I),L=v(i,l,f,p,E,C,A,F,R,P,s),B=L.padInfo,z=L.outDepth,U=L.outHeight,W=L.outWidth,V=o?O*m:O;return"channelsFirst"===u?y=[c,V,z,U,W]:"channelsLast"===u&&(y=[c,z,U,W,V]),{batchSize:c,dataFormat:u,inDepth:l,inHeight:f,inWidth:p,inChannels:m,outDepth:z,outHeight:U,outWidth:W,outChannels:V,padInfo:B,strideDepth:E,strideHeight:C,strideWidth:A,filterDepth:_,filterHeight:w,filterWidth:k,effectiveFilterDepth:F,effectiveFilterHeight:R,effectiveFilterWidth:P,dilationDepth:M,dilationHeight:D,dilationWidth:I,inShape:e,outShape:y,filterShape:t}}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=h(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function f(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function d(e){return"number"===typeof e?[e,e,e]:e}function h(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t,n,r,a,i,o,u,s){var c,f,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=l(e,t,n));var i=e[0],o=e[1];return[m((i-t+2*r)/n+1,a),m((o-t+2*r)/n+1,a)]}([t,n],i,r,e,u);f=h[0],d=h[1]}else if("same"===e){f=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(f-1)*r+i-t),v=Math.max(0,(d-1)*a+o-n),g=Math.floor(p/2),b=p-g,y=Math.floor(v/2);c={top:g,bottom:b,left:y,right:v-y,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var x="channelsLast"===s?e[1][0]:e[2][0],_="channelsLast"===s?e[1][1]:e[2][1],w="channelsLast"===s?e[2][0]:e[3][0],k="channelsLast"===s?e[2][1]:e[3][1];c={top:x,bottom:_,left:w,right:k,type:0===x&&0===_&&0===w&&0===k?"VALID":"EXPLICIT"},f=m((t-i+x+_)/r+1,u),d=m((n-o+w+k)/a+1,u)}return{padInfo:c,outHeight:f,outWidth:d}}function v(e,t,n,r,a,i,o,u,s,c,f){var d,h,p,v;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var g=function(e,t,n,r,a,i){null==a&&(a=l(e,t,r));var o=e[0],u=e[1],s=e[2];return[m((o-t+2*a)/r+1,i),m((u-t+2*a)/r+1,i),m((s-t+2*a)/r+1,i),n]}([t,n,r,1],u,1,a,e,f);h=g[0],p=g[1],v=g[2]}else if("same"===e){var b=((h=Math.ceil(t/a))-1)*a+u-t,y=((p=Math.ceil(n/i))-1)*i+s-n,x=((v=Math.ceil(r/o))-1)*o+c-r,_=Math.floor(b/2),w=b-_,k=Math.floor(y/2),O=y-k,S=Math.floor(x/2);d={top:k,bottom:O,left:S,right:x-S,front:_,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-u+1)/a),p=Math.ceil((n-s+1)/i),v=Math.ceil((r-c+1)/o)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:v}}function m(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function g(e){var t=f(e),n=Object(r.a)(t,3),a=n[0],i=n[1],o=n[2];return 1===a&&1===i&&1===o}function b(e,t){return g(e)||g(t)}function y(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return u}));var r=1e3,a=6e4,i=36e5,o=864e5,u=6048e5},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(429)},function(e,t,n){"use strict";function r(e,t,n){return e.fields=t||[],e.fname=n,e}function a(e){return 1===e.length?i(e[0]):o(e)}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"j",(function(){return _})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return w}));var i=function(e){return function(t){return t[e]}},o=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function u(e){throw Error(e)}function s(e){var t,n,r,a=[],i=e.length,o=null,s=0,c="";function l(){a.push(c+e.substring(t,n)),c="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))c+=e.substring(t,n),c+=e.substring(++n,++n),t=n;else if(r===o)l(),o=null,s=-1;else{if(o)continue;t===s&&'"'===r||t===s&&"'"===r?(t=n+1,o=r):"."!==r||s?"["===r?(n>t&&l(),s=t=n+1):"]"===r&&(s||u("Access path missing open bracket: "+e),s>0&&l(),s=0,t=n+1):n>t?l():t=n+1}return s&&u("Access path missing closing bracket: "+e),o&&u("Access path missing closing quote: "+e),n>t&&(n++,l()),a}function c(e,t,n){var i=s(e);return e=1===i.length?i[0]:e,r((n&&n.get||a)(i),[e],t||e)}c("id");var l=r((function(e){return e}),[],"identity");r((function(){return 0}),[],"zero"),r((function(){return 1}),[],"one"),r((function(){return!0}),[],"true"),r((function(){return!1}),[],"false");var f=Array.isArray;function d(e){return e===Object(e)}function h(e){return null==e||""===e?null:+e}function p(e){return"function"===typeof e}function v(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var m=Object.prototype.hasOwnProperty;function g(e,t){return m.call(e,t)}function b(e){return f(e)?"["+e.map(b)+"]":d(e)||"string"===typeof e?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function y(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}var x=function(e){return function(e){return"number"===typeof e}(e)||function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e:Date.parse(e)};function _(e,t){return t=t||x,null==e||""===e?null:t(e)}function w(e){return null==e||""===e?null:e+""}},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return f}));var r=n(415);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(Object(r.a)(3,e));var a=e.substring(t+1,e.length-1).split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function s(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,u=r*Math.min(a,1-a),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-u*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function c(e,t){return e=i(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function l(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function f(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(12),a=n(11),i=n(15),o=n(5),u=n(20);function s(e){return u.b(u.u(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Object(o.a)(t,"x","tf.grad","string_or_numeric"),i=null!=n?Object(o.a)(n,"dy","tf.grad"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&u.e(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(o),o[0]}))}}function c(e){return u.b(u.u(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){u.b(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var i=Object(o.b)(t,"args","tf.grads","string_or_numeric"),s=null!=n?Object(o.a)(n,"dy","tf.grads"):null;return a.a.tidy((function(){var t=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(i))}),i,s),n=t.value,o=t.grads;return null!=s&&u.e(n.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o),o}))}}function l(e){return u.b(u.u(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){u.b(t instanceof i.a,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),u.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=a.a.gradients((function(){return e(t)}),[t],n),o=r.grads,s=r.value;return p(o),{grad:o[0],value:s}}}function f(e){return u.b(u.u(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){u.b(Array.isArray(t)&&t.every((function(e){return e instanceof i.a})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),u.b(null==n||n instanceof i.a,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var o=a.a.gradients((function(){return e.apply(void 0,Object(r.a)(t))}),t,n);return null!=n&&u.e(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(o.grads),o}}function d(e,t){u.b(u.u(e),(function(){return"The f passed in variableGrads(f) must be a function"})),u.b(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof i.c})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],a.a.registeredVariables)t.push(a.a.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,s=t.length;t=t.filter((function(e){return e.trainable})),u.b(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(s," variables is ")+"trainable."}));var c=a.a.gradients(e,t,null,!0),l=c.value,f=c.grads;u.b(f.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),u.b(0===l.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(l.rank," tensor")}));var d={};return t.forEach((function(e,t){null!=f[t]&&(d[e.name]=f[t])})),null!=o&&o.forEach((function(e){return d[e.name]=null})),{value:l,grads:d}}function h(e){return a.a.customGrad(e)}function p(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(157),s=n(33),c=n(10);var l=Object(c.b)({where_:function(e,t,n){var c=Object(i.a)(t,"a","where"),l=Object(i.a)(n,"b","where"),f=Object(i.a)(e,"condition","where","bool"),d=Object(s.a)(c.shape,l.shape),h=Object(u.a)(c,d),p=Object(u.a)(l,d);1===f.rank&&Object(o.b)(f.shape[0]===c.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==f.rank&&Object(o.e)(f.shape,p.shape,"Error in where: ");var v={condition:f,t:h,e:p};return r.a.runKernel(a.yc,v)}})},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({sqrt_:function(e){var t={x:Object(i.a)(e,"x","sqrt")};return r.a.runKernel(a.Kc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function i(e){var t=r.useRef(e);return a((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return b}));var r=n(70),a=n(6),i=n.n(a),o=(n(38),n(106)),u=n(318),s=n(96),c=n(17),l=n(319),f=n.n(l),d=(n(213),n(86)),h=(n(201),function(e){var t=Object(u.a)();return t.displayName=e,t}("Router-History")),p=function(e){var t=Object(u.a)();return t.displayName=e,t}("Router"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return i.a.createElement(p.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.a.createElement(h.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.a.Component);i.a.Component;i.a.Component;var m={},g=0;function b(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=void 0!==a&&a,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=m[n]||(m[n]={});if(r[e])return r[e];var a=[],i={regexp:f()(e,a,t),keys:a};return g<1e4&&(r[e]=i,g++),i}(n,{end:i,strict:u,sensitive:c}),a=r.regexp,o=r.keys,s=a.exec(e);if(!s)return null;var l=s[0],d=s.slice(1),h=e===l;return i&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var y=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(p.Consumer,null,(function(t){t||Object(s.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?b(n.pathname,e.props):t.match,a=Object(c.a)({},t,{location:n,match:r}),o=e.props,u=o.children,l=o.component,f=o.render;return Array.isArray(u)&&0===u.length&&(u=null),i.a.createElement(p.Provider,{value:a},a.match?u?"function"===typeof u?u(a):u:l?i.a.createElement(l,a):f?f(a):null:"function"===typeof u?u(a):null)}))},t}(i.a.Component);function x(e){return"/"===e.charAt(0)?e:"/"+e}function _(e,t){if(!e)return t;var n=x(e);return 0!==t.pathname.indexOf(n)?t:Object(c.a)({},t,{pathname:t.pathname.substr(n.length)})}function w(e){return"string"===typeof e?e:Object(o.e)(e)}function k(e){return function(){Object(s.a)(!1)}}function O(){}i.a.Component;var S=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return i.a.createElement(p.Consumer,null,(function(t){t||Object(s.a)(!1);var n,r,a=e.props.location||t.location;return i.a.Children.forEach(e.props.children,(function(e){if(null==r&&i.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?b(a.pathname,Object(c.a)({},e.props,{path:o})):t.match}})),r?i.a.cloneElement(n,{location:a,computedMatch:r}):null}))},t}(i.a.Component);i.a.useContext},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return f}));var r=n(20);function a(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,u=0;u<r;u++)-1===n.indexOf(u)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function u(e,t){return i(e,t.map((function(e){return 1})),t)}function s(e,t,n){r.b(a(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function c(e,t){if(a(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function l(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}},function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return x})),n.d(t,"g",(function(){return _}));var r=n(2),a=n.n(r),i=n(8),o=n(16),u=n(91),s=n(146),c=n(20),l=n(227);function f(e,t){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(a.a.mark((function e(t,n){var r,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],i=[],u=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),s=function(e){var s=u[e],c=Array.isArray(t)?t[e].tensor:t[s];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype&&"complex64"!==c.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(c.dtype));var l={name:s,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var f=new Promise(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,i=new Uint8Array(r),o=0,u=0;u<n.length;u++)s=n[u],l=new Uint8Array(new Uint32Array([s.length]).buffer),i.set(l,o),o+=4,i.set(s,o),o+=s.length;t(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());i.push(f)}else i.push(c.data());null!=n&&(l.group=n),r.push(l)},c=0;c<u.length;++c)s(c);return e.next=7,Promise.all(i);case 7:return l=e.sent,e.abrupt("return",{data:p(l),specs:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){var n,r,a={},o=0,f=Object(i.a)(t);try{for(f.s();!(r=f.n()).done;){var d=r.value,h=d.name,p=d.dtype,v=d.shape,m=Object(c.O)(v),g=void 0;if("quantization"in d){var b=d.quantization;if("uint8"===b.dtype||"uint16"===b.dtype){if(!("min"in b)||!("scale"in b))throw new Error("Weight ".concat(d.name," with quantization ").concat(b.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==b.dtype)throw new Error("Weight ".concat(d.name," has unknown ")+"quantization dtype ".concat(b.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==p)throw new Error("Weight ".concat(d.name," is quantized with ").concat(b.dtype," ")+"which only supports weights of type float32 not ".concat(p,"."))}var y=l.a[b.dtype],x=e.slice(o,o+m*y),_="uint8"===b.dtype?new Uint8Array(x):new Uint16Array(x);if("float32"===p)if("uint8"===b.dtype||"uint16"===b.dtype){g=new Float32Array(_.length);for(var k=0;k<_.length;k++){var O=_[k];g[k]=O*b.scale+b.min}}else{if("float16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type float32.");void 0===n&&(n=w()),g=n(_)}else{if("int32"!==p)throw new Error("Unsupported dtype in weight '".concat(h,"': ").concat(p));if("uint8"!==b.dtype&&"uint16"!==b.dtype)throw new Error("Unsupported quantization type ".concat(b.dtype," ")+"for weight type int32.");g=new Int32Array(_.length);for(var S=0;S<_.length;S++){var j=_[S];g[S]=Math.round(j*b.scale+b.min)}}o+=m*y}else if("string"===p){var E=Object(c.O)(d.shape);g=[];for(var C=0;C<E;C++){var A=new Uint32Array(e.slice(o,o+4))[0];o+=4;var T=new Uint8Array(e.slice(o,o+A));g.push(T),o+=A}}else{var N=l.a[p],M=e.slice(o,o+m*N);if("float32"===p)g=new Float32Array(M);else if("int32"===p)g=new Int32Array(M);else if("bool"===p)g=new Uint8Array(M);else{if("complex64"!==p)throw new Error("Unsupported dtype in weight '".concat(h,"': ").concat(p));g=new Float32Array(M);for(var D=new Float32Array(g.length/2),I=new Float32Array(g.length/2),F=0;F<D.length;F++)D[F]=g[2*F],I[F]=g[2*F+1];var R=Object(s.a)(D,v,"float32"),P=Object(s.a)(I,v,"float32");a[h]=Object(u.a)(R,P),R.dispose(),P.dispose()}o+=m*N}"complex64"!==p&&(a[h]=Object(s.a)(g,v,p))}}catch(L){f.e(L)}finally{f.f()}return a}function p(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var v="undefined"!==typeof e&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function m(t){return v?e.byteLength(t):new Blob([t]).size}function g(t){if(v)return e.from(t).toString("base64");for(var n=new Uint8Array(t),r="",a=0,i=n.length;a<i;a++)r+=String.fromCharCode(n[a]);return btoa(r)}function b(t){if(v){var n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var r=atob(t),a=new Uint8Array(r.length),i=0;i<r.length;++i)a.set([r.charCodeAt(i)],i);return a.buffer}function y(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function x(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function _(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:m(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:m(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var u=r[o],s=e[n[u>>10]+(1023&u)]+t[u>>10];i[o]=s}return new Float32Array(a)}}}).call(this,n(216).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({exp_:function(e){var t={x:Object(i.a)(e,"x","exp")};return r.a.runKernel(a.Z,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(378);function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Object(r.a)(e,t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return B})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return S}));var r=n(2),a=n.n(r),i=n(16),o=n(58),u=n(552),s=n(320),c=n(97),l=/^([A-Za-z]+:)?\/\//,f=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,d=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,h="file://";function p(e,t){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return r=e.sent,i=r.href,e.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function m(e,t){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(a.a.mark((function e(t,n){var r,i,u,s,c,p,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.b)({},this.options,n),r=this.fileAccess,i={href:null},p=f.test(t.replace(d,"")),null!=t&&"string"===typeof t&&p||Object(o.a)("Sanitize failure, invalid URI: "+Object(o.h)(t)),v=l.test(t),(c=n.baseURL)&&!v&&(t.startsWith("/")||"/"===c[c.length-1]||(t="/"+t),t=c+t),s=(u=t.startsWith(h))||"file"===n.mode||"http"!==n.mode&&!v&&r,u?t=t.slice(h.length):t.startsWith("//")&&("file"===n.defaultProtocol?(t=t.slice(2),s=!0):t=(n.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!s}),i.href=t,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),"image"===n.context&&n.crossOrigin&&(i.crossOrigin=n.crossOrigin+""),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function b(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:y}function y(){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.a)("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return e?function(){var t=Object(i.a)(a.a.mark((function t(n,r){var i,u,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(o.b)({},this.options.http,r),u=r&&r.response,t.next=4,e(n,i);case 4:return s=t.sent,t.abrupt("return",s.ok?Object(o.f)(s[u])?s[u]():s.text():Object(o.a)(s.status+""+s.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():w}function w(){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.a)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){return!Number.isNaN(+e)&&!(e instanceof Date)},S={boolean:o.i,integer:o.k,number:o.k,date:o.j,string:o.l,unknown:o.e},j=[function(e){return"true"===e||"false"===e||!0===e||!1===e},function(e){return O(e)&&Number.isInteger(+e)},O,function(e){return!Number.isNaN(Date.parse(e))}],E=["boolean","integer","number","date"];function C(e,t){if(!e||!e.length)return"unknown";for(var n,r,a,i=e.length,o=j.length,u=j.map((function(e,t){return t+1})),s=0,c=0;s<i;++s)for(r=t?e[s][t]:e[s],n=0;n<o;++n)if(u[n]&&(null!=(a=r)&&a===a)&&!j[n](r)&&(u[n]=0,++c===j.length))return"string";return E[u.reduce((function(e,t){return 0===e?t:e}),0)-1]}function A(e,t){return t.reduce((function(t,n){return t[n]=C(e,n),t}),{})}function T(e){var t=function(t,n){var r={delimiter:e};return N(t,n?Object(o.b)(n,r):r)};return t.responseType="text",t}function N(e,t){return t.header&&(e=t.header.map(o.h).join(t.delimiter)+"\n"+e),Object(u.a)(t.delimiter).parse(e+"")}function M(t,n){var r,a=n&&n.property?Object(o.c)(n.property):o.e;return!Object(o.g)(t)||(r=t,"function"===typeof e&&Object(o.f)(e.isBuffer)&&e.isBuffer(r))?a(JSON.parse(t)):function(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(a(t),n)}N.responseType="text",M.responseType="json";var D={interior:function(e,t){return e!==t},exterior:function(e,t){return e===t}};function I(e,t){var n,r,a,i;return e=M(e,t),t&&t.feature?(n=s.a,a=t.feature):t&&t.mesh?(n=s.b,a=t.mesh,i=D[t.filter]):Object(o.a)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[a])?n(e,r,i):Object(o.a)("Invalid TopoJSON object: "+a))&&r.features||[r]}I.responseType="json";var F={dsv:N,csv:T(","),tsv:T("\t"),json:M,topojson:I};function R(e,t){return arguments.length>1?(F[e]=t,this):Object(o.d)(F,e)?F[e]:null}function P(e){var t=R(e);return t&&t.responseType||"text"}function L(e,t,n,r){var a=R((t=t||{}).type||"json");return a||Object(o.a)("Unknown data format type: "+t.type),e=a(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;var a=Object(c.e)();n=n||a.timeParse,r=r||a.utcParse;var i,o,u,s,l,f,d=e.columns||Object.keys(e[0]);"auto"===t&&(t=A(e,d));var h=(d=Object.keys(t)).map((function(e){var a,i,o=t[e];if(o&&(o.startsWith("date:")||o.startsWith("utc:")))return("'"===(i=(a=o.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),("utc"===a[0]?r:n)(i);if(!S[o])throw Error("Illegal format pattern: "+e+":"+o);return S[o]}));for(u=0,l=e.length,f=d.length;u<l;++u)for(i=e[u],s=0;s<f;++s)i[o=d[s]]=h[s](i[o])}(e,t.parse,n,r),Object(o.d)(e,"columns")&&delete e.columns,e}var B=function(e,t){return function(n){return{options:n||{},sanitize:m,load:p,fileAccess:!!t,file:b(t),http:_(e)}}}("undefined"!==typeof fetch&&fetch,null)}).call(this,n(216).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({abs_:function(e){var t=Object(i.a)(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return r.a.runKernel(a.A,n)}var o={x:t};return r.a.runKernel(a.a,o)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return m}));var r=n(33),a=n(181),i=n(184),o=n(21),u=n(191),s=n(118),c=n(192),l=n(18),f=n(119),d=n(35);function h(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return Object(o.a)(e,Object(f.a)(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function p(e,t){var n=t,a=r.c(e.shape,t.shape);return a.length>0&&(n=Object(d.a)(n,a)),Object(l.a)(n,e.shape)}function v(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Object(s.a)(e);if("elu"===t)return Object(a.a)(e);if("relu6"===t)return Object(c.a)(e);if("prelu"===t)return Object(u.a)(e,n);if("leakyrelu"===t)return Object(i.a)(e,r);throw new Error("Unknown fused activation ".concat(t,"."))}var m=function(e,t){return!(e>0)||"linear"===t}},function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return _})),n.d(t,"g",(function(){return w})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return F})),n.d(t,"c",(function(){return k}));var r=n(8),a=n(13),i=n(14),o=n(2),u=n.n(o),s=n(16),c=n(1),l=n(9),f=n(0),d=n(290),h=n(104);function p(e){return e instanceof f.Tensor?{value:e.clone(),recurse:!1}:Object(h.e)(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var v=n(28),m=n(25),g=function(){function e(t){if(Object(c.a)(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Object(l.a)(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.push(a)}}catch(i){n.e(i)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),b=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(c.a)(this,n),t.call(this,n.INITIAL_CAPACITY)}return Object(l.a)(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"isFull",this).call(this)&&this.expand(),Object(v.a)(Object(m.a)(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(g);function y(e){return new S(e)}function x(e){return new j(e)}function _(e,t){return new P(e,t)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.FAIL;return new L(e,t)}b.INITIAL_CAPACITY=32;var k,O=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,[{key:"toArray",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new D(this,e)}},{key:"filter",value:function(e){return new N(this,e)}},{key:"map",value:function(e){return new M(this,e)}},{key:"mapAsync",value:function(e){return new I(this,e)}},{key:"serialMapAsync",value:function(e){return new I(this,e).serial()}},{key:"flatmap",value:function(e){return new R(this,e)}},{key:"forEachAsync",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new T(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.f,r=this.rowMajorBatch(e,t);return r.map((function(e){return Object(h.d)(e,n)}))}},{key:"concatenate",value:function(e,t){return new P(y([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new A(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new C(this,e)}},{key:"prefetch",value:function(e){return new B(this,e)}},{key:"shuffle",value:function(e,t){return new z(this,e,t)}},{key:"serial",value:function(){return new E(this)}}]),e}(),S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:(n=t,Object(h.b)(n,p)),done:!1});case 5:case"end":return e.stop()}var n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),j=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).nextFn=e,r}return Object(l.a)(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(O),E=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),C=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:f.dispose(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),A=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),T=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),N=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:f.dispose(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),M=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=f.tensor_util.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.tensor_util.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),D=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(O),I=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=f.tensor_util.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:a=e.sent,i=f.tensor_util.getTensorsInContainer(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",{value:a,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),F=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).outputQueue=new b,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),R=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,i,o,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=f.tensor_util.getTensorsInContainer(t.value),a=this.transform(t.value),i=f.tensor_util.getTensorsInContainer(a),this.outputQueue.pushAll(a),o=Object(r.a)(n);try{for(o.s();!(s=o.n()).done;)c=s.value,f.tensor_util.isTensorInList(c,i)||c.dispose()}catch(u){o.e(u)}finally{o.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(F),P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(O);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(k||(k={}));var L=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.FAIL;return Object(c.a)(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return Object(l.a)(n,[{key:"summary",value:function(){return"{".concat("TODO: fill in upstream of zip summaries","} -> Zip")}},{key:"nextState",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof O?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,Object(h.c)(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===k.FAIL?14:e.t0===k.SHORTEST?15:(e.t0,k.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. "+"Mismatched at element ".concat(this.count,"."));case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(O),B=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new g(r),a}return Object(l.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(O),z=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e,r,a){var i;return Object(c.a)(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=d.alea(a||f.util.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Object(l.a)(n,[{key:"next",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(B)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15),a=n(20);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",a.c(e),new r.b(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({reverse_:function(e,t){var n={x:Object(i.a)(e,"x","reverse")},o={dims:t};return r.a.runKernel(a.tc,n,o)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({greater_:function(e,t){var n=Object(u.a)(e,"a","greater"),c=Object(u.a)(t,"b","greater"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.nb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),a=n(20),i=n(22);function o(e,t,n,o){if(null==o&&(o=Object(a.r)(e)),"complex64"===o)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Object(a.A)(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Object(a.c)(t);var u=Object(a.O)(t),s=Object(a.O)(n);Object(a.b)(u===s,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(u," values but has ").concat(s)}));for(var c=0;c<n.length;++c){var l=n[c],f=c!==n.length-1||l!==Object(a.O)(t.slice(c));Object(a.b)(n[c]===t[c]||!f,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Object(a.A)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?Object(i.toTypedArray)(e,o):Object(a.m)(e,[],!0),r.a.makeTensor(e,t,o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({transpose_:function(e,t){var n=Object(i.a)(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){o.b(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var u={x:n},s={perm:t};return r.a.runKernel(a.Vc,u,s)}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},,function(e,t,n){var r=n(150),a=n(151),i=n(235),o=n(234),u=o.MAX_LENGTH,s=o.MAX_SAFE_INTEGER,c=n(171),l=c.re,f=c.t,d=n(300).compareIdentifiers,h=function(){"use strict";function e(t,n){if(r(this,e),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: ".concat(t));if(t.length>u)throw new TypeError("version is longer than ".concat(u," characters"));i("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var a=t.trim().match(n.loose?l[f.LOOSE]:l[f.FULL]);if(!a)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}return a(e,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(t){if(i("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"===typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}},{key:"compareMain",value:function(t){return t instanceof e||(t=new e(t,this.options)),d(this.major,t.major)||d(this.minor,t.minor)||d(this.patch,t.patch)}},{key:"comparePre",value:function(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],a=t.prerelease[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return d(r,a)}while(++n)}},{key:"compareBuild",value:function(t){t instanceof e||(t=new e(t,this.options));var n=0;do{var r=this.build[n],a=t.build[n];if(i("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return d(r,a)}while(++n)}},{key:"inc",value:function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}]),e}();e.exports=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({pow_:function(e,t){var n=Object(u.a)(e,"base","pow"),s=Object(u.a)(t,"exp","pow"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.fc,f)}})},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","pad");if(0===o.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var u={paddings:t,constantValue:n},s={x:o};return r.a.runKernel(a.dc,s,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(554),a=(n(6),n(149));function i(){return Object(r.a)()||a.a}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"c",(function(){return N})),n.d(t,"f",(function(){return M})),n.d(t,"e",(function(){return F})),n.d(t,"d",(function(){return R})),n.d(t,"k",(function(){return L})),n.d(t,"g",(function(){return B})),n.d(t,"h",(function(){return z})),n.d(t,"j",(function(){return U})),n.d(t,"b",(function(){return W}));var r=n(7),a=n(12),i=n(1),o=n(9),u=n(0),s=n(128),c=n(155),l=n(3),f=n(387),d=n(388),h=n(389),p=n(390),v=n(391),m=n(392),g=n(393),b=n(394),y=n(395),x=n(396),_=n(397),w=n(398),k=n(399),O=n(400),S=n(401),j=n(402),E=n(403),C=function(){function e(){var t;Object(i.a)(this,e);var n=[f,d,h,p,v,m,g,_,x,b,w,k,O,S,j,E,y],r=(t=[]).concat.apply(t,Object(a.a)(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object(o.a)(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.node,i=[],o=[],u=[],s=a.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?i.push(e[n.name]):"Const"===n.op?o.push(e[n.name]):null!=n.input&&0!==n.input.length||u.push(e[n.name]),e}),{}),c=[],f=[],d={},h={};null!=n&&(d=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e){var n=Object(l.b)(e),a=Object(r.a)(n,1)[0];t.inputs.push(s[a]),s[a].children.push(t)}))})),0===Object.keys(h).length?p.forEach((function(e){var t=s[e];0===t.children.length&&f.push(t)})):Object.keys(h).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=s[n];null!=a&&(a.signatureKey=h[e],f.push(a))})),Object.keys(d).length>0?Object.keys(d).forEach((function(e){var t=Object(l.b)(e),n=Object(r.a)(t,1)[0],a=s[n];a&&(a.signatureKey=d[e],c.push(a))})):c=i;var v={};null!=e.library&&null!=e.library.function&&(v=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var m={nodes:s,inputs:c,outputs:f,weights:o,placeholders:i,signature:n,functions:v};return u.length>0&&(m.initNodes=u),m}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=Object(c.a)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=T(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=T(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=z(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=z(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=M(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=M(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=B(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=B(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=N(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=N(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=W(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=W(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=L(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=L(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=U(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=U(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=F(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=F(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=R(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=R(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=I(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=I(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,a=[],i={};null!=n&&(i=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&a.push(e[n.name]),e}),{}));var o=[],u=[];e.signature.inputArg.forEach((function(e){var t=Object(l.b)(e.name),n=Object(r.a)(t,1)[0],a={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:D(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,o.push(a),i[n]=a})),Object.keys(i).forEach((function(e){var t=i[e];t.inputNames.forEach((function(e){var n=Object(l.b)(e),a=Object(r.a)(n,1)[0];t.inputs.push(i[a]),i[a].children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=Object(l.b)(s[e.name]),n=Object(r.a)(t,2),a=n[0],o=n[1],c=i[a];null!=c&&(c.defaultOutput=o,u.push(c))}));var c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:u,weights:a,placeholders:[],signature:c}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function A(t,n){var r=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){var n=Object(u.env)().global;if("undefined"!==typeof n.atob)return n.atob(t);if("undefined"!==typeof e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return n?r:r.toLowerCase()}function T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?A(a.s,r):n}function N(e,t,n){var r=e[t];return r?r.b:n}function M(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function D(e){switch("string"===typeof e&&(e=s.a[e]),e){case s.a.DT_FLOAT:return"float32";case s.a.DT_INT32:case s.a.DT_INT64:case s.a.DT_INT8:case s.a.DT_UINT8:return"int32";case s.a.DT_BOOL:return"bool";case s.a.DT_DOUBLE:return"float32";case s.a.DT_STRING:return"string";default:return null}}function I(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function F(e,t,n){var r=e[t];return r&&r.type?D(r.type):n}function R(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return D(e)})):n}function P(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function L(e,t,n){var r=e[t];return r&&r.shape?P(r.shape):n}function B(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function z(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return A(e,r)})):n}function U(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return P(e)})):n}function W(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}}).call(this,n(216).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({complex_:function(e,t){var n=Object(i.a)(e,"real","complex"),u=Object(i.a)(t,"imag","complex");o.e(n.shape,u.shape,"real and imag shapes, ".concat(n.shape," and ").concat(u.shape,", ")+"must match in call to tf.complex().");var s={real:n,imag:u};return r.a.runKernel(a.z,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(33),u=n(10);var s=Object(u.b)({logicalAnd_:function(e,t){var n=Object(i.a)(e,"a","logicalAnd","bool"),u=Object(i.a)(t,"b","logicalAnd","bool");Object(o.a)(n.shape,u.shape);var s={a:n,b:u};return r.a.runKernel(a.Eb,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.b)(e,"tensors","stack","string_or_numeric");o.b(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&o.b(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var u=n,s={axis:t};return r.a.runKernel(a.cc,u,s)}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return v}));var r=n(7),a=n(41),i=n(163),o=Object(i.a)("kernelRegistry",(function(){return new Map})),u=Object(i.a)("gradRegistry",(function(){return new Map}));function s(e,t){var n=m(e,t);return o.get(n)}function c(e){return u.get(e)}function l(e){for(var t=o.entries(),n=[];;){var a=t.next(),i=a.done,u=a.value;if(i)break;var s=Object(r.a)(u,2),c=s[0],l=s[1],f=c.split("_");Object(r.a)(f,1)[0]===e&&n.push(l)}return n}function f(e){var t=e.kernelName,n=e.backendName,r=m(t,n);o.has(r)&&console.warn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),o.set(r,e)}function d(e){var t=e.kernelName;u.has(t)&&Object(a.c)().getBool("DEBUG")&&console.warn("Overriding the gradient for '".concat(t,"'")),u.set(t,e)}function h(e,t){var n=m(e,t);if(!o.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));o.delete(n)}function p(e){if(!u.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));u.delete(e)}function v(e,t){l(e).forEach((function(e){f(Object.assign({},e,{backendName:t}))}))}function m(e,t){return"".concat(t,"_").concat(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","expandDims","string_or_numeric");o.b(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var u={input:n},s={dim:t};return r.a.runKernel(a.ab,u,s)}})},function(e,t,n){"use strict";var r="Invariant failed";t.a=function(e,t){if(!e)throw new Error(r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return H})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return L})),n.d(t,"d",(function(){return X})),n.d(t,"e",(function(){return V}));var r=n(614),a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t;return new o({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function o(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}i.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function u(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var s,c,l,f,d=function(e){return(e=u(Math.abs(e)))?e[1]:NaN},h=function(e,t){var n=u(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")},p={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return h(100*e,t)},r:h,s:function(e,t){var n=u(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(s=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+u(e,Math.max(0,t+i-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},v=function(e){return e},m=Array.prototype.map,g=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],b=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?v:(t=m.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",u=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?v:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(m.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",f=void 0===e.minus?"\u2212":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function b(e){var t=(e=i(e)).fill,n=e.align,d=e.sign,v=e.symbol,m=e.zero,b=e.width,y=e.comma,x=e.precision,_=e.trim,w=e.type;"n"===w?(y=!0,w="g"):p[w]||(void 0===x&&(x=12),_=!0,w="g"),(m||"0"===t&&"="===n)&&(m=!0,t="0",n="=");var k="$"===v?a:"#"===v&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",O="$"===v?o:/[%p]/.test(w)?l:"",S=p[w],j=/[defgprs%]/.test(w);function E(e){var a,i,o,l=k,p=O;if("c"===w)p=S(e)+p,e="";else{var v=(e=+e)<0||1/e<0;if(e=isNaN(e)?h:S(Math.abs(e),x),_&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),v&&0===+e&&"+"!==d&&(v=!1),l=(v?"("===d?d:f:"-"===d||"("===d?"":d)+l,p=("s"===w?g[8+s/3]:"")+p+(v&&"("===d?")":""),j)for(a=-1,i=e.length;++a<i;)if(48>(o=e.charCodeAt(a))||o>57){p=(46===o?u+e.slice(a+1):e.slice(a))+p,e=e.slice(0,a);break}}y&&!m&&(e=r(e,1/0));var E=l.length+e.length+p.length,C=E<b?new Array(b-E+1).join(t):"";switch(y&&m&&(e=r(C+e,C.length?b-p.length:1/0),C=""),n){case"<":e=l+e+p+C;break;case"=":e=l+C+e+p;break;case"^":e=C.slice(0,E=C.length>>1)+l+e+p+C.slice(E);break;default:e=C+l+e+p}return c(e)}return x=void 0===x?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),E.toString=function(){return e+""},E}return{format:b,formatPrefix:function(e,t){var n=b(((e=i(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(d(t)/3))),a=Math.pow(10,-r),o=g[8+r/3];return function(e){return n(a*e)+o}}}};c=b({thousands:",",grouping:[3],currency:["$",""]}),l=c.format,f=c.formatPrefix;var y=n(36);function x(e,t,n){return e.fields=t||[],e.fname=n,e}function _(e){return 1===e.length?w(e[0]):k(e)}var w=function(e){return function(t){return t[e]}},k=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function O(e){throw Error(e)}function S(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||O("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&O("Access path missing closing bracket: "+e),o&&O("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function j(e,t,n){var r=S(e);return e=1===r.length?r[0]:e,x((n&&n.get||_)(r),[e],t||e)}j("id"),x((function(e){return e}),[],"identity"),x((function(){return 0}),[],"zero"),x((function(){return 1}),[],"one"),x((function(){return!0}),[],"true"),x((function(){return!1}),[],"false");Array.isArray;function E(e){return e===Object(e)}function C(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}Object.prototype.hasOwnProperty;function A(e){return"string"===typeof e}var T,N,M=n(615),D=n(382);function I(e){var t={};return function(n){return t[n]||(t[n]=e(n))}}function F(e){var t=I(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){var n,r,a=i(e||",");if(null==a.precision){switch(a.precision=12,a.type){case"%":a.precision-=2;break;case"e":a.precision-=1}return n=t(a),r=t(".1f")(1)[1],function(e){var t=n(e),a=t.indexOf(r);if(a<0)return t;for(var i=function(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(t,a),o=i<t.length?t.slice(i):"";--i>a;)if("0"!==t[i]){++i;break}return t.slice(0,i)+o}}return t(a)},formatSpan:function(e,a,o,u){u=i(null==u?",f":u);var s,c=Object(r.c)(e,a,o),l=Math.max(Math.abs(e),Math.abs(a));if(null==u.precision)switch(u.type){case"s":return isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(d(t)/3)))-d(Math.abs(e)))}(c,l))||(u.precision=s),n(u,l);case"":case"e":case"g":case"p":case"r":isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,d(t)-d(e))+1}(c,l))||(u.precision=s-("e"===u.type));break;case"f":case"%":isNaN(s=function(e){return Math.max(0,-d(Math.abs(e)))}(c))||(u.precision=s-2*("%"===u.type))}return t(u)}}}function R(){return T=F({format:l,formatPrefix:f})}function P(e){return F(b(e))}function L(e){return arguments.length?T=P(e):T}function B(e,t,n){E(n=n||{})||O("Invalid time multi-format specifier: ".concat(n));var r=t(y.i),a=t(y.f),i=t(y.d),o=t(y.a),u=t(y.k),s=t(y.g),c=t(y.h),l=t(y.l),f=e(n[y.e]||".%L"),d=e(n[y.i]||":%S"),h=e(n[y.f]||"%I:%M"),p=e(n[y.d]||"%I %p"),v=e(n[y.a]||n[y.b]||"%a %d"),m=e(n[y.k]||"%b %d"),g=e(n[y.g]||"%B"),b=e(n[y.h]||"%B"),x=e(n[y.l]||"%Y");return function(e){return(r(e)<e?f:a(e)<e?d:i(e)<e?h:o(e)<e?p:s(e)<e?u(e)<e?v:m:l(e)<e?c(e)<e?g:b:x)(e)}}function z(e){var t=I(e.format),n=I(e.utcFormat);return{timeFormat:function(e){return A(e)?t(e):B(t,y.p,e)},utcFormat:function(e){return A(e)?n(e):B(n,y.v,e)},timeParse:I(e.parse),utcParse:I(e.utcParse)}}function U(){return N=z({format:M.a,parse:M.b,utcFormat:M.c,utcParse:M.d})}function W(e){return z(Object(D.a)(e))}function V(e){return arguments.length?N=W(e):N}R(),U();var G=function(e,t){return C({},e,t)};function q(e,t){var n=e?P(e):L(),r=t?W(t):V();return G(n,r)}function H(e,t){var n=arguments.length;return n&&2!==n&&O("defaultLocale expects either zero or two arguments."),n?G(L(e),V(t)):G(L(),V())}function X(){return R(),U(),H()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(54),s=n(10),c=n(18);var l=Object(s.b)({conv2d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],d=arguments.length>6?arguments[6]:void 0,h=Object(i.a)(e,"x","conv2d"),p=Object(i.a)(t,"filter","conv2d"),v=h,m=!1;3===h.rank&&(m=!0,v=Object(c.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.b(4===v.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(v.rank,".")})),o.b(4===p.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")})),null!=d&&o.b(o.v(s),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(d," but got pad ").concat(s,".")}));var g="NHWC"===l?v.shape[3]:v.shape[1];o.b(g===p.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g,") must match ")+"input depth for filter ".concat(p.shape[2],".")})),o.b(u.h(n,f),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")}));var b={x:v,filter:p},y={strides:n,pad:s,dataFormat:l,dilations:f,dimRoundingMode:d},x=r.a.runKernel(a.C,b,y);return m?Object(c.a)(x,[x.shape[1],x.shape[2],x.shape[3]]):x}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({greaterEqual_:function(e,t){var n=Object(u.a)(e,"a","greaterEqual"),c=Object(u.a)(t,"b","greaterEqual"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.ob,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({lessEqual_:function(e,t){var n=Object(u.a)(e,"a","lessEqual"),c=Object(u.a)(t,"b","lessEqual"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.zb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({clone_:function(e){var t={x:Object(i.a)(e,"x","clone","string_or_numeric")};return r.a.runKernel(a.qb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","max"),u={x:o},s={reductionIndices:t,keepDims:n};return r.a.runKernel(a.Hb,u,s)}})},function(e,t,n){"use strict";function r(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return v}));var r=n(2),a=n.n(r),i=n(16),o=n(0);function u(e,t){return s(e,t)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(p(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var u=e[o],c=s(u,t,n,r);i[o]=c}return r.delete(e),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return l(e,t)}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(p(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=l(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var u in r)o(u);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function f(e){return null===e?null:p(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function d(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n){var r,i,u,c,l,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,s(t,n,r),i=0,u=Array.from(r.keys());case 3:if(!(i<u.length)){e.next=14;break}if(c=u[i],l=r.get(c),!o.util.isPromise(l)){e.next=11;break}return e.next=9,l;case 9:f=e.sent,r.set(c,f);case 11:i++,e.next=3;break;case 14:return d=s(t,n,r),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof o.Tensor))}function v(e){return null==e||(null===(t=e)||"object"!==typeof t&&"function"!==typeof t)||Array.isArray(e)||"object"===typeof e&&e instanceof o.Tensor||o.util.isTypedArray(e);var t}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return e.scrollTop};function a(e,t){var n=e.timeout,r=e.style,a=void 0===r?{}:r;return{duration:a.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:a.transitionDelay}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return A})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return p}));var r=n(17);function a(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],u=e&&a(e),s=t&&a(t),c=u||s;if(e&&a(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,d=o.length;d>=0;d--){var h=o[d];"."===h?i(o,d):".."===h?(i(o,d),f++):f&&(i(o,d),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&a(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function u(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var s=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=u(t),a=u(n);return r!==t||a!==n?e(r,a):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(96);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function v(e,t,n,a){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Object(r.a)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(u){throw u instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):u}return n&&(i.key=n),a?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=o(i.pathname,a.pathname)):i.pathname=a.pathname:i.pathname||(i.pathname="/"),i}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&s(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var i="function"===typeof e?e(t,n):e;"string"===typeof i?"function"===typeof r?r(i,a):a(!0):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function y(e,t){t(window.confirm(e))}var x="popstate",_="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),b||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,u=void 0!==o&&o,s=i.getUserConfirmation,f=void 0===s?y:s,m=i.keyLength,k=void 0===m?6:m,O=e.basename?h(l(e.basename)):"";function S(e){var t=e||{},n=t.key,r=t.state,a=window.location,i=a.pathname+a.search+a.hash;return O&&(i=d(i,O)),v(i,r,n)}function j(){return Math.random().toString(36).substr(2,k)}var E=g();function C(e){Object(r.a)(z,e),z.length=t.length,E.notifyListeners(z.location,z.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(S(e.state))}function T(){M(S(w()))}var N=!1;function M(e){if(N)N=!1,C();else{E.confirmTransitionTo(e,"POP",f,(function(t){t?C({action:"POP",location:e}):function(e){var t=z.location,n=I.indexOf(t.key);-1===n&&(n=0);var r=I.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(N=!0,R(a))}(e)}))}}var D=S(w()),I=[D.key];function F(e){return O+p(e)}function R(e){t.go(e)}var P=0;function L(e){1===(P+=e)&&1===e?(window.addEventListener(x,A),a&&window.addEventListener(_,T)):0===P&&(window.removeEventListener(x,A),a&&window.removeEventListener(_,T))}var B=!1;var z={length:t.length,action:"POP",location:D,createHref:F,push:function(e,r){var a="PUSH",i=v(e,r,j(),z.location);E.confirmTransitionTo(i,a,f,(function(e){if(e){var r=F(i),o=i.key,s=i.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=I.indexOf(z.location.key),l=I.slice(0,c+1);l.push(i.key),I=l,C({action:a,location:i})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",i=v(e,r,j(),z.location);E.confirmTransitionTo(i,a,f,(function(e){if(e){var r=F(i),o=i.key,s=i.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=I.indexOf(z.location.key);-1!==c&&(I[c]=i.key),C({action:a,location:i})}else window.location.replace(r)}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=E.setPrompt(e);return B||(L(1),B=!0),function(){return B&&(B=!1,L(-1)),t()}},listen:function(e){var t=E.appendListener(e);return L(1),function(){L(-1),t()}}};return z}var O="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function j(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function E(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function C(e){window.location.replace(j(window.location.href)+"#"+e)}function A(e){void 0===e&&(e={}),b||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),a=n.getUserConfirmation,i=void 0===a?y:a,o=n.hashType,u=void 0===o?"slash":o,s=e.basename?h(l(e.basename)):"",f=S[u],m=f.encodePath,x=f.decodePath;function _(){var e=x(E());return s&&(e=d(e,s)),v(e)}var w=g();function k(e){Object(r.a)(z,e),z.length=t.length,w.notifyListeners(z.location,z.action)}var A=!1,T=null;function N(){var e,t,n=E(),r=m(n);if(n!==r)C(r);else{var a=_(),o=z.location;if(!A&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(T===p(a))return;T=null,function(e){if(A)A=!1,k();else{var t="POP";w.confirmTransitionTo(e,t,i,(function(n){n?k({action:t,location:e}):function(e){var t=z.location,n=F.lastIndexOf(p(t));-1===n&&(n=0);var r=F.lastIndexOf(p(e));-1===r&&(r=0);var a=n-r;a&&(A=!0,R(a))}(e)}))}}(a)}}var M=E(),D=m(M);M!==D&&C(D);var I=_(),F=[p(I)];function R(e){t.go(e)}var P=0;function L(e){1===(P+=e)&&1===e?window.addEventListener(O,N):0===P&&window.removeEventListener(O,N)}var B=!1;var z={length:t.length,action:"POP",location:I,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=j(window.location.href)),n+"#"+m(s+p(e))},push:function(e,t){var n="PUSH",r=v(e,void 0,void 0,z.location);w.confirmTransitionTo(r,n,i,(function(e){if(e){var t=p(r),a=m(s+t);if(E()!==a){T=t,function(e){window.location.hash=e}(a);var i=F.lastIndexOf(p(z.location)),o=F.slice(0,i+1);o.push(t),F=o,k({action:n,location:r})}else k()}}))},replace:function(e,t){var n="REPLACE",r=v(e,void 0,void 0,z.location);w.confirmTransitionTo(r,n,i,(function(e){if(e){var t=p(r),a=m(s+t);E()!==a&&(T=t,C(a));var i=F.indexOf(p(z.location));-1!==i&&(F[i]=t),k({action:n,location:r})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return B||(L(1),B=!0),function(){return B&&(B=!1,L(-1)),t()}},listen:function(e){var t=w.appendListener(e);return L(1),function(){L(-1),t()}}};return z}function T(e,t,n){return Math.min(Math.max(e,t),n)}function N(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,a=t.initialEntries,i=void 0===a?["/"]:a,o=t.initialIndex,u=void 0===o?0:o,s=t.keyLength,c=void 0===s?6:s,l=g();function f(e){Object(r.a)(x,e),x.length=x.entries.length,l.notifyListeners(x.location,x.action)}function d(){return Math.random().toString(36).substr(2,c)}var h=T(u,0,i.length-1),m=i.map((function(e){return v(e,void 0,"string"===typeof e?d():e.key||d())})),b=p;function y(e){var t=T(x.index+e,0,x.entries.length-1),r=x.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var x={length:m.length,action:"POP",location:m[h],index:h,entries:m,createHref:b,push:function(e,t){var r="PUSH",a=v(e,t,d(),x.location);l.confirmTransitionTo(a,r,n,(function(e){if(e){var t=x.index+1,n=x.entries.slice(0);n.length>t?n.splice(t,n.length-t,a):n.push(a),f({action:r,location:a,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",a=v(e,t,d(),x.location);l.confirmTransitionTo(a,r,n,(function(e){e&&(x.entries[x.index]=a,f({action:r,location:a}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=x.index+e;return t>=0&&t<x.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return x}},function(e,t,n){var r=n(84);e.exports=function(e,t,n){return new r(e,n).compare(new r(t,n))}},function(e,t,n){var r=n(150),a=n(151),i=function(){"use strict";function e(t,n){var a=this;if(r(this,e),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),t instanceof e)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new e(t.raw,n);if(t instanceof o)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((function(e){return a.parseRange(e.trim())})).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(t));this.format()}return a(e,[{key:"format",value:function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(e){var t=this,n=this.options.loose;e=e.trim();var r=n?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];e=e.replace(r,j(this.options.includePrerelease)),u("hyphen replace",e),e=e.replace(l[f.COMPARATORTRIM],d),u("comparator trim",e,l[f.COMPARATORTRIM]),e=(e=(e=e.replace(l[f.TILDETRIM],h)).replace(l[f.CARETTRIM],p)).split(/\s+/).join(" ");var a=n?l[f.COMPARATORLOOSE]:l[f.COMPARATOR];return e.split(" ").map((function(e){return m(e,t.options)})).join(" ").split(/\s+/).map((function(e){return S(e,t.options)})).filter(this.options.loose?function(e){return!!e.match(a)}:function(){return!0}).map((function(e){return new o(e,t.options)}))}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some((function(e){return v(e,n)&&t.set.some((function(t){return v(t,n)&&e.every((function(e){return t.every((function(t){return e.intersects(t,n)}))}))}))}))}},{key:"test",value:function(e){if(!e)return!1;if("string"===typeof e)try{e=new s(e,this.options)}catch(n){return!1}for(var t=0;t<this.set.length;t++)if(E(this.set[t],e,this.options))return!0;return!1}}]),e}();e.exports=i;var o=n(237),u=n(235),s=n(84),c=n(171),l=c.re,f=c.t,d=c.comparatorTrimReplace,h=c.tildeTrimReplace,p=c.caretTrimReplace,v=function(e,t){for(var n=!0,r=e.slice(),a=r.pop();n&&r.length;)n=r.every((function(e){return a.intersects(e,t)})),a=r.pop();return n},m=function(e,t){return u("comp",e,t),e=x(e,t),u("caret",e),e=b(e,t),u("tildes",e),e=w(e,t),u("xrange",e),e=O(e,t),u("stars",e),e},g=function(e){return!e||"x"===e.toLowerCase()||"*"===e},b=function(e,t){return e.trim().split(/\s+/).map((function(e){return y(e,t)})).join(" ")},y=function(e,t){var n=t.loose?l[f.TILDELOOSE]:l[f.TILDE];return e.replace(n,(function(t,n,r,a,i){var o;return u("tilde",e,t,n,r,a,i),g(n)?o="":g(r)?o=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):g(a)?o=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):i?(u("replaceTilde pr",i),o=">=".concat(n,".").concat(r,".").concat(a,"-").concat(i," <").concat(n,".").concat(+r+1,".0-0")):o=">=".concat(n,".").concat(r,".").concat(a," <").concat(n,".").concat(+r+1,".0-0"),u("tilde return",o),o}))},x=function(e,t){return e.trim().split(/\s+/).map((function(e){return _(e,t)})).join(" ")},_=function(e,t){u("caret",e,t);var n=t.loose?l[f.CARETLOOSE]:l[f.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(function(t,n,a,i,o){var s;return u("caret",e,t,n,a,i,o),g(n)?s="":g(a)?s=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):g(i)?s="0"===n?">=".concat(n,".").concat(a,".0").concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".0").concat(r," <").concat(+n+1,".0.0-0"):o?(u("replaceCaret pr",o),s="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i,"-").concat(o," <").concat(+n+1,".0.0-0")):(u("no pr"),s="0"===n?"0"===a?">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(a,".").concat(+i+1,"-0"):">=".concat(n,".").concat(a,".").concat(i).concat(r," <").concat(n,".").concat(+a+1,".0-0"):">=".concat(n,".").concat(a,".").concat(i," <").concat(+n+1,".0.0-0")),u("caret return",s),s}))},w=function(e,t){return u("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return k(e,t)})).join(" ")},k=function(e,t){e=e.trim();var n=t.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return e.replace(n,(function(n,r,a,i,o,s){u("xRange",e,n,r,a,i,o,s);var c=g(a),l=c||g(i),f=l||g(o),d=f;return"="===r&&d&&(r=""),s=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(i=0),o=0,">"===r?(r=">=",l?(a=+a+1,i=0,o=0):(i=+i+1,o=0)):"<="===r&&(r="<",l?a=+a+1:i=+i+1),"<"===r&&(s="-0"),n="".concat(r+a,".").concat(i,".").concat(o).concat(s)):l?n=">=".concat(a,".0.0").concat(s," <").concat(+a+1,".0.0-0"):f&&(n=">=".concat(a,".").concat(i,".0").concat(s," <").concat(a,".").concat(+i+1,".0-0")),u("xRange return",n),n}))},O=function(e,t){return u("replaceStars",e,t),e.trim().replace(l[f.STAR],"")},S=function(e,t){return u("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?f.GTE0PRE:f.GTE0],"")},j=function(e){return function(t,n,r,a,i,o,u,s,c,l,f,d,h){return n=g(r)?"":g(a)?">=".concat(r,".0.0").concat(e?"-0":""):g(i)?">=".concat(r,".").concat(a,".0").concat(e?"-0":""):o?">=".concat(n):">=".concat(n).concat(e?"-0":""),s=g(c)?"":g(l)?"<".concat(+c+1,".0.0-0"):g(f)?"<".concat(c,".").concat(+l+1,".0-0"):d?"<=".concat(c,".").concat(l,".").concat(f,"-").concat(d):e?"<".concat(c,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(s),"".concat(n," ").concat(s).trim()}},E=function(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(var a=0;a<e.length;a++)if(u(e[a].semver),e[a].semver!==o.ANY&&e[a].semver.prerelease.length>0){var i=e[a].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(371),o=n(372);t.getDrawArea=function(e){if(e instanceof HTMLElement)return e;if(i.isSurface(e))return e.drawArea;if(i.isSurfaceInfo(e))return o.visor().surface({name:e.name,tab:e.tab,styles:e.styles}).drawArea;throw new Error("Not a drawable")},t.shallowEquals=function(e,t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++){var i=n[a];if(e[i]!==t[i])return!1}return!0},t.nextFrame=function(){return a(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return requestAnimationFrame(e)}));case 2:case"end":return e.stop()}}),e)})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({log_:function(e){var t={x:Object(i.a)(e,"x","log")};return r.a.runKernel(a.Bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(i.a)(e,"x","split"),u={x:o},s={numOrSizeSplits:t,axis:n};return r.a.runKernel(a.Jc,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5),a=n(20),i=n(80);function o(e,t){Object(a.d)(e);var n=Object(r.c)(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Object(i.a)(e,null,n,t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(23),a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},i={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function o(e){return"".concat(Math.round(e),"ms")}t.a={easing:a,duration:i,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,u=void 0===n?i.standard:n,s=t.easing,c=void 0===s?a.easeInOut:s,l=t.delay,f=void 0===l?0:l;Object(r.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof u?u:o(u)," ").concat(c," ").concat("string"===typeof f?f:o(f))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"formatDefaultLocale",(function(){return g})),n.d(t,"format",(function(){return l})),n.d(t,"formatPrefix",(function(){return f})),n.d(t,"formatLocale",(function(){return m})),n.d(t,"formatSpecifier",(function(){return o})),n.d(t,"precisionFixed",(function(){return b})),n.d(t,"precisionPrefix",(function(){return y})),n.d(t,"precisionRound",(function(){return x}));var r=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},a=function(e){return(e=r(Math.abs(e)))?e[1]:NaN},i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){return new u(e)}function u(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}o.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s,c,l,f,d=function(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+a:a.length>i+1?a.slice(0,i+1)+"."+a.slice(i+1):a+new Array(i-a.length+2).join("0")},h={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return d(100*e,t)},r:d,s:function(e,t){var n=r(e,t);if(!n)return e+"";var a=n[0],i=n[1],o=i-(s=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=a.length;return o===u?a:o>u?a+new Array(o-u+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+r(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},p=function(e){return e},v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],m=function(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var a=e.length,i=[],o=0,u=t[0],s=0;a>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),i.push(e.substring(a-=u,a+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return i.reverse().join(n)}):p,i=e.currency,u=e.decimal,c=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(e.numerals):p,l=e.percent||"%";function f(e){var t=(e=o(e)).fill,n=e.align,a=e.sign,f=e.symbol,d=e.zero,p=e.width,m=e.comma,g=e.precision,b=e.trim,y=e.type;"n"===y?(m=!0,y="g"):h[y]||(null==g&&(g=12),b=!0,y="g"),(d||"0"===t&&"="===n)&&(d=!0,t="0",n="=");var x="$"===f?i[0]:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===f?i[1]:/[%p]/.test(y)?l:"",w=h[y],k=/[defgprs%]/.test(y);function O(e){var i,o,l,f=x,h=_;if("c"===y)h=w(e)+h,e="";else{var O=(e=+e)<0;if(e=w(Math.abs(e),g),b&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(a>0){if(!+e[r])break e;a=0}}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),O&&0===+e&&(O=!1),f=(O?"("===a?a:"-":"-"===a||"("===a?"":a)+f,h=("s"===y?v[8+s/3]:"")+h+(O&&"("===a?")":""),k)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){h=(46===l?u+e.slice(i+1):e.slice(i))+h,e=e.slice(0,i);break}}m&&!d&&(e=r(e,1/0));var S=f.length+e.length+h.length,j=S<p?new Array(p-S+1).join(t):"";switch(m&&d&&(e=r(j+e,j.length?p-h.length:1/0),j=""),n){case"<":e=f+e+h+j;break;case"=":e=f+j+e+h;break;case"^":e=j.slice(0,S=j.length>>1)+f+e+h+j.slice(S);break;default:e=j+f+e+h}return c(e)}return g=null==g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),O.toString=function(){return e+""},O}return{format:f,formatPrefix:function(e,t){var n=f(((e=o(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(a(t)/3))),i=Math.pow(10,-r),u=v[8+r/3];return function(e){return n(i*e)+u}}}};function g(e){return c=m(e),l=c.format,f=c.formatPrefix,c}g({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var b=function(e){return Math.max(0,-a(Math.abs(e)))},y=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(a(t)/3)))-a(Math.abs(e)))},x=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a(t)-a(e))+1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(12);function a(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var u=n(t,e[i=r+(a-r>>>1)]);u>0?r=i+1:(a=i,o=!u)}return o?r:-r-1}(e,t,n||i)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t,n,r,a){return c(e,t,n,r,a,0)}function u(e,t,n,r,a,i){return c(e,t,n,r,a,0,!1,i,!0)}function s(e,t,n,r,a,i){return c(e,t,n,r,a,i,!0)}function c(e,t,n,i,o,u){for(var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=[],v=0;v<t.length;v++)t[v]>o&&p.push({score:t[v],boxIndex:v,suppressBeginIndex:0});p.sort(d);for(var m=u>0?-.5/u:0,g=[],b=[];g.length<n&&p.length>0;){var y=p.pop(),x=y.score,_=y.boxIndex,w=y.suppressBeginIndex;if(x<o)break;for(var k=!1,O=g.length-1;O>=w;--O){var S=l(e,_,g[O]);if(S>=i){k=!0;break}if(y.score=y.score*f(i,m,S),y.score<=o)break}y.suppressBeginIndex=g.length,k||(y.score===x?(g.push(_),b.push(y.score)):y.score>o&&a(p,y,d))}var j=g.length,E=n-j;c&&E>0&&(g.push.apply(g,Object(r.a)(new Array(E).fill(0))),b.push.apply(b,Object(r.a)(new Array(E).fill(0))));var C={selectedIndices:g};return s&&(C.selectedScores=b),h&&(C.validOutputs=j),C}function l(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(u-i)*(s-o),p=(f-c)*(d-l);if(h<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(u,f),b=Math.min(s,d),y=Math.max(g-v,0)*Math.max(b-m,0);return y/(h+p-y)}function f(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function d(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(20),i=n(91),o=n(117);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=u(e,"float32"),s=Object(o.a)(e,"float32");return Object(i.a)(n,s)}var c=Object(a.D)(Object(a.O)(e),t);return r.a.makeTensor(c,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),a=n(20),i=n(91);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=o(e,"float32"),u=o(e,"float32");return Object(i.a)(n,u)}var s=Object(a.F)(Object(a.O)(e),t);return r.a.makeTensor(s,e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({relu_:function(e){var t={x:Object(i.a)(e,"x","relu")};return r.a.runKernel(a.mc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","step"),o={x:n},u={alpha:t};return r.a.runKernel(a.Nc,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","unstack","string_or_numeric");o.b(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var u={value:n},s={axis:t};return r.a.runKernel(a.Xc,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(18);var s=n(10);var c=Object(s.b)({batchNorm_:function(e,t,n,s,c,l){null==l&&(l=.001);var f,d,h=Object(i.a)(e,"x","batchNorm"),p=Object(i.a)(t,"mean","batchNorm"),v=Object(i.a)(n,"variance","batchNorm");null!=c&&(f=Object(i.a)(c,"scale","batchNorm")),null!=s&&(d=Object(i.a)(s,"offset","batchNorm")),o.b(p.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),o.b(null==d||p.rank===d.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),o.b(null==f||p.rank===f.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var m={x:function(e){return 0===e.rank||1===e.rank?Object(u.a)(e,[1,1,1,e.size]):2===e.rank?Object(u.a)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Object(u.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(h),scale:f,offset:d,mean:p,variance:v},g={varianceEpsilon:l},b=r.a.runKernel(a.ib,m,g);return Object(u.a)(b,h.shape)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({sigmoid_:function(e){var t={x:Object(i.a)(e,"x","sigmoid")};return r.a.runKernel(a.Ac,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({tile_:function(e,t){var n=Object(i.a)(e,"x","tile","string_or_numeric");o.b(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var u={x:n},s={reps:t};return r.a.runKernel(a.Tc,u,s)}})},function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(226);var a=n(379),i=n(280);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(a.a)(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(380);var a=n(280),i=n(381);function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}(e,t)||Object(a.a)(e,t)||Object(i.a)()}},function(e,t,n){"use strict";var r=n(6),a=r.createContext({});t.a=a},function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(r||(r={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}))},function(e,t,n){"use strict";t.a=function(e,t){}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","mean"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.Ob,u,s)}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(52),a=n(56);function i(e){return Object(r.a)((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.c)/a.e}))}var o=i(0),u=i(1),s=i(2),c=i(3),l=i(4),f=i(5),d=i(6);o.range,u.range,s.range,c.range,l.range,f.range,d.range},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(52),a=n(56);function i(e){return Object(r.a)((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/a.e}))}var o=i(0),u=i(1),s=i(2),c=i(3),l=i(4),f=i(5),d=i(6);o.range,u.range,s.range,c.range,l.range,f.range,d.range},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),a=n(109),i={prepend:!1};t.subSurface=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.getDrawArea(e),u=r.css({"& canvas":{display:"block"},marginTop:".5rem",marginBottom:".5rem"}),s=r.css({backgroundColor:"white",display:"inline-block",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",padding:"0 10px 0 10px",marginBottom:"20px",fontWeight:"600",textAlign:"left"}),c=Object.assign({},i,n),l=o.querySelector("div[data-name=".concat(t,"]"));if(!l){if((l=document.createElement("div")).setAttribute("class","".concat(u)),l.dataset.name=t,c.title){var f=document.createElement("div");f.setAttribute("class","subsurface-title ".concat(s)),f.innerText=c.title,l.appendChild(f)}c.prepend?o.insertBefore(l,o.firstChild):o.appendChild(l)}return l},t.getDefaultWidth=function(e){for(var t=0,n=e;n&&0===n.clientWidth;)n=n.parentElement,t=50;return n.clientWidth-t},t.getDefaultHeight=function(e){return 0===e.clientHeight?200:e.clientHeight}},function(e,t,n){"use strict";var r,a,i,o,u;n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(r||(r={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(a||(a={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(i||(i={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(o||(o={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(u||(u={}));var s={float32:o,int32:a,bool:i,complex64:u};function c(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return s[e][t]}function l(e){return c(e,"int32")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(27),l=n(10);var f=Object(l.b)({maximum_:function(e,t){var n=Object(u.a)(e,"a","maximum"),l=Object(u.a)(t,"b","maximum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),l=Object(c.a)(l,"int32")),Object(s.a)(n.shape,l.shape);var h={a:n,b:l};return a.a.runKernel(i.Nb,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({batchToSpaceND_:function(e,t,n){var u=Object(i.a)(e,"x","batchToSpaceND"),s=t.reduce((function(e,t){return e*t}));o.b(u.rank>=1+t.length,(function(){return"input rank is ".concat(u.rank," but should be > than blockShape.length ").concat(t.length)})),o.b(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),o.b(u.shape[0]%s===0,(function(){return"input tensor batch is ".concat(u.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(s)}));var c={x:u},l={blockShape:t,crops:n};return r.a.runKernel(a.t,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10),s=n(18);var c=Object(u.b)({depthwiseConv2d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6?arguments[6]:void 0,d=Object(i.a)(e,"x","depthwiseConv2d"),h=Object(i.a)(t,"filter","depthwiseConv2d"),p=d,v=!1;3===d.rank&&(v=!0,p=Object(s.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===p.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(p.rank,".")})),o.b(4===h.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(h.rank,".")})),o.b(p.shape[3]===h.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(p.shape[3],") must match the inChannels dimension in ")+"filter ".concat(h.shape[2],".")})),null!=f&&o.b(o.v(u),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")}));var m={x:p,filter:h},g={strides:n,pad:u,dataFormat:c,dilations:l,dimRoundingMode:f},b=r.a.runKernel(a.O,m,g);return v?Object(s.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({equal_:function(e,t){var n=Object(u.a)(e,"a","equal"),c=Object(u.a)(t,"b","equal"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.X,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=Object(i.a)(e,"x","gather"),s=Object(i.a)(t,"indices","gather","int32"),c={x:u,indices:s},l={axis:n,batchDims:o};return r.a.runKernel(a.mb,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({logicalNot_:function(e){var t={x:Object(i.a)(e,"x","logicalNot","bool")};return r.a.runKernel(a.Fb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({spaceToBatchND_:function(e,t,n){var u=Object(i.a)(e,"x","spaceToBatchND");o.b(u.rank>=1+t.length,(function(){return"input rank ".concat(u.rank," should be > than [blockShape] ").concat(t.length)})),o.b(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),o.b(u.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(u.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var s={x:u},c={blockShape:t,paddings:n};return r.a.runKernel(a.Hc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(5),a=n(20),i=n(10),o=n(18);var u=Object(i.b)({squeeze_:function(e,t){var n=Object(r.a)(e,"x","squeeze");return Object(o.a)(n,Object(a.Q)(n.shape,t).newShape)}})},function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=this,u=function(){e.apply(o,a)};clearTimeout(t),t=setTimeout(u,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(224);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5),a=n(80);function i(e,t,n){var i=Object(r.c)(e,n);return Object(a.a)(e,t,i,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(1),a=n(9),i=n(292),o=(n(204),function(){function e(t,n,a,o,u){Object(r.a)(this,e),this.mean=t,this.stdDev=n,this.dtype=a,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=u||Math.random();this.random=i.alea(s.toString())}return Object(a.a)(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var u=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*u,n=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}()),u=function(){function e(t,n,a,u){Object(r.a)(this,e),this.alpha=t,this.beta=1/n,this.dtype=a;var s=u||Math.random();this.randu=i.alea(s.toString()),this.randn=new o(0,1,a,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return Object(a.a)(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;if(Object(r.a)(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=a-n,this.dtype=o,null==u&&(u=Math.random()),"number"===typeof u&&(u=u.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(a," <= 1 and dtype is not float"));this.random=i.alea(u)}return Object(a.a)(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(6);function a(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},function(e,t,n){"use strict";var r=n(82),a=n(23),i=n(603),o=n(17),u=["xs","sm","md","lg","xl"];function s(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,s=e.step,c=void 0===s?5:s,l=Object(a.a)(e,["values","unit","step"]);function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function d(e,t){var r=u.indexOf(t);return r===u.length-1?f(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[u[r+1]]?n[u[r+1]]:t)-c/100).concat(i,")")}return Object(o.a)({keys:u,values:n,up:f,down:function(e){var t=u.indexOf(e)+1,r=n[u[t]];return t===u.length?f("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-c/100).concat(i,")")},between:d,only:function(e){return d(e,e)},width:function(e){return n[e]}},l)}function c(e,t,n){var a;return Object(o.a)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)({paddingLeft:t(2),paddingRight:t(2)},n,Object(r.a)({},e.up("sm"),Object(o.a)({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(a={minHeight:56},Object(r.a)(a,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(a,e.up("sm"),{minHeight:64}),a)},n)}var l=n(415),f={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},h={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},p={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},v={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y=n(59),x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:d[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:d[800],default:"#303030"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(y.d)(e.main,a):"dark"===t&&(e.dark=Object(y.a)(e.main,i)))}function k(e){var t=e.primary,n=void 0===t?{light:h[300],main:h[500],dark:h[700]}:t,r=e.secondary,u=void 0===r?{light:p.A200,main:p.A400,dark:p.A700}:r,s=e.error,c=void 0===s?{light:v[300],main:v[500],dark:v[700]}:s,k=e.warning,O=void 0===k?{light:m[300],main:m[500],dark:m[700]}:k,S=e.info,j=void 0===S?{light:g[300],main:g[500],dark:g[700]}:S,E=e.success,C=void 0===E?{light:b[300],main:b[500],dark:b[700]}:E,A=e.type,T=void 0===A?"light":A,N=e.contrastThreshold,M=void 0===N?3:N,D=e.tonalOffset,I=void 0===D?.2:D,F=Object(a.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function R(e){return Object(y.c)(e,_.text.primary)>=M?_.text.primary:x.text.primary}var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(o.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Object(l.a)(4,t));if("string"!==typeof e.main)throw new Error(Object(l.a)(5,JSON.stringify(e.main)));return w(e,"light",n,I),w(e,"dark",r,I),e.contrastText||(e.contrastText=R(e.main)),e},L={dark:_,light:x};return Object(i.a)(Object(o.a)({common:f,type:T,primary:P(n),secondary:P(u,"A400","A200","A700"),error:P(c),warning:P(O),info:P(j),success:P(C),grey:d,contrastThreshold:M,getContrastText:R,augmentColor:P,tonalOffset:I},L[T]),F)}function O(e){return Math.round(1e5*e)/1e5}var S={textTransform:"uppercase"},j='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,u=void 0===r?j:r,s=n.fontSize,c=void 0===s?14:s,l=n.fontWeightLight,f=void 0===l?300:l,d=n.fontWeightRegular,h=void 0===d?400:d,p=n.fontWeightMedium,v=void 0===p?500:p,m=n.fontWeightBold,g=void 0===m?700:m,b=n.htmlFontSize,y=void 0===b?16:b,x=n.allVariants,_=n.pxToRem,w=Object(a.a)(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var k=c/14,E=_||function(e){return"".concat(e/y*k,"rem")},C=function(e,t,n,r,a){return Object(o.a)({fontFamily:u,fontWeight:e,fontSize:E(t),lineHeight:n},u===j?{letterSpacing:"".concat(O(r/t),"em")}:{},a,x)},A={h1:C(f,96,1.167,-1.5),h2:C(f,60,1.2,-.5),h3:C(h,48,1.167,0),h4:C(h,34,1.235,.25),h5:C(h,24,1.334,0),h6:C(v,20,1.6,.15),subtitle1:C(h,16,1.75,.15),subtitle2:C(v,14,1.57,.1),body1:C(h,16,1.5,.15),body2:C(h,14,1.43,.15),button:C(v,14,1.75,.4,S),caption:C(h,12,1.66,.4),overline:C(h,12,2.66,1,S)};return Object(i.a)(Object(o.a)({htmlFontSize:y,pxToRem:E,round:O,fontFamily:u,fontSize:c,fontWeightLight:f,fontWeightRegular:h,fontWeightMedium:v,fontWeightBold:g},A),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var A=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],T={borderRadius:4},N=n(126),M=(n(125),n(156));n(38);var D=function(e,t){return t?Object(i.a)(e,t,{clone:!1}):e},I={xs:0,sm:600,md:960,lg:1280,xl:1920},F={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(I[e],"px)")}};var R={m:"margin",p:"padding"},P={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},L={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},B=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!L[e])return[e];e=L[e]}var t=e.split(""),n=Object(N.a)(t,2),r=n[0],a=n[1],i=R[r],o=P[a]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]})),z=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function U(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function W(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function V(e){var t=U(e.theme);return Object.keys(e).map((function(n){if(-1===z.indexOf(n))return null;var r=W(B(n),t),a=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||F;return t.reduce((function(e,a,i){return e[r.up(r.keys[i])]=n(t[i]),e}),{})}if("object"===Object(M.a)(t)){var a=e.theme.breakpoints||F;return Object.keys(t).reduce((function(e,r){return e[a.up(r)]=n(t[r]),e}),{})}return n(t)}(e,a,r)})).reduce(D,{})}V.propTypes={},V.filterProps=z;function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=U({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var q=n(113),H=n(281);var X=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,o=void 0===r?{}:r,u=e.palette,l=void 0===u?{}:u,f=e.spacing,d=e.typography,h=void 0===d?{}:d,p=Object(a.a)(e,["breakpoints","mixins","palette","spacing","typography"]),v=k(l),m=s(n),g=G(f),b=Object(i.a)({breakpoints:m,direction:"ltr",mixins:c(m,g,o),overrides:{},palette:v,props:{},shadows:A,typography:E(v,h),spacing:g,shape:T,transitions:q.a,zIndex:H.a},p),y=arguments.length,x=new Array(y>1?y-1:0),_=1;_<y;_++)x[_-1]=arguments[_];return b=x.reduce((function(e,t){return Object(i.a)(e,t)}),b)}();t.a=X},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(546).default;function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(550)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r={};function a(e){return r[e]}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(101),u=n(10),s=n(18);var c=Object(u.b)({broadcastTo_:function(e,t){var n=Object(i.a)(e,"broadcastTo","x"),u=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var c=n.shape.slice();c.length<t.length;)c.unshift(1);n=Object(s.a)(n,c)}for(var l=n.shape,f=Array.from(t),d=t.length-1;d>=0;d--)if(l[d]===t[d])f[d]=1;else if(1!==n.shape[d])throw new Error("broadcastTo(): [".concat(u,"] cannot be broadcast to [").concat(t,"]."));if(0===f.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return Object(o.a)(n);var h={x:n},p={reps:f};return r.a.runKernel(a.Tc,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","min"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.Pb,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var u=Object(i.a)(e,"indices","oneHot","int32"),s={indices:u},c={depth:t,onValue:n,offValue:o};return r.a.runKernel(a.ac,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({real_:function(e){var t={input:Object(i.a)(e,"input","real")};return r.a.runKernel(a.jc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(20),o=n(10);var u=Object(o.b)({ifft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.pb,t)}})},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e,r){var a;function i(){if(null==a){var t;if("undefined"!==typeof window)t=window;else if("undefined"!==typeof e)t=e;else if("undefined"!==typeof r)t=r;else{if("undefined"===typeof self)throw new Error("Could not find a global object");t=self}a=t}return a}function o(e,t){var n=function(){var e=i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))}).call(this,n(170),n(214))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(6),a=r.createContext();function i(){return r.useContext(a)}t.a=a},function(e,t,n){"use strict";function r(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(r(e.value)&&""!==e.value||t&&r(e.defaultValue)&&""!==e.defaultValue)}function i(e){return e.startAdornment}n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0),n(314);var r=n(454),a=n(516),i=n(517),o=n(312),u=n(374),s=n(521),c=n(241),l=n(522),f=n(524),d=n(525),h=n(526),p=n(240),v=n(527);t.version_vis=v.version;var m={barchart:r.barchart,table:c.table,histogram:o.histogram,linechart:u.linechart,scatterplot:s.scatterplot,confusionMatrix:a.confusionMatrix,heatmap:i.heatmap};t.render=m;var g={accuracy:p.accuracy,perClassAccuracy:p.perClassAccuracy,confusionMatrix:p.confusionMatrix};t.metrics=g;var b={history:l.history,fitCallbacks:l.fitCallbacks,perClassAccuracy:d.perClassAccuracy,valuesDistribution:h.valuesDistribution,layer:f.layer,modelSummary:f.modelSummary};t.show=b;var y=n(372);t.visor=y.visor,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(371))},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,a=t.cmp&&(n=t.cmp,function(e){return function(t,r){var a={key:t,value:e[t]},i={key:r,value:e[r]};return n(a,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=i.push(t)-1,s=Object.keys(t).sort(a&&a(t));for(o="",n=0;n<s.length;n++){var c=s[n],l=e(t[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return i.splice(u,1),"{"+o+"}"}}(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a.stack})),n.d(t,"d",(function(){return a.train})),n.d(t,"b",(function(){return Mo})),n.d(t,"a",(function(){return r}));var r={};n.r(r),n.d(r,"inputLayer",(function(){return zs})),n.d(r,"elu",(function(){return Us})),n.d(r,"reLU",(function(){return Ws})),n.d(r,"leakyReLU",(function(){return Vs})),n.d(r,"prelu",(function(){return Gs})),n.d(r,"softmax",(function(){return qs})),n.d(r,"thresholdedReLU",(function(){return Hs})),n.d(r,"conv1d",(function(){return Xs})),n.d(r,"conv2d",(function(){return Ys})),n.d(r,"conv2dTranspose",(function(){return Ks})),n.d(r,"conv3d",(function(){return $s})),n.d(r,"separableConv2d",(function(){return Zs})),n.d(r,"cropping2D",(function(){return Js})),n.d(r,"upSampling2d",(function(){return Qs})),n.d(r,"depthwiseConv2d",(function(){return ec})),n.d(r,"activation",(function(){return tc})),n.d(r,"dense",(function(){return nc})),n.d(r,"dropout",(function(){return rc})),n.d(r,"spatialDropout1d",(function(){return ac})),n.d(r,"flatten",(function(){return ic})),n.d(r,"repeatVector",(function(){return oc})),n.d(r,"reshape",(function(){return uc})),n.d(r,"permute",(function(){return sc})),n.d(r,"embedding",(function(){return cc})),n.d(r,"add",(function(){return lc})),n.d(r,"average",(function(){return fc})),n.d(r,"concatenate",(function(){return dc})),n.d(r,"maximum",(function(){return hc})),n.d(r,"minimum",(function(){return pc})),n.d(r,"multiply",(function(){return vc})),n.d(r,"dot",(function(){return mc})),n.d(r,"batchNormalization",(function(){return gc})),n.d(r,"layerNormalization",(function(){return bc})),n.d(r,"zeroPadding2d",(function(){return yc})),n.d(r,"averagePooling1d",(function(){return xc})),n.d(r,"avgPool1d",(function(){return _c})),n.d(r,"avgPooling1d",(function(){return wc})),n.d(r,"averagePooling2d",(function(){return kc})),n.d(r,"avgPool2d",(function(){return Oc})),n.d(r,"avgPooling2d",(function(){return Sc})),n.d(r,"averagePooling3d",(function(){return jc})),n.d(r,"avgPool3d",(function(){return Ec})),n.d(r,"avgPooling3d",(function(){return Cc})),n.d(r,"globalAveragePooling1d",(function(){return Ac})),n.d(r,"globalAveragePooling2d",(function(){return Tc})),n.d(r,"globalMaxPooling1d",(function(){return Nc})),n.d(r,"globalMaxPooling2d",(function(){return Mc})),n.d(r,"maxPooling1d",(function(){return Dc})),n.d(r,"maxPooling2d",(function(){return Ic})),n.d(r,"maxPooling3d",(function(){return Fc})),n.d(r,"gru",(function(){return Rc})),n.d(r,"gruCell",(function(){return Pc})),n.d(r,"lstm",(function(){return Lc})),n.d(r,"lstmCell",(function(){return Bc})),n.d(r,"simpleRNN",(function(){return zc})),n.d(r,"simpleRNNCell",(function(){return Uc})),n.d(r,"convLstm2d",(function(){return Wc})),n.d(r,"convLstm2dCell",(function(){return Vc})),n.d(r,"rnn",(function(){return Gc})),n.d(r,"stackedRNNCells",(function(){return qc})),n.d(r,"bidirectional",(function(){return Hc})),n.d(r,"timeDistributed",(function(){return Xc})),n.d(r,"globalMaxPool1d",(function(){return Yc})),n.d(r,"globalMaxPool2d",(function(){return Kc})),n.d(r,"maxPool1d",(function(){return $c})),n.d(r,"maxPool2d",(function(){return Zc})),n.d(r,"Layer",(function(){return Ua})),n.d(r,"RNN",(function(){return Mu})),n.d(r,"RNNCell",(function(){return Du})),n.d(r,"input",(function(){return Do})),n.d(r,"gaussianNoise",(function(){return Jc})),n.d(r,"gaussianDropout",(function(){return Qc})),n.d(r,"alphaDropout",(function(){return el})),n.d(r,"masking",(function(){return tl}));var a=n(0),i=n(7),o=n(4),u=n(27),s=n(21),c=n(119),l={kernelName:o.a,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(c.a)(Object(u.a)(n,"float32"),-1))}}}},f=n(31),d=n(48),h=n(32),p=n(64),v=n(42),m=n(30),g={kernelName:o.b,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(v.a)(Object(u.a)(n,"float32")),r=Object(p.a)(Object(m.a)(Object(h.a)(1),t));return Object(d.a)(Object(f.a)(e,r))}}}},b={kernelName:o.c,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(p.a)(Object(m.a)(Object(v.a)(Object(u.a)(n,"float32")),1));return Object(f.a)(e,t)}}}},y=n(33),x=n(18),_=n(35),w={kernelName:o.d,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=e,n=y.c(r.shape,o);return n.length>0&&(t=Object(_.a)(t,n)),Object(x.a)(t,r.shape)},b:function(){var t=e,n=y.c(a.shape,o);return n.length>0&&(t=Object(_.a)(t,n)),Object(x.a)(t,a.shape)}}}},k={kernelName:o.e,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},O=n(37),S={kernelName:o.h,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(O.a)(n)}}}},j={kernelName:o.i,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(O.a)(n)}}}},E={kernelName:o.j,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(p.a)(Object(m.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32")))))}}}},C=n(29),A={kernelName:o.k,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(p.a)(Object(C.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32"))));return Object(f.a)(e,t)}}}},T={kernelName:o.m,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(C.a)(Object(v.a)(r),Object(v.a)(a)),n=Object(s.a)(e,Object(f.a)(a,t)),i=Object(y.c)(r.shape,o);return i.length>0&&(n=Object(_.a)(n,i)),Object(x.a)(n,r.shape)},b:function(){var t=Object(C.a)(Object(v.a)(r),Object(v.a)(a)),n=Object(d.a)(Object(s.a)(e,Object(f.a)(r,t))),i=Object(y.c)(a.shape,o);return i.length>0&&(n=Object(_.a)(n,i)),Object(x.a)(n,a.shape)}}}},N={kernelName:o.l,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(C.a)(Object(v.a)(Object(u.a)(n,"float32")),1))}}}},M={kernelName:o.n,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(m.a)(Object(h.a)(1),Object(v.a)(Object(u.a)(n,"float32"))))}}}},D=n(11),I=n(5),F=n(20),R=n(10);var P=Object(R.b)({avgPool3dGrad_:function(e,t,n,r,a,i){var u=Object(I.a)(e,"dy","avgPool3dGrad"),s=Object(I.a)(t,"input","avgPool3dGrad"),c=u,l=s,f=!1;4===s.rank&&(f=!0,c=Object(x.a)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),l=Object(x.a)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),F.b(5===c.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),F.b(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),null!=i&&F.b(F.v(a),(function(){return"Error in avgPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(i," but got pad ").concat(a,".")}));var d={dy:c,input:l},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=D.a.runKernel(o.q,d,h);return f?Object(x.a)(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),L={kernelName:o.p,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.filterSize,o=n.strides,u=n.pad,s=n.dimRoundingMode;return{x:function(){return P(e,r,a,o,u,s)}}}};var B=Object(R.b)({avgPoolGrad_:function(e,t,n,r,a){var i=Object(I.a)(e,"dy","avgPoolGrad"),u=Object(I.a)(t,"input","avgPoolGrad");F.b(u.rank===i.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=u,c=i,l=!1;3===u.rank&&(l=!0,s=Object(x.a)(u,[1,u.shape[0],u.shape[1],u.shape[2]]),c=Object(x.a)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),F.b(4===c.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(c.rank,".")})),F.b(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var f={dy:c,input:s},d={filterSize:n,strides:r,pad:a},h=D.a.runKernel(o.r,f,d);return l?Object(x.a)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),z={kernelName:o.o,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.filterSize,o=n.strides,u=n.pad;return{x:function(){return B(e,r,a,o,u)}}}},U=n(45),W={kernelName:o.s,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.transposeA,s=n.transposeB;return u||s?!u&&s?{a:function(){return Object(U.a)(e,o,!1,!1)},b:function(){return Object(U.a)(e,a,!0,!1)}}:u&&!s?{a:function(){return Object(U.a)(o,e,!1,!0)},b:function(){return Object(U.a)(a,e,!1,!1)}}:{a:function(){return Object(U.a)(o,e,!0,!0)},b:function(){return Object(U.a)(e,a,!0,!0)}}:{a:function(){return Object(U.a)(e,o,!1,!0)},b:function(){return Object(U.a)(a,e,!0,!1)}}}},V=n(142),G={kernelName:o.t,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Object(V.a)(e,r,a)}}}},q={kernelName:o.v,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),u=a.length-1;u>=0;u--)if(a[u]===i[u])o[u]=1;else if(1!==a[u])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var s=[],c=0;c<o.length;c++)o[c]>1&&s.push(c);return{x:function(){return Object(_.a)(e,s,!0)}}}},H={kernelName:o.w,gradFunc:function(e){return{x:function(){return e.clone()}}}},X={kernelName:o.x,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Y=n(99),K=n(100),$=n(92),Z=n(62),J={kernelName:o.y,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.clipValueMin,o=n.clipValueMax;return{x:function(){return Object(Z.a)(Object($.a)(Object(Y.a)(r,a),Object(K.a)(r,o)),e,Object(O.a)(e))}}}},Q={kernelName:o.A,inputsToSave:["x"],gradFunc:l.gradFunc},ee=n(111),te={kernelName:o.B,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=n.axis,i=Object(F.I)(a,t[0].shape)[0],o=r.map((function(e){return e[i]}));return Object(ee.a)(e,o,i).map((function(e){return function(){return e}}))}},ne=n(206),re=n(203),ae=n(54),ie={kernelName:o.C,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.dilations,s=n.strides,c=n.pad,l=n.dataFormat;return F.b(ae.i(u),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")})),{x:function(){return Object(re.a)(a.shape,e,o,s,c,l)},filter:function(){return Object(ne.a)(a,e,o.shape,s,c,l)}}}},oe=n(98),ue={kernelName:o.E,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.strides,s=n.pad,c=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return Object(oe.a)(e,o,u,s,c,1,l)},filter:function(){return Object(ne.a)(e,a,o.shape,u,s,c,l)}}}};var se=Object(R.b)({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Object(x.a)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var u=t;4===u.rank&&(u=Object(x.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),F.b(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),F.b(5===u.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(u.shape,".")})),F.b(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),F.b(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),F.b(u.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(u.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:u},c={strides:r,pad:a,filterShape:n};return D.a.runKernel(o.G,s,c)}}),ce=n(284),le={kernelName:o.F,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad;F.b(Object(ae.i)(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var u=Object(i.a)(t,2),s=u[0],c=u[1];return{x:function(){return Object(ce.a)(s.shape,e,c,a,o)},filter:function(){return se(s,e,c.shape,a,o)}}}},fe=n(268),de={kernelName:o.I,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(d.a)(Object(fe.a)(Object(u.a)(n,"float32"))),e)}}}},he=n(269),pe={kernelName:o.J,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(he.a)(Object(u.a)(n,"float32")),e)}}}},ve=n(67),me=n(180),ge=n(81),be={kernelName:o.L,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis,o=n.exclusive,u=n.reverse;return{x:function(){var t=Object(ve.f)([a],r.rank),n=Object(me.a)(e,a,o,!u);return null!=t&&(n=Object(ge.a)(n,t)),n}}}},ye=n(288),xe=n(287),_e={kernelName:o.O,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,o=n.pad,u=n.dimRoundingMode,s=null==r?[1,1]:r;F.b(ae.i(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var c=Object(i.a)(t,2),l=c[0],f=c[1];return F.b(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),F.b(4===f.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(f.rank,".")})),F.b(l.shape[3]===f.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(f.shape[2],".")})),F.b(ae.h(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),null!=u&&F.b(F.v(o),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(u," but got pad ").concat(o,".")})),{x:function(){return Object(xe.a)(l.shape,e,f,a,o,r,u)},filter:function(){return Object(ye.a)(l,e,f.shape,a,o,r,u)}}}},we={kernelName:o.S,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],u=r[1],s={x:a,filter:u,dy:e},c={x:a,filter:u,dy:e};return{x:function(){return D.a.runKernel(o.U,s,n)},filter:function(){return D.a.runKernel(o.T,c,n)}}}},ke={kernelName:o.V,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:Object(i.a)(t,1)[0]};return{x:function(){return D.a.runKernel(o.W,n)}}}},Oe=n(69),Se={kernelName:o.Y,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0],r=Object(s.a)(Object(Oe.a)(Object(d.a)(Object(v.a)(n))),2/Math.sqrt(Math.PI));return{x:function(){return Object(s.a)(e,r)}}}},je={kernelName:o.Z,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,n)}}}},Ee={kernelName:o.ab,inputsToSave:["input"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{input:function(){return Object(x.a)(e,n.shape)}}}},Ce={kernelName:o.bb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(Oe.a)(n))}}}},Ae={kernelName:o.fb,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Te={kernelName:o.gb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(f.a)(e,Object(u.a)(a,"float32")),n=Object(y.c)(r.shape,o);return n.length>0?Object(x.a)(Object(_.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=Object(y.c)(a.shape,o);n.length>0&&(t=Object(x.a)(Object(_.a)(t,n),a.shape));var i=Object(v.a)(a);return Object(d.a)(Object(f.a)(t,Object(u.a)(i,"float32")))}}}},Ne=n(265),Me=n(123),De={kernelName:o.ib,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=Object(i.a)(t,4),o=a[0],u=a[1],c=a[2],l=a[3],f=null==l?Object(h.a)(1):l,d=Object(y.c)(u.shape,o.shape),p=[];if(1===u.rank){for(var v=0;v<o.shape.length-1;++v)p.push(o.shape[v]);p.push(1)}var g=Object(m.a)(o,u),b=Object(s.a)(e,f),w=Object(Ne.a)(Object(C.a)(c,Object(h.a)(r))),k=Object(s.a)(Object(s.a)(Object(s.a)(w,w),w),Object(h.a)(-.5));return{x:function(){return 1===u.rank?Object(x.a)(Object(s.a)(Object(s.a)(e,Object(Me.a)(Object(x.a)(w,[1,1,1,u.shape[0]]),p)),f),o.shape):Object(x.a)(Object(s.a)(Object(s.a)(e,w),f),o.shape)},mean:function(){var e=Object(s.a)(Object(s.a)(w,Object(h.a)(-1)),b);return 1===u.rank&&(e=Object(_.a)(e,d)),Object(x.a)(e,u.shape)},variance:function(){var e=Object(s.a)(Object(s.a)(k,g),b);return 1===u.rank&&(e=Object(_.a)(e,d)),Object(x.a)(e,u.shape)},scale:function(){var t=Object(s.a)(g,w),n=Object(s.a)(e,t);return 1===u.rank&&(n=Object(_.a)(n,d)),Object(x.a)(n,u.shape)},offset:function(){var t=e;return 1===u.rank&&(t=Object(_.a)(t,d)),Object(x.a)(t,u.shape)}}}},Ie=n(196),Fe={kernelName:o.mb,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.axis,s=Object(F.I)(u,a.shape)[0];return{x:function(){var t=a.shape,n=o.size,r=t.slice(0,s),i=r.length,c=t.slice(u,t.length).slice(1),l=c.length,f=Re(0,i),d=Re(i+1,i+1+l),h=Pe([r,[n],c]),p=Object(x.a)(e,h),v=Object(x.a)(o,[n]),m=Pe([[i],f,d]),g=Object(ge.a)(p,m),b=Object(Ie.a)(g,v,a.shape[s]),y=Object(ve.h)(m);return b=Object(ge.a)(b,y)},indices:function(){return o}}}};function Re(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Pe(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Le={kernelName:o.ob,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(O.a)(r)},b:function(){return Object(O.a)(a)}}}},Be={kernelName:o.qb,gradFunc:function(e){return{x:function(){return Object(u.a)(e,"float32")}}}},ze={kernelName:o.sb,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Ue={kernelName:o.tb,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},We={kernelName:o.ub,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Ve=n(79),Ge={kernelName:o.xb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.alpha,o=Object(Ve.a)(r,0);return{x:function(){return Object(Z.a)(o,e,Object(s.a)(e,a))}}}},qe={kernelName:o.Cb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(C.a)(n,1))}}}},He={kernelName:o.Bb,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(u.a)(n,"float32"))}}}},Xe={kernelName:o.Db,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis;return{logits:function(){var t=Object(Oe.a)(r);return Object(m.a)(e,Object(s.a)(Object(_.a)(e,a,!0),t))}}}};var Ye=Object(R.b)({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},c={depthRadius:r,bias:a,alpha:i,beta:u};return D.a.runKernel(o.wb,s,c)}}),Ke={kernelName:o.vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.depthRadius,s=n.bias,c=n.alpha,l=n.beta;return{x:function(){return Ye(a,o,e,u,s,c,l)}}}},$e=n(139);function Ze(e,t,n,r){return t.rank<n.rank&&(t=Object(x.a)(t,ve.e(t.shape,r))),e.rank<n.rank&&(e=Object(x.a)(e,ve.e(e.shape,r))),{x:function(){return Object(s.a)(e,Object(u.a)(Object($e.a)(n,t),e.dtype))}}}var Je={kernelName:o.Hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Ze(e,t[1],a,F.I(r,a.shape));return{x:function(){return i.x()}}}},Qe=n(185),et={kernelName:o.Nb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(s.a)(e,Object(u.a)(Object(Y.a)(r,a),"float32"))},b:function(){return Object(s.a)(e,Object(u.a)(Object(Qe.a)(r,a),"float32"))}}}};var tt=Object(R.b)({maxPool3dGrad_:function(e,t,n,r,a,i,u){var s=Object(I.a)(e,"dy","maxPool3dGrad"),c=Object(I.a)(t,"input","maxPool3dGrad"),l=Object(I.a)(n,"output","maxPool3dGrad"),f=s,d=c,h=l,p=!1;4===c.rank&&(p=!0,f=Object(x.a)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Object(x.a)(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),h=Object(x.a)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),F.b(5===f.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(f.rank,".")})),F.b(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),F.b(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(h.rank,".")})),null!=u&&F.b(F.v(i),(function(){return"Error in maxPool3dGrad: pad must be an integer when "+"using, dimRoundingMode ".concat(u," but got pad ").concat(i,".")}));var v={dy:f,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:u},g=D.a.runKernel(o.Kb,v,m);return p?Object(x.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),nt={kernelName:o.Jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.filterSize,s=n.strides,c=n.pad,l=n.dimRoundingMode;return{x:function(){return tt(e,a,o,u,s,c,l)}}}};var rt=Object(R.b)({maxPoolGrad_:function(e,t,n,r,a,i,u){var s=Object(I.a)(e,"dy","maxPoolGrad"),c=Object(I.a)(t,"input","maxPoolGrad"),l=Object(I.a)(n,"output","maxPoolGrad");F.b(c.rank===s.rank,(function(){return"Rank of input (".concat(c.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),F.b(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),F.b(4===c.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(c.rank,".")})),null!=u&&F.b(F.v(i),(function(){return"Error in maxPoolGrad: pad must be an integer when using, "+"dimRoundingMode ".concat(u," but got pad ").concat(i,".")}));var f={dy:s,input:c,output:l},d={filterSize:r,strides:a,pad:i,dimRoundingMode:u};return D.a.runKernel(o.Lb,f,d)}}),at={kernelName:o.Ib,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,2),a=r[0],o=r[1],u=n.filterSize,s=n.strides,c=n.pad;return{x:function(){return rt(e,a,o,u,s,c)}}}},it=n(116),ot={kernelName:o.Ob,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.axis,o=F.I(a,r.shape),u=Object(ve.d)(r.shape,o)[1],c=F.O(u);return{x:function(){var t=r.shape.slice();o.forEach((function(e){t[e]=1}));var n=Object(x.a)(e,t);return Object(f.a)(Object(s.a)(n,Object(it.a)(r.shape,"float32")),c)}}}},ut={kernelName:o.Pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=Object(i.a)(t,2),o=a[0],u=Ze(e,a[1],o,F.I(r,o.shape));return{x:function(){return u.x()}}}},st={kernelName:o.Qb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return{a:function(){return Object(s.a)(e,Object(u.a)(Object(K.a)(r,a),"float32"))},b:function(){return Object(s.a)(e,Object(u.a)(Object(Ve.a)(r,a),"float32"))}}}},ct=n(44),lt={kernelName:o.Rb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(ct.a)(e,a,r.shape)}}}},ft=n(182),dt={kernelName:o.Sb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(y.c)(r.shape,o);return t.length>0?Object(x.a)(Object(_.a)(e,t),r.shape):e},b:function(){var t=Object(s.a)(e,Object(d.a)(Object(ft.a)(Object(f.a)(r,a)))),n=Object(y.c)(a.shape,o);return n.length>0?Object(x.a)(Object(_.a)(t,n),a.shape):t}}}},ht={kernelName:o.Ub,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(y.a)(r.shape,a.shape);return{a:function(){var t=Object(s.a)(e,Object(u.a)(a,"float32")),n=Object(y.c)(r.shape,o);return n.length>0?Object(x.a)(Object(_.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=Object(y.c)(a.shape,o);return n.length>0?Object(x.a)(Object(_.a)(t,n),a.shape):t}}}},pt={kernelName:o.Vb,gradFunc:function(e){return{x:function(){return Object(d.a)(e)}}}},vt=n(117),mt={kernelName:o.ac,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Object(vt.a)(n.shape,"float32")}}}},gt={kernelName:o.bc,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},bt=n(120),yt={kernelName:o.cc,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Object(bt.a)(e,r).map((function(e){return function(){return e}}))}},xt={kernelName:o.dc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Object(ct.a)(e,a,r.shape)}}}},_t=n(110),wt=n(85),kt={kernelName:o.fc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,3),r=n[0],a=n[1],o=n[2],c=r,l=a,f=y.a(c.shape,l.shape);return{a:function(){var t=Object(u.a)(l,"float32"),n=Object(s.a)(e,Object(s.a)(t,Object(wt.a)(c,Object(m.a)(t,Object(h.a)(1))))),r=y.c(c.shape,f);return r.length>0&&(n=Object(_.a)(n,r)),Object(x.a)(n,c.shape)},b:function(){var t=Object(Ve.a)(c,0),n=Object(Z.a)(t,Object(_t.a)(c),Object(O.a)(c)),r=Object(s.a)(e,Object(s.a)(o,n)),a=y.c(l.shape,f);return a.length>0&&(r=Object(_.a)(r,a)),Object(x.a)(r,l.shape)}}}},Ot={kernelName:o.gc,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(Ve.a)(r,0);return{x:function(){return Object(Z.a)(o,e,Object(s.a)(e,a))},alpha:function(){var t=Object(Z.a)(o,Object(O.a)(e),Object(s.a)(e,r)),n=Object(y.c)(a.shape,e.shape);return n.length>0&&(t=Object(_.a)(t,n)),Object(x.a)(t,a.shape)}}}},St={kernelName:o.kc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=Object(f.a)(e,Object(u.a)(a,"float32")),n=y.c(r.shape,o);return n.length>0?Object(x.a)(Object(_.a)(t,n),r.shape):t},b:function(){var t=Object(s.a)(e,Object(u.a)(r,"float32")),n=y.c(a.shape,o);n.length>0&&(t=Object(x.a)(Object(_.a)(t,n),a.shape));var i=Object(v.a)(a);return Object(d.a)(Object(f.a)(t,Object(u.a)(i,"float32")))}}}},jt={kernelName:o.lc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(d.a)(Object(v.a)(n)))}}}},Et={kernelName:o.nc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0],r=Object(s.a)(Object(K.a)(n,6),Object(c.a)(n));return{x:function(){return Object(s.a)(e,Object(u.a)(r,"float32"))}}}},Ct={kernelName:o.mc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(u.a)(Object(c.a)(n),"float32"))}}}},At={kernelName:o.oc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(x.a)(e,n.shape)}}}},Tt={kernelName:o.pc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(i.a)(t,1)[0]};return{images:function(){return D.a.runKernel(o.qc,r,n)}}}},Nt={kernelName:o.rc,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Object(i.a)(t,1)[0]};return{images:function(){return D.a.runKernel(o.sc,r,n)}}}},Mt=n(78),Dt={kernelName:o.tc,gradFunc:function(e,t,n){var r=n.dims,a=Object(F.I)(r,e.shape);return{x:function(){return Object(Mt.a)(e,a)}}}},It={kernelName:o.vc,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Ft={kernelName:o.wc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(d.a)(Object(f.a)(e,Object(s.a)(Object(wt.a)(n,1.5),2)))}}}},Rt=n(141),Pt={kernelName:o.yc,inputsToSave:["condition"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{condition:function(){return Object(u.a)(Object(O.a)(n),"float32")},t:function(){return Object(s.a)(e,Object(u.a)(n,e.dtype))},e:function(){return Object(s.a)(e,Object(u.a)(Object(Rt.a)(n),e.dtype))}}}},Lt=n(223),Bt={kernelName:o.zc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){var t=Object(Ve.a)(n,Object(h.a)(0)),r=Object(h.a)(Lt.b),a=Object(h.a)(Lt.a),i=Object(s.a)(e,a),o=Object(s.a)(Object(s.a)(e,r),Object(Oe.a)(Object(u.a)(n,"float32")));return Object(Z.a)(t,i,o)}}}},zt={kernelName:o.Ac,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(s.a)(n,Object(m.a)(Object(h.a)(1),n)))}}}},Ut={kernelName:o.Bc,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},Wt=n(179),Vt={kernelName:o.Cc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(Wt.a)(Object(u.a)(n,"float32")),e)}}}},Gt=n(251),qt={kernelName:o.Dc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(Gt.a)(Object(u.a)(n,"float32")),e)}}}},Ht=n(88),Xt=n(175),Yt={kernelName:o.Ec,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=Object(i.a)(t,1)[0],a=n.begin,o=n.size,u=r.shape,s=Object(Xt.parseSliceParams)(r,a,o),c=Object(i.a)(s,2),l=c[0],f=c[1],d=[],h=0;h<e.rank;h++)d.push([l[h],u[h]-l[h]-f[h]]);return{x:function(){return Object(Ht.a)(e,d)}}}},Kt={kernelName:o.Fc,outputsToSave:[!0],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.dim,o=Object(s.a)(e,r);return{logits:function(){return Object(m.a)(o,Object(s.a)(Object(_.a)(o,[a],true),r))}}}},$t=n(122),Zt={kernelName:o.Gc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object($t.a)(n))}}}},Jt=n(137),Qt={kernelName:o.Hc,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Object(Jt.a)(e,r,a)}}}},en=n(53),tn={kernelName:o.Jc,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Object(en.a)(e,r)}}}},nn={kernelName:o.Kc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(s.a)(Object(p.a)(Object(u.a)(n,"float32")),2))}}}},rn={kernelName:o.Lc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(e,Object(s.a)(Object(u.a)(n,"float32"),2))}}}},an={kernelName:o.Mc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=Object(h.a)(2);return{a:function(){return Object(s.a)(e,Object(s.a)(o,Object(m.a)(r,a)))},b:function(){return Object(s.a)(e,Object(s.a)(o,Object(m.a)(a,r)))}}}},on={kernelName:o.Nc,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},un={kernelName:o.Pc,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],o=y.a(r.shape,a.shape);return{a:function(){var t=e,n=y.c(r.shape,o);return n.length>0&&(t=Object(_.a)(t,n)),Object(x.a)(t,r.shape)},b:function(){var t=e,n=y.c(a.shape,o);return n.length>0&&(t=Object(_.a)(t,n)),Object(x.a)(Object(d.a)(t),a.shape)}}}},sn={kernelName:o.Qc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=r.shape.slice(),o=n.axis;Object(F.I)(o,r.shape).forEach((function(e){a[e]=1}));var u=Object(x.a)(e,a),c=Object(s.a)(u,Object(it.a)(r.shape,"float32"));return{x:function(){return c}}}},cn={kernelName:o.Rc,inputsToSave:["x"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(f.a)(e,Object(v.a)(Object(Wt.a)(n)))}}}},ln={kernelName:o.Sc,outputsToSave:[!0],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return Object(s.a)(Object(m.a)(Object(h.a)(1),Object(v.a)(n)),e)}}}},fn={kernelName:o.Tc,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Object(i.a)(t,1)[0],a=n.reps;return{x:function(){var t=Object(O.a)(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Object(C.a)(t,Object(ct.a)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Object(C.a)(t,Object(ct.a)(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var u=0;u<a[0];++u)for(var s=0;s<a[1];++s)for(var c=0;c<a[2];++c)t=Object(C.a)(t,Object(ct.a)(e,[u*r.shape[0],s*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var f=0;f<a[1];++f)for(var d=0;d<a[2];++d)for(var h=0;h<a[3];++h)t=Object(C.a)(t,Object(ct.a)(e,[l*r.shape[0],f*r.shape[1],d*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},dn={kernelName:o.Vc,gradFunc:function(e,t,n){var r=n.perm,a=ve.h(r);return{x:function(){return Object(ge.a)(e,a)}}}},hn=n(93),pn={kernelName:o.Xc,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Object(hn.a)(e,r)}}}},vn=n(95),mn=n(140),gn=n(136),bn={kernelName:o.Yc,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=Object(i.a)(t,1)[0];return{x:function(){return function(e,t){for(var n=Object(gn.a)(t,Object(O.a)(t)),r=Object(mn.a)(e,n),a=Object(Y.a)(t,Object(h.a)(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Object(vn.a)(a,o+1);a=Object($.a)(a,Object(it.a)(r.shape,"bool"));var u=Object(O.a)(r);return Object(Z.a)(a,r,u)}(e,n)}}}};for(var yn={kernelName:o.Zc,gradFunc:function(e){return{x:function(){return Object(O.a)(e)}}}},xn=n(94),_n=0,wn=[l,g,b,w,k,S,j,E,A,T,N,M,L,z,W,G,q,H,X,J,Q,te,ue,ie,le,de,pe,be,_e,we,St,ke,Se,je,Ee,Ce,Te,Ae,De,Fe,Le,Be,ze,Ue,We,Ge,qe,He,Xe,Ke,Je,Je,et,nt,at,ot,ut,st,lt,dt,ht,pt,mt,gt,yt,xt,xt,kt,Ot,jt,Et,Ct,At,Tt,Nt,Dt,It,Ft,Pt,Bt,zt,Ut,Vt,qt,Yt,Kt,Zt,Qt,Qt,tn,tn,nn,an,rn,on,un,sn,cn,ln,fn,dn,pn,bn,yn];_n<wn.length;_n++){var kn=wn[_n];Object(xn.e)(kn)}n(314);var On,Sn=n(1),jn=n(9),En=n(13),Cn=n(14);function An(){return null==On&&(On=Object(a.backend)().epsilon()),On}var Tn=n(12),Nn=n(8),Mn=n(55),Dn=n(25),In=n(202);var Fn=n(289);function Rn(e){var t="function"===typeof Map?new Map:void 0;return(Rn=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Object(Fn.a)(e,arguments,Object(Dn.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(In.a)(r,e)})(e)}var Pn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(Mn.a)(r),n.prototype),r}return n}(Rn(Error)),Ln=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(Mn.a)(r),n.prototype),r}return n}(Rn(Error)),Bn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(Mn.a)(r),n.prototype),r}return n}(Rn(Error)),zn=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(Mn.a)(r),n.prototype),r}return n}(Rn(Error)),Un=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),Object.setPrototypeOf(Object(Mn.a)(r),n.prototype),r}return n}(Rn(Error));Error;function Wn(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function Vn(e,t){if(!e)throw new Un(t)}function Gn(e,t){var n,r=0,a=Object(Nn.a)(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function qn(e){return 1===e.length?e[0]:e}function Hn(e){return Array.isArray(e)?e:[e]}function Xn(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function Yn(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var Kn={};function $n(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Zn(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return Zn(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?Zn(a):e[r]=a.value)}}function Jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var o,u=e;if(u in n)o=n[u];else if(u in Kn)o=Kn[u];else if(null==(o=t[u]))throw new Bn("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var s=e;if(null==s.className||null==s.config)throw new Bn("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var c,l,f=s.className;if(f in n){var d=Object(i.a)(n[f],2);c=d[0],l=d[1]}else if(f in Kn){var h=Object(i.a)(Kn.className,2);c=h[0],l=h[1]}else if(f in t){var p=Object(i.a)(t[f],2);c=p[0],l=p[1]}if(null==c)throw new Bn("Unknown ".concat(r,": ").concat(f,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var v={},m=0,g=Object.keys(Kn);m<g.length;m++){var b=g[m];v[b]=Kn[b]}for(var y=0,x=Object.keys(n);y<x.length;y++){var _=x[y];v[_]=n[_]}var w=s.config;w.customObjects=v;for(var k=Object.assign({},Kn),O=0,S=Object.keys(n);O<S.length;O++){var j=S[O];Kn[j]=n[j]}Zn(s.config);var E=l(c,s.config,n,a);return Kn=Object.assign({},k),E}for(var C=Object.assign({},Kn),A=0,T=Object.keys(n);A<T.length;A++){var N=T[A];Kn[N]=n[N]}var M=new c(s.config);return Kn=Object.assign({},C),M}function Qn(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function er(e){if(null==e)return e;var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function tr(e){if(null==e)throw new Bn("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function nr(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Bn("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function rr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return Vn(n>=0),Vn(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function ar(e,t){Array.isArray(e)?(a.util.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return ar(e,"element ".concat(n+1," of ").concat(t))}))):a.util.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(ir(e),".")}))}function ir(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return ir(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function or(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function ur(e,t){return Object(a.tidy)((function(){return a.sqrt(a.sum(a.mul(e,e),t,!0))}))}var sr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),cr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=ur(e,t.axis),r=a.clipByValue(n,0,t.maxValue);return a.mul(e,a.div(r,a.add(An(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(sr);cr.className="MaxNorm",a.serialization.registerClass(cr);var lr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){return a.div(e,a.add(An(),ur(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(sr);lr.className="UnitNorm",a.serialization.registerClass(lr);var fr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.relu(e)}}]),n}(sr);fr.className="NonNeg",a.serialization.registerClass(fr);var dr=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=ur(e,t.axis),r=a.add(a.mul(t.rate,a.clipByValue(n,t.minValue,t.maxValue)),a.mul(1-t.rate,n));return a.mul(e,a.div(r,a.add(An(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(sr);dr.className="MinMaxNorm",a.serialization.registerClass(dr);var hr={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function pr(e){return $n(e)}function vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function mr(e){return null==e?null:"string"===typeof e?vr({className:e in hr?hr[e]:e,config:{}}):e instanceof sr?e:vr(e)}var gr=["channelsFirst","channelsLast"],br=["nearest","bilinear"],yr=["valid","same","causal"],xr=["max","avg"],_r=["sum","mul","concat","ave"],wr=new Map;function kr(e){nr(gr,"DataFormat",e)}function Or(e){nr(yr,"PaddingMode",e)}function Sr(e){nr(xr,"PoolMode",e)}var jr=[];function Er(e,t){jr.push(e);try{var n=t();return jr.pop(),n}catch(r){throw jr.pop(),r}}function Cr(e){if(!Nr(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===jr.length?"":jr.join("/")+"/")+e}function Ar(e){if(!Nr(e))throw new Error("Not a valid tensor name: '"+e+"'");wr.has(e)||wr.set(e,0);var t=wr.get(e);if(wr.set(e,wr.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return wr.set(n,1),n}return e}var Tr=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Nr(e){return!!e.match(Tr)}function Mr(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function Dr(e){return e=Array.isArray(e)?new Float32Array(e):e,Object(a.tensor1d)(e)}function Ir(e){return a.min(Dr(e)).dataSync()[0]}function Fr(e){return a.max(Dr(e)).dataSync()[0]}function Rr(e,t){if(t<e)throw new Bn("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function Pr(e,t){return e.asType(t)}function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function Br(e){var t=[Mr(e.shape)];return e.reshape(t)}function zr(e,t,n){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:return a.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return a.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return a.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return a.slice(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return a.slice(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Bn("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Ur(e,t,n){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:return a.slice2d(e,[0,t],[e.shape[0],n]);case 3:return a.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return a.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Bn("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Wr(e,t,n,r){return Object(a.tidy)((function(){switch(e.rank){case 1:return a.slice1d(e,t,n);case 2:switch(r){case 1:return zr(e,t,n);case 2:return Ur(e,t,n);default:throw new Bn("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return zr(e,t,n);case 2:return a.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Ur(e,t,n);default:throw new Bn("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return zr(e,t,n);case 2:return a.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return a.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Ur(e,t,n);default:throw new Bn("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new Bn("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function Vr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),a.concat(e,n)}function Gr(e,t){switch(e.rank){case 1:return a.concat1d([e,t]);case 2:return a.concat2d([e,t],0);case 3:return a.concat3d([e,t],0);case 4:return a.concat4d([e,t],0);default:throw new Bn("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function qr(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Bn("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return a.tile(e,t)}function Hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return a.randomNormal(e,t,n,r,i)}function Xr(e,t,n,r){if(e.rank<2||t.rank<2)throw new zn("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new zn("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return a.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?$r(e.rank,r,"channelsLast"):null,activation:n})}var i=e.shape.slice(),o=i.pop();e=e.reshape([-1,o]);var u=t.shape.slice(),s=u.pop(),c=u.pop(),l=[].concat(Object(Tn.a)(u),[s]),f=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(f).reshape([c,-1]);var d=[].concat(Object(Tn.a)(i),Object(Tn.a)(l));return a.fused.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?$r(e.rank,r,"channelsLast"):null,activation:n}).reshape(d)}function Yr(e,t,n){return Object(a.tidy)((function(){return t=Array.isArray(t)?Object(a.tensor1d)(t,"int32"):t.toInt(),a.gather(e,t,n)}))}function Kr(e){return a.mul(e,e)}function $r(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Bn("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1,1]):t.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,1,r[0]]):t.reshape([1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1]):t.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,r[0]]):t.reshape([1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1]):t.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,r[0]]):t.reshape([1].concat(r))}else if(e<3)return t;throw new Bn("Unsupported input rank by biasAdd: ".concat(t.rank))}function Zr(e,t,n){return Object(a.tidy)((function(){return null==n&&(n="channelsLast"),kr(n),e.add($r(e.rank,t,n))}))}function Jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new zn("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return a.elu(e)}function Qr(e,t,n,r){return Object(a.tidy)((function(){return a.dropout(e,t,n,r)}))}function ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var ta=["fanIn","fanOut","fanAvg"],na=["normal","uniform","truncatedNormal"];var ra=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),aa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e,t){return Object(a.zeros)(e,t)}}]),n}(ra);aa.className="Zeros",a.serialization.registerClass(aa);var ia=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e,t){return Object(a.ones)(e,t)}}]),n}(ra);ia.className="Ones",a.serialization.registerClass(ia);var oa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),r=t.call(this),"object"!==typeof e)throw new Bn("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new Bn("config must have value set but got ".concat(e));return r.value=e.value,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){return Object(a.mul)(Object(a.scalar)(n.value),Object(a.ones)(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(ra);oa.className="Constant",a.serialization.registerClass(oa);var ua=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){return Object(a.randomUniform)(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(ra);ua.className="RandomUniform",a.serialization.registerClass(ua);var sa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new zn("randomNormal does not support dType ".concat(t,"."));return Hr(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(ra);sa.className="RandomNormal",a.serialization.registerClass(sa);var ca=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new zn("truncatedNormal does not support dType ".concat(t,"."));return Object(a.truncatedNormal)(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(ra);ca.className="TruncatedNormal",a.serialization.registerClass(ca);var la=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==e.length||e[0]!==e[1])throw new Bn("Identity matrix initializer can only be used for 2D square matrices.");return Object(a.mul)(n.gain,Object(a.eye)(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(ra);la.className="Identity",a.serialization.registerClass(la);var fa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;if(Object(Sn.a)(this,n),r=t.call(this),e.scale<0)throw new Bn("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,nr(ta,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){nr(na,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(kr(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=Mr(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=Mr(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=Mr(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],i=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){var u=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new zn("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Object(a.truncatedNormal)(e,0,u,t,this.seed)}var s=Math.sqrt(3*o);return Object(a.randomUniform)(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(ra);fa.className="VarianceScaling",a.serialization.registerClass(fa);var da=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);da.className="GlorotUniform",a.serialization.registerClass(da);var ha=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);ha.className="GlorotNormal",a.serialization.registerClass(ha);var pa=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);pa.className="HeNormal",a.serialization.registerClass(pa);var va=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);va.className="HeUniform",a.serialization.registerClass(va);var ma=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);ma.className="LeCunNormal",a.serialization.registerClass(ma);var ga=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Object(jn.a)(n,[{key:"getClassName",value:function(){return fa.className}}]),n}(fa);ga.className="LeCunNormal",a.serialization.registerClass(ga);var ba=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new zn("Random seed is not implemented for Orthogonal Initializer yet.");return r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e.length<2)throw new zn("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=Hr(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=a.linalg.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),Object(a.mul)(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(ra);ba.className="Orthogonal",a.serialization.registerClass(ba);var ya={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function _a(e){return $n(e)}function wa(e){if("string"===typeof e){var t=e in ya?ya[e]:e;if("GlorotNormal"===t)return new ha;if("GlorotUniform"===t)return new da;if("HeNormal"===t)return new pa;if("HeUniform"===t)return new va;if("LeCunNormal"===t)return new ma;if("LeCunUniform"===t)return new ga;var n={};return n.className=t,n.config={},xa(n)}return e instanceof ra?e:xa(e)}var ka=0;function Oa(){return ka++}var Sa={};function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Sa||(Sa[e]=0),Sa[e]+=1,e+Sa[e].toString()}function Ea(e){return Array.isArray(e)&&Array.isArray(e[0])}function Ca(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Aa(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new Bn("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Ta(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new Bn("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Na(e){var t,n=0,r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var Ma="Variable",Da=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ma,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(Sn.a)(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Oa(),r=null==r?Ma:r,this.originalName=Cr(r),this.name=Ar(this.originalName),this.trainable_=i,this.constraint=o,this.val=a.variable(t,this.trainable_,this.name,this.dtype)}return Object(jn.a)(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Ia(e){return e.map((function(e){return e.read()}))}function Fa(e){e.forEach((function(e){e[0].write(e[1])}))}var Ra=function e(t){Object(Sn.a)(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},Pa=function e(t,n,r,a,i,o,u){Object(Sn.a)(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=u,this.id=Oa(),null!=o&&(this.originalName=Cr(o),this.name=Ar(this.originalName)),this.rank=n.length},La=0,Ba=function(){function e(t,n){Object(Sn.a)(this,e),this.callArgs=n,this.id=La++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Object(Nn.a)(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Object(jn.a)(e,[{key:"getConfig",value:function(){var e,t=[],n=Object(Nn.a)(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),za=0,Ua=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Sn.a)(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=za++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=Xn(i)+"_"+ja(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var u=null;null!=r.batchSize&&(u=r.batchSize),o=[u].concat(r.inputShape)}e.batchInputShape=o;var s=r.dtype;null==s&&(s=r.inputDType),null==s&&(s="float32"),e.dtype=s}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Object(jn.a)(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new Ln("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new Bn("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return qn(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return qn(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new Pn("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new Pn("Layer ".concat(this.name)+" is not connected, no input to return.");return qn(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new Pn("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new Pn("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return qn(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=Hn(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=Hn(this.inputSpec);if(e.length!==t.length)throw new Bn("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new Bn("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new Bn("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new Bn("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new Bn("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var u in a.axes){var s=Number(u),c=a.axes[u],l=s>=0?o[s]:o[o.length+s];if(null!=c&&-1===[c,null].indexOf(l))throw new Bn("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(s," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],h=r.shape[f];if(null!=d&&null!=h&&d!==h)throw new Bn("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=Hn(e),i=!0,o=Object(Nn.a)(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof Pa)){i=!1;break}}}catch(l){o.e(l)}finally{o.f()}var u,s=!0,c=Object(Nn.a)(a);try{for(c.s();!(u=c.n()).done;){if(u.value instanceof Pa){s=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(i===s)throw new Bn("Arguments to apply() must be all SymbolicTensors or all Tensors");return Er(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Object(Nn.a)(Hn(e));try{for(o.s();!(r=o.n()).done;){var u=r.value;i.push(u.shape)}}catch(l){o.e(l)}finally{o.f()}n.build(qn(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(e),s){var c,f=n.call(e,t),d=Hn(f),h=[],p=Object(Nn.a)(d);try{for(p.s();!(c=p.n()).done;){var v=c.value;-1!==a.indexOf(v)&&(v=v.clone()),h.push(v)}}catch(l){p.e(l)}finally{p.f()}if(f=qn(h),null!=n.activityRegularizer)throw new zn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return f}var m,g=function(e){e=Hn(e);var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(l){r.e(l)}finally{r.f()}return qn(n)}(e),b=n.computeOutputShape(g),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),m=null!=b&&b.length>0&&Array.isArray(b[0])?b.map((function(r,a){return new Pa(y,r,n,Hn(e),t,n.name,a)})):new Pa(y,b,n,Hn(e),t,n.name),n.addInboundNode(e,m,null,null,g,b,t),n._refCount++,null!=n.activityRegularizer)throw new zn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Pn("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=Object(Nn.a)(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new Pn("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new Ln("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Na(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ia(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Object(a.tidy)((function(){var n=t.weights;if(n.length!==e.length)throw new Bn('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],i=Ia(n),o=0;o<i.length;++o){var u=i[o],s=n[o],c=e[o];if(!a.util.arraysEqual(u.shape,c.shape))throw new Bn("Layer weight shape ".concat(u.shape," ")+"not compatible with provided weight shape ".concat(c.shape));r.push([s,c])}Fa(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new Bn("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=wa("zeros"));var u=r.apply(t,n),s=new Da(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(s.read())})),null==i&&(i=!0),i?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=Hn(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Object(Tn.a)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=Hn(e);t=Hn(t),n=Hn(n),r=Hn(r),a=Ca(a),i=Ca(i);var s,c=[],l=[],f=[],d=Object(Nn.a)(u);try{for(d.s();!(s=d.n()).done;){var h=s.value;c.push(h.sourceLayer),l.push(h.nodeIndex),f.push(h.tensorIndex)}}catch(v){d.e(v)}finally{d.f()}new Ba({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:f,inputTensors:u,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(a.serialization.Serializable);function Wa(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,u=Wa(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]),s=Object(Nn.a)(u);try{for(s.s();!(o=s.n()).done;){var c=o.value;-1===a.indexOf(c)&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}return a}var Va=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:ja("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Bn("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new Bn("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Bn("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new Pa(r.dtype,r.batchInputShape,Object(Mn.a)(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new Ba({outboundLayer:Object(Mn.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return Object(jn.a)(n,[{key:"apply",value:function(e,t){throw new Bn("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Ua);function Ga(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Bn("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new Va({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}Va.className="InputLayer",a.serialization.registerClass(Va);var qa,Ha=n(2),Xa=n.n(Ha),Ya=n(16);function Ka(e){return $a.apply(this,arguments)}function $a(){return($a=Object(Ya.a)(Xa.a.mark((function e(t){var n,r,i,o,u,s,c,l;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(o in n=[],r=[],i=[],t)"number"!==typeof(u=t[o])&&(s=u,n.push(s.data()),r.push(o),i.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(c=e.sent,l=0;l<c.length;++l)t[r[l]]=c[l][0];Object(a.dispose)(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(qa||(qa={}));var Ja=function(){function e(){Object(Sn.a)(this,e),this.validationData=null}return Object(jn.a)(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),Qa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Object(Sn.a)(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Object(jn.a)(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Object(Nn.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Object(Nn.a)(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a,i;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a,i;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a,i;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a,i;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Object(Nn.a)(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n,r,a;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(Nn.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n,r,a;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Object(Nn.a)(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ei=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.call(this)}return Object(jn.a)(n,[{key:"onEpochBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,i,o,u=this;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,i=function(e){var t=n[e];if("number"===typeof t)u.totals.hasOwnProperty(e)||(u.totals[e]=0),u.totals[e]=u.totals[e]+t*r;else{var i;e in u.totals?i=u.totals[e]:u.totals[e]=0;var o=Object(a.tidy)((function(){return Object(a.add)(u.totals[e],Object(a.mul)(t,r))}));u.totals[e]=o,null!=i&&i.dispose()}},n)i(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,i,o,u=this;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=Object(Nn.a)(this.params.metrics),e.prev=2,o=function(){var e=i.value;if(null==u.totals[e])return"continue";"number"===typeof u.totals[e]?n[e]=u.totals[e]/u.seen:Object(a.tidy)((function(){var t=Object(a.mul)(Object(a.div)(1,u.seen),u.totals[e]);n[e]=t,u.totals[e].dispose(),Object(a.keep)(n[e])}))},r.s();case 5:if((i=r.n()).done){e.next=11;break}if("continue"!==o()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Ja),ti=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"onTrainBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(){var t,n,r,a,i,o,u,s,c;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(u=i[o],t.push(u.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(s=e.sent,c=0;c<s.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=s[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ja),ni=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var i;if(Object(Sn.a)(this,n),(i=t.call(this)).currentEpoch=0,i.yieldEvery=r||"auto","auto"===i.yieldEvery&&(i.yieldEvery=125),"never"===i.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return a.util.isNumber(i.yieldEvery)&&(i.maybeWait=function(e,t){var n,r=a.util.now();return function(){var i=a.util.now();return i-r<t?n:(r=i,n=e.apply(void 0,arguments))}}(i.maybeWait.bind(Object(Mn.a)(i)),i.yieldEvery)),i.trainBegin=e.onTrainBegin,i.trainEnd=e.onTrainEnd,i.epochBegin=e.onEpochBegin,i.epochEnd=e.onEpochEnd,i.batchBegin=e.onBatchBegin,i.batchEnd=e.onBatchEnd,i.yield=e.onYield,i}return Object(jn.a)(n,[{key:"maybeWait",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n,r){var i;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],null==this.yield){e.next=5;break}return e.next=4,Ka(r);case 4:i.push(this.yield(t,n,r));case 5:return i.push(Object(a.nextFrame)()),e.next=8,Promise.all(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Ka(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Ka(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(Object(a.nextFrame)()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Ka(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Ka(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(Object(a.nextFrame)()):a.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Ka(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Ka(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ja);function ri(e,t){return null==e&&(e={}),e instanceof Ja?[e]:Array.isArray(e)&&e[0]instanceof Ja?e:Hn(e).map((function(e){return new ni(e,t)}))}var ai=function(){function e(){Object(Sn.a)(this,e)}return Object(jn.a)(e,null,[{key:"registerCallbackConstructor",value:function(t,n){a.util.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new Bn("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,Object(Tn.a)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function ii(e,t,n,r,a,i,o,u,s){var c=new ti,l=[new ei].concat(Object(Tn.a)(ai.createCallbacks(t)));null!=e&&l.push.apply(l,Object(Tn.a)(e)),l.push(c);var f=new Qa(l);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:u,metrics:s}),{callbackList:f,history:c}}ai.constructors={};var oi=n(28);function ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Jn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"layer",n)}function si(e,t){return Object(a.tidy)((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=a.sum(Kr(e),t,!0),r=a.fill(n.shape,An()),i=a.sqrt(a.maximum(n,r));return a.div(e,i)}))}function ci(e,t){return Object(a.tidy)((function(){return a.mean(Kr(a.sub(t,e)),-1)}))}function li(e,t){return Object(a.tidy)((function(){return a.mean(a.abs(a.sub(t,e)),-1)}))}function fi(e,t){return Object(a.tidy)((function(){var n=a.sub(e,t),r=a.clipByValue(a.abs(e),An(),Number.MAX_VALUE),i=a.abs(a.div(n,r));return a.mul(100,a.mean(i,-1))}))}function di(e,t){return Object(a.tidy)((function(){var n=a.clipByValue(t,An(),Number.MAX_VALUE),r=a.log(a.add(1,n)),i=a.clipByValue(e,An(),Number.MAX_VALUE),o=a.log(a.add(1,i));return a.mean(Kr(a.sub(r,o)),-1)}))}function hi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a.tidy)((function(){if(n)t=a.softmax(t);else{var r=a.sum(t,t.shape.length-1,!0);t=a.div(t,r)}return t=a.clipByValue(t,An(),1-An()),a.neg(a.sum(a.mul(e.toFloat(),a.log(t)),t.shape.length-1))}))}function pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a.tidy)((function(){var r=a.floor(Br(e)).toInt(),i=(t=a.clipByValue(t,An(),1-An())).shape;return hi(a.oneHot(r,i[i.length-1]).reshape(i),t,n)}))}function vi(e,t){return Object(a.tidy)((function(){var n;return n=a.clipByValue(t,An(),1-An()),n=a.log(a.div(n,a.sub(1,n))),a.mean(function(e,t){if(!a.util.arraysEqual(e.shape,t.shape))throw new Bn("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Object(a.tidy)((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function mi(e,t){return Object(a.tidy)((function(){var n=a.clipByValue(e,An(),1),r=a.clipByValue(t,An(),1);return a.sum(a.mul(e,a.log(a.div(n,r))),-1)}))}function gi(e,t){return Object(a.tidy)((function(){var n=si(e,-1),r=si(t,-1),i=a.mul(n,r);return a.neg(a.sum(i,-1))}))}var bi={meanSquaredError:ci,meanAbsoluteError:li,meanAbsolutePercentageError:fi,meanSquaredLogarithmicError:di,squaredHinge:function(e,t){return Object(a.tidy)((function(){var n=a.maximum(0,a.sub(1,a.mul(e,t)));return a.mean(Kr(n),-1)}))},hinge:function(e,t){return Object(a.tidy)((function(){var n=a.maximum(0,a.sub(1,a.mul(e,t)));return a.mean(n,-1)}))},categoricalHinge:function(e,t){return Object(a.tidy)((function(){var n=a.sum(a.mul(e,t),-1),r=a.max(a.mul(a.sub(1,e),t),-1);return a.maximum(0,a.add(1,a.sub(r,n)))}))},logcosh:function(e,t){return Object(a.tidy)((function(){var n=Math.log(2),r=a.sub(t,e),i=a.sub(a.add(r,a.softplus(a.mul(-2,r))),n);return a.mean(i,-1)}))},categoricalCrossentropy:hi,sparseCategoricalCrossentropy:pi,binaryCrossentropy:vi,kullbackLeiblerDivergence:mi,poisson:function(e,t){return Object(a.tidy)((function(){var n=a.log(a.add(An(),t));return a.mean(a.sub(t,a.mul(e,n)),-1)}))},cosineProximity:gi};function yi(e){if("string"===typeof e){if(e in bi)return bi[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Bn(t)}return e}function xi(e,t){return Object(a.tidy)((function(){var n=a.mul(.5,a.onesLike(t)),r=Pr(a.greater(t,n),e.dtype);return a.mean(a.equal(e,r),-1)}))}function _i(e,t){return Object(a.tidy)((function(){return Pr(a.equal(a.argMax(e,-1),a.argMax(t,-1)),"float32")}))}function wi(e,t){return Object(a.tidy)((function(){return a.logicalAnd(e.equal(1),t.equal(1)).sum().cast("float32")}))}function ki(e,t){return Object(a.tidy)((function(){var n=wi(e,t),r=function(e,t){return Object(a.tidy)((function(){return a.logicalAnd(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),i=n.add(r);return a.where(a.greater(i,0),n.div(i),0).cast("float32")}))}function Oi(e,t){return vi(e,t)}function Si(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),a.equal(e,t).asType("float32")}var ji=hi,Ei=pi,Ci={binaryAccuracy:xi,categoricalAccuracy:_i,precision:ki,categoricalCrossentropy:ji,sparseCategoricalCrossentropy:Ei,mse:ci,MSE:ci,mae:li,MAE:li,mape:fi,MAPE:fi,cosine:gi};function Ai(e){if("string"===typeof e&&e in Ci)return Ci[e];if("string"!==typeof e&&null!=e)return e;throw new Bn("Unknown metric ".concat(e))}function Ti(e){if(Vn(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(bi);n<r.length;n++){var a=r[n];if(bi[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(Ci);i<o.length;i++){var u=o[i];if(Ci[u]===e){t=u;break}}return void 0!==t?t:e.name}var Ni=1048576;function Mi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Di(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>Ni&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(Ni,"."))}}function Di(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!Di(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Object(Nn.a)(e);try{for(i.s();!(a=i.n()).done;){if(!Di(a.value))return!1}}catch(u){i.e(u)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function Ii(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=Ri(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var u in o.push("Receives inputs"),r=[],e.nodesByDepth){var s;(s=r).push.apply(s,Object(Tn.a)(e.nodesByDepth[u]))}a("_".repeat(t)),Pi(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?Li(c[l],n,a):Bi(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=Fi(e),d=Na(e.nonTrainableWeights);a("Total params: ".concat(f+d)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function Fi(e){return null!=e.collectedTrainableWeights?Na(e.collectedTrainableWeights):Na(e.trainableWeights)}function Ri(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var u=o[i];if(u.length>1||1===u.length&&u[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,Object(Tn.a)(u))}if(t){var s,c=Object(Nn.a)(e.layers);try{for(c.s();!(s=c.n()).done;){var l,f=s.value,d=!1,h=Object(Nn.a)(f.inboundNodes);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(d){t=!1;break}d=!0}}}catch(v){h.e(v)}finally{h.f()}if(!t)break}}catch(v){c.e(v)}finally{c.f()}}return t}function Pi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function Li(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(o){r="multiple"}var a=e.name,i=e.getClassName();Pi(["".concat(a," (").concat(i,")"),r,e.countParams().toString()],t,n)}function Bi(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(g){a="multiple"}var i,o=[],u=Object(Nn.a)(e.inboundNodes);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(var c=0;c<s.inboundLayers.length;++c){var l=s.inboundLayers[c].name,f=s.nodeIndices[c],d=s.tensorIndices[c];o.push("".concat(l,"[").concat(f,"][").concat(d,"]"))}}}catch(g){u.e(g)}finally{u.f()}var h=e.name,p=e.getClassName(),v=0===o.length?"":o[0];Pi(["".concat(h," (").concat(p,")"),a,e.countParams().toString(),v],t,r);for(var m=1;m<o.length;++m)Pi(["","","",o[m]],t,r)}function zi(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function Ui(e,t){if(null===e)return null;if("string"===typeof e)return Yn(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];zi(t,a,i)?n.push(i):n.push(Ui(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var f=Yn(c);o[f]=Ui(l,f)}}return o}function Wi(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return Xn(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];zi(t,a,i)?n.push(i):n.push(Wi(i,t))}return n}for(var o={},u=0,s=Object.keys(e);u<s.length;u++){var c=s[u],l=e[c],f=Xn(c);o[f]="name"!==c&&"className"!==c||"string"!==typeof l?Wi(l,c):l}return o}var Vi="3.2.0";var Gi=function(){function e(t){if(Object(Sn.a)(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Object(Nn.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return Object(jn.a)(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new Bn("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Object(a.cast)(t,e.dtype)}catch(n){throw new Bn("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof Pa){if(null==this.id2Value[e.id])throw new Bn("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new Bn("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof Pa){if(null==this.id2Value[e.id])throw new Bn("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new Bn("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Object(a.dispose)(this.id2Mask)}}]),e}(),qi={},Hi={};function Xi(e,t,n,r){var i,o=null!=n&&n.training,u=Array.isArray(e),s=u?e:[e],c=s.map((function(e){return e.name})),l=[],f=t.names(),d=Object(Nn.a)(c);try{for(d.s();!(i=d.n()).done;){var h=i.value;-1!==f.indexOf(h)?l.push(t.getValue(h)):l.push(null)}}catch(L){d.e(L)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,v,m=c.join(",")+"|"+t.names().join(",");if(null==qi[m]){var g=function(e,t){a.util.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var i=Ki(e[0],t);n=i.sorted,r=i.recipientMap}else{var o,u=new Set,s=Object(Nn.a)(e);try{for(s.s();!(o=s.n()).done;){var c,l=Ki(o.value,t),f=l.sorted,d=l.recipientMap,h=Object(Nn.a)(f);try{for(h.s();!(c=h.n()).done;){var p=c.value;u.has(p.name)||(n.push(p),u.add(p.name))}}catch(L){h.e(L)}finally{h.f()}var v=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)v(m)}}catch(L){s.e(L)}finally{s.f()}}return{sorted:n,recipientCounts:Yi(r)}}(s,t);p=g.sorted,v=g.recipientCounts,qi[m]=p,Hi[m]=v}p=qi[m],v={},o||Object.assign(v,Hi[m]);for(var b=new Gi(t),y=0;y<p.length;++y){if(null!=r){var x=Object(a.memory)().numTensors;x>r.maxNumTensors&&(r.maxNumTensors=x),x<r.minNumTensors&&(r.minNumTensors=x)}var _=p[y],w=_.sourceLayer;if(!(w instanceof Va)){var k,O=[],S=[],j=[],E=!1,C=Object(Nn.a)(_.inputs);try{for(C.s();!(k=C.n()).done;){var A=k.value,T=b.getValue(A),N=b.getMask(A);O.push(T),S.push(N),null!=N&&(E=!0),o||(v[A.name]--,0!==v[A.name]||t.hasKey(A)||-1!==c.indexOf(A.name)||T.isDisposed||!0===A.sourceLayer.stateful||j.push(T))}}catch(L){C.e(L)}finally{C.f()}E&&((n=n||{}).mask=S[0]);var M=Hn(w.apply(O,n)),D=null;w.supportsMasking&&(D=w.computeMask(O,S));for(var I=$i(_),F=Array.isArray(I)?I:[I],R=0;R<F.length;++R){b.hasKey(F[R])||b.add(F[R],M[R],Array.isArray(D)?D[0]:D);var P=c.indexOf(F[R].name);-1!==P&&(l[P]=M[R])}o||Object(a.dispose)(j)}}return b.disposeMasks(),u?l:l[0]}function Yi(e){var t={};for(var n in e)t[n]=e[n].size;return t}function Ki(e,t){var n,r=new Set,a=[],i={},o=Object(Nn.a)(t.names());try{for(o.s();!(n=o.n()).done;){var u=n.value;r.add(u)}}catch(v){o.e(v)}finally{o.f()}var s=[],c=[];for(s.push(e);s.length>0;){var l=s[s.length-1];if(r.has(l.name))s.pop();else{var f=c[c.length-1]===s.length-1;if(0===l.inputs.length||f)s.pop(),a.push(l),r.add(l.name),f&&c.pop();else{c.push(s.length-1);var d,h=Object(Nn.a)(l.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||s.push(p)}}catch(v){h.e(v)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function $i(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Object(Nn.a)(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function Zi(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Ji(e,t){return Zi(e,t,"classWeight")}function Qi(e,t,n,r){return eo.apply(this,arguments)}function eo(){return(eo=Object(Ya.a)(Xa.a.mark((function e(t,n,r,i){var o,u,s;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==i){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return o=Object(a.tidy)((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){return t.argMax(1)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,o.data();case 7:return e.t1=e.sent,u=e.t0.from.call(e.t0,e.t1),Object(a.dispose)(o),s=[],u.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",Object(a.tensor1d)(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(e,t){return Object(a.mul)(e,t)}function no(e,t){var n,r,i=t;n=i.xs,r=i.ys,a.util.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var o=ro("input",e.inputNames,n),u=ro("output",e.outputNames,r),s=o[0].shape[0];a.util.assert(o.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),a.util.assert(u.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(u.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var c=function(t){a.util.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<o.length;l++)c(l);for(var f=function(t){a.util.assert(u[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(u[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<u.length;d++)f(d);return{xs:o,ys:u}}function ro(e,t,n){if(n instanceof a.Tensor)return[n];if(Array.isArray(n))return a.util.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,i=[],o=Object(Nn.a)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(null==n[u])throw new Bn("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(u,"'."));i.push(n[u])}}catch(s){o.e(s)}finally{o.f()}return i}function ao(e){if(3===e.length)throw new zn("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function io(e,t,n){return oo.apply(this,arguments)}function oo(){return(oo=Object(Ya.a)(Xa.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,x,_,w,k,O,S,j,E,C,A,T,N,M,D,I,F,R,P;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=r.batchesPerEpoch,a.util.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),a.util.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),a.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),a.util.assert(!i||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),a.util.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(o=null!=r.validationData)&&(so(r.validationData)?a.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(c=ao(r.validationData),u=c.xs,s=c.ys)),l=t.makeTrainFunction(),f=t.getDedupedMetricsNames(),d=o?f.slice().concat(f.map((function(e){return"val_"+e}))):f.slice(),h=ri(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,v=ii(h,p,r.epochs,null,null,uo(n,r),null,o,d),m=v.callbackList,g=v.history,m.setModel(t),t.history=g,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,b=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(b<r.epochs)){e.next=98;break}return x={},e.next=31,m.onEpochBegin(b);case 31:if(_=0,w=0,i){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(i&&!(_<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!i||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(_," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return O=no(t,k.value),S=O.xs,j=O.ys,(E={}).batch=w,E.size=S[0].shape[0],e.next=51,m.onBatchBegin(w,E);case 51:if(C=[],null==r.classWeight){e.next=64;break}A=Ji(r.classWeight,t.outputNames),T=0;case 55:if(!(T<A.length)){e.next=64;break}return e.t0=C,e.next=59,Qi(j[T],null,A[T]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++T,e.next=55;break;case 64:for(N=S.concat(j).concat(C),M=l(N),a.dispose(N),D=0;D<f.length;++D)I=f[D],F=M[D],E[I]=F,a.keep(F);return e.next=70,m.onBatchEnd(w,E);case 70:Za(E),w++,_++;case 73:if(!(i?_>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!o){e.next=86;break}if(R=void 0,!so(r.validationData)){e.next=84;break}return e.t2=Hn,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,R=(0,e.t2)(e.t3),e.next=85;break;case 84:R=Hn(t.evaluate(u,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(P=0;P<t.metricsNames.length;++P)x["val_".concat(t.metricsNames[P])]=R[P];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(b,x);case 93:if(b++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])})))).apply(this,arguments)}function uo(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function so(e){return"function"===typeof e.iterator}function co(e){return"function"===typeof e.next}function lo(e,t,n){return fo.apply(this,arguments)}function fo(){return(fo=Object(Ya.a)(Xa.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null!=(r=r||{}).batches,o=t.testFunction,u=[],!(r.verbose>0)){e.next=6;break}throw new zn("Verbose mode is not implemented yet.");case 6:if(a.util.assert(!i||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!co(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,c=0,l=0,f=Xa.a.mark((function e(){var n;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,u=a.tidy((function(){return n.value&&function(){var e=no(t,n.value),r=e.xs,i=e.ys,s=r.concat(i),f=a.tidy((function(){return o(s)}));if(a.dispose(s),0===l)for(var d=0;d<f.length;++d)u.push(Object(a.scalar)(0));for(var h=s[0].shape[0],p=function(e){var t=f[e],n=u[e];u[e]=a.tidy((function(){return a.add(u[e],a.mul(h,t))})),l>0&&a.dispose(n)},v=0;v<f.length;++v)p(v);a.dispose(f),c+=h,++l}(),u})),!n.done){e.next=7;break}return i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(i&&!(l<r.batches)){e.next=25;break}return e.delegateYield(f(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<u.length;++d)h=u[d],u[d]=a.div(u[d],c),a.dispose(h);return e.abrupt("return",qn(u));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ho(e){a.util.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function po(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return zr(e,t,n-t)})):zr(e,t,n-t)}function vo(e,t){return a.tidy((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return vo(e,t)})):Yr(e,"int32"===t.dtype?t:t.toInt())}))}function mo(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function go(e,t,n,r,a,i,o,u,s,c,l,f,d,h,p){return bo.apply(this,arguments)}function bo(){return(bo=Object(Ya.a)(Xa.a.mark((function e(t,n,r,i,o,u,s,c,l,f,d,h,p,v,m){var g,b,y,x,_,w,k,O;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o&&(o=32),null==u&&(u=1),null==d&&(d=!0),null==p&&(p=0),g=!1,null!=l&&null!=f&&(g=!0),null==m){e.next=10;break}if(g=!0,null!=v){e.next=10;break}throw new Bn("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(b=t.checkNumSamples(r,o,v,"steps_per_epoch"))&&(y=Rr(0,b)),null==s&&(s=1),x=ii(c,s,u,p,b,v,o,g,h),_=x.callbackList,w=x.history,_.setModel(t),t.history=w,e.next=18,_.onTrainBegin();case 18:t.stopTraining_=!1,k=Xa.a.mark((function e(u){var s;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.onEpochBegin(u);case 2:if(s={},null==v){e.next=7;break}throw new zn("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(Xa.a.mark((function e(){var u,c,h,p;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==d){e.next=4;break}throw new zn("batch shuffling is not implemneted yet");case 4:d&&a.util.shuffle(y);case 5:u=Object(a.tensor1d)(y),c=mo(b,o),h=Xa.a.mark((function e(d){var h;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,_.onBatchBegin(d,h);case 3:return a.tidy((function(){var e=c[d][0],p=c[d][1],v=zr(u,e,p-e);h.batch=d,h.size=p-e;for(var m=vo(r,v),b=n(m),y=0;y<i.length;++y){var x=i[y],_=b[y];h[x]=_,a.keep(_)}if(d===c.length-1&&g)for(var w=t.testLoop(l,f,o),k=0;k<i.length;++k){var O=i[k],S=w[k];a.keep(S),s["val_"+O]=S}})),e.next=6,_.onBatchEnd(d,h);case 6:if(Za(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 9:if(!(p<c.length)){e.next=17;break}return e.delegateYield(h(p),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++p,e.next=9;break;case 17:u.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,_.onEpochEnd(u,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),O=p;case 21:if(!(O<u)){e.next=29;break}return e.delegateYield(k(O),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++O,e.next=21;break;case 29:return e.next=31,_.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(e,t,n){return xo.apply(this,arguments)}function xo(){return(xo=Object(Ya.a)(Xa.a.mark((function e(t,n,r){var i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,x,_,w,k,O,S,j,E,C,A=arguments;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=A.length>3&&void 0!==A[3]?A[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,ho(h=null==i.batchSize?32:i.batchSize),p=!1,e.next=10,t.standardizeUserData(n,r,i.sampleWeight,i.classWeight,p,h);case 10:if(v=e.sent,o=v[0],u=v[1],d=v[2],m=!1,!(null!=i.validationData&&i.validationData.length>0)){e.next=36;break}if(m=!0,2!==i.validationData.length){e.next=22;break}s=i.validationData[0],c=i.validationData[1],e.next=27;break;case 22:if(3!==i.validationData.length){e.next=26;break}throw new zn("validationData including sample weights is not supported yet.");case 26:throw new Bn("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(i.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(s,c,null,null,b,h);case 30:y=e.sent,l=y[0],f=y[1],g=l.concat(f),e.next=37;break;case 36:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(m=!0,x=Math.floor(o[0].shape[0]*(1-i.validationSplit)),_=o[0].shape[0],l=po(o,x,_),o=po(o,0,x),f=po(u,x,_),u=po(u,0,x),g=l.concat(f)):null!=i.validationSteps&&(m=!0);case 37:return w=o.concat(u).concat(d),t.checkTrainableWeightsConsistency(),k=t.makeTrainFunction(),O=t.getDedupedMetricsNames(),m?(t.makeTestFunction(),S=t.testFunction,j=O.slice().concat(O.map((function(e){return"val_"+e})))):(S=null,g=[],j=O.slice()),E=ri(i.callbacks,i.yieldEvery),e.next=45,go(t,k,w,O,h,i.epochs,i.verbose,E,S,g,i.shuffle,j,i.initialEpoch,null,null);case 45:return C=e.sent,e.abrupt("return",C);case 47:return e.prev=47,t.isTraining=!1,wo(o,n),wo(u,r),wo(l,s),wo(f,c),null!=d&&a.dispose(d),e.finish(47);case 55:case"end":return e.stop()}}),e,null,[[4,,47,55]])})))).apply(this,arguments)}function _o(e){var t=[];e instanceof a.Tensor&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(Lr(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function wo(e,t){if(null!=e){var n=[];if(t instanceof a.Tensor)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var i=t[r];n.push(i.id)}var o=[];if(e instanceof a.Tensor)-1===n.indexOf(e.id)&&o.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&o.push(e)}));else if(null!=e)for(var u in e){var s=e[u];-1===n.indexOf(s.id)&&o.push(s)}o.forEach((function(e){e.isDisposed||e.dispose()}))}}function ko(e){return Array.isArray(e)}function Oo(e){return!function(e){return e instanceof a.Tensor}(e)&&!ko(e)}function So(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(ko(e)&&e.length>0)o=!0;else if(Oo(e)){for(var u in e)if(e.hasOwnProperty(u)){o=!0;break}}else o=!0;if(o)throw new Bn("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(Oo(e)){e=e,r=[];var s,c=Object(Nn.a)(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(null==e[l])throw new Bn('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(m){c.e(m)}finally{c.f()}}else if(ko(e)){if((e=e).length!==t.length)throw new Bn("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new Bn("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=_o(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new Bn("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var h=0;h<n[f].length;++h)if(0!==h||a){var p=d.shape[h],v=n[f][h];if(null!=v&&v>=0&&p!==v)throw new Bn("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have shape [".concat(n[f],"], but got array with shape ")+"[".concat(d.shape,"]."))}}return r}function jo(e,t,n){var r=er(e.map((function(e){return e.shape[0]})));r.sort();var i=er(t.map((function(e){return e.shape[0]})));if(i.sort(),r.length>1)throw new Bn("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(i.length>1)throw new Bn("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&i.length>0&&!a.util.arraysEqual(r,i))throw new Bn("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(i[0]," target ")+"sample(s).")}function Eo(e,t,n){for(var r=[ci,vi,hi],a=0;a<e.length;++a){var i=e[a],o=t[a],u=n[a];if(null!=o){if(o===hi&&1===i.shape[i.shape.length-1])throw new Bn("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var s=i.shape.slice(1),c=u.slice(1),l=0;l<s.length;++l){var f=s[l],d=c[l];if(null!=d&&f!==d)throw new Bn("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(u,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Co(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Bn("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new Bn("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var u=r[o];if(u.shape.length!==n[o].length)throw new Bn("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(u.shape)));for(var s=0;s<n[o].length;++s)if(0!==s||a){var c=u.shape[s],l=n[o][s];if(null!=l&&l!==c)throw new Bn("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(u.shape),"."))}}}var Ao=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).isTraining=!1,r}return Object(jn.a)(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Bn("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Ii(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return a.train.adagrad(.01)},Adadelta:function(){return a.train.adadelta(1,.95,An())},Adam:function(){return a.train.adam(.001,.9,.999,An())},Adamax:function(){return a.train.adamax(.002,.9,.999,An(),0)},RMSProp:function(){return a.train.rmsprop(.001,.9,0,An())},SGD:function(){return a.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Bn("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof a.Optimizer))throw new Bn("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Bn("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return yi(e)}))}else{var i=yi(e.loss);this.outputs.forEach((function(e){n.push(i)}))}else{for(var o in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(o))throw new Bn('Unknown entry in loss dictionary: "'.concat(o,'". ')+"Only expected the following keys: ".concat(this.outputNames));var u,s=Object(Nn.a)(this.outputNames);try{for(s.s();!(u=s.n()).done;){var c=u.value;null==e.loss[c]&&console.warn('Output "'.concat(c,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(c," during training")),n.push(yi(e.loss[c]))}}catch(m){s.e(m)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var f=this.internalOutputShapes[l],d=this.outputNames[l];this.feedOutputNames.push(d),this.feedOutputShapes.push(f),this.feedLossFns.push(this.lossFunctions[l])}var h=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Er("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===h.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var p=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Object(Nn.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=n.hasOwnProperty(o)?n[o]:[];Array.isArray(u)||(u=[u]),a.push(u)}}catch(m){i.e(m)}finally{i.f()}return a}(e.metrics,this.outputNames),v=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};Er("metric",(function(){for(var e=function(e){if(-1!==h.indexOf(e))return"continue";!function(n){var r,a,i,o,u=Object(Nn.a)(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===vi?-1!==["accuracy","acc"].indexOf(s)?a=xi:-1!==["crossentropy","ce"].indexOf(s)&&(a=Oi):t.lossFunctions[e]===pi?-1!==["accuracy","acc"].indexOf(s)?a=Si:-1!==["crossentropy","ce"].indexOf(s)&&(a=Ei):-1!==["accuracy","acc"].indexOf(s)?a=_i:-1!==["crossentropy","ce"].indexOf(s)&&(a=ji);var l=void 0;-1!==["accuracy","acc"].indexOf(s)?l="acc":-1!==["crossentropy","ce"].indexOf(s)&&(l="ce"),i=a,r=""+l}else{var f=Ai(s);i=f,r=""+Ti(s)}var d=void 0;Er(r,(function(){d=i})),v(e,r,d)}}catch(m){u.e(m)}finally{u.f()}}(p[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;ho(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var u=this.testFunction,s=this.testLoop(u,o,r,n.verbose,n.steps);return qn(s)}finally{wo(i[0],e),wo(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",lo(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Bn("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new Bn("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new Bn("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new Gi;if(e instanceof a.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Bn("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var u=0;u<this.inputs.length;++u)o.add(this.inputs[u],e[u])}else{var s,c=Object(Nn.a)(this.inputs);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e[l.name];if(null==f)throw new Bn("No value is provided for the model's input ".concat(l.name));o.add(l,f)}}catch(h){c.e(h)}finally{c.f()}}var d=Xi(i,o);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=Wn(null,e.length),r=e.length,a=Object(Nn.a)(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],u=o.map((function(e){return e.name})),s=0;s<e.length;++s){var c=u.indexOf(e[s]);if(-1!==c&&(n[s]=o[c],r--),0===r)break}if(0===r)break}}catch(f){a.e(f)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new Bn("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.tidy((function(){var i=t.checkNumSamples(e);if(r)throw new zn("Verbose predictLoop() is not implemented yet.");for(var o=mo(i,n),u=t.outputs.map((function(e){return[]})),s=function(n){a.tidy((function(){var r=o[n][0],a=o[n][1],i=po(e,r,a),u=[];if(Array.isArray(i))for(var s=0;s<i.length;++s)u.push({key:t.inputs[s],value:i[s]});else u.push({key:t.inputs[0],value:i});var c=new Gi(u);return Xi(t.outputs,c)})).forEach((function(e,t){return u[t].push(e)}))},c=0;c<o.length;++c)s(c);return qn(u.map((function(e){return a.concat(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_o(e);Co(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return ho(r),this.predictLoop(n,r)}finally{wo(n,e)}}},{key:"predictOnBatch",value:function(e){Co(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Ln("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===pi?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(jo(e=So(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=So(t,this.feedOutputNames,r,!1,"target")),Eo(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new Bn("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n,r,a){var o,u,s,c,l,f,d,h,p,v=arguments;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(v.length>4&&void 0!==v[4])||v[4],u=v.length>5?v[5]:void 0,s=this.standardizeUserDataXY(t,n,o,u),c=Object(i.a)(s,2),l=c[0],f=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}h=Ji(a,this.outputNames),d=[],p=0;case 10:if(!(p<h.length)){e.next=19;break}return e.t0=d,e.next=14,Qi(f[p],null,h[p]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++p,e.next=10;break;case 19:return e.abrupt("return",[l,f,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;return a.tidy((function(){var u=r.checkNumSamples(t,n,o,"steps"),s=[];if(i>0)throw new zn("Verbose mode is not implemented yet.");if(null!=o)throw new zn("steps mode in testLoop() is not implemented yet");for(var c=mo(u,n),l=Object(a.tensor1d)(Rr(0,u)),f=0;f<c.length;++f){var d=c[f][0],h=c[f][1],p=zr(l,d,h-d),v=vo(t,p),m=e(v);if(0===f)for(var g=0;g<m.length;++g)s.push(Object(a.scalar)(0));for(var b=0;b<m.length;++b){var y=m[b];s[b]=a.add(s[b],a.mul(h-d,y))}}for(var x=0;x<s.length;++x)s[x]=a.div(s[x],u);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(Gn(e,r)>1){var i=Gn(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),u=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var c,l=new Gi(t),f=Xi(e.outputs,l,{training:!0}),d=0;d<e.lossFunctions.length;++d){var h=(0,e.lossFunctions[d])(i[d],f[d]);null!=o[d]&&(h=to(h,o[d]));var p=a.mean(h);n.push(p),c=0===d?h:a.add(c,h)}for(var v=0;v<e.metricsTensors.length;++v){var m=void 0;if(e.outputs.length>1&&v<e.outputs.length)m=n[v];else{var g=e.metricsTensors[v][0],b=e.metricsTensors[v][1];m=a.mean(g(i[b],f[b]))}a.keep(m),u.push(m)}return c=a.mean(c),e.calculateLosses().forEach((function(e){c=a.add(c,e)})),c}),!0,s)].concat(u)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return a.tidy((function(){for(var n,r=[],i=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),u=[],s=0;s<e.inputs.length;++s)u.push({key:e.inputs[s],value:i[s]});for(var c=new Gi(u),l=Xi(e.outputs,c),f=0;f<e.lossFunctions.length;++f){var d=e.lossFunctions[f],h=a.mean(d(o[f],l[f]));n=0===f?h:a.add(n,h),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var v=e.metricsTensors[p][0],m=e.metricsTensors[p][1],g=a.mean(v(o[m],l[m]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a=arguments;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",yo(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",io(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,i,o,u,s,c,l,f,d,h;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,i=r[0],o=r[1],u=this.makeTrainFunction(),s=u(i.concat(o)),c=[],l=Object(Nn.a)(s),e.prev=9,l.s();case 11:if((f=l.n()).done){e.next=19;break}return d=f.value,e.next=15,d.data();case 15:h=e.sent,c.push(h[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return a.dispose(s),e.abrupt("return",qn(c));case 29:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=a.memory().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-a.memory().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=Xn(this.loss);else if(Array.isArray(this.loss)){var t,n=Object(Nn.a)(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(s){n.e(s)}finally{n.f()}e=this.loss.map((function(e){return Xn(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var u=o[i];if("string"!==typeof a[u])throw new Error("Serialization of non-string loss is not supported.");e[u]=Xn(a[u])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[Xn(Ti(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return Xn(Ti(e))}));var e={};for(var t in this.metrics)e[t]=Xn(Ti(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=ui(Ui(e.optimizer_config));if("string"===typeof e.loss)t=Yn(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return Yn(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=Yn(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return Yn(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=Yn(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,i,o,u,s,c,l,f,d;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=a.io.getSaveHandlers(t)).length){e.next=6;break}throw new Bn("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Bn("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Bn("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,a.io.encodeWeights(this.getNamedWeights(n));case 13:if(i=e.sent,!1,null,o=this.toJSON(null,false),u={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(Vi),convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return u.trainingConfig=this.getTrainingConfig(),c="optimizer",e.t0=a.io,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=c,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,f=l.data,d=l.specs,(s=i.specs).push.apply(s,Object(Tn.a)(d)),i.data=a.io.concatenateArrayBuffers([i.data,f]);case 34:return null!=this.userDefinedMetadata&&(!0,Mi(this.userDefinedMetadata,this.name,true),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=i.data,u.weightSpecs=i.specs,e.abrupt("return",t.save(u));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){Mi(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=ja(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],er(r.inputs).length!==r.inputs.length)throw new Bn("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));er(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Object(Nn.a)(r.outputs);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.sourceLayer,c=u.nodeIndex,l=u.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(we){o.e(we)}finally{o.f()}var f,d=Object(Nn.a)(r.inputs);try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.sourceLayer,v=h.nodeIndex,m=h.tensorIndex;Vn(0===v,"input layer has >1 nodes"),Vn(0===m,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(we){d.e(we)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var b=r.inputLayers[g];if(!(b instanceof Va))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(b.getClassName(),"."));r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}var y,x=Object(Nn.a)(r.outputLayers);try{for(x.s();!(y=x.n()).done;){var _=y.value;r.outputNames.push(_.name)}}catch(we){x.e(we)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,k={},O={},S={},j={},E={},C=[],A=function e(t,a,i,o,u,s){null!=o&&null!=u&&null!=s||(o=t.sourceLayer,u=t.nodeIndex,s=t.tensorIndex);var c=o.inboundNodes[u];if(-1!==i.indexOf(c))throw new Ln("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,u)),o.id in E||(E[o.id]=Object.keys(E).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,f=0;f<l;f++){e(c.inputTensors[f],a,i,c.inboundLayers[f],c.nodeIndices[f],c.tensorIndices[f])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);C.push(c)}},T=[],N=[],M=Object(Nn.a)(r.outputs);try{for(M.s();!(w=M.n()).done;){A(w.value,T,N)}}catch(we){M.e(we)}finally{M.f()}var D,I=C.slice().reverse(),F=Object(Nn.a)(I);try{for(F.s();!(D=F.n()).done;){var R=D.value;O[R.id]=R,R.id in k||(k[R.id]=0);var P=k[R.id],L=null==S[R.outboundLayer.id]?0:S[R.outboundLayer.id];P=Math.max(P,L),S[R.outboundLayer.id]=P,j[R.outboundLayer.id]=R.outboundLayer,k[R.id]=P;for(var B=0;B<R.inboundLayers.length;B++){var z=R.inboundLayers[B],U=R.nodeIndices[B],W=z.inboundNodes[U],V=null==k[W.id]?0:k[W.id];k[W.id]=Math.max(P+1,V),O[W.id]=W}}}catch(we){F.e(we)}finally{F.f()}var G={};for(var q in k){var H=k[q];H in G||(G[H]=[]),G[H].push(O[q])}var X={};for(var Y in S){var K=S[Y];K in X||(X[K]=[]),X[K].push(j[Y])}var $=Object.keys(X).map((function(e){return parseInt(e,10)})).sort(Qn);r.layers=[];var Z,J=Object(Nn.a)($);try{for(J.s();!(Z=J.n()).done;){var Q=X[Z.value];Q.sort((function(e,t){var n=E[e.id],r=E[t.id];return n<r?-1:n>r?1:0}));var ee,te=Object(Nn.a)(Q);try{for(te.s();!(ee=te.n()).done;){var ne=ee.value;ne instanceof n&&r.internalContainerRefs.push(ne),r.layers.push(ne)}}catch(we){te.e(we)}finally{te.f()}}}catch(we){J.e(we)}finally{J.f()}r.layersByDepth=X,$=Object.keys(G).map((function(e){return parseInt(e,10)})).sort(Qn);var re,ae=r.inputs.slice(),ie=[],oe=Object(Nn.a)($);try{for(oe.s();!(re=oe.n()).done;){var ue,se=re.value,ce=Object(Nn.a)(G[se]);try{for(ce.s();!(ue=ce.n()).done;){var le=ue.value,fe=le.outboundLayer;if(null!=fe){var de,he=Object(Nn.a)(le.inputTensors);try{for(he.s();!(de=he.n()).done;){var pe=de.value;if(-1===ae.indexOf(pe))throw new Ln("Graph disconnected: cannot obtain value for tensor ".concat(pe)+' at layer "'.concat(fe.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ie))}}catch(we){he.e(we)}finally{he.f()}var ve,me=Object(Nn.a)(le.outputTensors);try{for(me.s();!(ve=me.n()).done;){var ge=ve.value;ae.push(ge)}}catch(we){me.e(we)}finally{me.f()}ie.push(fe.name)}}}catch(we){ce.e(we)}finally{ce.f()}}}catch(we){oe.e(we)}finally{oe.f()}r.nodesByDepth=G;var be,ye=r.layers.map((function(e){return e.name})),xe=Object(Nn.a)(ye);try{var _e=function(){var e=be.value,t=ye.filter((function(t){return t===e})).length;if(1!==t)throw new Ln('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ye))};for(xe.s();!(be=xe.n()).done;)_e()}catch(we){xe.e(we)}finally{xe.f()}return r.outboundNodes=[],r.inboundNodes=[],new Ba({outboundLayer:Object(Mn.a)(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return Object(jn.a)(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Object(Nn.a)(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(u){n.e(u)}finally{n.f()}var a,i=Object(Nn.a)(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(u){i.e(u)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new Bn("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(Nn.a)(this.layers);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,Object(Tn.a)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Object(Nn.a)(this.layers);try{for(i.s();!(t=i.n()).done;){var o,u=t.value,s=Object(Nn.a)(u.weights);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new Bn("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(g){s.e(g)}finally{s.f()}}}catch(g){i.e(g)}finally{i.f()}var l=[];for(var f in e){var d=f;if(null==r[f]){var h=f.split("/"),p=h.slice(0,-2).concat([h[h.length-1]]);d=p.join("/")}if(null!=r[d])l.push([r[d],e[f]]);else if(n)throw new Bn("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new Bn("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}Fa(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(Vi),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Wi(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){e=Hn(e);for(var r=new Gi,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return Xi(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r;return e=Hn(e),r=null==t?Wn(null,e.length):Hn(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Ca(e);if(t.length!==this.inputLayers.length)throw new Bn("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Qn);if(o.length>1){var u,s=Object(Nn.a)(o);try{for(s.s();!(u=s.n()).done;){var c,l=u.value,f=this.nodesByDepth[l],d=Object(Nn.a)(f);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var v=[],m=0;m<h.inboundLayers.length;m++){var g=h.inboundLayers[m],b=h.nodeIndices[m],y=h.tensorIndices[m],x=n["".concat(g.name,"_").concat(b,"_").concat(y)];v.push(x)}for(var _=Ca(p.computeOutputShape(qn(v))),w=p.inboundNodes.indexOf(h),k=0;k<_.length;k++){n["".concat(p.name,"_").concat(w,"_").concat(k)]=_[k]}}}}catch(D){d.e(D)}finally{d.f()}}}catch(D){s.e(D)}finally{s.f()}}for(var O=[],S=[],j=0;j<this.outputLayers.length;j++){var E=this.outputLayers[j],C=this.outputLayersNodeIndices[j],A=this.outputLayersTensorIndices[j],T="".concat(E.name,"_").concat(C,"_").concat(A);S.push(T)}for(var N=0;N<S.length;N++){var M=S[N];Vn(M in n),O.push(n[M])}return qn(O)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=Wn(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],u=t[r];n[a.id]=[o,u]}var s,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Qn),l=Object(Nn.a)(c);try{for(l.s();!(s=l.n()).done;){var f,d=s.value,h=this.nodesByDepth[d],p=Object(Nn.a)(h);try{for(p.s();!(f=p.n()).done;){var v,m=f.value,g=m.outboundLayer,b=m.inputTensors,y=m.outputTensors,x=new Array,_=Object(Nn.a)(b);try{for(_.s();!(v=_.n()).done;){var w=v.value;w.id in n&&x.push(n[w.id])}}catch(G){_.e(G)}finally{_.f()}if(x.length===b.length){var k={},O=void 0,S=void 0,j=void 0,E=void 0;if(null!=m.callArgs&&(k=m.callArgs),1===x.length){var C=Object(i.a)(x[0],2),A=C[0],T=C[1];null==k.mask&&(k.mask=T),j=Hn(g.call(A,k)),E=Hn(g.computeMask(A,T)),O=[A],S=[T]}else O=x.map((function(e){return e[0]})),S=x.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),j=Hn(g.call(O,k)),E=Hn(g.computeMask(O,S));if(g.activityRegularizer)throw new zn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var N=0;N<y.length;++N){var M=y[N],D=j[N],I=E[N];n[M.id]=[D,I]}}}}catch(G){p.e(G)}finally{p.f()}}}catch(G){l.e(G)}finally{l.f()}var F,R=[],P=[],L=[],B=Object(Nn.a)(this.outputs);try{for(B.s();!(F=B.n()).done;){var z=F.value;Vn(z.id in n,"Could not compute output ".concat(z.name," : ").concat(z.id));var U=Object(i.a)(n[z.id],2),W=U[0],V=U[1];L.push(W.shape),R.push(W),P.push(V)}}catch(G){B.e(G)}finally{B.f()}return[R,P,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Object(Nn.a)(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var u=0;u<o.inboundNodes.length;u++){var s=n.nodeKey(o,u);this.containerNodes.has(s)&&(a[s]=t,t+=1)}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new Bn("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new Bn("Provide either a layer name or layer index");var n,r=Object(Nn.a)(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new Bn("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Object(a.tidy)((function(){var t,r=[],a=Object(Nn.a)(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var u=n.nodeKey(i,o);e.containerNodes.has(u)&&r.push.apply(r,Object(Tn.a)(i.calculateLosses()))}}catch(s){a.e(s)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Object(Nn.a)(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,u=o.getClassName(),s=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var f=o.inboundNodes[l],d=n.nodeKey(o,l),h={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch(F){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],g=f.nodeIndices[v],b=f.tensorIndices[v],y=r[n.nodeKey(m,g)];null==y&&(y=0),p.push([m.name,y,b,h])}c.push(p)}}}var x={};x.name=o.name,x.className=u,x.config=s,x.inboundNodes=c,a.push(x)}}catch(F){i.e(F)}finally{i.f()}t.layers=a;for(var _=[],w=0;w<this.inputLayers.length;w++){var k=this.inputLayers[w],O=this.inputLayersNodeIndices[w],S=n.nodeKey(k,O);if(this.containerNodes.has(S)){var j=r[S];null!==j&&void 0!==j||(j=0);var E=this.inputLayersTensorIndices[w];_.push([k.name,j,E])}}t.inputLayers=_;for(var C=[],A=0;A<this.outputLayers.length;A++){var T=this.outputLayers[A],N=this.outputLayersNodeIndices[A],M=n.nodeKey(T,N);if(this.containerNodes.has(M)){var D=r[M];null!==D&&void 0!==D||(D=0);var I=this.outputLayersTensorIndices[A];C.push([T.name,D,I])}}return t.outputLayers=C,t}},{key:"stateful",get:function(){if(this._stateful)throw new Bn("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Object(Nn.a)(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Object(a.tidy)((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],u=Object(Nn.a)(t);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s[0],l=s[1],f=s[2];if(n=null==s[3]?{}:s[3],!(c in r))return void i(e,t);var d=r[c];if(d.inboundNodes.length<=l)return void i(e,t);var h=d.inboundNodes[l];o.push(h.outputTensors[f])}}catch(p){u.e(p)}finally{u.f()}o.length>0&&e.apply(qn(o),n)}function u(e){var a=e.name,o=ui(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new Bn("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var s,c=t.name,l=t.layers,f=Object(Nn.a)(l);try{for(f.s();!(s=f.n()).done;){var d=s.value;u(d)}}catch(U){f.e(U)}finally{f.f()}for(;!tr(a);){var h,p=Object(Nn.a)(l);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var b,y=Object(Nn.a)(g);try{for(y.s();!(b=y.n()).done;){var x=b.value;o(m,x)}}catch(U){y.e(U)}finally{y.f()}}}}catch(U){p.e(U)}finally{p.f()}}var _,w=[],k=[],O=t.inputLayers,S=Object(Nn.a)(O);try{for(S.s();!(_=S.n()).done;){var j=_.value,E=j[0],C=j[1],A=j[2];Vn(E in r);var T=r[E],N=T.inboundNodes[C].outputTensors;w.push(N[A])}}catch(U){S.e(U)}finally{S.f()}var M,D=t.outputLayers,I=Object(Nn.a)(D);try{for(I.s();!(M=I.n()).done;){var F=M.value,R=F[0],P=F[1],L=F[2];Vn(R in r);var B=r[R],z=B.inboundNodes[P].outputTensors;k.push(z[L])}}catch(U){I.e(U)}finally{I.f()}return new e({inputs:w,outputs:k,name:c})}}]),n}(Ua));Ao.className="Model",a.serialization.registerClass(Ao);var To=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return n}(Ao);To.className="Functional",a.serialization.registerClass(To);var No=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:ja("sequential_"),null!=e.layers){var a,i=Object(Nn.a)(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(u){i.e(u)}finally{i.f()}}return r}return Object(jn.a)(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new Bn("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Ao;if(r){if(1!==(t=e).outputs.length)throw new Bn("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new Bn("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Bn("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=Ga({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new Bn("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Bn("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Wa(this.outputs[0])}this.inboundNodes=[],new Ba({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Wn(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Ta(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ao({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),Object(oi.a)(Object(Dn.a)(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),Object(oi.a)(Object(Dn.a)(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Ln("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ln("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){var r,a=arguments;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new Ln("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new Ln("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t,n){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new Bn("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new Bn("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Object(Nn.a)(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Bn("Legacy serialization format not supported yet.");r=t}else a.util.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,o=t;var u=new e(o);if(!(u instanceof n))throw new zn("Sequential.fromConfig called on non-Sequential input: ".concat(u));var s,c=Object(Nn.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=void 0,d=ui(l,f,i);i&&d.setFastWeightInitDuringBuild(!0),u.add(d)}}catch(h){c.e(h)}finally{c.f()}return u}}]),n}(Ao);function Mo(e){return new No(e)}function Do(e){return Ga(e)}No.className="Sequential",a.serialization.registerClass(No);var Io=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"getConfig",value:function(){return{}}}]),n}(a.serialization.Serializable),Fo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Jr(e,t)}}]),n}(Io);Fo.className="elu",a.serialization.registerClass(Fo);var Ro=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.selu(e)}}]),n}(Io);Ro.className="selu",a.serialization.registerClass(Ro);var Po=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.relu(e)}}]),n}(Io);Po.className="relu",a.serialization.registerClass(Po);var Lo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return Object(a.tidy)((function(){return a.minimum(6,a.relu(e))}))}}]),n}(Io);Lo.className="relu6",a.serialization.registerClass(Lo);var Bo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return e}}]),n}(Io);Bo.className="linear",a.serialization.registerClass(Bo);var zo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.sigmoid(e)}}]),n}(Io);zo.className="sigmoid",a.serialization.registerClass(zo);var Uo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return function(e){return Object(a.tidy)((function(){var t=a.add(.5,a.mul(.2,e));return a.clipByValue(t,0,1)}))}(e)}}]),n}(Io);Uo.className="hardSigmoid",a.serialization.registerClass(Uo);var Wo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.softplus(e)}}]),n}(Io);Wo.className="softplus",a.serialization.registerClass(Wo);var Vo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return function(e){return Object(a.tidy)((function(){return a.div(e,a.abs(e).add(1))}))}(e)}}]),n}(Io);Vo.className="softsign",a.serialization.registerClass(Vo);var Go=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){return a.tanh(e)}}]),n}(Io);Go.className="tanh",a.serialization.registerClass(Go);var qo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return a.softmax(e,t)}}]),n}(Io);qo.className="softmax",a.serialization.registerClass(qo);var Ho=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return a.logSoftmax(e,t)}}]),n}(Io);Ho.className="logSoftmax",a.serialization.registerClass(Ho);var Xo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(a.tidy)((function(){return a.sigmoid(e.mul(t)).mul(e)}))}}]),n}(Io);function Yo(e){return e.getClassName()}function Ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function $o(e){if(null==e){var t={className:"linear",config:{}};return Ko(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},Ko(n)}return e instanceof Io?e:Ko(e)}function Zo(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}Xo.className="swish",a.serialization.registerClass(Xo);var Jo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return n}(a.serialization.Serializable),Qo=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this),Zo(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Object(jn.a)(n,[{key:"apply",value:function(e){var t=this;return Object(a.tidy)((function(){var n=Object(a.zeros)([1]);return t.hasL1&&(n=Object(a.add)(n,Object(a.sum)(a.mul(t.l1,Object(a.abs)(e))))),t.hasL2&&(n=Object(a.add)(n,Object(a.sum)(a.mul(t.l2,Kr(e))))),n.asScalar()}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(Jo);Qo.className="L1L2",a.serialization.registerClass(Qo);var eu={l1l2:"L1L2"};function tu(e){return $n(e)}function nu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jn(e,a.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function ru(e){return null==e?null:"string"===typeof e?nu({className:e in eu?eu[e]:e,config:{}}):e instanceof Jo?e:nu(e)}var au=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Object(jn.a)(n,[{key:"call",value:function(e,t){e=Aa(e);var n=Object(a.relu)(e);return null!=this.maxValue&&(n=Object(a.clipByValue)(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);au.className="ReLU",a.serialization.registerClass(au);var iu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=Aa(e);return Object(a.leakyRelu)(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);iu.className="LeakyReLU",a.serialization.registerClass(iu);var ou=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=wa(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=ru(e.alphaRegularizer),r.alphaConstraint=mr(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Bn("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return Object(jn.a)(n,[{key:"build",value:function(e){var t=(e=Ta(e)).slice(1);if(null!=this.sharedAxes){var n,r=Object(Nn.a)(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new Ra({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Aa(e),Object(a.prelu)(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:_a(this.alphaInitializer),alphaRegularizer:tu(this.alphaRegularizer),alphaConstraint:pr(this.alphaConstraint),sharedAxes:this.sharedAxes},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);ou.className="PReLU",a.serialization.registerClass(ou);var uu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new zn("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=Aa(e);return Object(a.elu)(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);uu.className="ELU",a.serialization.registerClass(uu);var su=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=Aa(e);return n.mul(Pr(n.greater(this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);su.className="ThresholdedReLU",a.serialization.registerClass(su);var cu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new qo).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=Aa(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);cu.className="Softmax",a.serialization.registerClass(cu);var lu=n(19);function fu(e,t,n){if("number"===typeof e)return Wn(e,t);if(e.length!==t)throw new Bn("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new Bn("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function du(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function hu(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Fr([n-t,0]);else{if("same"!==r)throw new Bn("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function pu(e,t){return Object(a.tidy)((function(){return kr(t),"channelsFirst"===t?a.transpose(e,[0,2,3,1]):e}))}function vu(e,t){return Object(a.tidy)((function(){return kr(t),"channelsFirst"===t?a.transpose(e,[0,2,3,4,1]):e}))}function mu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),3!==e.shape.length)throw new Bn("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new Bn("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new Bn("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===o&&(e=a.transpose(e,[0,2,1])),"causal"===i)throw new zn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=a.conv1d(e,t,r,"same"===i?"same":"valid","NWC",u);return null!=n&&(s=Zr(s,n)),s}))}function gu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),3!==e.rank&&4!==e.rank)throw new Bn("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new Bn("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var c=pu(e,o);if("causal"===i)throw new zn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=a.fused.conv2d({x:c,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:u,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(c=a.transpose(c,[0,3,1,2])),c}))}function bu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;return Object(a.tidy)((function(){if(null==o&&(o="channelsLast"),kr(o),4!==e.rank&&5!==e.rank)throw new Bn("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new Bn("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=vu(e,o);if("causal"===i)throw new zn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=a.conv3d(s,t,r,"same"===i?"same":"valid","NDHWC",u),null!=n&&(s=Zr(s,n)),"channelsFirst"===o&&(s=a.transpose(s,[0,4,1,2,3])),s}))}var yu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;if(Object(Sn.a)(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,ar(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new zn("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=fu(r.kernelSize,e,"kernelSize"),a.strides=fu(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Or(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,kr(a.dataFormat),a.activation=$o(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=wa(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=mr(r.biasConstraint),a.biasRegularizer=ru(r.biasRegularizer),a.activityRegularizer=ru(r.activityRegularizer),a.dilationRate=fu(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new Bn("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new Bn("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new Bn("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return Object(jn.a)(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Yo(this.activation),useBias:this.useBias,biasInitializer:_a(this.biasInitializer),biasRegularizer:tu(this.biasRegularizer),activityRegularizer:tu(this.activityRegularizer),biasConstraint:pr(this.biasConstraint)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(Vn("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,3))throw new Bn("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Ua),xu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;return Object(Sn.a)(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,ar(a.filters,"filters"),a.kernelInitializer=wa(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=mr(r.kernelConstraint),a.kernelRegularizer=ru(r.kernelRegularizer),a}return Object(jn.a)(n,[{key:"build",value:function(e){e=Ta(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Bn("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:Object(lu.a)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t;e=Aa(e);var r=null==n.bias?null:n.bias.read(),a=or(n.activation.getClassName());if(null!=a&&2===n.rank)t=gu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=mu(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=gu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new zn("convolutions greater than 3D are not implemented yet.");t=bu(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Ta(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=du(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:_a(this.kernelInitializer),kernelRegularizer:tu(this.kernelRegularizer),kernelConstraint:pr(this.kernelConstraint)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Bn("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}(yu),_u=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Object(jn.a)(n,[{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,2))throw new Bn("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(xu);_u.className="Conv2D",a.serialization.registerClass(_u);var wu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Object(jn.a)(n,[{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Bn("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(xu);wu.className="Conv3D",a.serialization.registerClass(wu);var ku=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,e)).inputSpec=[new Ra({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new Bn("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Object(jn.a)(n,[{key:"build",value:function(e){if(4!==(e=Ta(e)).length)throw new Bn("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Bn("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ra({ndim:4,axes:Object(lu.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){var t=Aa(e);if(4!==t.shape.length)throw new Bn("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,i,o=t.shape,u=o[0];"channelsFirst"===n.dataFormat?(r=2,i=3):(r=1,i=2);var s=o[r],c=o[i],l=n.kernelSize[0],f=n.kernelSize[1],d=n.strides[0],h=n.strides[1],p=[u,hu(s,d,l,n.padding),hu(c,h,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=a.transpose(t,[0,2,3,1]));var v=a.conv2dTranspose(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(v=a.transpose(v,[0,3,1,2])),null!=n.bias&&(v=Zr(v,n.bias.read(),n.dataFormat)),null!=n.activation&&(v=n.activation.apply(v)),v}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Ta(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],u=this.strides[0],s=this.strides[1];return a[t]=this.filters,a[n]=hu(a[n],u,i,this.padding),a[r]=hu(a[r],s,o,this.padding),a}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(_u);ku.className="Conv2DTranspose",a.serialization.registerClass(ku);var Ou=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e,r){var a;if(Object(Sn.a)(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new Bn("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new Bn("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new Bn("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=wa(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=ru(r.depthwiseRegularizer),a.depthwiseConstraint=mr(r.depthwiseConstraint),a.pointwiseInitializer=wa(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=ru(r.pointwiseRegularizer),a.pointwiseConstraint=mr(r.pointwiseConstraint),a}return Object(jn.a)(n,[{key:"build",value:function(e){if((e=Ta(e)).length<this.rank+2)throw new Bn("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Bn("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Ra({ndim:this.rank+2,axes:Object(lu.a)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t;if(e=Aa(e),1===n.rank)throw new zn("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=a.transpose(e,[0,2,3,1])),t=a.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=Zr(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=a.transpose(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=_a(this.depthwiseInitializer),e.pointwiseInitializer=_a(this.pointwiseInitializer),e.depthwiseRegularizer=tu(this.depthwiseRegularizer),e.pointwiseRegularizer=tu(this.pointwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseConstraint),e.pointwiseConstraint=pr(this.pointwiseConstraint),e}}]),n}(xu);Ou.className="SeparableConv";var Su=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,2,e)}return n}(Ou);Su.className="SeparableConv2D",a.serialization.registerClass(Su);var ju=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Object(jn.a)(n,[{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!rr(e.kernelSize,"number",1,1))throw new Bn("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(xu);ju.className="Conv1D",a.serialization.registerClass(ju);var Eu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e=Aa(e),"channelsLast"===n.dataFormat){var t=Wr(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Wr(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Wr(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Wr(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Eu.className="Cropping2D",a.serialization.registerClass(Eu);var Cu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;return Object(Sn.a)(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,nr(br,"InterpolationFormat",a),r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){var t=Aa(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=a.transpose(t,[0,2,3,1]);var i=n.size[0]*r[2],o=n.size[1]*r[3],u="nearest"===n.interpolation?t.resizeNearestNeighbor([i,o]):t.resizeBilinear([i,o]);return a.transpose(u,[0,3,1,2])}var s=n.size[0]*r[1],c=n.size[1]*r[2];return"nearest"===n.interpolation?t.resizeNearestNeighbor([s,c]):t.resizeBilinear([s,c])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Cu.className="UpSampling2D",a.serialization.registerClass(Cu);var Au=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=wa(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=mr(e.depthwiseConstraint),r.depthwiseRegularizer=ru(e.depthwiseRegularizer),r}return Object(jn.a)(n,[{key:"build",value:function(e){if((e=Ta(e)).length<4)throw new Bn("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Bn("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return Object(a.tidy)((function(){null==i&&(i="channelsLast"),kr(i);var u=pu(e,i);if(4!==e.rank)throw new Bn("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new Bn("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return u=a.depthwiseConv2d(u,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(u=a.transpose(u,[0,3,1,2])),u}))}(e=Aa(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=Zr(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Ta(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=du(t,this.kernelSize[0],this.padding,this.strides[0]),i=du(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=_a(this.depthwiseInitializer),e.depthwiseRegularizer=tu(this.depthwiseRegularizer),e.depthwiseConstraint=pr(this.depthwiseRegularizer),e}}]),n}(yu);function Tu(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Bn("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Nu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return a.tidy((function(){var c=t.shape.length;if(c<3)throw new Bn("Input should be at least 3D, but is ".concat(c,"D."));var l=[1,0].concat(Rr(2,c));if(t=a.transpose(t,l),null!=o)throw new zn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=i.asType("bool").asType("float32")).rank===c-1&&(i=a.expandDims(i,-1)),i=a.transpose(i,l)),r&&(t=a.reverse(t,0),null!=i&&(i=a.reverse(i,0)));var f,d,h=[],p=n,v=t.shape[0],m=a.unstack(t);null!=i&&(d=a.unstack(i));for(var g,b=function(t){var n=m[t],r=a.tidy((function(){return e(n,p)}));if(null==i)f=r[0],p=r[1];else{var o=a.tidy((function(){var e=d[t],n=a.onesLike(e).sub(e);return{output:r[0].mul(e).add(p[0].mul(n)),newStates:p.map((function(t,a){return r[1][a].mul(e).add(t.mul(n))}))}}));f=o.output,p=o.newStates}s&&h.push(f)},y=0;y<v;++y)b(y);if(s){g=a.stack(h,1)}return[f,g,p]}))}Au.className="DepthwiseConv2D",a.serialization.registerClass(Au);var Mu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,a;if(Object(Sn.a)(this,n),r=t.call(this,e),null==e.cell)throw new Bn("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new zu({cells:e.cell}):e.cell).stateSize)throw new Bn("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Ra({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Object(jn.a)(n,[{key:"getStates",value:function(){return null==this.states_?Rr(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Ea(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Object(Nn.a)(t);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push([e[0],u])}}catch(s){o.e(s)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return a.tidy((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new zn("Constants support is not implemented in RNN yet.");Ea(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Ra({shape:[t,null].concat(Object(Tn.a)(n))});var r,i=[e[0]].concat(e.slice(2));if(this.cell.build(i),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!a.util.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new Bn("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new Ra({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(a.tidy)((function(){if(!t.stateful)throw new Pn("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new Bn("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return a.zeros([r,e])})):t.states_=[a.zeros([r,t.cell.stateSize])];else if(null==e)a.dispose(t.states_),null!=t.keptStates&&(a.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return a.zeros([r,e])})):t.states_[0]=a.zeros([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Bn("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):a.dispose(t.states_);for(var i=0;i<t.states_.length;++i){var o=e[i],u=Array.isArray(t.cell.stateSize)?t.cell.stateSize[i]:t.cell.stateSize,s=[r,u];if(!a.util.arraysEqual(o.shape,s))throw new Bn("State ".concat(i," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(o.shape));t.states_[i]=o}}t.states_=t.states_.map((function(e){return a.keep(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Tu(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],u=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var s,c=Object(Nn.a)(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;this.stateSpec.push(new Ra({shape:l.shape}))}}catch(v){c.e(v)}finally{c.f()}u=u.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof Pa){var f=[e].concat(o),d=this.inputSpec.concat(u),h=this.inputSpec;this.inputSpec=d;var p=Object(oi.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=h,p}return Object(oi.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=Aa(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new Bn("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var u={training:a},s=Nu((function(e,t){var r=n.cell.call([e].concat(t),u);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=s[0],l=s[1],f=s[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?l:c;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return Object(a.tidy)((function(){var n=a.zeros(e.shape);return n=Lr(n=a.sum(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?qr(n,[1,e]):n})):t.cell.stateSize>1?[qr(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(oi.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=ui(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(Ua);Mu.className="RNN",a.serialization.registerClass(Mu);var Du=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return n}(Ua),Iu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,ar(r.units,"units"),r.activation=$o(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ru(e.kernelRegularizer),r.recurrentRegularizer=ru(e.recurrentRegularizer),r.biasRegularizer=ru(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Ir([1,Fr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ir([1,Fr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(jn.a)(n,[{key:"build",value:function(e){e=Ta(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==(e=e).length)throw new Bn("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var i,o=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Uu({ones:function(){return a.onesLike(e)},rate:n.dropout,training:o})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Uu({ones:function(){return a.onesLike(r)},rate:n.recurrentDropout,training:o}));var u=n.dropoutMask,s=n.recurrentDropoutMask;i=Xr(null!=u?a.mul(e,u):e,n.kernel.read()),null!=n.bias&&(i=Zr(i,n.bias.read())),null!=s&&(r=a.mul(r,s));var c=a.add(i,Xr(r,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]}))}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Yo(this.activation),useBias:this.useBias,kernelInitializer:_a(this.kernelInitializer),recurrentInitializer:_a(this.recurrentInitializer),biasInitializer:_a(this.biasInitializer),kernelRegularizer:tu(this.kernelRegularizer),recurrentRegularizer:tu(this.recurrentRegularizer),biasRegularizer:tu(this.biasRegularizer),activityRegularizer:tu(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(Du);Iu.className="SimpleRNNCell",a.serialization.registerClass(Iu);var Fu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),e.cell=new Iu(e),t.call(this,e)}return Object(jn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(oi.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Mu);Fu.className="SimpleRNN",a.serialization.registerClass(Fu);var Ru=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Bn("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,ar(r.units,"units"),r.activation=$o(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=$o(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=ru(e.kernelRegularizer),r.recurrentRegularizer=ru(e.recurrentRegularizer),r.biasRegularizer=ru(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Ir([1,Fr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ir([1,Fr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(jn.a)(n,[{key:"build",value:function(e){var t=(e=Ta(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(2!==(e=e).length)throw new Bn("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,o=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Uu({ones:function(){return a.onesLike(e)},rate:n.dropout,training:r,count:3})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Uu({ones:function(){return a.onesLike(o)},rate:n.recurrentDropout,training:r,count:3}));var u,s,c,l=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=a.mul(e,l[0]));var d=Xr(e,n.kernel.read());n.useBias&&(d=Zr(d,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(o=a.mul(o,f[0]));var h=n.recurrentKernel.read(),p=a.split(h,[2*n.units,n.units],h.rank-1),v=Object(i.a)(p,2),m=v[0],g=v[1],b=Xr(o,m),y=a.split(d,3,d.rank-1),x=Object(i.a)(y,3),_=x[0],w=x[1],k=x[2],O=a.split(b,2,b.rank-1),S=Object(i.a)(O,2),j=S[0],E=S[1];u=n.recurrentActivation.apply(a.add(_,j)),s=n.recurrentActivation.apply(a.add(w,E));var C=Xr(a.mul(s,o),g);c=n.activation.apply(a.add(k,C));var A=a.add(a.mul(u,o),a.mul(a.add(1,a.neg(u)),c));return[A,A]}))}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Yo(this.activation),recurrentActivation:Yo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:_a(this.kernelInitializer),recurrentInitializer:_a(this.recurrentInitializer),biasInitializer:_a(this.biasInitializer),kernelRegularizer:tu(this.kernelRegularizer),recurrentRegularizer:tu(this.recurrentRegularizer),biasRegularizer:tu(this.biasRegularizer),activityRegularizer:tu(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(Du);Ru.className="GRUCell",a.serialization.registerClass(Ru);var Pu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Ru(e),t.call(this,e)}return Object(jn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(oi.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Mu);Pu.className="GRU",a.serialization.registerClass(Pu);var Lu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,ar(r.units,"units"),r.activation=$o(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=$o(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=wa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=wa(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=wa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=ru(e.kernelRegularizer),r.recurrentRegularizer=ru(e.recurrentRegularizer),r.biasRegularizer=ru(e.biasRegularizer),r.kernelConstraint=mr(e.kernelConstraint),r.recurrentConstraint=mr(e.recurrentConstraint),r.biasConstraint=mr(e.biasConstraint),r.dropout=Ir([1,Fr([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=Ir([1,Fr([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Object(jn.a)(n,[{key:"build",value:function(e){var t,n,r=(e=Ta(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new((t=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new ia).apply([i]),o=a.apply([2*i]);return Gr(Gr(n,r),o)}}]),n}(ra)).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new Bn("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var o=e[1],u=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Uu({ones:function(){return a.onesLike(e)},rate:n.dropout,training:r,count:4})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Uu({ones:function(){return a.onesLike(o)},rate:n.recurrentDropout,training:r,count:4}));var s,c,l,f,d=n.dropoutMask,h=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=a.mul(e,d[0]));var p=Xr(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(o=a.mul(o,h[0])),p=a.add(p,Xr(o,n.recurrentKernel.read())),n.useBias&&(p=Zr(p,n.bias.read()));var v=a.split(p,4,p.rank-1),m=Object(i.a)(v,4),g=m[0],b=m[1],y=m[2],x=m[3];s=n.recurrentActivation.apply(g),c=n.recurrentActivation.apply(b),l=a.add(a.mul(c,u),a.mul(s,n.activation.apply(y))),f=n.recurrentActivation.apply(x);var _=a.mul(f,n.activation.apply(l));return[_,_,l]}))}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:Yo(this.activation),recurrentActivation:Yo(this.recurrentActivation),useBias:this.useBias,kernelInitializer:_a(this.kernelInitializer),recurrentInitializer:_a(this.recurrentInitializer),biasInitializer:_a(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:tu(this.kernelRegularizer),recurrentRegularizer:tu(this.recurrentRegularizer),biasRegularizer:tu(this.biasRegularizer),activityRegularizer:tu(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),recurrentConstraint:pr(this.recurrentConstraint),biasConstraint:pr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(Du);Lu.className="LSTMCell",a.serialization.registerClass(Lu);var Bu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Lu(e),t.call(this,e)}return Object(jn.a)(n,[{key:"call",value:function(e,t){var r=this;return Object(a.tidy)((function(){null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(oi.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Mu);Bu.className="LSTM",a.serialization.registerClass(Bu);var zu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).cells=e.cells,r}return Object(jn.a)(n,[{key:"stateSize",get:function(){var e,t=[],n=Object(Nn.a)(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,Object(Tn.a)(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r,a=(e=e).slice(1),i=[],o=Object(Nn.a)(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var u=r.value;Array.isArray(u.stateSize)?i.push(a.splice(0,u.stateSize.length)):i.push(a.splice(0,1))}}catch(m){o.e(m)}finally{o.f()}i.reverse();for(var s,c=[],l=0;l<n.cells.length;++l){var f=n.cells[l];a=i[l],s=0===l?[e[0]].concat(a):[s[0]].concat(a),s=f.call(s,t),c.push(s.slice(1))}a=[];var d,h=Object(Nn.a)(c.slice().reverse());try{for(h.s();!(d=h.n()).done;){var p,v=d.value;(p=a).push.apply(p,Object(Tn.a)(v))}}catch(m){h.e(m)}finally{h.f()}return[s[0]].concat(a)}))}},{key:"build",value:function(e){var t;Ea(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){Er("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.nonTrainableWeights))}}catch(s){n.e(s)}finally{n.f()}if(!this.trainable){var a,i=[],o=Object(Nn.a)(this.cells);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.push.apply(i,Object(Tn.a)(u.trainableWeights))}}catch(s){o.e(s)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Object(Nn.a)(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(Tn.a)(r.weights))}}catch(a){n.e(a)}finally{n.f()}return Ia(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Object(Nn.a)(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),u=0;u<a.weights.length;++u)n.push([a.weights[u],o[u]])}catch(s){r.e(s)}finally{r.f()}Fa(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Object(Nn.a)(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(ui(o,r))}}catch(u){i.e(u)}finally{i.f()}return new e({cells:a})}}]),n}(Du);function Uu(e){var t=e.ones,n=e.rate,r=e.training,i=void 0!==r&&r,o=e.count,u=void 0===o?1:o,s=function(){return Qr(t(),n)},c=function(){return ea(s,t,i)};return!u||u<=1?a.keep(c().clone()):Array(u).fill(void 0).map(c).map((function(e){return a.keep(e.clone())}))}zu.className="StackedRNNCells",a.serialization.registerClass(zu);var Wu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Vu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),e.unroll)throw new zn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new zn("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Ra({ndim:5})],r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var r=this;return a.tidy((function(){if(null!=r.cell.dropoutMask&&(a.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(a.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new Bn("ConvRNN2D cell does not support constants");var i=null==t?null:t.mask,o=null==t?null:t.training,u=null==t?null:t.initialState;return Object(oi.a)(Object(Dn.a)(n.prototype),"call",r).call(r,e,{mask:i,training:o,initialState:u})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Object(Tn.a)(t.slice(2)))),this.returnState&&(t=[t].concat(Object(Tn.a)(Array(2).fill([e[0]].concat(Object(Tn.a)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return a.tidy((function(){var n=t.cell.stateSize,r=e.shape,i=t.computeSingleOutputShape(r),o=[i[0]].concat(Object(Tn.a)(i.slice(2))),u=a.zeros(o);return Array.isArray(n)?Array(n.length).fill(u):[u]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.tidy((function(){if(!t.stateful)throw new Pn("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,i=t.computeSingleOutputShape(r),o=[i[0]].concat(Object(Tn.a)(i.slice(2)));if(null==r[0])throw new Bn("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return a.zeros(o)})):t.states_=[a.zeros(o)];else if(null==e)a.dispose(t.states_),null!=t.keptStates&&(a.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return a.zeros(o)})):t.states_[0]=a.zeros(o);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new Bn("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):a.dispose(t.states_);for(var u=0;u<t.states_.length;++u){var s=e[u],c=o;if(!a.util.arraysEqual(s.shape,c))throw new Bn("State ".concat(u," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(c,", received shape=").concat(s.shape));t.states_[u]=s}}t.states_=t.states_.map((function(e){return a.keep(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,u=t.dilationRate,s="channelsFirst"===n,c=e[s?3:2],l=e[s?4:3],f=du(c,a[0],i,o[0],u[0]),d=du(l,a[1],i,o[1],u[1]);return[].concat(Object(Tn.a)(e.slice(0,2)),Object(Tn.a)(s?[r,f,d]:[f,d,r]))}}]),n}(Mu);Vu.className="ConvRNN2D";var Gu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(Sn.a)(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,u=e.padding,s=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,ar(r.filters,"filters"),r.kernelSize=fu(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return ar(e,"kernelSize")})),r.strides=fu(o||1,2,"strides"),r.strides.forEach((function(e){return ar(e,"strides")})),r.padding=u||"valid",Or(r.padding),r.dataFormat=s||"channelsLast",kr(r.dataFormat),r.dilationRate=fu(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return ar(e,"dilationRate")})),r}return Object(jn.a)(n,[{key:"build",value:function(e){var t;e=Ta(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Bn("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var u;if(this.unitForgetBias){var s=this.biasInitializer,c=this.filters;u=new((t=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"apply",value:function(e,t){return Vr([s.apply([c]),a.ones([c]),s.apply([2*c])])}}]),n}(ra)).className="CustomInit",t)}else u=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,u,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return a.tidy((function(){if(3!==e.length)throw new Bn("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,o=e[0],u=e[1],s=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Uu({ones:function(){return a.onesLike(o)},rate:n.dropout,training:r,count:4}));var c=n.dropoutMask,l=function(e,t,n){return t&&t[n]?a.mul(t[n],e):e},f=l(o,c,0),d=l(o,c,1),h=l(o,c,2),p=l(o,c,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Uu({ones:function(){return a.onesLike(u)},rate:n.recurrentDropout,training:r,count:4}));var v=n.recurrentDropoutMask,m=l(u,v,0),g=l(u,v,1),b=l(u,v,2),y=l(u,v,3),x=a.split(n.kernel.read(),4,3),_=Object(i.a)(x,4),w=_[0],k=_[1],O=_[2],S=_[3],j=n.useBias?a.split(n.bias.read(),4):[null,null,null,null],E=Object(i.a)(j,4),C=E[0],A=E[1],T=E[2],N=E[3];f=n.inputConv(f,w,C,n.padding),d=n.inputConv(d,k,A,n.padding),h=n.inputConv(h,O,T,n.padding),p=n.inputConv(p,S,N,n.padding);var M=a.split(n.recurrentKernel.read(),4,3),D=Object(i.a)(M,4),I=D[0],F=D[1],R=D[2],P=D[3];m=n.recurrentConv(m,I),g=n.recurrentConv(g,F),b=n.recurrentConv(b,R),y=n.recurrentConv(y,P);var L=n.recurrentActivation.apply(a.add(f,m)),B=n.recurrentActivation.apply(a.add(d,g)),z=a.add(a.mul(B,s),a.mul(L,n.activation.apply(a.add(h,b)))),U=a.mul(n.recurrentActivation.apply(a.add(p,y)),n.activation.apply(z));return[U,U,z]}))}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t=(e.units,Wu(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var i=a.conv2d(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?Zr(i,n,this.dataFormat):i}},{key:"recurrentConv",value:function(e,t){return a.conv2d(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(Lu);Gu.className="ConvLSTM2DCell",a.serialization.registerClass(Gu);var qu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){Object(Sn.a)(this,n);var r=new Gu(e);return t.call(this,Object.assign({},e,{cell:r}))}return Object(jn.a)(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Vu);qu.className="ConvLSTM2D",a.serialization.registerClass(qu);var Hu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Object(jn.a)(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return ea((function(){return Qr(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return Object(oi.a)(Object(Dn.a)(n.prototype),"dispose",this).call(this)}}]),n}(Ua);Hu.className="Dropout",a.serialization.registerClass(Hu);var Xu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Object(jn.a)(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(Hu);Xu.className="SpatialDropout1D",a.serialization.registerClass(Xu);var Yu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,ar(r.units,"units"),r.activation=$o(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=wa(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=wa(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=mr(e.kernelConstraint),r.biasConstraint=mr(e.biasConstraint),r.kernelRegularizer=ru(e.kernelRegularizer),r.biasRegularizer=ru(e.biasRegularizer),r.activityRegularizer=ru(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return Object(jn.a)(n,[{key:"build",value:function(e){var t=(e=Ta(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:Object(lu.a)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Ta(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r,a=Aa(e),i=or(n.activation.getClassName());return null!=i?r=Xr(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=Xr(a,n.kernel.read()),null!=n.bias&&(r=Zr(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:Yo(this.activation),useBias:this.useBias,kernelInitializer:_a(this.kernelInitializer),biasInitializer:_a(this.biasInitializer),kernelRegularizer:tu(this.kernelRegularizer),biasRegularizer:tu(this.biasRegularizer),activityRegularizer:tu(this.activityRegularizer),kernelConstraint:pr(this.kernelConstraint),biasConstraint:pr(this.biasConstraint)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Yu.className="Dense",a.serialization.registerClass(Yu);var Ku=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){e=Ta(e);var t,n=Object(Nn.a)(e.slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new Bn('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(r){n.e(r)}finally{n.f()}return[e[0],Mr(e,1)]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=r.transpose(a)}return function(e){if(e.rank<=1)throw new Bn("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],Mr(e.shape,1)];return e.reshape(t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Ku.className="Flatten",a.serialization.registerClass(Ku);var $u=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=$o(e.activation),r}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:Yo(this.activation)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);$u.className="Activation",a.serialization.registerClass($u);var Zu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return e=Aa(e),t=e,r=n.n,Object(a.tidy)((function(){if(2!==t.shape.length)throw new Bn("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return qr(Lr(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Zu.className="RepeatVector",a.serialization.registerClass(Zu);var Ju=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(Sn.a)(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Object(jn.a)(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var u=r[o];if(this.isUnknown(u)){if(null!==i)throw new Bn("Can only specifiy one unknown dimension.");i=o}else a*=u}var s=Mr(e);if(null!==i){if(0===a||s%a!==0)throw new Bn(n);r[i]=s/a}else if(s!==a)throw new Bn(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Ju.className="Reshape",a.serialization.registerClass(Ju);var Qu=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var i=Rr(1,e.dims.length+1);if(!a.util.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Ra({ndim:r.dims.length+1})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){var t=(e=Ta(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return Object(a.transpose)(Aa(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);Qu.className="Permute",a.serialization.registerClass(Qu);var es=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Aa(e);return Object(a.any)(Object(a.notEqual)(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e),i=Object(a.any)(Object(a.notEqual)(r,n.maskValue),-1,!0);return r.mul(i.asType(r.dtype))}))}}]),n}(Ua);es.className="Masking",a.serialization.registerClass(es);var ts=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(Hn(e.inputLength))}return r.inputDim=e.inputDim,ar(r.inputDim,"inputDim"),r.outputDim=e.outputDim,ar(r.outputDim,"outputDim"),r.embeddingsInitializer=wa(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=ru(e.embeddingsRegularizer),r.activityRegularizer=ru(e.activityRegularizer),r.embeddingsConstraint=mr(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return Object(jn.a)(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.maskZero?(e=Aa(e),Object(a.notEqual)(e,Object(a.zerosLike)(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Ta(e),null==this.inputLength)return[].concat(Object(Tn.a)(e),[this.outputDim]);var t=Hn(this.inputLength);if(t.length!==e.length-1)throw new Bn('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new Bn('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(Object(Tn.a)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);return"int32"!==r.dtype&&(r=Pr(r,"int32")),Yr(n.embeddings.read(),r.as1D()).reshape(Ta(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:_a(this.embeddingsInitializer),embeddingsRegularizer:tu(this.embeddingsRegularizer),activityRegularizer:tu(this.activityRegularizer),embeddingsConstraint:pr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);ts.className="Embedding",a.serialization.registerClass(ts);var ns=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){throw new zn}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new Bn("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ta(e)]),(e=e).length<2)throw new Bn("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(c){r.e(c)}finally{r.f()}if((n=er(n)).length>1)throw new Bn("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var u=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,u)}var s=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===er(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var i,o=Fr(r),u=Object(Nn.a)(e);try{for(u.s();!(i=u.n()).done;){for(var s=i.value,c=s.rank,l=0;l<o-c;++l)s=Lr(s,1);t.push(s)}}catch(E){u.e(E)}finally{u.f()}return n.mergeFunction(t)}var f,d=!1,h=Object(Nn.a)(e);try{for(h.s();!(f=h.n()).done;){var p=f.value,v=p.rank;if(null==v){var m=p.shape,g=m[0],b=m.slice(1).concat([g]),y=p.reshape([g].concat(Mr(m.slice(1))));y=(y=a.transpose(y,[1,0])).reshape(b),t.push(y),d=!0}else if(v>1){var x=Rr(1,v).concat([0]);t.push(a.transpose(p,x)),d=!0}else t.push(p)}}catch(E){h.e(E)}finally{h.f()}var _=n.mergeFunction(t),w=_.rank;if(d)if(null==w){var k=_.shape,O=k[k.length-1],S=[O].concat(k.slice(0,k.length-1));_=a.transpose(_.reshape([-1,O]),[1,0]).reshape(S)}else if(w>1){var j=[w-1].concat(Rr(0,w-1));_=a.transpose(_,j)}return _}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Object(Nn.a)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;null!=u&&null!==u[0]&&i.push(u[0])}}catch(s){o.e(s)}finally{o.f()}return t=1===(i=er(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return a.tidy((function(){if(null==t)return null;if(!Array.isArray(t))throw new Bn("`mask` should be an Array");if(!Array.isArray(e))throw new Bn("`inputs` should be an Array");if(t.length!==e.length)throw new Bn("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:a.expandDims(e,0)})))[0],r=1;r<t.length-1;++r)n=a.logicalAnd(n,t[r]);return n}))}}]),n}(Ua),rs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.add(t,e[n]);return t}))}}]),n}(ns);rs.className="Add",a.serialization.registerClass(rs);var as=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.mul(t,e[n]);return t}))}}]),n}(ns);as.className="Multiply",a.serialization.registerClass(as);var is=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=a.add(t,e[n]);return a.mul(1/e.length,t)}))}}]),n}(ns);is.className="Average",a.serialization.registerClass(is);var os=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=a.maximum(t,e[n]);return t}))}}]),n}(ns);os.className="Maximum",a.serialization.registerClass(os);var us=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"mergeFunction",value:function(e){return Object(a.tidy)((function(){for(var t=e[0],n=1;n<e.length;++n)t=a.minimum(t,e[n]);return t}))}}]),n}(ns);us.className="Minimum",a.serialization.registerClass(us);var ss=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(jn.a)(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Bn("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;var t,n=!0,r=Object(Nn.a)(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(d){r.e(d)}finally{r.f()}if(!n){for(var i=[],o=0;o<e.length;++o){var u=e[o].slice();u.splice(this.axis,1);var s,c=!1,l=Object(Nn.a)(i);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(a.util.arraysEqual(f,u)){c=!0;break}}}catch(d){l.e(d)}finally{l.f()}c||i.push(u)}if(i.length>1)throw new Bn("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Object(a.tidy)((function(){return Vr(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Bn("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Object(Nn.a)(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(u){i.e(u)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new Bn("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Bn("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Bn("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return a.tidy((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var i=[],o=0;o<e.length;++o)null==t[o]?i.push(a.onesLike(e[o]).asType("bool")):t[o].rank<e[o].rank?i.push(a.expandDims(t[o],-1)):i.push(t[o]);var u=a.concat(i,n.axis);return a.all(u,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ns);function cs(e,t){for(;e<0;)e+=t;return e}ss.className="Concatenate",a.serialization.registerClass(ss);var ls=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Object(jn.a)(n,[{key:"build",value:function(e){a.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new zn("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Bn("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new Bn("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return cs(t,e[n].shape.length)})):[cs(this.axes,n.shape.length),cs(this.axes,r.shape.length)],this.normalize&&(n=si(n,t[0]),r=si(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new zn("batchDot is not implemented for tensors of 4D or higher rank yet");if(a.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),a.util.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new zn("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);var o=n;return a.tidy((function(){var n,a;if(r>i){n=r-i;for(var u=[],s=0;s<n;++s)u.push(1);t=t.reshape(t.shape.concat(u))}else if(i>r){n=i-r;for(var c=[],l=0;l<n;++l)c.push(1);e=e.reshape(e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=o[0]===o[1]?e.mul(t).sum(o[0]):e.transpose([1,0]).mul(t).sum(o[1]);else{var f=o[0]!==e.shape.length-1,d=o[1]===t.shape.length-1;a=e.matMul(t,f,d)}if(n>0){for(var h,p=[],v=h=r>i?r+i-3:r-1;v<h+n;++v)p.push(v);a=a.squeeze(p)}return 1===a.shape.length&&(a=a.expandDims(1)),a}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[cs(this.axes,e.length),cs(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){a.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new zn("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var i=t.concat(n);return 1===i.length&&i.push(1),i}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ns);ls.className="Dot",a.serialization.registerClass(ls);var fs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);return ea((function(){return Hr(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))}}]),n}(Ua);fs.className="GaussianNoise",a.serialization.registerClass(fs);var ds=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t);var r=Aa(e);if(n.rate>0&&n.rate<1){return ea((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul(Hr(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(Ua);ds.className="GaussianDropout",a.serialization.registerClass(ds);var hs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Object(jn.a)(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Aa(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return ea((function(){var t=Aa(e),i=-1.7580993408473766,o=Object(a.greaterEqual)(Object(a.randomUniform)(r),n.rate);o=Pr(o,"float32");var u=Math.pow((1-n.rate)*(1+n.rate*Math.pow(i,2)),-.5),s=-u*i*n.rate;return t.mul(o).add(o.add(-1).mul(i)).mul(u).add(s)}),(function(){return Aa(e)}),t.training||!1)}return e}))}}]),n}(Ua);function ps(e,t,n,r,i){var o,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=a.batchNorm2d(e,t,n,r,i,u);else if(3===e.rank)o=a.batchNorm3d(e,t,n,r,i,u);else{if(4!==e.rank)throw new zn("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=a.batchNorm4d(e,t,n,r,i,u)}return o}function vs(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(a.tidy)((function(){var o=a.moments(e,r),u=o.mean,s=o.variance;return[ps(e,u,s,n,t,i),u,s]}))}function ms(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Object(a.tidy)((function(){var o,u=a.moments(e,r),s=u.mean,c=u.variance,l=[],f=Object(Nn.a)(Rr(0,e.rank));try{for(f.s();!(o=f.n()).done;){var d=o.value;-1!==r.indexOf(d)?l.push(1):l.push(e.shape[d])}}catch(g){f.e(g)}finally{f.f()}var h=s.reshape(l),p=c.reshape(l),v=null==t?null:t.reshape(l),m=null==n?null:n.reshape(l);return[ps(e,h,p,m,v,i),s,c]}))}hs.className="AlphaDropout",a.serialization.registerClass(hs);var gs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=wa(e.betaInitializer||"zeros"),r.gammaInitializer=wa(e.gammaInitializer||"ones"),r.movingMeanInitializer=wa(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=wa(e.movingVarianceInitializer||"ones"),r.betaConstraint=mr(e.betaConstraint),r.gammaConstraint=mr(e.gammaConstraint),r.betaRegularizer=ru(e.betaRegularizer),r.gammaRegularizer=ru(e.gammaRegularizer),r}return Object(jn.a)(n,[{key:"build",value:function(e){e=Ta(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Bn("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new Ra({ndim:e.length,axes:Object(lu.a)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r=null!=t.training&&t.training,o=Aa(e),u=o.shape,s=u.length,c=Rr(0,s),l=n.axis>=0?n.axis:n.axis+s;c.splice(l,1);var f=Wn(1,s);f[l]=u[l];var d=c.slice();d.sort();var h=!a.util.arraysEqual(d,Rr(0,s).slice(0,s-1));if(!r)return function(){if(h){var e=n.movingMean.read().reshape(f),t=n.movingVariance.read().reshape(f),r=n.center?n.beta.read().reshape(f):null,a=n.scale?n.gamma.read().reshape(f):null;return ps(o,e,t,r,a,n.epsilon)}return ps(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return a.util.arraysEqual(r.slice().sort(),Rr(0,e.rank-1))?vs(e,t,n,r,i):ms(e,t,n,r,i)}(o,n.gamma.read(),n.beta.read(),c,n.epsilon),v=Object(i.a)(p,3),m=v[0],g=v[1],b=v[2],y=function(e,t,n){a.tidy((function(){var r=1-n,a=e.read(),i=a.sub(t).mul(r);e.write(a.sub(i))}))};return y(n.movingMean,g,n.momentum),y(n.movingVariance,b,n.momentum),m}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:_a(this.betaInitializer),gammaInitializer:_a(this.gammaInitializer),movingMeanInitializer:_a(this.movingMeanInitializer),movingVarianceInitializer:_a(this.movingVarianceInitializer),betaRegularizer:tu(this.betaRegularizer),gammaRegularizer:tu(this.gammaRegularizer),betaConstraint:pr(this.betaConstraint),gammaConstraint:pr(this.gammaConstraint)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);gs.className="BatchNormalization",a.serialization.registerClass(gs);var bs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=Object(Nn.a)(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(u){i.e(u)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=wa(e.betaInitializer||"zeros"),r.gammaInitializer=wa(e.gammaInitializer||"ones"),r.betaRegularizer=ru(e.betaRegularizer),r.gammaRegularizer=ru(e.gammaRegularizer),r.supportsMasking=!0,r}return Object(jn.a)(n,[{key:"build",value:function(e){var t=(e=Ta(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Object(Nn.a)(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(u){a.e(u)}finally{a.f()}if(this.axis.length!==er(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Aa(e),i=r.shape,o=i.length;return Object(a.tidy)((function(){var e,t=Object(a.moments)(r,n.axis,!0),u=t.mean,s=t.variance,c=Wn(1,o),l=Object(Nn.a)(n.axis);try{for(l.s();!(e=l.n()).done;){var f=e.value;c[f]=i[f]}}catch(b){l.e(b)}finally{l.f()}for(var d=function(e){return null!=e&&e.shape.length!==o&&n.axis!==[o-1]?e.reshape(c):e},h=d(n.gamma.read()),p=d(n.beta.read()),v=[],m=[],g=0;g<o;++g)-1!==n.axis.indexOf(g)?(v.push(i[g]),m.push(1)):(v.push(1),m.push(i[g]));return u=u.tile(v),s=s.tile(v),h=h.tile(m),p=p.tile(m),ps(r,u,s,p,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:_a(this.betaInitializer),gammaInitializer:_a(this.gammaInitializer),betaRegularizer:tu(this.betaRegularizer),gammaRegularizer:tu(this.gammaRegularizer)},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);bs.className="LayerNormalization",a.serialization.registerClass(bs);var ys=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Bn("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Bn("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new Bn("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new Ra({ndim:4})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Ta(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return t=Aa(e),r=n.padding,i=n.dataFormat,Object(a.tidy)((function(){if(4!==t.rank)throw new Bn("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new Bn("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==i&&(i="channelsLast"),"channelsLast"!==i&&"channelsFirst"!==i)throw new Bn("Unknown data format: ".concat(i,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===i?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],a.pad(t,e)}));var t,r,i}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua);function xs(e,t,n,r,i,o){return Object(a.tidy)((function(){var u;kr(i),Sr(o),Or(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=pu(e,i);var s="same"===r?"same":"valid";return u="max"===o?a.maxPool(e,t,n,s):a.avgPool(e,t,n,s),"channelsFirst"===i&&(u=a.transpose(u,[0,3,1,2])),u}))}function _s(e,t,n,r,i,o){return Object(a.tidy)((function(){var u;kr(i),Sr(o),Or(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=vu(e,i);var s="same"===r?"same":"valid";return u="max"===o?a.maxPool3d(e,t,n,s):a.avgPool3d(e,t,n,s),"channelsFirst"===i&&(u=a.transpose(u,[0,4,1,2,3])),u}))}ys.className="ZeroPadding2D",a.serialization.registerClass(ys);var ws=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Bn("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(ar(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Bn("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Or(r.padding),r.inputSpec=[new Ra({ndim:3})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){var t=du((e=Ta(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){n.invokeCallHook(e,t),e=Lr(Aa(e),2);var r=n.poolingFunction(Aa(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return a.squeeze(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua),ks=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),xs(e,t,n,r,a,"max")}}]),n}(ws);ks.className="MaxPooling1D",a.serialization.registerClass(ks);var Os=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),xs(e,t,n,r,a,"avg")}}]),n}(ws);Os.className="AveragePooling1D",a.serialization.registerClass(Os);var Ss=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Bn("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return ar(r.poolSize,"poolSize"),ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),Or(r.padding),r.inputSpec=[new Ra({ndim:4})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){e=Ta(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=du(t,this.poolSize[0],this.padding,this.strides[0]),n=du(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Aa(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua),js=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),xs(e,t,n,r,a,"max")}}]),n}(Ss);js.className="MaxPooling2D",a.serialization.registerClass(js);var Es=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),xs(e,t,n,r,a,"avg")}}]),n}(Ss);Es.className="AveragePooling2D",a.serialization.registerClass(Es);var Cs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;if(Object(Sn.a)(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Bn("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return ar(r.poolSize,"poolSize"),ar(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),Or(r.padding),r.inputSpec=[new Ra({ndim:5})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){e=Ta(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=du(t,this.poolSize[0],this.padding,this.strides[0]),n=du(n,this.poolSize[1],this.padding,this.strides[1]),r=du(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return n.invokeCallHook(e,t),n.poolingFunction(Aa(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua),As=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),_s(e,t,n,r,a,"max")}}]),n}(Cs);As.className="MaxPooling3D",a.serialization.registerClass(As);var Ts=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e)}return Object(jn.a)(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return kr(a),Or(r),_s(e,t,n,r,a,"avg")}}]),n}(Cs);Ts.className="AveragePooling3D",a.serialization.registerClass(Ts);var Ns=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).inputSpec=[new Ra({ndim:3})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new zn}}]),n}(Ua),Ms=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e||{})}return Object(jn.a)(n,[{key:"call",value:function(e,t){return Object(a.tidy)((function(){var t=Aa(e);return a.mean(t,1)}))}}]),n}(Ns);Ms.className="GlobalAveragePooling1D",a.serialization.registerClass(Ms);var Ds=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){return Object(Sn.a)(this,n),t.call(this,e||{})}return Object(jn.a)(n,[{key:"call",value:function(e,t){return Object(a.tidy)((function(){var t=Aa(e);return a.max(t,1)}))}}]),n}(Ns);Ds.className="GlobalMaxPooling1D",a.serialization.registerClass(Ds);var Is=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kr(r.dataFormat),r.inputSpec=[new Ra({ndim:4})],r}return Object(jn.a)(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new zn}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Ua),Fs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=Aa(e);return"channelsLast"===n.dataFormat?a.mean(t,[1,2]):a.mean(t,[2,3])}))}}]),n}(Is);Fs.className="GlobalAveragePooling2D",a.serialization.registerClass(Fs);var Rs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){return Object(Sn.a)(this,n),t.apply(this,arguments)}return Object(jn.a)(n,[{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var t=Aa(e);return"channelsLast"===n.dataFormat?a.max(t,[1,2]):a.max(t,[2,3])}))}}]),n}(Is);Rs.className="GlobalMaxPooling2D",a.serialization.registerClass(Rs);var Ps=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).layer=e.layer,r}return Object(jn.a)(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(oi.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=ui(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(Ua),Ls=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;return Object(Sn.a)(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Object(jn.a)(n,[{key:"build",value:function(e){if((e=Ta(e)).length<3)throw new Bn("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),Object(oi.a)(Object(Dn.a)(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Ta(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){return Nu((function(e,r){return[Aa(n.layer.call(e,t)),[]]}),e=Aa(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(Ps);Ls.className="TimeDistributed",a.serialization.registerClass(Ls);var Bs=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r;Object(Sn.a)(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=ui(i),a.goBackwards=!0!==a.goBackwards;var o,u={};if(u.className=e.layer.getClassName(),u.config=a,r.backwardLayer=ui(u),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,nr(_r,"BidirectionalMergeMode",o),e.weights)throw new zn("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Object(jn.a)(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):qn(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Tu(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return Object(oi.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t);var o=[],u=[];if(null!=r){var s=r.length;if(s%2>0)throw new Bn("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,Object(Tn.a)(r));var c=r.map((function(e){return new Ra({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,s/2),this.backwardLayer.stateSpec=c.slice(s/2),u.push.apply(u,Object(Tn.a)(c))}if(null!=a)throw new zn("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof Pa,f=0,d=o;f<d.length;f++){if(d[f]instanceof Pa!==l)throw new Bn("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var h=[e].concat(o),p=this.inputSpec.concat(u),v=this.inputSpec;this.inputSpec=p;var m=Object(oi.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,m}return Object(oi.a)(Object(Dn.a)(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Object(a.tidy)((function(){var r,i,o,u,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),i=n.backwardLayer.call(e,t);else{var c=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:c})),i=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),n.returnSequences&&(i=a.reverse(i,1)),"concat"===n.mergeMode?u=Vr([r,i]):"sum"===n.mergeMode?u=a.add(r,i):"ave"===n.mergeMode?u=a.mul(.5,a.add(r,i)):"mul"===n.mergeMode?u=a.mul(r,i):null==n.mergeMode&&(u=[r,i]),n.returnState?null==n.mergeMode?u.concat(o):[u].concat(o):u}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;Er(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),Er(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){Object(oi.a)(Object(Dn.a)(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=Object(oi.a)(Object(Dn.a)(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=ui(t.layer);if(delete t.layer,null!=t.numConstants)throw new zn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(Ps);function zs(e){return new Va(e)}function Us(e){return new uu(e)}function Ws(e){return new au(e)}function Vs(e){return new iu(e)}function Gs(e){return new ou(e)}function qs(e){return new cu(e)}function Hs(e){return new su(e)}function Xs(e){return new ju(e)}function Ys(e){return new _u(e)}function Ks(e){return new ku(e)}function $s(e){return new wu(e)}function Zs(e){return new Su(e)}function Js(e){return new Eu(e)}function Qs(e){return new Cu(e)}function ec(e){return new Au(e)}function tc(e){return new $u(e)}function nc(e){return new Yu(e)}function rc(e){return new Hu(e)}function ac(e){return new Xu(e)}function ic(e){return new Ku(e)}function oc(e){return new Zu(e)}function uc(e){return new Ju(e)}function sc(e){return new Qu(e)}function cc(e){return new ts(e)}function lc(e){return new rs(e)}function fc(e){return new is(e)}function dc(e){return new ss(e)}function hc(e){return new os(e)}function pc(e){return new us(e)}function vc(e){return new as(e)}function mc(e){return new ls(e)}function gc(e){return new gs(e)}function bc(e){return new bs(e)}function yc(e){return new ys(e)}function xc(e){return new Os(e)}function _c(e){return xc(e)}function wc(e){return xc(e)}function kc(e){return new Es(e)}function Oc(e){return kc(e)}function Sc(e){return kc(e)}function jc(e){return new Ts(e)}function Ec(e){return jc(e)}function Cc(e){return jc(e)}function Ac(e){return new Ms(e)}function Tc(e){return new Fs(e)}function Nc(e){return new Ds(e)}function Mc(e){return new Rs(e)}function Dc(e){return new ks(e)}function Ic(e){return new js(e)}function Fc(e){return new As(e)}function Rc(e){return new Pu(e)}function Pc(e){return new Ru(e)}function Lc(e){return new Bu(e)}function Bc(e){return new Lu(e)}function zc(e){return new Fu(e)}function Uc(e){return new Iu(e)}function Wc(e){return new qu(e)}function Vc(e){return new Gu(e)}function Gc(e){return new Mu(e)}function qc(e){return new zu(e)}function Hc(e){return new Bs(e)}function Xc(e){return new Ls(e)}Bs.className="Bidirectional",a.serialization.registerClass(Bs);var Yc=Nc,Kc=Mc,$c=Dc,Zc=Ic;function Jc(e){return new fs(e)}function Qc(e){return new ds(e)}function el(e){return new hs(e)}function tl(e){return new es(e)}n(90),n(3),n(155),n(330),n(261),n(254),n(176),n(189),n(195),n(72),n(328),n(329),n(331),n(332),n(333),n(248),n(334),n(337),n(91),n(181),n(341),n(342),n(257),n(183),n(353),n(160),n(118),n(354),n(266),n(356),n(258),n(221),n(359),n(338),n(192),n(263),n(184),n(191);n(249),n(39),n(250),n(138),n(339),n(178),n(188),n(350),n(335),n(349),n(253);n(177),n(346),n(351),n(159),n(352),n(264),n(222),n(360),n(274),n(355);n(272),n(273),n(112),n(190),n(187),n(121),n(256),n(357),n(348),n(376),n(102),n(130),n(158),n(244),n(245),n(246),n(247),n(336),n(340),n(358),n(143),n(361),n(362),n(193),n(161),n(194),n(270),n(260),n(252),n(157);var nl=n(290),rl=n(74),al=n(104),il=function(){function e(){Object(Sn.a)(this,e),this.size=null}return Object(jn.a)(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return a.util.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),ol(Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,ul));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,ol(Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,ol(Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return a.tidy((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return ol(Object(Ya.a)(Xa.a.mark((function n(){return Xa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return a.tidy((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return ol(Object(Ya.a)(Xa.a.mark((function n(){return Xa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return ol(Object(Ya.a)(Xa.a.mark((function n(){return Xa.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,ol(Object(Ya.a)(Xa.a.mark((function t(){var r;return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(rl.e)(Object(Ya.a)(Xa.a.mark((function e(){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Object(rl.d)(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,ol(Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,i=nl.alea(t||a.util.now().toString());return ol(Object(Ya.a)(Xa.a.mark((function t(){var a;return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.int32(),n&&(a+=i.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,a.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,ol(Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ol(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Object(En.a)(a,n);var r=Object(Cn.a)(a);function a(){var e;return Object(Sn.a)(this,a),(e=r.apply(this,arguments)).size=t,e}return Object(jn.a)(a,[{key:"iterator",value:function(){var t=Object(Ya.a)(Xa.a.mark((function t(){return Xa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(il))}function ul(e){if(null===e)return null;var t=e[0];return Object(al.a)(t)?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof a.Tensor?a.stack(e):a.tensor(e)}(e),recurse:!1}:{value:null,recurse:!0}}il.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote"),rl.a,rl.a,n(404).a;function sl(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&a.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var cl=a.kernel_impls.whereImpl,ll=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(){var e;return Object(Sn.a)(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new a.DataStorage(Object(Mn.a)(e),Object(a.engine)()),e}return Object(jn.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Object(a.env)().get("IS_NODE")&&a.backend_util.warn("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){var i=n.map((function(e){return a.util.encodeString(e)}));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var i=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return a.backend_util.mergeRealAndImagArrays(i,o)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return a.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}},{key:"makeOutput",value:function(e,t,n){var r=this.write(e,t,n);return Object(a.engine)().makeTensorFromDataId(r,t,n,this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n,r;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.util.now(),t(),r=a.util.now()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){sl([e],"where");var t=this.readSync(e.dataId);return cl(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return Object(oi.a)(Object(Dn.a)(n.prototype),"epsilon",this).call(this)}}]),n}(a.KernelBackend);ll.nextDataId=0;function fl(e,t,n){return function(r){var i=r.inputs,o=r.attrs,u=r.backend,s=i.x;if(sl(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var c=u,l=c.data.get(s.dataId).values,f=a.util.sizeFromShape(s.shape),d=n||s.dtype,h=a.util.getArrayFromDType(d,f),p=0;p<f;++p)h[p]=t(l[p],o);return c.makeTensorInfo(s.shape,d,h)}}function dl(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,u=a.x;if(sl(u,e),"string"===u.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var s=o,c=s.data.get(u.dataId).values,l=n||u.dtype,f=t(c,l,i);return s.makeTensorInfo(u.shape,l,f)}}Object(a.registerBackend)("cpu",(function(){return new ll}),1);var hl=fl(a.Elu,(function(e){return e>=0?e:Math.exp(e)-1})),pl={kernelName:a.Elu,backendName:"cpu",kernelFunc:hl};function vl(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var ml={kernelName:a.Identity,backendName:"cpu",kernelFunc:vl};function gl(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.alpha;sl([i],"leakyRelu");for(var u=a.util.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,c=a.util.getTypedArrayFromDType("float32",u),l=0;l<s.length;l++)c[l]=s[l]<0?o*s[l]:s[l];return n.makeTensorInfo(i.shape,"float32",c)}var bl={kernelName:a.LeakyRelu,backendName:"cpu",kernelFunc:gl};function yl(e){return function(t,n,r,i,o){var u=a.backend_util.assertAndGetBroadcastShape(t,n),s=u.length,c=a.util.computeStrides(u),l=a.util.sizeFromShape(u),f=a.util.getTypedArrayFromDType(o,l),d=t.length,h=n.length,p=a.util.computeStrides(t),v=a.util.computeStrides(n),m=a.backend_util.getBroadcastDims(t,u),g=a.backend_util.getBroadcastDims(n,u);if(m.length+g.length===0)for(var b=0;b<f.length;++b)f[b]=e(r[b%r.length],i[b%i.length]);else for(var y=function(t){var n=a.util.indexToLoc(t,s,c),o=n.slice(-d);m.forEach((function(e){return o[e]=0}));var u=a.util.locToIndex(o,d,p),l=n.slice(-h);g.forEach((function(e){return l[e]=0}));var b=a.util.locToIndex(l,h,v);f[t]=e(r[u],i[b])},x=0;x<f.length;++x)y(x);return[f,u]}}var xl=yl((function(e,t){return e<0?t*e:e}));function _l(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;sl([r,a],"prelu");var o=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,s=xl(r.shape,a.shape,o,u,r.dtype),c=Object(i.a)(s,2),l=c[0],f=c[1];return n.makeTensorInfo(f,r.dtype,l)}var wl={kernelName:a.Prelu,backendName:"cpu",kernelFunc:_l},kl=fl(a.Relu,(function(e){return Math.max(0,e)})),Ol={kernelName:a.Relu,backendName:"cpu",kernelFunc:kl},Sl=fl(a.Relu6,(function(e){return Math.min(Math.max(0,e),6)})),jl={kernelName:a.Relu6,backendName:"cpu",kernelFunc:Sl};function El(e,t,n,r,a){if("linear"===n)return vl({inputs:{x:t},backend:e});if("relu"===n)return kl({inputs:{x:t},backend:e});if("elu"===n)return hl({inputs:{x:t},backend:e});if("relu6"===n)return Sl({inputs:{x:t},backend:e});if("prelu"===n)return _l({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return gl({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Cl(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,u=n.makeTensorInfo(r.shape,"complex64");return n.data.get(u.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},u}var Al={kernelName:a.Complex,backendName:"cpu",kernelFunc:Cl};function Tl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=Tl(e,t,"float32"),i=Tl(e,t,"float32");return Cl({inputs:{real:r,imag:i},backend:e})}var o=a.util.makeZerosTypedArray(a.util.sizeFromShape(t),n);return e.makeTensorInfo(t,n,o)}function Nl(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Ml={kernelName:a.Real,backendName:"cpu",kernelFunc:Nl};function Dl(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.dtype;if("complex64"===u){if("complex64"===o.dtype)return vl({inputs:{x:o},backend:n});var s=Tl(n,o.shape,o.dtype),c=Dl({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Cl({inputs:{real:c,imag:s},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var f=Nl({inputs:{input:o},backend:n}),d=Dl({inputs:{x:f},backend:n,attrs:{dtype:u}});return n.disposeIntermediateTensorInfo(f),d}if(!a.util.hasEncodingLoss(o.dtype,u)){var h=vl({inputs:{x:o},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:u}}if("int32"===u){var p=n.data.get(o.dataId).values,v=Int32Array.from(p);return n.makeTensorInfo(o.shape,"int32",v)}if("bool"===u){var m=n.data.get(o.dataId).values,g=a.util.toTypedArray([0],o.dtype),b=yl((function(e,t){return e!==t?1:0}))(o.shape,[],m,g,"bool"),y=Object(i.a)(b,2),x=y[0],_=y[1];return n.makeTensorInfo(_,"bool",x)}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(u))}var Il={kernelName:a.Cast,backendName:"cpu",kernelFunc:Dl};function Fl(e,t,n,r){return null==n?function(n){var a=n.inputs,o=n.backend,u=a.a,s=a.b,c=o;sl([u,s],e);var l=c.data.get(u.dataId).values,f=c.data.get(s.dataId).values,d=r||u.dtype,h=t(u.shape,s.shape,l,f,d),p=Object(i.a)(h,2),v=p[0],m=p[1];return c.makeTensorInfo(m,d,v)}:function(e){var a=e.inputs,o=e.backend,u=a.a,s=a.b,c=o;if("complex64"===u.dtype||"complex64"===s.dtype){var l=Dl({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),f=c.data.get(l.dataId),d=f.complexTensorInfos.real,h=f.complexTensorInfos.imag,p=c.data.get(d.dataId).values,v=c.data.get(h.dataId).values,m=Dl({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),g=c.data.get(m.dataId),b=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,x=c.data.get(b.dataId).values,_=c.data.get(y.dataId).values,w=n(u.shape,s.shape,p,v,x,_),k=Object(i.a)(w,3),O=k[0],S=k[1],j=k[2],E=c.makeTensorInfo(j,"float32",O),C=c.makeTensorInfo(j,"float32",S),A=Cl({inputs:{real:E,imag:C},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(E),c.disposeIntermediateTensorInfo(C),A}var T=c.data.get(u.dataId).values,N=c.data.get(s.dataId).values,M=r||u.dtype,D=t(u.shape,s.shape,T,N,M),I=Object(i.a)(D,2),F=I[0],R=I[1];return c.makeTensorInfo(R,M,F)}}function Rl(e){return function(t,n,r,i,o,u){var s=a.backend_util.assertAndGetBroadcastShape(t,n),c=a.util.sizeFromShape(s),l=s.length,f=a.util.computeStrides(s),d=a.util.getTypedArrayFromDType("float32",c),h=a.util.getTypedArrayFromDType("float32",c),p=a.backend_util.getBroadcastDims(t,s),v=a.backend_util.getBroadcastDims(n,s),m=a.backend_util.mergeRealAndImagArrays(r,i),g=a.backend_util.mergeRealAndImagArrays(o,u),b=t.length,y=a.util.computeStrides(t),x=n.length,_=a.util.computeStrides(n);if(p.length+v.length===0)for(var w=0;w<d.length;w++){var k=w%m.length,O=w%g.length,S=e(m[2*k],m[2*k+1],g[2*O],g[2*O+1]);d[w]=S.real,h[w]=S.imag}else for(var j=function(t){var n=a.util.indexToLoc(t,l,f),r=n.slice(-b);p.forEach((function(e){return r[e]=0}));var i=a.util.locToIndex(r,b,y),o=n.slice(-x);v.forEach((function(e){return o[e]=0}));var u=a.util.locToIndex(o,x,_),s=e(m[2*i],m[2*i+1],g[2*u],g[2*u+1]);d[t]=s.real,h[t]=s.imag},E=0;E<d.length;E++)j(E);return[d,h,s]}}var Pl=yl((function(e,t){return e+t})),Ll=Rl((function(e,t,n,r){return{real:e+n,imag:t+r}})),Bl=Fl(a.Add,Pl,Ll),zl={kernelName:a.Add,backendName:"cpu",kernelFunc:Bl};function Ul(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.shape,u=a.util.sizeFromShape(i.shape),s=a.util.inferFromImplicitShape(o,u),c=a.util.sizeFromShape(s);a.util.assert(u===c,(function(){return"The new shape (".concat(s,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(u," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(i.dataId);var l=n.data.get(i.dataId);if(null!=l.complexTensorInfos){var f=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;f.shape=s,d.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}var Wl={kernelName:a.Reshape,backendName:"cpu",kernelFunc:Ul};function Vl(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.a,u=t.b,s=r.transposeA,c=r.transposeB;sl([o,u],"matMul");var l=o.shape.length,f=u.shape.length,d=s?o.shape[l-2]:o.shape[l-1],h=c?u.shape[f-1]:u.shape[f-2],p=s?o.shape[l-1]:o.shape[l-2],v=c?u.shape[f-2]:u.shape[f-1],m=o.shape.slice(0,-2),g=u.shape.slice(0,-2),b=a.util.sizeFromShape(m),y=a.util.sizeFromShape(g),x=b===y||1===b||1===y;a.util.assert(l>=2&&f>=2&&x,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(m,") and (").concat(g,").")}));var _=(b>y?o.shape.slice(0,-2):u.shape.slice(0,-2)).concat([p,v]);a.util.assert(d===h,(function(){return"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(h,") of Tensors with shapes ").concat(o.shape," and ")+"".concat(u.shape," and transposeA=").concat(s)+" and transposeB=".concat(c," must match.")}));for(var w=c?[y,v,h]:[y,h,v],k=Ul({inputs:{x:o},backend:n,attrs:{shape:s?[b,d,p]:[b,p,d]}}),O=Ul({inputs:{x:u},backend:n,attrs:{shape:w}}),S=s?k.shape[1]:k.shape[2],j=s?k.shape[2]:k.shape[1],E=c?O.shape[1]:O.shape[2],C=Math.max(b,y),A=n.data.get(k.dataId).values,T=n.data.get(O.dataId).values,N=a.util.computeStrides(k.shape),M=a.util.computeStrides(O.shape),D=s?[N[0],1,N[1]]:[N[0],N[1],1],I=Object(i.a)(D,3),F=I[0],R=I[1],P=I[2],L=c?[1,M[1],M[0]]:[M[1],1,M[0]],B=Object(i.a)(L,3),z=B[0],U=B[1],W=B[2],V=j*E,G=Object(a.buffer)([C,j,E],k.dtype),q=G.values,H=n.blockSize,X=0;X<C;X++)for(var Y=0;Y<j;Y+=H)for(var K=0;K<E;K+=H)for(var $=0;$<S;$+=H)for(var Z=Math.min(Y+H,j),J=Math.min(K+H,E),Q=Math.min($+H,S),ee=Y;ee<Z;ee++)for(var te=K;te<J;te++){for(var ne=0,re=$;re<Q;re++){var ae=Math.min(X,b-1)*F,ie=Math.min(X,y-1)*W;ne+=A[ae+ee*R+re*P]*T[re*z+te*U+ie]}q[X*V+(ee*E+te)]+=ne}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(O),n.makeTensorInfo(_,G.dtype,G.values)}var Gl={kernelName:a.BatchMatMul,backendName:"cpu",kernelFunc:Vl};var ql={kernelName:a._FusedMatMul,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,u=a.a,s=a.b,c=a.bias,l=a.preluActivationWeights,f=o.transposeA,d=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=Vl({inputs:{a:u,b:s},attrs:{transposeA:f,transposeB:d},backend:i}),c&&(n=Bl({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),h&&(r=El(i,t,h,l,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var b=g[m];i.disposeIntermediateTensorInfo(b)}return t}};function Hl(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var Xl={kernelName:a.Abs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;sl(t,"abs");var r=new Float32Array(a.util.sizeFromShape(t.shape));return r=Hl(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}},Yl=fl(a.Acos,(function(e){return Math.acos(e)})),Kl={kernelName:a.Acos,backendName:"cpu",kernelFunc:Yl},$l=fl(a.Acosh,(function(e){return Math.acosh(e)})),Zl={kernelName:a.Acosh,backendName:"cpu",kernelFunc:$l};var Jl={kernelName:a.AddN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;sl(t,"addN");for(var i=r.map((function(e){return n.data.get(e.dataId).values})),o=Object(a.buffer)(r[0].shape,r[0].dtype),u=o.values,s=0;s<r.length;s++)for(var c=i[s],l=0;l<u.length;l++)u[l]+=c[l];return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function Ql(e,t,n,r,i){for(var o=t.length,u=a.util.sizeFromShape(t),s=a.util.computeStrides(t),c=a.util.computeStrides(i),l=a.util.getTypedArrayFromDType(n,a.util.sizeFromShape(i)),f=0;f<u;++f){for(var d=a.util.indexToLoc(f,o,s),h=new Array(d.length),p=0;p<h.length;p++)h[p]=d[r[p]];l[a.util.locToIndex(h,o,c)]=e[f]}return l}function ef(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;sl(a,"transpose");for(var o=a.shape.length,u=new Array(o),s=0;s<u.length;s++)u[s]=a.shape[i[s]];var c=Ql(r.data.get(a.dataId).values,a.shape,a.dtype,i,u);return{dataId:r.write(c,u,a.dtype),shape:u,dtype:a.dtype}}var tf={kernelName:a.Transpose,backendName:"cpu",kernelFunc:ef};var nf={kernelName:a.All,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;sl(o,"all");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=ef({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("all",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,x=0;x<b.length;++x){for(var _=x*g,w=y[_],k=0;k<g;++k){var O=y[_+k];w=w&&O}b[x]=w}null!=f&&n.disposeIntermediateTensorInfo(d);var S=n.makeTensorInfo(v,d.dtype,b);if(s){var j=Ul({inputs:{x:S},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(S),j}return S}};var rf={kernelName:a.Any,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;sl(o,"any");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=ef({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("any",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,x=0;x<b.length;++x){for(var _=x*g,w=y[_],k=0;k<g;++k){var O=y[_+k];w=w||O}b[x]=w}null!=f&&n.disposeIntermediateTensorInfo(d);var S=n.makeTensorInfo(v,d.dtype,b);if(s){var j=Ul({inputs:{x:S},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(S),j}return S}};var af={kernelName:a.ArgMax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis;sl(o,"argMax");var s=a.util.parseAxisParam(u,o.shape),c=a.backend_util.getAxesPermutation(s,o.shape.length),l=o,f=[];null!=c&&(l=ef({inputs:{x:o},backend:n,attrs:{perm:c}}),f.push(l),s=a.backend_util.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMax",s,l.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(l.shape,s),h=Object(i.a)(d,2),p=h[0],v=h[1],m=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(m,"int32"),b=a.util.sizeFromShape(v),y=n.data.get(l.dataId).values,x=0;x<g.length;++x){for(var _=x*b,w=y[_],k=0,O=0;O<b;++O){var S=y[_+O];S>w&&(w=S,k=O)}g[x]=k}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}};var of={kernelName:a.ArgMin,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis;sl(o,"argMin");var s=a.util.parseAxisParam(u,o.shape),c=a.backend_util.getAxesPermutation(s,o.shape.length),l=o,f=[];null!=c&&(l=ef({inputs:{x:o},backend:n,attrs:{perm:c}}),f.push(l),s=a.backend_util.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],a.backend_util.assertAxesAreInnerMostDims("argMin",s,l.shape.length);for(var d=a.backend_util.computeOutAndReduceShapes(l.shape,s),h=Object(i.a)(d,2),p=h[0],v=h[1],m=a.util.sizeFromShape(p),g=a.util.makeZerosTypedArray(m,"int32"),b=a.util.sizeFromShape(v),y=n.data.get(l.dataId).values,x=0;x<g.length;++x){for(var _=x*b,w=y[_],k=0,O=0;O<b;++O){var S=y[_+O];S<w&&(w=S,k=O)}g[x]=k}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",g)}},uf=fl(a.Asin,(function(e){return Math.asin(e)})),sf={kernelName:a.Asin,backendName:"cpu",kernelFunc:uf},cf=fl(a.Asinh,(function(e){return Math.asinh(e)})),lf={kernelName:a.Asinh,backendName:"cpu",kernelFunc:cf},ff=fl(a.Atan,(function(e){return Math.atan(e)})),df={kernelName:a.Atan,backendName:"cpu",kernelFunc:ff},hf=yl((function(e,t){return Math.atan2(e,t)})),pf=Fl(a.Atan2,hf),vf={kernelName:a.Atan2,backendName:"cpu",kernelFunc:pf},mf=fl(a.Atanh,(function(e){return Math.atanh(e)})),gf={kernelName:a.Atanh,backendName:"cpu",kernelFunc:mf};function bf(e,t,n,r,i,o){for(var u=i.strideHeight,s=i.strideWidth,c=i.dilationHeight,l=i.dilationWidth,f=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=i.padInfo.top,p=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Object(a.buffer)(i.outShape,n),g=m.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3],_=0;_<i.batchSize;++_)for(var w=_*b,k=_*r[0],O=0;O<i.inChannels;++O)for(var S=0;S<i.outHeight;++S)for(var j=S*u-h,E=Math.max(0,j),C=Math.min(i.inHeight,f+j),A=w+S*y,T=0;T<i.outWidth;++T){for(var N=T*s-p,M=Math.max(0,N),D=Math.min(i.inWidth,d+N),I=v,F=0,R=0,P=E;P<C;P+=c){for(var L=k+P*r[1],B=M;B<D;B+=l){var z=e[L+B*r[2]+O];"max"===o&&z>I?I=z:"avg"===o&&(F+=z,R++)}if(isNaN(I))break}g[A+T*x+O]="avg"===o?F/R:I}return m}function yf(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=Object(a.buffer)(r.outShape,"int32"),s=r.strideHeight,c=r.strideWidth,l=r.dilationHeight,f=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,v=r.padInfo.left,m=Object(a.buffer)(t,n,e),g=0;g<r.batchSize;++g)for(var b=0;b<r.inChannels;++b)for(var y=0;y<r.outHeight;++y){for(var x=y*s-p,_=x;_<0;)_+=l;for(var w=Math.min(r.inHeight,d+x),k=0;k<r.outWidth;++k){for(var O=k*c-v,S=O;S<0;)S+=f;for(var j=Math.min(r.inWidth,h+O),E=Number.NEGATIVE_INFINITY,C=-1,A=_;A<w;A+=l)for(var T=A-x,N=S;N<j;N+=f){var M=N-O,D=m.get(g,A,N,b);D>E&&(E=D,C=i?o?((g*r.inHeight+A)*r.inWidth+N)*r.inChannels+b:(A*r.inWidth+N)*r.inChannels+b:T*h+M)}u.set(C,g,y,k,b)}}return u}function xf(e,t,n,r,i,o){for(var u=i.strideDepth,s=i.strideHeight,c=i.strideWidth,l=i.dilationDepth,f=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,b=i.padInfo.left,y="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Object(a.buffer)(i.outShape,n),_=x.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],O=i.outShape[3]*i.outShape[4],S=i.outShape[4],j=0;j<i.batchSize;++j)for(var E=j*w,C=j*r[0],A=0;A<i.inChannels;++A)for(var T=0;T<i.outDepth;++T){for(var N=T*u-m,M=N;M<0;)M+=l;for(var D=Math.min(i.inDepth,h+N),I=E+T*k,F=0;F<i.outHeight;++F){for(var R=F*s-g,P=R;P<0;)P+=f;for(var L=Math.min(i.inHeight,p+R),B=I+F*O,z=0;z<i.outWidth;++z){for(var U=z*c-b,W=U;W<0;)W+=d;for(var V=Math.min(i.inWidth,v+U),G=B+z*S,q=y,H=0,X=0,Y=M;Y<D;Y+=l){for(var K=C+Y*r[1],$=P;$<L;$+=f){for(var Z=K+$*r[2],J=W;J<V;J+=d){var Q=e[Z+J*r[3]+A];if("max"===o&&Q>q?q=Q:"avg"===o&&(H+=Q,X++),isNaN(q))break}if(isNaN(q))break}if(isNaN(q))break}_[G+A]="avg"===o?H/X:q}}}return x}var _f={kernelName:a.AvgPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;sl(i,"avgPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l,f=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===f.filterWidth&&1===f.filterHeight&&a.util.arraysEqual(f.inShape,f.outShape))l=vl({inputs:{x:i},backend:n});else{var d=n.data.get(i.dataId).values,h=a.util.computeStrides(i.shape),p=bf(d,i.shape,i.dtype,h,f,"avg");l=n.makeTensorInfo(f.outShape,i.dtype,p.values)}return l}};var wf={kernelName:a.AvgPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat;sl(i,"avgPool3d");var f=a.backend_util.computePool3DInfo(i.shape,o,u,1,s,c,l),d=xf(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),f,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var kf={kernelName:a.AvgPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode;sl([i,o],"avgPool3DGrad");for(var f=a.backend_util.computePool3DInfo(o.shape,u,s,1,c,l),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,v=f.filterDepth,m=f.filterHeight,g=f.filterWidth,b=f.dilationDepth,y=f.dilationHeight,x=f.dilationWidth,_=f.effectiveFilterDepth,w=f.effectiveFilterHeight,k=f.effectiveFilterWidth,O=_-1-f.padInfo.front,S=k-1-f.padInfo.left,j=w-1-f.padInfo.top,E=Object(a.buffer)(o.shape,"float32"),C=1/(v*m*g),A=n.bufferSync(i),T=0;T<f.batchSize;++T)for(var N=0;N<f.inChannels;++N)for(var M=0;M<f.inDepth;++M)for(var D=0;D<f.inHeight;++D)for(var I=0;I<f.inWidth;++I){for(var F=M-O,R=D-j,P=I-S,L=0,B=0;B<_;B+=b){var z=(F+B)/d;if(!(z<0||z>=f.outDepth||Math.floor(z)!==z))for(var U=0;U<w;U+=y){var W=(R+U)/h;if(!(W<0||W>=f.outHeight||Math.floor(W)!==W))for(var V=0;V<k;V+=x){var G=(P+V)/p;if(!(G<0||G>=f.outWidth||Math.floor(G)!==G))L+=A.get(T,z,W,G,N)}}}E.set(L*C,T,M,D,I,N)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var Of={kernelName:a.AvgPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;sl([i,o],"avgPoolGrad");for(var s=r.filterSize,c=r.strides,l=r.pad,f=a.backend_util.computePool2DInfo(u.shape,s,c,1,l),d=f.strideHeight,h=f.strideWidth,p=f.filterHeight,v=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,b=f.effectiveFilterHeight,y=f.effectiveFilterWidth,x=y-1-f.padInfo.left,_=b-1-f.padInfo.top,w=Object(a.buffer)(u.shape,"float32"),k=1/(p*v),O=n.data.get(i.dataId).values,S=Object(a.buffer)(i.shape,"float32",O),j=0;j<f.batchSize;++j)for(var E=0;E<f.inChannels;++E)for(var C=0;C<f.inHeight;++C)for(var A=0;A<f.inWidth;++A){for(var T=C-_,N=A-x,M=0,D=0;D<b;D+=m){var I=(T+D)/d;if(!(I<0||I>=f.outHeight||Math.floor(I)!==I))for(var F=0;F<y;F+=g){var R=(N+F)/h;if(!(R<0||R>=f.outWidth||Math.floor(R)!==R))M+=S.get(j,I,R,E)}}w.set(M*k,j,C,A,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var Sf={kernelName:a.FusedBatchNorm,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.scale,u=t.offset,s=t.mean,c=t.variance;a.util.assert(s.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),a.util.assert(null==u||s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),a.util.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),sl([i,s,c,o,u],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var f=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(c.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),v=u?n.data.get(u.dataId).values:new Float32Array([0]),m=new Float32Array(f.length),g=v.length,b=p.length,y=h.length,x=d.length,_=0,w=0,k=0,O=0,S=0;S<f.length;++S)m[S]=v[_++]+(f[S]-d[w++])*p[k++]/Math.sqrt(h[O++]+l),_>=g&&(_=0),w>=x&&(w=0),k>=b&&(k=0),O>=y&&(O=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};function jf(e,t,n,r,i){var o=a.slice_util.isSliceContinous(r,t,n),u=a.util.sizeFromShape(n),s=a.util.computeStrides(r);if(o){var c=a.slice_util.computeFlatOffset(t,s);return"string"===i?e.slice(c,c+u):e.subarray(c,c+u)}for(var l="string"===i?a.backend_util.fromUint8ToStringArray(e):e,f=Object(a.buffer)(r,i,l),d=Object(a.buffer)(n,i),h=0;h<d.size;++h){var p=d.indexToLoc(h),v=p.map((function(e,n){return e+t[n]}));d.set.apply(d,[f.get.apply(f,Object(Tn.a)(v))].concat(Object(Tn.a)(p)))}return"string"===i?a.backend_util.fromStringArrayToUint8(d.values):d.values}function Ef(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.begin,s=r.size;sl(o,"slice");var c=a.slice_util.parseSliceParams(o,u,s),l=Object(i.a)(c,2),f=l[0],d=l[1];a.slice_util.assertParamsValid(o,f,d);var h=jf(n.data.get(o.dataId).values,f,d,o.shape,o.dtype);return n.makeTensorInfo(d,o.dtype,h)}var Cf={kernelName:a.Slice,backendName:"cpu",kernelFunc:Ef};var Af={kernelName:a.BatchToSpaceND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.crops;sl([i],"batchToSpaceND");var s=o.reduce((function(e,t){return e*t})),c=a.backend_util.getReshaped(i.shape,o,s),l=a.backend_util.getPermuted(c.length,o.length),f=a.backend_util.getReshapedPermuted(i.shape,o,s),d=a.backend_util.getSliceBeginCoords(u,o.length),h=a.backend_util.getSliceSize(f,u,o.length),p=Ul({inputs:{x:i},backend:n,attrs:{shape:c}}),v=ef({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Ul({inputs:{x:v},backend:n,attrs:{shape:f}}),g=Ef({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}};function Tf(e,t,n,r,i){for(var o=a.util.sizeFromShape(r),u=a.util.makeZerosTypedArray(i,n),s=0;s<e.length;s++){var c=e[s];if(c<0)throw new Error("Input x must be non-negative!");c>=i||(u[c]+=o>0?t[s]:1)}return u}function Nf(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.shape[0],o=e.shape[1],u=Object(a.buffer)([i,n],t.dtype),s=0;s<i;s++)for(var c=0;c<o;c++){var l=e.get(s,c);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?u.set(1,s,l):t.size>0?u.set(u.get(s,l)+t.get(s,c),s,l):u.set(u.get(s,l)+1,s,l))}return u}var Mf={kernelName:a.Bincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=Tf(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}};function Df(e){return function(t,n,r){for(var i=a.util.getTypedArrayFromDType(n,t.length),o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}var If=Df((function(e){return Math.ceil(e)})),Ff=dl(a.Ceil,If),Rf={kernelName:a.Ceil,backendName:"cpu",kernelFunc:Ff},Pf=fl(a.ClipByValue,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),Lf={kernelName:a.ClipByValue,backendName:"cpu",kernelFunc:Pf},Bf={kernelName:a.ComplexAbs,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(a.util.sizeFromShape(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,u=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,c=n.data.get(u.dataId).values,l=0;l<s.length;l++){var f=s[l],d=c[l];r[l]=Math.hypot(f,d)}return n.makeOutput(r,t.shape,"float32")}};function zf(e,t,n,r){var i=a.util.getArrayFromDType(n,a.util.sizeFromShape(t));if(r&&"string"!==n){var o=0;e.forEach((function(e){var t=a.util.sizeFromShape(e.shape);i.set(e.vals,o),o+=t}))}else{var u=0;e.forEach((function(e){for(var r="string"===n?a.backend_util.fromUint8ToStringArray(e.vals):e.vals,o=0,s=0;s<e.shape[0];++s)for(var c=s*t[1]+u,l=0;l<e.shape[1];++l)i[c+l]=r[o++];u+=e.shape[1]}))}return i}function Uf(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var Wf={kernelName:a.Imag,backendName:"cpu",kernelFunc:Uf};function Vf(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,i=a.util.parseAxisParam(r,t[0].shape)[0],o=a.backend_util.computeOutShape(t.map((function(e){return e.shape})),i);if(0===a.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return a.util.sizeFromShape(e.shape)>0}));if(1===u.length)return vl({inputs:{x:u[0]},backend:n});var s=u.map((function(e){return e.shape}));if(a.backend_util.assertParamsConsistent(s,i),"complex64"===u[0].dtype){var c=u.map((function(e){return Nl({inputs:{input:e},backend:n})})),l=u.map((function(e){return Uf({inputs:{input:e},backend:n})})),f=Vf({inputs:c,backend:n,attrs:{axis:i}}),d=Vf({inputs:l,backend:n,attrs:{axis:i}}),h=Cl({inputs:{real:f,imag:d},backend:n});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}var p=u.map((function(e){var t=a.util.sizeFromShape(e.shape.slice(i));return Ul({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),v=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));o=a.backend_util.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],g=zf(v,o,t[0].dtype,m),b=a.backend_util.computeOutShape(u.map((function(e){return e.shape})),i),y=n.makeTensorInfo(b,t[0].dtype,g);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var Gf={kernelName:a.Concat,backendName:"cpu",kernelFunc:Vf};function qf(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dilations,f=r.dimRoundingMode;sl([i,o],"conv2d");for(var d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,l,s,f,!1,d),p=h.filterHeight,v=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,b=h.padInfo.left,y=h.padInfo.top,x="channelsLast"===h.dataFormat,_=new a.TensorBuffer(h.outShape,i.dtype),w=a.util.computeStrides(i.shape),k=a.util.computeStrides(o.shape),O=w[0],S=x?w[1]:w[2],j=x?w[2]:1,E=x?1:w[1],C=_.strides[0],A=x?_.strides[1]:_.strides[2],T=x?_.strides[2]:1,N=x?1:_.strides[1],M=n.data.get(i.dataId).values,D=n.data.get(o.dataId).values,I=_.values,F=0;F<h.batchSize;++F)for(var R=F*O,P=F*C,L=0;L<h.outHeight;++L)for(var B=P+L*A,z=L*h.strideHeight-y,U=0;U<p;++U){var W=z+U*m;if(!(W<0||W>=h.inHeight))for(var V=U*k[0],G=R+W*S,q=0;q<h.outWidth;++q)for(var H=B+q*T,X=q*h.strideWidth-b,Y=0;Y<v;++Y){var K=X+Y*g;if(!(K<0||K>=h.inWidth))for(var $=G+K*j,Z=V+Y*k[1],J=0;J<h.inChannels;++J){for(var Q=M[$+J*E],ee=0;ee<h.outChannels;++ee)I[H+ee*N]+=Q*D[Z+ee];Z+=h.outChannels}}}return n.makeTensorInfo(_.shape,_.dtype,I)}var Hf={kernelName:a.Conv2D,backendName:"cpu",kernelFunc:qf};var Xf={kernelName:a.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=r.filterShape;sl([i,o],"conv2dBackpropFilter");for(var d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,f,u,1,s,l,!1,d),p=h.strideHeight,v=h.strideWidth,m=h.filterHeight,g=h.filterWidth,b="channelsLast"===h.dataFormat,y=new a.TensorBuffer(h.filterShape,"float32"),x=h.padInfo.left,_=h.padInfo.top,w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,O=new a.TensorBuffer(i.shape,i.dtype,w),S=new a.TensorBuffer(o.shape,o.dtype,k),j=0;j<m;++j)for(var E=Math.max(0,Math.ceil((_-j)/p)),C=Math.min(h.outHeight,(h.inHeight+_-j)/p),A=0;A<g;++A)for(var T=Math.max(0,Math.ceil((x-A)/v)),N=Math.min(h.outWidth,(h.inWidth+x-A)/v),M=0;M<h.inChannels;++M)for(var D=0;D<h.outChannels;++D){for(var I=0,F=0;F<h.batchSize;++F)for(var R=E;R<C;++R)for(var P=j+R*p-_,L=T;L<N;++L){var B=A+L*v-x;I+=b?O.get(F,P,B,M)*S.get(F,R,L,D):O.get(F,M,P,B)*S.get(F,D,R,L)}y.set(I,j,A,M,D)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var Yf={kernelName:a.Conv2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.inputShape,c=r.strides,l=r.pad,f=r.dataFormat,d=r.dimRoundingMode;sl([o,u],"conv2dBackpropInput");var h=a.util.computeStrides(u.shape),p=a.util.computeStrides(o.shape),v=a.backend_util.convertConv2DDataFormat(f),m=a.backend_util.computeConv2DInfo(s,u.shape,c,1,l,d,!1,v),g=new a.TensorBuffer(m.inShape,"float32"),b=g.values,y=n.data.get(o.dataId).values,x=n.data.get(u.dataId).values,_=Object(i.a)(h,3),w=_[0],k=_[1],O=_[2],S=m.batchSize,j=m.filterHeight,E=m.filterWidth,C=m.inChannels,A=m.inHeight,T=m.inWidth,N=m.outChannels,M=m.outHeight,D=m.outWidth,I=m.strideHeight,F=m.strideWidth;v=m.dataFormat;for(var R=j-1-m.padInfo.top,P=E-1-m.padInfo.left,L="channelsLast"===v,B=g.strides[0],z=L?g.strides[1]:g.strides[2],U=L?g.strides[2]:1,W=L?1:g.strides[1],V=p[0],G=L?p[1]:p[2],q=L?p[2]:1,H=L?1:p[1],X=0;X<S;++X)for(var Y=0;Y<C;++Y)for(var K=0;K<A;++K)for(var $=K-R,Z=Math.max(0,Math.ceil($/I)),J=Math.min(M,(j+$)/I),Q=0;Q<T;++Q){for(var ee=Q-P,te=Math.max(0,Math.ceil(ee/F)),ne=Math.min(D,(E+ee)/F),re=0,ae=Z;ae<J;++ae)for(var ie=ae*I-$,oe=te;oe<ne;++oe)for(var ue=V*X+G*ae+q*oe,se=w*(j-1-ie)+k*(E-1-(oe*F-ee))+O*Y,ce=0;ce<N;++ce){re+=y[ue+H*ce]*x[se+ce]}b[B*X+z*K+U*Q+W*Y]=re}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var Kf={kernelName:a.Conv3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations;sl([i,o],"conv3d");for(var l=a.backend_util.computeConv3DInfo(i.shape,o.shape,u,c,s),f=l.filterDepth,d=l.filterHeight,h=l.filterWidth,p=l.dilationDepth,v=l.dilationHeight,m=l.dilationWidth,g=l.padInfo,b=g.front,y=g.left,x=g.top,_=new a.TensorBuffer(l.outShape,i.dtype),w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,O=_.values,S=a.util.computeStrides(i.shape),j=a.util.computeStrides(o.shape),E=0;E<l.batchSize;++E)for(var C=E*S[0],A=E*_.strides[0],T=0;T<l.outDepth;++T)for(var N=A+T*_.strides[1],M=T*l.strideDepth-b,D=0;D<f;++D){var I=M+D*p;if(!(I<0||I>=l.inDepth))for(var F=D*j[0],R=C+I*S[1],P=0;P<l.outHeight;++P)for(var L=N+P*_.strides[2],B=P*l.strideHeight-x,z=0;z<d;++z){var U=B+z*v;if(!(U<0||U>=l.inHeight))for(var W=F+z*j[1],V=R+U*S[2],G=0;G<l.outWidth;++G)for(var q=L+G*l.outChannels,H=G*l.strideWidth-y,X=0;X<h;++X){var Y=H+X*m;if(!(Y<0||Y>=l.inWidth))for(var K=W+X*j[2],$=V+Y*l.inChannels,Z=K,J=0;J<l.inChannels;++J){for(var Q=w[$+J],ee=0;ee<l.outChannels;++ee)O[q+ee]+=Q*k[Z+ee];Z+=l.outChannels}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var $f={kernelName:a.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=t.dy,s=r.strides,c=r.pad,l=r.filterShape;sl([o,u],"conv3dBackpropFilterV2");for(var f=a.util.computeStrides(o.shape),d=a.util.computeStrides(u.shape),h=a.backend_util.computeConv3DInfo(o.shape,l,s,1,c),p=h.strideDepth,v=h.strideHeight,m=h.strideWidth,g=h.filterDepth,b=h.filterHeight,y=h.filterWidth,x=new a.TensorBuffer(h.filterShape,"float32"),_=x.values,w=Object(i.a)(x.strides,4),k=w[0],O=w[1],S=w[2],j=w[3],E=n.data.get(u.dataId).values,C=Object(i.a)(d,4),A=C[0],T=C[1],N=C[2],M=C[3],D=n.data.get(o.dataId).values,I=Object(i.a)(f,4),F=I[0],R=I[1],P=I[2],L=I[3],B=h.padInfo.front,z=h.padInfo.left,U=h.padInfo.top,W=0;W<g;++W)for(var V=Math.max(0,Math.ceil((B-W)/p)),G=Math.min(h.outDepth,(h.inDepth+B-W)/p),q=W*k,H=0;H<b;++H)for(var X=Math.max(0,Math.ceil((U-H)/v)),Y=Math.min(h.outHeight,(h.inHeight+U-H)/v),K=H*O+q,$=0;$<y;++$)for(var Z=Math.max(0,Math.ceil((z-$)/m)),J=Math.min(h.outWidth,(h.inWidth+z-$)/m),Q=$*S+K,ee=0;ee<h.inChannels;++ee)for(var te=ee*j+Q,ne=0;ne<h.outChannels;++ne){for(var re=0,ae=0;ae<h.batchSize;++ae)for(var ie=ae*F,oe=ae*A,ue=V;ue<G;++ue)for(var se=(W+ue*p-B)*R+ie,ce=ue*T+oe,le=X;le<Y;++le)for(var fe=(H+le*v-U)*P+se,de=le*N+ce,he=Z;he<J;++he){var pe=he*M+de;re+=D[($+he*m-z)*L+fe+ee]*E[pe+ne]}_[te+ne]=re}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var Zf={kernelName:a.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.pad,c=r.strides,l=r.inputShape;sl([o],"conv3dBackpropInputV2");for(var f=a.util.computeStrides(o.shape),d=a.util.computeStrides(u.shape),h=a.backend_util.computeConv3DInfo(l,u.shape,c,1,s),p=new a.TensorBuffer(h.inShape,"float32"),v=p.values,m=Object(i.a)(p.strides,4),g=m[0],b=m[1],y=m[2],x=m[3],_=n.data.get(o.dataId).values,w=Object(i.a)(f,4),k=w[0],O=w[1],S=w[2],j=w[3],E=n.data.get(u.dataId).values,C=Object(i.a)(d,4),A=C[0],T=C[1],N=C[2],M=C[3],D=h.batchSize,I=h.filterDepth,F=h.filterHeight,R=h.filterWidth,P=h.inChannels,L=h.inDepth,B=h.inHeight,z=h.inWidth,U=h.outChannels,W=h.outDepth,V=h.outHeight,G=h.outWidth,q=h.strideDepth,H=h.strideHeight,X=h.strideWidth,Y=I-1-h.padInfo.front,K=F-1-h.padInfo.top,$=R-1-h.padInfo.left,Z=0;Z<D;++Z)for(var J=0;J<P;++J)for(var Q=0;Q<L;++Q)for(var ee=Q-Y,te=Math.max(0,Math.ceil(ee/q)),ne=Math.min(W,(I+ee)/q),re=0;re<B;++re)for(var ae=re-K,ie=Math.max(0,Math.ceil(ae/H)),oe=Math.min(V,(F+ae)/H),ue=0;ue<z;++ue){for(var se=ue-$,ce=Math.max(0,Math.ceil(se/X)),le=Math.min(G,(R+se)/X),fe=0,de=te;de<ne;++de)for(var he=de*q-ee,pe=ie;pe<oe;++pe)for(var ve=pe*H-ae,me=ce;me<le;++me)for(var ge=k*Z+O*de+S*pe+j*me,be=A*(I-1-he)+T*(F-1-ve)+N*(R-1-(me*X-se))+M*J,ye=0;ye<U;++ye){fe+=_[ge+ye]*E[be+ye]}v[g*Z+b*Q+y*re+x*ue+J]=fe}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},Jf=fl(a.Cos,(function(e){return Math.cos(e)})),Qf={kernelName:a.Cos,backendName:"cpu",kernelFunc:Jf},ed=fl(a.Cosh,(function(e){return Math.cosh(e)})),td={kernelName:a.Cosh,backendName:"cpu",kernelFunc:ed};var nd={kernelName:a.CropAndResize,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,o=t.image,u=t.boxes,s=t.boxInd,c=r.cropSize,l=r.method,f=r.extrapolationValue,d=Object(i.a)(o.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=u.shape[0],b=Object(i.a)(c,2),y=b[0],x=b[1],_=Object(a.buffer)([g,y,x,m],"float32"),w=n.data.get(u.dataId).values,k=n.data.get(s.dataId).values,O=n.data.get(o.dataId).values,S=a.util.computeStrides(o.shape),j=a.util.computeStrides(_.shape),E=0;E<g;E++){var C=4*E,A=w[C],T=w[C+1],N=w[C+2],M=w[C+3],D=k[E];if(!(D>=h))for(var I=y>1?(N-A)*(p-1)/(y-1):0,F=x>1?(M-T)*(v-1)/(x-1):0,R=0;R<y;R++){var P=y>1?A*(p-1)+R*I:.5*(A+N)*(p-1);if(P<0||P>p-1)for(var L=0;L<x;L++)for(var B=0;B<m;B++){var z=B+L*j[2]+R*j[1]+E*j[0];_.values[z]=f}else if("bilinear"===l)for(var U=Math.floor(P),W=Math.ceil(P),V=P-U,G=0;G<x;G++){var q=x>1?T*(v-1)+G*F:.5*(T+M)*(v-1);if(q<0||q>v-1)for(var H=0;H<m;H++){var X=H+G*j[2]+R*j[1]+E*j[0];_.values[X]=f}else for(var Y=Math.floor(q),K=Math.ceil(q),$=q-Y,Z=0;Z<m;Z++){var J=Z+Y*S[2]+U*S[1]+D*S[0],Q=O[J],ee=O[J=Z+K*S[2]+U*S[1]+D*S[0]],te=O[J=Z+Y*S[2]+W*S[1]+D*S[0]],ne=Q+(ee-Q)*$,re=te+(O[J=Z+K*S[2]+W*S[1]+D*S[0]]-te)*$;J=Z+G*j[2]+R*j[1]+E*j[0],_.values[J]=ne+(re-ne)*V}}else for(var ae=0;ae<x;++ae){var ie=x>1?T*(v-1)+ae*F:.5*(T+M)*(v-1);if(ie<0||ie>v-1)for(var oe=0;oe<m;oe++){var ue=oe+ae*j[2]+R*j[1]+E*j[0];_.values[ue]=f}else for(var se=Math.round(ie),ce=Math.round(P),le=0;le<m;le++){var fe=le+se*S[2]+ce*S[1]+D*S[0],de=le+ae*j[2]+R*j[1]+E*j[0];_.values[de]=O[fe]}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var rd={kernelName:a.Cumsum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.exclusive,s=r.reverse;sl(i,"cumsum");var c=a.backend_util.getAxesPermutation([o],i.shape.length),l=i;null!=c&&(l=ef({inputs:{x:i},backend:n,attrs:{perm:c}}));var f=a.backend_util.getInnerMostAxes(1,i.shape.length)[0];if(f!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(f));for(var d=Object(a.upcastType)(l.dtype,"int32"),h=a.util.makeZerosTypedArray(a.util.sizeFromShape(l.shape),d),p=n.data.get(l.dataId).values,v=l.shape[l.shape.length-1],m=s?function(e,t){return e+v-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=v)for(var b=0;b<v;b++){var y=m(g,b);if(0===b)h[y]=u?0:p[y];else{var x=m(g,b-1);h[y]=u?p[x]+h[x]:p[y]+h[x]}}var _=n.makeTensorInfo(l.shape,d,h);if(null!=c){var w=ef({inputs:{x:_},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(c)}});return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(l),w}return _}};var ad={kernelName:a.DenseBincount,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=Tf(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}if(2===a.shape.length){var c=Nf(n.bufferSync(a),n.bufferSync(i),o,u);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var id={kernelName:a.DepthToSpace,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockSize,u=r.dataFormat;a.util.assert("NHWC"===u,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(u)})),a.util.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));for(var s=i.shape[0],c=i.shape[1],l=i.shape[2],f=i.shape[3],d=c*o,h=l*o,p=f/(o*o),v=n.data.get(i.dataId).values,m=new Float32Array(s*d*h*p),g=0,b=0;b<s;++b)for(var y=0;y<d;++y)for(var x=Math.floor(y/o),_=y%o,w=0;w<h;++w)for(var k=Math.floor(w/o),O=(_*o+w%o)*p,S=0;S<p;++S){var j=S+O+f*(k+l*(x+c*b));m[g++]=v[j]}return n.makeTensorInfo([s,d,h,p],i.dtype,m)}};function od(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=r.dimRoundingMode;sl([i,o],"depthwiseConv2DNative");var f=a.util.computeStrides(i.shape),d=a.util.computeStrides(o.shape),h=c;null==h&&(h=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(h,"'")}));for(var p=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,h,s,l,!0),v=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,b=p.dilationWidth,y=p.padInfo,x=y.left,_=y.top,w=p.outChannels/p.inChannels,k=new a.TensorBuffer(p.outShape,i.dtype),O=n.data.get(i.dataId).values,S=n.data.get(o.dataId).values,j=k.values,E=0;E<p.batchSize;++E)for(var C=E*f[0],A=E*k.strides[0],T=0;T<p.outHeight;++T)for(var N=A+T*k.strides[1],M=T*p.strideHeight-x,D=0;D<v;++D){var I=M+D*g;if(!(I<0||I>=p.inHeight))for(var F=D*d[0],R=C+I*f[1],P=0;P<p.outWidth;++P)for(var L=N+P*k.strides[2],B=P*p.strideWidth-_,z=0;z<m;++z){var U=B+z*b;if(!(U<0||U>=p.inWidth))for(var W=F+z*d[1],V=R+U*p.inChannels,G=L,q=W,H=0;H<p.inChannels;++H){for(var X=O[V+H],Y=0;Y<w;++Y)j[G+Y]+=X*S[q+Y];G+=w,q+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var ud={kernelName:a.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:od};var sd={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.filterShape;sl([i,o],"depthwiseConv2dNativeBackpropFilter");for(var d=a.backend_util.computeConv2DInfo(i.shape,f,u,s,c,l,!0),h=d.strideHeight,p=d.strideWidth,v=d.filterHeight,m=d.filterWidth,g=new a.TensorBuffer(d.filterShape,"float32"),b=d.padInfo.left,y=d.padInfo.top,x=d.outChannels/d.inChannels,_=n.data.get(i.dataId).values,w=new a.TensorBuffer(i.shape,i.dtype,_),k=n.data.get(o.dataId).values,O=new a.TensorBuffer(o.shape,o.dtype,k),S=0;S<v;++S)for(var j=Math.max(0,Math.ceil((y-S)/h)),E=Math.min(d.outHeight,(d.inHeight+y-S)/h),C=0;C<m;++C)for(var A=Math.max(0,Math.ceil((b-C)/p)),T=Math.min(d.outWidth,(d.inWidth+b-C)/p),N=0;N<d.outChannels;++N){for(var M=Math.trunc(N/x),D=N%x,I=0,F=0;F<d.batchSize;++F)for(var R=j;R<E;++R)for(var P=S+R*h-y,L=A;L<T;++L){var B=C+L*p-b;I+=w.get(F,P,B,M)*O.get(F,R,L,N)}g.set(I,S,C,M,D)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var cd={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.dy,u=t.filter,s=r.strides,c=r.dilations,l=r.pad,f=r.dimRoundingMode,d=r.inputShape;sl([o,u],"depthwiseConv2DNativeBackpropInput");for(var h=a.util.computeStrides(o.shape),p=a.util.computeStrides(u.shape),v=a.backend_util.computeConv2DInfo(d,u.shape,s,c,l,f,!0),m=new a.TensorBuffer(v.inShape,"float32"),g=m.values,b=Object(i.a)(m.strides,3),y=b[0],x=b[1],_=b[2],w=n.data.get(o.dataId).values,k=Object(i.a)(h,3),O=k[0],S=k[1],j=k[2],E=n.data.get(u.dataId).values,C=Object(i.a)(p,3),A=C[0],T=C[1],N=C[2],M=v.batchSize,D=v.filterHeight,I=v.filterWidth,F=v.inChannels,R=v.inHeight,P=v.inWidth,L=v.outChannels,B=v.outHeight,z=v.outWidth,U=v.strideHeight,W=v.strideWidth,V=D-1-v.padInfo.top,G=I-1-v.padInfo.left,q=L/F,H=0;H<M;++H)for(var X=0;X<F;++X)for(var Y=0;Y<R;++Y)for(var K=Y-V,$=Math.max(0,Math.ceil(K/U)),Z=Math.min(B,(D+K)/U),J=0;J<P;++J){for(var Q=J-G,ee=Math.max(0,Math.ceil(Q/W)),te=Math.min(z,(I+Q)/W),ne=0,re=$;re<Z;++re)for(var ae=re*U-K,ie=ee;ie<te;++ie)for(var oe=O*H+S*re+j*ie,ue=A*(D-1-ae)+T*(I-1-(ie*W-Q))+N*X,se=0;se<q;++se){ne+=w[oe+(X*q+se)]*E[ue+se]}g[y*H+x*Y+_*J+X]=ne}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var ld={kernelName:a.Diag,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,i=a.util.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,u=Object(a.buffer)([i,i],r.dtype),s=u.values,c=0;c<o.length;c++)s[c*i+c]=o[c];var l=[].concat(Object(Tn.a)(r.shape),Object(Tn.a)(r.shape));return n.makeTensorInfo(l,u.dtype,u.values)}},fd={kernelName:a.Dilation2D,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=n,f=l.data.get(i.dataId).values,d=i.shape.length,h=l.data.get(o.dataId).values,p=o.shape.length,v=a.backend_util.computeDilation2DInfo(i.shape,o.shape,u,s,"NHWC",c),m=v.batchSize,g=v.inHeight,b=v.inWidth,y=v.inChannels,x=v.outHeight,_=v.outWidth,w=v.padInfo,k=v.strideHeight,O=v.strideWidth,S=v.filterHeight,j=v.filterWidth,E=v.dilationHeight,C=v.dilationWidth,A=v.outShape,T=a.util.sizeFromShape(A),N=A.length,M=a.util.getArrayFromDType(i.dtype,T),D=0;D<m;++D)for(var I=0;I<x;++I)for(var F=I*k-w.top,R=0;R<_;++R)for(var P=R*O-w.left,L=0;L<y;++L){for(var B=Number.MIN_SAFE_INTEGER,z=0;z<S;++z){var U=F+z*E;if(U>=0&&U<g)for(var W=0;W<j;++W){var V=P+W*C;if(V>=0&&V<b){var G=a.util.locToIndex([D,U,V,L],d,a.util.computeStrides(i.shape)),q=a.util.locToIndex([z,W,L],p,a.util.computeStrides(o.shape)),H=f[G]+h[q];H>B&&(B=H)}}}M[a.util.locToIndex([D,I,R,L],N,a.util.computeStrides(A))]=B}return{dataId:l.write(a.util.toTypedArray(M,i.dtype),A,i.dtype),shape:A,dtype:i.dtype}}},dd={kernelName:a.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.dy,s=r.strides,c=r.pad,l=r.dilations,f=n,d=a.util.toNestedArray(i.shape,f.data.get(i.dataId).values),h=a.util.toNestedArray(o.shape,f.data.get(o.dataId).values),p=a.backend_util.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",l),v=p.batchSize,m=p.inHeight,g=p.inWidth,b=p.inChannels,y=p.outHeight,x=p.outWidth,_=p.padInfo,w=p.strideHeight,k=p.strideWidth,O=p.filterHeight,S=p.filterWidth,j=p.dilationHeight,E=p.dilationWidth,C=p.outShape;a.util.assert(u.rank===C.length,(function(){return"Error in ".concat(a.Dilation2DBackpropFilter,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(u.rank)}));for(var A=a.util.toNestedArray(C,f.data.get(u.dataId).values),T=a.util.makeZerosNestedTypedArray(o.shape,o.dtype),N=0;N<v;++N)for(var M=0;M<y;++M)for(var D=M*w-_.top,I=0;I<x;++I)for(var F=I*k-_.left,R=0;R<b;++R){for(var P=Number.MIN_SAFE_INTEGER,L=0,B=0,z=0;z<O;++z){var U=D+z*j;if(U>=0&&U<m)for(var W=0;W<S;++W){var V=F+W*E;if(V>=0&&V<g){var G=d[N][U][V][R]+h[z][W][R];G>P&&(P=G,L=z,B=W)}}}T[L][B][R]+=A[N][M][I][R]}return{dataId:f.write(a.util.toTypedArray(T,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},hd={kernelName:a.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.dy,s=r.strides,c=r.pad,l=r.dilations,f=n,d=a.util.toNestedArray(i.shape,f.data.get(i.dataId).values),h=a.util.toNestedArray(o.shape,f.data.get(o.dataId).values),p=a.backend_util.computeDilation2DInfo(i.shape,o.shape,s,c,"NHWC",l),v=p.batchSize,m=p.inHeight,g=p.inWidth,b=p.inChannels,y=p.outHeight,x=p.outWidth,_=p.padInfo,w=p.strideHeight,k=p.strideWidth,O=p.filterHeight,S=p.filterWidth,j=p.dilationHeight,E=p.dilationWidth,C=p.outShape;a.util.assert(u.rank===C.length,(function(){return"Error in ".concat(a.Dilation2DBackpropInput,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(u.rank)}));for(var A=a.util.toNestedArray(C,f.data.get(u.dataId).values),T=a.util.makeZerosNestedTypedArray(i.shape,i.dtype),N=0;N<v;++N)for(var M=0;M<y;++M)for(var D=M*w-_.top,I=0;I<x;++I)for(var F=I*k-_.left,R=0;R<b;++R){for(var P=Number.MIN_SAFE_INTEGER,L=D<0?0:D,B=F<0?0:F,z=0;z<O;++z){var U=D+z*j;if(U>=0&&U<m)for(var W=0;W<S;++W){var V=F+W*E;if(V>=0&&V<g){var G=d[N][U][V][R]+h[z][W][R];G>P&&(P=G,L=U,B=V)}}}T[N][L][B][R]+=A[N][M][I][R]}return{dataId:f.write(a.util.toTypedArray(T,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};var pd={kernelName:a.EluGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,i=t.y;sl([r,i],"eluGrad");for(var o=new Float32Array(a.util.sizeFromShape(i.shape)),u=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values,c=0;c<u.length;++c){var l=u[c];o[c]=l>=1?s[c]:s[c]*(l+1)}return n.makeTensorInfo(i.shape,"float32",o)}},vd=yl((function(e,t){return e===t?1:0})),md=Fl(a.Equal,vd,null,"bool"),gd={kernelName:a.Equal,backendName:"cpu",kernelFunc:md},bd=a.backend_util.ERF_P,yd=a.backend_util.ERF_A1,xd=a.backend_util.ERF_A2,_d=a.backend_util.ERF_A3,wd=a.backend_util.ERF_A4,kd=a.backend_util.ERF_A5,Od=fl(a.Erf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+bd*n);return t*(1-((((kd*r+wd)*r+_d)*r+xd)*r+yd)*r*Math.exp(-n*n))})),Sd={kernelName:a.Erf,backendName:"cpu",kernelFunc:Od},jd=Df((function(e){return Math.exp(e)})),Ed=dl(a.Exp,jd),Cd={kernelName:a.Exp,backendName:"cpu",kernelFunc:Ed};function Ad(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.input,o=r.dim,u=i.shape.length,s=i.shape.slice(),c=o;return o<0&&(a.util.assert(-(u+1)<=o,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),c=u+o+1),s.splice(c,0,1),Ul({inputs:{x:i},backend:n,attrs:{shape:s}})}var Td={kernelName:a.ExpandDims,backendName:"cpu",kernelFunc:Ad},Nd=Df((function(e){return Math.expm1(e)})),Md=dl(a.Expm1,Nd),Dd={kernelName:a.Expm1,backendName:"cpu",kernelFunc:Md},Id=yl((function(e,t){return e*t})),Fd=Rl((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),Rd=Fl(a.Multiply,Id,Fd),Pd={kernelName:a.Multiply,backendName:"cpu",kernelFunc:Rd},Ld=yl((function(e,t){return e/t})),Bd=Fl(a.RealDiv,Ld),zd={kernelName:a.RealDiv,backendName:"cpu",kernelFunc:Bd},Ud=yl((function(e,t){return e-t})),Wd=Rl((function(e,t,n,r){return{real:e-n,imag:t-r}})),Vd=Fl(a.Sub,Ud,Wd),Gd={kernelName:a.Sub,backendName:"cpu",kernelFunc:Vd};function qd(e,t,n){for(var r=e.shape,i=r[0],o=r[1],u=n.data.get(e.dataId),s=u.complexTensorInfos.real,c=u.complexTensorInfos.imag,l=[i,o],f=a.util.sizeFromShape(l),d=a.util.getTypedArrayFromDType("float32",f),h=a.util.getTypedArrayFromDType("float32",f),p=0;p<i;p++){for(var v=Ef({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,o]}}),m=Ef({inputs:{x:c},backend:n,attrs:{begin:[p,0],size:[1,o]}}),g=Cl({inputs:{real:v,imag:m},backend:n}),b=Hd(g,t,n),y=b.real,x=b.imag,_=a.backend_util.mergeRealAndImagArrays(y,x),w=0;w<o;w++){var k=a.backend_util.getComplexWithIndex(_,w);d[p*o+w]=k.real,h[p*o+w]=k.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var O=n.makeTensorInfo(l,"float32",d),S=n.makeTensorInfo(l,"float32",h),j=Cl({inputs:{real:O,imag:S},backend:n});return n.disposeIntermediateTensorInfo(O),n.disposeIntermediateTensorInfo(S),j}function Hd(e,t,n){var r=a.util.sizeFromShape(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,u=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((b=r)&b-1)){var s=Xd(o,u,r,t,n),c=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(c,"float32",s.real),f=n.makeTensorInfo(c,"float32",s.imag),d=n.makeTensorInfo([],"float32",a.util.createScalarValue(r,"float32")),h=vl({inputs:{x:d},backend:n}),p=zd.kernelFunc({inputs:{a:l,b:d},backend:n}),v=zd.kernelFunc({inputs:{a:f,b:h},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(v.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),{real:m,imag:g}}return s}var b,y=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,u=0,s=0;s<t;s++){var c=a.backend_util.exponent(i*s,t,n),l=a.backend_util.getComplexWithIndex(e,s);o+=l.real*c.real-l.imag*c.imag,u+=l.real*c.imag+l.imag*c.real}n&&(o/=t,u/=t),a.backend_util.assignToTypedArray(r,o,u,i)}return r}(a.backend_util.mergeRealAndImagArrays(o,u),r,t);return a.backend_util.splitRealAndImagArrays(y)}function Xd(e,t,n,r,i){if(1===n)return{real:e,imag:t};var o=a.backend_util.mergeRealAndImagArrays(e,t),u=n/2,s=a.backend_util.complexWithEvenIndex(o),c=s.real,l=s.imag,f=[c.length],d=i.makeTensorInfo(f,"float32",c),h=i.makeTensorInfo(f,"float32",l),p=Cl({inputs:{real:d,imag:h},backend:i}),v=a.backend_util.complexWithOddIndex(o),m=v.real,g=v.imag,b=[m.length],y=i.makeTensorInfo(b,"float32",m),x=i.makeTensorInfo(b,"float32",g),_=Cl({inputs:{real:y,imag:x},backend:i}),w=Xd(c,l,u,r,i),k=w.real,O=w.imag,S=[k.length],j=i.makeTensorInfo(S,"float32",k),E=i.makeTensorInfo(S,"float32",O),C=Cl({inputs:{real:j,imag:E},backend:i}),A=Xd(m,g,u,r,i),T=A.real,N=A.imag,M=[T.length],D=i.makeTensorInfo(M,"float32",T),I=i.makeTensorInfo(M,"float32",N),F=Cl({inputs:{real:D,imag:I},backend:i}),R=a.backend_util.exponents(n,r),P=[R.real.length],L=i.makeTensorInfo(P,"float32",R.real),B=i.makeTensorInfo(P,"float32",R.imag),z=Cl({inputs:{real:L,imag:B},backend:i}),U=Rd({inputs:{a:z,b:F},backend:i}),W=Bl({inputs:{a:C,b:U},backend:i}),V=Vd({inputs:{a:C,b:U},backend:i}),G=Nl({inputs:{input:W},backend:i}),q=Nl({inputs:{input:V},backend:i}),H=Uf({inputs:{input:W},backend:i}),X=Uf({inputs:{input:V},backend:i}),Y=Vf({inputs:[G,q],backend:i,attrs:{axis:0}}),K=Vf({inputs:[H,X],backend:i,attrs:{axis:0}}),$=i.data.get(Y.dataId).values,Z=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(Y),i.disposeIntermediateTensorInfo(K),{real:$,imag:Z}}var Yd={kernelName:a.FFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],u=Ul({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=qd(u,!1,n),c=Ul({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}};function Kd(e){var t=e.backend,n=e.attrs,r=n.shape,i=n.value,o=n.dtype||a.util.inferDtype(i),u=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return function(e,t,n){e.fill(t)}(u,i),t.makeTensorInfo(r,o,u)}var $d={kernelName:a.Fill,backendName:"cpu",kernelFunc:Kd};var Zd={kernelName:a.FlipLeftRight,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,o=n,u=a.util.getTypedArrayFromDType(r.dtype,a.util.sizeFromShape(r.shape)),s=Object(i.a)(r.shape,4),c=s[0],l=s[1],f=s[2],d=s[3],h=o.data.get(r.dataId).values,p=0;p<c;p++)for(var v=p*f*l*d,m=0;m<l;m++)for(var g=m*(f*d),b=0;b<f;b++)for(var y=b*d,x=0;x<d;x++){var _=[c,m,b,x][2],w=Math.round(f-_),k=v+g+y+x,O=h[k];if(w>=0&&w<f)O=h[v+g+w*d+x];u[k]=O}return{dataId:o.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Jd=Df((function(e){return Math.floor(e)})),Qd=dl(a.Floor,Jd),eh={kernelName:a.Floor,backendName:"cpu",kernelFunc:Qd},th=yl((function(e,t){return Math.floor(e/t)})),nh=Fl(a.FloorDiv,th,null,"int32"),rh={kernelName:a.FloorDiv,backendName:"cpu",kernelFunc:nh};var ah={kernelName:a.FusedConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=qf({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Bl({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=El(n,v,h,u,p),n.disposeIntermediateTensorInfo(g)}return v}};var ih={kernelName:a.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,u=t.preluActivationWeights,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=od({inputs:{x:a,filter:i},backend:n,attrs:{strides:s,pad:c,dataFormat:l,dilations:f,dimRoundingMode:d}});if(o){var m=v;v=Bl({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=El(n,v,h,u,p),n.disposeIntermediateTensorInfo(g)}return v}};var oh={kernelName:a.GatherNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,u=a.util.sizeFromShape(r.shape),s=o.shape,c=s[s.length-1],l=a.backend_util.prepareAndValidate(r,o),f=Object(i.a)(l,4),d=f[0],h=f[1],p=f[2],v=f[3];if(0===h)return n.makeTensorInfo(d,r.dtype,[]);for(var m=Object(a.buffer)([h,p],r.dtype),g=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,y=0;y<h;y++){for(var x=[],_=0,w=0;w<c;w++){var k=g[y*c+w];_+=k*v[w],x.push(k)}if(_<0||_>=u/p)throw new Error("Invalid indices: ".concat(x," does not index into ").concat(r.shape));for(var O=0;O<p;O++)m.values[y*p+O]=b[_*p+O]}return n.makeTensorInfo(d,m.dtype,m.values)}};function uh(e,t,n){for(var r=Object(a.buffer)(n,e.dtype),i=0;i<r.size;++i){var o=r.indexToLoc(i).slice(),u=o[0],s=o[2],c=t.locToIndex([u,s]);o[2]=t.values[c];var l=e.locToIndex(o);r.values[i]=e.values[l]}return r}var sh={kernelName:a.GatherV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.indices,u=r.axis,s=r.batchDims;sl([i,o],"gatherV2");var c=s;null==s&&(c=0);var l=a.util.sizeFromShape(o.shape),f=a.util.parseAxisParam(u,i.shape)[0],d=a.backend_util.segment_util.collectGatherOpShapeInfo(i,o,f,c),h=Ul({inputs:{x:i},backend:n,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),p=Ul({inputs:{x:o},backend:n,attrs:{shape:[d.batchSize,l/d.batchSize]}}),v=[d.batchSize,d.outerSize,l/d.batchSize,d.sliceSize],m=n.bufferSync(p),g=uh(n.bufferSync(h),m,v);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.makeTensorInfo(d.outputShape,g.dtype,g.values)}},ch=yl((function(e,t){return e>t?1:0})),lh=Fl(a.Greater,ch,null,"bool"),fh={kernelName:a.Greater,backendName:"cpu",kernelFunc:lh},dh=yl((function(e,t){return e>=t?1:0})),hh=Fl(a.GreaterEqual,dh,null,"bool"),ph={kernelName:a.GreaterEqual,backendName:"cpu",kernelFunc:hh};var vh={kernelName:a.IFFT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,i=a.util.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],u=Ul({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=qd(u,!0,n),c=Ul({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}},mh=fl(a.IsFinite,(function(e){return Number.isFinite(e)?1:0}),"bool"),gh={kernelName:a.IsFinite,backendName:"cpu",kernelFunc:mh},bh=fl(a.IsInf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),yh={kernelName:a.IsInf,backendName:"cpu",kernelFunc:bh},xh=fl(a.IsNan,(function(e){return Number.isNaN(e)?1:0}),"bool"),_h={kernelName:a.IsNan,backendName:"cpu",kernelFunc:xh},wh=yl((function(e,t){return e<t?1:0})),kh=Fl(a.Less,wh,null,"bool"),Oh={kernelName:a.Less,backendName:"cpu",kernelFunc:kh},Sh=yl((function(e,t){return e<=t?1:0})),jh=Fl(a.LessEqual,Sh,null,"bool"),Eh={kernelName:a.LessEqual,backendName:"cpu",kernelFunc:jh};function Ch(e,t,n){var r=(t-e)/(n-1),i=a.util.makeZerosTypedArray(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}var Ah={kernelName:a.LinSpace,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=Ch(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},Th=Df((function(e){return Math.log(e)})),Nh=dl(a.Log,Th),Mh={kernelName:a.Log,backendName:"cpu",kernelFunc:Nh},Dh=fl(a.Log1p,(function(e){return Math.log1p(e)})),Ih={kernelName:a.Log1p,backendName:"cpu",kernelFunc:Dh},Fh=yl((function(e,t){return e&&t})),Rh=Fl(a.LogicalAnd,Fh,null,"bool"),Ph={kernelName:a.LogicalAnd,backendName:"cpu",kernelFunc:Rh},Lh=fl(a.LogicalNot,(function(e){return e?0:1}),"bool"),Bh={kernelName:a.LogicalNot,backendName:"cpu",kernelFunc:Lh},zh=yl((function(e,t){return e||t})),Uh=Fl(a.LogicalOr,zh,null,"bool"),Wh={kernelName:a.LogicalOr,backendName:"cpu",kernelFunc:Uh};var Vh={kernelName:a.LRN,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta;sl(i,"LRN");var l=i.shape[3],f=l-1,d=n.data.get(i.dataId).values,h=a.util.sizeFromShape(i.shape),p=new Float32Array(h);function v(e){for(var t=e%l,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,f),a=0;n<=r;n++){var i=d[n];a+=i*i}return a}for(var m=0;m<h;m++){var g=v(m),b=d[m]*Math.pow(u+s*g,-c);p[m]=b}return n.makeTensorInfo(i.shape,i.dtype,p)}};var Gh={kernelName:a.LRNGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.y,u=t.dy,s=r.depthRadius,c=r.bias,l=r.alpha,f=r.beta;sl(u,"LRNGrad");for(var d=a.util.sizeFromShape(u.shape),h=u.shape[3],p=n.data.get(u.dataId).values,v=n.data.get(i.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(d),b=d,y=0;y<b;y++){for(var x=y%h,_=y-x+Math.max(0,x-s),w=y-x+Math.min(h,x+s+1),k=0,O=_;O<w;O++)k+=Math.pow(v[O],2);k=l*k+c;for(var S=_;S<w;S++){var j=-2*l*f*v[S]*m[y]/k;y===S&&(j+=Math.pow(k,-f)),j*=p[y],g[S]+=j}}return n.makeTensorInfo(u.shape,i.dtype,g)}};function qh(e,t,n,r){for(var i=a.util.getTypedArrayFromDType(r,a.util.sizeFromShape(n)),o=0;o<i.length;++o){for(var u=o*t,s=e[u],c=0;c<t;++c){var l=e[u+c];l>s&&(s=l)}i[o]=s}return i}function Hh(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.reductionIndices,s=r.keepDims,c=n,l=o.shape,f=l.length,d=a.util.parseAxisParam(u,l),h=d,p=a.backend_util.getAxesPermutation(h,f),v=c.data.get(o.dataId).values;if(null!=p){for(var m=new Array(f),g=0;g<m.length;g++)m[g]=l[p[g]];v=Ql(v,l,o.dtype,p,m),h=a.backend_util.getInnerMostAxes(h.length,f),l=m}sl(o,"max"),a.backend_util.assertAxesAreInnerMostDims("max",h,f);var b=a.backend_util.computeOutAndReduceShapes(l,h),y=Object(i.a)(b,2),x=y[0],_=y[1],w=qh(v,a.util.sizeFromShape(_),x,o.dtype),k=c.write(w,x,o.dtype),O=x;s&&(O=a.backend_util.expandShapeToKeepDim(x,d));return{dataId:k,shape:O,dtype:o.dtype}}var Xh={kernelName:a.Max,backendName:"cpu",kernelFunc:Hh},Yh=yl((function(e,t){return Math.max(e,t)})),Kh=Fl(a.Maximum,Yh),$h={kernelName:a.Maximum,backendName:"cpu",kernelFunc:Kh};var Zh={kernelName:a.MaxPool,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;sl(i,"maxPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l,f=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===f.filterWidth&&1===f.filterHeight&&a.util.arraysEqual(f.inShape,f.outShape))l=vl({inputs:{x:i},backend:n});else{var d=n.data.get(i.dataId).values,h=a.util.computeStrides(i.shape),p=bf(d,i.shape,i.dtype,h,f,"max");l=n.makeTensorInfo(f.outShape,i.dtype,p.values)}return l}};var Jh={kernelName:a.MaxPool3D,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat;sl(i,"maxPool3d");var f=a.backend_util.computePool3DInfo(i.shape,o,u,1,s,c,l),d=xf(n.data.get(i.dataId).values,i.shape,i.dtype,a.util.computeStrides(i.shape),f,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var Qh={kernelName:a.MaxPool3DGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode;sl([i,o],"maxPool3DGrad");for(var f=a.backend_util.computePool3DInfo(o.shape,u,s,1,c,l),d=function(e,t){for(var n=Object(a.buffer)(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,u=t.dilationDepth,s=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,v=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var b=0;b<t.outDepth;++b){for(var y=b*r-h,x=y;x<0;)x+=u;for(var _=Math.min(t.inDepth,l+y),w=0;w<t.outHeight;++w){for(var k=w*i-p,O=k;O<0;)O+=s;for(var S=Math.min(t.inHeight,f+k),j=0;j<t.outWidth;++j){for(var E=j*o-v,C=E;C<0;)C+=c;for(var A=Math.min(t.inWidth,d+E),T=Number.NEGATIVE_INFINITY,N=-1,M=x;M<_;M+=u)for(var D=M-y,I=O;I<S;I+=s)for(var F=I-k,R=C;R<A;R+=c){var P=R-E,L=e.get(m,M,I,R,g);L>=T&&(T=L,N=D*f*d+F*f+P)}n.set(N,m,b,w,j,g)}}}return n}(n.bufferSync(o),f),h=f.strideDepth,p=f.strideHeight,v=f.strideWidth,m=f.dilationDepth,g=f.dilationHeight,b=f.dilationWidth,y=f.effectiveFilterDepth,x=f.effectiveFilterHeight,_=f.effectiveFilterWidth,w=y-1-f.padInfo.front,k=_-1-f.padInfo.left,O=x-1-f.padInfo.top,S=Object(a.buffer)(o.shape,"float32"),j=n.bufferSync(i),E=0;E<f.batchSize;++E)for(var C=0;C<f.inChannels;++C)for(var A=0;A<f.inDepth;++A)for(var T=0;T<f.inHeight;++T)for(var N=0;N<f.inWidth;++N){for(var M=A-w,D=T-O,I=N-k,F=0,R=0;R<y;R+=m){var P=(M+R)/h;if(!(P<0||P>=f.outDepth||Math.floor(P)!==P))for(var L=0;L<x;L+=g){var B=(D+L)/p;if(!(B<0||B>=f.outHeight||Math.floor(B)!==B))for(var z=0;z<_;z+=b){var U=(I+z)/v;if(!(U<0||U>=f.outWidth||Math.floor(U)!==U)){var W=y*x*_-1-d.get(E,P,B,U,C)===R*x*_+L*_+z?1:0;if(0!==W)F+=j.get(E,P,B,U,C)*W}}}}S.set(F,E,A,T,N,C)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var ep={kernelName:a.MaxPoolGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;sl([o,t.output],"maxPoolGrad");for(var s=r.filterSize,c=r.strides,l=r.pad,f=r.dimRoundingMode,d=a.backend_util.computePool2DInfo(u.shape,s,c,1,l,f),h=n.data.get(u.dataId).values,p=Object(a.buffer)(d.outShape,u.dtype,yf(h,u.shape,u.dtype,d).values),v=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,b=d.dilationWidth,y=d.effectiveFilterHeight,x=d.effectiveFilterWidth,_=x-1-d.padInfo.left,w=y-1-d.padInfo.top,k=Object(a.buffer)(u.shape,"float32"),O=n.data.get(i.dataId).values,S=Object(a.buffer)(i.shape,"float32",O),j=0;j<d.batchSize;++j)for(var E=0;E<d.inChannels;++E)for(var C=0;C<d.inHeight;++C)for(var A=0;A<d.inWidth;++A){for(var T=C-w,N=A-_,M=0,D=0;D<y;D+=g){var I=(T+D)/v;if(!(I<0||I>=d.outHeight||Math.floor(I)!==I))for(var F=0;F<x;F+=b){var R=(N+F)/m;if(!(R<0||R>=d.outWidth||Math.floor(R)!==R)){var P=y*x-1-p.get(j,I,R,E)===D*x+F?1:0;if(0!==P)M+=S.get(j,I,R,E)*P}}}k.set(M,j,C,A,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var tp={kernelName:a.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.filterSize,s=n.strides,c=n.pad,l=n.includeBatchInIndex,f=r;sl(o,"MaxPoolWithArgmax");var d=f.data.get(o.dataId).values,h=a.backend_util.computePool2DInfo(o.shape,u,s,[1,1],c),p=function(e,t,n,r,i){var o=bf(e,0,n,a.util.computeStrides(t),i,"max"),u=yf(e,t,n,i,!0,r);return[o.values,u.values]}(d,o.shape,o.dtype,l,h),v=Object(i.a)(p,2),m=v[0],g=v[1],b=f.write(m,h.outShape,o.dtype),y=f.write(g,h.outShape,o.dtype);return[{dataId:b,shape:h.outShape,dtype:o.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};function np(e){var t,n=e.inputs,r=e.backend,o=e.attrs,u=n.x,s=o.axis,c=o.keepDims;sl(u,"sum");var l=(t="bool"===u.dtype?Dl({inputs:{x:u},backend:r,attrs:{dtype:"int32"}}):vl({inputs:{x:u},backend:r})).shape.length,f=a.util.parseAxisParam(s,t.shape),d=a.backend_util.getAxesPermutation(f,l),h=f,p=t;null!=d&&(p=ef({inputs:{x:t},backend:r,attrs:{perm:d}}),h=a.backend_util.getInnerMostAxes(h.length,l)),a.backend_util.assertAxesAreInnerMostDims("sum",h,p.shape.length);for(var v=a.backend_util.computeOutAndReduceShapes(p.shape,h),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Tl(r,g,a.backend_util.upcastType(p.dtype,"int32")),x=a.util.sizeFromShape(b),_=r.data.get(y.dataId).values,w=r.data.get(p.dataId).values,k=0;k<_.length;++k){for(var O=k*x,S=0,j=0;j<x;++j)S+=w[O+j];_[k]=S}if(c){var E=y;y=Ul({inputs:{x:y},backend:r,attrs:{shape:a.backend_util.expandShapeToKeepDim(y.shape,f)}}),r.disposeIntermediateTensorInfo(E)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(p),y}var rp={kernelName:a.Sum,backendName:"cpu",kernelFunc:np};var ap={kernelName:a.Mean,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.keepDims,s=a.util.parseAxisParam(o,i.shape),c=a.backend_util.computeOutAndReduceShapes(i.shape,s)[1],l=a.util.sizeFromShape(c),f=[],d=n.makeTensorInfo([],"float32",new Float32Array([l]));f.push(d);var h=Dl({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});f.push(h);var p=Bd({inputs:{a:h,b:d},backend:n});f.push(p);var v=np({inputs:{x:p},backend:n,attrs:{axis:o,keepDims:u}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var ip={kernelName:a.Min,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims;sl(o,"min");var c=a.util.parseAxisParam(u,o.shape),l=c,f=a.backend_util.getAxesPermutation(l,o.shape.length),d=o;null!=f&&(d=ef({inputs:{x:o},backend:n,attrs:{perm:f}}),l=a.backend_util.getInnerMostAxes(l.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",l,d.shape.length);for(var h=a.backend_util.computeOutAndReduceShapes(d.shape,l),p=Object(i.a)(h,2),v=p[0],m=p[1],g=a.util.sizeFromShape(m),b=a.util.makeZerosTypedArray(a.util.sizeFromShape(v),d.dtype),y=n.data.get(d.dataId).values,x=0;x<b.length;++x){for(var _=x*g,w=y[_],k=0;k<g;++k){var O=y[_+k];O<w&&(w=O)}b[x]=w}null!=f&&n.disposeIntermediateTensorInfo(d);var S=n.makeTensorInfo(v,d.dtype,b);if(s){var j=Ul({inputs:{x:S},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(v,c)}});return n.disposeIntermediateTensorInfo(S),j}return S}},op=yl((function(e,t){return Math.min(e,t)})),up=Fl(a.Minimum,op),sp={kernelName:a.Minimum,backendName:"cpu",kernelFunc:up};var cp={kernelName:a.MirrorPad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.mode;sl(i,"mirrorPad");for(var s=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=o.map((function(e,t){return e[0]+i.shape[t]})),f="reflect"===u?0:1,d=n.data.get(i.dataId).values,h=i.shape.length,p=a.util.computeStrides(i.shape),v=a.util.sizeFromShape(s),m=s.length,g=a.util.computeStrides(s),b=a.util.getTypedArrayFromDType(i.dtype,v),y=0;y<v;y++){for(var x=a.util.indexToLoc(y,m,g),_=0;_<m;_++)x[_]<c[_]?x[_]=2*c[_]-x[_]-f:x[_]>=l[_]&&(x[_]=2*(l[_]-1)-x[_]+f);x=x.map((function(e,t){return e-c[t]}));var w=a.util.locToIndex(x,h,p);b[y]=d[w]}return{dataId:n.write(b,s,i.dtype),shape:s,dtype:i.dtype}}},lp=yl((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),fp=Fl(a.Mod,lp),dp={kernelName:a.Mod,backendName:"cpu",kernelFunc:fp},hp=n(406);function pp(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.dim,u=i.shape.length,s=o;if(-1===s&&(s=u-1),s!==u-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(u," and dim was ").concat(s));var c=a.util.parseAxisParam([s],i.shape),l=Hh({inputs:{x:i},backend:n,attrs:{reductionIndices:c,keepDims:!1}}),f=a.backend_util.expandShapeToKeepDim(l.shape,c),d=Ul({inputs:{x:l},backend:n,attrs:{shape:f}}),h=Vd({inputs:{a:i,b:d},backend:n}),p=Ed({inputs:{x:h},backend:n}),v=np({inputs:{x:p},backend:n,attrs:{axis:c,keepDims:!1}}),m=Ul({inputs:{x:v},backend:n,attrs:{shape:f}}),g=Bd({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}var vp={kernelName:a.Softmax,backendName:"cpu",kernelFunc:pp};var mp={kernelName:a.Multinomial,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.numSamples,u=r.seed,s=r.normalized;sl(i,"multinomial");for(var c=s?i:pp({inputs:{logits:i},backend:n,attrs:{dim:-1}}),l=c.shape[0],f=c.shape[1],d=n.data.get(c.dataId).values,h=[l,o],p=a.util.makeZerosTypedArray(a.util.sizeFromShape(h),"int32"),v=0;v<l;++v){var m=v*f,g=new Float32Array(f-1);g[0]=d[m];for(var b=1;b<g.length;++b)g[b]=g[b-1]+d[m+b];for(var y=hp.alea(u.toString()),x=v*o,_=0;_<o;++_){var w=y();p[x+_]=g.length;for(var k=0;k<g.length;k++)if(w<g[k]){p[x+_]=k;break}}}return s||n.disposeIntermediateTensorInfo(c),n.makeTensorInfo(h,"int32",p)}};function gp(e,t,n){var r=a.util.createScalarValue(-1,n);return Id([],t,r,e,n)}var bp={kernelName:a.Neg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;sl(r,"neg");var a=gp(n.data.get(r.dataId).values,r.shape,r.dtype),o=Object(i.a)(a,2),u=o[0],s=o[1];return n.makeTensorInfo(s,r.dtype,u)}},yp=a.kernel_impls.nonMaxSuppressionV3Impl;var xp={kernelName:a.NonMaxSuppressionV3,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold;sl(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,f=yp(c,l,o,u,s).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},_p=a.kernel_impls.nonMaxSuppressionV4Impl;var wp={kernelName:a.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.padToMaxOutputSize;sl(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=_p(l,f,o,u,s,c),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},kp=a.kernel_impls.nonMaxSuppressionV5Impl;var Op={kernelName:a.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,u=r.iouThreshold,s=r.scoreThreshold,c=r.softNmsSigma;sl(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=kp(l,f,o,u,s,c),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},Sp=yl((function(e,t){return e!==t?1:0})),jp=Fl(a.NotEqual,Sp,null,"bool"),Ep={kernelName:a.NotEqual,backendName:"cpu",kernelFunc:jp};var Cp={kernelName:a.OneHot,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=r.depth,u=r.onValue,s=r.offValue;sl(i,"oneHot");var c=a.util.sizeFromShape(i.shape),l=new Float32Array(c*o);l.fill(s);for(var f=n.data.get(i.dataId).values,d=0;d<c;++d)f[d]>=0&&f[d]<o&&(l[d*o+f[d]]=u);return n.makeTensorInfo([].concat(Object(Tn.a)(i.shape),[o]),"int32",l)}};function Ap(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=Nl({inputs:{input:r},backend:n}),i=Ap({inputs:{x:a},backend:n}),o=Uf({inputs:{input:r},backend:n}),u=Ap({inputs:{x:o},backend:n}),s=Cl({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return Kd({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var Tp={kernelName:a.ZerosLike,backendName:"cpu",kernelFunc:Ap};var Np={kernelName:a.OnesLike,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=Nl({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=Uf({inputs:{input:a},backend:r}),s=Ap({inputs:{x:u},backend:r}),c=Cl({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return Kd({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function Mp(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Ad({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){a.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=[],s=Vf({inputs:t.map((function(e){var t=Ad({inputs:{input:e},backend:n,attrs:{dim:r}});return u.push(t),t})),backend:n,attrs:{axis:r}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var Dp={kernelName:a.Pack,backendName:"cpu",kernelFunc:Mp};var Ip={kernelName:a.PadV2,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.constantValue;sl(i,"pad");var s=o.map((function(e,t){return e[0]+i.shape[t]+e[1]})),c=o.map((function(e){return e[0]})),l=n.data.get(i.dataId).values,f=a.util.sizeFromShape(i.shape),d=i.shape.length,h=a.util.computeStrides(i.shape),p=a.util.sizeFromShape(s),v=s.length,m=a.util.computeStrides(s),g=a.util.getTypedArrayFromDType(i.dtype,p);0!==u&&g.fill(u);for(var b=0;b<f;b++){var y=a.util.indexToLoc(b,d,h).map((function(e,t){return e+c[t]}));g[a.util.locToIndex(y,v,m)]=l[b]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}},Fp=yl((function(e,t){return Math.pow(e,t)})),Rp=Fl(a.Pow,Fp),Pp={kernelName:a.Pow,backendName:"cpu",kernelFunc:Rp};function Lp(e,t,n,r){for(var o=a.backend_util.computeOutAndReduceShapes(e,r),u=Object(i.a)(o,2),s=u[0],c=u[1],l=Object(a.upcastType)(t,"int32"),f=a.util.makeZerosTypedArray(a.util.sizeFromShape(s),l),d=a.util.sizeFromShape(c),h=0;h<f.length;++h){for(var p=h*d,v=1,m=0;m<d;++m)v*=n[p+m];f[h]=v}return{outVals:f,outShape:s,outDtype:l}}var Bp={kernelName:a.Prod,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.keepDims;sl(i,"prod");var s=i.shape.length,c=a.util.parseAxisParam(o,i.shape),l=a.backend_util.getAxesPermutation(c,s),f=c,d=i,h=[];null!=l&&(d=ef({inputs:{x:i},backend:n,attrs:{perm:l}}),h.push(d),f=a.backend_util.getInnerMostAxes(f.length,s));var p=n.data.get(d.dataId).values,v=Lp(d.shape,d.dtype,p,f),m=v.outVals,g=v.outShape,b=v.outDtype,y=g;return u&&(y=a.backend_util.expandShapeToKeepDim(g,c)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,b,m)}};function zp(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return a.util.makeZerosTypedArray(0,r);var i=Math.abs(Math.ceil((t-e)/n)),o=a.util.makeZerosTypedArray(i,r);t<e&&1===n&&(n=-1),o[0]=e;for(var u=1;u<o.length;u++)o[u]=o[u-1]+n;return o}var Up={kernelName:a.Range,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=zp(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},Wp=fl(a.Reciprocal,(function(e){return 1/e})),Vp={kernelName:a.Reciprocal,backendName:"cpu",kernelFunc:Wp};var Gp={kernelName:a.ResizeBilinear,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size;sl(o,"resizeBilinear");for(var l=a.util.computeStrides(o.shape),f=Object(i.a)(c,2),d=f[0],h=f[1],p=Object(i.a)(o.shape,4),v=p[0],m=p[1],g=p[2],b=p[3],y=n.data.get(o.dataId).values,x=new Float32Array(a.util.sizeFromShape([v,d,h,b])),_=[u&&d>1?m-1:m,u&&h>1?g-1:g],w=[u&&d>1?d-1:d,u&&h>1?h-1:h],k=0,O=_[0]/w[0],S=_[1]/w[1],j=0;j<v;j++)for(var E=0;E<d;E++){var C=void 0;C=s?O*(E+.5)-.5:O*E;for(var A=Math.max(0,Math.floor(C)),T=C-A,N=Math.min(m-1,Math.ceil(C)),M=j*l[0]+A*l[1],D=j*l[0]+N*l[1],I=0;I<h;I++){var F=void 0;F=s?S*(I+.5)-.5:S*I;for(var R=Math.max(0,Math.floor(F)),P=F-R,L=Math.min(g-1,Math.ceil(F)),B=M+R*l[2],z=D+R*l[2],U=M+L*l[2],W=D+L*l[2],V=0;V<b;V++){var G=y[B+V],q=y[z+V],H=G+(y[U+V]-G)*P,X=H+(q+(y[W+V]-q)*P-H)*T;x[k++]=X}}}return n.makeTensorInfo([v,d,h,b],"float32",x)}};var qp={kernelName:a.ResizeBilinearGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=t.dy,s=r.alignCorners;sl([u,o],"resizeBilinearGrad");for(var c=a.util.computeStrides(o.shape),l=Object(i.a)(o.shape,4),f=l[0],d=l[1],h=l[2],p=l[3],v=Object(i.a)(u.shape,3),m=v[1],g=v[2],b=new Float32Array(f*d*h*p),y=[s&&m>1?d-1:d,s&&g>1?h-1:h],x=[s&&m>1?m-1:m,s&&g>1?g-1:g],_=y[0]/x[0],w=y[1]/x[1],k=n.data.get(u.dataId).values,O=0,S=0;S<f;S++)for(var j=S*c[0],E=0;E<m;E++)for(var C=E*_,A=Math.floor(C),T=Math.min(Math.ceil(C),d-1),N=j+A*c[1],M=j+T*c[1],D=C-A,I=1-D,F=0;F<g;F++)for(var R=F*w,P=Math.floor(R),L=Math.min(Math.ceil(R),h-1),B=R-P,z=1-B,U=N+P*c[2],W=N+L*c[2],V=M+P*c[2],G=M+L*c[2],q=I*z,H=I*B,X=D*z,Y=D*B,K=0;K<p;K++){var $=k[O++];b[U+K]+=$*q,b[W+K]+=$*H,b[V+K]+=$*X,b[G+K]+=$*Y}return n.makeTensorInfo([f,h,d,p],"float32",b)}};var Hp={kernelName:a.ResizeNearestNeighbor,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size;sl(o,"resizeNearestNeighbor");for(var l=a.util.computeStrides(o.shape),f=Object(i.a)(c,2),d=f[0],h=f[1],p=Object(i.a)(o.shape,4),v=p[0],m=p[1],g=p[2],b=p[3],y=n.data.get(o.dataId).values,x=new Float32Array(v*d*h*b),_=[u&&d>1?m-1:m,u&&h>1?g-1:g],w=[u&&d>1?d-1:d,u&&h>1?h-1:h],k=_[0]/w[0],O=_[1]/w[1],S=0,j=0;j<v;j++)for(var E=j*l[0],C=0;C<d;C++){var A=s?k*(C+.5):k*C,T=Math.min(m-1,u?Math.round(A):Math.floor(A));s&&(T=Math.max(0,T));for(var N=E+T*l[1],M=0;M<h;M++){var D=s?O*(M+.5):O*M,I=Math.min(g-1,u?Math.round(D):Math.floor(D));s&&(I=Math.max(0,I));for(var F=N+I*l[2],R=0;R<b;R++){var P=y[F+R];x[S++]=P}}}return n.makeTensorInfo([v,d,h,b],o.dtype,x)}};var Xp={kernelName:a.ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=t.dy,s=r.alignCorners;sl([u,o],"resizeNearestNeighborGrad");for(var c=a.util.computeStrides(o.shape),l=a.util.computeStrides(u.shape),f=Object(i.a)(o.shape,4),d=f[0],h=f[1],p=f[2],v=f[3],m=Object(i.a)(u.shape,3),g=m[1],b=m[2],y=new Float32Array(d*h*p*v),x=n.data.get(u.dataId).values,_=[s&&g>1?h-1:h,s&&b>1?p-1:p],w=[s&&g>1?g-1:g,s&&b>1?b-1:b],k=_[0]/w[0],O=_[1]/w[1],S=1/k,j=1/O,E=2*Math.ceil(S)+2,C=2*Math.ceil(j)+2,A=0;A<d;A++)for(var T=A*c[0],N=0;N<h;N++)for(var M=T+N*c[1],D=Math.floor(N*S),I=Math.floor(D-E/2),F=0;F<p;F++)for(var R=M+F*c[2],P=Math.floor(F*j),L=Math.floor(P-C/2),B=0;B<v;B++){for(var z=0,U=0;U<E;U++){var W=U+I;if(!(W<0||W>=g)){var V=T+W*l[1],G=W*k;if(N===Math.min(h-1,s?Math.round(G):Math.floor(G)))for(var q=0;q<C;q++){var H=q+L;if(!(H<0||H>=b)){var X=V+H*l[2],Y=H*O;F===Math.min(p-1,s?Math.round(Y):Math.floor(Y))&&(z+=x[X+B])}}}}y[R+B]=z}return n.makeTensorInfo(o.shape,o.dtype,y)}};var Yp={kernelName:a.Reverse,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.dims;sl(i,"reverse");var u=i.shape.length,s=a.util.parseAxisParam(o,i.shape);if(0===u)return vl({inputs:{x:i},backend:n});for(var c=new a.TensorBuffer(i.shape,i.dtype),l=n.bufferSync(i),f=function(e){var t=c.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=i.shape[e]-1-n[e]})),c.set.apply(c,[l.get.apply(l,Object(Tn.a)(n))].concat(Object(Tn.a)(t)))},d=0;d<c.size;d++)f(d);return n.makeTensorInfo(c.shape,c.dtype,c.values)}},Kp={kernelName:a.RotateWithOffset,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,o=t.image,u=n.radians,s=n.fillValue,c=n.center,l=r,f=a.util.getTypedArrayFromDType(o.dtype,a.util.sizeFromShape(o.shape)),d=Object(i.a)(o.shape,4),h=d[0],p=d[1],v=d[2],m=d[3],g=a.backend_util.getImageCenter(c,p,v),b=Object(i.a)(g,2),y=b[0],x=b[1],_=Math.sin(u),w=Math.cos(u),k=l.data.get(o.dataId).values,O=0;O<h;O++)for(var S=O*v*p*m,j=0;j<p;j++)for(var E=j*(v*m),C=0;C<v;C++)for(var A=C*m,T=0;T<m;T++){var N=[h,j,C,T],M=N[2],D=N[1],I=(M-y)*w-(D-x)*_,F=(M-y)*_+(D-x)*w;I=Math.round(I+y),F=Math.round(F+x);var R=s;if("number"!==typeof s&&(R=3===T?255:s[T]),I>=0&&I<v&&F>=0&&F<p)R=k[S+F*(v*m)+I*m+T];f[S+E+A+T]=R}return{dataId:l.write(f,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},$p=fl(a.Round,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Zp={kernelName:a.Round,backendName:"cpu",kernelFunc:$p},Jp=Df((function(e){return 1/Math.sqrt(e)})),Qp=dl(a.Rsqrt,Jp),ev={kernelName:a.Rsqrt,backendName:"cpu",kernelFunc:Qp};function tv(e,t,n,r,i,o,u,s,c,l){var f=[r/i,i],d=e.values,h=t.values;if(0===r)return Object(a.buffer)(n,t.dtype);var p=Object(a.buffer)(f,t.dtype);p.values.fill(c);for(var v=0;v<o;v++){for(var m=[],g=0,b=0;b<u;b++){var y=d[v*u+b];m.push(y),g+=y*s[b]}if(g<0||g>=r/i)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var x=0;x<i;x++)l?p.values[g*i+x]+=h[v*i+x]:p.values[g*i+x]=0===t.rank?h[0]:h[v*i+x]}return p}var nv={kernelName:a.ScatterNd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=t.updates,u=r.shape,s=a.backend_util.calculateShapes(o,i,u),c=s.sliceRank,l=s.numUpdates,f=s.sliceSize,d=s.strides,h=s.outputSize,p=tv(n.bufferSync(i),n.bufferSync(o),u,h,f,l,c,d,0,!0);return n.makeTensorInfo(u,p.dtype,p.values)}};var rv={kernelName:a.Select,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,i=t.t,o=t.e;sl([r,i,o],"select");for(var u=r.shape.length,s=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,f=Object(a.upcastType)(i.dtype,o.dtype),d=a.util.makeZerosTypedArray(a.util.sizeFromShape(i.shape),f),h=0,p=0===u||u>1||1===i.shape.length?1:a.util.sizeFromShape(i.shape.slice(1)),v=0;v<s.length;v++)for(var m=0;m<p;m++)1===s[v]?d[h++]=c[v]:d[h++]=l[v];return n.makeTensorInfo(i.shape,f,d)}},av=a.backend_util.SELU_SCALEALPHA,iv=a.backend_util.SELU_SCALE,ov=fl(a.Selu,(function(e){return e>=0?iv*e:av*(Math.exp(e)-1)})),uv={kernelName:a.Selu,backendName:"cpu",kernelFunc:ov},sv=fl(a.Sigmoid,(function(e){return 1/(1+Math.exp(-e))})),cv={kernelName:a.Sigmoid,backendName:"cpu",kernelFunc:sv},lv=fl(a.Sign,(function(e){return e<0?-1:e>0?1:0})),fv={kernelName:a.Sign,backendName:"cpu",kernelFunc:lv},dv=fl(a.Sin,(function(e){return Math.sin(e)})),hv={kernelName:a.Sin,backendName:"cpu",kernelFunc:dv},pv=fl(a.Sinh,(function(e){return Math.sinh(e)})),vv={kernelName:a.Sinh,backendName:"cpu",kernelFunc:pv},mv=Math.log(1.1920928955078125e-7)+2,gv=fl(a.Softplus,(function(e){var t=e>-mv,n=e<mv,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),bv={kernelName:a.Softplus,backendName:"cpu",kernelFunc:gv};var yv={kernelName:a.SpaceToBatchND,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.paddings;sl([i],"spaceToBatchND");var s=a.util.sizeFromShape(o),c=[[0,0]];c.push.apply(c,Object(Tn.a)(u));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var f=Ip.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),d=a.backend_util.getReshaped(f.shape,o,s,!1),h=a.backend_util.getPermuted(d.length,o.length,!1),p=a.backend_util.getReshapedPermuted(f.shape,o,s,!1),v=Ul({inputs:{x:f},backend:n,attrs:{shape:d}}),m=ef({inputs:{x:v},backend:n,attrs:{perm:h}}),g=Ul({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}};var xv={kernelName:a.SparseToDense,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.sparseIndices,o=t.sparseValues,u=t.defaultValue,s=r.outputShape,c=a.backend_util.calculateShapes(o,i,s),l=c.sliceRank,f=c.numUpdates,d=c.sliceSize,h=c.strides,p=c.outputSize,v=tv(n.bufferSync(i),n.bufferSync(o),s,p,d,f,l,h,n.data.get(u.dataId).values[0],!1);return n.makeTensorInfo(s,v.dtype,v.values)}};var _v={kernelName:a.SplitV,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.numOrSizeSplits,u=r.axis,s=a.util.parseAxisParam(u,i.shape)[0],c=a.backend_util.prepareSplitSize(i,o,s),l=new Array(i.shape.length).fill(0),f=i.shape.slice();return c.map((function(e){var t=Object(Tn.a)(f);t[s]=e;var r=Ef({inputs:{x:i},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},wv=fl(a.Sqrt,(function(e){return Math.sqrt(e)})),kv={kernelName:a.Sqrt,backendName:"cpu",kernelFunc:wv},Ov={kernelName:a.Square,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;sl(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var s=i[u];o[u]=s*s}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Sv=yl((function(e,t){var n=e-t;return n*n})),jv=Fl(a.SquaredDifference,Sv),Ev={kernelName:a.SquaredDifference,backendName:"cpu",kernelFunc:jv},Cv=fl(a.Step,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Av={kernelName:a.Step,backendName:"cpu",kernelFunc:Cv};function Tv(e,t,n,r){for(var i=Object(a.buffer)(e,t.dtype),o=0;o<i.size;o++){for(var u=i.indexToLoc(o),s=new Array(u.length),c=0;c<s.length;c++)s[c]=u[c]*n[c]+r[c];i.set.apply(i,[t.get.apply(t,s)].concat(Object(Tn.a)(u)))}return i}var Nv={kernelName:a.StridedSlice,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.begin,u=r.end,s=r.strides,c=r.beginMask,l=r.endMask,f=r.ellipsisMask,d=r.newAxisMask,h=r.shrinkAxisMask;sl(i,"stridedSlice");var p,v=a.slice_util.sliceInfo(i.shape,o,u,s,c,l,f,d,h),m=v.nonStrided,g=v.$begin,b=v.$strides,y=v.size,x=v.newShape,_=v.outShape,w=Ul({inputs:{x:i},backend:n,attrs:{shape:x}});if(m){var k=Ef({inputs:{x:w},backend:n,attrs:{begin:g,size:y}});p=Ul({inputs:{x:k},backend:n,attrs:{shape:_}}),n.disposeIntermediateTensorInfo(k)}else if(_.some((function(e){return 0===e})))p=n.makeTensorInfo(_,i.dtype,[]);else{var O=Tv(_,n.bufferSync(w),b,g);p=n.makeTensorInfo(O.shape,O.dtype,O.values)}var S=Ul({inputs:{x:p},backend:n,attrs:{shape:_}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(p),S}},Mv=fl(a.Tan,(function(e){return Math.tan(e)})),Dv={kernelName:a.Tan,backendName:"cpu",kernelFunc:Mv},Iv=fl(a.Tanh,(function(e){return Math.tanh(e)})),Fv={kernelName:a.Tanh,backendName:"cpu",kernelFunc:Iv};function Rv(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var i=Object(a.buffer)(n,e.dtype),o=0;o<i.values.length;++o){for(var u=i.indexToLoc(o),s=new Array(e.rank),c=0;c<s.length;c++)s[c]=u[c]%e.shape[c];var l=e.locToIndex(s);i.values[o]=e.values[l]}return i}var Pv={kernelName:a.Tile,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;sl(a,"tile");var o=Rv(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function Lv(e,t,n,r,i){for(var o=t[t.length-1],u=e.length/o,s=o,c=a.util.getTypedArrayFromDType(n,u*r),l=a.util.getTypedArrayFromDType("int32",u*r),f=0;f<u;f++){for(var d=f*s,h=e.subarray(d,d+s),p=[],v=0;v<h.length;v++)p.push({value:h[v],index:v});p.sort((function(e,t){return t.value-e.value}));for(var m=f*r,g=c.subarray(m,m+r),b=l.subarray(m,m+r),y=0;y<r;y++)g[y]=p[y].value,b[y]=p[y].index}var x=t.slice();return x[x.length-1]=r,[Object(a.buffer)(x,n,c),Object(a.buffer)(x,"int32",l)]}var Bv={kernelName:a.TopK,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k;r.sorted,sl(a,"topk");var u=Lv(n.data.get(a.dataId).values,a.shape,a.dtype,o),s=Object(i.a)(u,2),c=s[0],l=s[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};function zv(e,t,n,r){for(var i=a.util.parseAxisParam(t,n)[0],o=[1,n[0],1],u=0;u<i;u++)o[0]*=n[u];o[1]=n[i];for(var s=i+1;s<n.length;s++)o[2]*=n[s];for(var c={},l=new Int32Array(n[i]),f=new a.TensorBuffer(o,r,e),d=[],h=1===o[0]&&1===o[2],p=0;p<n[i];p++){var v=void 0;if(h)v=e[p].toString();else{for(var m=[],g=0;g<o[0];g++)for(var b=0;b<o[2];b++)m.push(f.get(g,p,b));v=m.join(",")}if(void 0!==c[v])l[p]=c[v];else{var y=Object.keys(c).length;c[v]=y,l[p]=y,d.push(p)}}var x=o.slice();x[1]=Object.keys(c).length;var _=new a.TensorBuffer(x,r);d.forEach((function(e,t){for(var n=0;n<o[0];n++)for(var r=0;r<o[2];r++)_.set(f.get(n,e,r),n,t,r)}));var w=n.slice();return w[i]=x[1],{outputValues:_.values,outputShape:w,indices:l}}var Uv={kernelName:a.Unique,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;sl(i,"unique");var o=zv(r.data.get(i.dataId).values,a,i.shape,i.dtype),u=o.outputValues,s=o.outputShape,c=o.indices;return[r.makeTensorInfo(s,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var Wv={kernelName:a.Unpack,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,u=a.shape[i],s=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(s[c++]=a.shape[l]);var f=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var h=new Array(u),p=0;p<h.length;p++){f[i]=p;var v=Ef({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});h[p]=Ul({inputs:{x:v},backend:n,attrs:{shape:s}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var Vv={kernelName:a.UnsortedSegmentSum,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.segmentIds,u=r.numSegments;sl(i,"unsortedSegmentSum");for(var s=[],c=[],l=i.shape.length-o.shape.length,f=o,d=0;d<l;++d){var h=Ad({inputs:{input:f},backend:n,attrs:{dim:d+1}});f=h,c.push(h)}for(var p=0;p<u;++p){var v=a.util.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",v),g=md({inputs:{a:m,b:f},backend:n}),b=Dl({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=Rd({inputs:{a:b,b:i},backend:n}),x=np({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(x),c.push(m),c.push(g),c.push(b),c.push(y),c.push(x)}var _=Mp({inputs:s,backend:n,attrs:{axis:0}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},Gv=0,qv=[ql,Xl,Kl,Zl,zl,Jl,nf,rf,af,of,sf,lf,df,vf,gf,_f,wf,kf,Of,Gl,Sf,Af,Mf,Il,Rf,Lf,Al,Bf,Gf,Xf,Yf,Hf,$f,Zf,Kf,Qf,td,nd,rd,ad,id,ud,sd,cd,ld,fd,hd,dd,zd,pl,pd,gd,Sd,Cd,Td,Dd,Yd,$d,Zd,eh,rh,ah,ih,oh,sh,fh,ph,ml,vh,Wf,gh,yh,_h,bl,Oh,Eh,Ah,Mh,Ih,Ph,Bh,Wh,Vh,Gh,$h,Zh,Jh,Qh,ep,tp,Xh,ap,ip,sp,cp,dp,mp,Pd,bp,xp,wp,Op,Ep,Cp,Np,Dp,Ip,Pp,wl,Bp,Up,Ml,Vp,Ol,jl,Wl,Gp,qp,Hp,Xp,Yp,Kp,Zp,ev,nv,rv,uv,cv,fv,hv,vv,Cf,vp,bv,yv,xv,_v,kv,Ov,Ev,Av,Nv,Gd,rp,Dv,Fv,Pv,Bv,tf,Uv,Wv,Vv,Tp];Gv<qv.length;Gv++){var Hv=qv[Gv];Object(a.registerKernel)(Hv)}var Xv,Yv,Kv,$v={},Zv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Jv(e){if(!(e in $v)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete $v[e]}),!1),1===e)return t.getContext("webgl",Zv)||t.getContext("experimental-webgl",Zv);return t.getContext("webgl2",Zv)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;$v[e]=t}var n=$v[e];return n.isContextLost()?(delete $v[e],Jv(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),$v[e])}function Qv(e,t){return[t,e]}function em(e){var t=a.util.sizeFromShape(e),n=Math.ceil(t/4);return a.util.sizeToSquarishShape(n)}function tm(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function nm(e,t){var n,r,i,o,u,s,c,l,f,d=e;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,u=d.RED,s=4,c=1,l=d.HALF_FLOAT,f=d.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=d.RGBA,u=e.RGBA,s=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:f}}function rm(e,t){var n=t();return Object(a.env)().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Xv||(Xv={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Yv||(Yv={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Kv||(Kv={}));function am(e){return!!(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function im(e,t){return bm(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function om(e,t){var n=bm(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(rm(e,(function(){return e.shaderSource(n,t)})),rm(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=cm.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,u=i.map((function(e,t){return a.util.rightPad((t+1).toString(),o)+e})),s=0,c=0;c<u.length;c++)s=Math.max(u[c].length,s);var l=u.slice(0,r-1),f=u.slice(r-1,r),d=u.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(a.util.rightPad(f[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var um,sm,cm=/ERROR: [0-9]+:([0-9]+):/g;function lm(e,t){if(rm(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function fm(e,t,n,r,a,i,o){var u=e.getAttribLocation(t,n);return-1!==u&&(rm(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),rm(e,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,o)})),rm(e,(function(){return e.enableVertexAttribArray(u)})),!0)}function dm(e,t,n){return bm(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function hm(e,t,n){return e.getUniformLocation(t,n)}function pm(e,t,n,r){rm(e,(function(){return function(e,t,n){ym(e,n),rm(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),rm(e,(function(){return e.uniform1i(n,r)}))}function vm(e,t,n){rm(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),rm(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function mm(e,t){rm(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),rm(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function gm(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function bm(e,t,n){var r=rm(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function ym(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function xm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.util.sizeFromShape(e.slice(0,e.length-t))}function _m(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function wm(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[xm(e)].concat(Object(Tn.a)(_m(e)))),t}function km(e){return e%2===0}function Om(e,t){if(e=e.slice(-2),t=t.slice(-2),a.util.arraysEqual(e,t))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(km(n)&&km(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&km(e[0])&&km(t[0])}function Sm(e,t){return null!=e.getExtension(t)}function jm(e){try{if(null!=Jv(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Em(e){if(0===e)return!1;var t=Jv(e);if(1!==e){if(Sm(t,"EXT_color_buffer_float"))return Cm(t);var n="EXT_color_buffer_half_float";if(Sm(t,n)){var r=t.getExtension(n);return function(e,t){var n=nm(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),u}(t,r)}return!1}return!!Sm(t,"OES_texture_float")&&(!!Sm(t,"WEBGL_color_buffer_float")&&Cm(t))}function Cm(e){var t=nm(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Am(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&a.util.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var Tm=Object(a.env)();function Nm(){var e,t,n,r,i,o,u,s,c,l;return 2===Object(a.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",u="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",c="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",u="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",c="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:u,defineSpecialNaN:s,defineSpecialInf:c,defineRound:l}}function Mm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=a.util.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function Dm(e){var t=a.util.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}Tm.registerFlag("HAS_WEBGL",(function(){return Tm.getNumber("WEBGL_VERSION")>0})),Tm.registerFlag("WEBGL_VERSION",(function(){return jm(2)?2:jm(1)?1:0})),Tm.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Tm.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Tm.get("WEBGL_VERSION")})),Tm.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Tm.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Tm.registerFlag("WEBGL_PACK",(function(){return Tm.getBool("HAS_WEBGL")})),Tm.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_CLIP",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Tm.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_PACK_REDUCE",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_CONV_IM2COL",(function(){return Tm.getBool("WEBGL_PACK")})),Tm.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==um){var t=Jv(e);um=t.getParameter(t.MAX_TEXTURE_SIZE)}return um}(Tm.getNumber("WEBGL_VERSION"))})),Tm.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==sm){var t=Jv(e);sm=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,sm)}(Tm.getNumber("WEBGL_VERSION"))})),Tm.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Tm.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=Jv(e);return Sm(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Sm(t,"EXT_disjoint_timer_query")?1:0}(e)})),Tm.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Tm.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!a.device_util.isMobile()})),Tm.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=Jv(e);if(1===e){if(!Sm(t,"OES_texture_float"))return!1}else if(!Sm(t,"EXT_color_buffer_float"))return!1;return Cm(t)}(Tm.getNumber("WEBGL_VERSION"))})),Tm.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Tm.getBool("WEBGL_FORCE_F16_TEXTURES")&&Tm.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Tm.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Em(Tm.getNumber("WEBGL_VERSION"))})),Tm.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Tm.getNumber("WEBGL_VERSION"))&&null!=Jv(e).fenceSync;var e})),Tm.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Tm.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Tm.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),Tm.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}));var Im="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",Fm=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Xv.DENSE;var n=em(t),r=Nm();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(Mm(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},Rm=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Xv.DENSE;var n=em(t),r=Nm();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(Mm(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = 4 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(r.output," = result;\n      }\n    ")},Pm=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.outTexUsage=Yv.DOWNLOAD;var n=Nm();this.outputShape=t,this.userCode="\n      ".concat(Im,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Lm=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yv.DOWNLOAD;var n=Nm();this.outputShape=t,this.userCode="\n      ".concat(Im,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")},Bm=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(Sn.a)(this,e),this.variableNames=["A"];var a=Nm(),o=Object(i.a)(n,2),u=o[0],s=o[1];this.outputShape=t;var c="result";r&&(c="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(Dm(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ").concat(s,";\n        int c = imod(flatIndex, ").concat(s,");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(u,".0);\n        vec4 values = ").concat(a.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(a.output," = vec4(").concat(c,", 0., 0., 0.);\n      }\n    ")},zm=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var a=Nm(),o=Object(i.a)(n,2),u=o[0],s=o[1];this.outputShape=t;var c="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var f=0;f<=1;f++)for(var d=0;d<=1;d++){var h=2*f+d;c+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(d," < ").concat(t[2],") {\n            localCoords[2] += ").concat(d,";\n            if(localCoords[1] + ").concat(f," < ").concat(t[1],") {\n              localCoords[1] += ").concat(f,";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ").concat(s,";\n              c = imod(flatIndex, ").concat(s,");\n              uv = (vec2(c, r) + halfCR) / vec2(").concat(s,".0, ").concat(u,".0);\n              values = ").concat(a.texture2D,"(A, uv);\n\n              if(offset == 0) {\n                result[").concat(h,"] = values[0];\n              } else if(offset == 1) {\n                result[").concat(h,"] = values[1];\n              } else if(offset == 2) {\n                result[").concat(h,"] = values[2];\n              } else {\n                result[").concat(h,"] = values[3];\n              }\n            }\n          }\n        ")}this.userCode="\n      ".concat(Dm(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ").concat(c,"\n\n        ").concat(a.output," = ").concat(l,";\n      }\n    ")};function Um(e){var t=Nm();return function(e,t){var n=bm(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(rm(e,(function(){return e.shaderSource(n,t)})),rm(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Wm(e){return function(e,t){var n=bm(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rm(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),rm(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Vm(e){return function(e,t){var n=bm(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return rm(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),rm(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function Gm(e,t,n,r,i,o){!function(e,t){var n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var i="[".concat(e,"x").concat(t,"]"),o="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+o+".")}}(t,n);var u=function(e){return bm(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return rm(e,(function(){return e.bindTexture(s,u)})),rm(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),rm(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),rm(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),rm(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),rm(e,(function(){return e.texImage2D(s,0,r,t,n,0,i,o,null)})),rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),u}function qm(e){return e.internalFormatFloat}function Hm(e){return e.internalFormatHalfFloat}function Xm(e){return e.downloadTextureFormat}function Ym(e){return e.internalFormatPackedFloat}function Km(e){return e.internalFormatPackedHalfFloat}function $m(e,t,n,r,a,o,u,s){var c=e,l=new Float32Array(function(e,t){var n=tm(e,t),r=Object(i.a)(n,2);return r[0]*r[1]*4}(o,u));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}var Zm=function(){function e(t){Object(Sn.a)(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Object(a.env)().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){$v[e]=t}(n,t)):this.gl=Jv(n);var r="WEBGL_color_buffer_float",i="EXT_color_buffer_half_float";if(1===Object(a.env)().getNumber("WEBGL_VERSION")){var o="OES_texture_half_float";if(this.textureFloatExtension=im(this.gl,"OES_texture_float"),Sm(this.gl,o))this.textureHalfFloatExtension=im(this.gl,o);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Sm(this.gl,i))this.colorBufferHalfFloatExtension=im(this.gl,i);else if(Object(a.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Sm(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Sm(this.gl,i))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(i)}this.vertexBuffer=Wm(this.gl),this.indexBuffer=Vm(this.gl),this.framebuffer=function(e){return bm(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=nm(this.gl,this.textureHalfFloatExtension)}return Object(jn.a)(e,[{key:"debug",get:function(){return Object(a.env)().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;rm(t,(function(){return t.finish()})),rm(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),rm(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),rm(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),rm(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),rm(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Qv(t,n),o=Object(i.a)(a,2);return Gm(e,o[0],o[1],qm(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Qv(t,n),o=Object(i.a)(a,2);return Gm(e,o[0],o[1],Hm(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Qv(t,n),o=Object(i.a)(a,2);return Gm(e,o[0],o[1],Xm(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?rm(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):rm(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,u,s;rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),u=e.UNSIGNED_BYTE,s=e.RGBA):(o=new Float32Array(n*r*4),u=e.FLOAT,s=i.internalFormatPackedFloat),o.set(a),rm(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,s,n,r,0,e.RGBA,u,o)})),rm(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tm(t,n),o=Object(i.a)(a,2);return Gm(e,o[0],o[1],Km(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=tm(t,n),o=Object(i.a)(a,2);return Gm(e,o[0],o[1],Ym(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(mm(this.gl,this.framebuffer),this.outputTexture=null),rm(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Qv(t,n),o=Object(i.a)(a,2),u=o[0],s=o[1],c=new Uint8Array(t*n*4);return rm(e,(function(){return e.readPixels(0,0,u,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return $m(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();rm(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return rm(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),rm(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),rm(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Object(a.env)().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(o,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return rm(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){this.throwIfDisposed();var t=this.gl,n=om(t,e),r=Um(t),a=function(e){return bm(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return rm(t,(function(){return t.attachShader(a,r)})),rm(t,(function(){return t.attachShader(a,n)})),function(e,t){if(rm(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&lm(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return rm(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),fm(e,t,"clipSpacePos",n,3,20,0)&&fm(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),a}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&rm(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&lm(this.gl,this.program),rm(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?dm(this.gl,e,t):hm(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),rm(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),pm(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=tm(t,n),a=Object(i.a)(r,2),o=a[0],u=a[1];this.setOutputMatrixTextureDriver(e,o,u)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&lm(this.gl,this.program),gm(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),rm(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),rm(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=im(this.gl,2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i}},{key:"endQuery",value:function(){if(2!==Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n=this;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.util.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||a.util.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),vm(this.gl,e,this.framebuffer),this.debug&&gm(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(vm(this.gl,this.outputTexture,this.framebuffer),this.debug&&gm(this.gl)):mm(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;vm(r,e,this.framebuffer),this.debug&&gm(r),this.outputTexture=e,rm(r,(function(){return r.viewport(0,0,t,n)})),rm(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),rm(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var Jm=a.backend_util.getBroadcastDims;function Qm(e,t,n,r){var i=[];e.forEach((function(e){var t=a.util.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(i.push("uniform sampler2D ".concat(e.name,";")),i.push("uniform int offset".concat(e.name,";")))}));var o,u,s=i.join("\n"),c=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";r+=n?tg(e):eg(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(r+=n?sg(e,t):cg(e,t));return r}(e,t,r)})).join("\n"),l=t.texShape,f=Nm(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(f),h=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(ng,"\n    ").concat(rg,"\n    ").concat(ag,"\n  ")}(f);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===n[0])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(n[1],".0);\n      }\n    ");if(1===n[1])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(n[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      return 2 * (resTexRC.x * ").concat(n[1]," + resTexRC.y);\n    }\n  ")}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(a.util.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(n[0],", ").concat(n[1],"));\n      }\n    ");var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),a=r*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t);default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",u="b, r, c",s=2;s<e.length-1;s++)i*=e[e.length-s-1],o="\n      int b".concat(s," = index / ").concat(i,";\n      index -= b").concat(s," * ").concat(i,";\n    ")+o,u="b".concat(s,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(n[0],", ").concat(n[1],"));\n      int index = resTexRC.x * ").concat(n[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(a,";\n      index -= b * ").concat(a,";\n\n      int r = 2 * (index / ").concat(r,");\n      int c = imod(index, ").concat(r,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t)}}(t.logicalShape,l),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(f)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){if(1===t[0])return"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t);case 2:return function(e,t){if(a.util.arraysEqual(e,t))return"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=Mm(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t);case 4:return function(e,t){var n=Mm(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(n,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t);case 5:return function(e,t){var n=Mm(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=Mm(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,l),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(f)),r&&(h+=ig),[h,d,u,s,o,c,n].join("\n")}function eg(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(n,"() {return ").concat(t,";}");var r=Object(i.a)(e.shapeInfo.texShape,2),a=r[0],o=r[1];if(1===a&&1===o)return"\n      float ".concat(n,"() {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var u=Object(i.a)(e.shapeInfo.texShape,2),s=u[0],c=u[1],l=og(t);return"\n    float ".concat(n,"() {\n      vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", ").concat(l,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(n,"(int index) {\n        ").concat(ug(e),"\n      }\n    ");var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float ".concat(n,"(int index) {\n        return sampleTexture(").concat(t,", halfCR);\n      }\n    ");var o=og(t);if(1===i)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(a,".0);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");if(1===a)return"\n      float ".concat(n,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(i,".0, 0.5);\n        return sampleTexture(").concat(t,", uv);\n      }\n    ");return"\n    float ".concat(n,"(int index) {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(i,", index + ").concat(o,");\n      return sampleTexture(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape;if(null!=i&&a.util.arraysEqual(t,i)){var o=i[0],u=i[1];return"\n    float ".concat(r,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}var s=a.util.squeezeShape(t),c=s.newShape,l=s.keptDims,f=c;if(f.length<t.length){var d=fg(e,f),h=["row","col"];return"\n      ".concat(eg(d),"\n      float ").concat(r,"(int row, int col) {\n        return ").concat(r,"(").concat(dg(h,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(t[1],", 1)));\n        ").concat(ug(e),"\n      }\n    ");var p=i[0],v=i[1],m=og(n);if(1===v)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");if(1===p)return"\n    float ".concat(r,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(m,"), vec3(").concat(t[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(v,".0, 0.5);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n  float ".concat(r,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(t[1]," + col + ").concat(m,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n    return sampleTexture(").concat(n,", uv);\n  }\n")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[1]*t[2],o=t[2],u=a.util.squeezeShape(t),s=u.newShape,c=u.keptDims,l=s;if(l.length<t.length){var f=fg(e,l),d=["row","col","depth"];return"\n        ".concat(eg(f),"\n        float ").concat(r,"(int row, int col, int depth) {\n          return ").concat(r,"(").concat(dg(d,c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(ug(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],v=h[1],m=e.shapeInfo.flatOffset;if(v===i&&null==m)return"\n        float ".concat(r,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(v,".0, ").concat(p,".0);\n          return sampleTexture(").concat(n,", uv);\n        }\n      ");if(v===o&&null==m)return"\n    float ".concat(r,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(t[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(v,".0, ").concat(p,".0);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var g=og(n);return"\n      float ".concat(r,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n        return sampleTexture(").concat(n,", uv);\n      }\n  ")}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[3],o=t[2]*i,u=t[1]*o,s=a.util.squeezeShape(t),c=s.newShape,l=s.keptDims;if(c.length<t.length){var f=fg(e,c),d=["row","col","depth","depth2"];return"\n      ".concat(eg(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2) {\n        return ").concat(r,"(").concat(dg(d,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(u,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(ug(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===i&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(t[1]*t[2],", ").concat(t[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=og(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index + ").concat(g,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,u=t[2]*o,s=t[1]*u,c=a.util.squeezeShape(t),l=c.newShape,f=c.keptDims;if(l.length<t.length){var d=fg(e,l),h=["row","col","depth","depth2","depth3"];return"\n      ".concat(eg(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(dg(h,f),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(u,", ").concat(o,", ").concat(i,")) +\n          depth3;\n        ").concat(ug(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,v=e.shapeInfo.texShape,m=v[0],g=v[1];if(g===s&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(u,", ").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===i&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var b=og(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(u," + depth * ").concat(o," +\n          depth2 * ").concat(i," + depth3 + ").concat(b,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=a.util.squeezeShape(t),o=i.newShape,u=i.keptDims;if(o.length<t.length){var s=fg(e,o),c=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(eg(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(dg(c,u),");\n      }\n    ")}var l=t[5],f=t[4]*l,d=t[3]*f,h=t[2]*d,p=t[1]*h;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(p,", ").concat(h,", ").concat(d,", ").concat(f,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(l,", 1)));\n        ").concat(ug(e),"\n      }\n    ");var v=e.shapeInfo.flatOffset,m=e.shapeInfo.texShape,g=m[0],b=m[1];if(b===p&&null==v)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(h,", ").concat(d,", ").concat(f,", ").concat(l,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(b,".0, ").concat(g,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(b===l&&null==v)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(b,".0, ").concat(g,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=og(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(p," + col * ").concat(h," + depth * ").concat(d," +\n          depth2 * ").concat(f," + depth3 * ").concat(l," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(g,", ").concat(b,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(t.length,"-D input sampling")+" is not yet supported")}}function tg(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Nm();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Nm();return"\n    vec4 ".concat(n,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(a[0],", ").concat(a[1],", index);\n      return ").concat(i.texture2D,"(").concat(t,", uv);\n    }\n  ")}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],u=i[1],s=Nm();if(null!=i&&a.util.arraysEqual(t,i))return"\n      vec4 ".concat(r,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(u,".0, ").concat(o,".0);\n\n        return ").concat(s.texture2D,"(").concat(n,", uv);\n      }\n    ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(t[1]/2);return"\n    vec4 ".concat(r,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(s.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){var o=[1,2],u=fg(e,t.slice(1)),s=["b","row","col"];return"\n        ".concat(tg(u),"\n        vec4 ").concat(r,"(int b, int row, int col) {\n          return ").concat(r,"(").concat(dg(s,o),");\n        }\n      ")}var c=i[0],l=i[1],f=Math.ceil(t[2]/2),d=f*Math.ceil(t[1]/2),h=Nm();return"\n    vec4 ".concat(r,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(c,", ").concat(l,", ").concat(d,", ").concat(f,", b, row, col);\n      return ").concat(h.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=o[0],s=o[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * ".concat(l," + (row / 2) * ").concat(c," + (col / 2)"),h=2;h<n-1;h++)f="int b".concat(h,", ")+f,l*=t[n-h-1],d="b".concat(h," * ").concat(l," + ")+d;var p=Nm();return"\n    vec4 ".concat(a,"(").concat(f,") {\n      int index = ").concat(d,";\n      int texR = index / ").concat(s,";\n      int texC = index - texR * ").concat(s,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(s,", ").concat(u,");\n      return ").concat(p.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e)}}var ng="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rg="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ag="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ig="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function og(e){return"offset".concat(e)}function ug(e){var t=e.name,n=a.util.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function sg(e,t){var n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,c=Jm(e.shapeInfo.logicalShape,t.logicalShape),l=lg(s),f=s-u,d=["x","y","z","w","u","v"];n=0===u?"":s<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(d[e+f]," = 0;")})).join("\n");var h="";h=s<2&&u>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+f])})).join(", ");var p="return outputValue;",v=1===a.util.sizeFromShape(e.shapeInfo.logicalShape),m=1===a.util.sizeFromShape(t.logicalShape);if(1!==u||v||m){if(v&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(c.length){var g=u-2,b=u-1;c.indexOf(g)>-1&&c.indexOf(b)>-1?p="return vec4(outputValue.x);":c.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":c.indexOf(b)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(o,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(i,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function cg(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,u=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,c=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===c&&null==e.shapeInfo.flatOffset&&a.util.arraysEqual(u,o))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,f=lg(c),d=Jm(e.shapeInfo.logicalShape,t.logicalShape),h=c-s,p=["x","y","z","w","u","v"];l=0===s?"":c<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var v="";return v=c<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", "),"\n    float ".concat(i,"() {\n      ").concat(f," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(v,");\n    }\n  ")}function lg(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function fg(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function dg(e,t){return t.map((function(t){return e[t]})).join(", ")}function hg(e,t,n,r){var i=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),u=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},c=Qm(o,s,i,t.packedInputs),l=e.createProgram(c),f=null,d=e.getUniformLocation(l,"NAN",!1);1===Object(a.env)().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(l,"INFINITY",!1));for(var h={},p=0;p<t.variableNames.length;p++){var v=t.variableNames[p];h[v]=e.getUniformLocation(l,v,false),h["offset".concat(v)]=e.getUniformLocation(l,"offset".concat(v),false)}return{program:t,source:c,webGLProgram:l,uniformLocations:h,inShapeInfos:u,outShapeInfo:s,infLoc:f,nanLoc:d}}function pg(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,i=t[n],o=i.shape;if(!a.util.arraysEqual(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(!e.isUniform||!i.isUniform){var u=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!a.util.arraysEqual(u,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(u," and ").concat(s," must match"))}}))}function vg(e,t,n,r,i){pg(t.inShapeInfos,n),pg([t.outShapeInfo],[r]);var o=r.texData.texture,u=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,u[0],u[1]):e.setOutputMatrixTexture(o,u[0],u[1]),e.setProgram(t.webGLProgram),1===Object(a.env)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],u=t.uniformLocations["offset".concat(i)];if(null!=o)if(n.isUniform)if(a.util.sizeFromShape(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=u&&e.gl.uniform1i(u,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}function mg(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+="".concat(e.shape,"_").concat(n,"_").concat(t)}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a}var gg=Pl,bg=Tf,yg=Nf,xg=If,_g=zf,wg=jd,kg=Nd,Og=Jd,Sg=uh,jg=ch,Eg=wh,Cg=Ch,Ag=Th,Tg=qh,Ng=Yh,Mg=op,Dg=Id,Ig=gp,Fg=Lp,Rg=zp,Pg=Jp,Lg=Hl,Bg=jf,zg=Tv,Ug=Ud,Wg=Rv,Vg=Lv,Gg=Ql,qg=zv;function Hg(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function Xg(e,t){return 1===t?[e]:Hg(e,t)}var Yg=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var n=t.length;if(0===n)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var r=Xg("rc",n),a=lg(n),i=function(e,t,n){if(1===e)return"rc > ".concat(t[0]);for(var r="",a=e-2;a<e;a++)r+="".concat(n[a]," >= ").concat(t[a]),a<e-1&&(r+="||");return r}(n,t,r),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = ".concat(a[0],";\n    int c = ").concat(a[1],";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ").concat(t,";\n    bool rEdge = rp1 >= ").concat(n,";\n  ")}(n,t[t.length-1],t[t.length-2],r),u=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i="".concat(0===r?"r":"rp1",", ").concat(0===a?"c":"cp1"),o=2;o<e;o++)i="".concat(t[t.length-1-o],",")+i;n.push(i)}return n}(n,t);if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(e[0]," ? 0. : getA(rc + 1),\n            0, 0");return"getA(".concat(r[0],"),\n          cEdge ? 0. : getA(").concat(r[1],"),\n          rEdge ? 0. : getA(").concat(r[2],"),\n          rEdge || cEdge ? 0. : getA(").concat(r[3],")")}(t,r);this.userCode="\n        void main() {\n          ".concat(a," rc = getOutputCoords();\n\n          if(").concat(i,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(o,"\n\n            setOutput(vec4(").concat(u,"));\n          }\n        }\n      ")}};var Kg=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e){var t=Mm(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t,"\n      return ivec3(r, c, d);\n    }\n  ")}(n),"\n      ").concat(Dm(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(t[1],";\n        int cols = ").concat(t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")};var $g=function(){function e(t){Object(Sn.a)(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Object(jn.a)(e,[{key:"acquireTexture",value:function(e,t,n){var r=Jg(t,n),a=Qg(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=Zg(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var u=this.freeTextures[a].shift();return this.usedTextures[a].push(u),u}return r===Kv.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Kv.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Kv.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Kv.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Kv.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var i=Jg(n,r),o=Qg(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);var u=Zg(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Object(a.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=u):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=u),this.numUsedTextures--;var c=this.usedTextures[o],l=c.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function Zg(e,t,n,r,a){var o,u=function(e,t){switch(e){case Kv.PACKED_2X2_FLOAT32:return Ym(t);case Kv.PACKED_2X2_FLOAT16:return Km(t);case Kv.UNPACKED_FLOAT32:return qm(t);case Kv.UNPACKED_FLOAT16:return Hm(t);case Kv.PACKED_4X1_UNSIGNED_BYTE:return Xm(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=tm(e[0],e[1]),c=Object(i.a)(s,2);o=c[0]*c[1]}else{var l=Qv(e[0],e[1]),f=Object(i.a)(l,2);o=f[0]*f[1]}return o*function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format ".concat(t))}(n,u)}function Jg(e,t){if(e===Yv.UPLOAD)return Kv.PACKED_2X2_FLOAT32;if(e===Yv.RENDER||null==e)return function(e){return Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Kv.PACKED_2X2_FLOAT32:Kv.UNPACKED_FLOAT32:e?Kv.PACKED_2X2_FLOAT16:Kv.UNPACKED_FLOAT16}(t);if(e===Yv.DOWNLOAD||e===Yv.PIXELS)return Kv.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Qg(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var eb=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},tb="if (isnan(x)) return x;",nb="return x;",rb="return abs(x);";var ab="return (x >= 0.0) ? x : (exp(x) - 1.0);",ib=tb+"\n  return (x < 0.0) ? 0.0 : x;\n",ob=tb+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ub="return x;",sb="return x;",cb="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",lb="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",fb="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",db=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")},hb=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var n=t.length,r=Xg("rc",n),a=lg(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),u=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(u,"));\n      }\n    ")},pb=a.kernel_impls.whereImpl,vb={};var mb=function(e){Object(En.a)(n,e);var t=Object(Cn.a)(n);function n(e){var r,i;if(Object(Sn.a)(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.warnedAboutCPUBackend=!1,r.pendingDeletes=0,r.disposed=!1,!Object(a.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=Jv(Object(a.env)().getNumber("WEBGL_VERSION"));r.binaryCache=((i=Object(a.env)().getNumber("WEBGL_VERSION"))in vb||(vb[i]={}),vb[i]),r.gpgpu=new Zm(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new $g(r.gpgpu),r.numMBBeforeWarning=null==Object(a.env)().global.screen?1024:Object(a.env)().global.screen.height*Object(a.env)().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new a.DataStorage(Object(Mn.a)(r),Object(a.engine)()),r}return Object(jn.a)(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Object(a.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Object(a.env)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Yv.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,i){if(Object(a.env)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Yv.UPLOAD,refCount:i})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensorInfos,o=t.slice,u=t.shape,s=t.isPacked;if(null!=o){var c;c=s?new db(u,ub):new eb(u,ub);var l=this.runWebGLProgram(c,[{dataId:e,shape:u,dtype:r}],r),f=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),f}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,p=null!=this.activeTimers;if(p&&(d=a.util.now()),"complex64"===r){var v=this.readSync(i.real.dataId),m=this.readSync(i.imag.dataId);h=a.backend_util.mergeRealAndImagArrays(v,m)}else h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=a.util.now()-d),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n,r,i,o,u,s,c,l,f,d,h,p,v,m,g,b,y,x,_,w,k,O;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),i=r.values,o=r.shape,u=r.slice,s=r.dtype,c=r.complexTensorInfos,l=r.isPacked,null==u){e.next=11;break}return f=l?new db(o,ub):new eb(o,ub),d=this.runWebGLProgram(f,[{dataId:t,shape:o,dtype:s}],s),h=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",h);case 11:if(null==i){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Object(a.env)().getNumber("WEBGL_VERSION")){e.next=15;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 15:if(p=null,"complex64"!==s&&Object(a.env)().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),g=this.texData.get(v.dataId),p=(m=this.gpgpu).createBufferFromTexture.apply(m,[g.texture].concat(Object(Tn.a)(em(o))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=21;break}return e.next=21,this.gpgpu.createAndWaitForFence();case 21:if("complex64"!==s){e.next=30;break}return e.next=24,Promise.all([this.read(c.real.dataId),this.read(c.imag.dataId)]);case 24:y=e.sent,x=y[0],_=y[1],b=a.backend_util.mergeRealAndImagArrays(x,_),e.next=31;break;case 30:null==p?b=this.getValuesFromTexture(t):(w=a.util.sizeFromShape(o),b=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w));case 31:return null!=v&&this.disposeIntermediateTensorInfo(v),k=this.convertAndCacheOnCPU(t,b),O=this.pendingRead.get(t),this.pendingRead.delete(t),O.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Object(a.engine)().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",k);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return a.util.decodeString(e)}))}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return Object(a.buffer)(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!am(n)){if(Object(a.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,i=t.isPacked,o=a.util.sizeFromShape(n);if(Object(a.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u,s=this.decode(e),c=this.texData.get(s.dataId),l=(u=this.gpgpu).downloadMatrixFromPackedTexture.apply(u,[c.texture].concat(Object(Tn.a)(em(n)))).subarray(0,o);return this.disposeIntermediateTensorInfo(s),l}var f=Object(a.env)().getBool("WEBGL_PACK")&&!0===i,d=f?wm(n):n,h=f?new Lm(d):new Pm(d),p=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),v=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n,r,i,o,u,s,c;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],i=!1,null==this.programTimersStack?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,t(),o=a.util.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),u=a.util.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,i&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=19;break}return e.next=14,Promise.all(o);case 14:c=e.sent,s.kernelMs=a.util.sum(c),s.getExtraProfileInfo=function(){return c.map((function(e,t){return{name:u[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=20;break;case 19:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 20:return this.uploadWaitMs=0,this.downloadWaitMs=0,e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:a.util.now(),endMs:null}}},{key:"endTimer",value:function(e){return Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=a.util.now(),e)}},{key:"getQueryTime",value:function(){var e=Object(Ya.a)(Xa.a.mark((function e(t){var n;return Xa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object(a.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"getCPUBackend",value:function(){return Object(a.env)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Object(a.engine)().findBackend("cpu")),this.cpuBackend):null}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=this.getCPUBackend();return Object(a.env)().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&a.util.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){a.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return pb(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new db(e.shape,t),i=this.compileAndRun(r,[e],n);return Object(a.engine)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=Lg(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rb,e.dtype);var n=new eb(e.shape,rb),r=this.compileAndRun(n,[e]);return Object(a.engine)().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&a.util.isString(n[0])){var i=n.map((function(e){return a.util.encodeString(e)}));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return Object(a.engine)().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new hb(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new Yg(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[xm(e.shape)].concat(Object(Tn.a)(_m(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[xm(t)].concat(Object(Tn.a)(_m(t))),i=new Kg(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}},{key:"decode",value:function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=wm(a);t=r?new Rm(o):new Fm(o);return{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(u.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===Xv.DENSE){var c=em(e.outputShape);s.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===a.util.sizeFromShape(u.shape))return s.values=a.util.getTypedArrayFromDType(u.dtype,0),u;var l=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&a.util.sizeFromShape(t.shape)<=Object(a.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!==!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!Om(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),l.push(t),n=i.texData.get(t.dataId),r.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(u.dataId);var d,h={shape:u.shape,texData:s,isUniform:!1},p=mg(e,f,h),v=this.getAndSaveBinary(p,(function(){return hg(i.gpgpu,e,f,h)})),m=null!=this.activeTimers;m&&(d=this.startTimer()),vg(this.gpgpu,v,f,h,r),l.forEach((function(e){return i.disposeIntermediateTensorInfo(e)})),m&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var g=Object(a.env)().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var b=a.util.now();b-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Object(a.env)().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var y=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),y}return u}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Object(a.env)().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Object(a.tidy)((function(){if(!Object(a.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Object(a.env)().getBool("DEBUG");Object(a.env)().set("DEBUG",!1);var n=e.abs(Object(a.scalar)(1e-8)).dataSync()[0];if(Object(a.env)().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,o=t.values,u=t.texture,s=t.usage,c=t.isPacked;if(null==u){var l,f=null!=this.activeTimers;f&&(l=a.util.now());var d=t.texShape;if(null==d&&(d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(a.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?a.util.nearestLargerEven(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=a.util.squeezeShape(e);e=r.newShape}var o=a.util.sizeFromShape(e);if(e.length<=1&&o<=n)return[1,o];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var u=xm(e),s=2,c=2;if(e.length){var l=_m(e),f=Object(i.a)(l,2);s=f[0],c=f[1]}return o=u*(s/2)*(c/2),a.util.sizeToSquarishShape(o).map((function(e){return 2*e}))}return a.util.sizeToSquarishShape(o)}(n,c),t.texShape=d),null!=o){var h,p=wm(n),v=d[1],m=d[0],g=o instanceof Uint8Array;if(c){var b=tm(d[0],d[1]),y=Object(i.a)(b,2);v=y[0],m=y[1],h=new zm(p,[m,v],g)}else h=new Bm(p,[m,v],g);var x=this.makeTensorInfo([m,v],r);this.texData.get(x.dataId).usage=g?Yv.PIXELS:Yv.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),v,m,o);var _=this.runWebGLProgram(h,[x],r,null,!0),w=this.texData.get(_.dataId);t.texture=w.texture,t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,this.disposeIntermediateTensorInfo(x),this.texData.delete(_.dataId),t.values=null,f&&(this.uploadWaitMs+=a.util.now()-l)}else{var k=this.acquireTexture(d,s,r,c);t.texture=k}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*a.util.bytesPerElement(t)}}]),n}(a.KernelBackend);mb.nextDataId=0;a.device_util.isBrowser()&&Object(a.registerBackend)("webgl",(function(){return new mb}),2);var gb=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["A","B"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")},bb=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(Sn.a)(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r);var o=this.outputShape.length,u="";if(i)if(0===o||1===a.util.sizeFromShape(this.outputShape))u="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=lg(o);if(u="\n          ".concat(s," coords = getOutputCoords();\n        "),1===o)u+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var c=Xg("coords",o);u+="\n            bool nextRowOutOfBounds =\n              (".concat(c[o-2]," + 1) >= ").concat(this.outputShape[o-2],";\n            bool nextColOutOfBounds =\n              (").concat(c[o-1]," + 1) >= ").concat(this.outputShape[o-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(u,"\n\n        setOutput(result);\n      }\n    ")};function yb(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var xb={kernelName:a.Identity,backendName:"webgl",kernelFunc:yb};function _b(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),u=yb({inputs:{x:r},backend:n}),s=yb({inputs:{x:a},backend:n});return o.complexTensorInfos={real:u,imag:s},i}var wb={kernelName:a.Complex,backendName:"webgl",kernelFunc:_b},kb="return (a < 0.) ? b * a : a;",Ob="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Sb={kernelName:a.LeakyRelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.alpha,u=n.makeTensorInfo([],"float32",a.util.createScalarValue(o,"float32")),s=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bb(Ob,i.shape,u.shape):new gb(kb,i.shape,u.shape),c=n.runWebGLProgram(s,[i,u],i.dtype);return n.disposeIntermediateTensorInfo(u),c}},jb="return (a < 0.) ? b * a : a;",Eb="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var Cb={kernelName:a.Prelu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=t.alpha,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bb(Eb,r.shape,i.shape):new gb(jb,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}};function Ab(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,i=e.dtype;return function(e){var o,u=e.inputs,s=e.backend,c=u.x,l=s,f=i||c.dtype;if(l.shouldExecuteOnCPU([c])&&null!=r){var d=l.texData.get(c.dataId),h=r(d.values,f);return l.makeTensorInfo(c.shape,f,h)}return o=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new db(c.shape,n):new eb(c.shape,t),l.runWebGLProgram(o,[c],f)}}function Tb(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,o=void 0!==r&&r,u=e.supportsComplex,s=void 0!==u&&u,c=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,u=e.backend,f=r.a,d=r.b,h=u;if(s&&"complex64"===f.dtype){var p=h.texData.get(f.dataId),v=h.texData.get(d.dataId),m=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map((function(e){var n=Object(i.a)(e,2),r=n[0],o=n[1],u={dataId:r.dataId,dtype:r.dtype,shape:f.shape},s={dataId:o.dataId,dtype:o.dtype,shape:d.shape},c=new gb(t,f.shape,d.shape);return h.runWebGLProgram(c,[u,s],Object(a.upcastType)(r.dtype,o.dtype))})),g=Object(i.a)(m,2),b=g[0],y=g[1],x=_b({inputs:{real:b,imag:y},backend:h});return h.disposeIntermediateTensorInfo(b),h.disposeIntermediateTensorInfo(y),x}var _,w=l||Object(a.upcastType)(f.dtype,d.dtype);if(h.shouldExecuteOnCPU([f,d])&&null!=c){var k=h.texData.get(f.dataId),O=h.texData.get(d.dataId),S=c(f.shape,d.shape,k.values,O.values,w),j=Object(i.a)(S,2),E=j[0],C=j[1],A=h.makeTensorInfo(C,w);return h.texData.get(A.dataId).values=E,A}return _=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new bb(n,f.shape,d.shape,o):new gb(t,f.shape,d.shape),h.runWebGLProgram(_,[f,d],w)}}function Nb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?sb:nb;if("relu"===e)return t?lb:ib;if("elu"===e)return t?cb:ab;if("relu6"===e)return t?fb:ob;if("prelu"===e)return t?Eb:jb;if("leakyrelu"===e)return t?Ob:kb;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var Mb=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Object(Sn.a)(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r;var l=a?t[1]:t[2],f=Math.ceil(l/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";u&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(u,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(u,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(u,"\n        }"),g="result = activation(result);");var b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var y="rc.x",x="rc.x";t[0]<n[0]?y="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(y,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(b,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")},Db="return areal * breal - aimag * bimag;",Ib="return areal * bimag + aimag * breal;",Fb=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")},Rb="return a * b;";function Pb(e){var t,n=e.inputs,r=e.backend,o=n.a,u=n.b,s=a.backend_util.upcastType(o.dtype,u.dtype);if("complex64"===o.dtype){var c=r.texData.get(o.dataId),l=r.texData.get(u.dataId),f=new Fb(Db,o.shape,u.shape),d=new Fb(Ib,o.shape,u.shape),h=[{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:o.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:u.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:u.shape}],p=r.runWebGLProgram(f,h,"float32"),v=r.runWebGLProgram(d,h,"float32"),m=_b({inputs:{real:p,imag:v},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(v),m}if(r.shouldExecuteOnCPU([o,u])){var g=r.texData.get(o.dataId),b=r.texData.get(u.dataId),y=Dg(o.shape,u.shape,g.values,b.values,s),x=Object(i.a)(y,2),_=x[0],w=x[1],k=r.makeTensorInfo(w,s);return r.texData.get(k.dataId).values=_,k}return t=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bb(Rb,o.shape,u.shape):new gb(Rb,o.shape,u.shape),r.runWebGLProgram(t,[o,u],s)}var Lb={kernelName:a.Multiply,backendName:"webgl",kernelFunc:Pb};function Bb(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.shape,u=n,s=a.util.sizeFromShape(i.shape),c=a.util.inferFromImplicitShape(o,s),l=a.util.sizeFromShape(c);a.util.assert(s===l,(function(){return"The new shape (".concat(c,") has ").concat(l," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var f=u.texData.get(i.dataId);return!f.isPacked||Om(i.shape,c)||null!==f.texture&&Om(f.shape,c)?(u.incRef(i.dataId),{dataId:i.dataId,shape:c,dtype:i.dtype}):function(e,t,n){var r=[xm(e.shape)].concat(Object(Tn.a)(_m(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[xm(t)].concat(Object(Tn.a)(_m(t))),o=new Kg(i,r),u=n.runWebGLProgram(o,[a],e.dtype,null,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(i,c,u)}var zb={kernelName:a.Reshape,backendName:"webgl",kernelFunc:Bb},Ub=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["x"];var r=t.windowSize,i=t.batchSize,o=t.inSize,u=t.outSize;this.outputShape=[i,u];var s=4*Math.floor(r/4),c=r%4,l="sumValue += dot(values, ones);";if(null!=n){var f=1/n;l="sumValue += dot(values * ".concat(a.util.isInt(f)?f.toPrecision(2):f,", ones);")}var d="";o%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(o,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")},Wb=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var u="0.0",s="";"prod"===n?u="1.0":"min"===n?(u="1.0 / 1e-20",s="min"):"max"===n&&(u="-1.0 / 1e-20",s="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),f=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(s,"(values, minMaxValue);\n      }\n    "),h="vec4";"all"===n?(u="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(u="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(u,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(u,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")};function Vb(e,t,n,r){for(var i=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=a.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e,u=0;u<i.length;u++){var s,c=i[u],l=c.inSize,f=c.windowSize,d=c.outSize,h=void 0;h="mean"===n?0===u?new Ub({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d},l):new Ub({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d}):new Wb({windowSize:f,inSize:l,batchSize:e.shape[0],outSize:d},n),s=o,o=r.runWebGLProgram(h,[o],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return o}var Gb=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=lg(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")};var qb=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=lg(this.rank),o=Hg("rc",this.rank),u=new Array(this.rank),s=0;s<n.length;s++)u[n[s]]=o[s];var c="vec2(".concat(u.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(u.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(l,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(l,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")};function Hb(e,t,n){var r=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qb(e.shape,t):new Gb(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Xb(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var o=t,u=e.shape.length,s=a.util.parseAxisParam(o,e.shape),c=s,l=a.backend_util.getAxesPermutation(c,u),f=null!=l,d=e;f&&(d=Hb(e,l,r),c=a.backend_util.getInnerMostAxes(c.length,u)),a.backend_util.assertAxesAreInnerMostDims("sum",c,u);var h=a.backend_util.computeOutAndReduceShapes(d.shape,c),p=Object(i.a)(h,2),v=p[0],m=p[1],g=v;n&&(g=a.backend_util.expandShapeToKeepDim(v,s));var b=a.util.sizeFromShape(m),y=Bb({inputs:{x:d},attrs:{shape:[a.util.sizeFromShape(e.shape)/b,b]},backend:r}),x=Vb(y,Object(a.sumOutType)(e.dtype),"sum",r),_=Bb({inputs:{x:x},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(x),f&&r.disposeIntermediateTensorInfo(d),_}(t.x,r.axis,r.keepDims,n)}var Yb={kernelName:a.Sum,backendName:"webgl",kernelFunc:Xb};function Kb(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,u=r,s=i.shape.length,c=new Array(s),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(u.shouldExecuteOnCPU([i])){var f=u.texData.get(i.dataId).values,d=Gg(f,i.shape,i.dtype,o,c);t=u.makeTensorInfo(c,i.dtype),u.texData.get(t.dataId).values=d}else t=Hb(i,o,u);return t}var $b={kernelName:a.Transpose,backendName:"webgl",kernelFunc:Kb};function Zb(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.backend,u=e.bias,s=void 0===u?null:u,c=e.preluActivationWeights,l=void 0===c?null:c,f=e.leakyreluAlpha,d=void 0===f?0:f,h=e.activation,p=void 0===h?null:h,v=t.shape.length,m=n.shape.length,g=r?t.shape[v-2]:t.shape[v-1],b=i?n.shape[m-1]:n.shape[m-2],y=r?t.shape[v-1]:t.shape[v-2],x=i?n.shape[m-2]:n.shape[m-1],_=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=a.util.sizeFromShape(_),O=a.util.sizeFromShape(w),S=k===O||1===k||1===O;a.util.assert(v>=2&&m>=2&&S,(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+"batch dimensions of (".concat(_,") and (").concat(w,").")}));var j=(k>O?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,x]);a.util.assert(g===b,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(b,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match.")}));var E,C=r?[k,g,y]:[k,y,g],A=i?[O,x,b]:[O,b,x],T=Bb({inputs:{x:t},backend:o,attrs:{shape:C}}),N=Bb({inputs:{x:n},backend:o,attrs:{shape:A}}),M=[T,N],D=Math.max(k,O),I=r?T.shape[1]:T.shape[2],F=null!=s,R=null!=l,P="leakyrelu"===p,L=null!=p?Nb(p,!0):null;if((1===y||1===x)&&I>1e3&&!1===(F||R||P||null!=L)){var B=T,z=N;r&&(B=Kb({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),M.push(B)),i&&(z=Kb({inputs:{x:N},backend:o,attrs:{perm:[0,2,1]}}),M.push(z));var U=1===x,W=B;1!==x&&(W=Bb({inputs:{x:B},backend:o,attrs:{shape:[D,I,1]}}),M.push(W));var V=1===x?2:1,G=z;U&&(G=Bb({inputs:{x:z},backend:o,attrs:{shape:[D,1,I]}}),M.push(G));var q=Pb({inputs:{a:W,b:G},backend:o});E=Xb({inputs:{x:q},backend:o,attrs:{axis:V,keepDims:!0}}),M.push(q)}else{var H=Object(a.upcastType)(t.dtype,n.dtype),X=new Mb(C,A,[D,y,x],r,i,F,L,R,P),Y=[T,N];if(null!=s&&Y.push(s),R&&Y.push(l),P){var K=o.makeTensorInfo([],"float32",a.util.createScalarValue(d,"float32"));Y.push(K),M.push(K)}E=o.runWebGLProgram(X,Y,H)}var $=Bb({inputs:{x:E},backend:o,attrs:{shape:j}});M.push(E);for(var Z=0,J=M;Z<J.length;Z++){var Q=J[Z];o.disposeIntermediateTensorInfo(Q)}return $}var Jb={kernelName:a._FusedMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,u=t.preluActivationWeights,s=r.transposeA,c=r.transposeB,l=r.activation;return Zb({a:a,b:i,transposeA:s,transposeB:c,backend:n,bias:o,preluActivationWeights:u,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Qb="return abs(x);";var ey={kernelName:a.Abs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=n.x;if(r.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){var o=r.texData.get(i.dataId),u=Lg(o.values);return r.makeTensorInfo(i.shape,i.dtype,u)}return t=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new db(i.shape,Qb):new eb(i.shape,Qb),r.runWebGLProgram(t,[i],i.dtype)}},ty=Ab({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),ny={kernelName:a.Acos,backendName:"webgl",kernelFunc:ty},ry=Ab({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),ay={kernelName:a.Acosh,backendName:"webgl",kernelFunc:ry},iy="return a + b;",oy=Tb({opSnippet:iy,packedOpSnippet:iy,supportsComplex:!0,cpuKernelImpl:gg}),uy={kernelName:a.Add,backendName:"webgl",kernelFunc:oy},sy=function e(t,n){Object(Sn.a)(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")},cy=function e(t,n){Object(Sn.a)(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")};var ly={kernelName:a.AddN,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,i=n;if(1===i.length)return yb({inputs:{x:i[0]},backend:r});if(i.length>Object(a.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(i.length/2),u=e({inputs:i.slice(0,o),backend:r}),s=e({inputs:i.slice(o),backend:r});return e({inputs:[u,s],backend:r})}var c=i.map((function(e){return e.dtype})).reduce((function(e,t){return Object(a.upcastType)(e,t)})),l=i.map((function(e){return e.shape})),f=Object(a.env)().getBool("WEBGL_PACK")?new cy(i[0].shape,l):new sy(i[0].shape,l);return r.runWebGLProgram(f,i,c)}};var fy={kernelName:a.All,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Kb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,c)),a.backend_util.assertAxesAreInnerMostDims("all",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Bb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),x=Vb(y,y.dtype,"all",n);return p=Bb(s?{inputs:{x:x},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=d&&n.disposeIntermediateTensorInfo(h),p}};var dy={kernelName:a.Any,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Kb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,c)),a.backend_util.assertAxesAreInnerMostDims("any",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Bb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),x=Vb(y,y.dtype,"any",n);return p=Bb(s?{inputs:{x:x},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=d&&n.disposeIntermediateTensorInfo(h),p}},hy=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var u="max"===n?">":"<",s=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(s,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(u," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")},py=function e(t,n,r,i){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,a.util.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var o=t[t.length-1],u=Math.ceil(o/n);this.outputShape=t.slice(0,-1),u>1&&this.outputShape.push(u),i||this.variableNames.push("bestIndicesA");var s,c,l=this.outputShape,f=l.length,d=lg(f),h=Xg("coords",f);if(1===u){var p=lg(c=f+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[f-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[f-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[f-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[f-2],";")}else c=f,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(h[f-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(h[f-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(h[f-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(h[f-2],";");var v=["x","y","z","w","u","v"].slice(0,c),m="."+v[c-1],g=v.map((function(e){return"int "+e})),b=Xg("sourceLocR",c-1).concat("inIdx.r"),y=Xg("sourceLocG",c-1).concat("inIdx.g"),x=Xg("sourceLocB",c-1).concat("inIdx.b"),_=Xg("sourceLocA",c-1).concat("inIdx.a"),w="max"===r?"greaterThan":"lessThan",k=i?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),"),\n                             getBestIndicesAChannel(").concat(_.join(),")));"),O="vec4(\n            getAChannel(".concat(b.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(x.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(_.join(),") : 0.)"),S=i?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(v.join(),"),\n                                          vec2(").concat(v.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(v.join(),"),\n                               vec2(").concat(v.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[f-1]," < ").concat(l[f-1]-1,";\n        bool hasNextRow = ").concat(h[f-2]," < ").concat(l[f-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(O,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(O,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(w,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")};function vy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);var u=a.backend_util.computeOptimalWindowSize(o),s={windowSize:u,inSize:o,batchSize:i,outSize:Math.ceil(o/u)},c=new hy(s,n,null==r),l=[t];null!=r&&l.push(r);var f=e.runWebGLProgram(c,l,"int32");if(1===f.shape[1])return f;var d=vy(e,t,n,f);return e.disposeIntermediateTensorInfo(f),d}function my(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null!=r?r.shape:t.shape,o=i[i.length-1],u=a.backend_util.computeOptimalWindowSize(o),s=new py(i,u,n,null==r),c=null==r?[t]:[t,r],l=e.runWebGLProgram(s,c,"int32");if(l.shape.length===t.shape.length){var f=my(e,t,n,l);return e.disposeIntermediateTensorInfo(l),f}return l}function gy(e,t,n,r){var o=[n];if(a.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,t.shape.length),!Object(a.env)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var u=[],s=a.backend_util.computeOutAndReduceShapes(t.shape,o),c=Object(i.a)(s,2),l=c[0],f=c[1],d=a.util.sizeFromShape(f),h=Bb({inputs:{x:t},backend:e,attrs:{shape:[-1,d]}});u.push(h);var p=vy(e,h,r);u.push(p);var v=Bb({inputs:{x:p},backend:e,attrs:{shape:l}});return u.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),v}return my(e,t,r)}var by={kernelName:a.ArgMax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=a.util.parseAxisParam(o,i.shape),s=a.backend_util.getAxesPermutation(u,i.shape.length),c=i,l=[];null!=s&&(c=Kb({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),u=a.backend_util.getInnerMostAxes(u.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMax",[u[0]],c.shape.length);var f=gy(n,c,u[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var yy={kernelName:a.ArgMin,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=a.util.parseAxisParam(o,i.shape),s=a.backend_util.getAxesPermutation(u,i.shape.length),c=i,l=[];null!=s&&(c=Kb({inputs:{x:i},backend:n,attrs:{perm:s}}),l.push(c),u=a.backend_util.getInnerMostAxes(u.length,c.shape.length)),a.backend_util.assertAxesAreInnerMostDims("argMin",[u[0]],c.shape.length);var f=gy(n,c,u[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}},xy=Ab({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),_y={kernelName:a.Asin,backendName:"webgl",kernelFunc:xy},wy=Ab({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),ky={kernelName:a.Asinh,backendName:"webgl",kernelFunc:wy},Oy=Ab({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),Sy={kernelName:a.Atan,backendName:"webgl",kernelFunc:Oy},jy=Tb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Ey={kernelName:a.Atan2,backendName:"webgl",kernelFunc:jy},Cy=Ab({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Ay={kernelName:a.Atanh,backendName:"webgl",kernelFunc:Cy},Ty=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(Sn.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideHeight,s=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),b="0.0";if(v||(b="-1.0 / 1e-20"),r){var y=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(y," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",_="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(_="avgValue / count");var w=4*Math.floor(o/4),k=o%4,O="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(u,", ").concat(s,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(O,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(O,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(O,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(O,"\n          }\n        }\n        setOutput(").concat(_,");\n      }\n    ")}},Ny=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(Sn.a)(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,u=t.strideDepth,s=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;var y="avg"===n,x="0.0";if(y||(x="-1.0 / 1e-20"),r){var _=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(_," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var O=4*Math.floor(o/4),S=o%4,j="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(u,", ").concat(s,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(b,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(O,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(j,"\n            }\n\n            int xC = xCCorner + ").concat(O,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(j,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(j,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(j,"\n            }\n          }\n          setOutput(").concat(k,");\n        }\n      }\n    ")}};var My={kernelName:a.AvgPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;Am(i,"avgPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return yb({inputs:{x:i},backend:n});var f=new Ty(l,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}};var Dy={kernelName:a.AvgPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode,l=r.dataFormat,f=a.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,c,l),d=new Ny(f,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}},Iy=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.top,f=c-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(f,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(s,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(u,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Fy=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=f-1-t.padInfo.front,v=d-1-t.padInfo.top,m=h-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(s,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var Ry={kernelName:a.AvgPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(o.shape,u,s,[1,1,1],c,l),d=new Fy(f);return n.runWebGLProgram(d,[i],o.dtype)}};var Py={kernelName:a.AvgPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;Am([i,o],"avgPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,f=a.backend_util.computePool2DInfo(u.shape,s,c,1,l),d=new Iy(f);return n.runWebGLProgram(d,[i],u.dtype)}};var Ly={kernelName:a.BatchMatMul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Zb({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},By=function e(t,n,r,i,o,u){Object(Sn.a)(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(t,n),a.backend_util.assertAndGetBroadcastShape(t,r);var s="0.0";null!=i&&(a.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="1.0";null!=o&&(a.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(c,";\n        float inv = scale * inversesqrt(variance + float(").concat(u,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")},zy=function e(t,n,r,i,o,u){Object(Sn.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],a.backend_util.assertAndGetBroadcastShape(t,n),a.backend_util.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=i&&(a.backend_util.assertAndGetBroadcastShape(t,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var c="vec4(1.0)";null!=o&&(a.backend_util.assertAndGetBroadcastShape(t,o),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(c,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(u,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")},Uy={kernelName:a.FusedBatchNorm,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.mean,u=t.variance,s=t.offset,c=t.scale;a.util.assert(o.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),a.util.assert(null==s||o.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),a.util.assert(null==c||o.shape.length===c.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var f=[i,o,u],d=null;null!=s&&(d=s.shape,f.push(s));var h=null;null!=c&&(h=c.shape,f.push(c));var p=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new zy(i.shape,o.shape,u.shape,d,h,l):new By(i.shape,o.shape,u.shape,d,h,l);return n.runWebGLProgram(p,f,f[0].dtype)}},Wy=function(){function e(t){Object(Sn.a)(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=lg(this.rank),a="uniform int start[".concat(this.rank,"];"),i=function(e){if(1===e)return"sourceLoc";if(e<=6)return Vy.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),o=t.map((function(e,t){return"sourceLoc.".concat(Vy[t]," = start[").concat(t,"] + coords.").concat(Vy[t],";")}));n="\n        ".concat(r," sourceLoc;\n        ").concat(r," coords = getOutputCoords();\n        ").concat(o.join("\n"),"\n      "),this.userCode="\n      ".concat(a,"\n      void main() {\n        ").concat(n,"\n        setOutput(getSource(").concat(i,"));\n      }\n    ")}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}(),Vy=["x","y","z","w","u","v"];var Gy=function(){function e(t){Object(Sn.a)(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=lg(this.rank),r=Xg("coords",this.rank),a=Xg("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),u="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),s=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      uniform int start[".concat(this.rank,"];\n      void main() {\n        ").concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(u,"\n        ").concat(s,"\n        setOutput(result);\n      }\n    ")}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;if(e.length!==this.rank)throw Error("The rank (".concat(this.rank,") of the program must match the ")+"length of start (".concat(e.length,")"));return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}}}]),e}();function qy(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.begin,s=r.size,c=a.slice_util.parseSliceParams(o,u,s),l=Object(i.a)(c,2),f=l[0],d=l[1];if(a.slice_util.assertParamsValid(o,f,d),0===a.util.sizeFromShape(d))return n.makeTensorInfo(d,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||"string"===o.dtype){var h=n.texData.get(o.dataId),p=Bg(h.values,f,d,o.shape,o.dtype);return n.makeTensorInfo(d,o.dtype,p)}var v=n.texData.get(o.dataId).isPacked,m=a.slice_util.isSliceContinous(o.shape,f,d);if(v||!m){var g=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gy(d):new Wy(d),b=g.getCustomSetupFunc(f);return n.runWebGLProgram(g,[o],o.dtype,b)}return n.uploadToGPU(o.dataId),function(e,t,n,r){var i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),u=r.texData.get(o.dataId);Object.assign(u,i),u.refCount=1,u.shape=n,u.dtype=e.dtype;var s=a.slice_util.computeFlatOffset(t,a.util.computeStrides(e.shape));i.slice&&(s+=i.slice.flatOffset),u.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};var c=r.dataRefCount.get(u.slice.origDataId)||1;return r.dataRefCount.set(u.slice.origDataId,c+1),o}(o,f,d,n)}var Hy={kernelName:a.Slice,backendName:"webgl",kernelFunc:qy},Xy={kernelName:a.BatchToSpaceND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.crops;a.util.assert(i.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=a.backend_util.getReshaped(i.shape,o,s),l=a.backend_util.getPermuted(c.length,o.length),f=a.backend_util.getReshapedPermuted(i.shape,o,s),d=a.backend_util.getSliceBeginCoords(u,o.length),h=a.backend_util.getSliceSize(f,u,o.length),p=[],v=Bb({inputs:{x:i},backend:n,attrs:{shape:c}}),m=Kb({inputs:{x:v},backend:n,attrs:{perm:l}}),g=Bb({inputs:{x:m},backend:n,attrs:{shape:f}}),b=qy({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(v),p.push(m),p.push(g),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var Yy={kernelName:a.Bincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=n.readSync(a.dataId),s=n.readSync(i.dataId),c=bg(u,s,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}},Ky=Tb({opSnippet:"return float(a != b);",dtype:"bool"}),$y={kernelName:a.NotEqual,backendName:"webgl",kernelFunc:Ky};function Zy(e){var t=e.inputs,n=e.backend,r=t.input;return yb({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Jy={kernelName:a.Real,backendName:"webgl",kernelFunc:Zy};var Qy={kernelName:a.Cast,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,i=t.attrs,o=n.x,u=i.dtype;if("complex64"===u){if("complex64"===o.dtype)return yb({inputs:{x:o},backend:r});var s=a.zeros(o.shape),c=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),l=_b({inputs:{real:c,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(c),l}if("complex64"===o.dtype){var f=Zy({inputs:{input:o},backend:r}),d=e({inputs:{x:f},backend:r,attrs:{dtype:u}});return r.disposeIntermediateTensorInfo(f),d}if(!a.util.hasEncodingLoss(o.dtype,u)){var h=yb({inputs:{x:o},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:u}}if("int32"===u)return function(e,t){var n=new eb(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===u){var p=r.makeTensorInfo([],"bool",a.util.getTypedArrayFromDType("bool",1)),v=Ky({inputs:{a:o,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),v}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(u))}},ex="return ceil(x);",tx=Ab({opSnippet:ex,packedOpSnippet:ex,cpuKernelImpl:xg}),nx={kernelName:a.Ceil,backendName:"webgl",kernelFunc:tx},rx=function(){function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}(),ax=function(){function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}}}]),e}();var ix={kernelName:a.ClipByValue,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=i.clipValueMin,s=i.clipValueMax,c=(t=Object(a.env)().getBool("WEBGL_PACK_CLIP")?new ax(o.shape):new rx(o.shape)).getCustomSetupFunc(u,s);return r.runWebGLProgram(t,[o],o.dtype,c)}},ox=function e(t){Object(Sn.a)(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};function ux(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var sx={kernelName:a.ComplexAbs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new ox(r.shape),o=[ux(r,a.complexTensorInfos.real),ux(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},cx=function e(t){Object(Sn.a)(this,e),this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var i=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],o=1;o<n.length;o++){var u=n[o-1];i.push("else if (yC < ".concat(n[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(u,"));"))}var s=n.length,c=n[n.length-1];i.push("else setOutput(getT".concat(s,"(yR, yC-").concat(c,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(i.join("\n        "),"\n      }\n    ")},lx=function e(t,n){Object(Sn.a)(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=a.backend_util.computeOutShape(t,n);var r=this.outputShape,i=r.length,o=lg(i),u=Xg("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var c=new Array(t.length-1);c[0]=t[0][n];for(var l=1;l<c.length;l++)c[l]=c[l-1]+t[l][n];for(var f=s[n],d=s.slice(-2),h=s.join(),p="if (".concat(f," < ").concat(c[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(d.join(),"));\n        }"),v=1;v<c.length;v++){var m=c[v-1];p+="\n        if (".concat(f," < ").concat(c[v],"  && ").concat(f," >= ").concat(c[v-1],") {\n          return getChannel(\n            getT").concat(v,"(").concat(fx(s,f,m),"),\n            vec2(").concat(fx(d,f,m),"));\n        }")}var g=c.length,b=c[c.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(fx(s,f,b),"),\n          vec2(").concat(fx(d,f,b),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(u,"), 0., 0., 0.);\n\n        ").concat(u[i-1]," = ").concat(u[i-1]," + 1;\n        if (").concat(u[i-1]," < ").concat(r[i-1],") {\n          result.g = getValue(").concat(u,");\n        }\n\n        ").concat(u[i-2]," = ").concat(u[i-2]," + 1;\n        if (").concat(u[i-2]," < ").concat(r[i-2],") {\n          result.a = getValue(").concat(u,");\n        }\n\n        ").concat(u[i-1]," = ").concat(u[i-1]," - 1;\n        if (").concat(u[i-2]," < ").concat(r[i-2]," &&\n            ").concat(u[i-1]," < ").concat(r[i-1],") {\n          result.b = getValue(").concat(u,");\n        }\n        setOutput(result);\n      }\n    ")};function fx(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function dx(e){var t=e.inputs,n=e.backend,r=t.input;return yb({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var hx={kernelName:a.Imag,backendName:"webgl",kernelFunc:dx};function px(e,t,n){var r=e[0].dtype;if("complex64"===r){var i=e.map((function(e){return Zy({inputs:{input:e},backend:n})})),o=e.map((function(e){return dx({inputs:{input:e},backend:n})})),u=px(i,t,n),s=px(o,t,n),c=_b({inputs:{real:u,imag:s},backend:n});return i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(s),c}if("string"===r){var l=vx(e,t,n),f=l.tensors2D,d=l.outShape,h=f.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),p=1===f[0].shape[0],v=_g(h,d,r,p),m=a.backend_util.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,v);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>Object(a.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var b=Math.floor(e.length/2),y=px(e.slice(0,b),t,n),x=px(e.slice(b),t,n),_=px([y,x],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),_}if(Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new lx(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=vx(e,t,n),O=k.tensors2D,S=k.outShape,j=new cx(O.map((function(e){return e.shape}))),E=n.runWebGLProgram(j,O,r);O.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=Bb({inputs:{x:E},attrs:{shape:S},backend:n});return n.disposeIntermediateTensorInfo(E),C}function vx(e,t,n){var r=a.backend_util.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return Bb({inputs:{x:e},attrs:{shape:[-1,a.util.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}function mx(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,i=a.util.parseAxisParam(r,t[0].shape)[0],o=a.backend_util.computeOutShape(t.map((function(e){return e.shape})),i);if(0===a.util.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);var u=t.filter((function(e){return a.util.sizeFromShape(e.shape)>0}));if(1===u.length)return yb({inputs:{x:u[0]},backend:n});var s=u.map((function(e){return e.shape}));return a.backend_util.assertParamsConsistent(s,i),px(u,i,n)}var gx={kernelName:a.Concat,backendName:"webgl",kernelFunc:mx},bx=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(Sn.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,u=t.padInfo.left,s=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,b=m?2:3,y=m?3:1,x="",_="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),_="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(s,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(b,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(_,"\n        setOutput(result);\n      }\n    ")},yx=function e(t){Object(Sn.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(u,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(s,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},xx=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var a=r.filterWidth,i=r.inChannels,o=r.strideWidth,u=r.strideHeight,s=r.padInfo,c=r.outWidth,l=r.dilationWidth,f=r.dilationHeight,d=r.dataFormat,h=s.left,p=s.top,v=i*a,m=Nm(),g="channelsLast"===d,b=g?0:1,y=g?1:2,x="",_=0;_<=1;_++)for(var w=0;w<=1;w++)x+="\n          blockIndex = rc.y + ".concat(w,";\n          pos = rc.x + ").concat(_,";\n\n          if(blockIndex < ").concat(t[1]," && pos < ").concat(t[0],") {\n            offsetY = int(blockIndex / (").concat(c,")) * ").concat(u," - ").concat(p,";\n            d0 = offsetY + ").concat(f," * (pos / ").concat(v,");\n\n            if(d0 < ").concat(n[b]," && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ").concat(c,".) * ").concat(o,". - ").concat(h,".);\n              d1 = offsetX + ").concat(l," * (int(mod(float(pos), ").concat(v,".) / ").concat(i,".));\n\n              if(d1 < ").concat(n[y]," && d1 >= 0) {\n\n                ch = int(mod(float(pos), ").concat(i,".));\n\n                if (").concat(g,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*_+w,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*_+w,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(x,"\n\n        ").concat(m.output," = result;\n      }\n    ")};function _x(e){var t,n=e.x,r=e.filter,i=e.convInfo,o=e.backend,u=e.bias,s=void 0===u?null:u,c=e.preluActivationWeights,l=void 0===c?null:c,f=e.leakyreluAlpha,d=void 0===f?0:f,h=e.activation,p=void 0===h?null:h,v=n.shape,m=o.texData.get(n.dataId),g=i.inChannels,b=v[0]*v[1]*v[2],y=i.outChannels,x="channelsLast"===i.dataFormat,_=[],w=(1===b||1===y)&&g>1e3,k=v[2]%2!==0&&!!m.isPacked;if(!w&&Object(a.env)().getBool("WEBGL_LAZILY_UNPACK")&&Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&k){var O=x?v[0]*v[1]*(v[2]+1):v[0]*v[2]*(v[3]+1),S={dataId:n.dataId,shape:[1,O,i.inChannels],dtype:n.dtype},j=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,a.util.assert(Om(m.shape,S.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(S.shape," isn't free")}));var E=Bb({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});_.push(E);var C=Zb({a:S,b:E,backend:o,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d}),A=o.texData.get(C.dataId);a.util.assert(A.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=j,A.shape=i.outShape,(t=yb({inputs:{x:C},backend:o})).shape=i.outShape,_.push(C)}else{var T=Bb({inputs:{x:n},backend:o,attrs:{shape:[1,x?v[0]*v[1]*v[2]:v[0]*v[2]*v[3],i.inChannels]}}),N=Bb({inputs:{x:r},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}}),M=Zb({a:T,b:N,transposeA:false,transposeB:false,backend:o,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d});t=Bb({inputs:{x:M},backend:o,attrs:{shape:i.outShape}}),_.push(T),_.push(N),_.push(M)}for(var D=0,I=_;D<I.length;D++){var F=I[D];o.disposeIntermediateTensorInfo(F)}return t}function wx(e){var t=e.x,n=e.filter,r=e.convInfo,i=e.backend,o=e.bias,u=void 0===o?null:o,s=e.preluActivationWeights,c=void 0===s?null:s,l=e.leakyreluAlpha,f=void 0===l?0:l,d=e.activation,h=void 0===d?null:d,p=r.filterWidth,v=r.filterHeight,m=r.inChannels,g=r.outWidth,b=r.outHeight,y="channelsLast"===r.dataFormat,x=p*v*m,_=b*g,w=[x,_],k=[],O=Bb({inputs:{x:t},backend:i,attrs:{shape:t.shape.slice(1)}}),S=Bb({inputs:{x:n},backend:i,attrs:{shape:[1,x,a.util.sizeFromShape(n.shape)/x]}});k.push(O),k.push(S);var j=new xx(w,O.shape,r),E=i.runWebGLProgram(j,[O],"float32"),C=Bb({inputs:{x:E},backend:i,attrs:{shape:[1,w[0],w[1]]}});k.push(E),k.push(C);var A=null!=u,T=null!=c,N="leakyrelu"===h,M=h?Nb(h,!0):null,D=new Mb(C.shape,S.shape,[1,_,r.outChannels],!0,!1,A,M,T,N),I=[C,S];if(u&&I.push(u),T&&I.push(c),N){var F=i.makeTensorInfo([],"float32",a.util.createScalarValue(f,"float32"));I.push(F),k.push(F)}var R=i.runWebGLProgram(D,I,"float32"),P=Bb({inputs:{x:R},backend:i,attrs:{shape:y?[1,b,g,r.outChannels]:[1,r.outChannels,b,g]}});k.push(R);for(var L=0,B=k;L<B.length;L++){var z=B[L];i.disposeIntermediateTensorInfo(z)}return P}var kx={kernelName:a.Conv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=i.strides,c=i.pad,l=i.dataFormat,f=i.dilations,d=i.dimRoundingMode,h=a.backend_util.convertConv2DDataFormat(l),p=a.backend_util.computeConv2DInfo(o.shape,u.shape,s,f,c,d,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=wx({x:o,filter:u,convInfo:p,backend:r});else{var v=new bx(p);t=r.runWebGLProgram(v,[o,u],"float32")}else t=_x({x:o,filter:u,convInfo:p,backend:r});var m=Bb({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},Ox=function e(t){Object(Sn.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Sx=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,u=n-1-t.padInfo.top,s=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},jx=function e(t){Object(Sn.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,u=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(u,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Ex=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,u=t.strideWidth,s=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(s,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(u,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var Cx={kernelName:a.Conv2DBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=r.filterShape,d=a.backend_util.convertConv2DDataFormat(c),h=a.backend_util.computeConv2DInfo(i.shape,f,u,1,s,l,!1,d),p=new Ox(h);return n.runWebGLProgram(p,[i,o],"float32")}};var Ax={kernelName:a.Conv2DBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.inputShape,s=r.strides,c=r.pad,l=r.dataFormat,f=r.dimRoundingMode,d=a.backend_util.convertConv2DDataFormat(l),h=a.backend_util.computeConv2DInfo(u,o.shape,s,1,c,f,!1,d),p=new Sx(h);return n.runWebGLProgram(p,[i,o],"float32")}};var Tx={kernelName:a.Conv3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=a.backend_util.computeConv3DInfo(i.shape,o.shape,u,c,s),f=new yx(l);return n.runWebGLProgram(f,[i,o],"float32")}};var Nx={kernelName:a.Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.pad,c=r.filterShape,l=a.backend_util.computeConv3DInfo(i.shape,c,u,1,s),f=new jx(l);return n.runWebGLProgram(f,[i,o],"float32")}};var Mx={kernelName:a.Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.pad,s=r.strides,c=r.inputShape,l=a.backend_util.computeConv3DInfo(c,o.shape,s,1,u),f=new Ex(l);return n.runWebGLProgram(f,[i,o],"float32")}},Dx=Ab({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),Ix={kernelName:a.Cos,backendName:"webgl",kernelFunc:Dx},Fx=Ab({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),Rx={kernelName:a.Cosh,backendName:"webgl",kernelFunc:Fx},Px=function e(t,n,r,a,o){Object(Sn.a)(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3],d=Object(i.a)(n,1)[0],h=Object(i.a)(r,2),p=h[0],v=h[1];this.outputShape=[d,p,v,f];var m="bilinear"===a?1:0,g="".concat(c-1,".0"),b="".concat(l-1,".0"),y=p>1?["".concat((c-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],x=Object(i.a)(y,3),_=x[0],w=x[1],k=x[2],O=v>1?["".concat((l-1)/(v-1)),"(x2-x1) * width_ratio","x1*".concat(b," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(b)],S=Object(i.a)(O,3),j=S[0],E=S[1],C=S[2];this.userCode="\n      const float height_ratio = float(".concat(_,");\n      const float width_ratio = float(").concat(j,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(w,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(b," ) {\n          setOutput(float(").concat(o,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(m," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")},Lx={kernelName:a.CropAndResize,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,u=r.cropSize,s=r.method,c=r.extrapolationValue,l=new Px(a.shape,i.shape,u,s,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},Bx=function(){function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(zx(a,"coords"),")"),o=t[t.length-1],u="",s="";n?(u=r?"end != ".concat(o-1):"end != 0",s=r?"end + 1":"end - 1"):(u=r?"end + pow2 < ".concat(o):"end >= pow2",s=r?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        ".concat(lg(a)," coords = getOutputCoords();\n        int end = ").concat(Ux(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(u,") {\n          int idx = ").concat(s,";\n          ").concat(Ux(a,"coords")," = idx;\n          val += getX(").concat(zx(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}}}]),e}();function zx(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function Ux(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var Wx={kernelName:a.Cumsum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.axis,u=r.exclusive,s=r.reverse,c=i.shape.length,l=a.backend_util.getAxesPermutation([o],c),f=i;null!=l&&(f=Kb({inputs:{x:i},backend:n,attrs:{perm:l}}));var d=a.backend_util.getInnerMostAxes(1,c)[0];if(d!==c-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(i.shape.length-1," ")+"but got axis=".concat(o));for(var h=f.shape[d],p=yb({inputs:{x:f},backend:n}),v=0;v<=Math.ceil(Math.log2(h))-1;v++){var m=new Bx(f.shape,!1,s),g=m.getCustomSetupFunc(v),b=p;p=n.runWebGLProgram(m,[p],p.dtype,g),n.disposeIntermediateTensorInfo(b)}if(u){var y=new Bx(f.shape,u,s),x=p;p=n.runWebGLProgram(y,[p],p.dtype),n.disposeIntermediateTensorInfo(x)}if(null!=l){var _=Kb({inputs:{x:p},backend:n,attrs:{perm:a.backend_util.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),_}return p}};var Vx={kernelName:a.DenseBincount,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,u=r.binaryOutput;if(1===a.shape.length){var s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=bg(s,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(i),h=yg(f,d,o,u);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},Gx=function(){function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Object(jn.a)(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var qx={kernelName:a.DepthToSpace,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockSize,u=r.dataFormat;a.util.assert(o>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(o)}));var s=i.shape[0],c="NHWC"===u?i.shape[1]:i.shape[2],l="NHWC"===u?i.shape[2]:i.shape[3],f="NHWC"===u?i.shape[3]:i.shape[1],d=c*o,h=l*o,p=f/(o*o),v=new Gx("NHWC"===u?[s,d,h,p]:[s,p,d,h],o,u);return n.runWebGLProgram(v,[i],i.dtype)}},Hx=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(Sn.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,u=t.inWidth,s=t.padInfo.top,c=t.padInfo.left,l=t.strideHeight,f=t.strideWidth,d=t.dilationHeight,h=t.dilationWidth,p=t.filterHeight,v=t.filterWidth,m=t.outChannels/t.inChannels,g="",b="";r&&(g=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),b="result = activation(result);");var y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(g,"\n\n      const ivec2 strides = ivec2(").concat(l,", ").concat(f,");\n      const ivec2 pads = ivec2(").concat(s,", ").concat(c,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(m,";\n        int q = d2 - d1 * ").concat(m,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(p,"; wR++) {\n          int xR = xRCorner + wR * ").concat(d,";\n\n          if (xR < 0 || xR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC++) {\n            int xC = xCCorner + wC * ").concat(h,";\n\n            if (xC < 0 || xC >= ").concat(u,") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(y,"\n        ").concat(b,"\n        setOutput(result);\n      }\n    ")},Xx=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(Sn.a)(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var u=t.inHeight,s=t.inWidth,c=t.padInfo.top,l=t.padInfo.left,f=t.strideHeight,d=t.strideWidth,h=t.dilationHeight,p=t.dilationWidth,v=t.filterHeight,m=t.filterWidth,g=m,b="int xR; int xC; int xCOffset;",y=0;y<v;y++)for(var x=0;x<m;x++)b+="\n          vec4 xTexelR".concat(y,"C").concat(2*x," = vec4(0.);\n          vec4 wR").concat(y,"C").concat(x," = vec4(0.);\n          vec4 xR").concat(y,"C").concat(x," = vec4(0.);");for(var _=0;_<v;_++)for(var w=0;w<g;w++){var k=2*w;if(b+="\n          xR = xRCorner + ".concat(_*h,";\n          xC = xCCorner + ").concat(k*p,";\n        "),1===d){if(k<m&&(b+=l%2===1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ".concat(u," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(_,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    xTexelR").concat(_,"C").concat(k,".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR").concat(_,"C").concat(k," = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ").concat(u," && xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ").concat(s,") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR").concat(_,"C").concat(k," = vec4(previous.zw, xTexelR").concat(_,"C").concat(k,".xy);\n                } else {\n                  xR").concat(_,"C").concat(k," = vec4(0, 0, xTexelR").concat(_,"C").concat(k,".xy);\n                }\n              "):"\n                if(xR >= 0 && xR < ".concat(u," && xC >= 0 && xC < ").concat(s,") {\n                  xTexelR").concat(_,"C").concat(k," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(_,"C").concat(k," = vec4(0.);\n                }\n\n                xR").concat(_,"C").concat(k," = xTexelR").concat(_,"C").concat(k,";\n              "),k+1<m)){var O=l%2===0?a.util.nearestLargerEven(p):p;p%2===0&&l%2===1||p%2!==0&&l%2!==1?(b+="\n                  xCOffset = xC + ".concat(l%2," + ").concat(O,";\n\n                  if(xR >= 0 && xR < ").concat(u," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(_,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                  }\n                "),p>1&&(b+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ".concat(u," &&\n                      xCOffset >= 0 && xCOffset < ").concat(s,") {\n                      xTexelR").concat(_,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR").concat(_,"C").concat(k," = vec4(0.);\n                    }\n                  ")),b+="\n                  xR".concat(_,"C").concat(k+1," = vec4(\n                    xTexelR").concat(_,"C").concat(k,".zw, xTexelR").concat(_,"C").concat(k+2,".xy);\n                ")):b+="\n                  xCOffset = xC + ".concat(O,";\n\n                  if(xR >= 0 && xR < ").concat(u," &&\n                    xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    xTexelR").concat(_,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR").concat(_,"C").concat(k+1," = xTexelR").concat(_,"C").concat(k+2,";\n                ")}}else k<m&&(b+="\n              if(xR >= 0 && xR < ".concat(u,") {\n            "),l%2===1?(b+="\n                xCOffset = xC + 1 - ".concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(_,"C").concat(k," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(_,"C").concat(k," = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ").concat(s,") {\n                  xTexelR").concat(_,"C").concat(k+2," = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR").concat(_,"C").concat(k+2," = vec4(0.);\n                }\n\n                xR").concat(_,"C").concat(k," = vec4(\n                  xTexelR").concat(_,"C").concat(k,".zw, xTexelR").concat(_,"C").concat(k+2,".zw);\n              "),k+1<m&&(b+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ".concat(d,";\n                  if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR").concat(_,"C").concat(k+1," = vec4(xTexelR").concat(_,"C").concat(k+2,".xy, final.xy);\n                "))):(b+="\n                if(xC >= 0 && xC < ".concat(s,") {\n                  xTexelR").concat(_,"C").concat(k," = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR").concat(_,"C").concat(k," = vec4(0.);\n                }\n\n                xCOffset = xC + ").concat(d,";\n                if(xCOffset >= 0 && xCOffset < ").concat(s,") {\n                  xTexelR").concat(_,"C").concat(k+2," = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR").concat(_,"C").concat(k+2," = vec4(0.);\n                }\n\n                xR").concat(_,"C").concat(k," = vec4(\n                  xTexelR").concat(_,"C").concat(k,".xy, xTexelR").concat(_,"C").concat(k+2,".xy);\n              "),k+1<m&&(b+="\n                  xR".concat(_,"C").concat(k+1," = vec4(\n                    xTexelR").concat(_,"C").concat(k,".zw, xTexelR").concat(_,"C").concat(k+2,".zw);\n                "))),b+="}");k<m&&(b+="\n            vec4 wTexelR".concat(_,"C").concat(k," = getW(").concat(_,", ").concat(k,", d1, q);\n            wR").concat(_,"C").concat(k," = vec4(wTexelR").concat(_,"C").concat(k,".xz, wTexelR").concat(_,"C").concat(k,".xz);\n          "),k+1<m&&(b+="\n              vec4 wTexelR".concat(_,"C").concat(k+1," = getW(").concat(_,", ").concat(k+1,", d1, q);\n              wR").concat(_,"C").concat(k+1," =\n                vec4(wTexelR").concat(_,"C").concat(k+1,".xz, wTexelR").concat(_,"C").concat(k+1,".xz);")))}for(var S=0;S<v;S++)for(var j=0;j<m;j++)b+="dotProd += xR".concat(S,"C").concat(j," * wR").concat(S,"C").concat(j,";");var E="",C="";r&&(E=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):o?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),C="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(E,"\n\n      const ivec2 strides = ivec2(").concat(f,", ").concat(d,");\n      const ivec2 pads = ivec2(").concat(c,", ").concat(l,");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ").concat(b,"\n\n        vec4 result = dotProd;\n        ").concat(A,"\n        ").concat(C,"\n        setOutput(result);\n      }\n    ")};var Yx={kernelName:a.DepthwiseConv2dNative,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=r.strides,s=r.pad,c=r.dilations,l=r.dimRoundingMode,f=c;null==f&&(f=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(f,"'")}));var d,h=a.backend_util.computeConv2DInfo(i.shape,o.shape,u,f,s,l,!0);return d=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new Xx(h):new Hx(h),n.runWebGLProgram(d,[i,o],"float32")}},Kx=function e(t){Object(Sn.a)(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},$x=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,u=r-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(s,"; dm++) {\n              int d2 = d1 * ").concat(s," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var Zx={kernelName:a.DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.dy,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.filterShape,d=a.backend_util.computeConv2DInfo(i.shape,f,u,s,c,l,!0),h=new Kx(d);return n.runWebGLProgram(h,[i,o],"float32")}};var Jx={kernelName:a.DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.filter,u=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,f=r.inputShape,d=a.backend_util.computeConv2DInfo(f,o.shape,u,s,c,l,!0),h=new $x(d);return n.runWebGLProgram(h,[i,o],"float32")}},Qx=function e(t){Object(Sn.a)(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};var e_={kernelName:a.Diag,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,i=[].concat(Object(Tn.a)(r.shape),Object(Tn.a)(r.shape)),o=a.util.sizeFromShape(r.shape),u=Bb({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Qx(o),c=n.runWebGLProgram(s,[u],u.dtype),l=Bb({inputs:{x:c},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),l}},t_=function e(t){Object(Sn.a)(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,u=t.filterHeight,s=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,f=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(u,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(s,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")};var n_={kernelName:a.Dilation2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=i.strides,c=i.pad,l=i.dilations,f=a.backend_util.computeDilation2DInfo(o.shape,u.shape,s,c,"NHWC",l),d=new t_(f),h=Bb({inputs:{x:t=r.runWebGLProgram(d,[o,u],"float32")},backend:r,attrs:{shape:f.outShape}});return r.disposeIntermediateTensorInfo(t),h}},r_=Ab({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),a_={kernelName:a.Elu,backendName:"webgl",kernelFunc:r_},i_={kernelName:a.EluGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,i=t.y,o=Object(a.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bb("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new gb("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},o_=Tb({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"}),u_={kernelName:a.Equal,backendName:"webgl",kernelFunc:o_},s_=Ab({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(a.backend_util.ERF_P,";\n  float a1 = ").concat(a.backend_util.ERF_A1,";\n  float a2 = ").concat(a.backend_util.ERF_A2,";\n  float a3 = ").concat(a.backend_util.ERF_A3,";\n  float a4 = ").concat(a.backend_util.ERF_A4,";\n  float a5 = ").concat(a.backend_util.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),c_={kernelName:a.Erf,backendName:"webgl",kernelFunc:s_},l_="return exp(x);",f_=Ab({opSnippet:l_,packedOpSnippet:l_,cpuKernelImpl:wg}),d_={kernelName:a.Exp,backendName:"webgl",kernelFunc:f_};function h_(e){var t=e.inputs,n=e.attrs,r=e.backend,i=n.dim,o=t.input,u=o.shape.length,s=o.shape.slice(),c=i;return i<0&&(a.util.assert(-(u+1)<=i,(function(){return"Axis must be in the interval [".concat(-(u+1),", ").concat(u,"]")})),c=u+i+1),s.splice(c,0,1),Bb({inputs:{x:o},backend:r,attrs:{shape:s}})}var p_={kernelName:a.ExpandDims,backendName:"webgl",kernelFunc:h_},v_="return exp(x) - 1.0;",m_=Ab({opSnippet:v_,packedOpSnippet:v_,cpuKernelImpl:kg}),g_={kernelName:a.Expm1,backendName:"webgl",kernelFunc:m_},b_=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),u=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(u,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")};function y_(e,t,n){var r=n.texData.get(e.dataId),i=a.util.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],u=Bb({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),s=u.shape,c=new b_("real",s,t),l=new b_("imag",s,t),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(c,f,"float32"),h=n.runWebGLProgram(l,f,"float32"),p=_b({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);var v=Bb({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),v}var x_={kernelName:a.FFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return y_(t.input,!1,n)}},__=function(){function e(t,n){Object(Sn.a)(this,e),this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}}}]),e}();function w_(e){var t=e.backend,n=e.attrs,r=n.shape,i=n.value,o=n.dtype;if("string"===(o=o||a.util.inferDtype(i))){var u=a.util.getArrayFromDType(o,a.util.sizeFromShape(r));return u.fill(i),t.makeTensorInfo(r,o,u)}var s=new __(r,i),c=s.getCustomSetupFunc(i);return t.runWebGLProgram(s,[],o,c)}var k_,O_={kernelName:a.Fill,backendName:"webgl",kernelFunc:w_},S_=function e(t){Object(Sn.a)(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},j_={kernelName:a.FlipLeftRight,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new S_(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},E_="return floor(x);",C_=Ab({opSnippet:E_,packedOpSnippet:E_,cpuKernelImpl:Og}),A_={kernelName:a.Floor,backendName:"webgl",kernelFunc:C_},T_=Tb({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),N_={kernelName:a.FloorDiv,backendName:"webgl",kernelFunc:T_},M_=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"];var n=Nm(),r=Object(i.a)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(o,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")},D_=function e(t){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Nm(),r=Object(i.a)(t,2),a=r[0],o=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(o,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")},I_={kernelName:a.FromPixels,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,u=r.numChannels,s="undefined"!==typeof HTMLVideoElement&&o instanceof HTMLVideoElement,c="undefined"!==typeof HTMLImageElement&&o instanceof HTMLImageElement,l="undefined"!==typeof ImageBitmap&&o instanceof ImageBitmap,f=s?[o.videoWidth,o.videoHeight]:[o.width,o.height],d=Object(i.a)(f,2),h=d[0],p=d[1],v=[p,h],m=[p,h,u];(c||s||l)&&(null==k_&&(k_=document.createElement("canvas").getContext("2d")),k_.canvas.width=h,k_.canvas.height=p,k_.drawImage(o,0,0,h,p),o=k_.canvas);var g=n.makeTensorInfo(v,"int32");n.texData.get(g.dataId).usage=Yv.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(g.dataId),o);var b=Object(a.env)().getBool("WEBGL_PACK")?new D_(m):new M_(m),y=n.runWebGLProgram(b,[g],"int32");return n.disposeData(g.dataId),y}};var F_={kernelName:a.FusedConv2D,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=n.filter,s=n.bias,c=n.preluActivationWeights,l=i.strides,f=i.pad,d=i.dataFormat,h=i.dilations,p=i.dimRoundingMode,v=i.activation,m=i.leakyreluAlpha,g=a.backend_util.convertConv2DDataFormat(d),b=a.backend_util.computeConv2DInfo(o.shape,u.shape,l,h,f,p,!1,g),y=[];if(1!==b.filterHeight||1!==b.filterWidth||1!==b.dilationHeight||1!==b.dilationWidth||1!==b.strideHeight||1!==b.strideWidth||"SAME"!==b.padInfo.type&&"VALID"!==b.padInfo.type)if(Object(a.env)().getBool("WEBGL_CONV_IM2COL")&&1===o.shape[0])t=wx({x:o,filter:u,convInfo:b,backend:r,bias:s,activation:v,preluActivationWeights:c,leakyreluAlpha:m});else{var x=null!=s,_=null!=c,w="leakyrelu"===v,k=v?Nb(v,!1):null,O=new bx(b,x,k,_,w),S=[o,u];if(s&&S.push(s),c&&S.push(c),w){var j=r.makeTensorInfo([],"float32",a.util.createScalarValue(m,"float32"));S.push(j),y.push(j)}t=r.runWebGLProgram(O,S,"float32")}else t=_x({x:o,filter:u,convInfo:b,backend:r,bias:s,activation:v,preluActivationWeights:c,leakyreluAlpha:m});var E=Bb({inputs:{x:t},backend:r,attrs:{shape:b.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var R_={kernelName:a.FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.filter,u=t.bias,s=t.preluActivationWeights,c=r.strides,l=r.pad,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=[],m=f;null==m&&(m=[1,1]),a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(c,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(c," and dilations '").concat(m,"'")}));var g,b=a.backend_util.computeConv2DInfo(i.shape,o.shape,c,m,l,d,!0),y=Object(a.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,x=h?Nb(h,y):null,_=[i,o],w=null!=u,k=null!=s,O="leakyrelu"===h;if(w&&_.push(u),k&&_.push(s),O){var S=n.makeTensorInfo([],"float32",a.util.createScalarValue(p,"float32"));_.push(S),v.push(S)}g=y?new Xx(b,w,x,k,O):new Hx(b,w,x,k,O);var j=n.runWebGLProgram(g,_,"float32");return v.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),j}},P_=function e(t,n,r){Object(Sn.a)(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=lg(n.length),i=lg(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")};var L_={kernelName:a.GatherNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,o=t.indices,u=o.shape,s=u[u.length-1],c=a.backend_util.prepareAndValidate(r,o),l=Object(i.a)(c,4),f=l[0],d=l[1],h=l[2],p=l[3],v=Bb({inputs:{x:o},backend:n,attrs:{shape:[d,s]}}),m=Bb({inputs:{x:r},backend:n,attrs:{shape:[a.util.sizeFromShape(r.shape)/h,h]}}),g=new P_(s,p,[d,h]),b=n.runWebGLProgram(g,[m,v],m.dtype),y=Bb({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),y}},B_=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=lg(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")};var z_={kernelName:a.GatherV2,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.indices,u=r.axis,s=r.batchDims,c=a.util.parseAxisParam(u,i.shape)[0],l=a.backend_util.segment_util.collectGatherOpShapeInfo(i,o,c,s),f=a.util.sizeFromShape(o.shape),d=[],h=Bb({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=Bb({inputs:{x:o},backend:n,attrs:{shape:[l.batchSize,f/l.batchSize]}});d.push(h),d.push(p);var v=[l.batchSize,l.outerSize,f/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){var m=n.bufferSync(p),g=n.bufferSync(h),b=Sg(g,m,v);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,b.dtype,b.values)}var y=new B_(h.shape,v),x=n.runWebGLProgram(y,[h,p],h.dtype);d.push(x);var _=Bb({inputs:{x:x},backend:n,attrs:{shape:l.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),_}},U_=Tb({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:jg,dtype:"bool"}),W_={kernelName:a.Greater,backendName:"webgl",kernelFunc:U_},V_=Tb({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"}),G_={kernelName:a.GreaterEqual,backendName:"webgl",kernelFunc:V_};var q_={kernelName:a.IFFT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return y_(t.input,!0,n)}},H_=Ab({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),X_={kernelName:a.IsFinite,backendName:"webgl",kernelFunc:H_},Y_=Ab({opSnippet:"return float(isinf(x));",dtype:"bool"}),K_={kernelName:a.IsInf,backendName:"webgl",kernelFunc:Y_},$_=Ab({opSnippet:"return float(isnan(x));",dtype:"bool"}),Z_={kernelName:a.IsNan,backendName:"webgl",kernelFunc:$_},J_=Tb({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Eg,dtype:"bool"}),Q_={kernelName:a.Less,backendName:"webgl",kernelFunc:J_},ew=Tb({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"}),tw={kernelName:a.LessEqual,backendName:"webgl",kernelFunc:ew};var nw={kernelName:a.LinSpace,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=Cg(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},rw=Ab({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Ag}),aw={kernelName:a.Log,backendName:"webgl",kernelFunc:rw},iw=Ab({opSnippet:"return log(1.0 + x);"}),ow={kernelName:a.Log1p,backendName:"webgl",kernelFunc:iw},uw=Tb({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),sw={kernelName:a.LogicalAnd,backendName:"webgl",kernelFunc:uw},cw=Ab({opSnippet:"return float(!(x >= 1.0));"}),lw={kernelName:a.LogicalNot,backendName:"webgl",kernelFunc:cw},fw=Tb({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),dw={kernelName:a.LogicalOr,backendName:"webgl",kernelFunc:fw},hw=function e(t,n,r,a,i){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=[];var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(u,"; j <= ").concat(u,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")},pw=function e(t,n,r,a,i){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=n,s=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(u,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(u,"; j <= ").concat(u,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")},vw={kernelName:a.LRN,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.depthRadius,u=r.bias,s=r.alpha,c=r.beta,l=Object(a.env)().getBool("WEBGL_PACK_NORMALIZATION")?new pw(i.shape,o,u,s,c):new hw(i.shape,o,u,s,c);return n.runWebGLProgram(l,[i],i.dtype)}},mw=function e(t,n,r,a,i){Object(Sn.a)(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")},gw={kernelName:a.LRNGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,u=r.depthRadius,s=r.bias,c=r.alpha,l=r.beta,f=new mw(a.shape,u,s,c,l);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function bw(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.reductionIndices,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=null!=d,p=n.shouldExecuteOnCPU([o]),v=o;if(h){if(p){for(var m=n.texData.get(v.dataId).values,g=new Array(c),b=0;b<g.length;b++)g[b]=o.shape[d[b]];var y=Gg(m,o.shape,o.dtype,d,g);v=n.makeTensorInfo(g,o.dtype),n.texData.get(v.dataId).values=y}else v=Hb(o,d,n);f=a.backend_util.getInnerMostAxes(f.length,c)}a.backend_util.assertAxesAreInnerMostDims("max",f,c);var x,_=a.backend_util.computeOutAndReduceShapes(v.shape,f),w=Object(i.a)(_,2),k=w[0],O=w[1],S=k;if(s&&(S=a.backend_util.expandShapeToKeepDim(k,l)),p){var j=n.texData.get(v.dataId).values,E=Tg(j,a.util.sizeFromShape(O),S,o.dtype);x=n.makeTensorInfo(S,o.dtype),n.texData.get(x.dataId).values=E}else x=function(e,t,n,r){var i=a.util.sizeFromShape(t),o=Bb({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/i,i]},backend:r}),u=Vb(o,e.dtype,"max",r),s=Bb({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),s}(v,O,S,n);return h&&n.disposeIntermediateTensorInfo(v),x}var yw={kernelName:a.Max,backendName:"webgl",kernelFunc:bw},xw=Tb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Ng}),_w={kernelName:a.Maximum,backendName:"webgl",kernelFunc:xw};var ww={kernelName:a.MaxPool,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x;Am(i,"maxPool");var o=r.filterSize,u=r.strides,s=r.pad,c=r.dimRoundingMode;a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(u,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(u," and dilations '").concat(1,"'")}));var l=a.backend_util.computePool2DInfo(i.shape,o,u,1,s,c);if(1===l.filterWidth&&1===l.filterHeight&&a.util.arraysEqual(l.inShape,l.outShape))return yb({inputs:{x:i},backend:n});var f=new Ty(l,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}};var kw={kernelName:a.MaxPool3D,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.filterSize,u=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(i.shape,o,u,[1,1,1],s,l,c),d=new Ny(f,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}},Ow=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,u=i-1-t.padInfo.top,s=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(u,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")},Sw=function e(t){Object(Sn.a)(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,u=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,f=s-1-t.padInfo.front,d=c-1-t.padInfo.top,h=l-1-t.padInfo.left,p=s*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(s,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(u,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")};var jw={kernelName:a.MaxPool3DGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=r.filterSize,s=r.strides,c=r.pad,l=r.dimRoundingMode,f=a.backend_util.computePool3DInfo(o.shape,u,s,[1,1,1],c,l),d=new Ny(f,"max",!0),h=n.runWebGLProgram(d,[o],o.dtype),p=new Sw(f),v=n.runWebGLProgram(p,[i,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var Ew={kernelName:a.MaxPoolGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.dy,o=t.input,u=o;Am([o,t.output],"maxPoolGrad");var s=r.filterSize,c=r.strides,l=r.pad,f=r.dimRoundingMode,d=a.backend_util.computePool2DInfo(u.shape,s,c,1,l,f),h=new Ty(d,"max",!0),p=n.runWebGLProgram(h,[u],u.dtype),v=new Ow(d),m=n.runWebGLProgram(v,[i,p],u.dtype);return n.disposeIntermediateTensorInfo(p),m}};var Cw={kernelName:a.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.filterSize,s=n.strides,c=n.pad,l=n.includeBatchInIndex,f=r;a.util.assert(4===o.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.shape.length,".")}));var d=[1,1];a.util.assert(a.backend_util.eitherStridesOrDilationsAreOne(s,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(d,"'")}));var h=a.backend_util.computePool2DInfo(o.shape,u,s,d,c),p=function(e,t,n,r){var a=new Ty(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new Ty(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(o,l,h,f),v=Object(i.a)(p,2);return[v[0],v[1]]}};var Aw={kernelName:a.Mean,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,o=t.x,u=n.keepDims,s=n.axis,c=r,l=o.shape.length,f=a.util.parseAxisParam(s,o.shape),d=f,h=a.backend_util.getAxesPermutation(d,l),p=null!=h,v=c.shouldExecuteOnCPU([o]),m=[],g=o;if(p){if(v){for(var b=c.texData.get(g.dataId).values,y=new Array(l),x=0;x<y.length;x++)y[x]=o.shape[h[x]];var _=Gg(b,o.shape,o.dtype,h,y);g=c.makeTensorInfo(y,o.dtype),c.texData.get(g.dataId).values=_}else g=Hb(o,h,c);m.push(g),d=a.backend_util.getInnerMostAxes(d.length,l)}a.backend_util.assertAxesAreInnerMostDims("sum",d,l);var w=a.backend_util.computeOutAndReduceShapes(g.shape,d),k=Object(i.a)(w,2),O=k[0],S=k[1],j=O;u&&(j=a.backend_util.expandShapeToKeepDim(O,f));for(var E=function(e,t,n,r){var i=a.util.sizeFromShape(t),o=Bb({inputs:{x:e},attrs:{shape:[a.util.sizeFromShape(e.shape)/i,i]},backend:r}),u=Vb(o,"float32","mean",r),s=Bb({inputs:{x:u},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),s}(g,S,j,c),C=0,A=m;C<A.length;C++){var T=A[C];c.disposeIntermediateTensorInfo(T)}return E}};var Tw={kernelName:a.Min,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.x,u=r.axis,s=r.keepDims,c=o.shape.length,l=a.util.parseAxisParam(u,o.shape),f=l,d=a.backend_util.getAxesPermutation(f,c),h=o;null!=d&&(h=Kb({inputs:{x:o},backend:n,attrs:{perm:d}}),f=a.backend_util.getInnerMostAxes(f.length,o.shape.length)),a.backend_util.assertAxesAreInnerMostDims("min",f,c);var p,v=a.backend_util.computeOutAndReduceShapes(h.shape,f),m=Object(i.a)(v,2),g=m[0],b=m[1],y=Bb({inputs:{x:h},backend:n,attrs:{shape:[-1,a.util.sizeFromShape(b)]}}),x=Vb(y,y.dtype,"min",n);return p=Bb(s?{inputs:{x:x},backend:n,attrs:{shape:a.backend_util.expandShapeToKeepDim(g,l)}}:{inputs:{x:x},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),null!=d&&n.disposeIntermediateTensorInfo(h),p}},Nw=Tb({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:Mg}),Mw={kernelName:a.Minimum,backendName:"webgl",kernelFunc:Nw},Dw=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=lg(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(s,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")},Iw=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=lg(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=Xg("rc",a),c=Xg("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d="reflect"===r?0:1,h="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        ").concat(s[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(s[a-2]," += 1;\n        if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          ").concat(s[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")},Fw={kernelName:a.MirrorPad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.mode,s=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Iw(i.shape,o,u):new Dw(i.shape,o,u);return n.runWebGLProgram(s,[i],i.dtype)}},Rw=Tb({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Pw={kernelName:a.Mod,backendName:"webgl",kernelFunc:Rw},Lw=function(){function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["probs"],this.outputShape=[t,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")}return Object(jn.a)(e,[{key:"getCustomSetupFunc",value:function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}}}]),e}(),Bw=Tb({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),zw={kernelName:a.RealDiv,backendName:"webgl",kernelFunc:Bw},Uw="return a - b;",Ww=Tb({opSnippet:Uw,packedOpSnippet:Uw,supportsComplex:!0,cpuKernelImpl:Ug}),Vw={kernelName:a.Sub,backendName:"webgl",kernelFunc:Ww};function Gw(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.logits,o=r.dim,u=a.util.parseAxisParam([o],i.shape),s=bw({inputs:{x:i},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=a.backend_util.expandShapeToKeepDim(s.shape,u),l=Bb({inputs:{x:s},backend:n,attrs:{shape:c}}),f=Ww({inputs:{a:i,b:l},backend:n}),d=f_({inputs:{x:f},backend:n}),h=Xb({inputs:{x:d},backend:n,attrs:{axis:u,keepDims:!1}}),p=Bb({inputs:{x:h},backend:n,attrs:{shape:c}}),v=Bw({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),v}var qw={kernelName:a.Softmax,backendName:"webgl",kernelFunc:Gw};var Hw={kernelName:a.Multinomial,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,u=r.normalized,s=u?a:Gw({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=s.shape[0],l=s.shape[1],f=new Lw(c,l,i),d=f.getCustomSetupFunc(o),h=n.runWebGLProgram(f,[s],"int32",d);return u||n.disposeIntermediateTensorInfo(s),h}},Xw="return -x;";var Yw={kernelName:a.Neg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=n.x;if(r.shouldExecuteOnCPU([o])){var u=r.texData.get(o.dataId),s=Ig(u.values,o.shape,o.dtype),c=Object(i.a)(s,2),l=c[0],f=c[1];return r.makeTensorInfo(f,o.dtype,l)}return t=Object(a.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new db(o.shape,Xw):new eb(o.shape,Xw),r.runWebGLProgram(t,[o],o.dtype)}},Kw=a.kernel_impls.nonMaxSuppressionV3Impl;var $w={kernelName:a.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=n.readSync(i.dataId),f=n.readSync(o.dataId),d=Kw(l,f,u,s,c).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Zw=a.kernel_impls.nonMaxSuppressionV4Impl;var Jw={kernelName:a.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.padToMaxOutputSize,f=n.readSync(i.dataId),d=n.readSync(o.dataId),h=Zw(f,d,u,s,c,l),p=h.selectedIndices,v=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([v]))]}},Qw=a.kernel_impls.nonMaxSuppressionV5Impl;var ek={kernelName:a.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:function(e){a.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,i=t.boxes,o=t.scores,u=r.maxOutputSize,s=r.iouThreshold,c=r.scoreThreshold,l=r.softNmsSigma,f=n.readSync(i.dataId),d=n.readSync(o.dataId),h=Qw(f,d,u,s,c,l),p=h.selectedIndices,v=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}},tk=function e(t,n,r,a){Object(Sn.a)(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")},nk={kernelName:a.OneHot,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=r.depth,u=r.onValue,s=r.offValue,c=a.util.sizeFromShape(i.shape),l=new tk(c,o,u,s),f=Bb({inputs:{x:i},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(l,[f],i.dtype);n.disposeIntermediateTensorInfo(f);var h=Bb({inputs:{x:d},backend:n,attrs:{shape:[].concat(Object(Tn.a)(i.shape),[o])}});return n.disposeIntermediateTensorInfo(d),h}};function rk(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=Zy({inputs:{input:r},backend:n}),i=rk({inputs:{x:a},backend:n}),o=dx({inputs:{input:r},backend:n}),u=rk({inputs:{x:o},backend:n}),s=_b({inputs:{real:i,imag:u},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),s}return w_({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var ak={kernelName:a.ZerosLike,backendName:"webgl",kernelFunc:rk};var ik={kernelName:a.OnesLike,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=Zy({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),u=dx({inputs:{input:a},backend:r}),s=rk({inputs:{x:u},backend:r}),c=_b({inputs:{real:o,imag:s},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(s),c}return w_({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var ok={kernelName:a.Pack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return h_({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var i=t[0].shape,o=t[0].dtype;t.forEach((function(e){a.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),a.util.assert(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=[],s=mx({inputs:t.map((function(e){var t=h_({inputs:{input:e},backend:n,attrs:{dim:r}});return u.push(t),t})),backend:n,attrs:{axis:r}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},uk=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=lg(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(").concat(r,"));\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(s,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(u,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(").concat(r,"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")},sk=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=lg(a),o=n.map((function(e){return e[0]})).join(","),u=n.map((function(e,n){return e[0]+t[n]})).join(","),s=Xg("rc",a),c=Xg("source",a),l="".concat(s[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(s[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(s[a-2]," += 1;\n       if(").concat(s[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(s[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(d[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(").concat(r,");\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(f,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(u,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")},ck=function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.paddings,u=r.constantValue,s=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sk(i.shape,o,u):new uk(i.shape,o,u);return n.runWebGLProgram(s,[i],i.dtype)},lk={kernelName:a.PadV2,backendName:"webgl",kernelFunc:ck},fk=Tb({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),dk={kernelName:a.Pow,backendName:"webgl",kernelFunc:fk};var hk={kernelName:a.Prod,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,o=e.attrs,u=n.x,s=o.axis,c=o.keepDims,l=u.shape.length,f=[],d=a.util.parseAxisParam(s,u.shape),h=d,p=a.backend_util.getAxesPermutation(h,l),v=u;if(null!=p&&(v=Kb({inputs:{x:u},backend:r,attrs:{perm:p}}),h=a.backend_util.getInnerMostAxes(h.length,l),f.push(v)),a.backend_util.assertAxesAreInnerMostDims("prod",h,l),r.shouldExecuteOnCPU([v])){var m=r.texData.get(v.dataId).values,g=Fg(v.shape,v.dtype,m,h),b=g.outVals,y=g.outShape,x=g.outDtype;t=r.makeTensorInfo(y,x,b)}else{var _=a.backend_util.computeOutAndReduceShapes(v.shape,h),w=Object(i.a)(_,2),k=w[0],O=w[1],S=a.util.sizeFromShape(O),j=Bb({inputs:{x:v},backend:r,attrs:{shape:[-1,S]}}),E=Vb(j,Object(a.sumOutType)(u.dtype),"prod",r);t=Bb({inputs:{x:E},backend:r,attrs:{shape:k}}),f.push(j),f.push(E)}if(c){f.push(t);var C=a.backend_util.expandShapeToKeepDim(t.shape,d);t=Bb({inputs:{x:t},backend:r,attrs:{shape:C}})}return f.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},pk=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,u=Rg(r,a,i,o);return t.makeTensorInfo([u.length],o,u)},vk={kernelName:a.Range,backendName:"webgl",kernelFunc:pk},mk=Ab({opSnippet:"return 1.0 / x;"}),gk={kernelName:a.Reciprocal,backendName:"webgl",kernelFunc:mk},bk=Ab({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),yk={kernelName:a.Relu,backendName:"webgl",kernelFunc:bk},xk=Ab({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),_k={kernelName:a.Relu6,backendName:"webgl",kernelFunc:xk},wk=function e(t,n,r,a,o){Object(Sn.a)(this,e),this.variableNames=["A"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")},kk=function e(t,n,r,a,o){Object(Sn.a)(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=o?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],",\n          ").concat(h[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(f-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")};var Ok={kernelName:a.ResizeBilinear,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.images,u=r.alignCorners,s=r.halfPixelCenters,c=r.size,l=Object(i.a)(c,2),f=l[0],d=l[1],h=Object(a.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new kk(o.shape,f,d,u,s):new wk(o.shape,f,d,u,s);return n.runWebGLProgram(h,[o],"float32")}},Sk=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(i.a)(n,3),o=a[1],u=a[2],s=Object(i.a)(t,3),c=s[1],l=s[2],f=[r&&c>1?o-1:o,r&&l>1?u-1:u],d=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=f[0]/d[0],p=f[1]/d[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(o-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(u-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var jk={kernelName:a.ResizeBilinearGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new Sk(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},Ek=function e(t,n,r,a,o){Object(Sn.a)(this,e),this.variableNames=["A"],this.outputShape=[];var u=Object(i.a)(t,4),s=u[0],c=u[1],l=u[2],f=u[3];this.outputShape=[s,n,r,f];var d,h=[a&&n>1?c-1:c,a&&r>1?l-1:l],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],v=a?"0.5":"0.0";d=o?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(h[0]/p[0],",\n          ").concat(h[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(v,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")};var Ck={kernelName:a.ResizeNearestNeighbor,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,o=r.alignCorners,u=r.halfPixelCenters,s=r.size,c=Object(i.a)(s,2),l=c[0],f=c[1],d=new Ek(a.shape,l,f,o,u);return n.runWebGLProgram(d,[a],a.dtype)}},Ak=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Object(i.a)(n,3),o=a[1],u=a[2],s=Object(i.a)(t,3),c=s[1],l=s[2],f=[r&&c>1?o-1:o,r&&l>1?u-1:u],d=[r&&c>1?c-1:c,r&&l>1?l-1:l],h=f[0]/d[0],p=f[1]/d[1],v=1/h,m=1/p,g=2*Math.ceil(v)+2,b=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(h,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(v,");\n        const float invWidthScale = float(").concat(m,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(b,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(f[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(f[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(u,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")};var Tk={kernelName:a.ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,u=new Ak(i.shape,a.shape,o);return n.runWebGLProgram(u,[i],i.dtype)}},Nk=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=lg(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")},Mk=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=Xg("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),u=lg(r);function s(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(u," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return s(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",s(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",s(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")};var Dk={kernelName:a.Reverse,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.dims,u=i.shape.length,s=a.util.parseAxisParam(o,i.shape);if(0===u)return yb({inputs:{x:i},backend:n});var c=Object(a.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mk(i.shape,s):new Nk(i.shape,s);return n.runWebGLProgram(c,[i],i.dtype)}},Ik=function e(t,n,r,o){Object(Sn.a)(this,e),this.variableNames=["Image"],this.outputShape=[];var u=t[1],s=t[2],c=Math.sin(n).toFixed(3),l=Math.cos(n).toFixed(3);this.outputShape=t;var f=a.backend_util.getImageCenter(o,u,s),d=Object(i.a)(f,2),h=d[0],p=d[1],v=h.toFixed(3),m=p.toFixed(3),g="";g="number"===typeof r?"float outputValue = ".concat(r.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(r.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ".concat(v,") * ").concat(l," - (float(y) - ").concat(m,") * ").concat(c,";\n          float coordYFloat = (float(x) - ").concat(v,") * ").concat(c," + (float(y) - ").concat(m,") * ").concat(l,";\n          int coordX = int(round(coordXFloat + ").concat(v,"));\n          int coordY = int(round(coordYFloat + ").concat(m,"));\n          ").concat(g,"\n          if(coordX >= 0 && coordX < ").concat(s," && coordY >= 0 && coordY < ").concat(u,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")},Fk={kernelName:a.RotateWithOffset,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,u=n.center,s=r,c=new Ik(a.shape,i,o,u);return s.runWebGLProgram(c,[a],a.dtype)}},Rk=Ab({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Pk={kernelName:a.Round,backendName:"webgl",kernelFunc:Rk},Lk=Ab({opSnippet:"return inversesqrt(x);",cpuKernelImpl:Pg}),Bk={kernelName:a.Rsqrt,backendName:"webgl",kernelFunc:Lk},zk=function e(t,n,r,a,i,o){Object(Sn.a)(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var u=lg(i.length),s=lg(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),h=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(s," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(h,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")};var Uk={kernelName:a.ScatterNd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.indices,o=t.updates,u=r.shape,s=a.backend_util.calculateShapes(o,i,u),c=s.sliceRank,l=s.numUpdates,f=s.sliceSize,d=s.strides,h=s.outputSize,p=[h/f,f];if(0===h)return n.makeTensorInfo(u,i.dtype);var v=Bb({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=Bb({inputs:{x:o},backend:n,attrs:{shape:[l,f]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),b=new zk(l,c,v.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(b,[m,v,g],m.dtype),x=Bb({inputs:{x:y},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),x}},Wk=function e(t,n,r){var a,i;if(Object(Sn.a)(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],s=[],c=0;c<n.length;c++)s.push("".concat(o[c])),c<t&&u.push("".concat(o[c]));a=u.join(),i=s.join()}var l=lg(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")};var Vk={kernelName:a.Select,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,i=t.t,o=t.e,u=new Wk(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(u,[r,i,o],Object(a.upcastType)(i.dtype,o.dtype))}},Gk=Ab({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(a.backend_util.SELU_SCALEALPHA,";\n  float scale = ").concat(a.backend_util.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),qk={kernelName:a.Selu,backendName:"webgl",kernelFunc:Gk},Hk=Ab({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),Xk={kernelName:a.Sigmoid,backendName:"webgl",kernelFunc:Hk},Yk=Ab({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Kk={kernelName:a.Sign,backendName:"webgl",kernelFunc:Yk},$k=Ab({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Zk={kernelName:a.Sin,backendName:"webgl",kernelFunc:$k},Jk=Ab({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Qk={kernelName:a.Sinh,backendName:"webgl",kernelFunc:Jk},eO=Ab({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),tO={kernelName:a.Softplus,backendName:"webgl",kernelFunc:eO},nO={kernelName:a.SpaceToBatchND,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.blockShape,u=r.paddings;a.util.assert(i.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=o.reduce((function(e,t){return e*t})),c=[[0,0]];c.push.apply(c,Object(Tn.a)(u));for(var l=1+o.length;l<i.shape.length;++l)c.push([0,0]);var f=[],d=ck({inputs:{x:i},backend:n,attrs:{paddings:c,constantValue:0}}),h=a.backend_util.getReshaped(d.shape,o,s,!1),p=a.backend_util.getPermuted(h.length,o.length,!1),v=a.backend_util.getReshapedPermuted(d.shape,o,s,!1),m=Bb({inputs:{x:d},backend:n,attrs:{shape:h}}),g=Kb({inputs:{x:m},backend:n,attrs:{perm:p}}),b=Bb({inputs:{x:g},backend:n,attrs:{shape:v}});return f.push(d),f.push(m),f.push(g),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}};var rO={kernelName:a.SparseToDense,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.sparseIndices,o=t.sparseValues,u=t.defaultValue,s=r.outputShape,c=a.backend_util.calculateShapes(o,i,s),l=c.sliceRank,f=c.numUpdates,d=c.strides,h=c.outputSize,p=new zk(f,l,i.shape.length,o.shape.length,d,[h,1],!1),v=n.runWebGLProgram(p,[o,i,u],o.dtype),m=Bb({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(v),m}};var aO={kernelName:a.SplitV,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.numOrSizeSplits,u=r.axis,s=a.util.parseAxisParam(u,i.shape)[0],c=a.backend_util.prepareSplitSize(i,o,s),l=i.shape.length,f=new Array(l).fill(0),d=i.shape.slice();return c.map((function(e){var t=Object(Tn.a)(d);t[s]=e;var r=qy({inputs:{x:i},backend:n,attrs:{begin:f,size:t}});return f[s]+=e,r}))}},iO=Ab({opSnippet:"return sqrt(x);"}),oO={kernelName:a.Sqrt,backendName:"webgl",kernelFunc:iO},uO=Ab({opSnippet:"return x * x;"}),sO={kernelName:a.Square,backendName:"webgl",kernelFunc:uO},cO="return (a - b) * (a - b);",lO=Tb({opSnippet:cO,packedOpSnippet:cO}),fO={kernelName:a.SquaredDifference,backendName:"webgl",kernelFunc:lO};var dO={kernelName:a.Step,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=tb+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new eb(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},hO=function e(t,n,r){Object(Sn.a)(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=lg(r.length),o=lg(r.length),u="";if(1===a)u="coords * strides + begin";else{var s=0;u=r.map((function(e,t){return s++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(s-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(u,"));\n      }\n    ")};var pO={kernelName:a.StridedSlice,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,i=e.attrs,o=n.x,u=i.begin,s=i.end,c=i.strides,l=i.beginMask,f=i.endMask,d=i.ellipsisMask,h=i.newAxisMask,p=i.shrinkAxisMask,v=a.slice_util.sliceInfo(o.shape,u,s,c,l,f,d,h,p),m=v.nonStrided,g=v.$begin,b=v.$strides,y=v.size,x=v.newShape,_=v.outShape,w=Bb({inputs:{x:o},backend:r,attrs:{shape:x}});if(m){var k=qy({inputs:{x:w},backend:r,attrs:{begin:g,size:y}});t=Bb({inputs:{x:k},backend:r,attrs:{shape:_}}),r.disposeIntermediateTensorInfo(k)}else if(_.some((function(e){return 0===e})))t=r.makeTensorInfo(_,o.dtype,[]);else{if(r.shouldExecuteOnCPU([w])){var O=r.texData.get(w.dataId).values,S=Object(a.buffer)(w.shape,w.dtype,O),j=zg(_,S,b,g);t=r.makeTensorInfo(_,w.dtype,j.values)}else{var E=new hO(g,b,_);t=r.runWebGLProgram(E,[w],w.dtype)}}var C=Bb({inputs:{x:t},backend:r,attrs:{shape:_}});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(t),C}},vO=Ab({opSnippet:"return tan(x);"}),mO={kernelName:a.Tan,backendName:"webgl",kernelFunc:vO},gO=Ab({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),bO={kernelName:a.Tanh,backendName:"webgl",kernelFunc:gO},yO=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=lg(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")};function xO(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=r.reps;if("string"===i.dtype){var u=n.readSync(i.dataId).map((function(e){return a.util.decodeString(e)})),s=Object(a.buffer)(i.shape,i.dtype,u),c=Wg(s,o);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new yO(i.shape,o);return n.runWebGLProgram(l,[i],i.dtype)}var _O={kernelName:a.Tile,backendName:"webgl",kernelFunc:xO};var wO={kernelName:a.TopK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,o=r.k,u=r.sorted,s=n.readSync(a.dataId),c=Vg(s,a.shape,a.dtype,o,u),l=Object(i.a)(c,2),f=l[0],d=l[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(d.shape,d.dtype,d.values)]}};var kO={kernelName:a.Unique,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Am(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),u=qg(o,a,i.shape,i.dtype),s=u.outputValues,c=u.outputShape,l=u.indices;return[r.makeTensorInfo(c,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var OO={kernelName:a.Unpack,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,u=o.shape.length,s=a.shape[i],c=new Array(u-1),l=0,f=0;f<u;f++)f!==i&&(c[l++]=o.shape[f]);var d=[],h=new Array(u).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(s),m=0;m<v.length;m++){h[i]=m;var g=qy({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),b=Bb({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=b,d.push(g)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},SO=function e(t,n){Object(Sn.a)(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,u=o*Math.ceil(i/r);this.outputShape=[a,u];var s=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")};for(var jO=0,EO=[vw,gw,Jb,ey,ny,ay,uy,ly,fy,dy,by,yy,_y,ky,Ey,Sy,Ay,Dy,My,Ry,Py,Ly,Uy,Xy,Yy,Qy,nx,ix,sx,wb,gx,Cx,Ax,kx,Nx,Mx,Tx,Ix,Rx,Lx,Wx,Vx,qx,Zx,Jx,Yx,e_,n_,a_,i_,u_,c_,d_,p_,g_,x_,O_,j_,A_,N_,I_,F_,R_,L_,z_,W_,G_,xb,q_,hx,X_,K_,Z_,Sb,Q_,tw,nw,ow,aw,sw,lw,dw,yw,kw,ww,jw,Ew,Cw,_w,Aw,Tw,Mw,Fw,Pw,Hw,Lb,Yw,$w,Jw,ek,$y,nk,ik,ok,lk,dk,Cb,hk,vk,Jy,zw,gk,_k,yk,zb,Ok,jk,Ck,Tk,Dk,Fk,Pk,Bk,Uk,Vk,qk,Xk,Kk,Zk,Qk,Hy,qw,tO,nO,rO,aO,oO,sO,fO,dO,pO,Vw,Yb,mO,bO,_O,wO,$b,kO,OO,{kernelName:a.UnsortedSegmentSum,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,i=t.x,o=t.segmentIds,u=r.numSegments,s=i.shape.length,c=[],l=0,f=a.backend_util.getAxesPermutation([l],s),d=i;null!=f&&(d=Kb({inputs:{x:i},backend:n,attrs:{perm:f}}),c.push(d),l=a.backend_util.getInnerMostAxes(1,s)[0]);var h=a.backend_util.segment_util.computeOutShape(d.shape,l,u),p=a.util.sizeFromShape([d.shape[l]]),v=Bb({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});c.push(v);var m=Bb({inputs:{x:function e(t,r,i,o,u){var s=t.shape[0],l=t.shape[1],f=a.backend_util.segment_util.segOpComputeOptimalWindowSize(l,u),d=new SO({windowSize:f,inSize:l,batchSize:s,numSegments:u},r),h=n.compileAndRun(d,[t,i],o);if(c.push(h),h.shape[1]===u)return h;var p=pk({backend:n,attrs:{start:0,stop:u,step:1,dtype:"float32"}}),v=xO({inputs:{x:p},backend:n,attrs:{reps:[l/f]}});return c.push(p),c.push(v),e(h,r,v,o,u)}(v,"unsortedSegmentSum",o,Object(a.sumOutType)(i.dtype),u)},backend:n,attrs:{shape:h}}),g=m;if(null!=f){c.push(m);var b=a.backend_util.getUndoAxesPermutation(f);g=Kb({inputs:{x:g},backend:n,attrs:{perm:b}})}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},ak];jO<EO.length;jO++){var CO=EO[jO];Object(a.registerKernel)(CO)}a.version_core},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,t){for(var n,u,s=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))a.call(n,l)&&(s[l]=n[l]);if(r){u=r(n);for(var f=0;f<u.length;f++)i.call(n,u[f])&&(s[u[f]]=n[u[f]])}}return s}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(234).MAX_SAFE_COMPONENT_LENGTH,a=n(235),i=(t=e.exports={}).re=[],o=t.src=[],u=t.t={},s=0,c=function(e,t,n){var r=s++;a(r,t),u[e]=r,o[r]=t,i[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION","(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")\\.")+"(".concat(o[u.NUMERICIDENTIFIER],")")),c("MAINVERSIONLOOSE","(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(o[u.NUMERICIDENTIFIERLOOSE],")")),c("PRERELEASEIDENTIFIER","(?:".concat(o[u.NUMERICIDENTIFIER],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASEIDENTIFIERLOOSE","(?:".concat(o[u.NUMERICIDENTIFIERLOOSE],"|").concat(o[u.NONNUMERICIDENTIFIER],")")),c("PRERELEASE","(?:-(".concat(o[u.PRERELEASEIDENTIFIER],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIER],")*))")),c("PRERELEASELOOSE","(?:-?(".concat(o[u.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(o[u.PRERELEASEIDENTIFIERLOOSE],")*))")),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD","(?:\\+(".concat(o[u.BUILDIDENTIFIER],"(?:\\.").concat(o[u.BUILDIDENTIFIER],")*))")),c("FULLPLAIN","v?".concat(o[u.MAINVERSION]).concat(o[u.PRERELEASE],"?").concat(o[u.BUILD],"?")),c("FULL","^".concat(o[u.FULLPLAIN],"$")),c("LOOSEPLAIN","[v=\\s]*".concat(o[u.MAINVERSIONLOOSE]).concat(o[u.PRERELEASELOOSE],"?").concat(o[u.BUILD],"?")),c("LOOSE","^".concat(o[u.LOOSEPLAIN],"$")),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE","".concat(o[u.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),c("XRANGEIDENTIFIER","".concat(o[u.NUMERICIDENTIFIER],"|x|X|\\*")),c("XRANGEPLAIN","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIER],")")+"(?:".concat(o[u.PRERELEASE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGEPLAINLOOSE","[v=\\s]*(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(o[u.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(o[u.PRERELEASELOOSE],")?").concat(o[u.BUILD],"?")+")?)?"),c("XRANGE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAIN],"$")),c("XRANGELOOSE","^".concat(o[u.GTLT],"\\s*").concat(o[u.XRANGEPLAINLOOSE],"$")),c("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:$|[^\\d])"),c("COERCERTL",o[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM","(\\s*)".concat(o[u.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",c("TILDE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAIN],"$")),c("TILDELOOSE","^".concat(o[u.LONETILDE]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("LONECARET","(?:\\^)"),c("CARETTRIM","(\\s*)".concat(o[u.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",c("CARET","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAIN],"$")),c("CARETLOOSE","^".concat(o[u.LONECARET]).concat(o[u.XRANGEPLAINLOOSE],"$")),c("COMPARATORLOOSE","^".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],")$|^$")),c("COMPARATOR","^".concat(o[u.GTLT],"\\s*(").concat(o[u.FULLPLAIN],")$|^$")),c("COMPARATORTRIM","(\\s*)".concat(o[u.GTLT],"\\s*(").concat(o[u.LOOSEPLAIN],"|").concat(o[u.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE","^\\s*(".concat(o[u.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAIN],")")+"\\s*$"),c("HYPHENRANGELOOSE","^\\s*(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(o[u.XRANGEPLAINLOOSE],")")+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0.0.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},function(e,t,n){var r=n(234).MAX_LENGTH,a=n(171),i=a.re,o=a.t,u=n(84);e.exports=function(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof u)return e;if("string"!==typeof e)return null;if(e.length>r)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new u(e,t)}catch(n){return null}}},function(e,t,n){"use strict";n.r(t),n.d(t,"vega",(function(){return Hme})),n.d(t,"vegaLite",(function(){return Xme})),n.d(t,"DEFAULT_ACTIONS",(function(){return Kme})),n.d(t,"guessMode",(function(){return rge})),n.d(t,"default",(function(){return ige}));var r={};n.r(r),n.d(r,"JsonPatchError",(function(){return F})),n.d(r,"deepClone",(function(){return R})),n.d(r,"getValueByPointer",(function(){return B})),n.d(r,"applyOperation",(function(){return z})),n.d(r,"applyPatch",(function(){return U})),n.d(r,"applyReducer",(function(){return W})),n.d(r,"validator",(function(){return V})),n.d(r,"validate",(function(){return G})),n.d(r,"_areEquals",(function(){return q}));var a={};n.r(a),n.d(a,"unobserve",(function(){return K})),n.d(a,"observe",(function(){return $})),n.d(a,"generate",(function(){return Z})),n.d(a,"compare",(function(){return Q}));var i={};n.r(i),n.d(i,"aggregate",(function(){return ri})),n.d(i,"bin",(function(){return ai})),n.d(i,"collect",(function(){return oi})),n.d(i,"compare",(function(){return ui})),n.d(i,"countpattern",(function(){return ci})),n.d(i,"cross",(function(){return li})),n.d(i,"density",(function(){return pi})),n.d(i,"dotbin",(function(){return yi})),n.d(i,"expression",(function(){return _i})),n.d(i,"extent",(function(){return ki})),n.d(i,"facet",(function(){return Si})),n.d(i,"field",(function(){return ji})),n.d(i,"filter",(function(){return Ci})),n.d(i,"flatten",(function(){return Ai})),n.d(i,"fold",(function(){return Ti})),n.d(i,"formula",(function(){return Ni})),n.d(i,"generate",(function(){return Mi})),n.d(i,"impute",(function(){return Fi})),n.d(i,"joinaggregate",(function(){return Ri})),n.d(i,"kde",(function(){return Pi})),n.d(i,"key",(function(){return Li})),n.d(i,"load",(function(){return zi})),n.d(i,"lookup",(function(){return Wi})),n.d(i,"multiextent",(function(){return Vi})),n.d(i,"multivalues",(function(){return qi})),n.d(i,"params",(function(){return Xi})),n.d(i,"pivot",(function(){return Yi})),n.d(i,"prefacet",(function(){return Ki})),n.d(i,"project",(function(){return $i})),n.d(i,"proxy",(function(){return Zi})),n.d(i,"quantile",(function(){return Ji})),n.d(i,"relay",(function(){return Qi})),n.d(i,"sample",(function(){return eo})),n.d(i,"sequence",(function(){return to})),n.d(i,"sieve",(function(){return no})),n.d(i,"subflow",(function(){return Oi})),n.d(i,"timeunit",(function(){return ro})),n.d(i,"tupleindex",(function(){return io})),n.d(i,"values",(function(){return oo})),n.d(i,"window",(function(){return fo}));var o={};n.r(o),n.d(o,"interpolate",(function(){return dc})),n.d(o,"interpolateArray",(function(){return ac})),n.d(o,"interpolateBasis",(function(){return qs})),n.d(o,"interpolateBasisClosed",(function(){return Hs})),n.d(o,"interpolateDate",(function(){return oc})),n.d(o,"interpolateDiscrete",(function(){return Fl})),n.d(o,"interpolateHue",(function(){return Rl})),n.d(o,"interpolateNumber",(function(){return uc})),n.d(o,"interpolateNumberArray",(function(){return nc})),n.d(o,"interpolateObject",(function(){return sc})),n.d(o,"interpolateRound",(function(){return hc})),n.d(o,"interpolateString",(function(){return fc})),n.d(o,"interpolateTransformCss",(function(){return Ul})),n.d(o,"interpolateTransformSvg",(function(){return Wl})),n.d(o,"interpolateZoom",(function(){return Gl})),n.d(o,"interpolateRgb",(function(){return Js})),n.d(o,"interpolateRgbBasis",(function(){return ec})),n.d(o,"interpolateRgbBasisClosed",(function(){return tc})),n.d(o,"interpolateHsl",(function(){return Hl})),n.d(o,"interpolateHslLong",(function(){return Xl})),n.d(o,"interpolateLab",(function(){return hf})),n.d(o,"interpolateHcl",(function(){return vf})),n.d(o,"interpolateHclLong",(function(){return mf})),n.d(o,"interpolateCubehelix",(function(){return Nf})),n.d(o,"interpolateCubehelixLong",(function(){return Mf})),n.d(o,"piecewise",(function(){return Ol})),n.d(o,"quantize",(function(){return Df}));var u={};n.r(u),n.d(u,"bound",(function(){return fg})),n.d(u,"identifier",(function(){return pg})),n.d(u,"mark",(function(){return vg})),n.d(u,"overlap",(function(){return mg})),n.d(u,"render",(function(){return kg})),n.d(u,"viewlayout",(function(){return qg}));var s={};n.r(s),n.d(s,"axisticks",(function(){return Iy})),n.d(s,"datajoin",(function(){return Fy})),n.d(s,"encode",(function(){return Py})),n.d(s,"legendentries",(function(){return Ly})),n.d(s,"linkpath",(function(){return Vy})),n.d(s,"pie",(function(){return Yy})),n.d(s,"scale",(function(){return Zy})),n.d(s,"sortitems",(function(){return tx})),n.d(s,"stack",(function(){return ox}));var c={};n.r(c),n.d(c,"contour",(function(){return cO})),n.d(c,"geojson",(function(){return dO})),n.d(c,"geopath",(function(){return hO})),n.d(c,"geopoint",(function(){return pO})),n.d(c,"geoshape",(function(){return vO})),n.d(c,"graticule",(function(){return mO})),n.d(c,"heatmap",(function(){return gO})),n.d(c,"isocontour",(function(){return Qk})),n.d(c,"kde2d",(function(){return oO})),n.d(c,"projection",(function(){return yO}));var l={};n.r(l),n.d(l,"force",(function(){return CS}));var f={};n.r(f),n.d(f,"nest",(function(){return qj})),n.d(f,"pack",(function(){return Zj})),n.d(f,"partition",(function(){return Qj})),n.d(f,"stratify",(function(){return eE})),n.d(f,"tree",(function(){return rE})),n.d(f,"treelinks",(function(){return aE})),n.d(f,"treemap",(function(){return uE}));var d={};n.r(d),n.d(d,"loess",(function(){return xE})),n.d(d,"regression",(function(){return wE}));var h={};n.r(h),n.d(h,"voronoi",(function(){return tC}));var p={};n.r(p),n.d(p,"wordcloud",(function(){return cA}));var v={};n.r(v),n.d(v,"crossfilter",(function(){return OA})),n.d(v,"resolvefilter",(function(){return SA}));var m={};n.r(m),n.d(m,"interpolate",(function(){return vR})),n.d(m,"interpolateArray",(function(){return rR})),n.d(m,"interpolateBasis",(function(){return GF})),n.d(m,"interpolateBasisClosed",(function(){return qF})),n.d(m,"interpolateDate",(function(){return iR})),n.d(m,"interpolateDiscrete",(function(){return mR})),n.d(m,"interpolateHue",(function(){return gR})),n.d(m,"interpolateNumber",(function(){return oR})),n.d(m,"interpolateNumberArray",(function(){return tR})),n.d(m,"interpolateObject",(function(){return uR})),n.d(m,"interpolateRound",(function(){return bR})),n.d(m,"interpolateString",(function(){return pR})),n.d(m,"interpolateTransformCss",(function(){return kR})),n.d(m,"interpolateTransformSvg",(function(){return OR})),n.d(m,"interpolateZoom",(function(){return ER})),n.d(m,"interpolateRgb",(function(){return ZF})),n.d(m,"interpolateRgbBasis",(function(){return QF})),n.d(m,"interpolateRgbBasisClosed",(function(){return eR})),n.d(m,"interpolateHsl",(function(){return AR})),n.d(m,"interpolateHslLong",(function(){return TR})),n.d(m,"interpolateLab",(function(){return KR})),n.d(m,"interpolateHcl",(function(){return ZR})),n.d(m,"interpolateHclLong",(function(){return JR})),n.d(m,"interpolateCubehelix",(function(){return fP})),n.d(m,"interpolateCubehelixLong",(function(){return dP})),n.d(m,"piecewise",(function(){return lF})),n.d(m,"quantize",(function(){return hP}));var g={};n.r(g),n.d(g,"version",(function(){return jA.a})),n.d(g,"bandwidthNRD",(function(){return Yr})),n.d(g,"bin",(function(){return Kr})),n.d(g,"bootstrapCI",(function(){return Jr})),n.d(g,"cumulativeLogNormal",(function(){return ha})),n.d(g,"cumulativeNormal",(function(){return ua})),n.d(g,"cumulativeUniform",(function(){return ya})),n.d(g,"densityLogNormal",(function(){return da})),n.d(g,"densityNormal",(function(){return oa})),n.d(g,"densityUniform",(function(){return ba})),n.d(g,"dotbin",(function(){return Qr})),n.d(g,"quantileLogNormal",(function(){return pa})),n.d(g,"quantileNormal",(function(){return sa})),n.d(g,"quantileUniform",(function(){return xa})),n.d(g,"quantiles",(function(){return Hr})),n.d(g,"quartiles",(function(){return Xr})),n.d(g,"random",(function(){return $r})),n.d(g,"randomInteger",(function(){return ta})),n.d(g,"randomKDE",(function(){return la})),n.d(g,"randomLCG",(function(){return ea})),n.d(g,"randomLogNormal",(function(){return va})),n.d(g,"randomMixture",(function(){return ma})),n.d(g,"randomNormal",(function(){return ca})),n.d(g,"randomUniform",(function(){return _a})),n.d(g,"regressionExp",(function(){return Ca})),n.d(g,"regressionLinear",(function(){return ja})),n.d(g,"regressionLoess",(function(){return Da})),n.d(g,"regressionLog",(function(){return Ea})),n.d(g,"regressionPoly",(function(){return Na})),n.d(g,"regressionPow",(function(){return Aa})),n.d(g,"regressionQuad",(function(){return Ta})),n.d(g,"sampleCurve",(function(){return Pa})),n.d(g,"sampleLogNormal",(function(){return fa})),n.d(g,"sampleNormal",(function(){return ia})),n.d(g,"sampleUniform",(function(){return ga})),n.d(g,"setRandom",(function(){return Zr})),n.d(g,"DATE",(function(){return Ua.a})),n.d(g,"DAY",(function(){return Ua.b})),n.d(g,"DAYOFYEAR",(function(){return Ua.c})),n.d(g,"HOURS",(function(){return Ua.d})),n.d(g,"MILLISECONDS",(function(){return Ua.e})),n.d(g,"MINUTES",(function(){return Ua.f})),n.d(g,"MONTH",(function(){return Ua.g})),n.d(g,"QUARTER",(function(){return Ua.h})),n.d(g,"SECONDS",(function(){return Ua.i})),n.d(g,"TIME_UNITS",(function(){return Ua.j})),n.d(g,"WEEK",(function(){return Ua.k})),n.d(g,"YEAR",(function(){return Ua.l})),n.d(g,"dayofyear",(function(){return Ua.m})),n.d(g,"timeBin",(function(){return Ua.n})),n.d(g,"timeFloor",(function(){return Ua.o})),n.d(g,"timeInterval",(function(){return Ua.p})),n.d(g,"timeOffset",(function(){return Ua.q})),n.d(g,"timeSequence",(function(){return Ua.r})),n.d(g,"timeUnitSpecifier",(function(){return Ua.s})),n.d(g,"timeUnits",(function(){return Ua.t})),n.d(g,"utcFloor",(function(){return Ua.u})),n.d(g,"utcInterval",(function(){return Ua.v})),n.d(g,"utcOffset",(function(){return Ua.w})),n.d(g,"utcSequence",(function(){return Ua.x})),n.d(g,"utcdayofyear",(function(){return Ua.y})),n.d(g,"utcweek",(function(){return Ua.z})),n.d(g,"week",(function(){return Ua.A})),n.d(g,"accessor",(function(){return re})),n.d(g,"accessorName",(function(){return ae})),n.d(g,"accessorFields",(function(){return ie})),n.d(g,"id",(function(){return he})),n.d(g,"identity",(function(){return pe})),n.d(g,"zero",(function(){return ve})),n.d(g,"one",(function(){return me})),n.d(g,"truthy",(function(){return ge})),n.d(g,"falsy",(function(){return be})),n.d(g,"logger",(function(){return Se})),n.d(g,"None",(function(){return xe})),n.d(g,"Error",(function(){return _e})),n.d(g,"Warn",(function(){return we})),n.d(g,"Info",(function(){return ke})),n.d(g,"Debug",(function(){return Oe})),n.d(g,"mergeConfig",(function(){return Ae})),n.d(g,"writeConfig",(function(){return Te})),n.d(g,"panLinear",(function(){return ze})),n.d(g,"panLog",(function(){return Ue})),n.d(g,"panPow",(function(){return We})),n.d(g,"panSymlog",(function(){return Ve})),n.d(g,"zoomLinear",(function(){return qe})),n.d(g,"zoomLog",(function(){return He})),n.d(g,"zoomPow",(function(){return Xe})),n.d(g,"zoomSymlog",(function(){return Ye})),n.d(g,"quarter",(function(){return Ke})),n.d(g,"utcquarter",(function(){return $e})),n.d(g,"array",(function(){return Ze})),n.d(g,"clampRange",(function(){return Je})),n.d(g,"compare",(function(){return et})),n.d(g,"constant",(function(){return it})),n.d(g,"debounce",(function(){return ot})),n.d(g,"error",(function(){return ce})),n.d(g,"extend",(function(){return ut})),n.d(g,"extent",(function(){return st})),n.d(g,"extentIndex",(function(){return ct})),n.d(g,"fastmap",(function(){return ht})),n.d(g,"field",(function(){return fe})),n.d(g,"flush",(function(){return pt})),n.d(g,"hasOwnProperty",(function(){return ft})),n.d(g,"inherits",(function(){return vt})),n.d(g,"inrange",(function(){return mt})),n.d(g,"isArray",(function(){return je})),n.d(g,"isBoolean",(function(){return gt})),n.d(g,"isDate",(function(){return bt})),n.d(g,"isFunction",(function(){return Qe})),n.d(g,"isNumber",(function(){return yt})),n.d(g,"isObject",(function(){return Ee})),n.d(g,"isRegExp",(function(){return xt})),n.d(g,"isString",(function(){return _t})),n.d(g,"key",(function(){return wt})),n.d(g,"lerp",(function(){return kt})),n.d(g,"lruCache",(function(){return Ot})),n.d(g,"merge",(function(){return St})),n.d(g,"pad",(function(){return Et})),n.d(g,"peek",(function(){return Me})),n.d(g,"repeat",(function(){return jt})),n.d(g,"span",(function(){return Ct})),n.d(g,"splitAccessPath",(function(){return le})),n.d(g,"stringValue",(function(){return At})),n.d(g,"toBoolean",(function(){return Tt})),n.d(g,"toDate",(function(){return Mt})),n.d(g,"toNumber",(function(){return De})),n.d(g,"toString",(function(){return Dt})),n.d(g,"toSet",(function(){return It})),n.d(g,"truncate",(function(){return Ft})),n.d(g,"visitArray",(function(){return Rt})),n.d(g,"format",(function(){return an.a})),n.d(g,"formats",(function(){return an.b})),n.d(g,"inferType",(function(){return an.c})),n.d(g,"inferTypes",(function(){return an.d})),n.d(g,"loader",(function(){return an.e})),n.d(g,"read",(function(){return an.f})),n.d(g,"responseType",(function(){return an.g})),n.d(g,"typeParsers",(function(){return an.h})),n.d(g,"Bounds",(function(){return BN})),n.d(g,"Gradient",(function(){return MA})),n.d(g,"GroupItem",(function(){return WN})),n.d(g,"ResourceLoader",(function(){return VN})),n.d(g,"Item",(function(){return UN})),n.d(g,"Scenegraph",(function(){return ID})),n.d(g,"Handler",(function(){return VD})),n.d(g,"Renderer",(function(){return HD})),n.d(g,"CanvasHandler",(function(){return lI})),n.d(g,"CanvasRenderer",(function(){return mI})),n.d(g,"SVGHandler",(function(){return yI})),n.d(g,"SVGRenderer",(function(){return uL})),n.d(g,"SVGStringRenderer",(function(){return _L})),n.d(g,"RenderType",(function(){return EL})),n.d(g,"renderModule",(function(){return AL})),n.d(g,"intersect",(function(){return TL})),n.d(g,"Marks",(function(){return jD})),n.d(g,"boundClip",(function(){return FL})),n.d(g,"boundContext",(function(){return JN})),n.d(g,"boundStroke",(function(){return XN})),n.d(g,"boundItem",(function(){return ED})),n.d(g,"boundMark",(function(){return AD})),n.d(g,"pathCurves",(function(){return ET})),n.d(g,"pathSymbols",(function(){return qT})),n.d(g,"pathRectangle",(function(){return uN})),n.d(g,"pathTrail",(function(){return sN})),n.d(g,"pathParse",(function(){return TT})),n.d(g,"pathRender",(function(){return UT})),n.d(g,"point",(function(){return WD})),n.d(g,"domCreate",(function(){return PD})),n.d(g,"domFind",(function(){return LD})),n.d(g,"domChild",(function(){return BD})),n.d(g,"domClear",(function(){return zD})),n.d(g,"openTag",(function(){return nL})),n.d(g,"closeTag",(function(){return rL})),n.d(g,"font",(function(){return xD})),n.d(g,"fontFamily",(function(){return yD})),n.d(g,"fontSize",(function(){return pD})),n.d(g,"lineHeight",(function(){return vD})),n.d(g,"multiLineOffset",(function(){return gD})),n.d(g,"textMetrics",(function(){return sD})),n.d(g,"sceneEqual",(function(){return RL})),n.d(g,"pathEqual",(function(){return PL})),n.d(g,"sceneToJSON",(function(){return ND})),n.d(g,"sceneFromJSON",(function(){return MD})),n.d(g,"intersectPath",(function(){return cM})),n.d(g,"intersectPoint",(function(){return lM})),n.d(g,"intersectRule",(function(){return dM})),n.d(g,"intersectBoxLine",(function(){return hM})),n.d(g,"sceneZOrder",(function(){return wM})),n.d(g,"sceneVisit",(function(){return kM})),n.d(g,"scenePickVisit",(function(){return OM})),n.d(g,"resetSVGClipId",(function(){return PN})),n.d(g,"resetSVGDefIds",(function(){return LL})),n.d(g,"Dataflow",(function(){return Kn})),n.d(g,"EventStream",(function(){return An})),n.d(g,"Parameters",(function(){return kn})),n.d(g,"Pulse",(function(){return Ln})),n.d(g,"MultiPulse",(function(){return Wn})),n.d(g,"Operator",(function(){return jn})),n.d(g,"Transform",(function(){return Zn})),n.d(g,"changeset",(function(){return _n})),n.d(g,"ingest",(function(){return vn})),n.d(g,"isTuple",(function(){return dn})),n.d(g,"definition",(function(){return Qn})),n.d(g,"transform",(function(){return er})),n.d(g,"transforms",(function(){return Jn})),n.d(g,"tupleid",(function(){return hn})),n.d(g,"scale",(function(){return oF})),n.d(g,"scheme",(function(){return _P})),n.d(g,"interpolate",(function(){return gP})),n.d(g,"interpolateColors",(function(){return vP})),n.d(g,"interpolateRange",(function(){return pP})),n.d(g,"quantizeInterpolator",(function(){return mP})),n.d(g,"projection",(function(){return Bk})),n.d(g,"View",(function(){return n4})),n.d(g,"formatLocale",(function(){return on.c})),n.d(g,"timeFormatLocale",(function(){return on.e})),n.d(g,"locale",(function(){return on.b})),n.d(g,"defaultLocale",(function(){return on.a})),n.d(g,"resetDefaultLocale",(function(){return on.d})),n.d(g,"expressionFunction",(function(){return d3})),n.d(g,"parse",(function(){return f9})),n.d(g,"runtimeContext",(function(){return W3}));var b={};n.r(b),n.d(b,"invalidSpec",(function(){return yne})),n.d(b,"FIT_NON_SINGLE",(function(){return xne})),n.d(b,"containerSizeNonSingle",(function(){return _ne})),n.d(b,"containerSizeNotCompatibleWithAutosize",(function(){return wne})),n.d(b,"droppingFit",(function(){return kne})),n.d(b,"cannotProjectOnChannelWithoutField",(function(){return One})),n.d(b,"cannotProjectAggregate",(function(){return Sne})),n.d(b,"nearestNotSupportForContinuous",(function(){return jne})),n.d(b,"selectionNotSupported",(function(){return Ene})),n.d(b,"selectionNotFound",(function(){return Cne})),n.d(b,"SCALE_BINDINGS_CONTINUOUS",(function(){return Ane})),n.d(b,"LEGEND_BINDINGS_PROJECT_LENGTH",(function(){return Tne})),n.d(b,"noSameUnitLookup",(function(){return Nne})),n.d(b,"noSuchRepeatedValue",(function(){return Mne})),n.d(b,"columnsNotSupportByRowCol",(function(){return Dne})),n.d(b,"CONCAT_CANNOT_SHARE_AXIS",(function(){return Ine})),n.d(b,"unrecognizedParse",(function(){return Fne})),n.d(b,"differentParse",(function(){return Rne})),n.d(b,"invalidTransformIgnored",(function(){return Pne})),n.d(b,"NO_FIELDS_NEEDS_AS",(function(){return Lne})),n.d(b,"customFormatTypeNotAllowed",(function(){return Bne})),n.d(b,"encodingOverridden",(function(){return zne})),n.d(b,"projectionOverridden",(function(){return Une})),n.d(b,"REPLACE_ANGLE_WITH_THETA",(function(){return Wne})),n.d(b,"primitiveChannelDef",(function(){return Vne})),n.d(b,"invalidFieldType",(function(){return Gne})),n.d(b,"invalidFieldTypeForCountAggregate",(function(){return qne})),n.d(b,"invalidAggregate",(function(){return Hne})),n.d(b,"missingFieldType",(function(){return Xne})),n.d(b,"droppingColor",(function(){return Yne})),n.d(b,"emptyFieldDef",(function(){return Kne})),n.d(b,"latLongDeprecated",(function(){return $ne})),n.d(b,"LINE_WITH_VARYING_SIZE",(function(){return Zne})),n.d(b,"incompatibleChannel",(function(){return Jne})),n.d(b,"invalidEncodingChannel",(function(){return Qne})),n.d(b,"facetChannelShouldBeDiscrete",(function(){return ere})),n.d(b,"facetChannelDropped",(function(){return tre})),n.d(b,"discreteChannelCannotEncode",(function(){return nre})),n.d(b,"lineWithRange",(function(){return rre})),n.d(b,"orientOverridden",(function(){return are})),n.d(b,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return ire})),n.d(b,"RANGE_STEP_DEPRECATED",(function(){return ore})),n.d(b,"cannotUseScalePropertyWithNonColor",(function(){return ure})),n.d(b,"unaggregateDomainHasNoEffectForRawField",(function(){return sre})),n.d(b,"unaggregateDomainWithNonSharedDomainOp",(function(){return cre})),n.d(b,"unaggregatedDomainWithLogScale",(function(){return lre})),n.d(b,"cannotApplySizeToNonOrientedMark",(function(){return fre})),n.d(b,"scaleTypeNotWorkWithChannel",(function(){return dre})),n.d(b,"scaleTypeNotWorkWithFieldDef",(function(){return hre})),n.d(b,"scalePropertyNotWorkWithScaleType",(function(){return pre})),n.d(b,"scaleTypeNotWorkWithMark",(function(){return vre})),n.d(b,"stepDropped",(function(){return mre})),n.d(b,"mergeConflictingProperty",(function(){return gre})),n.d(b,"mergeConflictingDomainProperty",(function(){return bre})),n.d(b,"independentScaleMeansIndependentGuide",(function(){return yre})),n.d(b,"domainSortDropped",(function(){return xre})),n.d(b,"MORE_THAN_ONE_SORT",(function(){return _re})),n.d(b,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return wre})),n.d(b,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return kre})),n.d(b,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return Ore})),n.d(b,"INVALID_CHANNEL_FOR_AXIS",(function(){return Sre})),n.d(b,"cannotStackRangedMark",(function(){return jre})),n.d(b,"cannotStackNonLinearScale",(function(){return Ere})),n.d(b,"stackNonSummativeAggregate",(function(){return Cre})),n.d(b,"invalidTimeUnit",(function(){return Are})),n.d(b,"droppedDay",(function(){return Tre})),n.d(b,"errorBarCenterAndExtentAreNotNeeded",(function(){return Nre})),n.d(b,"errorBarCenterIsUsedWithWrongExtent",(function(){return Mre})),n.d(b,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return Dre})),n.d(b,"errorBarCenterIsNotNeeded",(function(){return Ire})),n.d(b,"errorBand1DNotSupport",(function(){return Fre})),n.d(b,"channelRequiredForBinned",(function(){return Rre})),n.d(b,"domainRequiredForThresholdScale",(function(){return Pre}));var y={};n.r(y),n.d(y,"compile",(function(){return Yve})),n.d(y,"extractTransforms",(function(){return Jve})),n.d(y,"normalize",(function(){return Mse})),n.d(y,"version",(function(){return Qve}));var x={};n.r(x),n.d(x,"dark",(function(){return rme})),n.d(x,"excel",(function(){return ime})),n.d(x,"fivethirtyeight",(function(){return lme})),n.d(x,"ggplot2",(function(){return dme})),n.d(x,"googlecharts",(function(){return Dme})),n.d(x,"latimes",(function(){return bme})),n.d(x,"quartz",(function(){return _me})),n.d(x,"urbaninstitute",(function(){return Ame})),n.d(x,"version",(function(){return Ime})),n.d(x,"vox",(function(){return kme}));var _=n(2),w=n.n(_);function k(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}var O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=Object.prototype.hasOwnProperty;function j(e,t){return S.call(e,t)}function E(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)j(e,r)&&t.push(r);return t}function C(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function A(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function T(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function N(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function M(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(M(e[t]))return!0}else if("object"===typeof e){var r=E(e),a=r.length;for(t=0;t<a;t++)if(M(e[r[t]]))return!0}return!1}function D(e,t){var n=[e];for(var r in t){var a="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof a&&n.push(r+": "+a)}return n.join("\n")}var I=function(e){function t(t,n,r,a,i){var o=this.constructor,u=e.call(this,D(t,{name:n,index:r,operation:a,tree:i}))||this;return u.name=n,u.index=r,u.operation=a,u.tree=i,Object.setPrototypeOf(u,o.prototype),u.message=D(t,{name:n,index:r,operation:a,tree:i}),u}return O(t,e),t}(Error),F=I,R=C,P={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=B(n,this.path);r&&(r=C(r));var a=z(n,{op:"remove",path:this.from}).removed;return z(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=B(n,this.from);return z(n,{op:"add",path:this.path,value:C(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:q(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},L={add:function(e,t,n){return A(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:P.move,copy:P.copy,test:P.test,_get:P._get};function B(e,t){if(""==t)return e;var n={op:"_get",path:t};return z(e,n),n.value}function z(e,t,n,r,a,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):V(t,0)),""===t.path){var o={newDocument:e};if("add"===t.op)return o.newDocument=t.value,o;if("replace"===t.op)return o.newDocument=t.value,o.removed=e,o;if("move"===t.op||"copy"===t.op)return o.newDocument=B(e,t.from),"move"===t.op&&(o.removed=e),o;if("test"===t.op){if(o.test=q(e,t.value),!1===o.test)throw new F("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o.newDocument=e,o}if("remove"===t.op)return o.removed=e,o.newDocument=null,o;if("_get"===t.op)return t.value=e,o;if(n)throw new F("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return o}r||(e=C(e));var u=(t.path||"").split("/"),s=e,c=1,l=u.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:V;;){if(d=u[c],a&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===s[d]?f=u.slice(0,c).join("/"):c==l-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),c++,Array.isArray(s)){if("-"===d)d=s.length;else{if(n&&!A(d))throw new F("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);A(d)&&(d=~~d)}if(c>=l){if(n&&"add"===t.op&&d>s.length)throw new F("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);if(!1===(o=L[t.op].call(t,s,d,e)).test)throw new F("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}}else if(d&&-1!=d.indexOf("~")&&(d=N(d)),c>=l){if(!1===(o=P[t.op].call(t,s,d,e)).test)throw new F("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return o}s=s[d]}}function U(e,t,n,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=!0),n&&!Array.isArray(t))throw new F("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=C(e));for(var i=new Array(t.length),o=0,u=t.length;o<u;o++)i[o]=z(e,t[o],n,!0,a,o),e=i[o].newDocument;return i.newDocument=e,i}function W(e,t,n){var r=z(e,t);if(!1===r.test)throw new F("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new F("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!P[e.op])throw new F("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new F("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new F('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new F("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new F("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&M(e.value))throw new F("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var a=e.path.split("/").length,i=r.split("/").length;if(a!==i+1&&a!==i)throw new F("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new F("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var o=G([{op:"_get",path:e.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new F("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function G(e,t,n){try{if(!Array.isArray(e))throw new F("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)U(C(t),C(e),n||!0);else{n=n||V;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(a){if(a instanceof F)return a;throw a}}function q(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,a,i=Array.isArray(e),o=Array.isArray(t);if(i&&o){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!q(e[n],t[n]))return!1;return!0}if(i!=o)return!1;var u=Object.keys(e);if((r=u.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(u[n]))return!1;for(n=r;0!==n--;)if(!q(e[a=u[n]],t[a]))return!1;return!0}return e!==e&&t!==t}var H=new WeakMap,X=function(e){this.observers=new Map,this.obj=e},Y=function(e,t){this.callback=e,this.observer=t};function K(e,t){t.unobserve()}function $(e,t){var n,r=function(e){return H.get(e)}(e);if(r){var a=function(e,t){return e.observers.get(t)}(r,t);n=a&&a.observer}else r=new X(e),H.set(e,r);if(n)return n;if(n={},r.value=C(e),t){n.callback=t,n.next=null;var i=function(){Z(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(i)};"undefined"!==typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=e,n.unobserve=function(){Z(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new Y(t,n)),n}function Z(e,t){void 0===t&&(t=!1);var n=H.get(e.object);J(n.value,e.object,e.patches,"",t),e.patches.length&&U(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function J(e,t,n,r,a){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var i=E(t),o=E(e),u=!1,s=o.length-1;s>=0;s--){var c=e[f=o[s]];if(!j(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(a&&n.push({op:"test",path:r+"/"+T(f),value:C(c)}),n.push({op:"remove",path:r+"/"+T(f)}),u=!0):(a&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var l=t[f];"object"==typeof c&&null!=c&&"object"==typeof l&&null!=l?J(c,l,n,r+"/"+T(f),a):c!==l&&(!0,a&&n.push({op:"test",path:r+"/"+T(f),value:C(c)}),n.push({op:"replace",path:r+"/"+T(f),value:C(l)}))}}if(u||i.length!=o.length)for(s=0;s<i.length;s++){var f;j(e,f=i[s])||void 0===t[f]||n.push({op:"add",path:r+"/"+T(f),value:C(t[f])})}}}function Q(e,t,n){void 0===n&&(n=!1);var r=[];return J(e,t,r,"",n),r}Object.assign({},r,a,{JsonPatchError:I,deepClone:C,escapePathComponent:T,unescapePathComponent:N});var ee=n(293),te=n.n(ee),ne=n(315),re=function(e,t,n){return e.fields=t||[],e.fname=n,e};function ae(e){return null==e?null:e.fname}function ie(e){return null==e?null:e.fields}var oe=function(e){return 1===e.length?ue(e[0]):se(e)},ue=function(e){return function(t){return t[e]}},se=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}},ce=function(e){throw Error(e)},le=function(e){var t,n,r,a=[],i=null,o=0,u=e.length,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===i)c(),i=null,o=-1;else{if(i)continue;t===o&&'"'===r||t===o&&"'"===r?(t=n+1,i=r):"."!==r||o?"["===r?(n>t&&c(),o=t=n+1):"]"===r&&(o||ce("Access path missing open bracket: "+e),o>0&&c(),o=0,t=n+1):n>t?c():t=n+1}return o&&ce("Access path missing closing bracket: "+e),i&&ce("Access path missing closing quote: "+e),n>t&&(n++,c()),a},fe=function(e,t,n){var r=le(e);return e=1===r.length?r[0]:e,re((n&&n.get||oe)(r),[e],t||e)},de=[],he=fe("id"),pe=re((function(e){return e}),de,"identity"),ve=re((function(){return 0}),de,"zero"),me=re((function(){return 1}),de,"one"),ge=re((function(){return!0}),de,"true"),be=re((function(){return!1}),de,"false");function ye(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var xe=0,_e=1,we=2,ke=3,Oe=4,Se=function(e,t){var n=e||xe;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=_e&&ye(t||"error","ERROR",arguments),this},warn:function(){return n>=we&&ye(t||"warn","WARN",arguments),this},info:function(){return n>=ke&&ye(t||"log","INFO",arguments),this},debug:function(){return n>=Oe&&ye(t||"log","DEBUG",arguments),this}}},je=Array.isArray,Ee=function(e){return e===Object(e)},Ce=function(e){return"__proto__"!==e};function Ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=Ne(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;Te(e,n,t[n],r)}return e}),{})}function Te(e,t,n,r){var a,i;if(Ce(t))if(Ee(n)&&!je(n))for(a in i=Ee(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?Te(i,a,n[a]):Ce(a)&&(i[a]=n[a]);else e[t]=n}function Ne(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}var Me=function(e){return e[e.length-1]},De=function(e){return null==e||""===e?null:+e};function Ie(e){return function(t){return e*Math.exp(t)}}function Fe(e){return function(t){return Math.log(e*t)}}function Re(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Pe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Le(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Be(e,t,n,r){var a=n(e[0]),i=n(Me(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function ze(e,t){return Be(e,t,De,pe)}function Ue(e,t){var n=Math.sign(e[0]);return Be(e,t,Fe(n),Ie(n))}function We(e,t,n){return Be(e,t,Le(n),Le(1/n))}function Ve(e,t,n){return Be(e,t,Re(n),Pe(n))}function Ge(e,t,n,r,a){var i=r(e[0]),o=r(Me(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function qe(e,t,n){return Ge(e,t,n,De,pe)}function He(e,t,n){var r=Math.sign(e[0]);return Ge(e,t,n,Fe(r),Ie(r))}function Xe(e,t,n,r){return Ge(e,t,n,Le(r),Le(1/r))}function Ye(e,t,n,r){return Ge(e,t,n,Re(r),Pe(r))}function Ke(e){return 1+~~(new Date(e).getMonth()/3)}function $e(e){return 1+~~(new Date(e).getUTCMonth()/3)}var Ze=function(e){return null!=e?je(e)?e:[e]:[]},Je=function(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]},Qe=function(e){return"function"===typeof e},et=function(e,t,n){n=n||{},t=Ze(t)||[];var r=[],a=[],i={},o=n.comparator||nt;return Ze(e).forEach((function(e,o){null!=e&&(r.push("descending"===t[o]?-1:1),a.push(e=Qe(e)?e:fe(e,null,n)),(ie(e)||[]).forEach((function(e){return i[e]=1})))})),0===a.length?null:re(o(a,r),Object.keys(i))},tt=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},nt=function(e,t){return 1===e.length?rt(e[0],t[0]):at(e,t,e.length)},rt=function(e,t){return function(n,r){return tt(e(n),e(r))*t}},at=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=tt(i(r),i(a));return o*t[u]}},it=function(e){return Qe(e)?e:function(){return e}},ot=function(e,t){var n,r;function a(){t(r),n=r=null}return function(t){r=t,n&&clearTimeout(n),n=setTimeout(a,e)}},ut=function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e},st=function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]},ct=function(e,t){var n,r,a,i,o,u=-1,s=e.length;if(null==t){for(;++u<s;)if(null!=(r=e[u])&&r>=r){n=a=r;break}if(u===s)return[-1,-1];for(i=o=u;++u<s;)null!=(r=e[u])&&(n>r&&(n=r,i=u),a<r&&(a=r,o=u))}else{for(;++u<s;)if(null!=(r=t(e[u],u,e))&&r>=r){n=a=r;break}if(u===s)return[-1,-1];for(i=o=u;++u<s;)null!=(r=t(e[u],u,e))&&(n>r&&(n=r,i=u),a<r&&(a=r,o=u))}return[i,o]},lt=Object.prototype.hasOwnProperty,ft=function(e,t){return lt.call(e,t)},dt={},ht=function(e){var t,n,r={};function a(e){return ft(r,e)&&r[e]!==dt}return t={size:0,empty:0,object:r,has:a,get:function(e){return a(e)?r[e]:void 0},set:function(e,n){return a(e)||(++t.size,r[e]===dt&&--t.empty),r[e]=n,this},delete:function(e){return a(e)&&(--t.size,++t.empty,r[e]=dt),this},clear:function(){t.size=t.empty=0,t.object=r={}},test:function(e){return arguments.length?(n=e,t):n},clean:function(){var e,a,i={},o=0;for(e in r)(a=r[e])===dt||n&&n(a)||(i[e]=a,++o);t.size=o,t.empty=0,t.object=r=i}},e&&Object.keys(e).forEach((function(n){t.set(n,e[n])})),t},pt=function(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u,s=e[0],c=Me(e),l=+n;return c<s&&(o=s,s=c,c=o),(o=Math.abs(t-s))<(u=Math.abs(c-t))&&o<=l?r:u<=l?a:i},vt=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},mt=function(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)},gt=function(e){return"boolean"===typeof e},bt=function(e){return"[object Date]"===Object.prototype.toString.call(e)},yt=function(e){return"number"===typeof e},xt=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},_t=function(e){return"string"===typeof e},wt=function(e,t,n){e&&(e=t?Ze(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):Ze(e));var r,a=e&&e.length,i=n&&n.get||oe,o=function(e){return i(t?[e]:le(e))};if(a)if(1===a){var u=o(e[0]);r=function(e){return""+u(e)}}else{var s=e.map(o);r=function(e){for(var t=""+s[0](e),n=0;++n<a;)t+="|"+s[n](e);return t}}else r=function(){return""};return re(r,e,"key")},kt=function(e,t){var n=e[0],r=Me(e),a=+t;return a?1===a?r:n+a*(r-n):n},Ot=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return ft(t,e)||ft(n,e)},get:function(e){return ft(t,e)?t[e]:ft(n,e)?i(e,n[e]):void 0},set:function(e,n){return ft(t,e)?t[e]=n:i(e,n)}}},St=function(e,t,n,r){var a=t.length,i=n.length;if(!i)return t;if(!a)return n;for(var o=r||new t.constructor(a+i),u=0,s=0,c=0;u<a&&s<i;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<a;++u,++c)o[c]=t[u];for(;s<i;++s,++c)o[c]=n[s];return o},jt=function(e,t){for(var n="";--t>=0;)n+=e;return n},Et=function(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?jt(a,o)+i:"center"===r?jt(a,~~(o/2))+i+jt(a,Math.ceil(o/2)):i+jt(a,o)},Ct=function(e){return e&&Me(e)-e[0]||0};function At(e){return je(e)?"["+e.map(At)+"]":Ee(e)||_t(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var Tt=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e};function Nt(e){return yt(e)||bt(e)?e:Date.parse(e)}var Mt=function(e,t){return t=t||Nt,null==e||""===e?null:t(e)},Dt=function(e){return null==e||""===e?null:e+""},It=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},Ft=function(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a},Rt=function(e,t,n){if(e)if(t)for(var r,a=0,i=e.length;a<i;++a)(r=t(e[a]))&&n(r,a,e);else e.forEach(n)},Pt=n(16);function Lt(e,t,n){return e.fields=t||[],e.fname=n,e}function Bt(e){return 1===e.length?zt(e[0]):Ut(e)}var zt=function(e){return function(t){return t[e]}},Ut=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function Wt(e){throw Error(e)}function Vt(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||Wt("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&Wt("Access path missing closing bracket: "+e),o&&Wt("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function Gt(e,t,n){var r=Vt(e);return e=1===r.length?r[0]:e,Lt((n&&n.get||Bt)(r),[e],t||e)}var qt=Gt("id"),Ht=Lt((function(e){return e}),[],"identity"),Xt=(Lt((function(){return 0}),[],"zero"),Lt((function(){return 1}),[],"one"),Lt((function(){return!0}),[],"true"));Lt((function(){return!1}),[],"false");function Yt(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var Kt=Array.isArray;function $t(e){return null!=e?Kt(e)?e:[e]:[]}function Zt(e){return"function"===typeof e}function Jt(e){return Zt(e)?e:function(){return e}}function Qt(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var en=Object.prototype.hasOwnProperty;function tn(e,t){return en.call(e,t)}function nn(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,Qt(r,n)}function rn(e,t,n){if(e)if(t)for(var r=e.length,a=0;a<r;++a){var i=t(e[a]);i&&n(i,a,e)}else e.forEach(n)}var an=n(71),on=n(97);function un(e){var t=e||Ht,n=[],r={};return n.add=function(e){var a=t(e);return r[a]||(r[a]=1,n.push(e)),n},n.remove=function(e){var a=t(e);if(r[a]){r[a]=0;var i=n.indexOf(e);i>=0&&n.splice(i,1)}return n},n}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=Object(Pt.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var ln=Symbol("vega_id"),fn=1;function dn(e){return!(!e||!hn(e))}function hn(e){return e[ln]}function pn(e,t){return e[ln]=t,e}function vn(e){var t=e===Object(e)?e:{data:e};return hn(t)?t:pn(t,fn++)}function mn(e){return gn(e,vn({}))}function gn(e,t){for(var n in e)t[n]=e[n];return t}function bn(e,t){return pn(t,hn(e))}function yn(e,t){return e?t?function(n,r){return e(n,r)||hn(t(n))-hn(t(r))}:function(t,n){return e(t,n)||hn(t)-hn(n)}:null}function xn(e){return e&&e.constructor===_n}function _n(){var e=[],t=[],n=[],r=[],a=[],i=null,o=!1;return{constructor:_n,insert:function(t){for(var n=$t(t),r=n.length,a=0;a<r;++a)e.push(n[a]);return this},remove:function(e){for(var n=Zt(e)?r:t,a=$t(e),i=a.length,o=0;o<i;++o)n.push(a[o]);return this},modify:function(e,t,r){var i={field:t,value:Jt(r)};return Zt(e)?(i.filter=e,a.push(i)):(i.tuple=e,n.push(i)),this},encode:function(e,t){return Zt(e)?a.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return i=e,this},reflow:function(){return o=!0,this},pulse:function(u,s){var c,l,f,d,h,p,v={},m={};for(c=0,l=s.length;c<l;++c)v[hn(s[c])]=1;for(c=0,l=t.length;c<l;++c)v[hn(h=t[c])]=-1;for(c=0,l=r.length;c<l;++c)d=r[c],s.forEach((function(e){d(e)&&(v[hn(e)]=-1)}));for(c=0,l=e.length;c<l;++c)p=hn(h=e[c]),v[p]?v[p]=1:u.add.push(vn(e[c]));for(c=0,l=s.length;c<l;++c)h=s[c],v[hn(h)]<0&&u.rem.push(h);function g(e,t,n){n?e[t]=n(e):u.encode=t,o||(m[hn(e)]=e)}for(c=0,l=n.length;c<l;++c)h=(f=n[c]).tuple,d=f.field,(p=v[hn(h)])>0&&(g(h,d,f.value),u.modifies(d));for(c=0,l=a.length;c<l;++c)f=a[c],d=f.filter,s.forEach((function(e){d(e)&&v[hn(e)]>0&&g(e,f.field,f.value)})),u.modifies(f.field);if(o)u.mod=t.length||r.length?s.filter((function(e){return v[hn(e)]>0})):s.slice();else for(p in m)u.mod.push(m[p]);return(i||null==i&&(t.length||r.length))&&u.clean(!0),u}}}var wn="_:mod:_";function kn(){Object.defineProperty(this,wn,{writable:!0,value:{}})}kn.prototype={set:function(e,t,n,r){var a=this,i=a[e],o=a[wn];return null!=t&&t>=0?(i[t]!==n||r)&&(i[t]=n,o[t+":"+e]=-1,o[e]=-1):(i!==n||r)&&(a[e]=n,o[e]=Kt(n)?1+n.length:-1),a},modified:function(e,t){var n=this[wn];if(!arguments.length){for(var r in n)if(n[r])return!0;return!1}if(Kt(e)){for(var a=0;a<e.length;++a)if(n[e[a]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this[wn]={},this}};var On=0,Sn=new kn;function jn(e,t,n,r){this.id=++On,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function En(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}jn.prototype={targets:function(){return this._targets||(this._targets=un(qt))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:En(1),modified:En(2),parameters:function(e,t,n){var r=this;t=!1!==t;var a,i,o,u,s=this._argval=this._argval||new kn,c=this._argops=this._argops||[],l=[],f=function(e,n,a){a instanceof jn?(a!==r&&(t&&a.targets().add(r),l.push(a)),c.push({op:a,name:e,index:n})):s.set(e,n,a)};for(a in e)if(i=e[a],"pulse"===a)$t(i).forEach((function(e){e instanceof jn?e!==r&&(e.targets().add(r),l.push(e)):Wt("Pulse parameters must be operator instances.")})),this.source=i;else if(Kt(i))for(s.set(a,-1,Array(o=i.length)),u=0;u<o;++u)f(a,u,i[u]);else f(a,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},marshall:function(e){var t,n,r,a,i=this._argval||Sn,o=this._argops;if(o){var u=o.length;for(n=0;n<u;++n)a=(r=(t=o[n]).op).modified()&&r.stamp===e,i.set(t.name,t.index,r.value,a);if(o.initonly){for(n=0;n<u;++n)(t=o[n]).op.targets().remove(this);this._argops=null,this._update=null}}return i},detach:function(){var e,t,n,r=this._argops;if(r)for(e=0,t=r.length;e<t;++e)(n=r[e].op)._targets&&n._targets.remove(this)},evaluate:function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t}};var Cn=0;function An(e,t,n){this.id=++Cn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Tn(e,t,n){return new An(e,t,n)}function Nn(){return(Nn=Object(Pt.a)(w.a.mark((function e(t,n){var r,a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,a=0,e.prev=2,e.next=5,r.loader().load(t,{context:"dataflow",response:Object(an.g)(n&&n.type)});case 5:i=e.sent;try{i=r.parse(i,n)}catch(o){a=-2,r.warn("Data ingestion failed",t,o)}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a=-1,r.warn("Loading failed",t,e.t0);case 13:return e.abrupt("return",{data:i,status:a});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})))).apply(this,arguments)}function Mn(){return(Mn=Object(Pt.a)(w.a.mark((function e(t,n,r){var a,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(a=this)._pending||Dn(a)).requests+=1,e.next=4,a.request(n,r);case 4:return o=e.sent,a.pulse(t,a.changeset().remove(Xt).insert(o.data||[])),i.done(),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Dn(e){var t,n=new Promise((function(e){return t=e}));return n.requests=0,n.done=function(){0===--n.requests&&(e._pending=null,t(e))},e._pending=n}An.prototype={_filter:Xt,_apply:Ht,targets:function(){return this._targets||(this._targets=un(qt))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,a=0;a<r;++a)n[a].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){var t=Tn(e);return this.targets().add(t),t},apply:function(e){var t=Tn(null,e);return this.targets().add(t),t},merge:function(){var e=Tn();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){var t=Tn();return this.targets().add(Tn(null,null,function(e,t){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return t(r),n=null}),e)}}(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){var n=!1;return e.targets().add(Tn(null,null,(function(){return n=!0}))),t.targets().add(Tn(null,null,(function(){return n=!1}))),this.filter((function(){return n}))},detach:function(){}};var In={skip:!0};function Fn(e,t,n,r,a,i){var o,u,s=Qt({},i,In);Zt(n)||(n=Jt(n)),void 0===r?o=function(t){return e.touch(n(t))}:Zt(r)?(u=new jn(null,r,a,!1),o=function(t){u.evaluate(t);var r=n(t),a=u.value;xn(a)?e.pulse(r,a,i):e.update(r,a,s)}):o=function(t){return e.update(n(t),r,s)},t.apply(o)}function Rn(e,t,n,r,a,i){if(void 0===r)t.targets().add(n);else{var o=i||{},u=new jn(null,function(e,t){return t=Zt(t)?t:Jt(t),e?function(n,r){var a=t(n,r);return e.skip()||(e.skip(a!==this.value).value=a),a}:t}(n,r),a,!1);u.modified(o.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}var Pn={};function Ln(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Bn(e,t){var n=[];return rn(e,t,(function(e){return n.push(e)})),n}function zn(e,t){var n={};return e.visit(t,(function(e){n[hn(e)]=1})),function(e){return n[hn(e)]?null:e}}function Un(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function Wn(e,t,n,r){var a=this,i=n.length,o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(var u=0;u<i;++u){var s=n[u];if(s.stamp===t){if(s.fields){var c=a.fields||(a.fields={});for(var l in s.fields)c[l]=1}s.changed(a.ADD)&&(o|=a.ADD),s.changed(a.REM)&&(o|=a.REM),s.changed(a.MOD)&&(o|=a.MOD)}}this.changes=o}function Vn(){return(Vn=Object(Pt.a)(w.a.mark((function e(t,n,r){var a,i,o,u,s,c,l,f,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!(a=this)._pulse){e.next=3;break}return e.abrupt("return",qn(a));case 3:if(!a._pending){e.next=6;break}return e.next=6,a._pending;case 6:if(!n){e.next=9;break}return e.next=9,sn(a,n);case 9:if(a._touched.length){e.next=12;break}return a.debug("Dataflow invoked, but nothing to do."),e.abrupt("return",a);case 12:o=++a._clock,a._pulse=new Ln(a,o,t),a._touched.forEach((function(e){return a._enqueue(e,!0)})),a._touched=un(qt),u=0,e.prev=17;case 18:if(!(a._heap.size()>0)){e.next=35;break}if((s=a._heap.pop()).rank===s.qrank){e.next=23;break}return a._enqueue(s,!0),e.abrupt("continue",18);case 23:if(!(c=s.run(a._getPulse(s,t))).then){e.next=30;break}return e.next=27,c;case 27:c=e.sent,e.next=31;break;case 30:c.async&&(i.push(c.async),c=Pn);case 31:c!==Pn&&s._targets&&s._targets.forEach((function(e){return a._enqueue(e)})),++u,e.next=18;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(17),a._heap.clear(),l=e.t0;case 41:if(a._input={},a._pulse=null,a.debug("Pulse ".concat(o,": ").concat(u," operators")),l&&(a._postrun=[],a.error(l)),!a._postrun.length){e.next=55;break}f=a._postrun.sort((function(e,t){return t.priority-e.priority})),a._postrun=[],d=0;case 49:if(!(d<f.length)){e.next=55;break}return e.next=52,sn(a,f[d].callback);case 52:++d,e.next=49;break;case 55:if(!r){e.next=58;break}return e.next=58,sn(a,r);case 58:return i.length&&Promise.all(i).then((function(e){return a.runAsync(null,(function(){e.forEach((function(e){try{e(a)}catch(t){a.error(t)}}))}))})),e.abrupt("return",a);case 60:case"end":return e.stop()}}),e,this,[[17,37]])})))).apply(this,arguments)}function Gn(){return(Gn=Object(Pt.a)(w.a.mark((function e(t,n,r){var a,i=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=5;break}return e.next=3,this._running;case 3:e.next=0;break;case 5:return a=function(){return i._running=null},(this._running=this.evaluate(t,n,r)).then(a,a),e.abrupt("return",this._running);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function qn(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}Ln.prototype={StopPropagation:Pn,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new Ln(this.dataflow).init(this,e)},clone:function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){var e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||((e=new Ln(this.dataflow).init(this)).add=e.source,e.rem=[]),e},init:function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,zn(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){var t=this.fields||(this.fields={});return Kt(e)?e.forEach((function(e){return t[e]=!0})):t[e]=!0,this},modified:function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Kt(e)?e.some((function(e){return n[e]})):n[e]:!!n)},filter:function(e,t){var n=this;return 1&e&&(n.addF=Un(n.addF,t)),2&e&&(n.remF=Un(n.remF,t)),4&e&&(n.modF=Un(n.modF,t)),16&e&&(n.srcF=Un(n.srcF,t)),n},materialize:function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=Bn(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Bn(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Bn(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){var n=this,r=t;if(16&e)return rn(n.source,n.srcF,r),n;1&e&&rn(n.add,n.addF,r),2&e&&rn(n.rem,n.remF,r),4&e&&rn(n.mod,n.modF,r);var a=n.source;if(8&e&&a){var i=n.add.length+n.mod.length;i===a.length||rn(a,i?zn(n,5):n.srcF,r)}return n}},nn(Wn,Ln,{fork:function(e){var t=new Ln(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},changed:function(e){return this.changes&e},modified:function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Kt(e)?e.some((function(e){return n[e]})):n[e]:0},filter:function(){Wt("MultiPulse does not support filtering.")},materialize:function(){Wt("MultiPulse does not support materialization.")},visit:function(e,t){var n=this,r=n.pulses,a=r.length,i=0;if(e&n.SOURCE)for(;i<a;++i)r[i].visit(e,t);else for(;i<a;++i)r[i].stamp===n.stamp&&r[i].visit(e,t);return n}});var Hn={skip:!1,force:!1};function Xn(e){var t=[];return{clear:function(){return t=[]},size:function(){return t.length},peek:function(){return t[0]},push:function(n){return t.push(n),Yn(t,0,t.length-1,e)},pop:function(){var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function(e,t,n){var r,a=t,i=e.length,o=e[t],u=1+(t<<1);for(;u<i;)(r=u+1)<i&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],u=1+((t=u)<<1);e[t]=o,Yn(e,a,t,n)}(t,0,e)):n=r,n}}}function Yn(e,t,n,r){for(var a,i,o=e[n];n>t&&r(o,a=e[i=n-1>>1])<0;)e[n]=a,n=i;return e[n]=o}function Kn(){this.logger(function(e,t){var n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&Yt(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&Yt(t||"warn","WARN",arguments),this},info:function(){return n>=3&&Yt(t||"log","INFO",arguments),this},debug:function(){return n>=4&&Yt(t||"log","DEBUG",arguments),this}}}()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=Object(on.a)();try{this._loader=Object(an.e)()}catch(e){}this._touched=un(qt),this._input={},this._pulse=null,this._heap=Xn((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}function $n(e){return function(){return this._log[e].apply(this,arguments)}}function Zn(e,t){jn.call(this,e,null,t)}Kn.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:$n("error"),warn:$n("warn"),info:$n("info"),debug:$n("debug"),logLevel:$n("level"),cleanThreshold:1e4,add:function(e,t,n,r){var a,i=1;return e instanceof jn?a=e:e&&e.prototype instanceof jn?a=new e:Zt(e)?a=new jn(null,e):(i=0,a=new jn(e,t)),this.rank(a),i&&(r=n,n=t),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a},connect:function(e,t){for(var n=e.rank,r=t.length,a=0;a<r;++a)if(n<t[a].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){for(var t,n,r,a=[e];a.length;)if(this.rank(t=a.pop()),n=t._targets)for(r=n.length;--r>=0;)a.push(t=n[r]),t===e&&Wt("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||Hn);var r=new Ln(this,this._clock+(this._pulse?0:1)),a=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,a),this},touch:function(e,t){var n=t||Hn;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){var r=n||Hn;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:_n,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){var n=this.locale();return Object(an.f)(e,t,n.timeParse,n.utcParse)},preload:function(e,t,n){return Mn.apply(this,arguments)},request:function(e,t){return Nn.apply(this,arguments)},events:function(e,t,n,r){for(var a,i=this,o=Tn(n,r),u=function(e){e.dataflow=i;try{o.receive(e)}catch(t){i.error(t)}finally{i.run()}},s=(a="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):$t(e)).length,c=0;c<s;++c)a[c].addEventListener(t,u);return o},on:function(e,t,n,r,a){return(e instanceof jn?Rn:Fn)(this,e,t,n,r,a),this},evaluate:function(e,t,n){return Vn.apply(this,arguments)},run:function(e,t,n){return this._pulse?qn(this):(this.evaluate(e,t,n),this)},runAsync:function(e,t,n){return Gn.apply(this,arguments)},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},_enqueue:function(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){var n=e.source,r=this._clock;return n&&Kt(n)?new Wn(this,r,n.map((function(e){return e.pulse})),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Pn&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},nn(Zn,jn,{run:function(e){var t,n=this;return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then((function(e){return n.pulse=e})):t!==e.StopPropagation&&(this.pulse=t),t)},evaluate:function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});var Jn={};function Qn(e){var t=er(e);return t&&t.Definition||null}function er(e){return e=e&&e.toLowerCase(),tn(Jn,e)?Jn[e]:null}var tr=n(8);function nr(e,t,n){return e.fields=t||[],e.fname=n,e}function rr(e){return null==e?null:e.fname}function ar(e){return null==e?null:e.fields}function ir(e){return 1===e.length?or(e[0]):ur(e)}var or=function(e){return function(t){return t[e]}},ur=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function sr(e){throw Error(e)}function cr(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||sr("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&sr("Access path missing closing bracket: "+e),o&&sr("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function lr(e,t,n){var r=cr(e);return e=1===r.length?r[0]:e,nr((n&&n.get||ir)(r),[e],t||e)}lr("id");var fr=nr((function(e){return e}),[],"identity"),dr=nr((function(){return 0}),[],"zero"),hr=(nr((function(){return 1}),[],"one"),nr((function(){return!0}),[],"true"));nr((function(){return!1}),[],"false");var pr=Array.isArray;function vr(e){return e[e.length-1]}function mr(e){return null==e||""===e?null:+e}function gr(e){return null!=e?pr(e)?e:[e]:[]}function br(e){return"function"===typeof e}var yr=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},xr=function(e,t){return 1===e.length?_r(e[0],t[0]):wr(e,t,e.length)},_r=function(e,t){return function(n,r){return yr(e(n),e(r))*t}},wr=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=yr(i(r),i(a));return o*t[u]}};function kr(e){return br(e)?e:function(){return e}}function Or(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}function Sr(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}var jr=Object.prototype.hasOwnProperty;function Er(e,t){return jr.call(e,t)}var Cr={};function Ar(e){var t,n={};function r(e){return Er(n,e)&&n[e]!==Cr}var a={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++a.size,n[e]===Cr&&--a.empty),n[e]=t,this},delete:function(e){return r(e)&&(--a.size,++a.empty,n[e]=Cr),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(t=e,a):t},clean:function(){var e={},r=0;for(var i in n){var o=n[i];o===Cr||t&&t(o)||(e[i]=o,++r)}a.size=r,a.empty=0,a.object=n=e}};return e&&Object.keys(e).forEach((function(t){a.set(t,e[t])})),a}function Tr(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,Or(r,n)}var Nr=n(7),Mr=n(207);function Dr(e,t){var n;if(void 0===t){var r,a=Object(tr.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(tr.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function Ir(e,t){var n;if(void 0===t){var r,a=Object(tr.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(tr.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;null!=(c=t(c,++u,e))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function Fr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Mr.a;r>n;){if(r-n>600){var i=r-n+1,o=t-n+1,u=Math.log(i),s=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*s*(i-s)/i)*(o-i/2<0?-1:1),l=Math.max(n,Math.floor(t-o*s/i+c)),f=Math.min(r,Math.floor(t+(i-o)*s/i+c));Fr(e,t,l,f,a)}var d=e[t],h=n,p=r;for(Rr(e,n,t),a(e[r],d)>0&&Rr(e,n,r);h<p;){for(Rr(e,h,p),++h,--p;a(e[h],d)<0;)++h;for(;a(e[p],d)>0;)--p}0===a(e[n],d)?Rr(e,n,p):Rr(e,++p,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}return e}function Rr(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var Pr=w.a.mark(Br),Lr=function(e){return null===e?NaN:+e};function Br(e,t){var n,r,a,i,o,u,s;return w.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(void 0!==t){c.next=21;break}n=Object(tr.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=40;break;case 21:i=-1,o=Object(tr.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=32;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&(s=+s)>=s)){c.next=30;break}return c.next=30,s;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t1=c.catch(23),o.e(c.t1);case 37:return c.prev=37,o.f(),c.finish(37);case 40:case"end":return c.stop()}}),Pr,null,[[2,13,16,19],[23,34,37,40]])}function zr(e,t,n){if(r=(e=Float64Array.from(Br(e,n))).length){if((t=+t)<=0||r<2)return Ir(e);if(t>=1)return Dr(e);var r,a=(r-1)*t,i=Math.floor(a),o=Dr(Fr(e,i).subarray(0,i+1));return o+(Ir(e.subarray(i+1))-o)*(a-i)}}function Ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lr;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),u=+n(e[i+1],i+1,e);return o+(u-o)*(a-i)}}function Wr(e,t){var n=function(e,t){var n,r=0,a=0,i=0;if(void 0===t){var o,u=Object(tr.a)(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;null!=s&&(s=+s)>=s&&(i+=(n=s-a)*(s-(a+=n/++r)))}}catch(h){u.e(h)}finally{u.f()}}else{var c,l=-1,f=Object(tr.a)(e);try{for(f.s();!(c=f.n()).done;){var d=c.value;null!=(d=t(d,++l,e))&&(d=+d)>=d&&(i+=(n=d-a)*(d-(a+=n/++r)))}}catch(h){f.e(h)}finally{f.f()}}if(r>1)return i/(r-1)}(e,t);return n?Math.sqrt(n):n}var Vr=function(e,t){return zr(e,.5,t)},Gr=w.a.mark(qr);function qr(e,t){var n,r,a,i,o,u,s;return w.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(null!=t){c.next=21;break}n=Object(tr.a)(e),c.prev=2,n.s();case 4:if((r=n.n()).done){c.next=11;break}if(!(null!=(a=r.value)&&""!==a&&(a=+a)>=a)){c.next=9;break}return c.next=9,a;case 9:c.next=4;break;case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),n.e(c.t0);case 16:return c.prev=16,n.f(),c.finish(16);case 19:c.next=41;break;case 21:i=-1,o=Object(tr.a)(e),c.prev=23,o.s();case 25:if((u=o.n()).done){c.next=33;break}if(s=u.value,!(null!=(s=t(s,++i,e))&&""!==s&&(s=+s)>=s)){c.next=31;break}return c.next=31,s;case 31:c.next=25;break;case 33:c.next=38;break;case 35:c.prev=35,c.t1=c.catch(23),o.e(c.t1);case 38:return c.prev=38,o.f(),c.finish(38);case 41:case"end":return c.stop()}}),Gr,null,[[2,13,16,19],[23,35,38,41]])}function Hr(e,t,n){var r=Float64Array.from(qr(e,n));return r.sort(Mr.a),t.map((function(e){return Ur(r,e)}))}function Xr(e,t){return Hr(e,[.25,.5,.75],t)}function Yr(e,t){var n=e.length,r=Wr(e,t),a=Xr(e,t),i=(a[2]-a[0])/1.34;return 1.06*(Math.min(r,i)||r||Math.abs(a[0])||1)*Math.pow(n,-.2)}function Kr(e){var t,n,r,a,i,o,u=e.maxbins||20,s=e.base||10,c=Math.log(s),l=e.divide||[5,2],f=e.extent[0],d=e.extent[1],h=e.span||d-f||Math.abs(f)||1;if(e.step)t=e.step;else if(e.steps){for(a=h/u,i=0,o=e.steps.length;i<o&&e.steps[i]<a;++i);t=e.steps[Math.max(0,i-1)]}else{for(n=Math.ceil(Math.log(u)/c),r=e.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(h)/c)-n));Math.ceil(h/t)>u;)t*=s;for(i=0,o=l.length;i<o;++i)(a=t/l[i])>=r&&h/a<=u&&(t=a)}var p=(a=Math.log(t))>=0?0:1+~~(-a/c),v=Math.pow(s,-p-1);return(e.nice||void 0===e.nice)&&(f=f<(a=Math.floor(f/t+v)*t)?a-t:a,d=Math.ceil(d/t)*t),{start:f,stop:d===f?f+t:d,step:t}}var $r=Math.random;function Zr(e){$r=e}function Jr(e,t,n,r){if(!e.length)return[void 0,void 0];var a,i,o,u,s=Float64Array.from(qr(e,r)),c=s.length,l=t;for(o=0,u=Array(l);o<l;++o){for(a=0,i=0;i<c;++i)a+=s[~~($r()*c)];u[o]=a/c}return u.sort(Mr.a),[zr(u,n/2),zr(u,1-n/2)]}function Qr(e,t,n,r){r=r||function(e){return e};for(var a,i=e.length,o=new Float64Array(i),u=0,s=1,c=r(e[0]),l=c,f=c+t;s<i;++s){if((a=r(e[s]))>=f){for(l=(c+l)/2;u<s;++u)o[u]=l;f=a+t,c=a}l=a}for(l=(c+l)/2;u<s;++u)o[u]=l;return n?function(e,t){var n,r,a=e.length,i=0,o=1;for(;e[i]===e[o];)++o;for(;o<a;){for(n=o+1;e[o]===e[n];)++n;if(e[o]-e[o-1]<t){for(r=o+(i+n-o-o>>1);r<o;)e[r++]=e[o];for(;r>o;)e[r--]=e[i]}i=o,o=n}return e}(o,t+t/4):o}function ea(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function ta(e,t){var n,r,a;null==t&&(t=e,e=0);var i={min:function(e){return arguments.length?(a=r-(n=e||0),i):n},max:function(e){return arguments.length?(a=(r=e||0)-n,i):r},sample:function(){return n+Math.floor(a*$r())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/a:0},cdf:function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/a},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*a):NaN}};return i.min(e).max(t)}var na=Math.sqrt(2*Math.PI),ra=Math.SQRT2,aa=NaN;function ia(e,t){e=e||0,t=null==t?1:t;var n,r,a=0,i=0;if(aa===aa)a=aa,aa=NaN;else{do{n=(a=2*$r()-1)*a+(i=2*$r()-1)*i}while(0===n||n>1);a*=r=Math.sqrt(-2*Math.log(n)/n),aa=i*r}return e+a*t}function oa(e,t,n){var r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*na)}function ua(e,t,n){var r,a=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(a);if(i>37)r=0;else{var o=Math.exp(-i*i/2);i<7.07106781186547?(r=o*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=o/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return a>0?1-r:r}function sa(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*ra*function(e){var t,n=-Math.log((1-e)*(1+e));t=n<6.25?1.6536545626831027+(t=.24015818242558962+(t=(t=(t=.00018673420803405714+(t=(t=(t=4.2347877827932404e-7+(t=(t=(t=1.0512122733215323e-9+(t=(t=(t=26335093153082323e-28+(t=(t=(t=6637638134358324e-30+(t=20972767875968562e-33+(t=(t=11157877678025181e-33+(t=128584807152564e-32+(t=(t=-364441206401782e-35)*(n-=3.125)-16850591381820166e-35)*n)*n)*n-1333171662854621e-31)*n)*n)*n-4054566272975207e-29)*n-8151934197605472e-29)*n)*n-12975133253453532e-27)*n-5415412054294628e-26)*n)*n-4.112633980346984e-9)*n-2.9070369957882005e-8)*n)*n-13654692000834679e-22)*n-13882523362786469e-21)*n)*n-.000740702534166267)*n-.006033670871430149)*n)*n:n<16?3.0838856104922208+(t=1.0052589676941592+(t=.005370914553590064+(t=(t=.002491442096107851+(t=(t=.0009532893797373805+(t=(t=24031110387097894e-21+(t=6828485145957318e-20+(t=(t=12475304481671779e-21+(t=29234449089955446e-22+(t=(t=15027403968909828e-22+(t=1.8239629214389228e-8+(t=(t=9.075656193888539e-8+(t=2.2137376921775787e-9)*(n=Math.sqrt(n)-3.25))*n-2.7517406297064545e-7)*n)*n)*n-4013867526981546e-21)*n)*n)*n-47318229009055734e-21)*n)*n)*n-.0003550375203628475)*n)*n-.0016882755560235047)*n)*n-.003751208507569241)*n)*n)*n:Number.isFinite(n)?4.849906401408584+(t=1.0103004648645344+(t=(t=(t=7599527703001776e-20+(t=(t=4526062597223154e-21+(t=(t=2.2900482228026655e-7+(t=(t=2.914795345090108e-8+(t=(t=7.61570120807834e-9+(t=(t=1.5076572693500548e-9+(t=(t=-27109920616438573e-27)*(n=Math.sqrt(n)-5)-2.555641816996525e-10)*n)*n-3.789465440126737e-9)*n)*n-1.496002662714924e-8)*n)*n-6.771199775845234e-8)*n)*n-9.9298272942317e-7)*n)*n-1968177810553167e-20)*n)*n-.00021503011930044477)*n-.00013871931833623122)*n)*n:1/0;return t*e}(2*e-1)}function ca(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return ia(n,r)},pdf:function(e){return oa(e,n,r)},cdf:function(e){return ua(e,n,r)},icdf:function(e){return sa(e,n,r)}};return a.mean(e).stdev(t)}function la(e,t){var n=ca(),r=0,a={data:function(n){return arguments.length?(e=n,r=n?n.length:0,a.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=Yr(e)),a):t},sample:function(){return e[~~($r()*r)]+t*n.sample()},pdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.pdf((a-e[o])/t);return i/t/r},cdf:function(a){for(var i=0,o=0;o<r;++o)i+=n.cdf((a-e[o])/t);return i/r},icdf:function(){throw Error("KDE icdf not supported.")}};return a.data(e)}function fa(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+ia()*t)}function da(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;var r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*na*e)}function ha(e,t,n){return ua(Math.log(e),t,n)}function pa(e,t,n){return Math.exp(sa(e,t,n))}function va(e,t){var n,r,a={mean:function(e){return arguments.length?(n=e||0,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return fa(n,r)},pdf:function(e){return da(e,n,r)},cdf:function(e){return ha(e,n,r)},icdf:function(e){return pa(e,n,r)}};return a.mean(e).stdev(t)}function ma(e,t){var n,r=0;function a(e){var t,n=[],a=0;for(t=0;t<r;++t)a+=n[t]=null==e[t]?1:+e[t];for(t=0;t<r;++t)n[t]/=a;return n}var i={weights:function(e){return arguments.length?(n=a(t=e||[]),i):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample:function(){for(var t=$r(),a=e[r-1],i=n[0],o=0;o<r-1;i+=n[++o])if(t<i){a=e[o];break}return a.sample()},pdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].pdf(t);return a},cdf:function(t){for(var a=0,i=0;i<r;++i)a+=n[i]*e[i].cdf(t);return a},icdf:function(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)}function ga(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*$r()}function ba(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function ya(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function xa(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function _a(e,t){var n,r,a={min:function(e){return arguments.length?(n=e||0,a):n},max:function(e){return arguments.length?(r=null==e?1:e,a):r},sample:function(){return ga(n,r)},pdf:function(e){return ba(e,n,r)},cdf:function(e){return ya(e,n,r)},icdf:function(e){return xa(e,n,r)}};return null==t&&(t=null==e?1:e,e=0),a.min(e).max(t)}function wa(e,t,n,r){var a=r-e*e,i=Math.abs(a)<1e-24?0:(n-e*t)/a;return[t-i*e,i]}function ka(e,t,n,r){e=e.filter((function(e){var r=t(e),a=n(e);return null!=r&&(r=+r)>=r&&null!=a&&(a=+a)>=a})),r&&e.sort((function(e,n){return t(e)-t(n)}));var a,i,o,u,s=e.length,c=new Float64Array(s),l=new Float64Array(s),f=0,d=0,h=0,p=Object(tr.a)(e);try{for(p.s();!(u=p.n()).done;)o=u.value,c[f]=a=+t(o),l[f]=i=+n(o),d+=(a-d)/++f,h+=(i-h)/f}catch(v){p.e(v)}finally{p.f()}for(f=0;f<s;++f)c[f]-=d,l[f]-=h;return[c,l,d,h]}function Oa(e,t,n,r){var a,i,o,u=-1,s=Object(tr.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;a=t(c),i=n(c),null!=a&&(a=+a)>=a&&null!=i&&(i=+i)>=i&&r(a,i,++u)}}catch(l){s.e(l)}finally{s.f()}}function Sa(e,t,n,r,a){var i=0,o=0;return Oa(e,t,n,(function(e,t){var n=t-a(e),u=t-r;i+=n*n,o+=u*u})),1-i/o}function ja(e,t,n){var r=0,a=0,i=0,o=0,u=0;Oa(e,t,n,(function(e,t){++u,r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=wa(r,a,i,o),c=function(e){return s[0]+s[1]*e};return{coef:s,predict:c,rSquared:Sa(e,t,n,a,c)}}function Ea(e,t,n){var r=0,a=0,i=0,o=0,u=0;Oa(e,t,n,(function(e,t){++u,e=Math.log(e),r+=(e-r)/u,a+=(t-a)/u,i+=(e*t-i)/u,o+=(e*e-o)/u}));var s=wa(r,a,i,o),c=function(e){return s[0]+s[1]*Math.log(e)};return{coef:s,predict:c,rSquared:Sa(e,t,n,a,c)}}function Ca(e,t,n){var r,a,i,o=ka(e,t,n),u=Object(Nr.a)(o,4),s=u[0],c=(u[1],u[2]),l=u[3],f=0,d=0,h=0,p=0,v=0;Oa(e,t,n,(function(e,t){r=s[v++],a=Math.log(t),f+=(t*a-f)/v,d+=((i=r*t)-d)/v,h+=(i*a-h)/v,p+=(r*i-p)/v}));var m=wa(d/l,f/l,h/l,p/l),g=Object(Nr.a)(m,2),b=g[0],y=g[1],x=function(e){return Math.exp(b+y*(e-c))};return{coef:[Math.exp(b-y*c),y],predict:x,rSquared:Sa(e,t,n,l,x)}}function Aa(e,t,n){var r=0,a=0,i=0,o=0,u=0,s=0;Oa(e,t,n,(function(e,t){var n=Math.log(e),c=Math.log(t);++s,r+=(n-r)/s,a+=(c-a)/s,i+=(n*c-i)/s,o+=(n*n-o)/s,u+=(t-u)/s}));var c=wa(r,a,i,o),l=function(e){return c[0]*Math.pow(e,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:Sa(e,t,n,u,l)}}function Ta(e,t,n){var r,a,i,o,u=ka(e,t,n),s=Object(Nr.a)(u,4),c=s[0],l=s[1],f=s[2],d=s[3],h=c.length,p=0,v=0,m=0,g=0,b=0;for(r=0;r<h;)a=c[r],i=l[r++],p+=((o=a*a)-p)/r,v+=(o*a-v)/r,m+=(o*o-m)/r,g+=(a*i-g)/r,b+=(o*i-b)/r;var y=m-p*p,x=p*y-v*v,_=(b*p-g*v)/x,w=(g*y-b*v)/x,k=-_*p,O=function(e){return _*(e-=f)*e+w*e+k+d};return{coef:[k-w*f+_*f*f+d,w-2*_*f,_],predict:O,rSquared:Sa(e,t,n,d,O)}}function Na(e,t,n,r){if(1===r)return ja(e,t,n);if(2===r)return Ta(e,t,n);var a,i,o,u,s,c=ka(e,t,n),l=Object(Nr.a)(c,4),f=l[0],d=l[1],h=l[2],p=l[3],v=f.length,m=[],g=[],b=r+1;for(a=0;a<b;++a){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a)*d[o];for(m.push(u),s=new Float64Array(b),i=0;i<b;++i){for(o=0,u=0;o<v;++o)u+=Math.pow(f[o],a+i);s[i]=u}g.push(s)}g.push(m);var y=function(e){var t,n,r,a,i,o=e.length-1,u=[];for(t=0;t<o;++t){for(a=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][a])&&(a=n);for(r=t;r<o+1;++r)i=e[r][t],e[r][t]=e[r][a],e[r][a]=i;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(i=0,r=n+1;r<o;++r)i+=e[r][n]*u[r];u[n]=(e[o][n]-i)/e[n][n]}return u}(g),x=function(e){e-=h;var t=p+y[0]+y[1]*e+y[2]*e*e;for(a=3;a<b;++a)t+=y[a]*Math.pow(e,a);return t};return{coef:Ma(b,y,-h,p),predict:x,rSquared:Sa(e,t,n,p,x)}}function Ma(e,t,n,r){var a,i,o,u,s=Array(e);for(a=0;a<e;++a)s[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,s[a]+=o,i=1;i<=a;++i)u*=(a+1-i)/i,s[a-i]+=o*Math.pow(n,i)*u;return s[0]+=r,s}function Da(e,t,n,r){for(var a=ka(e,t,n,!0),i=Object(Nr.a)(a,4),o=i[0],u=i[1],s=i[2],c=i[3],l=o.length,f=Math.max(2,~~(r*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1),v=-1;++v<=2;){for(var m=[0,f-1],g=0;g<l;++g){for(var b=o[g],y=m[0],x=m[1],_=b-o[y]>o[x]-b?y:x,w=0,k=0,O=0,S=0,j=0,E=1/Math.abs(o[_]-b||1),C=y;C<=x;++C){var A=o[C],T=u[C],N=Ia(Math.abs(b-A)*E)*p[C],M=A*N;w+=N,k+=M,O+=T*N,S+=T*M,j+=A*M}var D=wa(k/w,O/w,S/w,j/w),I=Object(Nr.a)(D,2),F=I[0],R=I[1];d[g]=F+R*b,h[g]=Math.abs(u[g]-d[g]),Fa(o,g+1,m)}if(2===v)break;var P=Vr(h);if(Math.abs(P)<1e-12)break;for(var L,B,z=0;z<l;++z)L=h[z]/(6*P),p[z]=L>=1?1e-12:(B=1-L*L)*B}return function(e,t,n,r){for(var a,i=e.length,o=[],u=0,s=0,c=[];u<i;++u)a=e[u]+n,c[0]===a?c[1]+=(t[u]-c[1])/++s:(s=0,c[1]+=r,c=[a,t[u]],o.push(c));return c[1]+=r,o}(o,d,s,c)}function Ia(e){return(e=1-e*e*e)*e*e}function Fa(e,t,n){var r=e[t],a=n[0],i=n[1]+1;if(!(i>=e.length))for(;t>a&&e[i]-r<=r-e[a];)n[0]=++a,n[1]=i,++i}var Ra=.1*Math.PI/180;function Pa(e,t,n,r){n=n||25,r=Math.max(n,r||200);var a=function(t){return[t,e(t)]},i=t[0],o=t[1],u=o-i,s=u/r,c=[a(i)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(a(i+f/n*u));return c.push(a(o)),c}l.push(a(o));for(var d=n;--d>0;)l.push(a(i+d/n*u));for(var h=c[0],p=l[l.length-1];p;){var v=a((h[0]+p[0])/2);v[0]-h[0]>=s&&La(h,v,p)>Ra?l.push(v):(h=p,c.push(p),l.pop()),p=l[l.length-1]}return c}function La(e,t,n){var r=Math.atan2(n[1]-e[1],n[0]-e[0]),a=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-a)}var Ba=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(a);++r<a;)i[r]=e+r*n;return i},za=n(316),Ua=n(36);function Wa(e){return e&&e.length?1===e.length?e[0]:(t=e,function(e){for(var n=t.length,r=1,a=String(t[0](e));r<n;++r)a+="|"+t[r](e);return a}):function(){return""};var t}function Va(e,t,n){return n||e+(t?"_"+t:"")}var Ga=function(){},qa={init:Ga,add:Ga,rem:Ga,idx:0},Ha={values:{init:function(e){return e.cell.store=!0},value:function(e){return e.cell.data.values()},idx:-1},count:{value:function(e){return e.cell.num}},__count__:{value:function(e){return e.missing+e.valid}},missing:{value:function(e){return e.missing}},valid:{value:function(e){return e.valid}},sum:{init:function(e){return e.sum=0},value:function(e){return e.sum},add:function(e,t){return e.sum+=+t},rem:function(e,t){return e.sum-=t}},product:{init:function(e){return e.product=1},value:function(e){return e.valid?e.product:void 0},add:function(e,t){return e.product*=t},rem:function(e,t){return e.product/=t}},mean:{init:function(e){return e.mean=0},value:function(e){return e.valid?e.mean:void 0},add:function(e,t){return e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:function(e,t){return e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}},average:{value:function(e){return e.valid?e.mean:void 0},req:["mean"],idx:1},variance:{init:function(e){return e.dev=0},value:function(e){return e.valid>1?e.dev/(e.valid-1):void 0},add:function(e,t){return e.dev+=e.mean_d*(t-e.mean)},rem:function(e,t){return e.dev-=e.mean_d*(t-e.mean)},req:["mean"],idx:1},variancep:{value:function(e){return e.valid>1?e.dev/e.valid:void 0},req:["variance"],idx:2},stdev:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0},req:["variance"],idx:2},stdevp:{value:function(e){return e.valid>1?Math.sqrt(e.dev/e.valid):void 0},req:["variance"],idx:2},stderr:{value:function(e){return e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0},req:["variance"],idx:2},distinct:{value:function(e){return e.cell.data.distinct(e.get)},req:["values"],idx:3},ci0:{value:function(e){return e.cell.data.ci0(e.get)},req:["values"],idx:3},ci1:{value:function(e){return e.cell.data.ci1(e.get)},req:["values"],idx:3},median:{value:function(e){return e.cell.data.q2(e.get)},req:["values"],idx:3},q1:{value:function(e){return e.cell.data.q1(e.get)},req:["values"],idx:3},q3:{value:function(e){return e.cell.data.q3(e.get)},req:["values"],idx:3},min:{init:function(e){return e.min=void 0},value:function(e){return e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min},add:function(e,t){(t<e.min||void 0===e.min)&&(e.min=t)},rem:function(e,t){t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:function(e){return e.max=void 0},value:function(e){return e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max},add:function(e,t){(t>e.max||void 0===e.max)&&(e.max=t)},rem:function(e,t){t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:function(e){return e.argmin=void 0},value:function(e){return e.argmin||e.cell.data.argmin(e.get)},add:function(e,t,n){t<e.min&&(e.argmin=n)},rem:function(e,t){t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:function(e){return e.argmax=void 0},value:function(e){return e.argmax||e.cell.data.argmax(e.get)},add:function(e,t,n){t>e.max&&(e.argmax=n)},rem:function(e,t){t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},Xa=Object.keys(Ha);function Ya(e,t){return Ha[e](t)}function Ka(e,t){return e.idx-t.idx}function $a(){var e=this;this.valid=0,this.missing=0,this._ops.forEach((function(t){return t.init(e)}))}function Za(e,t){var n=this;null!=e&&""!==e?e===e&&(++this.valid,this._ops.forEach((function(r){return r.add(n,e,t)}))):++this.missing}function Ja(e,t){var n=this;null!=e&&""!==e?e===e&&(--this.valid,this._ops.forEach((function(r){return r.rem(n,e,t)}))):--this.missing}function Qa(e){var t=this;return this._out.forEach((function(n){return e[n.out]=n.value(t)})),e}function ei(e,t){var n=t||fr,r=function(e){var t={};return e.forEach((function(e){return t[e.name]=e})),e.forEach((function e(n){n.req&&n.req.forEach((function(n){t[n]||e(t[n]=Ha[n]())}))})),Object.values(t).sort(Ka)}(e),a=e.slice().sort(Ka);function i(e){this._ops=r,this._out=a,this.cell=e,this.init()}return i.prototype.init=$a,i.prototype.add=Za,i.prototype.rem=Ja,i.prototype.set=Qa,i.prototype.get=n,i.fields=e.map((function(e){return e.out})),i}function ti(e){this._key=e?lr(e):hn,this.reset()}Xa.forEach((function(e){Ha[e]=function(e,t){return function(n){return Or({name:e,out:n||e},qa,t)}}(e,Ha[e])}));var ni=ti.prototype;function ri(e){Zn.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ni.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},ni.add=function(e){this._add.push(e)},ni.rem=function(e){this._rem.push(e)},ni.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,a=this._rem,i=this._key,o=r.length,u=a.length,s=Array(o-u),c={};for(e=0;e<u;++e)c[i(a[e])]=1;for(e=0,t=0;e<o;++e)c[i(n=r[e])]?c[i(n)]=0:s[t++]=n;return this._rem=[],this._add=s},ni.distinct=function(e){for(var t,n=this.values(),r={},a=n.length,i=0;--a>=0;)Er(r,t=e(n[a])+"")||(r[t]=1,++i);return i},ni.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=function(e,t){var n,r,a,i,o,u=e.length,s=-1;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=a=r;break}if(s===u)return[-1,-1];for(i=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,i=s),a<r&&(a=r,o=s))}return[i,o]}(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},ni.argmin=function(e){return this.extent(e)[0]||{}},ni.argmax=function(e){return this.extent(e)[1]||{}},ni.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},ni.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},ni.quartile=function(e){return this._get===e&&this._q||(this._q=Xr(this.values(),e),this._get=e),this._q},ni.q1=function(e){return this.quartile(e)[0]},ni.q2=function(e){return this.quartile(e)[1]},ni.q3=function(e){return this.quartile(e)[2]},ni.ci=function(e){return this._get===e&&this._ci||(this._ci=Jr(this.values(),1e3,.05,e),this._get=e),this._ci},ni.ci0=function(e){return this.ci(e)[0]},ni.ci1=function(e){return this.ci(e)[1]},ri.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Xa},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Tr(ri,Zn,{transform:function(e,t){var n=this,r=this,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return r.stamp=a.stamp,r.value&&(i||t.modified(r._inputs,!0))?(r._prev=r.value,r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(r.value=r.value||r.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),a.modifies(r._outputs),r._drop=!1!==e.drop,e.cross&&r._dims.length>1&&(r._drop=!1,r.cross()),t.clean()&&r._drop&&a.clean(!0).runAfter((function(){return n.clean()})),r.changes(a)},cross:function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),a=n.length;function i(e){var t,i,o,u;for(t in e)for(o=e[t].tuple,i=0;i<a;++i)r[i][u=o[n[i]]]=u}i(e._prev),i(t),function i(o,u,s){var c=n[s],l=r[s++];for(var f in l){var d=o?o+"|"+f:f;u[c]=l[f],s<a?i(d,u,s):t[d]||e.cell(d,u)}}("",{},0)},init:function(e){var t=this._inputs=[],n=this._outputs=[],r={};function a(e){for(var n,a=gr(ar(e)),i=a.length,o=0;o<i;++o)r[n=a[o]]||(r[n]=1,t.push(n))}this._dims=gr(e.groupby),this._dnames=this._dims.map((function(e){var t=rr(e);return a(e),n.push(t),t})),this.cellkey=e.key?e.key:Wa(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var i,o,u,s,c,l,f=e.fields||[null],d=e.ops||["count"],h=e.as||[],p=f.length,v={};for(p!==d.length&&sr("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)i=f[l],o=d[l],null==i&&"count"!==o&&sr("Null aggregate field specified."),c=Va(o,s=rr(i),h[l]),n.push(c),"count"!==o?((u=v[s])||(a(i),(u=v[s]=[]).field=i,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Ya(o,c))):this._counts.push(c);return this._measures=this._measures.map((function(e){return ei(e,e.field)})),{}},cellkey:Wa(),cell:function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r=this._measures,a=r.length;n.agg=Array(a);for(var i=0;i<a;++i)n.agg[i]=new r[i](n)}return n.store&&(n.data=new ti),n},newtuple:function(e,t){for(var n=this._dnames,r=this._dims,a=r.length,i={},o=0;o<a;++o)i[n[o]]=r[o](e);return t?bn(t.tuple,i):vn(i)},clean:function(){var e=this.value;for(var t in e)0===e[t].num&&delete e[t]},add:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,!this._countOnly){n.store&&n.data.add(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].add(r[a].get(e),e)}},rem:function(e){var t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,!this._countOnly){n.store&&n.data.rem(e);for(var r=n.agg,a=0,i=r.length;a<i;++a)r[a].rem(r[a].get(e),e)}},celltuple:function(e){var t=e.tuple,n=this._counts;e.store&&e.data.values();for(var r=0,a=n.length;r<a;++r)t[n[r]]=e.num;if(!this._countOnly)for(var i=e.agg,o=0,u=i.length;o<u;++o)i[o].set(t);return t},changes:function(e){var t,n,r,a,i=this._adds,o=this._mods,u=this._prev,s=this._drop,c=e.add,l=e.rem,f=e.mod;if(u)for(n in u)t=u[n],s&&!t.num||l.push(t.tuple);for(r=0,a=this._alen;r<a;++r)c.push(this.celltuple(i[r])),i[r]=null;for(r=0,a=this._mlen;r<a;++r)(0===(t=o[r]).num&&s?l:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e}});function ai(e){Zn.call(this,null,e)}function ii(e,t,n){var r=e,a=t||[],i=n||[],o={},u=0;return{add:function(e){return i.push(e)},remove:function(e){return o[r(e)]=++u},size:function(){return a.length},data:function(e,t){return u&&(a=a.filter((function(e){return!o[r(e)]})),o={},u=0),t&&e&&a.sort(e),i.length&&(a=e?function(e,t,n,r){var a=t.length,i=n.length;if(!i)return t;if(!a)return n;for(var o=r||new t.constructor(a+i),u=0,s=0,c=0;u<a&&s<i;++c)o[c]=e(t[u],n[s])>0?n[s++]:t[u++];for(;u<a;++u,++c)o[c]=t[u];for(;s<i;++s,++c)o[c]=n[s];return o}(e,a,i.sort(e)):a.concat(i),i=[]),a}}}function oi(e){Zn.call(this,[],e)}function ui(e){jn.call(this,null,si,e)}function si(e){return this.value&&!e.modified()?this.value:function(e,t,n){n=n||{},t=gr(t)||[];var r=[],a=[],i={},o=n.comparator||xr;return gr(e).forEach((function(e,o){null!=e&&(r.push("descending"===t[o]?-1:1),a.push(e=br(e)?e:lr(e,null,n)),(ar(e)||[]).forEach((function(e){return i[e]=1})))})),0===a.length?null:nr(o(a,r),Object.keys(i))}(e.fields,e.orders)}function ci(e){Zn.call(this,null,e)}function li(e){Zn.call(this,null,e)}ai.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Tr(ai,Zn,{transform:function(e,t){var n,r=!1!==e.interval,a=this._bins(e),i=a.start,o=a.step,u=e.as||["bin0","bin1"],s=u[0],c=u[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(ar(e.field))?t.ADD_MOD:t.ADD,t.visit(n,r?function(e){var t=a(e);e[s]=t,e[c]=null==t?null:i+o*(1+(t-i)/o)}:function(e){return e[s]=a(e)}),t.modifies(r?u:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,a=Kr(e),i=a.step,o=a.start,u=o+Math.ceil((a.stop-o)/i)*i;null!=(t=e.anchor)&&(n=t-(o+i*Math.floor((t-o)/i)),o+=n,u+=n);var s=function(e){var t=mr(r(e));return null==t?null:t<o?-1/0:t>u?1/0:(t=Math.max(o,Math.min(t,u-i)),o+i*Math.floor(1e-14+(t-o)/i))};return s.start=o,s.stop=a.stop,s.step=i,this.value=nr(s,ar(r),e.name||"bin_"+rr(r))}}),oi.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Tr(oi,Zn,{transform:function(e,t){var n=t.fork(t.ALL),r=ii(hn,this.value,n.materialize(n.ADD).add),a=e.sort,i=t.changed()||a&&(e.modified("sort")||t.modified(a.fields));return n.visit(n.REM,r.remove),this.modified(i),this.value=n.source=r.data(yn(a),i),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),Tr(ui,jn),ci.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},Tr(ci,Zn,{transform:function(e,t){var n=function(t){return function(n){for(var r,a=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(u(n),e.case,i)||[],s=0,c=a.length;s<c;++s)o.test(r=a[s])||t(r)}},r=this._parameterCheck(e,t),a=this._counts,i=this._match,o=this._stop,u=e.field,s=e.as||["text","count"],c=n((function(e){return a[e]=1+(a[e]||0)})),l=n((function(e){return a[e]-=1}));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,s)},_parameterCheck:function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){var n,r,a,i=this._counts,o=this._tuples||(this._tuples={}),u=t[0],s=t[1],c=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in i)r=o[n],a=i[n]||0,!r&&a?(o[n]=r=vn({}),r[u]=n,r[s]=a,c.add.push(r)):0===a?(r&&c.rem.push(r),i[n]=null,o[n]=null):r[s]!==a&&(r[s]=a,c.mod.push(r));return c.modifies(t)}}),li.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Tr(li,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],a=r[0],i=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter"),u=this.value;return o?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var a,i,o=[],u={},s=e.length,c=0;c<s;++c)for(u[t]=i=e[c],a=0;a<s;++a)u[n]=e[a],r(u)&&(o.push(vn(u)),(u={})[t]=i);return o}(u,a,i,e.filter||hr)):n.mod=u,n.source=this.value,n.modifies(r)}});var fi={kde:la,mixture:ma,normal:ca,lognormal:va,uniform:_a},di="function";function hi(e,t){var n=e.function;Er(fi,n)||sr("Unknown distribution function: "+n);var r=fi[n]();for(var a in e)"field"===a?r.data((e.from||t()).map(e[a])):"distributions"===a?r[a](e[a].map((function(e){return hi(e,t)}))):typeof r[a]===di&&r[a](e[a]);return r}function pi(e){Zn.call(this,null,e)}var vi=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],mi={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:vi},{name:"weights",type:"number",array:!0}]};function gi(e,t){return e?e.map((function(e,n){return t[n]||rr(e)})):null}function bi(e,t,n){var r,a,i,o,u,s,c=[],l=function(e){return e(o)};if(null==t)c.push(e.map(n));else for(r={},a=0,i=e.length;a<i;++a)o=e[a],(s=r[u=t.map(l)])||(r[u]=s=[],s.dims=u,c.push(s)),s.push(n(o));return c}pi.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:vi.concat(mi)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Tr(pi,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=hi(e.distribution,function(e){return function(){return e.materialize(e.SOURCE).source}}(t)),a=e.steps||e.minsteps||25,i=e.steps||e.maxsteps||200,o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&sr("Invalid density method: "+o),e.extent||r.data||sr("Missing density extent parameter."),o=r[o];var u=e.as||["value","density"],s=Pa(o,e.extent||Sr(r.data()),a,i).map((function(e){var t={};return t[u[0]]=e[0],t[u[1]]=e[1],vn(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});function yi(e){Zn.call(this,null,e)}yi.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};var xi=function(e,t){return((n=Sr(e,t))&&vr(n)-n[0]||0)/30;var n};function _i(e){jn.call(this,null,wi,e),this.modified(!0)}function wi(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:nr((function(n){return t(n,e)}),ar(t),rr(t))}function ki(e){Zn.call(this,[void 0,void 0],e)}function Oi(e,t){jn.call(this,e),this.parent=t,this.count=0}function Si(e){Zn.call(this,{},e),this._keys=Ar();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function ji(e){jn.call(this,null,Ei,e)}function Ei(e){return this.value&&!e.modified()?this.value:pr(e.name)?gr(e.name).map((function(e){return lr(e)})):lr(e.name,e.as)}function Ci(e){Zn.call(this,Ar(),e)}function Ai(e){Zn.call(this,[],e)}function Ti(e){Zn.call(this,[],e)}function Ni(e){Zn.call(this,null,e)}function Mi(e){Zn.call(this,[],e)}Tr(yi,Zn,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;for(var n,r=t.materialize(t.SOURCE).source,a=bi(t.source,e.groupby,fr),i=e.smooth||!1,o=e.field,u=e.step||xi(r,o),s=yn((function(e,t){return o(e)-o(t)})),c=e.as||"bin",l=a.length,f=1/0,d=-1/0,h=0;h<l;++h){var p=a[h].sort(s);n=-1;var v,m=Object(tr.a)(Qr(p,u,i,o));try{for(m.s();!(v=m.n()).done;){var g=v.value;g<f&&(f=g),g>d&&(d=g),p[++n][c]=g}}catch(b){m.e(b)}finally{m.f()}}return this.value={start:f,stop:d,step:u},t.reflow(!0).modifies(c)}}),Tr(_i,jn),ki.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Tr(ki,Zn,{transform:function(e,t){var n=this.value,r=e.field,a=t.changed()||t.modified(r.fields)||e.modified("field"),i=n[0],o=n[1];if((a||null==i)&&(i=1/0,o=-1/0),t.visit(a?t.SOURCE:t.ADD,(function(e){var t=mr(r(e));null!=t&&(t<i&&(i=t),t>o&&(o=t))})),!Number.isFinite(i)||!Number.isFinite(o)){var u=rr(r);u&&(u=' for field "'.concat(u,'"')),t.dataflow.warn("Infinite extent".concat(u,": [").concat(i,", ").concat(o,"]")),i=o=void 0}this.value=[i,o]}}),Tr(Oi,jn,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),Tr(Si,Zn,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){var a,i,o=this.value,u=Er(o,e)&&o[e];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(i=r||(i=this._group[e])&&i.tuple,a=n.dataflow,u=new Oi(n.fork(n.NO_SOURCE),this),a.add(u).connect(t(a,e,i)),o[e]=u,this.activate(u)),u},clean:function(){var e=this.value;for(var t in e)if(0===e[t].count){var n=e[t].detachSubflow;n&&n(),delete e[t]}},initTargets:function(){for(var e=this._targets,t=e.length,n=0;n<t&&null!=e[n];++n)e[n]=null;e.active=0},transform:function(e,t){var n=this,r=t.dataflow,a=e.key,i=e.subflow,o=this._keys,u=e.modified("key"),s=function(e){return n.subflow(e,i,t)};return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(function(e){var t=hn(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(function(e){var t=a(e);o.set(hn(e),t),s(t).add(e)})),u||t.modified(a.fields)?t.visit(t.MOD,(function(e){var t=hn(e),n=o.get(t),r=a(e);n===r?s(r).mod(e):(o.set(t,r),s(n).rem(e),s(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){s(o.get(hn(e))).mod(e)})),u&&t.visit(t.REFLOW,(function(e){var t=hn(e),n=o.get(t),r=a(e);n!==r&&(o.set(t,r),s(n).rem(e),s(r).add(e))})),t.clean()?r.runAfter((function(){n.clean(),o.clean()})):o.empty>r.cleanThreshold&&r.runAfter(o.clean),t}}),Tr(ji,jn),Ci.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Tr(Ci,Zn,{transform:function(e,t){var n=t.dataflow,r=this.value,a=t.fork(),i=a.add,o=a.rem,u=a.mod,s=e.expr,c=!0;function l(t){var n=hn(t),a=s(t,e),l=r.get(n);a&&l?(r.delete(n),i.push(t)):a||l?c&&a&&!l&&u.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(function(e){var t=hn(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(function(t){s(t,e)?i.push(t):r.set(hn(t),1)})),t.visit(t.MOD,l),e.modified()&&(c=!1,t.visit(t.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),a}}),Ai.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Tr(Ai,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=gi(r,e.as||[]),i=e.index||null,o=a.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,u,s,c=r.map((function(t){return t(e)})),l=c.reduce((function(e,t){return Math.max(e,t.length)}),0),f=0;f<l;++f){for(u=mn(e),t=0;t<o;++t)u[a[t]]=null==(s=c[t][f])?null:s;i&&(u[i]=f),n.add.push(u)}})),this.value=n.source=n.add,i&&n.modifies(i),n.modifies(a)}}),Ti.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Tr(Ti,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,a=r.map(rr),i=e.as||["key","value"],o=i[0],u=i[1],s=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,i=0;i<s;++i)(t=mn(e))[o]=a[i],t[u]=r[i](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(i)}}),Ni.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Tr(Ni,Zn,{transform:function(e,t){var n=e.expr,r=e.as,a=e.modified(),i=e.initonly?t.ADD:a?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return a&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(i,(function(t){return t[r]=n(t,e)}))}}),Tr(Mi,Zn,{transform:function(e,t){var n,r,a,i=t.fork(t.ALL),o=e.generator,u=this.value,s=e.size-u.length;if(s>0){for(n=[];--s>=0;)n.push(a=vn(o(e))),u.push(a);i.add=i.add.length?i.materialize(i.ADD).add.concat(n):n}else r=u.slice(0,-s),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(r):r,u=u.slice(-s);return i.source=this.value=u,i}});var Di={value:"value",median:Vr,mean:function(e,t){var n=0,r=0;if(void 0===t){var a,i=Object(tr.a)(e);try{for(i.s();!(a=i.n()).done;){var o=a.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(f){i.e(f)}finally{i.f()}}else{var u,s=-1,c=Object(tr.a)(e);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=t(l,++s,e))&&(l=+l)>=l&&(++n,r+=l)}}catch(f){c.e(f)}finally{c.f()}}if(n)return r/n},min:Ir,max:Dr},Ii=[];function Fi(e){Zn.call(this,[],e)}function Ri(e){ri.call(this,e)}function Pi(e){Zn.call(this,null,e)}function Li(e){jn.call(this,null,Bi,e)}function Bi(e){return this.value&&!e.modified()?this.value:function(e,t,n){e&&(e=t?gr(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):gr(e));var r,a=e&&e.length,i=n&&n.get||ir,o=function(e){return i(t?[e]:cr(e))};if(a)if(1===a){var u=o(e[0]);r=function(e){return""+u(e)}}else{var s=e.map(o);r=function(e){for(var t=""+s[0](e),n=0;++n<a;)t+="|"+s[n](e);return t}}else r=function(){return""};return nr(r,e,"key")}(e.fields,e.flat)}function zi(e){Zn.call(this,[],e),this._pending=null}function Ui(e,t,n){n.forEach(vn);var r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Wi(e){Zn.call(this,{},e)}function Vi(e){jn.call(this,null,Gi,e)}function Gi(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.extents,a=r.length,i=1/0,o=-1/0;for(t=0;t<a;++t)(n=r[t])[0]<i&&(i=n[0]),n[1]>o&&(o=n[1]);return[i,o]}function qi(e){jn.call(this,null,Hi,e)}function Hi(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Xi(e){Zn.call(this,null,e)}function Yi(e){ri.call(this,e)}function Ki(e){Si.call(this,e)}function $i(e){Zn.call(this,null,e)}function Zi(e){Zn.call(this,null,e)}function Ji(e){Zn.call(this,null,e)}Fi.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Tr(Fi,Zn,{transform:function(e,t){var n,r,a,i,o,u,s,c,l,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||Di.value;if(null!=Di[n])return n===Di.value?(t=void 0!==e.value?e.value:0,function(){return t}):Di[n];sr("Unrecognized imputation method: "+n)}(e),p=function(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),v=rr(e.field),m=rr(e.key),g=(e.groupby||[]).map(rr),b=function(e,t,n,r){var a,i,o,u,s,c,l,f,d=function(e){return e(f)},h=[],p=r?r.slice():[],v={},m={};for(p.forEach((function(e,t){return v[e]=t+1})),u=0,l=e.length;u<l;++u)c=n(f=e[u]),s=v[c]||(v[c]=p.push(c)),(o=m[i=(a=t?t.map(d):Ii)+""])||(o=m[i]=[],h.push(o),o.values=a),o[s-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),y=[],x=this.value,_=b.domain.length;for(o=0,c=b.length;o<c;++o)for(a=(n=b[o]).values,r=NaN,s=0;s<_;++s)if(null==n[s]){for(i=b.domain[s],f={_impute:!0},u=0,l=a.length;u<l;++u)f[g[u]]=a[u];f[m]=i,f[v]=Number.isNaN(r)?r=h(n,p):r,y.push(vn(f))}return y.length&&(d.add=d.materialize(d.ADD).add.concat(y)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=y,d}}),Ri.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Xa},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Tr(Ri,ri,{transform:function(e,t){var n,r=this,a=e.modified();return r.value&&(a||t.modified(r._inputs,!0))?(n=r.value=a?r.init(e):{},t.visit(t.SOURCE,(function(e){return r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){return r.rem(e)})),t.visit(t.ADD,(function(e){return r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Or(e,n[r.cellkey(e)].tuple)})),t.reflow(a).modifies(this._outputs)},changes:function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0}}),Pi.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Tr(Pi,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,a=bi(r,e.groupby,e.field),i=(e.groupby||[]).map(rr),o=e.bandwidth,u=e.cumulative?"cdf":"pdf",s=e.as||["value","density"],c=[],l=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==u&&"cdf"!==u&&sr("Invalid density method: "+u),"shared"===e.resolve&&(l||(l=Sr(r,e.field)),f=d=e.steps||d),a.forEach((function(t){var n=la(t,o)[u],r=e.counts?t.length:1;Pa(n,l||Sr(t),f,d).forEach((function(e){for(var n={},a=0;a<i.length;++a)n[i[a]]=t.dims[a];n[s[0]]=e[0],n[s[1]]=e[1]*r,c.push(vn(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),Tr(Li,jn),Tr(zi,Zn,{transform:function(e,t){var n=this,r=t.dataflow;return this._pending?Ui(this,t,this._pending):function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e)?t.StopPropagation:e.values?Ui(this,t,r.parse(e.values,e.format)):e.async?{async:r.request(e.url,e.format).then((function(e){return n._pending=gr(e.data),function(e){return e.touch(n)}}))}:r.request(e.url,e.format).then((function(e){return Ui(n,t,gr(e.data))}))}}),Wi.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Tr(Wi,Zn,{transform:function(e,t){var n,r,a=e.fields,i=e.index,o=e.values,u=null==e.default?null:e.default,s=e.modified(),c=a.length,l=s?t.SOURCE:t.ADD,f=t,d=e.as;return o?(r=o.length,c>1&&!d&&sr('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==c*r&&sr('The "as" parameter has too few output field names.'),d=d||o.map(rr),n=function(e){for(var t,n,s=0,l=0;s<c;++s)if(null==(n=i.get(a[s](e))))for(t=0;t<r;++t,++l)e[d[l]]=u;else for(t=0;t<r;++t,++l)e[d[l]]=o[t](n)}):(d||sr("Missing output field names."),n=function(e){for(var t,n=0;n<c;++n)t=i.get(a[n](e)),e[d[n]]=null==t?u:t}),s?f=t.reflow(!0):l|=a.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(l,n),f.modifies(d)}}),Tr(Vi,jn),Tr(qi,jn),Tr(Xi,Zn,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Yi.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Xa,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Tr(Yi,ri,{_transform:ri.prototype.transform,transform:function(e,t){return this._transform(function(e,t){var n=e.field,r=e.value,a=("count"===e.op?"__count__":e.op)||"sum",i=ar(n).concat(ar(r)),o=function(e,t,n){var r={},a=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,a.push(n))})),a.sort(yr),t?a.slice(0,t):a}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return a})),fields:o.map((function(e){return function(e,t,n,r){return nr((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,i)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)}}),Tr(Ki,Si,{transform:function(e,t){var n=this,r=e.subflow,a=e.field,i=function(e){return n.subflow(hn(e),r,t,e)};return(e.modified("field")||a&&t.modified(ar(a)))&&sr("PreFacet does not support field modification."),this.initTargets(),a?(t.visit(t.MOD,(function(e){var t=i(e);a(e).forEach((function(e){return t.mod(e)}))})),t.visit(t.ADD,(function(e){var t=i(e);a(e).forEach((function(e){return t.add(vn(e))}))})),t.visit(t.REM,(function(e){var t=i(e);a(e).forEach((function(e){return t.rem(e)}))}))):(t.visit(t.MOD,(function(e){return i(e).mod(e)})),t.visit(t.ADD,(function(e){return i(e).add(e)})),t.visit(t.REM,(function(e){return i(e).rem(e)}))),t.clean()&&t.runAfter((function(){return n.clean()})),t}}),$i.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Tr($i,Zn,{transform:function(e,t){var n,r=t.fork(t.NO_SOURCE),a=e.fields,i=gi(e.fields,e.as||[]),o=a?function(e,t){return function(e,t,n,r){for(var a=0,i=n.length;a<i;++a)t[r[a]]=n[a](e);return t}(e,t,a,i)}:gn;return this.value?n=this.value:(t=t.addAll(),n=this.value={}),t.visit(t.REM,(function(e){var t=hn(e);r.rem.push(n[t]),n[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,vn({}));n[hn(e)]=t,r.add.push(t)})),t.visit(t.MOD,(function(e){r.mod.push(o(e,n[hn(e)]))})),r}}),Tr(Zi,Zn,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),Ji.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function Qi(e){Zn.call(this,null,e)}function eo(e){Zn.call(this,[],e),this.count=0}function to(e){Zn.call(this,null,e)}function no(e){Zn.call(this,null,e),this.modified(!0)}function ro(e){Zn.call(this,null,e)}Tr(Ji,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;var a=bi(t.materialize(t.SOURCE).source,e.groupby,e.field),i=(e.groupby||[]).map(rr),o=[],u=e.step||.01,s=e.probs||Ba(u/2,1-1e-14,u),c=s.length;return a.forEach((function(e){for(var t=Hr(e,s),n=0;n<c;++n){for(var a={},u=0;u<i.length;++u)a[i[u]]=e.dims[u];a[r[0]]=s[n],a[r[1]]=t[n],o.push(vn(a))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),Tr(Qi,Zn,{transform:function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=hn(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=mn(e);r[hn(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){var t=r[hn(e)];for(var a in e)t[a]=e[a],n.modifies(a);n.mod.push(t)}))),n}}),eo.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Tr(eo,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),a=e.size,i=this.value.reduce((function(e,t){return e[hn(t)]=1,e}),{}),o=this.value,u=this.count,s=0;function c(e){var t,r;o.length<a?o.push(e):(r=~~((u+1)*$r()))<o.length&&r>=s&&(t=o[r],i[hn(t)]&&n.rem.push(t),o[r]=e),++u}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=hn(e);i[t]&&(i[t]=-1,n.rem.push(e)),--u})),o=o.filter((function(e){return-1!==i[hn(e)]}))),(t.rem.length||r)&&o.length<a&&t.source&&(s=u=o.length,t.visit(t.SOURCE,(function(e){i[hn(e)]||c(e)})),s=-1),r&&o.length>a){for(var l=o.length-a,f=0;f<l;++f)i[hn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(l)}return t.mod.length&&t.visit(t.MOD,(function(e){i[hn(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,c),(t.add.length||s<0)&&(n.add=o.filter((function(e){return!i[hn(e)]}))),this.count=u,this.value=n.source=o,n}}),to.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Tr(to,Zn,{transform:function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ba(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,vn(t)})),n.add=t.add.concat(this.value),n}}}),Tr(no,Zn,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});var ao=["unit0","unit1"];function io(e){Zn.call(this,Ar(),e)}function oo(e){Zn.call(this,null,e)}ro.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Ua.j,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ao}]},Tr(ro,Zn,{transform:function(e,t){var n=e.field,r=!1!==e.interval,a="utc"===e.timezone,i=this._floor(e,t),o=(a?Ua.v:Ua.p)(i.unit).offset,u=e.as||ao,s=u[0],c=u[1],l=i.step,f=i.start||1/0,d=i.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(ar(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(function(e){var t,a,u=n(e);null==u?(e[s]=null,r&&(e[c]=null)):(e[s]=t=a=i(u),r&&(e[c]=a=o(t,l)),t<f&&(f=t),a>d&&(d=a))})),i.start=f,i.stop=d,t.modifies(r?u:s)},_floor:function(e,t){var n="utc"===e.timezone,r=e.units?{units:e.units,step:e.step||1}:Object(Ua.n)({extent:e.extent||Sr(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=r.units,i=r.step,o=Object(Ua.t)(a),u=this.value||{},s=(n?Ua.u:Ua.o)(o,i);return s.unit=vr(o),s.units=o,s.step=i,s.start=u.start,s.stop=u.stop,this.value=s}}),Tr(io,Zn,{transform:function(e,t){var n=t.dataflow,r=e.field,a=this.value,i=function(e){return a.set(r(e),e)},o=!0;return e.modified("field")||t.modified(r.fields)?(a.clear(),t.visit(t.SOURCE,i)):t.changed()?(t.visit(t.REM,(function(e){return a.delete(r(e))})),t.visit(t.ADD,i)):o=!1,this.modified(o),a.empty>n.cleanThreshold&&n.runAfter(a.clean),t.fork()}}),Tr(oo,Zn,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(yn(e.sort)):t.source).map(e.field))}});var uo={row_number:function(){return{next:function(e){return e.index+1}}},rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){var e;return{init:function(){return e=1},next:function(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){var e=uo.rank(),t=e.next;return{init:e.init,next:function(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function(){var e;return{init:function(){return e=0},next:function(t){var n=t.data,r=t.compare,a=t.index;if(e<a){for(;a+1<n.length&&!r(n[a],n[a+1]);)++a;e=a}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||sr("ntile num must be greater than zero.");var n=uo.cume_dist(),r=n.next;return{init:n.init,next:function(e){return Math.ceil(t*r(e))}}},lag:function(e,t){return t=+t||1,{next:function(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:function(n){var r=n.index+t,a=n.data;return r<a.length?e(a[r]):null}}},first_value:function(e){return{next:function(t){return e(t.data[t.i0])}}},last_value:function(e){return{next:function(t){return e(t.data[t.i1-1])}}},nth_value:function(e,t){return(t=+t)>0||sr("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){var t;return{init:function(){return t=null},next:function(n){var r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){var t,n;return{init:function(){return t=null,n=-1},next:function(r){var a=r.data;return r.index<=n?t:(n=function(e,t,n){for(var r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,a,r.index))<0?(n=a.length,t=null):t=e(a[n])}}}};var so=Object.keys(uo);function co(e){var t=gr(e.ops),n=gr(e.fields),r=gr(e.params),a=gr(e.as),i=this.outputs=[],o=this.windows=[],u={},s={},c=[],l=[],f=!0;function d(e){gr(ar(e)).forEach((function(e){return u[e]=1}))}d(e.sort),t.forEach((function(e,t){var u=n[t],h=rr(u),p=Va(e,h,a[t]);if(d(u),i.push(p),Er(uo,e))o.push(function(e,t,n,r){var a=uo[e](t,n);return{init:a.init||dr,update:function(e,t){t[r]=a.next(e)}}}(e,n[t],r[t],p));else{if(null==u&&"count"!==e&&sr("Null aggregate field specified."),"count"===e)return void c.push(p);f=!1;var v=s[h];v||((v=s[h]=[]).field=u,l.push(v)),v.push(Ya(e,p))}})),(c.length||l.length)&&(this.cell=function(e,t,n){e=e.map((function(e){return ei(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var a=e.length,i=r.agg=Array(a),o=0;o<a;++o)i[o]=new e[o](r);if(r.store)var u=r.data=new ti;return r.add=function(e){if(r.num+=1,!n){u&&u.add(e);for(var t=0;t<a;++t)i[t].add(i[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){u&&u.rem(e);for(var t=0;t<a;++t)i[t].rem(i[t].get(e),e)}},r.set=function(e){var a,o;for(u&&u.values(),a=0,o=t.length;a<o;++a)e[t[a]]=r.num;if(!n)for(a=0,o=i.length;a<o;++a)i[a].set(e)},r.init=function(){r.num=0,u&&u.reset();for(var e=0;e<a;++e)i[e].init()},r}(l,c,f)),this.inputs=Object.keys(u)}var lo=co.prototype;function fo(e){Zn.call(this,{},e),this._mlen=0,this._mods=[]}function ho(e,t,n,r){var a=r.sort,i=a&&!r.ignorePeers,o=r.frame||[null,0],u=e.data(n),s=u.length,c=i?Object(za.a)(a):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:a||kr(-1)};t.init();for(var f=0;f<s;++f)po(l,o,f,s),i&&vo(l,c),t.update(l,u[f])}function po(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function vo(e,t){var n=e.i0,r=e.i1-1,a=e.compare,i=e.data,o=i.length-1;n>0&&!a(i[n],i[n-1])&&(e.i0=t.left(i,i[n])),r<o&&!a(i[r],i[r+1])&&(e.i1=t.right(i,i[r]))}lo.init=function(){this.windows.forEach((function(e){return e.init()})),this.cell&&this.cell.init()},lo.update=function(e,t){var n,r=this.cell,a=this.windows,i=e.data,o=a&&a.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(i[n]);for(n=e.p1;n<e.i1;++n)r.add(i[n]);r.set(t)}for(n=0;n<o;++n)a[n].update(e,t)},fo.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:so.concat(Xa)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Tr(fo,Zn,{transform:function(e,t){var n=this;this.stamp=t.stamp;var r=e.modified(),a=yn(e.sort),i=Wa(e.groupby),o=function(e){return n.group(i(e))},u=this.state;u&&!r||(u=this.state=new co(e)),r||t.modified(u.inputs)?(this.value={},t.visit(t.SOURCE,(function(e){return o(e).add(e)}))):(t.visit(t.REM,(function(e){return o(e).remove(e)})),t.visit(t.ADD,(function(e){return o(e).add(e)})));for(var s=0,c=this._mlen;s<c;++s)ho(this._mods[s],u,a,e);return this._mlen=0,this._mods=[],t.reflow(r).modifies(u.outputs)},group:function(e){var t=this.value[e];return t||(t=this.value[e]=ii(hn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});var mo=n(12),go=n(19);function bo(e,t,n){return e.fields=t||[],e.fname=n,e}function yo(e){return 1===e.length?xo(e[0]):_o(e)}var xo=function(e){return function(t){return t[e]}},_o=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function wo(e){throw Error(e)}function ko(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||wo("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&wo("Access path missing closing bracket: "+e),o&&wo("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function Oo(e,t,n){var r=ko(e);return e=1===r.length?r[0]:e,bo((n&&n.get||yo)(r),[e],t||e)}Oo("id"),bo((function(e){return e}),[],"identity"),bo((function(){return 0}),[],"zero"),bo((function(){return 1}),[],"one");var So=bo((function(){return!0}),[],"true");bo((function(){return!1}),[],"false");var jo=Array.isArray;function Eo(e){return e===Object(e)}function Co(e){return e[e.length-1]}function Ao(e){return null==e||""===e?null:+e}function To(e){return null!=e?jo(e)?e:[e]:[]}function No(e){return"function"===typeof e}function Mo(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var Do=Object.prototype.hasOwnProperty;function Io(e,t){return Do.call(e,t)}function Fo(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,Mo(r,n)}function Ro(e){return"string"===typeof e}function Po(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function Lo(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Bo(e){this._context=e}Bo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var zo=function(){};function Uo(e){this._context=e}Uo.prototype={areaStart:zo,areaEnd:zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wo(e){this._context=e}Wo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vo(e,t){this._basis=new Bo(e),this._beta=t}Vo.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Go=function e(t){function n(e){return 1===t?new Bo(e):new Vo(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function qo(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ho(e,t){this._context=e,this._k=(1-t)/6}Ho.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qo(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:qo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Xo=function e(t){function n(e){return new Ho(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Yo(e,t){this._context=e,this._k=(1-t)/6}Yo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ko=function e(t){function n(e){return new Yo(e,t)}return n.tension=function(t){return e(+t)},n}(0);function $o(e,t){this._context=e,this._k=(1-t)/6}$o.prototype={areaStart:zo,areaEnd:zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Zo=function e(t){function n(e){return new $o(e,t)}return n.tension=function(t){return e(+t)},n}(0),Jo=Math.abs,Qo=Math.atan2,eu=Math.cos,tu=Math.max,nu=Math.min,ru=Math.sin,au=Math.sqrt,iu=1e-12,ou=Math.PI,uu=ou/2,su=2*ou;function cu(e){return e>1?0:e<-1?ou:Math.acos(e)}function lu(e){return e>=1?uu:e<=-1?-uu:Math.asin(e)}function fu(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>iu){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>iu){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function du(e,t){this._context=e,this._alpha=t}du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:fu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var hu=function e(t){function n(e){return t?new du(e,t):new Ho(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function pu(e,t){this._context=e,this._alpha=t}pu.prototype={areaStart:zo,areaEnd:zo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:fu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var vu=function e(t){function n(e){return t?new pu(e,t):new $o(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function mu(e,t){this._context=e,this._alpha=t}mu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fu(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gu=function e(t){function n(e){return t?new mu(e,t):new Yo(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var yu=function(e){return new bu(e)};function xu(e){this._context=e}xu.prototype={areaStart:zo,areaEnd:zo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _u(e){return e<0?-1:1}function wu(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(_u(i)+_u(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function ku(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ou(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function Su(e){this._context=e}function ju(e){this._context=new Eu(e)}function Eu(e){this._context=e}function Cu(e){this._context=e}function Au(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}Su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ou(this,this._t0,ku(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ou(this,ku(this,n=wu(this,e,t)),n);break;default:Ou(this,this._t0,n=wu(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ju.prototype=Object.create(Su.prototype)).point=function(e,t){Su.prototype.point.call(this,t,e)},Eu.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},Cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Au(e),a=Au(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Tu(e,t){this._context=e,this._t=t}Tu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Nu=Math.PI,Mu=2*Nu,Du=1e-6,Iu=Mu-Du;function Fu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ru(){return new Fu}Fu.prototype=Ru.prototype={constructor:Fu,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Du)if(Math.abs(l*u-s*c)>Du&&a){var d=n-i,h=r-o,p=u*u+s*s,v=d*d+h*h,m=Math.sqrt(p),g=Math.sqrt(f),b=a*Math.tan((Nu-Math.acos((p+f-v)/(2*m*g)))/2),y=b/g,x=b/m;Math.abs(y-1)>Du&&(this._+="L"+(e+y*c)+","+(t+y*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>c*h)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>Du||Math.abs(this._y1-c)>Du)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%Mu+Mu),f>Iu?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>Du&&(this._+="A"+n+","+n+",0,"+ +(f>=Nu)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Pu=Ru,Lu=function(e){return function(){return e}};function Bu(e){return e.innerRadius}function zu(e){return e.outerRadius}function Uu(e){return e.startAngle}function Wu(e){return e.endAngle}function Vu(e){return e&&e.padAngle}function Gu(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,d=f*s-l*c;if(!(d*d<iu))return[e+(d=(l*(t-i)-f*(e-a))/d)*s,t+d*c]}function qu(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/au(u*u+s*s),l=c*s,f=-c*u,d=e+l,h=t+f,p=n+l,v=r+f,m=(d+p)/2,g=(h+v)/2,b=p-d,y=v-h,x=b*b+y*y,_=a-i,w=d*v-p*h,k=(y<0?-1:1)*au(tu(0,_*_*x-w*w)),O=(w*y-b*k)/x,S=(-w*b-y*k)/x,j=(w*y+b*k)/x,E=(-w*b+y*k)/x,C=O-m,A=S-g,T=j-m,N=E-g;return C*C+A*A>T*T+N*N&&(O=j,S=E),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(a/_-1),y11:S*(a/_-1)}}Array.prototype.slice;var Hu=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)};function Xu(e){return e[0]}function Yu(e){return e[1]}var Ku=function(e,t){var n=Lu(!0),r=null,a=yu,i=null;function o(o){var u,s,c,l=(o=Hu(o)).length,f=!1;for(null==r&&(i=a(c=Pu())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?Xu:Lu(e),t="function"===typeof t?t:void 0===t?Yu:Lu(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:Lu(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Lu(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:Lu(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},$u=function(e,t,n){var r=null,a=Lu(!0),i=null,o=yu,u=null;function s(s){var c,l,f,d,h,p=(s=Hu(s)).length,v=!1,m=new Array(p),g=new Array(p);for(null==i&&(u=o(h=Pu())),c=0;c<=p;++c){if(!(c<p&&a(d=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(m[f],g[f]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+e(d,c,s),g[c]=+t(d,c,s),u.point(r?+r(d,c,s):m[c],n?+n(d,c,s):g[c]))}if(h)return u=null,h+""||null}function c(){return Ku().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?Xu:Lu(+e),t="function"===typeof t?t:Lu(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Yu:Lu(+n),s.x=function(t){return arguments.length?(e="function"===typeof t?t:Lu(+t),r=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:Lu(+t),s):e},s.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Lu(+e),s):r},s.y=function(e){return arguments.length?(t="function"===typeof e?e:Lu(+e),n=null,s):t},s.y0=function(e){return arguments.length?(t="function"===typeof e?e:Lu(+e),s):t},s.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Lu(+e),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:Lu(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s},Zu={draw:function(e,t){var n=Math.sqrt(t/ou);e.moveTo(n,0),e.arc(0,0,n,0,su)}},Ju=(Math.sqrt(1/3),Math.sin(ou/10)/Math.sin(7*ou/10));Math.sin(su/10),Math.cos(su/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function Qu(e,t){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}var es=function(){return"undefined"!==typeof Image?Image:null},ts=Object(za.a)(Mr.a),ns=ts.right,rs=ts.left,as=(Object(za.a)(Lr).center,ns);function is(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function os(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}var us=Symbol("implicit");function ss(){var e=new Map,t=[],n=[],r=us;function a(a){var i=a+"",o=e.get(i);if(!o){if(r!==us)return r;e.set(i,o=t.push(a))}return n[(o-1)%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,i=Object(tr.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=o+"";e.has(u)||e.set(u,t.push(o))}}catch(s){i.e(s)}finally{i.f()}return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return ss(t,n).unknown(r)},is.apply(a,arguments),a}var cs=n(614),ls=n(114);function fs(e,t,n,r){var a,i=Object(cs.c)(e,t,n);switch((r=Object(ls.formatSpecifier)(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=Object(ls.precisionPrefix)(i,o))||(r.precision=a),Object(ls.formatPrefix)(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=Object(ls.precisionRound)(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=Object(ls.precisionFixed)(i))||(r.precision=a-2*("%"===r.type))}return Object(ls.format)(r)}var ds=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function hs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ps(){}var vs=.7,ms=1/vs,gs="\\s*([+-]?\\d+)\\s*",bs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ys="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xs=/^#([0-9a-f]{3,8})$/,_s=new RegExp("^rgb\\("+[gs,gs,gs]+"\\)$"),ws=new RegExp("^rgb\\("+[ys,ys,ys]+"\\)$"),ks=new RegExp("^rgba\\("+[gs,gs,gs,bs]+"\\)$"),Os=new RegExp("^rgba\\("+[ys,ys,ys,bs]+"\\)$"),Ss=new RegExp("^hsl\\("+[bs,ys,ys]+"\\)$"),js=new RegExp("^hsla\\("+[bs,ys,ys,bs]+"\\)$"),Es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cs(){return this.rgb().formatHex()}function As(){return this.rgb().formatRgb()}function Ts(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xs.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ns(t):3===n?new Fs(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ms(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ms(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=_s.exec(e))?new Fs(t[1],t[2],t[3],1):(t=ws.exec(e))?new Fs(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ks.exec(e))?Ms(t[1],t[2],t[3],t[4]):(t=Os.exec(e))?Ms(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ss.exec(e))?Bs(t[1],t[2]/100,t[3]/100,1):(t=js.exec(e))?Bs(t[1],t[2]/100,t[3]/100,t[4]):Es.hasOwnProperty(e)?Ns(Es[e]):"transparent"===e?new Fs(NaN,NaN,NaN,0):null}function Ns(e){return new Fs(e>>16&255,e>>8&255,255&e,1)}function Ms(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fs(e,t,n,r)}function Ds(e){return e instanceof ps||(e=Ts(e)),e?new Fs((e=e.rgb()).r,e.g,e.b,e.opacity):new Fs}function Is(e,t,n,r){return 1===arguments.length?Ds(e):new Fs(e,t,n,null==r?1:r)}function Fs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Rs(){return"#"+Ls(this.r)+Ls(this.g)+Ls(this.b)}function Ps(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ls(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Bs(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ws(e,t,n,r)}function zs(e){if(e instanceof Ws)return new Ws(e.h,e.s,e.l,e.opacity);if(e instanceof ps||(e=Ts(e)),!e)return new Ws;if(e instanceof Ws)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new Ws(o,u,s,e.opacity)}function Us(e,t,n,r){return 1===arguments.length?zs(e):new Ws(e,t,n,null==r?1:r)}function Ws(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Vs(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Gs(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}ds(ps,Ts,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Cs,formatHex:Cs,formatHsl:function(){return zs(this).formatHsl()},formatRgb:As,toString:As}),ds(Fs,Is,hs(ps,{brighter:function(e){return e=null==e?ms:Math.pow(ms,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?vs:Math.pow(vs,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rs,formatHex:Rs,formatRgb:Ps,toString:Ps})),ds(Ws,Us,hs(ps,{brighter:function(e){return e=null==e?ms:Math.pow(ms,e),new Ws(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?vs:Math.pow(vs,e),new Ws(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Fs(Vs(e>=240?e-240:e+120,a,r),Vs(e,a,r),Vs(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var qs=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return Gs((n-r/t)*t,o,a,i,u)}},Hs=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Gs((n-r/t)*t,a,i,o,u)}},Xs=function(e){return function(){return e}};function Ys(e,t){return function(n){return e+n*t}}function Ks(e,t){var n=t-e;return n?Ys(e,n>180||n<-180?n-360*Math.round(n/360):n):Xs(isNaN(e)?t:e)}function $s(e){return 1===(e=+e)?Zs:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Xs(isNaN(t)?n:t)}}function Zs(e,t){var n=t-e;return n?Ys(e,n):Xs(isNaN(e)?t:e)}var Js=function e(t){var n=$s(t);function r(e,t){var r=n((e=Is(e)).r,(t=Is(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=Zs(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Qs(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Is(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var ec=Qs(qs),tc=Qs(Hs),nc=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}};function rc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var ac=function(e,t){return(rc(t)?nc:ic)(e,t)};function ic(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=dc(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}var oc=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},uc=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},sc=function(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=dc(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}},cc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lc=new RegExp(cc.source,"g");var fc=function(e,t){var n,r,a,i=cc.lastIndex=lc.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=cc.exec(e))&&(r=lc.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:uc(n,r)})),i=lc.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},dc=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Xs(t):("number"===r?uc:"string"===r?(n=Ts(t))?(t=n,Js):fc:t instanceof Ts?Js:t instanceof Date?oc:rc(t)?nc:Array.isArray(t)?ic:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?sc:uc)(e,t)},hc=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}};function pc(e){return+e}var vc=[0,1];function mc(e){return e}function gc(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function bc(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=gc(a,r),i=n(o,i)):(r=gc(r,a),i=n(i,o)),function(e){return i(r(e))}}function yc(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=gc(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=as(e,t,1,r)-1;return i[n](a[n](t))}}function xc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _c(){var e,t,n,r,a,i,o=vc,u=vc,s=dc,c=mc;function l(){var e=Math.min(o.length,u.length);return c!==mc&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?yc:bc,a=i=null,f}function f(t){return isNaN(t=+t)?n:(a||(a=r(o.map(e),u,s)))(e(c(t)))}return f.invert=function(n){return c(t((i||(i=r(u,o.map(e),uc)))(n)))},f.domain=function(e){return arguments.length?(o=Array.from(e,pc),l()):o.slice()},f.range=function(e){return arguments.length?(u=Array.from(e),l()):u.slice()},f.rangeRound=function(e){return u=Array.from(e),s=hc,l()},f.clamp=function(e){return arguments.length?(c=!!e||mc,l()):c!==mc},f.interpolate=function(e){return arguments.length?(s=e,l()):s},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,l()}}function wc(){return _c()(mc,mc)}function kc(e){var t=e.domain;return e.ticks=function(e){var n=t();return Object(cs.a)(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return fs(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,i=t(),o=0,u=i.length-1,s=i[o],c=i[u],l=10;for(c<s&&(a=s,s=c,c=a,a=o,o=u,u=a);l-- >0;){if((a=Object(cs.b)(s,c,n))===r)return i[o]=s,i[u]=c,t(i);if(a>0)s=Math.floor(s/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;s=Math.ceil(s*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function Oc(){var e=wc();return e.copy=function(){return xc(e,Oc())},is.apply(e,arguments),kc(e)}function Sc(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,pc),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Sc(e).unknown(t)},e=arguments.length?Array.from(e,pc):[0,1],kc(n)}function jc(e,t){var n,r=0,a=(e=e.slice()).length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Ec(e){return Math.log(e)}function Cc(e){return Math.exp(e)}function Ac(e){return-Math.log(-e)}function Tc(e){return-Math.exp(-e)}function Nc(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Mc(e){return function(t){return-e(-t)}}function Dc(e){var t,n,r=e(Ec,Cc),a=r.domain,i=10;function o(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(i),n=function(e){return 10===e?Nc:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(i),a()[0]<0?(t=Mc(t),n=Mc(n),e(Ac,Tc)):e(Ec,Cc),r}return r.base=function(e){return arguments.length?(i=+e,o()):i},r.domain=function(e){return arguments.length?(a(e),o()):a()},r.ticks=function(e){var r,o=a(),u=o[0],s=o[o.length-1];(r=s<u)&&(d=u,u=s,s=d);var c,l,f,d=t(u),h=t(s),p=null==e?10:+e,v=[];if(!(i%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(l=1,c=n(d);l<i;++l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}}else for(;d<=h;++d)for(l=i-1,c=n(d);l>=1;--l)if(!((f=c*l)<u)){if(f>s)break;v.push(f)}2*v.length<p&&(v=Object(cs.a)(u,s,p))}else v=Object(cs.a)(d,h,Math.min(h-d,p)).map(n);return r?v.reverse():v},r.tickFormat=function(e,a){if(null==a&&(a=10===i?".0e":","),"function"!==typeof a&&(a=Object(ls.format)(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,i*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*i<i-.5&&(r*=i),r<=o?a(e):""}},r.nice=function(){return a(jc(a(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Ic(){var e=Dc(_c()).domain([1,10]);return e.copy=function(){return xc(e,Ic()).base(e.base())},is.apply(e,arguments),e}function Fc(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Rc(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Pc(e){return e<0?-e*e:e*e}function Lc(e){var t=e(mc,mc),n=1;function r(){return 1===n?e(mc,mc):.5===n?e(Rc,Pc):e(Fc(n),Fc(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},kc(t)}function Bc(){var e=Lc(_c());return e.copy=function(){return xc(e,Bc()).exponent(e.exponent())},is.apply(e,arguments),e}function zc(){return Bc.apply(null,arguments).exponent(.5)}function Uc(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Wc(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Vc(e){var t=1,n=e(Uc(t),Wc(t));return n.constant=function(n){return arguments.length?e(Uc(t=+n),Wc(t)):t},kc(n)}function Gc(){var e=Vc(_c());return e.copy=function(){return xc(e,Gc()).constant(e.constant())},is.apply(e,arguments)}var qc=n(229),Hc=n(606),Xc=n(131),Yc=n(416),Kc=n(607),$c=n(608),Zc=n(609),Jc=n(610),Qc=n(615),el=1e3,tl=6e4,nl=36e5,rl=864e5,al=2592e6,il=31536e6;function ol(e){return new Date(e)}function ul(e){return e instanceof Date?+e:+new Date(+e)}function sl(e,t,n,r,a,i,o,u,s){var c=wc(),l=c.invert,f=c.domain,d=s(".%L"),h=s(":%S"),p=s("%I:%M"),v=s("%I %p"),m=s("%a %d"),g=s("%b %d"),b=s("%B"),y=s("%Y"),x=[[o,1,el],[o,5,5e3],[o,15,15e3],[o,30,3e4],[i,1,tl],[i,5,3e5],[i,15,9e5],[i,30,18e5],[a,1,nl],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,rl],[r,2,1728e5],[n,1,6048e5],[t,1,al],[t,3,7776e6],[e,1,il]];function _(u){return(o(u)<u?d:i(u)<u?h:a(u)<u?p:r(u)<u?v:t(u)<u?n(u)<u?m:g:e(u)<u?b:y)(u)}function w(t,n,r){if(null==t&&(t=10),"number"===typeof t){var a,i=Math.abs(r-n)/t,o=Object(za.a)((function(e){return e[2]})).right(x,i);return o===x.length?(a=Object(cs.c)(n/il,r/il,t),t=e):o?(a=(o=x[i/x[o-1][2]<x[o][2]/i?o-1:o])[1],t=o[0]):(a=Math.max(Object(cs.c)(n,r,t),1),t=u),t.every(a)}return t}return c.invert=function(e){return new Date(l(e))},c.domain=function(e){return arguments.length?f(Array.from(e,ul)):f().map(ol)},c.ticks=function(e){var t,n=f(),r=n[0],a=n[n.length-1],i=a<r;return i&&(t=r,r=a,a=t),t=(t=w(e,r,a))?t.range(r,a+1):[],i?t.reverse():t},c.tickFormat=function(e,t){return null==t?_:s(t)},c.nice=function(e){var t=f();return(e=w(e,t[0],t[t.length-1]))?f(jc(t,e)):c},c.copy=function(){return xc(c,sl(e,t,n,r,a,i,o,u,s))},c}function cl(){return is.apply(sl(qc.a,Hc.a,Xc.b,Yc.a,Kc.a,$c.a,Zc.a,Jc.a,Qc.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var ll=n(230),fl=n(611),dl=n(132),hl=n(417),pl=n(612),vl=n(613);function ml(){return is.apply(sl(ll.a,fl.a,dl.b,hl.a,pl.a,vl.a,Zc.a,Jc.a,Qc.c).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gl(){var e,t,n,r,a,i=0,o=1,u=mc,s=!1;function c(t){return isNaN(t=+t)?a:u(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}function l(e){return function(t){var n,r,a,i;return arguments.length?(n=t,a=(r=Object(Nr.a)(n,2))[0],i=r[1],u=e(a,i),c):[u(0),u(1)]}}return c.domain=function(a){var u,s;return arguments.length?(u=a,s=Object(Nr.a)(u,2),i=s[0],o=s[1],e=r(i=+i),t=r(o=+o),n=e===t?0:1/(t-e),c):[i,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(u=e,c):u},c.range=l(dc),c.rangeRound=l(hc),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(i),t=a(o),n=e===t?0:1/(t-e),c}}function bl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yl(){var e=kc(gl()(mc));return e.copy=function(){return bl(e,yl())},os.apply(e,arguments)}function xl(){var e=Dc(gl()).domain([1,10]);return e.copy=function(){return bl(e,xl()).base(e.base())},os.apply(e,arguments)}function _l(){var e=Vc(gl());return e.copy=function(){return bl(e,_l()).constant(e.constant())},os.apply(e,arguments)}function wl(){var e=Lc(gl());return e.copy=function(){return bl(e,wl()).exponent(e.exponent())},os.apply(e,arguments)}function kl(){return wl.apply(null,arguments).exponent(.5)}function Ol(e,t){void 0===t&&(t=e,e=dc);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function Sl(){var e,t,n,r,a,i,o,u=0,s=.5,c=1,l=1,f=mc,d=!1;function h(e){return isNaN(e=+e)?o:(e=.5+((e=+i(e))-t)*(l*e<l*t?r:a),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a,i,o;return arguments.length?(n=t,a=(r=Object(Nr.a)(n,3))[0],i=r[1],o=r[2],f=Ol(e,[a,i,o]),h):[f(0),f(.5),f(1)]}}return h.domain=function(o){var f,d;return arguments.length?(f=o,d=Object(Nr.a)(f,3),u=d[0],s=d[1],c=d[2],e=i(u=+u),t=i(s=+s),n=i(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,h):[u,s,c]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(dc),h.rangeRound=p(hc),h.unknown=function(e){return arguments.length?(o=e,h):o},function(o){return i=o,e=o(u),t=o(s),n=o(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),l=t<e?-1:1,h}}function jl(){var e=kc(Sl()(mc));return e.copy=function(){return bl(e,jl())},os.apply(e,arguments)}function El(){var e=Dc(Sl()).domain([.1,1,10]);return e.copy=function(){return bl(e,El()).base(e.base())},os.apply(e,arguments)}function Cl(){var e=Vc(Sl());return e.copy=function(){return bl(e,Cl()).constant(e.constant())},os.apply(e,arguments)}function Al(){var e=Lc(Sl());return e.copy=function(){return bl(e,Al()).exponent(e.exponent())},os.apply(e,arguments)}function Tl(){return Al.apply(null,arguments).exponent(.5)}function Nl(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=Ur(t,e/a);return i}function i(t){return isNaN(t=+t)?e:n[as(r,t)]}return i.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];var n,r=Object(tr.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;null==i||isNaN(i=+i)||t.push(i)}}catch(o){r.e(o)}finally{r.f()}return t.sort(Mr.a),a()},i.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.quantiles=function(){return r.slice()},i.copy=function(){return Nl().domain(t).range(n).unknown(e)},is.apply(i,arguments)}function Ml(){var e,t=0,n=1,r=1,a=[.5],i=[0,1];function o(t){return t<=t?i[as(a,t,0,r)]:e}function u(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){var r,a;return arguments.length?(r=e,a=Object(Nr.a)(r,2),t=a[0],n=a[1],t=+t,n=+n,u()):[t,n]},o.range=function(e){return arguments.length?(r=(i=Array.from(e)).length-1,u()):i.slice()},o.invertExtent=function(e){var o=i.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,a[0]]:o>=r?[a[r-1],n]:[a[o-1],a[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return Ml().domain([t,n]).range(i).unknown(e)},is.apply(kc(o),arguments)}function Dl(){var e,t=[.5],n=[0,1],r=1;function a(a){return a<=a?n[as(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Dl().domain(t).range(n).unknown(e)},is.apply(a,arguments)}var Il,Fl=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},Rl=function(e,t){var n=Ks(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},Pl=180/Math.PI,Ll={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Bl=function(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Pl,skewX:Math.atan(s)*Pl,scaleX:o,scaleY:u}};function zl(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:uc(e,a)},{i:s-2,x:uc(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:uc(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:uc(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:uc(e,n)},{i:u-2,x:uc(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var Ul=zl((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ll:Bl(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Wl=zl((function(e){return null==e?Ll:(Il||(Il=document.createElementNS("http://www.w3.org/2000/svg","g")),Il.setAttribute("transform",e),(e=Il.transform.baseVal.consolidate())?(e=e.matrix,Bl(e.a,e.b,e.c,e.d,e.e,e.f)):Ll)}),", ",")",")");function Vl(e){return((e=Math.exp(e))+1/e)/2}var Gl=function e(t,n,r){function a(e,a){var i,o,u=e[0],s=e[1],c=e[2],l=a[0],f=a[1],d=a[2],h=l-u,p=f-s,v=h*h+p*p;if(v<1e-12)o=Math.log(d/c)/t,i=function(e){return[u+e*h,s+e*p,c*Math.exp(t*e*o)]};else{var m=Math.sqrt(v),g=(d*d-c*c+r*v)/(2*c*n*m),b=(d*d-c*c-r*v)/(2*d*n*m),y=Math.log(Math.sqrt(g*g+1)-g),x=Math.log(Math.sqrt(b*b+1)-b);o=(x-y)/t,i=function(e){var r,a=e*o,i=Vl(y),l=c/(n*m)*(i*(r=t*a+y,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[u+l*h,s+l*p,c*i/Vl(t*a+y)]}}return i.duration=1e3*o*t/Math.SQRT2,i}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function ql(e){return function(t,n){var r=e((t=Us(t)).h,(n=Us(n)).h),a=Zs(t.s,n.s),i=Zs(t.l,n.l),o=Zs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var Hl=ql(Ks),Xl=ql(Zs),Yl=Math.PI/180,Kl=180/Math.PI,$l=.96422,Zl=.82521,Jl=4/29,Ql=6/29,ef=3*Ql*Ql;function tf(e){if(e instanceof rf)return new rf(e.l,e.a,e.b,e.opacity);if(e instanceof ff)return df(e);e instanceof Fs||(e=Ds(e));var t,n,r=sf(e.r),a=sf(e.g),i=sf(e.b),o=af((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=af((.4360747*r+.3850649*a+.1430804*i)/$l),n=af((.0139322*r+.0971045*a+.7141733*i)/Zl)),new rf(116*o-16,500*(t-o),200*(o-n),e.opacity)}function nf(e,t,n,r){return 1===arguments.length?tf(e):new rf(e,t,n,null==r?1:r)}function rf(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function af(e){return e>.008856451679035631?Math.pow(e,1/3):e/ef+Jl}function of(e){return e>Ql?e*e*e:ef*(e-Jl)}function uf(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function sf(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cf(e){if(e instanceof ff)return new ff(e.h,e.c,e.l,e.opacity);if(e instanceof rf||(e=tf(e)),0===e.a&&0===e.b)return new ff(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Kl;return new ff(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function lf(e,t,n,r){return 1===arguments.length?cf(e):new ff(e,t,n,null==r?1:r)}function ff(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function df(e){if(isNaN(e.h))return new rf(e.l,0,0,e.opacity);var t=e.h*Yl;return new rf(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function hf(e,t){var n=Zs((e=nf(e)).l,(t=nf(t)).l),r=Zs(e.a,t.a),a=Zs(e.b,t.b),i=Zs(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function pf(e){return function(t,n){var r=e((t=lf(t)).h,(n=lf(n)).h),a=Zs(t.c,n.c),i=Zs(t.l,n.l),o=Zs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}ds(rf,nf,hs(ps,{brighter:function(e){return new rf(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new rf(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Fs(uf(3.1338561*(t=$l*of(t))-1.6168667*(e=1*of(e))-.4906146*(n=Zl*of(n))),uf(-.9787684*t+1.9161415*e+.033454*n),uf(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),ds(ff,lf,hs(ps,{brighter:function(e){return new ff(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new ff(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return df(this).rgb()}}));var vf=pf(Ks),mf=pf(Zs),gf=-.14861,bf=1.78277,yf=-.29227,xf=-.90649,_f=1.97294,wf=-1.7884503806,kf=3.5172982438,Of=-.6557636667999999;function Sf(e){if(e instanceof Ef)return new Ef(e.h,e.s,e.l,e.opacity);e instanceof Fs||(e=Ds(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(Of*r+wf*t-kf*n)/(Of+wf-kf),i=r-a,o=(_f*(n-a)-yf*i)/xf,u=Math.sqrt(o*o+i*i)/(_f*a*(1-a)),s=u?Math.atan2(o,i)*Kl-120:NaN;return new Ef(s<0?s+360:s,u,a,e.opacity)}function jf(e,t,n,r){return 1===arguments.length?Sf(e):new Ef(e,t,n,null==r?1:r)}function Ef(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Cf(e){return function t(n){function r(t,r){var a=e((t=jf(t)).h,(r=jf(r)).h),i=Zs(t.s,r.s),o=Zs(t.l,r.l),u=Zs(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}ds(Ef,jf,hs(ps,{brighter:function(e){return e=null==e?ms:Math.pow(ms,e),new Ef(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?vs:Math.pow(vs,e),new Ef(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Yl,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new Fs(255*(t+n*(gf*r+bf*a)),255*(t+n*(yf*r+xf*a)),255*(t+n*(_f*r)),this.opacity)}}));var Af,Tf,Nf=Cf(Ks),Mf=Cf(Zs),Df=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};var If="linear",Ff="log",Rf="pow",Pf="sqrt",Lf="symlog",Bf="time",zf="utc",Uf="sequential",Wf="diverging",Vf="quantile",Gf="quantize",qf="threshold",Hf="continuous",Xf="discrete",Yf="discretizing",Kf="interpolating",$f="temporal";function Zf(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return Zf().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function Jf(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Jf(t())},e}var Qf=Array.prototype.map;function ed(e){return Qf.call(e,Ao)}var td=Array.prototype.slice;var nd={};function rd(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=Po(To(n)),r}function ad(e,t,n){return arguments.length>1?(nd[e]=rd(e,t,n),this):id(e)?nd[e]:void 0}function id(e){return Io(nd,e)}function od(e,t){var n=nd[e];return n&&n.metadata[t]}function ud(e){return od(e,Xf)}ad("identity",Sc),ad(If,Oc,Hf),ad(Ff,Ic,[Hf,Ff]),ad(Rf,Bc,Hf),ad(Pf,zc,Hf),ad(Lf,Gc,Hf),ad(Bf,cl,[Hf,$f]),ad(zf,ml,[Hf,$f]),ad(Uf,yl,[Hf,Kf]),ad("".concat(Uf,"-").concat(If),yl,[Hf,Kf]),ad("".concat(Uf,"-").concat(Ff),xl,[Hf,Kf,Ff]),ad("".concat(Uf,"-").concat(Rf),wl,[Hf,Kf]),ad("".concat(Uf,"-").concat(Pf),kl,[Hf,Kf]),ad("".concat(Uf,"-").concat(Lf),_l,[Hf,Kf]),ad("".concat(Wf,"-").concat(If),jl,[Hf,Kf]),ad("".concat(Wf,"-").concat(Ff),El,[Hf,Kf,Ff]),ad("".concat(Wf,"-").concat(Rf),Al,[Hf,Kf]),ad("".concat(Wf,"-").concat(Pf),Tl,[Hf,Kf]),ad("".concat(Wf,"-").concat(Lf),Cl,[Hf,Kf]),ad(Vf,Nl,[Yf,Vf]),ad(Gf,Ml,Yf),ad(qf,Dl,Yf),ad("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=ed(e),r):t.slice()},r.range=function(e){return arguments.length?(n=td.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],Co(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[Xf,Yf]),ad("ordinal",ss,Xf),ad("band",Zf,Xf),ad("point",(function(){return Jf(Zf().paddingInner(1))}),Xf);function sd(e,t,n){return Ol(function(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function cd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function ld(e,t){for(var n in e)dd(n,t(e[n]))}var fd={};function dd(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(fd[e]=t,this):fd[e]}ld({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},cd),ld({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return sd(cd(e))}));var hd=function(e){return jo(e)?e.map((function(e){return String(e)})):String(e)},pd=function(e,t){return e[1]-t[1]},vd=function(e,t){return t[1]-e[1]};function md(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=Co(r),o=pd;if(a>i&&(r=i,i=a,a=r,o=vd),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],Co(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function gd(e,t,n,r,a,i){var o=t.type,u=hd;if(o===Bf||a===Bf)u=e.timeFormat(r);else if(o===zf||a===zf)u=e.utcFormat(r);else if(od(o,Ff)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=bd(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function bd(e,t,n){var r=md(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var yd=(Af={},Object(go.a)(Af,Vf,"quantiles"),Object(go.a)(Af,Gf,"thresholds"),Object(go.a)(Af,qf,"domain"),Af),xd=(Tf={},Object(go.a)(Tf,Vf,"quantiles"),Object(go.a)(Tf,Gf,"domain"),Tf);function _d(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=Co(e),t}(e.bins):e.type===Ff?bd(e,t,!0):yd[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[yd[e.type]]()):md(e,t)}function wd(e,t,n,r,a,i,o){var u=xd[t.type]&&i!==Bf&&i!==zf?function(e,t,n){var r,a=t[xd[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):gd(e,t,n,a,i,o);return"symbol"===r&&function(e){return yd[e.type]||e.bins}(t)?kd(u):"discrete"===r?Sd(u):jd(u)}var kd=function(e){return function(t,n,r){var a=Od(r[n+1],Od(r.max,1/0)),i=Ed(t,e),o=Ed(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},Od=function(e,t){return null!=e?e:t},Sd=function(e){return function(t,n){return n?e(t):null}},jd=function(e){return function(t){return e(t)}},Ed=function(e,t){return Number.isFinite(e)?t(e):null};function Cd(e,t,n,r){var a=r||t.type;return Ro(n)&&od(a,$f)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==Bf?n||a!==zf?wd(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function Ad(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=Cd(e,t,n.format,n.formatType);if(od(t.type,Yf)){var i=_d(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(ud(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(Co(l)))}var Td=0;var Nd="p_";function Md(e){return e&&e.gradient}function Dd(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?Nd:"";return a||(a=e.id="gradient_"+Td++,"radial"===r?(e.x1=Id(e.x1,.5),e.y1=Id(e.y1,.5),e.r1=Id(e.r1,0),e.x2=Id(e.x2,.5),e.y2=Id(e.y2,.5),e.r2=Id(e.r2,.5),i=Nd):(e.x1=Id(e.x1,0),e.y1=Id(e.y1,0),e.x2=Id(e.x2,1),e.y2=Id(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function Id(e,t){return null!=e?e:t}var Fd={basis:{curve:function(e){return new Bo(e)}},"basis-closed":{curve:function(e){return new Uo(e)}},"basis-open":{curve:function(e){return new Wo(e)}},bundle:{curve:Go,tension:"beta",value:.85},cardinal:{curve:Xo,tension:"tension",value:0},"cardinal-open":{curve:Ko,tension:"tension",value:0},"cardinal-closed":{curve:Zo,tension:"tension",value:0},"catmull-rom":{curve:hu,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vu,tension:"alpha",value:.5},"catmull-rom-open":{curve:gu,tension:"alpha",value:.5},linear:{curve:yu},"linear-closed":{curve:function(e){return new xu(e)}},monotone:{horizontal:function(e){return new ju(e)},vertical:function(e){return new Su(e)}},natural:{curve:function(e){return new Cu(e)}},step:{curve:function(e){return new Tu(e,.5)}},"step-after":{curve:function(e){return new Tu(e,1)}},"step-before":{curve:function(e){return new Tu(e,0)}}};function Rd(e,t,n){var r=Io(Fd,e)&&Fd[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var Pd={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Ld=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function Bd(e){var t,n,r,a,i,o,u,s,c,l,f=[],d=e.slice().replace(Ld[0],"###$1").split(Ld[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=(t=d[u]).slice(1).trim().replace(Ld[2],"$1###$2").replace(Ld[3],"$1###$2").split(Ld[4]),r=[i=t.charAt(0)],s=0,l=n.length;s<l;++s)(a=+n[s])===a&&r.push(a);if(o=Pd[i.toLowerCase()],r.length-1>o){var h=r.length;for(s=1,f.push([i].concat(r.slice(s,s+=o))),i="M"===i?"L":"m"===i?"l":i;s<h;s+=o)f.push([i].concat(r.slice(s,s+o)))}else f.push(r)}return f}var zd=Math.PI/180,Ud=Math.PI/2,Wd=2*Math.PI,Vd=Math.sqrt(3)/2,Gd={},qd={},Hd=[].join;function Xd(e){var t=Hd.call(e);if(qd[t])return qd[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,h=c*u,p=Math.cos(a),v=Math.sin(a),m=Math.cos(i),g=Math.sin(i),b=.5*(i-a),y=Math.sin(.5*b),x=8/3*y*y/Math.sin(b),_=n+p-x*v,w=r+v+x*p,k=n+m,O=r+g,S=k+x*g,j=O-x*m;return qd[t]=[l*_+f*w,d*_+h*w,l*S+f*j,d*S+h*j,l*k+f*O,d*k+h*O]}var Yd=["l",0,0,0,0,0,0,0];function Kd(e,t,n){var r=Yd[0]=e[0];if("a"===r||"A"===r)Yd[1]=t*e[1],Yd[2]=n*e[2],Yd[3]=e[3],Yd[4]=e[4],Yd[5]=e[5],Yd[6]=t*e[6],Yd[7]=n*e[7];else if("h"===r||"H"===r)Yd[1]=t*e[1];else if("v"===r||"V"===r)Yd[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)Yd[a]=(a%2==1?t:n)*e[a];return Yd}function $d(e,t,n,r,a,i){var o,u,s,c,l,f=null,d=0,h=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var m=0,g=t.length;m<g;++m){switch(o=t[m],1===a&&1===i||(o=Kd(o,a,i)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],e.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],e.moveTo(d+n,h+r);break;case"c":u=d+o[5],s=h+o[6],p=d+o[3],v=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,v+r,u+n,s+r),d=u,h=s;break;case"C":d=o[5],h=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,d+n,h+r);break;case"s":u=d+o[3],s=h+o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,d+o[1]+n,h+o[2]+r,u+n,s+r),p=d+o[1],v=h+o[2],d=u,h=s;break;case"S":u=o[3],s=o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"q":u=d+o[3],s=h+o[4],p=d+o[1],v=h+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"t":u=d+o[1],s=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,v=h):"t"===f[0]?(p=2*d-c,v=2*h-l):"q"===f[0]&&(p=2*d-p,v=2*h-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=s,p=(d=u)+o[1],v=h+o[2];break;case"T":u=o[1],s=o[2],p=2*d-p,v=2*h-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"a":Zd(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":Zd(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":e.closePath()}f=o}}function Zd(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=Hd.call(arguments);if(Gd[c])return Gd[c];var l=o*zd,f=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+f*(s-t)*.5,p=d*(s-t)*.5-f*(u-e)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=d/n,g=f/n,b=-f/r,y=d/r,x=m*u+g*s,_=b*u+y*s,w=m*e+g*t,k=b*e+y*t,O=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;O<0&&(O=0);var S=Math.sqrt(O);i==a&&(S=-S);var j=.5*(x+w)-S*(k-_),E=.5*(_+k)+S*(w-x),C=Math.atan2(_-E,x-j),A=Math.atan2(k-E,w-j)-C;A<0&&1===i?A+=Wd:A>0&&0===i&&(A-=Wd);for(var T=Math.ceil(Math.abs(A/(Ud+.001))),N=[],M=0;M<T;++M){var D=C+M*A/T,I=C+(M+1)*A/T;N[M]=[j,E,D,I,n,r,f,d]}return Gd[c]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=Xd(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var Jd=.5773502691896257,Qd={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Wd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n,a=r-n*Jd,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n,a=r-n*Jd;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Vd*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function eh(e){return Io(Qd,e)?Qd[e]:function(e){if(!Io(th,e)){var t=Bd(e);th[e]={draw:function(e,n){$d(e,t,0,0,Math.sqrt(n)/2)}}}return th[e]}(e)}var th={};var nh=.448084975506;function rh(e){return e.x}function ah(e){return e.y}function ih(e){return e.width}function oh(e){return e.height}function uh(e){return"function"===typeof e?e:function(){return+e}}function sh(e,t,n){return Math.max(t,Math.min(e,n))}function ch(e,t){return null!=e?e:t}var lh=function(e){return e.x||0},fh=function(e){return e.y||0},dh=function(e){return!(!1===e.defined)},hh=function(){var e=Bu,t=zu,n=Lu(0),r=null,a=Uu,i=Wu,o=Vu,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=a.apply(this,arguments)-uu,h=i.apply(this,arguments)-uu,p=Jo(h-d),v=h>d;if(u||(u=s=Pu()),f<l&&(c=f,f=l,l=c),f>iu)if(p>su-iu)u.moveTo(f*eu(d),f*ru(d)),u.arc(0,0,f,d,h,!v),l>iu&&(u.moveTo(l*eu(h),l*ru(h)),u.arc(0,0,l,h,d,v));else{var m,g,b=d,y=h,x=d,_=h,w=p,k=p,O=o.apply(this,arguments)/2,S=O>iu&&(r?+r.apply(this,arguments):au(l*l+f*f)),j=nu(Jo(f-l)/2,+n.apply(this,arguments)),E=j,C=j;if(S>iu){var A=lu(S/l*ru(O)),T=lu(S/f*ru(O));(w-=2*A)>iu?(x+=A*=v?1:-1,_-=A):(w=0,x=_=(d+h)/2),(k-=2*T)>iu?(b+=T*=v?1:-1,y-=T):(k=0,b=y=(d+h)/2)}var N=f*eu(b),M=f*ru(b),D=l*eu(_),I=l*ru(_);if(j>iu){var F,R=f*eu(y),P=f*ru(y),L=l*eu(x),B=l*ru(x);if(p<ou&&(F=Gu(N,M,L,B,R,P,D,I))){var z=N-F[0],U=M-F[1],W=R-F[0],V=P-F[1],G=1/ru(cu((z*W+U*V)/(au(z*z+U*U)*au(W*W+V*V)))/2),q=au(F[0]*F[0]+F[1]*F[1]);E=nu(j,(l-q)/(G-1)),C=nu(j,(f-q)/(G+1))}}k>iu?C>iu?(m=qu(L,B,N,M,f,C,v),g=qu(R,P,D,I,f,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<j?u.arc(m.cx,m.cy,C,Qo(m.y01,m.x01),Qo(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,C,Qo(m.y01,m.x01),Qo(m.y11,m.x11),!v),u.arc(0,0,f,Qo(m.cy+m.y11,m.cx+m.x11),Qo(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,C,Qo(g.y11,g.x11),Qo(g.y01,g.x01),!v))):(u.moveTo(N,M),u.arc(0,0,f,b,y,!v)):u.moveTo(N,M),l>iu&&w>iu?E>iu?(m=qu(D,I,R,P,l,-E,v),g=qu(N,M,L,B,l,-E,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),E<j?u.arc(m.cx,m.cy,E,Qo(m.y01,m.x01),Qo(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,E,Qo(m.y01,m.x01),Qo(m.y11,m.x11),!v),u.arc(0,0,l,Qo(m.cy+m.y11,m.cx+m.x11),Qo(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,E,Qo(g.y11,g.x11),Qo(g.y01,g.x01),!v))):u.arc(0,0,l,_,x,v):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-ou/2;return[eu(r)*n,ru(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:Lu(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:Lu(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:Lu(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Lu(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:Lu(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:Lu(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:Lu(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),ph=$u().x(lh).y1(fh).y0((function(e){return(e.y||0)+(e.height||0)})).defined(dh),vh=$u().y(fh).x1(lh).x0((function(e){return(e.x||0)+(e.width||0)})).defined(dh),mh=Ku().x(lh).y(fh).defined(dh),gh=function(){var e=rh,t=ah,n=ih,r=oh,a=uh(0),i=a,o=a,u=a,s=null;function c(c,l,f){var d,h=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),m=+r.call(this,c),g=Math.min(v,m)/2,b=sh(+a.call(this,c),0,g),y=sh(+i.call(this,c),0,g),x=sh(+o.call(this,c),0,g),_=sh(+u.call(this,c),0,g);if(s||(s=d=Pu()),b<=0&&y<=0&&x<=0&&_<=0)s.rect(h,p,v,m);else{var w=h+v,k=p+m;s.moveTo(h+b,p),s.lineTo(w-y,p),s.bezierCurveTo(w-nh*y,p,w,p+nh*y,w,p+y),s.lineTo(w,k-_),s.bezierCurveTo(w,k-nh*_,w-nh*_,k,w-_,k),s.lineTo(h+x,k),s.bezierCurveTo(h+nh*x,k,h,k-nh*x,h,k-x),s.lineTo(h,p+b),s.bezierCurveTo(h,p+nh*b,h+nh*b,p,h+b,p),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=uh(t),c):e},c.y=function(e){return arguments.length?(t=uh(e),c):t},c.width=function(e){return arguments.length?(n=uh(e),c):n},c.height=function(e){return arguments.length?(r=uh(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=uh(e),i=null!=t?uh(t):a,u=null!=n?uh(n):a,o=null!=r?uh(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}().x(lh).y(fh).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return ch(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return ch(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return ch(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return ch(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),bh=function(e,t){var n=null;function r(){var r;if(n||(n=r=Pu()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:Lu(e||Zu),t="function"===typeof t?t:Lu(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:Lu(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:Lu(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return eh(e.shape||"circle")})).size((function(e){return ch(e.size,64)})),yh=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,h=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-d,o-h),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+d,o+h),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,Wd);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,d=!1;for(null==s&&(s=l=Pu()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&(d=!d)&&(a=0),d&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().x(lh).y(fh).defined(dh).size((function(e){return e.size||1}));function xh(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function _h(e,t,n,r){return gh.context(e)(t,n,r)}var wh=1;function kh(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+wh++),o=a.clipping[i]||(a.clipping[i]={id:i});return No(r)?o.path=r(null):xh(n)?o.path=_h(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function Oh(e){this.clear(),e&&this.union(e)}function Sh(e){this.mark=e,this.bounds=this.bounds||new Oh}function jh(e){Sh.call(this,e),this.items=this.items||[]}function Eh(e){this._pending=0,this._loader=e||Object(an.e)()}function Ch(e){e._pending+=1}function Ah(e){e._pending-=1}function Th(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}Oh.prototype={clone:function(){return new Oh(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},Fo(jh,Sh),Eh.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return Ch(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return Ah(t),e})).catch((function(){return Ah(t),null}))},loadImage:function(e){var t=this,n=es();return Ch(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=Io(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return Ah(t)},a.onerror=function(){return Ah(t)},a.src=r,a})).catch((function(e){return Ah(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var Nh,Mh,Dh,Ih,Fh,Rh,Ph,Lh,Bh=Wd-1e-8,zh=function(e,t){return Nh.add(e,t)},Uh=function(e,t){return zh(Mh=e,Dh=t)},Wh=function(e){return zh(e,Nh.y1)},Vh=function(e){return zh(Nh.x1,e)},Gh=function(e,t){return Fh*e+Ph*t},qh=function(e,t){return Rh*e+Lh*t},Hh=function(e,t){return zh(Gh(e,t),qh(e,t))},Xh=function(e,t){return Uh(Gh(e,t),qh(e,t))};function Yh(e,t){return Nh=e,t?(Ih=t*zd,Fh=Lh=Math.cos(Ih),Rh=Math.sin(Ih),Ph=-Rh):(Fh=Lh=1,Ih=Rh=Ph=0),Kh}var Kh={beginPath:function(){},closePath:function(){},moveTo:Xh,lineTo:Xh,rect:function(e,t,n,r){Ih?(Hh(e+n,t),Hh(e+n,t+r),Hh(e,t+r),Xh(e,t)):(zh(e+n,t+r),Uh(e,t))},quadraticCurveTo:function(e,t,n,r){var a=Gh(e,t),i=qh(e,t),o=Gh(n,r),u=qh(n,r);$h(Mh,a,o,Wh),$h(Dh,i,u,Vh),Uh(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=Gh(e,t),u=qh(e,t),s=Gh(n,r),c=qh(n,r),l=Gh(a,i),f=qh(a,i);Zh(Mh,o,s,l,Wh),Zh(Dh,u,c,f,Vh),Uh(l,f)},arc:function(e,t,n,r,a,i){if(r+=Ih,a+=Ih,Mh=n*Math.cos(a)+e,Dh=n*Math.sin(a)+t,Math.abs(a-r)>Bh)zh(e-n,t-n),zh(e+n,t+n);else{var o,u,s=function(r){return zh(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=Wd)<0&&(r+=Wd),(a%=Wd)<0&&(a+=Wd),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=Wd,o=r-r%Ud,u=0;u<4&&o>a;++u,o-=Ud)s(o);else for(o=r-r%Ud+Ud,u=0;u<4&&o<a;++u,o+=Ud)s(o)}}};function $h(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function Zh(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(Jh(c,e,t,n,r)),0<l&&l<1&&a(Jh(l,e,t,n,r))}function Jh(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var Qh=(Qh=Qu(1,1))?Qh.getContext("2d"):null,ep=new Oh;function tp(e){return function(t,n){if(!Qh)return!0;e(Qh,t),ep.clear().union(t.bounds).intersect(n).round();for(var r=ep.x1,a=ep.y1,i=ep.x2,o=ep.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(Qh.isPointInPath(s,u))return!0;return!1}}function np(e,t){return t.contains(e.x||0,e.y||0)}function rp(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(ep.set(n,r,n+a,r+i))}function ap(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,h=r-t,p=a-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(i=-h,o=-(c-t)),1===s&&(i=h,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=d-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>m)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<m&&(m=u)}}return!0}function ip(e,t){e.globalCompositeOperation=t.blend||"source-over"}function op(e,t){return null==e?t:e}function up(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function sp(e,t,n){return Md(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+op(t.x1,.5)*a,n.y1+op(t.y1,.5)*i,Math.max(a,i)*op(t.r1,0),n.x1+op(t.x2,.5)*a,n.y1+op(t.y2,.5)*i,Math.max(a,i)*op(t.r2,.5));else{var o=op(t.x1,0),u=op(t.y1,0),s=op(t.x2,1),c=op(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=Qu(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=up(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return up(r,t.stops)}(e,n,t.bounds):n}function cp(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=sp(e,t,t.fill),!0)}var lp=[];function fp(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=sp(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||lp),e.lineDashOffset=t.strokeDashOffset||0),!0))}function dp(e,t){return e.zindex-t.zindex||e.index-t.index}function hp(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(dp)}function pp(e,t){var n,r,a=e.items;if(a&&a.length){var i=hp(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function vp(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=hp(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function mp(e){return function(t,n,r){pp(n,(function(n){r&&!r.intersects(n.bounds)||gp(e,t,n,n)}))}}function gp(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(ip(t,n),n.fill&&cp(t,n,a)&&t.fill(),n.stroke&&fp(t,n,a)&&t.stroke()))}function bp(e){return e=e||So,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,vp(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function yp(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function xp(e){return bp(yp(e))}function _p(e,t){return"translate("+e+","+t+")"}function wp(e){return"rotate("+e+")"}function kp(e){return _p(e.x||0,e.y||0)}function Op(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=zd),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return _p(e.x||0,e.y||0)+(e.angle?" "+wp(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(Yh(e,n.angle),n),Th(e,n).translate(n.x||0,n.y||0)},draw:mp(r),pick:xp(r),isect:n||tp(r)}}var Sp=Op("arc",(function(e,t){return hh.context(e)(t)}));function jp(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a,i=yp(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(Yh(e),r),Th(e,r[0]))},draw:(a=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||gp(a,e,t.items[0],t.items)}),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null)},isect:np,tip:n}}var Ep=jp("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?vh:ph).curve(Rd(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function Cp(e,t){e.beginPath(),xh(t)?_h(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Ap(e){var t=op(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Tp(e,t){var n=Ap(t);e("d",_h(null,t,n,n))}function Np(e,t,n,r){var a=Ap(t);e.beginPath(),_h(e,t,(n||0)+a,(r||0)+a)}var Mp=yp(Np),Dp=yp(Np,!1),Ip=yp(Np,!0);var Fp={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",kp(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Th(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;pp(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(Np(e,t,a,i),ip(e,t),t.fill&&cp(e,t,u)&&e.fill(),t.stroke&&!o&&fp(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&Cp(e,t),n&&n.translate(-a,-i),pp(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(Np(e,t,a,i),ip(e,t),fp(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return vp(t,(function(c){var l,f,d,h=c.bounds;if(!h||h.contains(a,i)){f=c.x||0,d=c.y||0;var p=f+(c.width||0),v=d+(c.height||0),m=c.clip;if(!m||!(a<f||a>p||i<d||i>v)){if(e.save(),e.translate(f,d),f=a-f,d=i-d,m&&xh(c)&&!Ip(e,c,u,s))return e.restore(),null;var g=c.strokeForeground,b=!1!==t.interactive;return b&&g&&c.stroke&&Dp(e,c,u,s)?(e.restore(),c):(!(l=vp(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&b&&(c.fill||!g&&c.stroke)&&Mp(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:rp,content:function(e,t,n){e("clip-path",t.clip?kh(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),Tp(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Tp(e,t):e("d","")}},Rp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Pp(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function Lp(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function Bp(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function zp(e,t){return"center"===e?t/2:"right"===e?t:0}function Up(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Wp={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=Pp(t,n),a=Lp(t,r),i=Bp(t,r),o=(t.x||0)-zp(t.align,a),u=(t.y||0)-Up(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",Rp["xmlns:xlink"],"xlink:href"),e("transform",_p(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=Lp(t,n),a=Bp(t,n),i=(t.x||0)-zp(t.align,r),o=(t.y||0)-Up(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;pp(t,(function(t){if(!n||n.intersects(t.bounds)){var a,i,o,u,s=Pp(t,r),c=Lp(t,s),l=Bp(t,s),f=(t.x||0)-zp(t.align,c),d=(t.y||0)-Up(t.baseline,l);!1!==t.aspect&&(i=s.width/s.height,o=t.width/t.height,i===i&&o===o&&i!==o&&(o<i?(d+=(l-(u=c/i))/2,l=u):(f+=(c-(u=l*i))/2,c=u))),(s.complete||s.toDataURL)&&(ip(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(s,f,d,c,l))}}))},pick:bp(),isect:So,get:Pp,xOffset:zp,yOffset:Up},Vp=jp("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return mh.curve(Rd(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function Gp(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*zd,s=t.pathCache;s&&s.path===n||((t.pathCache=s=Bd(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),$d(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):$d(e,s,r,a,i,o)}var qp={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return _p(e.x||0,e.y||0)+(e.angle?" "+wp(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return Gp(Yh(e,t.angle),t)?e.set(0,0,0,0):Th(e,t,!0)},draw:mp(Gp),pick:xp(Gp),isect:tp(Gp)};function Hp(e,t){e.beginPath(),_h(e,t)}var Xp={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",_h(null,t))},bound:function(e,t){var n,r;return Th(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:mp(Hp),pick:xp(Hp),isect:rp};function Yp(e,t,n){var r,a,i,o;return!(!t.stroke||!fp(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var Kp={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",kp(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return Th(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){pp(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Yp(e,t,r)&&(ip(e,t),e.stroke())}}))},pick:bp((function(e,t,n,r){return!!e.isPointInStroke&&(Yp(e,t,1)&&e.isPointInStroke(n,r))})),isect:function(e,t){var n=e.x||0,r=e.y||0;return ap(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},$p=Op("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),Zp=Op("symbol",(function(e,t){return bh.context(e)(t)}),np),Jp=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return Io(t,e)||Io(n,e)},get:function(e){return Io(t,e)?t[e]:Io(n,e)?i(e,n[e]):void 0},set:function(e,n){return Io(t,e)?t[e]=n:i(e,n)}}}(),Qp={height:iv,measureWidth:rv,estimateWidth:tv,width:tv,canvas:ev};function ev(e){Qp.width=e&&Qh?rv:tv}function tv(e,t){return nv(cv(e,t),iv(e))}function nv(e,t){return~~(.8*e.length*t)}function rv(e,t){return iv(e)<=0||!(t=cv(e,t))?0:av(t,fv(e))}function av(e,t){var n="(".concat(t,") ").concat(e),r=Jp.get(n);return void 0===r&&(Qh.font=t,r=Qh.measureText(e).width,Jp.set(n,r)),r}function iv(e){return null!=e.fontSize?+e.fontSize||0:11}function ov(e){return null!=e.lineHeight?e.lineHeight:iv(e)+2}function uv(e){return t=e.lineBreak&&e.text&&!jo(e.text)?e.text.split(e.lineBreak):e.text,jo(t)?t.length>1?t:t[0]:t;var t}function sv(e){var t=uv(e);return(jo(t)?t.length-1:0)*ov(e)}function cv(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(Qp.width===rv){var t=fv(e);return function(e){return av(e,t)}}var n=iv(e);return function(e){return nv(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function lv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function fv(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+iv(e)+"px "+lv(e,t)}function dv(e){var t=e.baseline,n=iv(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*ov(e):"line-bottom"===t?.29*n-.5*ov(e):0)}ev(!0);var hv={left:"start",center:"middle",right:"end"},pv=new Oh;function vv(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-Ud,n+=a*Math.cos(t),r+=a*Math.sin(t)),pv.x1=n,pv.y1=r,pv}function mv(e,t,n){var r,a=Qp.height(t),i=t.align,o=vv(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+dv(t)-Math.round(.8*a),f=uv(t);if(jo(f)?(a+=ov(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,Qp.width(t,n))}),0)):r=Qp.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*zd,u,s);else if(2===n)return e.rotatedPoints(t.angle*zd,u,s);return e}var gv={arc:Sp,area:Ep,group:Fp,image:Wp,line:Vp,path:qp,rect:Xp,rule:Kp,shape:$p,symbol:Zp,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+dv(t),i=vv(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",hv[t.align]||"start"),s?(n=_p(o,u)+" "+wp(s),(r||a)&&(n+=" "+_p(r,a))):n=_p(o+r,u+a),e("transform",n)},bound:mv,draw:function(e,t,n){pp(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=fv(t),e.textAlign=t.align||"left",a=(r=vv(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*zd),a=i=0),a+=t.dx||0,i+=(t.dy||0)+dv(t),s=uv(t),ip(e,t),jo(s))for(u=ov(t),o=0;o<s.length;++o)c=cv(t,s[o]),t.fill&&cp(e,t,l)&&e.fillText(c,a,i),t.stroke&&fp(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=cv(t,s),t.fill&&cp(e,t,l)&&e.fillText(c,a,i),t.stroke&&fp(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:bp((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=vv(t),u=o.x1,s=o.y1,c=mv(pv,t,1),l=-t.angle*zd,f=Math.cos(l),d=Math.sin(l),h=f*a-d*i+(u-f*u+d*s),p=d*a+f*i+(s-d*u-f*s);return c.contains(h,p)})),isect:function(e,t){var n=mv(pv,e,2);return ap(t,n[0],n[1],n[2],n[3])||ap(t,n[0],n[1],n[4],n[5])||ap(t,n[4],n[5],n[6],n[7])||ap(t,n[2],n[3],n[6],n[7])}},trail:jp("trail",(function(e,t){return yh.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null}))};function bv(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function yv(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function xv(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=bv(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function _v(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function wv(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function kv(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Ov(e,t){this._active=null,this._handlers={},this._loader=e||Object(an.e)(),this._tooltip=t||Sv}function Sv(e,t,n,r){e.element().setAttribute("title",r||"")}function jv(e){this._el=null,this._bgcolor=null,this._loader=new Eh(e)}Ov.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,Object(mo.a)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,Object(mo.a)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=bv(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=gv[o.marktype]).tip){for((i=kv(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},jv.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var Ev="dragenter",Cv="dragleave",Av="dragover",Tv="mousedown",Nv="mousemove",Mv="mouseout",Dv="mouseover",Iv="click",Fv="mousewheel",Rv="touchstart",Pv="touchmove",Lv="touchend",Bv=Nv,zv=Mv,Uv=Iv;function Wv(e,t){Ov.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function Vv(e,t){(function(e){return e===Rv||e===Pv||e===Lv?[Rv,Pv,Lv]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function Gv(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function qv(e){return function(t){this.fire(e,t),this._active=null}}Fo(Wv,Ov,{initialize:function(e,t,n){var r=this;return this._canvas=e&&yv(e,"canvas"),[Iv,Tv,Nv,Mv,Cv].forEach((function(e){return Vv(r,e)})),Ov.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",Ev,Cv,Av,Tv,"mouseup",Nv,Mv,Dv,Iv,"dblclick","wheel",Fv,Rv,Pv,Lv],DOMMouseScroll:function(e){this.fire(Fv,e)},mousemove:Gv(Nv,Dv,Mv),dragover:Gv(Av,Ev,Cv),mouseout:qv(Mv),dragleave:qv(Cv),mousedown:function(e){this._down=this._active,this.fire(Tv,e)},click:function(e){this._down===this._active&&(this.fire(Iv,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Rv,e,!0)},touchmove:function(e){this.fire(Pv,e,!0)},touchend:function(e){this.fire(Lv,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===Uv&&r&&r.href?this.handleHref(t,r,r.href):e!==Bv&&e!==zv||this.handleTooltip(t,r,e!==zv),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Vv(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=kv(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return gv[e.marktype].pick.call(this,i,e,t,n,r,a)}});var Hv="undefined"!==typeof window&&window.devicePixelRatio||1;function Xv(e){jv.call(this,e),this._options={},this._redraw=!1,this._dirty=new Oh,this._tempb=new Oh}var Yv=jv.prototype;function Kv(e,t){Ov.call(this,e,t);var n=this;n._hrefHandler=$v(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=$v(n,(function(e,t){n.handleTooltip(e,t,e.type!==zv)}))}Fo(Xv,jv,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:Qu(1,1,this._options.type),e&&this._canvas&&(_v(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Yv.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(Yv.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?Hv:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||wo("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){var t,n,r,a=this.context(),i=this._origin,o=this._width,u=this._height,s=this._dirty,c=(t=i,n=o,r=u,(new Oh).set(0,0,n,r).translate(-t[0],-t[1]));a.save();var l=this._redraw||s.empty()?(this._redraw=!1,c.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(a,c.intersect(s),i);return this.clear(-i[0],-i[1],o,u),this.draw(a,e,l),a.restore(),s.clear(),this},draw:function(e,t,n){var r=gv[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),No(n)?(e.beginPath(),n(e),e.clip()):Cp(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var $v=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};Fo(Kv,Ov,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(Uv,this._hrefHandler),r.removeEventListener(Bv,this._tooltipHandler),r.removeEventListener(zv,this._tooltipHandler)),this._svg=r=e&&yv(e,"svg"),r&&(r.addEventListener(Uv,this._hrefHandler),r.addEventListener(Bv,this._tooltipHandler),r.addEventListener(zv,this._tooltipHandler)),Ov.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:$v(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var Zv="aria-hidden",Jv="aria-label",Qv="role",em="aria-roledescription",tm="graphics-object",nm="graphics-symbol",rm=function(e,t,n){var r;return r={},Object(go.a)(r,Qv,e),Object(go.a)(r,em,t),Object(go.a)(r,Jv,n||void 0),r},am=Po(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),im={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?lm(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(ud(u)?"discrete":u," scale")+" with ".concat(Ad(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?lm(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Co(e)}(i))+" with ".concat(Ad(s,u,e));var c}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(cm(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(cm(e),"'")}}},om={ariaRole:Qv,ariaRoleDescription:em,description:Jv};function um(e,t){var n=!1===t.aria;if(e(Zv,n||void 0),n||null==t.description)for(var r in om)e(om[r],void 0);else{var a=t.mark.marktype;e(Jv,t.description),e(Qv,t.ariaRole||("group"===a?tm:nm)),e(em,t.ariaRoleDescription||"".concat(a," mark"))}}function sm(e){return!1===e.aria?Object(go.a)({},Zv,!0):am[e.role]?null:im[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return rm(t.role||nm,t.desc,n.description||r(n))}catch(a){return null}}(e,im[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return rm(n?tm:nm,"".concat(t," mark container"),e.description)}(e)}function cm(e){return To(e.text).join(" ")}function lm(e){try{return To(Co(e.items).items[0].text).join(" ")}catch(t){return null}}var fm=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function dm(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(fm(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=fm(e),u},toString:function(){return e}};return u}var hm=function(e){return pm(dm(),e)+""};function pm(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes())for(var i=t.childNodes,o=i.length,u=0;u<o;u++){var s=i[u];3===s.nodeType?e.text(s.nodeValue):pm(e,s)}return e.close()}var vm={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},mm={fill:"none","stroke-miterlimit":10},gm="http://www.w3.org/2000/xmlns/",bm=Rp.xmlns;function ym(e){jv.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var xm=jv.prototype;function _m(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function wm(e,t,n){var r,a,i;if("radial"===t.gradient){var o=xv(e,n++,"pattern",bm);Tm(o,{id:Nd+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Tm(o=xv(o,0,"rect",bm),{width:1,height:1,fill:"url(".concat(Mm(),"#").concat(t.id,")")}),Tm(e=xv(e,n++,"radialGradient",bm),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Tm(e=xv(e,n++,"linearGradient",bm),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=xv(e,r,"stop",bm)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return _v(e,r),n}function km(e,t,n){return(e=xv(e,n,"clipPath",bm)).setAttribute("id",t.id),t.path?xv(e,0,"path",bm).setAttribute("d",t.path):Tm(xv(e,0,"rect",bm),{x:0,y:0,width:t.width,height:t.height}),_v(e,1),n+1}function Om(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=bv(i=t.ownerDocument,r,bm),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=bv(i,"path",bm);o.appendChild(u),u.__data__=e;var s=bv(i,"g",bm);o.appendChild(s),s.__data__=e;var c=bv(i,"path",bm);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Fo(ym,jv,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=xv(e,0,"svg",bm),this._svg.setAttributeNS(gm,"xmlns",bm),this._svg.setAttributeNS(gm,"xmlns:xlink",Rp["xmlns:xlink"]),this._svg.setAttribute("version",Rp.version),this._svg.setAttribute("class","marks"),_v(e,1),this._root=xv(this._svg,0,"g",bm),Tm(this._root,mm),_v(this._svg,1)),this.background(this._bgcolor),xm.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),xm.background.apply(this,arguments)},resize:function(e,t,n,r){return xm.resize.call(this,e,t,n,r),this._svg&&(Tm(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),Tm(e=xv(t,0,"rect",bm),{width:this._width,height:this._height,fill:n}));var r=hm(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),_v(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=gv[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,_m(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,_m(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a=this._svg,i=gv[t.marktype],o=!1===t.interactive?"none":null,u="g"===i.tag,s=null,c=0,l=Om(t,e,n,"g",a);l.setAttribute("class",wv(t));var f=sm(t);for(var d in f)Nm(l,d,f[d]);u||Nm(l,"pointer-events",o),Nm(l,"clip-path",t.clip?kh(this,t,t.group):null);var h=function(e){var t=r.isDirty(e),n=Om(e,l,s,i.tag,a);t&&(r._update(i,n,e),u&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;pp(n,(function(n){r=e.mark(t,n,r),++a})),_v(t,1+a)}(r,n,e)),s=n,++c};return i.nested?t.items.length&&h(t.items[0]):pp(t,h),_v(l,c),l},_update:function(e,t,n){Sm=t,jm=t.__values__,um(Cm,n),e.attr(Cm,n,this);var r=Em[e.type];r&&r.call(this,e,t,n),Sm&&this.style(Sm,n)},style:function(e,t){if(null!=t)for(var n in vm){var r="font"===n?lv(t):t[n];if(r!==jm[n]){var a=vm[n];null==r?e.removeAttribute(a):(Md(r)&&(r=Dd(r,this._defs.gradient,Mm())),e.setAttribute(a,r+"")),jm[n]=r}}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=xv(e,1,"defs",bm)),r=wm(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=xv(e,1,"defs",bm)),r=km(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):_v(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var Sm=null,jm=null,Em={group:function(e,t,n){var r=Sm=t.childNodes[2];jm=r.__values__,e.foreground(Cm,n,this),jm=t.__values__,Sm=t.childNodes[1],e.content(Cm,n,this);var a=Sm=t.childNodes[0];e.background(Cm,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==jm.events&&(Nm(r,"pointer-events",i),Nm(a,"pointer-events",i),jm.events=i),n.strokeForeground&&n.stroke){var o=n.fill;Nm(r,"display",null),this.style(a,n),Nm(a,"stroke",null),o&&(n.fill=null),jm=r.__values__,this.style(r,n),o&&(n.fill=o),Sm=null}else Nm(r,"display","none")},image:function(e,t,n){!1===n.smooth?(Am(t,"image-rendering","optimizeSpeed"),Am(t,"image-rendering","pixelated")):Am(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=uv(n);jo(u)?(r=(a=u.map((function(e){return cv(n,e)}))).join("\n"))!==jm.text&&(_v(t,0),i=t.ownerDocument,o=ov(n),a.forEach((function(e,r){var a=bv(i,"tspan",bm);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),jm.text=r):(a=cv(n,u))!==jm.text&&(t.textContent=a,jm.text=a),Nm(t,"font-family",lv(n)),Nm(t,"font-size",iv(n)+"px"),Nm(t,"font-style",n.fontStyle),Nm(t,"font-variant",n.fontVariant),Nm(t,"font-weight",n.fontWeight)}};function Cm(e,t,n){t!==jm[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(Sm,e,t,n):Nm(Sm,e,t),jm[e]=t)}function Am(e,t,n){n!==jm[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),jm[t]=n)}function Tm(e,t){for(var n in t)Nm(e,n,t[n])}function Nm(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Mm(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Dm(e){jv.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}Fo(Dm,jv,{svg:function(){return this._text},_render:function(e){var t=dm();t.open("svg",Mo({},Rp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",mm,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=gv[t.marktype],a=r.tag,i=[um,r.attr];e.open("g",{class:wv(t),"clip-path":t.clip?kh(this,t,t.group):null},sm(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=uv(o);if(jo(s))for(var c={x:0,dy:ov(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(cv(o,s[l])).close();else e.text(cv(o,s))}else if("g"===a){var f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),pp(o,(function(t){return n.mark(e,t)})),e.close(),f&&h?(d&&(o.fill=null),o.stroke=h,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),d&&(o.fill=d)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):pp(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=lv(t),e["font-size"]=iv(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var i in vm){var o=t[i],u=vm[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(Md(o)&&(o=Dd(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:Nd+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var Im={};Im.canvas=Im.png={renderer:Xv,headless:Xv,handler:Wv},Im.svg={renderer:ym,headless:Dm,handler:Kv},Im.none={};var Fm=new Oh;var Rm="top",Pm="left",Lm="right",Bm="bottom",zm="start",Um="middle",Wm="end",Vm="group",Gm="axis",qm="title",Hm="frame",Xm="scope",Ym="legend",Km="row-header",$m="row-footer",Zm="row-title",Jm="column-header",Qm="column-footer",eg="column-title",tg="padding",ng="fit",rg="fit-x",ag="fit-y",ig="none",og="all",ug="each",sg="flush",cg="column",lg="row";function fg(e){Zn.call(this,null,e)}function dg(e,t,n){return t(e.bounds.clear(),e,n)}Fo(fg,Zn,{transform:function(e,t){var n,r=t.dataflow,a=e.mark,i=a.marktype,o=gv[i],u=o.bound,s=a.bounds;if(o.nested)a.items.length&&r.dirty(a.items[0]),s=dg(a,u),a.items.forEach((function(e){e.bounds.clear().union(s)}));else if(i===Vm||e.modified())switch(t.visit(t.MOD,(function(e){return r.dirty(e)})),s.clear(),a.items.forEach((function(e){return s.union(dg(e,u))})),a.role){case Gm:case Ym:case qm:t.reflow()}else n=t.changed(t.REM),t.visit(t.ADD,(function(e){s.union(dg(e,u))})),t.visit(t.MOD,(function(e){n=n||s.alignsWith(e.bounds),r.dirty(e),s.union(dg(e,u))})),n&&(s.clear(),a.items.forEach((function(e){return s.union(e.bounds)})));return function(e){var t=e.clip;if(No(t))t(Yh(Fm.clear()));else{if(!t)return;Fm.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Fm)}(a),t.modifies("bounds")}});var hg=":vega_identifier:";function pg(e){Zn.call(this,0,e)}function vg(e){Zn.call(this,null,e)}function mg(e){Zn.call(this,null,e)}pg.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Fo(pg,Zn,{transform:function(e,t){var n,r=(n=t.dataflow)._signals[hg]||(n._signals[hg]=n.add(0)),a=e.as,i=r.value;return t.visit(t.ADD,(function(e){return e[a]=e[a]||++i})),r.set(this.value=i),t}}),Fo(vg,Zn,{transform:function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===Vm?jh:Sh;return t.visit(t.ADD,(function(e){return r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});var gg={parity:function(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function(e,t){var n;return e.filter((function(e,r){return r&&bg(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)}))}},bg=function(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)},yg=function(e,t){for(var n,r=1,a=e.length,i=e[0].bounds;r<a;i=n,++r)if(bg(i,n=e[r].bounds,t))return!0},xg=function(e){var t=e.bounds;return t.width()>1&&t.height()>1},_g=function(e){return e.forEach((function(e){return e.opacity=1})),e},wg=function(e,t){return e.reflow(t.modified()).modifies("opacity")};function kg(e){Zn.call(this,null,e)}Fo(mg,Zn,{transform:function(e,t){var n,r,a=gg[e.method]||gg.parity,i=e.separation||0,o=t.materialize(t.SOURCE).source;if(o&&o.length){if(!e.method)return e.modified("method")&&(_g(o),t=wg(t,e)),t;if((o=o.filter(xg)).length){if(e.sort&&(o=o.slice().sort(e.sort)),n=_g(o),t=wg(t,e),n.length>=3&&yg(n,i)){do{n=a(n,i)}while(n.length>=3&&yg(n,i));n.length<3&&!Co(o).opacity&&(n.length>1&&(Co(n).opacity=0),Co(o).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(r=function(e,t,n){var r=e.range(),a=new Oh;return t===Rm||t===Bm?a.set(r[0],-1/0,r[1],1/0):a.set(-1/0,r[0],1/0,r[1]),a.expand(n||1),function(e){return a.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((function(e){r(e)||(e.opacity=0)})));var u=n[0].mark.bounds.clear();return o.forEach((function(e){e.opacity&&u.union(e.bounds)})),t}}}}),Fo(kg,Zn,{transform:function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){return n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});var Og=new Oh;function Sg(e,t,n){return e[t]===n?0:(e[t]=n,1)}function jg(e){var t=e.items[0].orient;return t===Pm||t===Lm}function Eg(e,t,n,r){var a,i,o=t.items[0],u=o.datum,s=null!=o.translate?o.translate:.5,c=o.orient,l=function(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(u),f=o.range,d=o.offset,h=o.position,p=o.minExtent,v=o.maxExtent,m=u.title&&o.items[l[2]].items[0],g=o.titlePadding,b=o.bounds,y=m&&sv(m),x=0,_=0;switch(Og.clear().union(b),b.clear(),(a=l[0])>-1&&b.union(o.items[a].bounds),(a=l[1])>-1&&b.union(o.items[a].bounds),c){case Rm:x=h||0,_=-d,i=Math.max(p,Math.min(v,-b.y1)),b.add(0,-i).add(f,0),m&&Cg(e,m,i,g,y,0,-1,b);break;case Pm:x=-d,_=h||0,i=Math.max(p,Math.min(v,-b.x1)),b.add(-i,0).add(0,f),m&&Cg(e,m,i,g,y,1,-1,b);break;case Lm:x=n+d,_=h||0,i=Math.max(p,Math.min(v,b.x2)),b.add(0,0).add(i,f),m&&Cg(e,m,i,g,y,1,1,b);break;case Bm:x=h||0,_=r+d,i=Math.max(p,Math.min(v,b.y2)),b.add(0,0).add(f,i),m&&Cg(e,m,i,g,0,0,1,b);break;default:x=o.x,_=o.y}return Th(b.translate(x,_),o),Sg(o,"x",x+s)|Sg(o,"y",_+s)&&(o.bounds=Og,e.dirty(o),o.bounds=b,e.dirty(o)),o.mark.bounds.clear().union(b)}function Cg(e,t,n,r,a,i,o,u){var s=t.bounds;if(t.auto){var c=o*(n+a+r),l=0,f=0;e.dirty(t),i?l=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(s.translate(-l,-f)),e.dirty(t)}u.union(s)}var Ag=function(e,t){return Math.floor(Math.min(e,t))},Tg=function(e,t){return Math.ceil(Math.max(e,t))};function Ng(e){return(new Oh).set(0,0,e.width||0,e.height||0)}function Mg(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Dg(e,t,n){var r=Eo(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function Ig(e){return e<0?Math.ceil(-e):0}function Fg(e,t,n){var r,a,i,o,u,s,c,l,f,d,h,p=!n.nodirty,v=n.bounds===sg?Ng:Mg,m=Og.set(0,0,0,0),g=Dg(n.align,cg),b=Dg(n.align,lg),y=Dg(n.padding,cg),x=Dg(n.padding,lg),_=n.columns||t.length,w=_<=0?1:Math.ceil(t.length/_),k=t.length,O=Array(k),S=Array(_),j=0,E=Array(k),C=Array(w),A=0,T=Array(k),N=Array(k),M=Array(k);for(a=0;a<_;++a)S[a]=0;for(a=0;a<w;++a)C[a]=0;for(a=0;a<k;++a)s=t[a],u=M[a]=v(s),s.x=s.x||0,T[a]=0,s.y=s.y||0,N[a]=0,i=a%_,o=~~(a/_),j=Math.max(j,c=Math.ceil(u.x2)),A=Math.max(A,l=Math.ceil(u.y2)),S[i]=Math.max(S[i],c),C[o]=Math.max(C[o],l),O[a]=y+Ig(u.x1),E[a]=x+Ig(u.y1),p&&e.dirty(t[a]);for(a=0;a<k;++a)a%_===0&&(O[a]=0),a<_&&(E[a]=0);if(g===ug)for(i=1;i<_;++i){for(h=0,a=i;a<k;a+=_)h<O[a]&&(h=O[a]);for(a=i;a<k;a+=_)O[a]=h+S[i-1]}else if(g===og){for(h=0,a=0;a<k;++a)a%_&&h<O[a]&&(h=O[a]);for(a=0;a<k;++a)a%_&&(O[a]=h+j)}else for(g=!1,i=1;i<_;++i)for(a=i;a<k;a+=_)O[a]+=S[i-1];if(b===ug)for(o=1;o<w;++o){for(h=0,r=(a=o*_)+_;a<r;++a)h<E[a]&&(h=E[a]);for(a=o*_;a<r;++a)E[a]=h+C[o-1]}else if(b===og){for(h=0,a=_;a<k;++a)h<E[a]&&(h=E[a]);for(a=_;a<k;++a)E[a]=h+A}else for(b=!1,o=1;o<w;++o)for(r=(a=o*_)+_;a<r;++a)E[a]+=C[o-1];for(f=0,a=0;a<k;++a)f=O[a]+(a%_?f:0),T[a]+=f-t[a].x;for(i=0;i<_;++i)for(d=0,a=i;a<k;a+=_)d+=E[a],N[a]+=d-t[a].y;if(g&&Dg(n.center,cg)&&w>1)for(a=0;a<k;++a)(f=(u=g===og?j:S[a%_])-M[a].x2-t[a].x-T[a])>0&&(T[a]+=f/2);if(b&&Dg(n.center,lg)&&1!==_)for(a=0;a<k;++a)(d=(u=b===og?A:C[~~(a/_)])-M[a].y2-t[a].y-N[a])>0&&(N[a]+=d/2);for(a=0;a<k;++a)m.union(M[a].translate(T[a],N[a]));switch(f=Dg(n.anchor,"x"),d=Dg(n.anchor,"y"),Dg(n.anchor,cg)){case Wm:f-=m.width();break;case Um:f-=m.width()/2}switch(Dg(n.anchor,lg)){case Wm:d-=m.height();break;case Um:d-=m.height()/2}for(f=Math.round(f),d=Math.round(d),m.clear(),a=0;a<k;++a)t[a].mark.bounds.clear();for(a=0;a<k;++a)(s=t[a]).x+=T[a]+=f,s.y+=N[a]+=d,m.union(s.mark.bounds.union(s.bounds.translate(T[a],N[a]))),p&&e.dirty(s);return m}function Rg(e,t,n){var r,a,i,o,u,s,c,l=function(e){for(var t,n,r,a,i,o,u,s=e.items,c=s.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(u=(o=s[l]).items,o.marktype===Vm)switch(o.role){case Gm:case Ym:case qm:break;case Km:(t=f.rowheaders).push.apply(t,Object(mo.a)(u));break;case $m:(n=f.rowfooters).push.apply(n,Object(mo.a)(u));break;case Jm:(r=f.colheaders).push.apply(r,Object(mo.a)(u));break;case Qm:(a=f.colfooters).push.apply(a,Object(mo.a)(u));break;case Zm:f.rowtitle=u[0];break;case eg:f.coltitle=u[0];break;default:(i=f.marks).push.apply(i,Object(mo.a)(u))}return f}(t),f=l.marks,d=n.bounds===sg?Pg:Lg,h=n.offset,p=n.columns||f.length,v=p<=0?1:Math.ceil(f.length/p),m=v*p,g=Fg(e,f,n);g.empty()&&g.set(0,0,0,0),l.rowheaders&&(s=Dg(n.headerBand,lg,null),r=Bg(e,l.rowheaders,f,p,v,-Dg(h,"rowHeader"),Ag,0,d,"x1",0,p,1,s)),l.colheaders&&(s=Dg(n.headerBand,cg,null),a=Bg(e,l.colheaders,f,p,p,-Dg(h,"columnHeader"),Ag,1,d,"y1",0,1,p,s)),l.rowfooters&&(s=Dg(n.footerBand,lg,null),i=Bg(e,l.rowfooters,f,p,v,Dg(h,"rowFooter"),Tg,0,d,"x2",p-1,p,1,s)),l.colfooters&&(s=Dg(n.footerBand,cg,null),o=Bg(e,l.colfooters,f,p,p,Dg(h,"columnFooter"),Tg,1,d,"y2",m-p,1,p,s)),l.rowtitle&&(u=Dg(n.titleAnchor,lg),c=Dg(h,"rowTitle"),c=u===Wm?i+c:r-c,s=Dg(n.titleBand,lg,.5),zg(e,l.rowtitle,c,0,g,s)),l.coltitle&&(u=Dg(n.titleAnchor,cg),c=Dg(h,"columnTitle"),c=u===Wm?o+c:a-c,s=Dg(n.titleBand,cg,.5),zg(e,l.coltitle,c,1,g,s))}function Pg(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Lg(e,t){return e.bounds[t]}function Bg(e,t,n,r,a,i,o,u,s,c,l,f,d,h){var p,v,m,g,b,y,x,_,w,k=n.length,O=0,S=0;if(!k)return O;for(p=l;p<k;p+=f)n[p]&&(O=o(O,s(n[p],c)));if(!t.length)return O;for(t.length>a&&(e.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),O+=i,v=0,g=t.length;v<g;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(p=l,v=0,g=t.length;v<g;++v,p+=f){for(b=(y=t[v]).mark.bounds,m=p;m>=0&&null==(x=n[m]);m-=d);u?(_=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),w=O):(_=O,w=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),b.union(y.bounds.translate(_-(y.x||0),w-(y.y||0))),y.x=_,y.y=w,e.dirty(y),S=o(S,b[c])}return S}function zg(e,t,n,r,a,i){if(t){e.dirty(t);var o=n,u=n;r?o=Math.round(a.x1+i*a.width()):u=Math.round(a.y1+i*a.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function Ug(e,t,n,r,a,i,o){var u=function(e,t){var n=e[t]||{};return function(t,r){return null!=n[t]?n[t]:null!=e[t]?e[t]:r}}(n,t),s=function(e,t){var n=-1/0;return e.forEach((function(e){null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,u("offset",0)),c=u("anchor",zm),l=c===Wm?1:c===Um?.5:0,f={align:ug,bounds:u("bounds",sg),columns:"vertical"===u("direction")?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case Pm:f.anchor={x:Math.floor(r.x1)-s,column:Wm,y:l*(o||r.height()+2*r.y1),row:c};break;case Lm:f.anchor={x:Math.ceil(r.x2)+s,y:l*(o||r.height()+2*r.y1),row:c};break;case Rm:f.anchor={y:Math.floor(a.y1)-s,row:Wm,x:l*(i||a.width()+2*a.x1),column:c};break;case Bm:f.anchor={y:Math.ceil(a.y2)+s,x:l*(i||a.width()+2*a.x1),column:c};break;case"top-left":f.anchor={x:s,y:s};break;case"top-right":f.anchor={x:i-s,y:s,column:Wm};break;case"bottom-left":f.anchor={x:s,y:o-s,row:Wm};break;case"bottom-right":f.anchor={x:i-s,y:o-s,column:Wm,row:Wm}}return f}function Wg(e,t){var n,r,a=t.items[0],i=a.datum,o=a.orient,u=a.bounds,s=a.x,c=a.y;return a._bounds?a._bounds.clear().union(u):a._bounds=u.clone(),u.clear(),function(e,t,n){var r=t.padding,a=r-n.x,i=r-n.y;if(t.datum.title){var o=t.items[1].items[0],u=o.anchor,s=t.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case Pm:a+=Math.ceil(o.bounds.width())+s;break;case Lm:case Bm:break;default:i+=o.bounds.height()+s}switch((a||i)&&Gg(e,n,a,i),o.orient){case Pm:l+=Vg(t,n,o,u,1,1);break;case Lm:c+=Vg(t,n,o,Wm,0,0)+s,l+=Vg(t,n,o,u,1,1);break;case Bm:c+=Vg(t,n,o,u,0,0),l+=Vg(t,n,o,Wm,-1,0,1)+s;break;default:c+=Vg(t,n,o,u,0,0)}(c||l)&&Gg(e,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(Gg(e,n,-c,0),Gg(e,o,-c,0))}else(a||i)&&Gg(e,n,a,i)}(e,a,a.items[0].items[0]),u=function(e,t){return e.items.forEach((function(e){return t.union(e.bounds)})),t.x1=e.padding,t.y1=e.padding,t}(a,u),n=2*a.padding,r=2*a.padding,u.empty()||(n=Math.ceil(u.width()+n),r=Math.ceil(u.height()+r)),"symbol"===i.type&&function(e){var t=e.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(a.items[0].items[0].items[0].items),o!==ig&&(a.x=s=0,a.y=c=0),a.width=n,a.height=r,Th(u.set(s,c,s+n,c+r),a),a.mark.bounds.clear().union(u),a}function Vg(e,t,n,r,a,i,o){var u="symbol"!==e.datum.type,s=n.datum.vgrad,c=(!u||!i&&s||o?t:t.items[0]).bounds[a?"y2":"x2"]-e.padding,l=s&&i?c:0,f=s&&i?0:c,d=a<=0?0:sv(n);return Math.round(r===zm?l:r===Wm?f-d:.5*(c-d))}function Gg(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function qg(e){Zn.call(this,null,e)}function Hg(e,t,n){return e.fields=t||[],e.fname=n,e}function Xg(e){return 1===e.length?Yg(e[0]):Kg(e)}Fo(qg,Zn,{transform:function(e,t){var n,r=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&Rg(r,t,e.layout),function(e,t,n){var r,a,i,o,u,s=t.items,c=Math.max(0,t.width||0),l=Math.max(0,t.height||0),f=(new Oh).set(0,0,c,l),d=f.clone(),h=f.clone(),p=[];for(o=0,u=s.length;o<u;++o)switch((a=s[o]).role){case Gm:(jg(a)?d:h).union(Eg(e,a,c,l));break;case qm:r=a;break;case Ym:p.push(Wg(e,a));break;case Hm:case Xm:case Km:case $m:case Zm:case Jm:case Qm:case eg:d.union(a.bounds),h.union(a.bounds);break;default:f.union(a.bounds)}if(p.length){var v={};for(var m in p.forEach((function(e){(i=e.orient||Lm)!==ig&&(v[i]||(v[i]=[])).push(e)})),v){var g=v[m];Fg(e,g,Ug(g,m,n.legends,d,h,c,l))}p.forEach((function(t){var r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===ng)switch(t.orient){case Pm:case Lm:f.add(r.x1,0).add(r.x2,0);break;case Rm:case Bm:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,a){var i,o=t.items[0],u=o.frame,s=o.orient,c=o.anchor,l=o.offset,f=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],p=s===Pm||s===Lm?r:n,v=0,m=0,g=0,b=0,y=0;if(u!==Vm?s===Pm?(v=a.y2,p=a.y1):s===Lm?(v=a.y1,p=a.y2):(v=a.x1,p=a.x2):s===Pm&&(v=r,p=0),i=c===zm?v:c===Wm?p:(v+p)/2,h&&h.text){switch(s){case Rm:case Bm:y=d.bounds.height()+f;break;case Pm:b=d.bounds.width()+f;break;case Lm:b=-d.bounds.width()-f}Og.clear().union(h.bounds),Og.translate(b-(h.x||0),y-(h.y||0)),Sg(h,"x",b)|Sg(h,"y",y)&&(e.dirty(h),h.bounds.clear().union(Og),h.mark.bounds.clear().union(Og),e.dirty(h)),Og.clear().union(h.bounds)}else Og.clear();switch(Og.union(d.bounds),s){case Rm:m=i,g=a.y1-Og.height()-l;break;case Pm:m=a.x1-Og.width()-l,g=i;break;case Lm:m=a.x2+Og.width()+l,g=i;break;case Bm:m=i,g=a.y2+l;break;default:m=o.x,g=o.y}return Sg(o,"x",m)|Sg(o,"y",g)&&(Og.translate(m,g),e.dirty(o),o.bounds.clear().union(Og),t.bounds.clear().union(Og),e.dirty(o)),o.bounds}(e,r,c,l,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){var a=r.autosize||{},i=a.type;if(e._autosize<1||!i)return;var o=e._width,u=e._height,s=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.x2-s)),h=Math.max(0,Math.ceil(n.y2-l));if(a.contains===tg){var p=e.padding();o-=p.left+p.right,u-=p.top+p.bottom}i===ig?(c=0,f=0,s=o,l=u):i===ng?(s=Math.max(0,o-c-d),l=Math.max(0,u-f-h)):i===rg?(s=Math.max(0,o-c-d),u=l+f+h):i===ag?(o=s+c+d,l=Math.max(0,u-f-h)):"pad"===i&&(o=s+c+d,u=l+f+h);e._resizeView(o,u,s,l,[c,f],a.resize)}(e,t,f,n)}(r,t,e)})),(n=e.mark.group)&&"legend-entry"!==n.mark.role?t.reflow():t}});var Yg=function(e){return function(t){return t[e]}},Kg=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function $g(e){throw Error(e)}function Zg(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||$g("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&$g("Access path missing closing bracket: "+e),o&&$g("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function Jg(e,t,n){var r=Zg(e);return e=1===r.length?r[0]:e,Hg((n&&n.get||Xg)(r),[e],t||e)}Jg("id");var Qg=Hg((function(e){return e}),[],"identity"),eb=(Hg((function(){return 0}),[],"zero"),Hg((function(){return 1}),[],"one")),tb=(Hg((function(){return!0}),[],"true"),Hg((function(){return!1}),[],"false"));var nb=Array.isArray;function rb(e){return e===Object(e)}function ab(e){return e[e.length-1]}function ib(e){return null==e||""===e?null:+e}var ob=function(e){return function(t){return e*Math.exp(t)}},ub=function(e){return function(t){return Math.log(e*t)}},sb=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},cb=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},lb=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function fb(e,t,n,r,a){var i=r(e[0]),o=r(ab(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function db(e,t,n,r){return fb(e,t,n,lb(r),lb(1/r))}function hb(e){return null!=e?nb(e)?e:[e]:[]}function pb(e){return"function"===typeof e}function vb(e){return pb(e)?e:function(){return e}}var mb=Object.prototype.hasOwnProperty;function gb(e,t){return mb.call(e,t)}var bb={};function yb(e){var t,n={};function r(e){return gb(n,e)&&n[e]!==bb}var a={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++a.size,n[e]===bb&&--a.empty),n[e]=t,this},delete:function(e){return r(e)&&(--a.size,++a.empty,n[e]=bb),this},clear:function(){a.size=a.empty=0,a.object=n={}},test:function(e){return arguments.length?(t=e,a):t},clean:function(){var e={},r=0;for(var i in n){var o=n[i];o===bb||t&&t(o)||(e[i]=o,++r)}a.size=r,a.empty=0,a.object=n=e}};return e&&Object.keys(e).forEach((function(t){a.set(t,e[t])})),a}function xb(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}(r,n)}function _b(e){return"number"===typeof e}function wb(e){return"string"===typeof e}function kb(e){return nb(e)?"["+e.map(kb)+"]":rb(e)||wb(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var Ob,Sb;function jb(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function Eb(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}var Cb="linear",Ab="log",Tb="pow",Nb="sqrt",Mb="symlog",Db="time",Ib="utc",Fb="sequential",Rb="diverging",Pb="quantile",Lb="quantize",Bb="threshold",zb="ordinal",Ub="point",Wb="band",Vb="bin-ordinal",Gb="continuous",qb="discrete",Hb="discretizing",Xb="interpolating",Yb="temporal";function Kb(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=Eb(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return Kb().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function $b(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return $b(t())},e}var Zb=Array.prototype.map;function Jb(e){return Zb.call(e,ib)}var Qb=Array.prototype.slice;var ey={};function ty(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=jb(hb(n)),r}function ny(e,t,n){return arguments.length>1?(ey[e]=ty(e,t,n),this):ry(e)?ey[e]:void 0}function ry(e){return gb(ey,e)}function ay(e,t){var n=ey[e];return n&&n.metadata[t]}function iy(e){return ay(e,Gb)}function oy(e){return ay(e,Ab)}function uy(e){return ay(e,Xb)}ny("identity",Sc),ny(Cb,Oc,Gb),ny(Ab,Ic,[Gb,Ab]),ny(Tb,Bc,Gb),ny(Nb,zc,Gb),ny(Mb,Gc,Gb),ny(Db,cl,[Gb,Yb]),ny(Ib,ml,[Gb,Yb]),ny(Fb,yl,[Gb,Xb]),ny("".concat(Fb,"-").concat(Cb),yl,[Gb,Xb]),ny("".concat(Fb,"-").concat(Ab),xl,[Gb,Xb,Ab]),ny("".concat(Fb,"-").concat(Tb),wl,[Gb,Xb]),ny("".concat(Fb,"-").concat(Nb),kl,[Gb,Xb]),ny("".concat(Fb,"-").concat(Mb),_l,[Gb,Xb]),ny("".concat(Rb,"-").concat(Cb),jl,[Gb,Xb]),ny("".concat(Rb,"-").concat(Ab),El,[Gb,Xb,Ab]),ny("".concat(Rb,"-").concat(Tb),Al,[Gb,Xb]),ny("".concat(Rb,"-").concat(Nb),Tl,[Gb,Xb]),ny("".concat(Rb,"-").concat(Mb),Cl,[Gb,Xb]),ny(Pb,Nl,[Hb,Pb]),ny(Lb,Ml,Hb),ny(Bb,Dl,Hb),ny(Vb,(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=Jb(e),r):t.slice()},r.range=function(e){return arguments.length?(n=Qb.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],ab(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[qb,Hb]),ny(zb,ss,qb),ny(Wb,Kb,qb),ny(Ub,(function(){return $b(Kb().paddingInner(1))}),qb);var sy=["clamp","base","constant","exponent"];function cy(e,t,n){return Ol(ly(t||"rgb",n),e)}function ly(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function fy(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function dy(e,t){for(var n in e)py(n,t(e[n]))}var hy={};function py(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hy[e]=t,this):hy[e]}dy({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},fy),dy({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return cy(fy(e))}));var vy="symbol",my=function(e){return nb(e)?e.map((function(e){return String(e)})):String(e)},gy=function(e,t){return e[1]-t[1]},by=function(e,t){return t[1]-e[1]};function yy(e,t,n){var r,a;return _b(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(((a=e.domain())&&ab(a)-a[0]||0)/n||1)))),rb(t)&&(r=t.step,t=t.interval),wb(t)&&(t=e.type===Db?Object(Ua.p)(t):e.type==Ib?Object(Ua.v)(t):$g("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function xy(e,t,n){var r=e.range(),a=r[0],i=ab(r),o=gy;if(a>i&&(r=i,i=a,a=r,o=by),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],ab(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}function _y(e,t){return e.bins?xy(e,e.bins):e.ticks?e.ticks(t):e.domain()}function wy(e,t,n,r,a,i){var o=t.type,u=my;if(o===Db||a===Db)u=e.timeFormat(r);else if(o===Ib||a===Ib)u=e.utcFormat(r);else if(oy(o)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=ky(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function ky(e,t,n){var r=_y(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var Oy=(Ob={},Object(go.a)(Ob,Pb,"quantiles"),Object(go.a)(Ob,Lb,"thresholds"),Object(go.a)(Ob,Bb,"domain"),Ob),Sy=(Sb={},Object(go.a)(Sb,Pb,"quantiles"),Object(go.a)(Sb,Lb,"domain"),Sb);function jy(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=ab(e),t}(e.bins):e.type===Ab?ky(e,t,!0):Oy[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[Oy[e.type]]()):_y(e,t)}function Ey(e,t,n,r,a,i,o){var u=Sy[t.type]&&i!==Db&&i!==Ib?function(e,t,n){var r,a=t[Sy[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):wy(e,t,n,a,i,o);return r===vy&&function(e){return Oy[e.type]||e.bins}(t)?Cy(u):"discrete"===r?Ty(u):Ny(u)}var Cy=function(e){return function(t,n,r){var a=Ay(r[n+1],Ay(r.max,1/0)),i=My(t,e),o=My(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},Ay=function(e,t){return null!=e?e:t},Ty=function(e){return function(t,n){return n?e(t):null}},Ny=function(e){return function(t){return e(t)}},My=function(e,t){return Number.isFinite(e)?t(e):null};function Dy(e,t){var n=0;if(void 0===t){var r,a=Object(tr.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;(i=+i)&&(n+=i)}}catch(l){a.e(l)}finally{a.f()}}else{var o,u=-1,s=Object(tr.a)(e);try{for(s.s();!(o=s.n()).done;){var c=o.value;(c=+t(c,++u,e))&&(n+=c)}}catch(l){s.e(l)}finally{s.f()}}return n}function Iy(e){Zn.call(this,null,e)}function Fy(e){Zn.call(this,null,e)}function Ry(){return vn({})}function Py(e){Zn.call(this,null,e)}function Ly(e){Zn.call(this,[],e)}xb(Iy,Zn,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=this.value,i=e.scale,o=yy(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),u=e.format||wy(n,i,o,e.formatSpecifier,e.formatType,!!e.values),s=e.values?xy(i,e.values,o):_y(i,o);return a&&(r.rem=a),a=s.map((function(e,t){return vn({index:t/(s.length-1||1),value:e,label:u(e)})})),e.extra&&a.length&&a.push(vn({index:-1,extra:{value:a[0].value},label:""})),r.source=a,r.add=a,this.value=a,r}}),xb(Fy,Zn,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=e.item||Ry,i=e.key||hn,o=this.value;return nb(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(i))&&$g("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=function(e){var t=yb().test((function(e){return e.exit}));return t.lookup=function(n){return t.get(e(n))},t}(i)),t.visit(t.ADD,(function(e){var t=i(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(n=a(e),o.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=i(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=i(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}}),xb(Py,Zn,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,a=e.encoders,i=t.encode;if(nb(i)){if(!n.changed()&&!i.every((function(e){return a[e]})))return t.StopPropagation;i=i[0],n.encode=null}var o="enter"===i,u=a.update||tb,s=a.enter||tb,c=a.exit||tb,l=(i&&!o?a[i]:u)||tb;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){s(t,e),u(t,e)})),n.modifies(s.output),n.modifies(u.output),l!==tb&&l!==u&&(t.visit(t.ADD,(function(t){l(t,e)})),n.modifies(l.output))),t.changed(t.REM)&&c!==tb&&(t.visit(t.REM,(function(t){c(t,e)})),n.modifies(c.output)),o||l!==tb){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,(function(t){var a=s(t,e)||r;(l(t,e)||a)&&n.mod.push(t)})),n.mod.length&&n.modifies(s.output)):t.visit(f,(function(t){(l(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:t.StopPropagation}}),xb(Ly,Zn,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,a,i,o,u=t.dataflow.locale(),s=t.fork(t.NO_SOURCE|t.NO_FIELDS),c=this.value,l=e.type||vy,f=e.scale,d=+e.limit,h=yy(f,null==e.count?5:e.count,e.minstep),p=!!e.values||l===vy,v=e.format||Ey(u,f,h,l,e.formatSpecifier,e.formatType,p),m=e.values||jy(f,h);return c&&(s.rem=c),l===vy?(d&&m.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=m.slice(0,d-1),o=!0):c=m,pb(a=e.size)?(e.values||0!==f(c[0])||(c=c.slice(1)),i=c.reduce((function(t,n){return Math.max(t,a(n,e))}),0)):a=vb(i=a||8),c=c.map((function(t,n){return vn({index:n,label:v(t,n,c),value:t,offset:i,size:a(t,e)})})),o&&(o=m[c.length],c.push(vn({index:c.length,label:"\u2026".concat(m.length-c.length," entries"),value:o,offset:i,size:a(o,e)})))):"gradient"===l?(n=f.domain(),r=function(e,t,n){var r,a,i,o=n-t;return o&&Number.isFinite(o)?(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),i=ny(a)().domain([t,n]).range([0,1]),sy.forEach((function(t){return e[t]?i[t](e[t]()):0})),i):vb(.5)}(f,n[0],ab(n)),m.length<3&&!e.values&&n[0]!==ab(n)&&(m=[n[0],ab(n)]),c=m.map((function(e,t){return vn({index:t,label:v(e,t,m),value:e,perc:r(e)})}))):(a=m.length-1,r=function(e){var t=e.domain(),n=t.length-1,r=+t[0],a=+ab(t),i=a-r;if(e.type===Bb){var o=n?i/n:.1;i=(a+=o)-(r-=o)}return function(e){return(e-r)/i}}(f),c=m.map((function(e,t){return vn({index:t,label:v(e,t,m),value:e,perc:t?r(e):0,perc2:t===a?1:r(m[t+1])})}))),s.source=c,s.add=c,this.value=c,s}});var By=function(e){return e.source.x},zy=function(e){return e.source.y},Uy=function(e){return e.target.x},Wy=function(e){return e.target.y};function Vy(e){Zn.call(this,{},e)}Vy.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},xb(Vy,Zn,{transform:function(e,t){var n=e.sourceX||By,r=e.sourceY||zy,a=e.targetX||Uy,i=e.targetY||Wy,o=e.as||"path",u=e.orient||"vertical",s=e.shape||"line",c=Xy.get(s+"-"+u)||Xy.get(s);return c||$g("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=c(n(e),r(e),a(e),i(e))})),t.reflow(e.modified()).modifies(o)}});var Gy=function(e,t,n,r){return"M"+e+","+t+"L"+n+","+r},qy=function(e,t,n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(i,a)/Math.PI+" 0 1 "+n+","+r},Hy=function(e,t,n,r){var a=n-e,i=r-t,o=.2*(a+i),u=.2*(i-a);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(r-o)+" "+n+","+r},Xy=yb({line:Gy,"line-radial":function(e,t,n,r){return Gy(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:qy,"arc-radial":function(e,t,n,r){return qy(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:Hy,"curve-radial":function(e,t,n,r){return Hy(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n);return"M"+t*a+","+t*i+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*o+","+t*u+"L"+r*o+","+r*u},"diagonal-horizontal":function(e,t,n,r){var a=(e+n)/2;return"M"+e+","+t+"C"+a+","+t+" "+a+","+r+" "+n+","+r},"diagonal-vertical":function(e,t,n,r){var a=(t+r)/2;return"M"+e+","+t+"C"+e+","+a+" "+n+","+a+" "+n+","+r},"diagonal-radial":function(e,t,n,r){var a=Math.cos(e),i=Math.sin(e),o=Math.cos(n),u=Math.sin(n),s=(t+r)/2;return"M"+t*a+","+t*i+"C"+s*a+","+s*i+" "+s*o+","+s*u+" "+r*o+","+r*u}});function Yy(e){Zn.call(this,null,e)}Yy.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},xb(Yy,Zn,{transform:function(e,t){var n,r,a,i=e.as||["startAngle","endAngle"],o=i[0],u=i[1],s=e.field||eb,c=e.startAngle||0,l=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(s),h=d.length,p=c,v=(l-c)/Dy(d),m=Ba(h);for(e.sort&&m.sort((function(e,t){return d[e]-d[t]})),n=0;n<h;++n)a=d[m[n]],(r=f[m[n]])[o]=p,r[u]=p+=a*v;return this.value=d,t.reflow(e.modified()).modifies(i)}});function Ky(e){return iy(e)&&e!==Fb}var $y=jb(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Zy(e){Zn.call(this,null,e),this.modified(!0)}function Jy(e,t,n){oy(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+kb(t)));return t}function Qy(e,t,n){return pb(e)&&(t||n)?function(e,t){var n=t[0],r=ab(t)-n;return function(t){return e(n+t*r)}}(e,ex(t||[0,1],n)):e}function ex(e,t){return t?e.slice().reverse():e}function tx(e){Zn.call(this,null,e)}xb(Zy,Zn,{transform:function(e,t){var n=t.dataflow,r=this.value,a=function(e){var t,n=e.type,r="";if(n===Fb)return"sequential-linear";(function(e){var t=e.type;return iy(t)&&t!==Db&&t!==Ib&&(e.scheme||e.range&&e.range.length&&e.range.every(wb))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||Cb).toLowerCase()}(e);for(a in r&&a===r.type||(this.value=r=ny(a)()),e)if(!$y[a]){if("padding"===a&&Ky(r.type))continue;pb(r[a])?r[a](e[a]):n.warn("Unsupported scale property: "+a)}return function(e,t,n){var r=e.type,a=t.round||!1,i=t.range;if(null!=t.rangeStep)i=function(e,t,n){e!==Wb&&e!==Ub&&$g("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,a=e===Ub?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Eb(n,a,r)]}(r,t,n);else if(t.scheme&&(i=function(e,t,n){var r,a=t.schemeExtent;nb(t.scheme)?r=cy(t.scheme,t.interpolate,t.interpolateGamma):(r=py(t.scheme.toLowerCase()))||$g("Unrecognized scheme name: ".concat(t.scheme));return n=e===Bb?n+1:e===Vb?n-1:e===Pb||e===Lb?+t.schemeCount||5:n,uy(e)?Qy(r,a,t.reverse):pb(r)?function(e,t){for(var n=new Array(t),r=t+1,a=0;a<t;)n[a]=e(++a/r);return n}(Qy(r,a),n):e===zb?r:r.slice(0,n)}(r,t,n),pb(i))){if(e.interpolator)return e.interpolator(i);$g("Scale type ".concat(r," does not support interpolating color schemes."))}if(i&&uy(r))return e.interpolator(cy(ex(i,t.reverse),t.interpolate,t.interpolateGamma));i&&t.interpolate&&e.interpolate?e.interpolate(ly(t.interpolate,t.interpolateGamma)):pb(e.round)?e.round(a):pb(e.rangeRound)&&e.interpolate(a?hc:dc);i&&e.range(ex(i,t.reverse))}(r,e,function(e,t,n){var r=t.bins;if(r&&!nb(r)){var a=e.domain(),i=a[0],o=ab(a),u=r.step,s=null==r.start?i:r.start,c=null==r.stop?o:r.stop;u||$g("Scale bins parameter missing step property."),s<i&&(s=u*Math.ceil(i/u)),c>o&&(c=u*Math.floor(o/u)),r=Ba(s,c+u/2,u)}r?e.bins=r:e.bins&&delete e.bins;e.type===Vb&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){var r=function(e,t,n){return t?(e.domain(Jy(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var a,i,o=t.domain,u=e.type,s=t.zero||void 0===t.zero&&function(e){var t=e.type;return!e.bins&&(t===Cb||t===Tb||t===Nb)}(e);if(!o)return 0;Ky(u)&&t.padding&&o[0]!==ab(o)&&(o=function(e,t,n,r,a,i){var o=Math.abs(ab(n)-n[0]),u=o/(o-2*r),s=e===Ab?function(e,t,n){var r=Math.sign(e[0]);return fb(e,t,n,ub(r),ob(r))}(t,null,u):e===Nb?db(t,null,u,.5):e===Tb?db(t,null,u,a||1):e===Mb?function(e,t,n,r){return fb(e,t,n,sb(r),cb(r))}(t,null,u,i||1):function(e,t,n){return fb(e,t,n,ib,Qg)}(t,null,u);return(t=t.slice())[0]=s[0],t[t.length-1]=s[1],t}(u,o,t.range,t.padding,t.exponent,t.constant));if((s||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(o=o.slice()).length-1||1,s&&(o[0]>0&&(o[0]=0),o[a]<0&&(o[a]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[a]=t.domainMax),null!=t.domainMid)){var c=(i=t.domainMid)>o[a]?a+1:i<o[0]?0:a;c!==a&&n.warn("Scale domainMid exceeds domain min or max.",i),o.splice(c,0,i)}e.domain(Jy(u,o,n)),u===zb&&e.unknown(t.domainImplicit?us:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&yy(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),xb(tx,Zn,{transform:function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(yn(e.sort)),this.modified(n),t}});var nx="zero",rx="center",ax="normalize",ix=["y0","y1"];function ox(e){Zn.call(this,null,e)}function ux(e,t,n,r,a){for(var i,o=(t-e.sum)/2,u=e.length,s=0;s<u;++s)(i=e[s])[r]=o,i[a]=o+=Math.abs(n(i))}function sx(e,t,n,r,a){for(var i,o=1/e.sum,u=0,s=e.length,c=0,l=0;c<s;++c)(i=e[c])[r]=u,i[a]=u=o*(l+=Math.abs(n(i)))}function cx(e,t,n,r,a){for(var i,o,u=0,s=0,c=e.length,l=0;l<c;++l)(i=+n(o=e[l]))<0?(o[r]=s,o[a]=s+=i):(o[r]=u,o[a]=u+=i)}function lx(e,t,n){return e.fields=t||[],e.fname=n,e}function fx(e){return null==e?null:e.fname}function dx(e){return null==e?null:e.fields}function hx(e){return 1===e.length?px(e[0]):vx(e)}ox.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:nx,values:[nx,rx,ax]},{name:"as",type:"string",array:!0,length:2,default:ix}]},xb(ox,Zn,{transform:function(e,t){var n,r,a,i,o=e.as||ix,u=o[0],s=o[1],c=yn(e.sort),l=e.field||eb,f=e.offset===rx?ux:e.offset===ax?sx:cx;for(n=function(e,t,n,r){var a,i,o,u,s,c,l,f,d,h=[],p=function(e){return e(s)};if(null==t)h.push(e.slice());else for(a={},i=0,o=e.length;i<o;++i)s=e[i],(l=a[c=t.map(p)])||(a[c]=l=[],h.push(l)),l.push(s);for(c=0,d=0,u=h.length;c<u;++c){for(i=0,f=0,o=(l=h[c]).length;i<o;++i)f+=Math.abs(r(l[i]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return h.max=d,h}(t.source,e.groupby,c,l),r=0,a=n.length,i=n.max;r<a;++r)f(n[r],i,l,u,s);return t.reflow(e.modified()).modifies(o)}});var px=function(e){return function(t){return t[e]}},vx=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function mx(e){throw Error(e)}function gx(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||mx("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&mx("Access path missing closing bracket: "+e),o&&mx("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function bx(e,t,n){var r=gx(e);return e=1===r.length?r[0]:e,lx((n&&n.get||hx)(r),[e],t||e)}bx("id");var yx=lx((function(e){return e}),[],"identity"),xx=lx((function(){return 0}),[],"zero"),_x=lx((function(){return 1}),[],"one");lx((function(){return!0}),[],"true"),lx((function(){return!1}),[],"false");var wx=Array.isArray;function kx(e){return null!=e?wx(e)?e:[e]:[]}function Ox(e){return"function"===typeof e}function Sx(e){return Ox(e)?e:function(){return e}}function jx(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}Object.prototype.hasOwnProperty;function Ex(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,jx(r,n)}function Cx(e){return"number"===typeof e}var Ax=function(e){return e};function Tx(e,t){e&&Mx.hasOwnProperty(e.type)&&Mx[e.type](e,t)}var Nx={Feature:function(e,t){Tx(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)Tx(n[r].geometry,t)}},Mx={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Dx(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Dx(n[r],t,0)},Polygon:function(e,t){Ix(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)Ix(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)Tx(n[r],t)}};function Dx(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ix(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Dx(e[n],t,1);t.polygonEnd()}var Fx=function(e,t){e&&Nx.hasOwnProperty(e.type)?Nx[e.type](e,t):Tx(e,t)},Rx=n(1),Px=n(9),Lx=function(){function e(){Object(Rx.a)(this,e),this._partials=new Float64Array(32),this._n=0}return Object(Px.a)(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var a=t[r],i=e+a,o=Math.abs(e)<Math.abs(a)?e-(i-a):a-(i-e);o&&(t[n++]=o),e=i}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,a=this._n,i=0;if(a>0){for(i=r[--a];a>0&&(e=i,!(n=(t=r[--a])-((i=e+t)-e))););a>0&&(n<0&&r[a-1]<0||n>0&&r[a-1]>0)&&(t=2*n)==(e=i+t)-i&&(i=e)}return i}}]),e}();var Bx=1e-6,zx=1e-12,Ux=Math.PI,Wx=Ux/2,Vx=Ux/4,Gx=2*Ux,qx=180/Ux,Hx=Ux/180,Xx=Math.abs,Yx=Math.atan,Kx=Math.atan2,$x=Math.cos,Zx=Math.ceil,Jx=Math.exp,Qx=(Math.floor,Math.hypot),e_=Math.log,t_=Math.pow,n_=Math.sin,r_=Math.sign||function(e){return e>0?1:e<0?-1:0},a_=Math.sqrt,i_=Math.tan;function o_(e){return e>1?0:e<-1?Ux:Math.acos(e)}function u_(e){return e>1?Wx:e<-1?-Wx:Math.asin(e)}function s_(){}var c_,l_,f_,d_,h_=new Lx,p_=new Lx,v_={point:s_,lineStart:s_,lineEnd:s_,polygonStart:function(){v_.lineStart=m_,v_.lineEnd=y_},polygonEnd:function(){v_.lineStart=v_.lineEnd=v_.point=s_,h_.add(Xx(p_)),p_=new Lx},result:function(){var e=h_/2;return h_=new Lx,e}};function m_(){v_.point=g_}function g_(e,t){v_.point=b_,c_=f_=e,l_=d_=t}function b_(e,t){p_.add(d_*e-f_*t),f_=e,d_=t}function y_(){b_(c_,l_)}var x_=v_,__=1/0,w_=__,k_=-__,O_=k_;var S_,j_,E_,C_,A_={point:function(e,t){e<__&&(__=e);e>k_&&(k_=e);t<w_&&(w_=t);t>O_&&(O_=t)},lineStart:s_,lineEnd:s_,polygonStart:s_,polygonEnd:s_,result:function(){var e=[[__,w_],[k_,O_]];return k_=O_=-(w_=__=1/0),e}},T_=0,N_=0,M_=0,D_=0,I_=0,F_=0,R_=0,P_=0,L_=0,B_={point:z_,lineStart:U_,lineEnd:G_,polygonStart:function(){B_.lineStart=q_,B_.lineEnd=H_},polygonEnd:function(){B_.point=z_,B_.lineStart=U_,B_.lineEnd=G_},result:function(){var e=L_?[R_/L_,P_/L_]:F_?[D_/F_,I_/F_]:M_?[T_/M_,N_/M_]:[NaN,NaN];return T_=N_=M_=D_=I_=F_=R_=P_=L_=0,e}};function z_(e,t){T_+=e,N_+=t,++M_}function U_(){B_.point=W_}function W_(e,t){B_.point=V_,z_(E_=e,C_=t)}function V_(e,t){var n=e-E_,r=t-C_,a=a_(n*n+r*r);D_+=a*(E_+e)/2,I_+=a*(C_+t)/2,F_+=a,z_(E_=e,C_=t)}function G_(){B_.point=z_}function q_(){B_.point=X_}function H_(){Y_(S_,j_)}function X_(e,t){B_.point=Y_,z_(S_=E_=e,j_=C_=t)}function Y_(e,t){var n=e-E_,r=t-C_,a=a_(n*n+r*r);D_+=a*(E_+e)/2,I_+=a*(C_+t)/2,F_+=a,R_+=(a=C_*e-E_*t)*(E_+e),P_+=a*(C_+t),L_+=3*a,z_(E_=e,C_=t)}var K_=B_;function $_(e){this._context=e}$_.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Gx)}},result:s_};var Z_,J_,Q_,ew,tw,nw=new Lx,rw={point:s_,lineStart:function(){rw.point=aw},lineEnd:function(){Z_&&iw(J_,Q_),rw.point=s_},polygonStart:function(){Z_=!0},polygonEnd:function(){Z_=null},result:function(){var e=+nw;return nw=new Lx,e}};function aw(e,t){rw.point=iw,J_=ew=e,Q_=tw=t}function iw(e,t){ew-=e,tw-=t,nw.add(a_(ew*ew+tw*tw)),ew=e,tw=t}var ow=rw;function uw(){this._string=[]}function sw(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}uw.prototype={_radius:4.5,_circle:sw(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=sw(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var cw=function(e,t){var n,r,a=4.5;function i(e){return e&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),Fx(e,n(r))),r.result()}return i.area=function(e){return Fx(e,n(x_)),x_.result()},i.measure=function(e){return Fx(e,n(ow)),ow.result()},i.bounds=function(e){return Fx(e,n(A_)),A_.result()},i.centroid=function(e){return Fx(e,n(K_)),K_.result()},i.projection=function(t){return arguments.length?(n=null==t?(e=null,Ax):(e=t).stream,i):e},i.context=function(e){return arguments.length?(r=null==e?(t=null,new uw):new $_(t=e),"function"!==typeof a&&r.pointRadius(a),i):t},i.pointRadius=function(e){return arguments.length?(a="function"===typeof e?e:(r.pointRadius(+e),+e),i):a},i.projection(e).context(t)},lw=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:s_,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},fw=function(e,t){return Xx(e[0]-t[0])<Bx&&Xx(e[1]-t[1])<Bx};function dw(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var hw=function(e,t,n,r,a){var i,o,u=[],s=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(fw(r,o)){if(!r[2]&&!o[2]){for(a.lineStart(),i=0;i<t;++i)a.point((r=e[i])[0],r[1]);return void a.lineEnd()}o[0]+=2e-6}u.push(n=new dw(r,e,null,!0)),s.push(n.o=new dw(r,null,n,!1)),u.push(n=new dw(o,e,null,!1)),s.push(n.o=new dw(o,null,n,!0))}})),u.length){for(s.sort(t),pw(u),pw(s),i=0,o=s.length;i<o;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(i=0,o=c.length;i<o;++i)a.point((l=c[i])[0],l[1]);else r(d.x,d.n.x,1,a);d=d.n}else{if(h)for(c=d.p.z,i=c.length-1;i>=0;--i)a.point((l=c[i])[0],l[1]);else r(d.x,d.p.x,-1,a);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);a.lineEnd()}}};function pw(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function vw(e){return[Kx(e[1],e[0]),u_(e[2])]}function mw(e){var t=e[0],n=e[1],r=$x(n);return[r*$x(t),r*n_(t),n_(n)]}function gw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bw(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yw(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function xw(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _w(e){var t=a_(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ww(e){return Xx(e[0])<=Ux?e[0]:r_(e[0])*((Xx(e[0])+Ux)%Gx-Ux)}var kw=w.a.mark(Ow);function Ow(e){var t,n,r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=Object(tr.a)(e),a.prev=1,t.s();case 3:if((n=t.n()).done){a.next=8;break}return r=n.value,a.delegateYield(r,"t0",6);case 6:a.next=3;break;case 8:a.next=13;break;case 10:a.prev=10,a.t1=a.catch(1),t.e(a.t1);case 13:return a.prev=13,t.f(),a.finish(13);case 16:case"end":return a.stop()}}),kw,null,[[1,10,13,16]])}function Sw(e){return Array.from(Ow(e))}var jw=function(e,t,n,r){return function(a){var i,o,u,s=t(a),c=lw(),l=t(c),f=!1,d={point:h,lineStart:v,lineEnd:m,polygonStart:function(){d.point=g,d.lineStart=b,d.lineEnd=y,o=[],i=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=m,o=Sw(o);var e=function(e,t){var n=ww(t),r=t[1],a=n_(r),i=[n_(n),-$x(n),0],o=0,u=0,s=new Lx;1===a?r=Wx+Bx:-1===a&&(r=-Wx-Bx);for(var c=0,l=e.length;c<l;++c)if(d=(f=e[c]).length)for(var f,d,h=f[d-1],p=ww(h),v=h[1]/2+Vx,m=n_(v),g=$x(v),b=0;b<d;++b,p=x,m=w,g=k,h=y){var y=f[b],x=ww(y),_=y[1]/2+Vx,w=n_(_),k=$x(_),O=x-p,S=O>=0?1:-1,j=S*O,E=j>Ux,C=m*w;if(s.add(Kx(C*S*n_(j),g*k+C*$x(j))),o+=E?O+S*Gx:O,E^p>=n^x>=n){var A=bw(mw(h),mw(y));_w(A);var T=bw(i,A);_w(T);var N=(E^O>=0?-1:1)*u_(T[2]);(r>N||r===N&&(A[0]||A[1]))&&(u+=E^O>=0?1:-1)}}return(o<-1e-6||o<Bx&&s<-1e-12)^1&u}(i,r);o.length?(f||(a.polygonStart(),f=!0),hw(o,Cw,e,n,a)):e&&(f||(a.polygonStart(),f=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),f&&(a.polygonEnd(),f=!1),o=i=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function h(t,n){e(t,n)&&a.point(t,n)}function p(e,t){s.point(e,t)}function v(){d.point=p,s.lineStart()}function m(){d.point=h,s.lineEnd()}function g(e,t){u.push([e,t]),l.point(e,t)}function b(){l.lineStart(),u=[]}function y(){g(u[0][0],u[0][1]),l.lineEnd();var e,t,n,r,s=l.clean(),d=c.result(),h=d.length;if(u.pop(),i.push(u),u=null,h)if(1&s){if((t=(n=d[0]).length-1)>0){for(f||(a.polygonStart(),f=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else h>1&&2&s&&d.push(d.pop().concat(d.shift())),o.push(d.filter(Ew))}return d}};function Ew(e){return e.length>1}function Cw(e,t){return((e=e.x)[0]<0?e[1]-Wx-Bx:Wx-e[1])-((t=t.x)[0]<0?t[1]-Wx-Bx:Wx-t[1])}var Aw=jw((function(){return!0}),(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var u=i>0?Ux:-Ux,s=Xx(i-n);Xx(s-Ux)<Bx?(e.point(n,r=(r+o)/2>0?Wx:-Wx),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(i,r),t=0):a!==u&&s>=Ux&&(Xx(n-a)<Bx&&(n-=a*Bx),Xx(i-u)<Bx&&(i-=u*Bx),r=function(e,t,n,r){var a,i,o=n_(e-n);return Xx(o)>Bx?Yx((n_(t)*(i=$x(r))*n_(n)-n_(r)*(a=$x(t))*n_(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=i,r=o),a=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*Wx,r.point(-Ux,a),r.point(0,a),r.point(Ux,a),r.point(Ux,0),r.point(Ux,-a),r.point(0,-a),r.point(-Ux,-a),r.point(-Ux,0),r.point(-Ux,a);else if(Xx(e[0]-t[0])>Bx){var i=e[0]<t[0]?Ux:-Ux;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-Ux,-Wx]);var Tw=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function Nw(e,t){return[Xx(e)>Ux?e+Math.round(-e/Gx)*Gx:e,t]}function Mw(e,t,n){return(e%=Gx)?t||n?Tw(Iw(e),Fw(t,n)):Iw(e):t||n?Fw(t,n):Nw}function Dw(e){return function(t,n){return[(t+=e)>Ux?t-Gx:t<-Ux?t+Gx:t,n]}}function Iw(e){var t=Dw(e);return t.invert=Dw(-e),t}function Fw(e,t){var n=$x(e),r=n_(e),a=$x(t),i=n_(t);function o(e,t){var o=$x(t),u=$x(e)*o,s=n_(e)*o,c=n_(t),l=c*n+u*r;return[Kx(s*a-l*i,u*n-c*r),u_(l*a+s*i)]}return o.invert=function(e,t){var o=$x(t),u=$x(e)*o,s=n_(e)*o,c=n_(t),l=c*a-s*i;return[Kx(s*a+c*i,u*n+l*r),u_(l*n-u*r)]},o}Nw.invert=Nw;function Rw(e,t,n,r,a,i){if(n){var o=$x(t),u=n_(t),s=r*n;null==a?(a=t+r*Gx,i=t-s/2):(a=Pw(o,a),i=Pw(o,i),(r>0?a<i:a>i)&&(a+=r*Gx));for(var c,l=a;r>0?l>i:l<i;l-=s)c=vw([o,-u*$x(l),-u*n_(l)]),e.point(c[0],c[1])}}function Pw(e,t){(t=mw(t))[0]-=e,_w(t);var n=o_(-t[1]);return((-t[2]<0?-n:n)+Gx-Bx)%Gx}var Lw=function(e){var t=$x(e),n=6*Hx,r=t>0,a=Xx(t)>Bx;function i(e,n){return $x(e)*$x(n)>t}function o(e,n,r){var a=[1,0,0],i=bw(mw(e),mw(n)),o=gw(i,i),u=i[0],s=o-u*u;if(!s)return!r&&e;var c=t*o/s,l=-t*u/s,f=bw(a,i),d=xw(a,c);yw(d,xw(i,l));var h=f,p=gw(d,h),v=gw(h,h),m=p*p-v*(gw(d,d)-1);if(!(m<0)){var g=a_(m),b=xw(h,(-p-g)/v);if(yw(b,d),b=vw(b),!r)return b;var y,x=e[0],_=n[0],w=e[1],k=n[1];_<x&&(y=x,x=_,_=y);var O=_-x,S=Xx(O-Ux)<Bx;if(!S&&k<w&&(y=w,w=k,k=y),S||O<Bx?S?w+k>0^b[1]<(Xx(b[0]-x)<Bx?w:k):w<=b[1]&&b[1]<=k:O>Ux^(x<=b[0]&&b[0]<=_)){var j=xw(h,(-p+g)/v);return yw(j,d),[b,vw(j)]}}}function u(t,n){var a=r?e:Ux-e,i=0;return t<-a?i|=1:t>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}return jw(i,(function(e){var t,n,s,c,l;return{lineStart:function(){c=s=!1,l=1},point:function(f,d){var h,p=[f,d],v=i(f,d),m=r?v?0:u(f,d):v?u(f+(f<0?Ux:-Ux),d):0;if(!t&&(c=s=v)&&e.lineStart(),v!==s&&(!(h=o(t,p))||fw(t,h)||fw(p,h))&&(p[2]=1),v!==s)l=0,v?(e.lineStart(),h=o(p,t),e.point(h[0],h[1])):(h=o(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(a&&t&&r^v){var g;m&n||!(g=o(p,t,!0))||(l=0,r?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1],3)))}!v||t&&fw(t,p)||e.point(p[0],p[1]),t=p,s=v,n=m},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(c&&s)<<1}}}),(function(t,r,a,i){Rw(i,e,n,a,t,r)}),r?[0,-e]:[-Ux,e-Ux])},Bw=1e9,zw=-Bw;function Uw(e,t,n,r){function a(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function i(a,i,u,c){var l=0,f=0;if(null==a||(l=o(a,u))!==(f=o(i,u))||s(a,i)<0^u>0)do{c.point(0===l||3===l?e:n,l>1?r:t)}while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function o(r,a){return Xx(r[0]-e)<Bx?a>0?0:3:Xx(r[0]-n)<Bx?a>0?2:1:Xx(r[1]-t)<Bx?a>0?1:0:a>0?3:2}function u(e,t){return s(e.x,t.x)}function s(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var s,c,l,f,d,h,p,v,m,g,b,y=o,x=lw(),_={point:w,lineStart:function(){_.point=k,c&&c.push(l=[]);g=!0,m=!1,p=v=NaN},lineEnd:function(){s&&(k(f,d),h&&m&&x.rejoin(),s.push(x.result()));_.point=w,m&&y.lineEnd()},polygonStart:function(){y=x,s=[],c=[],b=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,a=c.length;n<a;++n)for(var i,o,u=c[n],s=1,l=u.length,f=u[0],d=f[0],h=f[1];s<l;++s)i=d,o=h,d=(f=u[s])[0],h=f[1],o<=r?h>r&&(d-i)*(r-o)>(h-o)*(e-i)&&++t:h<=r&&(d-i)*(r-o)<(h-o)*(e-i)&&--t;return t}(),n=b&&t,a=(s=Sw(s)).length;(n||a)&&(o.polygonStart(),n&&(o.lineStart(),i(null,null,1,o),o.lineEnd()),a&&hw(s,u,t,i,o),o.polygonEnd());y=o,s=c=l=null}};function w(e,t){a(e,t)&&y.point(e,t)}function k(i,o){var u=a(i,o);if(c&&l.push([i,o]),g)f=i,d=o,h=u,g=!1,u&&(y.lineStart(),y.point(i,o));else if(u&&m)y.point(i,o);else{var s=[p=Math.max(zw,Math.min(Bw,p)),v=Math.max(zw,Math.min(Bw,v))],x=[i=Math.max(zw,Math.min(Bw,i)),o=Math.max(zw,Math.min(Bw,o))];!function(e,t,n,r,a,i){var o,u=e[0],s=e[1],c=0,l=1,f=t[0]-u,d=t[1]-s;if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<l&&(l=o)}return c>0&&(e[0]=u+c*f,e[1]=s+c*d),l<1&&(t[0]=u+l*f,t[1]=s+l*d),!0}}}}}(s,x,e,t,n,r)?u&&(y.lineStart(),y.point(i,o),b=!1):(m||(y.lineStart(),y.point(s[0],s[1])),y.point(x[0],x[1]),u||y.lineEnd(),b=!1)}p=i,v=o,m=u}return _}}function Ww(e){return function(t){var n=new Vw;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Vw(){}function Gw(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Fx(n,e.stream(A_)),t(A_.result()),null!=r&&e.clipExtent(r),e}function qw(e,t,n){return Gw(e,(function(n){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.min(r/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),o=+t[0][0]+(r-i*(n[1][0]+n[0][0]))/2,u=+t[0][1]+(a-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,u])}),n)}function Hw(e,t,n){return qw(e,[[0,0],t],n)}function Xw(e,t,n){return Gw(e,(function(n){var r=+t,a=r/(n[1][0]-n[0][0]),i=(r-a*(n[1][0]+n[0][0]))/2,o=-a*n[0][1];e.scale(150*a).translate([i,o])}),n)}function Yw(e,t,n){return Gw(e,(function(n){var r=+t,a=r/(n[1][1]-n[0][1]),i=-a*n[0][0],o=(r-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([i,o])}),n)}Vw.prototype={constructor:Vw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kw=$x(30*Hx),$w=function(e,t){return+t?function(e,t){function n(r,a,i,o,u,s,c,l,f,d,h,p,v,m){var g=c-r,b=l-a,y=g*g+b*b;if(y>4*t&&v--){var x=o+d,_=u+h,w=s+p,k=a_(x*x+_*_+w*w),O=u_(w/=k),S=Xx(Xx(w)-1)<Bx||Xx(i-f)<Bx?(i+f)/2:Kx(_,x),j=e(S,O),E=j[0],C=j[1],A=E-r,T=C-a,N=b*A-g*T;(N*N/y>t||Xx((g*A+b*T)/y-.5)>.3||o*d+u*h+s*p<Kw)&&(n(r,a,i,o,u,s,E,C,S,x/=k,_/=k,w,v,m),m.point(E,C),n(E,C,S,x,_,w,c,l,f,d,h,p,v,m))}}return function(t){var r,a,i,o,u,s,c,l,f,d,h,p,v={point:m,lineStart:g,lineEnd:y,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=g}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function g(){l=NaN,v.point=b,t.lineStart()}function b(r,a){var i=mw([r,a]),o=e(r,a);n(l,f,c,d,h,p,l=o[0],f=o[1],c=r,d=i[0],h=i[1],p=i[2],16,t),t.point(l,f)}function y(){v.point=m,t.lineEnd()}function x(){g(),v.point=_,v.lineEnd=w}function _(e,t){b(r=e,t),a=l,i=f,o=d,u=h,s=p,v.point=b}function w(){n(l,f,c,d,h,p,a,i,r,o,u,s,16,t),v.lineEnd=y,y()}return v}}(e,t):function(e){return Ww({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var Zw=Ww({point:function(e,t){this.stream.point(e*Hx,t*Hx)}});function Jw(e,t,n,r,a,i){if(!i)return function(e,t,n,r,a){function i(i,o){return[t+e*(i*=r),n-e*(o*=a)]}return i.invert=function(i,o){return[(i-t)/e*r,(n-o)/e*a]},i}(e,t,n,r,a);var o=$x(i),u=n_(i),s=o*e,c=u*e,l=o/e,f=u/e,d=(u*n-o*t)/e,h=(u*t+o*n)/e;function p(e,i){return[s*(e*=r)-c*(i*=a)+t,n-c*e-s*i]}return p.invert=function(e,t){return[r*(l*e-f*t+d),a*(h-f*e-l*t)]},p}function Qw(e){return ek((function(){return e}))()}function ek(e){var t,n,r,a,i,o,u,s,c,l,f=150,d=480,h=250,p=0,v=0,m=0,g=0,b=0,y=0,x=1,_=1,w=null,k=Aw,O=null,S=Ax,j=.5;function E(e){return s(e[0]*Hx,e[1]*Hx)}function C(e){return(e=s.invert(e[0],e[1]))&&[e[0]*qx,e[1]*qx]}function A(){var e=Jw(f,0,0,x,_,y).apply(null,t(p,v)),r=Jw(f,d-e[0],h-e[1],x,_,y);return n=Mw(m,g,b),u=Tw(t,r),s=Tw(n,u),o=$w(u,j),T()}function T(){return c=l=null,E}return E.stream=function(e){return c&&l===e?c:c=Zw(function(e){return Ww({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(o(S(l=e)))))},E.preclip=function(e){return arguments.length?(k=e,w=void 0,T()):k},E.postclip=function(e){return arguments.length?(S=e,O=r=a=i=null,T()):S},E.clipAngle=function(e){return arguments.length?(k=+e?Lw(w=e*Hx):(w=null,Aw),T()):w*qx},E.clipExtent=function(e){return arguments.length?(S=null==e?(O=r=a=i=null,Ax):Uw(O=+e[0][0],r=+e[0][1],a=+e[1][0],i=+e[1][1]),T()):null==O?null:[[O,r],[a,i]]},E.scale=function(e){return arguments.length?(f=+e,A()):f},E.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],A()):[d,h]},E.center=function(e){return arguments.length?(p=e[0]%360*Hx,v=e[1]%360*Hx,A()):[p*qx,v*qx]},E.rotate=function(e){return arguments.length?(m=e[0]%360*Hx,g=e[1]%360*Hx,b=e.length>2?e[2]%360*Hx:0,A()):[m*qx,g*qx,b*qx]},E.angle=function(e){return arguments.length?(y=e%360*Hx,A()):y*qx},E.reflectX=function(e){return arguments.length?(x=e?-1:1,A()):x<0},E.reflectY=function(e){return arguments.length?(_=e?-1:1,A()):_<0},E.precision=function(e){return arguments.length?(o=$w(u,j=e*e),T()):a_(j)},E.fitExtent=function(e,t){return qw(E,e,t)},E.fitSize=function(e,t){return Hw(E,e,t)},E.fitWidth=function(e,t){return Xw(E,e,t)},E.fitHeight=function(e,t){return Yw(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&C,A()}}function tk(e){var t=0,n=Ux/3,r=ek(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Hx,n=e[1]*Hx):[t*qx,n*qx]},a}function nk(e,t){var n=n_(e),r=(n+n_(t))/2;if(Xx(r)<Bx)return function(e){var t=$x(e);function n(e,n){return[e*t,n_(n)/t]}return n.invert=function(e,n){return[e/t,u_(n*t)]},n}(e);var a=1+n*(2*r-n),i=a_(a)/r;function o(e,t){var n=a_(a-2*r*n_(t))/r;return[n*n_(e*=r),i-n*$x(e)]}return o.invert=function(e,t){var n=i-t,o=Kx(e,Xx(n))*r_(n);return n*r<0&&(o-=Ux*r_(e)*r_(n)),[o/r,u_((a-(e*e+n*n)*r*r)/(2*r))]},o}var rk=function(){return tk(nk).scale(155.424).center([0,33.6442])},ak=function(){return rk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function ik(e){return function(t,n){var r=$x(t),a=$x(n),i=e(r*a);return i===1/0?[2,0]:[i*a*n_(t),i*n_(n)]}}function ok(e){return function(t,n){var r=a_(t*t+n*n),a=e(r),i=n_(a),o=$x(a);return[Kx(t*i,r*o),u_(r&&n*i/r)]}}var uk=ik((function(e){return a_(2/(1+e))}));uk.invert=ok((function(e){return 2*u_(e/2)}));var sk=ik((function(e){return(e=o_(e))&&e/n_(e)}));sk.invert=ok((function(e){return e}));function ck(e,t){return[e,e_(i_((Wx+t)/2))]}ck.invert=function(e,t){return[e,2*Yx(Jx(t))-Wx]};function lk(e){var t,n,r,a=Qw(e),i=a.center,o=a.scale,u=a.translate,s=a.clipExtent,c=null;function l(){var i=Ux*o(),u=a(function(e){function t(t){return(t=e(t[0]*Hx,t[1]*Hx))[0]*=qx,t[1]*=qx,t}return e=Mw(e[0]*Hx,e[1]*Hx,e.length>2?e[2]*Hx:0),t.invert=function(t){return(t=e.invert(t[0]*Hx,t[1]*Hx))[0]*=qx,t[1]*=qx,t},t}(a.rotate()).invert([0,0]));return s(null==c?[[u[0]-i,u[1]-i],[u[0]+i,u[1]+i]]:e===ck?[[Math.max(u[0]-i,c),t],[Math.min(u[0]+i,n),r]]:[[c,Math.max(u[1]-i,t)],[n,Math.min(u[1]+i,r)]])}return a.scale=function(e){return arguments.length?(o(e),l()):o()},a.translate=function(e){return arguments.length?(u(e),l()):u()},a.center=function(e){return arguments.length?(i(e),l()):i()},a.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),l()):null==c?null:[[c,t],[n,r]]},l()}function fk(e){return i_((Wx+e)/2)}function dk(e,t){var n=$x(e),r=e===t?n_(e):e_(n/$x(t))/e_(fk(t)/fk(e)),a=n*t_(fk(e),r)/r;if(!r)return ck;function i(e,t){a>0?t<-Wx+Bx&&(t=-Wx+Bx):t>Wx-Bx&&(t=Wx-Bx);var n=a/t_(fk(t),r);return[n*n_(r*e),a-n*$x(r*e)]}return i.invert=function(e,t){var n=a-t,i=r_(r)*a_(e*e+n*n),o=Kx(e,Xx(n))*r_(n);return n*r<0&&(o-=Ux*r_(e)*r_(n)),[o/r,2*Yx(t_(a/i,1/r))-Wx]},i}function hk(e,t){return[e,t]}hk.invert=hk;function pk(e,t){var n=$x(e),r=e===t?n_(e):(n-$x(t))/(t-e),a=n/r+e;if(Xx(r)<Bx)return hk;function i(e,t){var n=a-t,i=r*e;return[n*n_(i),a-n*$x(i)]}return i.invert=function(e,t){var n=a-t,i=Kx(e,Xx(n))*r_(n);return n*r<0&&(i-=Ux*r_(e)*r_(n)),[i/r,a-r_(r)*a_(e*e+n*n)]},i}var vk=1.340264,mk=-.081106,gk=893e-6,bk=.003796,yk=a_(3)/2;function xk(e,t){var n=u_(yk*n_(t)),r=n*n,a=r*r*r;return[e*$x(n)/(yk*(vk+3*mk*r+a*(7*gk+9*bk*r))),n*(vk+mk*r+a*(gk+bk*r))]}xk.invert=function(e,t){for(var n,r=t,a=r*r,i=a*a*a,o=0;o<12&&(i=(a=(r-=n=(r*(vk+mk*a+i*(gk+bk*a))-t)/(vk+3*mk*a+i*(7*gk+9*bk*a)))*r)*a*a,!(Xx(n)<zx));++o);return[yk*e*(vk+3*mk*a+i*(7*gk+9*bk*a))/$x(r),u_(n_(r)/yk)]};function _k(e,t){var n=$x(t),r=$x(e)*n;return[n*n_(e)/r,n_(t)/r]}_k.invert=ok(Yx);function wk(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}wk.invert=function(e,t){var n,r=t,a=25;do{var i=r*r,o=i*i;r-=n=(r*(1.007226+i*(.015085+o*(.028874*i-.044475-.005916*o)))-t)/(1.007226+i*(.045255+o*(.259866*i-.311325-.005916*11*o)))}while(Xx(n)>Bx&&--a>0);return[e/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]};function kk(e,t){return[$x(t)*n_(e),n_(t)]}kk.invert=ok(u_);function Ok(e,t){var n=$x(t),r=1+$x(e)*n;return[n*n_(e)/r,n_(t)/r]}Ok.invert=ok((function(e){return 2*Yx(e)}));function Sk(e,t){return[e_(i_((Wx+t)/2)),-e]}Sk.invert=function(e,t){return[-t,2*Yx(Jx(e))-Wx]};var jk=Math.abs,Ek=(Math.atan,Math.atan2,Math.ceil,Math.cos),Ck=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),Ak=(Math.tan,Math.PI),Tk=Ak/2,Nk=(Math.SQRT1_2,Dk(2));Dk(Ak);function Mk(e){return e>1?Tk:e<-1?-Tk:Math.asin(e)}function Dk(e){return e>0?Math.sqrt(e):0}function Ik(e,t){var n,r=e*Ck(t),a=30;do{t-=n=(t+Ck(t)-r)/(1+Ek(t))}while(jk(n)>1e-6&&--a>0);return t/2}var Fk=function(e,t,n){function r(r,a){return[e*r*Ek(a=Ik(n,a)),t*Ck(a)]}return r.invert=function(r,a){return a=Mk(a/t),[r/(e*Ek(a)),Mk((2*a+Ck(2*a))/n)]},r}(Nk/Tk,Nk,Ak),Rk=cw(),Pk=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Lk(e,t){return function n(){var r=t();return r.type=e,r.path=cw().projection(r),r.copy=r.copy||function(){var e=n();return Pk.forEach((function(t){r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function Bk(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Uk[e]=Lk(e,t),this):Uk[e]||null}function zk(e){return e&&e.path||Rk}var Uk={albers:ak,albersusa:function(){var e,t,n,r,a,i,o=ak(),u=rk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=rk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){i=[e,t]}};function l(e){var t=e[0],o=e[1];return i=null,n.point(t,o),i||(r.point(t,o),i)||(a.point(t,o),i)}function f(){return e=t=null,l}return l.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?u:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:o).invert(e)},l.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var a=-1;++a<t;)e[a].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),u.stream(n),s.stream(n)])},l.precision=function(e){return arguments.length?(o.precision(e),u.precision(e),s.precision(e),f()):o.precision()},l.scale=function(e){return arguments.length?(o.scale(e),u.scale(.35*e),s.scale(e),l.translate(o.translate())):o.scale()},l.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),i=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[i-.455*t,l-.238*t],[i+.455*t,l+.238*t]]).stream(c),r=u.translate([i-.307*t,l+.201*t]).clipExtent([[i-.425*t+Bx,l+.12*t+Bx],[i-.214*t-Bx,l+.234*t-Bx]]).stream(c),a=s.translate([i-.205*t,l+.212*t]).clipExtent([[i-.214*t+Bx,l+.166*t+Bx],[i-.115*t-Bx,l+.234*t-Bx]]).stream(c),f()},l.fitExtent=function(e,t){return qw(l,e,t)},l.fitSize=function(e,t){return Hw(l,e,t)},l.fitWidth=function(e,t){return Xw(l,e,t)},l.fitHeight=function(e,t){return Yw(l,e,t)},l.scale(1070)},azimuthalequalarea:function(){return Qw(uk).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Qw(sk).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return tk(dk).scale(109.5).parallels([30,30])},conicequalarea:rk,conicequidistant:function(){return tk(pk).scale(131.154).center([0,13.9389])},equalEarth:function(){return Qw(xk).scale(177.158)},equirectangular:function(){return Qw(hk).scale(152.63)},gnomonic:function(){return Qw(_k).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,a,i,o,u=1,s=0,c=0,l=1,f=1,d=0,h=null,p=1,v=1,m=Ww({point:function(e,t){var n=y([e,t]);this.stream.point(n[0],n[1])}}),g=Ax;function b(){return p=u*l,v=u*f,i=o=null,y}function y(n){var r=n[0]*p,a=n[1]*v;if(d){var i=a*e-r*t;r=r*e+a*t,a=i}return[r+s,a+c]}return y.invert=function(n){var r=n[0]-s,a=n[1]-c;if(d){var i=a*e+r*t;r=r*e-a*t,a=i}return[r/p,a/v]},y.stream=function(e){return i&&o===e?i:i=m(g(o=e))},y.postclip=function(e){return arguments.length?(g=e,h=n=r=a=null,b()):g},y.clipExtent=function(e){return arguments.length?(g=null==e?(h=n=r=a=null,Ax):Uw(h=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),b()):null==h?null:[[h,n],[r,a]]},y.scale=function(e){return arguments.length?(u=+e,b()):u},y.translate=function(e){return arguments.length?(s=+e[0],c=+e[1],b()):[s,c]},y.angle=function(n){return arguments.length?(t=n_(d=n%360*Hx),e=$x(d),b()):d*qx},y.reflectX=function(e){return arguments.length?(l=e?-1:1,b()):l<0},y.reflectY=function(e){return arguments.length?(f=e?-1:1,b()):f<0},y.fitExtent=function(e,t){return qw(y,e,t)},y.fitSize=function(e,t){return Hw(y,e,t)},y.fitWidth=function(e,t){return Xw(y,e,t)},y.fitHeight=function(e,t){return Yw(y,e,t)},y},mercator:function(){return lk(ck).scale(961/Gx)},mollweide:function(){return Qw(Fk).scale(169.529)},naturalEarth1:function(){return Qw(wk).scale(175.295)},orthographic:function(){return Qw(kk).scale(249.5).clipAngle(90.000001)},stereographic:function(){return Qw(Ok).scale(250).clipAngle(142)},transversemercator:function(){var e=lk(Sk),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var Wk in Uk)Bk(Wk,Uk[Wk]);function Vk(e,t,n){var r=Ba(e,t-Bx,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Gk(e,t,n){var r=Ba(e,t-Bx,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function qk(){var e,t,n,r,a,i,o,u,s,c,l,f,d=10,h=d,p=90,v=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:b()}}function b(){return Ba(Zx(r/p)*p,n,p).map(l).concat(Ba(Zx(u/v)*v,o,v).map(f)).concat(Ba(Zx(t/d)*d,e,d).filter((function(e){return Xx(e%p)>Bx})).map(s)).concat(Ba(Zx(i/h)*h,a,h).filter((function(e){return Xx(e%v)>Bx})).map(c))}return g.lines=function(){return b().map((function(e){return{type:"LineString",coordinates:e}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(u).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),g.precision(m)):[[r,u],[n,o]]},g.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],i=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),i>a&&(n=i,i=a,a=n),g.precision(m)):[[t,i],[e,a]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(p=+e[0],v=+e[1],g):[p,v]},g.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],g):[d,h]},g.precision=function(d){return arguments.length?(m=+d,s=Vk(i,a,90),c=Gk(t,e,m),l=Vk(u,o,90),f=Gk(r,n,m),g):m},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Hk(){}var Xk=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Yk(){var e=1,t=1,n=o;function r(e,t){return t.map((function(t){return a(e,t)}))}function a(r,a){var o=[],u=[];return function(n,r,a){var o,u,s,c,l,f,d=new Array,h=new Array;o=u=-1,c=n[0]>=r,Xk[c<<1].forEach(p);for(;++o<e-1;)s=c,c=n[o+1]>=r,Xk[s|c<<1].forEach(p);Xk[c<<0].forEach(p);for(;++u<t-1;){for(o=-1,c=n[u*e+e]>=r,l=n[u*e]>=r,Xk[c<<1|l<<2].forEach(p);++o<e-1;)s=c,c=n[u*e+e+o+1]>=r,f=l,l=n[u*e+o+1]>=r,Xk[s|c<<1|l<<2|f<<3].forEach(p);Xk[c|l<<3].forEach(p)}o=-1,l=n[u*e]>=r,Xk[l<<2].forEach(p);for(;++o<e-1;)f=l,l=n[u*e+o+1]>=r,Xk[l<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+o,e[0][1]+u],s=[e[1][0]+o,e[1][1]+u],c=i(r),l=i(s);(t=h[c])?(n=d[l])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(s),a(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(s),h[t.end=l]=t):(t=d[l])?(n=h[c])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(s),a(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=c]=t):d[c]=h[l]={start:c,end:l,ring:[r,s]}}Xk[l<<3].forEach(p)}(r,a,(function(e){n(e,r,a),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):u.push(e)})),u.forEach((function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==Kk((t=o[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:a,coordinates:o}}function i(t){return 2*t[0]+t[1]*(e+1)*4}function o(n,r,a){n.forEach((function(n){var i,o=n[0],u=n[1],s=0|o,c=0|u,l=r[c*e+s];o>0&&o<e&&s===o&&(i=r[c*e+s-1],n[0]=o+(a-i)/(l-i)-.5),u>0&&u<t&&c===u&&(i=r[(c-1)*e+s],n[1]=u+(a-i)/(l-i)-.5)}))}return r.contour=a,r.size=function(n){if(!arguments.length)return[e,t];var a=Math.floor(n[0]),i=Math.floor(n[1]);return a>=0&&i>=0||mx("invalid size"),e=a,t=i,r},r.smooth=function(e){return arguments.length?(n=e?o:Hk,r):n===o},r}function Kk(e,t){for(var n,r=-1,a=t.length;++r<a;)if(n=$k(e,t[r]))return n;return 0}function $k(e,t){for(var n=t[0],r=t[1],a=-1,i=0,o=e.length,u=o-1;i<o;u=i++){var s=e[i],c=s[0],l=s[1],f=e[u],d=f[0],h=f[1];if(Zk(s,f,t))return 0;l>r!==h>r&&n<(d-c)*(r-l)/(h-l)+c&&(a=-a)}return a}function Zk(e,t,n){var r,a,i,o;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(a=e[r=+(e[0]===t[0])],i=n[r],o=t[r],a<=i&&i<=o||o<=i&&i<=a)}function Jk(e,t,n){return function(r){var a=function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}(r),i=n?Math.min(a[0],0):a[0],o=a[1],u=o-i,s=t?Object(cs.c)(i,o,e):u/(e+1);return Ba(i+s,o,s)}}function Qk(e){Zn.call(this,null,e)}function eO(e,t,n,r,a){var i=e.x1||0,o=e.y1||0,u=t*n<0;function s(e){e.forEach(c)}function c(e){u&&e.reverse(),e.forEach(l)}function l(e){e[0]=(e[0]-i)*t+r,e[1]=(e[1]-o)*n+a}return function(e){return e.coordinates.forEach(s),e}}function tO(e,t,n){var r=e>=0?e:Yr(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function nO(e){return Ox(e)?e:Sx(+e)}function rO(){var e=function(e){return e[0]},t=function(e){return e[1]},n=_x,r=[-1,-1],a=960,i=500,o=2;function u(u,s){var c=tO(r[0],u,e)>>o,l=tO(r[1],u,t)>>o,f=c?c+2:0,d=l?l+2:0,h=2*f+(a>>o),p=2*d+(i>>o),v=new Float32Array(h*p),m=new Float32Array(h*p),g=v;u.forEach((function(r){var a=f+(+e(r)>>o),i=d+(+t(r)>>o);a>=0&&a<h&&i>=0&&i<p&&(v[a+i*h]+=+n(r))})),c>0&&l>0?(aO(h,p,v,m,c),iO(h,p,m,v,l),aO(h,p,v,m,c),iO(h,p,m,v,l),aO(h,p,v,m,c),iO(h,p,m,v,l)):c>0?(aO(h,p,v,m,c),aO(h,p,m,v,c),aO(h,p,v,m,c),g=m):l>0&&(iO(h,p,v,m,l),iO(h,p,m,v,l),iO(h,p,v,m,l),g=m);for(var b=s?Math.pow(2,-2*o):1/Dy(g),y=0,x=h*p;y<x;++y)g[y]*=b;return{values:g,scale:1<<o,width:h,height:p,x1:f,y1:d,x2:f+(a>>o),y2:d+(i>>o)}}return u.x=function(t){return arguments.length?(e=nO(t),u):e},u.y=function(e){return arguments.length?(t=nO(e),u):t},u.weight=function(e){return arguments.length?(n=nO(e),u):n},u.size=function(e){if(!arguments.length)return[a,i];var t=+e[0],n=+e[1];return t>=0&&n>=0||mx("invalid size"),a=t,i=n,u},u.cellSize=function(e){return arguments.length?((e=+e)>=1||mx("invalid cell size"),o=Math.floor(Math.log(e)/Math.LN2),u):1<<o},u.bandwidth=function(e){return arguments.length?(1===(e=kx(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&mx("invalid bandwidth"),r=e,u):r},u}function aO(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<t;++o)for(var u=0,s=0;u<e+a;++u)u<e&&(s+=n[u+o*e]),u>=a&&(u>=i&&(s-=n[u-i+o*e]),r[u-a+o*e]=s/Math.min(u+1,e-1+i-u,i))}function iO(e,t,n,r,a){for(var i=1+(a<<1),o=0;o<e;++o)for(var u=0,s=0;u<t+a;++u)u<t&&(s+=n[o+u*e]),u>=a&&(u>=i&&(s-=n[o+(u-i)*e]),r[o+(u-a)*e]=s/Math.min(u+1,t-1+i-u,i))}function oO(e){Zn.call(this,null,e)}Qk.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Ex(Qk,Zn,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,a=e.field||yx,i=Yk().smooth(!1!==e.smooth),o=e.thresholds||function(e,t,n){var r=Jk(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((function(e){return Dr(t(e).values)})))}(r,a,e),u=null===e.as?null:e.as||"contour",s=[];return r.forEach((function(t){var n=a(t),r=i.size([n.width,n.height])(n.values,wx(o)?o:o(n.values));!function(e,t,n,r){var a=r.scale||t.scale,i=r.translate||t.translate;Ox(a)&&(a=a(n,r));Ox(i)&&(i=i(n,r));if((1===a||null==a)&&!i)return;var o=(Cx(a)?a:a[0])||1,u=(Cx(a)?a:a[1])||1,s=i&&i[0]||0,c=i&&i[1]||0;e.forEach(eO(t,o,u,s,c))}(r,n,t,e),r.forEach((function(e){s.push(gn(t,vn(null!=u?Object(go.a)({},u,e):e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=s,n}}),oO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};var uO=["x","y","weight","size","cellSize","bandwidth"];function sO(e,t){return uO.forEach((function(n){return null!=t[n]?e[n](t[n]):0})),e}function cO(e){Zn.call(this,null,e)}Ex(oO,Zn,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),a=function(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(fx),o=sO(rO(),e),u=e.as||"grid";return n=a.map((function(t){return vn(function(e,t){for(var n=0;n<i.length;++n)e[i[n]]=t[n];return e}(Object(go.a)({},u,o(t,e.counts)),t.dims))})),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),cO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Ex(cO,Zn,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=Yk().smooth(!1!==e.smooth),o=e.values,u=e.thresholds||Jk(e.count||10,e.nice,!!o),s=e.size;return o||(o=t.materialize(t.SOURCE).source,r=eO(n=sO(rO(),e)(o,!0),n.scale||1,n.scale||1,0,0),s=[n.width,n.height],o=n.values),u=wx(u)?u:u(o),o=i.size(s)(o,u),r&&o.forEach(r),this.value&&(a.rem=this.value),this.value=a.source=a.add=(o||[]).map(vn),a}});var lO="Feature",fO="FeatureCollection";function dO(e){Zn.call(this,null,e)}function hO(e){Zn.call(this,null,e)}function pO(e){Zn.call(this,null,e)}function vO(e){Zn.call(this,null,e)}function mO(e){Zn.call(this,[],e),this.generator=qk()}function gO(e){Zn.call(this,null,e)}function bO(e){if(!Ox(e))return!1;var t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(dx(e));return t.$x||t.$y||t.$value||t.$max}function yO(e){Zn.call(this,null,e),this.modified(!0)}function xO(e,t,n){Ox(e[t])&&e[t](n)}function _O(e,t,n){return e.fields=t||[],e.fname=n,e}function wO(e){return null==e?null:e.fields}function kO(e){return 1===e.length?OO(e[0]):SO(e)}dO.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Ex(dO,Zn,{transform:function(e,t){var n,r=this._features,a=this._points,i=e.fields,o=i&&i[0],u=i&&i[1],s=e.geojson||!i&&yx,c=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(dx(s))||o&&t.modified(dx(o))||u&&t.modified(dx(u)),this.value&&!n||(c=t.SOURCE,this._features=r=[],this._points=a=[]),s&&t.visit(c,(function(e){return r.push(s(e))})),o&&u&&(t.visit(c,(function(e){var t=o(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&a.push([t,n])})),r=r.concat({type:lO,geometry:{type:"MultiPoint",coordinates:a}})),this.value={type:fO,features:r}}}),hO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Ex(hO,Zn,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.field||yx,i=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=zk(e.projection),n.materialize().reflow()):o=a===yx||t.modified(a.fields)?n.ADD_MOD:n.ADD;var u=function(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(function(e){return e[i]=r(a(e))})),r.pointRadius(u),n.modifies(i)}}),pO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Ex(pO,Zn,{transform:function(e,t){var n,r=e.projection,a=e.fields[0],i=e.fields[1],o=e.as||["x","y"],u=o[0],s=o[1];function c(e){var t=r([a(e),i(e)]);t?(e[u]=t[0],e[s]=t[1]):(e[u]=void 0,e[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(a.fields)||t.modified(i.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(o)}}),vO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Ex(vO,Zn,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,a=e.as||"shape",i=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var a=e.pointRadius(),i=e.pointRadius(n)(t(r));return e.pointRadius(a),i};return r.context=function(t){return e.context(t),r},r}(zk(e.projection),e.field||bx("datum"),e.pointRadius),n.materialize().reflow(),i=n.SOURCE),n.visit(i,(function(e){return e[a]=r})),n.modifies(a)}}),mO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Ex(mO,Zn,{transform:function(e,t){var n,r=this.value,a=this.generator;if(!r.length||e.modified())for(var i in e)Ox(a[i])&&a[i](e[i]);return n=a(),r.length?t.mod.push(bn(r[0],n)):t.add.push(vn(n)),r[0]=n,t}}),gO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Ex(gO,Zn,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,a=e.field||yx,i=function(e,t){var n;Ox(e)?(n=function(n){return e(n,t)}).dep=bO(e):e?n=Sx(e):(n=function(e){return e.$value/e.$max||0}).dep=!0;return n}(e.opacity,e),o=function(e,t){var n;Ox(e)?(n=function(n){return Is(e(n,t))}).dep=bO(e):n=Sx(Is(e||"#888"));return n}(e.color,e),u=e.as||"image",s={$x:0,$y:0,$value:0,$max:r?Dr(n.map((function(e){return Dr(a(e).values)}))):0};return n.forEach((function(e){var t=a(e),n=jx({},e,s);r||(n.$max=Dr(t.values||[])),e[u]=function(e,t,n,r){for(var a=e.width,i=e.height,o=e.x1||0,u=e.y1||0,s=e.x2||a,c=e.y2||i,l=e.values,f=l?function(e){return l[e]}:xx,d=Qu(s-o,c-u),h=d.getContext("2d"),p=h.getImageData(0,0,s-o,c-u),v=p.data,m=u,g=0;m<c;++m){t.$y=m-u;for(var b=o,y=m*a;b<s;++b,g+=4){t.$x=b-o,t.$value=f(b+y);var x=n(t);v[g+0]=x.r,v[g+1]=x.g,v[g+2]=x.b,v[g+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,o.dep?o:Sx(o(n)),i.dep?i:Sx(i(n)))})),t.reflow(!0).modifies(u)}}),Ex(yO,Zn,{transform:function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function(e){var t=Bk((e||"mercator").toLowerCase());t||mx("Unrecognized projection type: "+e);return t()}(e.type),Pk.forEach((function(t){null!=e[t]&&xO(n,t,e[t])}))):Pk.forEach((function(t){e.modified(t)&&xO(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){var n=function(e){return 1===(e=kx(e)).length?e[0]:{type:fO,features:e.reduce((function(e,t){return e.concat(function(e){return e.type===fO?e.features:kx(e).filter((function(e){return null!=e})).map((function(e){return e.type===lO?e:{type:lO,geometry:e}}))}(t))}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});var OO=function(e){return function(t){return t[e]}},SO=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function jO(e){throw Error(e)}function EO(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||jO("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&jO("Access path missing closing bracket: "+e),o&&jO("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function CO(e,t,n){var r=EO(e);return e=1===r.length?r[0]:e,_O((n&&n.get||kO)(r),[e],t||e)}CO("id"),_O((function(e){return e}),[],"identity"),_O((function(){return 0}),[],"zero"),_O((function(){return 1}),[],"one"),_O((function(){return!0}),[],"true"),_O((function(){return!1}),[],"false");var AO=Array.isArray;function TO(e){return null!=e?AO(e)?e:[e]:[]}function NO(e){return"function"===typeof e}var MO=Object.prototype.hasOwnProperty;function DO(e,t){return MO.call(e,t)}function IO(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var a,i,o,u,s,c,l,f,d,h=e._root,p={data:r},v=e._x0,m=e._y0,g=e._x1,b=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((c=t>=(i=(v+g)/2))?v=i:g=i,(l=n>=(o=(m+b)/2))?m=o:b=o,a=h,!(h=h[f=l<<1|c]))return a[f]=p,e;if(u=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===u&&n===s)return p.next=h,a?a[f]=p:e._root=p,e;do{a=a?a[f]=new Array(4):e._root=new Array(4),(c=t>=(i=(v+g)/2))?v=i:g=i,(l=n>=(o=(m+b)/2))?m=o:b=o}while((f=l<<1|c)===(d=(s>=o)<<1|u>=i));return a[d]=h,a[f]=p,e}var FO=function(e,t,n,r,a){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=a};function RO(e){return e[0]}function PO(e){return e[1]}function LO(e,t,n){var r=new BO(null==t?RO:t,null==n?PO:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function BO(e,t,n,r,a,i){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=a,this._y1=i,this._root=void 0}function zO(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var UO=LO.prototype=BO.prototype;UO.copy=function(){var e,t,n=new BO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=zO(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var a=0;a<4;++a)(t=r.source[a])&&(t.length?e.push({source:t,target:r.target[a]=new Array(4)}):r.target[a]=zO(t));return n},UO.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return IO(this.cover(t,n),t,n,e)},UO.addAll=function(e){var t,n,r,a,i=e.length,o=new Array(i),u=new Array(i),s=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,u[n]=a,r<s&&(s=r),r>l&&(l=r),a<c&&(c=a),a>f&&(f=a));if(s>l||c>f)return this;for(this.cover(s,c).cover(l,f),n=0;n<i;++n)IO(this,o[n],u[n],e[n]);return this},UO.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,a=this._x1,i=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,i=(r=Math.floor(t))+1;else{for(var o,u,s=a-n||1,c=this._root;n>e||e>=a||r>t||t>=i;)switch(u=(t<r)<<1|e<n,(o=new Array(4))[u]=c,c=o,s*=2,u){case 0:a=n+s,i=r+s;break;case 1:n=a-s,i=r+s;break;case 2:a=n+s,r=i-s;break;case 3:n=a-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=a,this._y1=i,this},UO.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},UO.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},UO.find=function(e,t,n){var r,a,i,o,u,s,c,l=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],v=this._root;for(v&&p.push(new FO(v,l,f,d,h)),null==n?n=1/0:(l=e-n,f=t-n,d=e+n,h=t+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(a=s.x0)>d||(i=s.y0)>h||(o=s.x1)<l||(u=s.y1)<f))if(v.length){var m=(a+o)/2,g=(i+u)/2;p.push(new FO(v[3],m,g,o,u),new FO(v[2],a,g,m,u),new FO(v[1],m,i,o,g),new FO(v[0],a,i,m,g)),(c=(t>=g)<<1|e>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var b=e-+this._x.call(null,v.data),y=t-+this._y.call(null,v.data),x=b*b+y*y;if(x<n){var _=Math.sqrt(n=x);l=e-_,f=t-_,d=e+_,h=t+_,r=v.data}}return r},UO.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,a,i,o,u,s,c,l,f,d,h=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!h)return this;if(h.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(l=o>=(s=(v+g)/2))?v=s:g=s,t=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(a=h.next)&&delete h.next,r?(a?r.next=a:delete r.next,this):t?(a?t[f]=a:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=a,this)},UO.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},UO.root=function(){return this._root},UO.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},UO.visit=function(e){var t,n,r,a,i,o,u=[],s=this._root;for(s&&u.push(new FO(s,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(s=t.node,r=t.x0,a=t.y0,i=t.x1,o=t.y1)&&s.length){var c=(r+i)/2,l=(a+o)/2;(n=s[3])&&u.push(new FO(n,c,l,i,o)),(n=s[2])&&u.push(new FO(n,r,l,c,o)),(n=s[1])&&u.push(new FO(n,c,a,i,l)),(n=s[0])&&u.push(new FO(n,r,a,c,l))}return this},UO.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new FO(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var i,o=t.x0,u=t.y0,s=t.x1,c=t.y1,l=(o+s)/2,f=(u+c)/2;(i=a[0])&&n.push(new FO(i,o,u,l,f)),(i=a[1])&&n.push(new FO(i,l,u,s,f)),(i=a[2])&&n.push(new FO(i,o,f,l,c)),(i=a[3])&&n.push(new FO(i,l,f,s,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},UO.x=function(e){return arguments.length?(this._x=e,this):this._x},UO.y=function(e){return arguments.length?(this._y=e,this):this._y};var WO=function(e){return function(){return e}},VO=function(e){return 1e-6*(e()-.5)};function GO(e){return e.x+e.vx}function qO(e){return e.y+e.vy}var HO={value:function(){}};function XO(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new YO(r)}function YO(e){this._=e}function KO(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function $O(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function ZO(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=HO,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}YO.prototype=XO.prototype={constructor:YO,on:function(e,t){var n,r=this._,a=KO(e+"",r),i=-1,o=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=a[i]).type)r[n]=ZO(r[n],e.name,t);else if(null==t)for(n in r)r[n]=ZO(r[n],e.name,null);return this}for(;++i<o;)if((n=(e=a[i]).type)&&(n=$O(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new YO(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var JO,QO,eS=XO,tS=0,nS=0,rS=0,aS=0,iS=0,oS=0,uS="object"===typeof performance&&performance.now?performance:Date,sS="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cS(){return iS||(sS(lS),iS=uS.now()+oS)}function lS(){iS=0}function fS(){this._call=this._time=this._next=null}function dS(e,t,n){var r=new fS;return r.restart(e,t,n),r}function hS(){iS=(aS=uS.now())+oS,tS=nS=0;try{!function(){cS(),++tS;for(var e,t=JO;t;)(e=iS-t._time)>=0&&t._call.call(null,e),t=t._next;--tS}()}finally{tS=0,function(){var e,t,n=JO,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:JO=t);QO=e,vS(r)}(),iS=0}}function pS(){var e=uS.now(),t=e-aS;t>1e3&&(oS-=t,aS=e)}function vS(e){tS||(nS&&(nS=clearTimeout(nS)),e-iS>24?(e<1/0&&(nS=setTimeout(hS,e-uS.now()-oS)),rS&&(rS=clearInterval(rS))):(rS||(aS=uS.now(),rS=setInterval(pS,1e3)),tS=1,sS(hS)))}fS.prototype=dS.prototype={constructor:fS,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?cS():+n)+(null==t?0:+t),this._next||QO===this||(QO?QO._next=this:JO=this,QO=this),this._call=e,this._time=n,vS()},stop:function(){this._call&&(this._call=null,this._time=1/0,vS())}};var mS=4294967296;function gS(e){return e.x}function bS(e){return e.y}var yS=Math.PI*(3-Math.sqrt(5)),xS=function(e){var t,n=1,r=.001,a=1-Math.pow(r,1/300),i=0,o=.6,u=new Map,s=dS(f),c=eS("tick","end"),l=function(){var e=1;return function(){return(e=(1664525*e+1013904223)%mS)/mS}}();function f(){d(),c.call("tick",t),n<r&&(s.stop(),c.call("end",t))}function d(r){var s,c,l=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(i-n)*a,u.forEach((function(e){e(n)})),s=0;s<l;++s)null==(c=e[s]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(.5+n),i=n*yS;t.x=a*Math.cos(i),t.y=a*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,l),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return s.restart(f),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),u.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(i=+e,t):i},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(l=e,u.forEach(p),t):l},force:function(e,n){return arguments.length>1?(null==n?u.delete(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var a,i,o,u,s,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(a=t-(u=e[c]).x)*a+(i=n-u.y)*i)<r&&(s=u,r=o);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}};function _S(e){return e.index}function wS(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}var kS={center:function(e,t){var n,r=1;function a(){var a,i,o=n.length,u=0,s=0;for(a=0;a<o;++a)u+=(i=n[a]).x,s+=i.y;for(u=(u/o-e)*r,s=(s/o-t)*r,a=0;a<o;++a)(i=n[a]).x-=u,i.y-=s}return null==e&&(e=0),null==t&&(t=0),a.initialize=function(e){n=e},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(e){return arguments.length?(t=+e,a):t},a.strength=function(e){return arguments.length?(r=+e,a):r},a},collide:function(e){var t,n,r,a=1,i=1;function o(){for(var e,o,s,c,l,f,d,h=t.length,p=0;p<i;++p)for(o=LO(t,GO,qO).visitAfter(u),e=0;e<h;++e)s=t[e],f=n[s.index],d=f*f,c=s.x+s.vx,l=s.y+s.vy,o.visit(v);function v(e,t,n,i,o){var u=e.data,h=e.r,p=f+h;if(!u)return t>c+p||i<c-p||n>l+p||o<l-p;if(u.index>s.index){var v=c-u.x-u.vx,m=l-u.y-u.vy,g=v*v+m*m;g<p*p&&(0===v&&(g+=(v=VO(r))*v),0===m&&(g+=(m=VO(r))*m),g=(p-(g=Math.sqrt(g)))/g*a,s.vx+=(v*=g)*(p=(h*=h)/(d+h)),s.vy+=(m*=g)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,a,i=t.length;for(n=new Array(i),r=0;r<i;++r)a=t[r],n[a.index]=+e(a,r,t)}}return"function"!==typeof e&&(e=WO(null==e?1:+e)),o.initialize=function(e,n){t=e,r=n,s()},o.iterations=function(e){return arguments.length?(i=+e,o):i},o.strength=function(e){return arguments.length?(a=+e,o):a},o.radius=function(t){return arguments.length?(e="function"===typeof t?t:WO(+t),s(),o):e},o},nbody:function(){var e,t,n,r,a,i=WO(-30),o=1,u=1/0,s=.81;function c(n){var a,i=e.length,o=LO(e,gS,bS).visitAfter(f);for(r=n,a=0;a<i;++a)t=e[a],o.visit(d)}function l(){if(e){var t,n,r=e.length;for(a=new Array(r),t=0;t<r;++t)n=e[t],a[n.index]=+i(n,t,e)}}function f(e){var t,n,r,i,o,u=0,s=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(u+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{u+=a[t.data.index]}while(t=t.next)}e.value=u}function d(e,i,c,l){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=l-i,p=f*f+d*d;if(h*h/s<p)return p<u&&(0===f&&(p+=(f=VO(n))*f),0===d&&(p+=(d=VO(n))*d),p<o&&(p=Math.sqrt(o*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=u)){(e.data!==t||e.next)&&(0===f&&(p+=(f=VO(n))*f),0===d&&(p+=(d=VO(n))*d),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(h=a[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return c.initialize=function(t,r){e=t,n=r,l()},c.strength=function(e){return arguments.length?(i="function"===typeof e?e:WO(+e),l(),c):i},c.distanceMin=function(e){return arguments.length?(o=e*e,c):Math.sqrt(o)},c.distanceMax=function(e){return arguments.length?(u=e*e,c):Math.sqrt(u)},c.theta=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c},link:function(e){var t,n,r,a,i,o,u=_S,s=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},c=WO(30),l=1;function f(r){for(var a=0,u=e.length;a<l;++a)for(var s,c,f,d,h,p,v,m=0;m<u;++m)c=(s=e[m]).source,d=(f=s.target).x+f.vx-c.x-c.vx||VO(o),h=f.y+f.vy-c.y-c.vy||VO(o),d*=p=((p=Math.sqrt(d*d+h*h))-n[m])/p*r*t[m],h*=p,f.vx-=d*(v=i[m]),f.vy-=h*v,c.vx+=d*(v=1-v),c.vy+=h*v}function d(){if(r){var o,s,c=r.length,l=e.length,f=new Map(r.map((function(e,t){return[u(e,t,r),e]})));for(o=0,a=new Array(c);o<l;++o)(s=e[o]).index=o,"object"!==typeof s.source&&(s.source=wS(f,s.source)),"object"!==typeof s.target&&(s.target=wS(f,s.target)),a[s.source.index]=(a[s.source.index]||0)+1,a[s.target.index]=(a[s.target.index]||0)+1;for(o=0,i=new Array(l);o<l;++o)s=e[o],i[o]=a[s.source.index]/(a[s.source.index]+a[s.target.index]);t=new Array(l),h(),n=new Array(l),p()}}function h(){if(r)for(var n=0,a=e.length;n<a;++n)t[n]=+s(e[n],n,e)}function p(){if(r)for(var t=0,a=e.length;t<a;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,o=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(u=e,f):u},f.iterations=function(e){return arguments.length?(l=+e,f):l},f.strength=function(e){return arguments.length?(s="function"===typeof e?e:WO(+e),h(),f):s},f.distance=function(e){return arguments.length?(c="function"===typeof e?e:WO(+e),p(),f):c},f},x:function(e){var t,n,r,a=WO(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vx+=(r[i]-a.x)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=WO(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:WO(+e),o(),i):a},i.x=function(t){return arguments.length?(e="function"===typeof t?t:WO(+t),o(),i):e},i},y:function(e){var t,n,r,a=WO(.1);function i(e){for(var a,i=0,o=t.length;i<o;++i)(a=t[i]).vy+=(r[i]-a.y)*n[i]*e}function o(){if(t){var i,o=t.length;for(n=new Array(o),r=new Array(o),i=0;i<o;++i)n[i]=isNaN(r[i]=+e(t[i],i,t))?0:+a(t[i],i,t)}}return"function"!==typeof e&&(e=WO(null==e?0:+e)),i.initialize=function(e){t=e,o()},i.strength=function(e){return arguments.length?(a="function"===typeof e?e:WO(+e),o(),i):a},i.y=function(t){return arguments.length?(e="function"===typeof t?t:WO(+t),o(),i):e},i}},OS="forces",SS=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],jS=["static","iterations"],ES=["x","y","vx","vy"];function CS(e){Zn.call(this,null,e)}function AS(e,t,n,r){var a,i,o,u,s=TO(t.forces);for(a=0,i=SS.length;a<i;++a)(o=SS[a])!==OS&&t.modified(o)&&e[o](t[o]);for(a=0,i=s.length;a<i;++a)u=OS+a,(o=n||t.modified(OS,a)?NS(s[a]):r&&TS(s[a],r)?e.force(u):null)&&e.force(u,o);for(i=e.numForces||0;a<i;++a)e.force(OS+a,null);return e.numForces=s.length,e}function TS(e,t){var n,r;for(n in e)if(NO(r=e[n])&&t.modified(wO(r)))return 1;return 0}function NS(e){var t,n;for(n in DO(kS,e.force)||jO("Unrecognized force: "+e.force),t=kS[e.force](),e)NO(t[n])&&MS(t[n],e[n],e);return t}function MS(e,t,n){e(NO(t)?function(e){return t(e,n)}:t)}function DS(e,t,n){return e.fields=t||[],e.fname=n,e}function IS(e){return 1===e.length?FS(e[0]):RS(e)}CS.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ES}]},function(e,t,n){var r=e.prototype=Object.create(t.prototype);r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n]}(r,n)}(CS,Zn,{transform:function(e,t){var n,r,a=this.value,i=t.changed(t.ADD_REM),o=e.modified(SS),u=e.iterations||300;if(a?(i&&(t.modifies("index"),a.nodes(t.source)),(o||t.changed(t.MOD))&&AS(a,e,0,t)):(this.value=a=function(e,t){var n=xS(e),r=n.stop,a=n.restart,i=!1;return n.stopped=function(){return i},n.restart=function(){return i=!1,a()},n.stop=function(){return i=!0,r()},AS(n,t,!0).on("end",(function(){return i=!0}))}(t.source,e),a.on("tick",(n=t.dataflow,r=this,function(){return n.touch(r).run()})),e.static||(i=!0,a.tick()),t.modifies("index")),o||i||e.modified(jS)||t.changed()&&e.restart)if(a.alpha(Math.max(a.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(a.alphaMin(),1/u)),e.static)for(a.stop();--u>=0;)a.tick();else if(a.stopped()&&a.restart(),!i)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){for(var n,r=t.dataflow,a=this._argops,i=0,o=a.length;i<o;++i)if((n=a[i]).name===OS&&"link"===n.op._argval.force)for(var u,s=n.op._argops,c=0,l=s.length;c<l;++c)if("links"===s[c].name&&(u=s[c].op.source)){r.pulse(u,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(ES)}});var FS=function(e){return function(t){return t[e]}},RS=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function PS(e){throw Error(e)}function LS(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||PS("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&PS("Access path missing closing bracket: "+e),o&&PS("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function BS(e,t,n){var r=LS(e);return e=1===r.length?r[0]:e,DS((n&&n.get||IS)(r),[e],t||e)}BS("id"),DS((function(e){return e}),[],"identity"),DS((function(){return 0}),[],"zero");var zS=DS((function(){return 1}),[],"one"),US=DS((function(){return!0}),[],"true");DS((function(){return!1}),[],"false");var WS=Array.isArray;function VS(e){return null!=e?WS(e)?e:[e]:[]}var GS=Object.prototype.hasOwnProperty;function qS(e,t){return GS.call(e,t)}function HS(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}(r,n)}function XS(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}var YS=w.a.mark(KS);function KS(){var e,t,n,r,a,i;return w.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=[e=this];case 1:t=n.reverse(),n=[];case 2:if(!(e=t.pop())){o.next=8;break}return o.next=5,e;case 5:if(r=e.children)for(a=0,i=r.length;a<i;++a)n.push(r[a]);o.next=2;break;case 8:if(n.length){o.next=1;break}case 9:case"end":return o.stop()}}),YS,this)}function $S(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=JS)):void 0===t&&(t=ZS);for(var n,r,a,i,o,u=new tj(e),s=[u];n=s.pop();)if((a=t(n.data))&&(o=(a=Array.from(a)).length))for(n.children=a,i=o-1;i>=0;--i)s.push(r=a[i]=new tj(a[i])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(ej)}function ZS(e){return e.children}function JS(e){return Array.isArray(e)?e[1]:null}function QS(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function ej(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function tj(e){this.data=e,this.depth=this.height=0,this.parent=null}tj.prototype=$S.prototype=Object(go.a)({constructor:tj,count:function(){return this.eachAfter(XS)},each:function(e,t){var n,r=-1,a=Object(tr.a)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.call(t,i,++r,this)}}catch(o){a.e(o)}finally{a.f()}return this},eachAfter:function(e,t){for(var n,r,a,i=this,o=[i],u=[],s=-1;i=o.pop();)if(u.push(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r]);for(;i=u.pop();)e.call(t,i,++s,this);return this},eachBefore:function(e,t){for(var n,r,a=this,i=[a],o=-1;a=i.pop();)if(e.call(t,a,++o,this),n=a.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(e,t){var n,r=-1,a=Object(tr.a)(this);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e.call(t,i,++r,this))return i}}catch(o){a.e(o)}finally{a.f()}},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)n+=r[a].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),a=null;e=n.pop(),t=r.pop();for(;e===t;)a=e,e=n.pop(),t=r.pop();return a}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var a=r.length;e!==n;)r.splice(a,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return $S(this).eachBefore(QS)}},Symbol.iterator,KS);var nj=function(e){for(var t,n,r=0,a=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,i=[];r<a;)t=e[r],n&&ij(n,t)?++r:(n=uj(i=rj(i,t)),r=0);return n};function rj(e,t){var n,r;if(oj(t,e))return[t];for(n=0;n<e.length;++n)if(aj(t,e[n])&&oj(sj(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(aj(sj(e[n],e[r]),t)&&aj(sj(e[n],t),e[r])&&aj(sj(e[r],t),e[n])&&oj(cj(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function aj(e,t){var n=e.r-t.r,r=t.x-e.x,a=t.y-e.y;return n<0||n*n<r*r+a*a}function ij(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function oj(e,t){for(var n=0;n<t.length;++n)if(!ij(e,t[n]))return!1;return!0}function uj(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return sj(e[0],e[1]);case 3:return cj(e[0],e[1],e[2])}var t}function sj(e,t){var n=e.x,r=e.y,a=e.r,i=t.x,o=t.y,u=t.r,s=i-n,c=o-r,l=u-a,f=Math.sqrt(s*s+c*c);return{x:(n+i+s/f*l)/2,y:(r+o+c/f*l)/2,r:(f+a+u)/2}}function cj(e,t,n){var r=e.x,a=e.y,i=e.r,o=t.x,u=t.y,s=t.r,c=n.x,l=n.y,f=n.r,d=r-o,h=r-c,p=a-u,v=a-l,m=s-i,g=f-i,b=r*r+a*a-i*i,y=b-o*o-u*u+s*s,x=b-c*c-l*l+f*f,_=h*p-d*v,w=(p*x-v*y)/(2*_)-r,k=(v*m-p*g)/_,O=(h*y-d*x)/(2*_)-a,S=(d*g-h*m)/_,j=k*k+S*S-1,E=2*(i+w*k+O*S),C=w*w+O*O-i*i,A=-(j?(E+Math.sqrt(E*E-4*j*C))/(2*j):C/E);return{x:r+w+k*A,y:a+O+S*A,r:A}}function lj(e,t,n){var r,a,i,o,u=e.x-t.x,s=e.y-t.y,c=u*u+s*s;c?(a=t.r+n.r,a*=a,o=e.r+n.r,a>(o*=o)?(r=(c+o-a)/(2*c),i=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*u-i*s,n.y=e.y-r*s+i*u):(r=(c+a-o)/(2*c),i=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x+r*u-i*s,n.y=t.y+r*s+i*u)):(n.x=t.x+n.r,n.y=t.y)}function fj(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,a=t.y-e.y;return n>0&&n*n>r*r+a*a}function dj(e){var t=e._,n=e.next._,r=t.r+n.r,a=(t.x*n.r+n.x*t.r)/r,i=(t.y*n.r+n.y*t.r)/r;return a*a+i*i}function hj(e){this._=e,this.next=null,this.previous=null}function pj(e){if(!(i=(t=e,e="object"===typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,a,i,o,u,s,c,l,f,d;if((n=e[0]).x=0,n.y=0,!(i>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(i>2))return n.r+r.r;lj(r,n,a=e[2]),n=new hj(n),r=new hj(r),a=new hj(a),n.next=a.previous=r,r.next=n.previous=a,a.next=r.previous=n;e:for(s=3;s<i;++s){lj(n._,r._,a=e[s]),a=new hj(a),c=r.next,l=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(fj(c._,a._)){r=c,n.next=r,r.previous=n,--s;continue e}f+=c._.r,c=c.next}else{if(fj(l._,a._)){(n=l).next=r,r.previous=n,--s;continue e}d+=l._.r,l=l.previous}}while(c!==l.next);for(a.previous=n,a.next=r,n.next=r.previous=r=a,o=dj(n);(a=a.next)!==r;)(u=dj(a))<o&&(n=a,o=u);r=n.next}for(n=[r._],a=r;(a=a.next)!==r;)n.push(a._);for(a=nj(n),s=0;s<i;++s)(n=e[s]).x-=a.x,n.y-=a.y;return a.r}function vj(e){return null==e?null:mj(e)}function mj(e){if("function"!==typeof e)throw new Error;return e}function gj(){return 0}var bj=function(e){return function(){return e}};function yj(e){return Math.sqrt(e.value)}function xj(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function _j(e,t){return function(n){if(r=n.children){var r,a,i,o=r.length,u=e(n)*t||0;if(u)for(a=0;a<o;++a)r[a].r+=u;if(i=pj(r),u)for(a=0;a<o;++a)r[a].r-=u;n.r=i+u}}}function wj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var kj=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},Oj=function(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(r-t)/e.value;++u<s;)(i=o[u]).y0=n,i.y1=a,i.x0=t,i.x1=t+=i.value*c},Sj={depth:-1},jj={};function Ej(e){return e.id}function Cj(e){return e.parentId}var Aj=function(){var e=Ej,t=Cj;function n(n){var r,a,i,o,u,s,c,l=Array.from(n),f=l.length,d=new Map;for(a=0;a<f;++a)r=l[a],u=l[a]=new tj(r),null!=(s=e(r,a,n))&&(s+="")&&(c=u.id=s,d.set(c,d.has(c)?jj:u)),null!=(s=t(r,a,n))&&(s+="")&&(u.parent=s);for(a=0;a<f;++a)if(s=(u=l[a]).parent){if(!(o=d.get(s)))throw new Error("missing: "+s);if(o===jj)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(i)throw new Error("multiple roots");i=u}if(!i)throw new Error("no root");if(i.parent=Sj,i.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(ej),i.parent=null,f>0)throw new Error("cycle");return i}return n.id=function(t){return arguments.length?(e=mj(t),n):e},n.parentId=function(e){return arguments.length?(t=mj(e),n):t},n};function Tj(e,t){return e.parent===t.parent?1:2}function Nj(e){var t=e.children;return t?t[0]:e.t}function Mj(e){var t=e.children;return t?t[t.length-1]:e.t}function Dj(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ij(e,t,n){return e.a.parent===t.parent?e.a:n}function Fj(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Fj.prototype=Object.create(tj.prototype);function Rj(e,t){return e.parent===t.parent?1:2}function Pj(e,t){return e+t.x}function Lj(e,t){return Math.max(e,t.y)}var Bj=function(e,t,n,r,a){for(var i,o=e.children,u=-1,s=o.length,c=e.value&&(a-n)/e.value;++u<s;)(i=o[u]).x0=t,i.x1=r,i.y0=n,i.y1=n+=i.value*c},zj=(1+Math.sqrt(5))/2;function Uj(e,t,n,r,a,i){for(var o,u,s,c,l,f,d,h,p,v,m,g=[],b=t.children,y=0,x=0,_=b.length,w=t.value;y<_;){s=a-n,c=i-r;do{l=b[x++].value}while(!l&&x<_);for(f=d=l,m=l*l*(v=Math.max(c/s,s/c)/(w*e)),p=Math.max(d/m,m/f);x<_;++x){if(l+=u=b[x].value,u<f&&(f=u),u>d&&(d=u),m=l*l*v,(h=Math.max(d/m,m/f))>p){l-=u;break}p=h}g.push(o={value:l,dice:s<c,children:b.slice(y,x)}),o.dice?Oj(o,n,r,a,w?r+=c*l/w:i):Bj(o,n,r,w?n+=s*l/w:a,i),w-=l,y=x}return g}var Wj=function e(t){function n(e,n,r,a,i){Uj(t,e,n,r,a,i)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(zj),Vj=function e(t){function n(e,n,r,a,i){if((o=e._squarify)&&o.ratio===t)for(var o,u,s,c,l,f=-1,d=o.length,h=e.value;++f<d;){for(s=(u=o[f]).children,c=u.value=0,l=s.length;c<l;++c)u.value+=s[c].value;u.dice?Oj(u,n,r,a,h?r+=(i-r)*u.value/h:i):Bj(u,n,r,h?n+=(a-n)*u.value/h:a,i),h-=u.value}else e._squarify=o=Uj(t,e,n,r,a,i),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(zj);function Gj(e,t,n){var r={};return e.each((function(e){var a=e.data;n(a)&&(r[t(a)]=e)})),e.lookup=r,e}function qj(e){Zn.call(this,null,e)}qj.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};var Hj=function(e){return e.values};function Xj(){var e=[],t={entries:function(e){return r(n(e,0),0)},key:function(n){return e.push(n),t}};function n(t,r){if(r>=e.length)return t;for(var a,i,o,u=t.length,s=e[r++],c={},l={},f=-1;++f<u;)(o=c[a=s(i=t[f])+""])?o.push(i):c[a]=[i];for(a in c)l[a]=n(c[a],r);return l}function r(t,n){if(++n>e.length)return t;var a=[];for(var i in t)a.push({key:i,values:r(t[i],n)});return a}return t}function Yj(e){Zn.call(this,null,e)}HS(qj,Zn,{transform:function(e,t){t.source||PS("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),a=t.clone(),i=this.value;return(!i||r||t.changed())&&(i&&i.each((function(e){e.children&&dn(e.data)&&a.rem.push(e.data)})),this.value=i=$S({values:VS(e.keys).reduce((function(e,t){return e.key(t),e}),Xj()).entries(a.source)},Hj),n&&i.each((function(e){e.children&&(e=vn(e.data),a.add.push(e),a.source.push(e))})),Gj(i,hn,hn)),a.source.root=i,a}});var Kj=function(e,t){return e.parent===t.parent?1:2};HS(Yj,Zn,{transform:function(e,t){t.source&&t.source.root||PS(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,a=t.source.root,i=e.as||r;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(yn(e.sort,(function(e){return e.data}))),function(e,t,n){for(var r,a=0,i=t.length;a<i;++a)(r=t[a])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?Kj:zS);try{this.value=n(a)}catch(o){PS(o)}return a.each((function(e){return function(e,t,n){for(var r=e.data,a=t.length-1,i=0;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,i)})),t.reflow(e.modified()).modifies(i).modifies("leaf")}});var $j=["x","y","r","depth","children"];function Zj(e){Yj.call(this,e)}Zj.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$j.length,default:$j}]},HS(Zj,Yj,{layout:function(){var e=null,t=1,n=1,r=gj;function a(a){return a.x=t/2,a.y=n/2,e?a.eachBefore(xj(e)).eachAfter(_j(r,.5)).eachBefore(wj(1)):a.eachBefore(xj(yj)).eachAfter(_j(gj,1)).eachAfter(_j(r,a.r/Math.min(t,n))).eachBefore(wj(Math.min(t,n)/(2*a.r))),a}return a.radius=function(t){return arguments.length?(e=vj(t),a):e},a.size=function(e){return arguments.length?(t=+e[0],n=+e[1],a):[t,n]},a.padding=function(e){return arguments.length?(r="function"===typeof e?e:bj(+e),a):r},a},params:["radius","size","padding"],fields:$j});var Jj=["x0","y0","x1","y1","depth","children"];function Qj(e){Yj.call(this,e)}function eE(e){Zn.call(this,null,e)}Qj.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Jj.length,default:Jj}]},HS(Qj,Yj,{layout:function(){var e=1,t=1,n=0,r=!1;function a(a){var i=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/i,a.eachBefore(function(e,t){return function(r){r.children&&Oj(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var a=r.x0,i=r.y0,o=r.x1-n,u=r.y1-n;o<a&&(a=o=(a+o)/2),u<i&&(i=u=(i+u)/2),r.x0=a,r.y0=i,r.x1=o,r.y1=u}}(t,i)),r&&a.eachBefore(kj),a}return a.round=function(e){return arguments.length?(r=!!e,a):r},a.size=function(n){return arguments.length?(e=+n[0],t=+n[1],a):[e,t]},a.padding=function(e){return arguments.length?(n=+e,a):n},a},params:["size","round","padding"],fields:Jj}),eE.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},HS(eE,Zn,{transform:function(e,t){t.source||PS("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),i=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),i&&(n=a.source.length?Gj(Aj().id(e.key).parentId(e.parentKey)(a.source),e.key,US):Gj(Aj()([{}]),e.key,e.key)),a.source.root=this.value=n,a}});var tE={tidy:function(){var e=Tj,t=1,n=1,r=null;function a(a){var s=function(e){for(var t,n,r,a,i,o=new Fj(e,0),u=[o];t=u.pop();)if(r=t._.children)for(t.children=new Array(i=r.length),a=i-1;a>=0;--a)u.push(n=t.children[a]=new Fj(r[a],a)),n.parent=t;return(o.parent=new Fj(null,0)).children=[o],o}(a);if(s.eachAfter(i),s.parent.m=-s.z,s.eachBefore(o),r)a.eachBefore(u);else{var c=a,l=a,f=a;a.eachBefore((function(e){e.x<c.x&&(c=e),e.x>l.x&&(l=e),e.depth>f.depth&&(f=e)}));var d=c===l?1:e(c,l)/2,h=d-c.x,p=t/(l.x+d+h),v=n/(f.depth||1);a.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*v}))}return a}function i(t){var n=t.children,r=t.parent.children,a=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,a=e.children,i=a.length;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;a?(t.z=a.z+e(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+e(t._,a._));t.parent.A=function(t,n,r){if(n){for(var a,i=t,o=t,u=n,s=i.parent.children[0],c=i.m,l=o.m,f=u.m,d=s.m;u=Mj(u),i=Nj(i),u&&i;)s=Nj(s),(o=Mj(o)).a=t,(a=u.z+f-i.z-c+e(u._,i._))>0&&(Dj(Ij(u,t,r),t,a),c+=a,l+=a),f+=u.m,c+=i.m,d+=s.m,l+=o.m;u&&!Mj(o)&&(o.t=u,o.m+=f-l),i&&!Nj(s)&&(s.t=i,s.m+=c-d,r=t)}return r}(t,a,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=t,e.y=e.depth*n}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a},cluster:function(){var e=Rj,t=1,n=1,r=!1;function a(a){var i,o=0;a.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(Pj,0)/e.length}(n),t.y=function(e){return 1+e.reduce(Lj,0)}(n)):(t.x=i?o+=e(t,i):0,t.y=0,i=t)}));var u=function(e){for(var t;t=e.children;)e=t[0];return e}(a),s=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(a),c=u.x-e(u,s)/2,l=s.x+e(s,u)/2;return a.eachAfter(r?function(e){e.x=(e.x-a.x)*t,e.y=(a.y-e.y)*n}:function(e){e.x=(e.x-c)/(l-c)*t,e.y=(1-(a.y?e.y/a.y:1))*n})}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],a):r?null:[t,n]},a.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],a):r?[t,n]:null},a}},nE=["x","y","depth","children"];function rE(e){Yj.call(this,e)}function aE(e){Zn.call(this,[],e)}rE.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:nE.length,default:nE}]},HS(rE,Yj,{layout:function(e){var t=e||"tidy";if(qS(tE,t))return tE[t]();PS("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:nE}),aE.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},HS(aE,Zn,{transform:function(e,t){var n=this.value,r=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),i={};return r||PS("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,(function(e){return i[hn(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&i[hn(t)]&&i[hn(n)]&&a.add.push(vn({source:n,target:t}))})),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){return i[hn(e)]=1})),n.forEach((function(e){(i[hn(e.source)]||i[hn(e.target)])&&a.mod.push(e)}))),a}});var iE={binary:function(e,t,n,r,a){var i,o,u=e.children,s=u.length,c=new Array(s+1);for(c[0]=o=i=0;i<s;++i)c[i+1]=o+=u[i].value;!function e(t,n,r,a,i,o,s){if(t>=n-1){var l=u[t];return l.x0=a,l.y0=i,l.x1=o,void(l.y1=s)}var f=c[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var v=h+p>>>1;c[v]<d?h=v+1:p=v}d-c[h-1]<c[h]-d&&t+1<h&&--h;var m=c[h]-f,g=r-m;if(o-a>s-i){var b=r?(a*g+o*m)/r:o;e(t,h,m,a,i,b,s),e(h,n,g,b,i,o,s)}else{var y=r?(i*g+s*m)/r:s;e(t,h,m,a,i,o,y),e(h,n,g,a,y,o,s)}}(0,s,e.value,t,n,r,a)},dice:Oj,slice:Bj,slicedice:function(e,t,n,r,a){(1&e.depth?Bj:Oj)(e,t,n,r,a)},squarify:Wj,resquarify:Vj},oE=["x0","y0","x1","y1","depth","children"];function uE(e){Yj.call(this,e)}function sE(e,t,n){return e.fields=t||[],e.fname=n,e}function cE(e){return null==e?null:e.fname}function lE(e){return 1===e.length?fE(e[0]):dE(e)}uE.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oE.length,default:oE}]},HS(uE,Yj,{layout:function(){var e=function(){var e=Wj,t=!1,n=1,r=1,a=[0],i=gj,o=gj,u=gj,s=gj,c=gj;function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),a=[0],t&&e.eachBefore(kj),e}function f(t){var n=a[t.depth],r=t.x0+n,l=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t.x0=r,t.y0=l,t.x1=f,t.y1=d,t.children&&(n=a[t.depth+1]=i(t)/2,r+=c(t)-n,l+=o(t)-n,(f-=u(t)-n)<r&&(r=f=(r+f)/2),(d-=s(t)-n)<l&&(l=d=(l+d)/2),e(t,r,l,f,d))}return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=mj(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(i="function"===typeof e?e:bj(+e),l):i},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o="function"===typeof e?e:bj(+e),l):o},l.paddingRight=function(e){return arguments.length?(u="function"===typeof e?e:bj(+e),l):u},l.paddingBottom=function(e){return arguments.length?(s="function"===typeof e?e:bj(+e),l):s},l.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:bj(+e),l):c},l}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){qS(iE,t)?e.tile(iE[t]):PS("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:oE});var fE=function(e){return function(t){return t[e]}},dE=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function hE(e){throw Error(e)}function pE(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||hE("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&hE("Access path missing closing bracket: "+e),o&&hE("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function vE(e,t,n){var r=pE(e);return e=1===r.length?r[0]:e,sE((n&&n.get||lE)(r),[e],t||e)}vE("id"),sE((function(e){return e}),[],"identity"),sE((function(){return 0}),[],"zero"),sE((function(){return 1}),[],"one"),sE((function(){return!0}),[],"true"),sE((function(){return!1}),[],"false");Array.isArray;var mE=Object.prototype.hasOwnProperty;function gE(e,t){return mE.call(e,t)}function bE(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}(r,n)}function yE(e,t){var n,r,a,i,o,u,s=[],c=function(e){return e(i)};if(null==t)s.push(e);else for(n={},r=0,a=e.length;r<a;++r)i=e[r],(u=n[o=t.map(c)])||(n[o]=u=[],u.dims=o,s.push(u)),u.push(i);return s}function xE(e){Zn.call(this,null,e)}xE.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},bE(xE,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=yE(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(cE),i=a.length,o=e.as||[cE(e.x),cE(e.y)],u=[];r.forEach((function(t){Da(t,e.x,e.y,e.bandwidth||.3).forEach((function(e){for(var n={},r=0;r<i;++r)n[a[r]]=t.dims[r];n[o[0]]=e[0],n[o[1]]=e[1],u.push(vn(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});var _E={linear:ja,log:Ea,exp:Ca,pow:Aa,quad:Ta,poly:Na};function wE(e){Zn.call(this,null,e)}function kE(e,t,n){return e.fields=t||[],e.fname=n,e}function OE(e){return 1===e.length?SE(e[0]):jE(e)}wE.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(_E)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},bE(wE,Zn,{transform:function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=yE(t.materialize(t.SOURCE).source,e.groupby),a=(e.groupby||[]).map(cE),i=e.method||"linear",o=e.order||3,u=function(e,t){return"poly"===e?t:"quad"===e?2:1}(i,o),s=e.as||[cE(e.x),cE(e.y)],c=_E[i],l=[],f=e.extent;gE(_E,i)||hE("Invalid regression method: "+i),null!=f&&"log"===i&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((function(n){if(n.length<=u)t.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=c(n,e.x,e.y,o);if(e.params)l.push(vn({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var d=f||function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}(n,e.x),h=function(e){for(var t={},r=0;r<a.length;++r)t[a[r]]=n.dims[r];t[s[0]]=e[0],t[s[1]]=e[1],l.push(vn(t))};"linear"===i?d.forEach((function(e){return h([e,r.predict(e)])})):Pa(r.predict,d,25,200).forEach(h)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});var SE=function(e){return function(t){return t[e]}},jE=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function EE(e){throw Error(e)}function CE(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||EE("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&EE("Access path missing closing bracket: "+e),o&&EE("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function AE(e,t,n){var r=CE(e);return e=1===r.length?r[0]:e,kE((n&&n.get||OE)(r),[e],t||e)}AE("id"),kE((function(e){return e}),[],"identity"),kE((function(){return 0}),[],"zero"),kE((function(){return 1}),[],"one"),kE((function(){return!0}),[],"true"),kE((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;var TE=Math.pow(2,-52),NE=new Uint32Array(512),ME=function(){function e(t){Object(Rx.a)(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return Object(Px.a)(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,a=this._hullHash,i=e.length>>1,o=1/0,u=1/0,s=-1/0,c=-1/0,l=0;l<i;l++){var f=e[2*l],d=e[2*l+1];f<o&&(o=f),d<u&&(u=d),f>s&&(s=f),d>c&&(c=d),this._ids[l]=l}for(var h,p,v,m=(o+s)/2,g=(u+c)/2,b=1/0,y=0;y<i;y++){var x=DE(m,g,e[2*y],e[2*y+1]);x<b&&(h=y,b=x)}var _=e[2*h],w=e[2*h+1];b=1/0;for(var k=0;k<i;k++)if(k!==h){var O=DE(_,w,e[2*k],e[2*k+1]);O<b&&O>0&&(p=k,b=O)}for(var S=e[2*p],j=e[2*p+1],E=1/0,C=0;C<i;C++)if(C!==h&&C!==p){var A=PE(_,w,S,j,e[2*C],e[2*C+1]);A<E&&(v=C,E=A)}var T=e[2*v],N=e[2*v+1];if(E===1/0){for(var M=0;M<i;M++)this._dists[M]=e[2*M]-e[0]||e[2*M+1]-e[1];LE(this._ids,this._dists,0,i-1);for(var D=new Uint32Array(i),I=0,F=0,R=-1/0;F<i;F++){var P=this._ids[F];this._dists[P]>R&&(D[I++]=P,R=this._dists[P])}return this.hull=D.subarray(0,I),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(FE(_,w,S,j,T,N)){var L=p,B=S,z=j;p=v,S=T,j=N,v=L,T=B,N=z}var U=function(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s);return{x:e+(c*l-u*f)*d,y:t+(o*f-s*l)*d}}(_,w,S,j,T,N);this._cx=U.x,this._cy=U.y;for(var W=0;W<i;W++)this._dists[W]=DE(e[2*W],e[2*W+1],U.x,U.y);LE(this._ids,this._dists,0,i-1),this._hullStart=h;var V=3;n[h]=t[v]=p,n[p]=t[h]=v,n[v]=t[p]=h,r[h]=0,r[p]=1,r[v]=2,a.fill(-1),a[this._hashKey(_,w)]=h,a[this._hashKey(S,j)]=p,a[this._hashKey(T,N)]=v,this.trianglesLen=0,this._addTriangle(h,p,v,-1,-1,-1);for(var G,q,H=0;H<this._ids.length;H++){var X=this._ids[H],Y=e[2*X],K=e[2*X+1];if(!(H>0&&Math.abs(Y-G)<=TE&&Math.abs(K-q)<=TE)&&(G=Y,q=K,X!==h&&X!==p&&X!==v)){for(var $=0,Z=0,J=this._hashKey(Y,K);Z<this._hashSize&&(-1===($=a[(J+Z)%this._hashSize])||$===n[$]);Z++);for(var Q=$=t[$],ee=void 0;ee=n[Q],!FE(Y,K,e[2*Q],e[2*Q+1],e[2*ee],e[2*ee+1]);)if((Q=ee)===$){Q=-1;break}if(-1!==Q){var te=this._addTriangle(Q,X,n[Q],-1,-1,r[Q]);r[X]=this._legalize(te+2),r[Q]=te,V++;for(var ne=n[Q];ee=n[ne],FE(Y,K,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,X,ee,r[X],-1,r[ne]),r[X]=this._legalize(te+2),n[ne]=ne,V--,ne=ee;if(Q===$)for(;FE(Y,K,e[2*(ee=t[Q])],e[2*ee+1],e[2*Q],e[2*Q+1]);)te=this._addTriangle(ee,X,Q,-1,r[Q],r[ee]),this._legalize(te+2),r[ee]=te,n[Q]=Q,V--,Q=ee;this._hullStart=t[X]=Q,n[Q]=t[ne]=X,n[X]=ne,a[this._hashKey(Y,K)]=X,a[this._hashKey(e[2*Q],e[2*Q+1])]=Q}}}this.hull=new Uint32Array(V);for(var re=0,ae=this._hullStart;re<V;re++)this.hull[re]=ae,ae=n[ae];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,a=0,i=0;;){var o=n[e],u=e-e%3;if(i=u+(e+2)%3,-1!==o){var s=o-o%3,c=u+(e+1)%3,l=s+(o+2)%3,f=t[i],d=t[e],h=t[c],p=t[l];if(RE(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=f;var v=n[l];if(-1===v){var m=this._hullStart;do{if(this._hullTri[m]===l){this._hullTri[m]=e;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(e,v),this._link(o,n[i]),this._link(i,l);var g=s+(o+1)%3;a<NE.length&&(NE[a++]=g)}else{if(0===a)break;e=NE[--a]}}else{if(0===a)break;e=NE[--a]}}return i}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,a,i){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,a),this._link(o+2,i),this.trianglesLen+=3,o}}],[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UE,a=t.length,i=new Float64Array(2*a),o=0;o<a;o++){var u=t[o];i[2*o]=n(u),i[2*o+1]=r(u)}return new e(i)}}]),e}();function DE(e,t,n,r){var a=e-n,i=t-r;return a*a+i*i}function IE(e,t,n,r,a,i){var o=(r-t)*(a-e),u=(n-e)*(i-t);return Math.abs(o-u)>=33306690738754716e-32*Math.abs(o+u)?o-u:0}function FE(e,t,n,r,a,i){return(IE(a,i,e,t,n,r)||IE(e,t,n,r,a,i)||IE(n,r,a,i,e,t))<0}function RE(e,t,n,r,a,i,o,u){var s=e-o,c=t-u,l=n-o,f=r-u,d=a-o,h=i-u,p=l*l+f*f,v=d*d+h*h;return s*(f*v-p*h)-c*(l*v-p*d)+(s*s+c*c)*(l*h-f*d)<0}function PE(e,t,n,r,a,i){var o=n-e,u=r-t,s=a-e,c=i-t,l=o*o+u*u,f=s*s+c*c,d=.5/(o*c-u*s),h=(c*l-u*f)*d,p=(o*f-s*l)*d;return h*h+p*p}function LE(e,t,n,r){if(r-n<=20)for(var a=n+1;a<=r;a++){for(var i=e[a],o=t[i],u=a-1;u>=n&&t[e[u]]>o;)e[u+1]=e[u--];e[u+1]=i}else{var s=n+1,c=r;BE(e,n+r>>1,s),t[e[n]]>t[e[r]]&&BE(e,n,r),t[e[s]]>t[e[r]]&&BE(e,s,r),t[e[n]]>t[e[s]]&&BE(e,n,s);for(var l=e[s],f=t[l];;){do{s++}while(t[e[s]]<f);do{c--}while(t[e[c]]>f);if(c<s)break;BE(e,s,c)}e[n+1]=e[c],e[c]=l,r-s+1>=c-n?(LE(e,t,s,r),LE(e,t,n,c-1)):(LE(e,t,n,c-1),LE(e,t,s,r))}}function BE(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function zE(e){return e[0]}function UE(e){return e[1]}var WE=1e-6,VE=function(){function e(){Object(Rx.a)(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(Px.a)(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),a=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(a):(Math.abs(this._x1-r)>WE||Math.abs(this._y1-a)>WE)&&(this._+="L"+r+","+a),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=a))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),GE=function(){function e(){Object(Rx.a)(this,e),this._=[]}return Object(Px.a)(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),qE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=Object(Nr.a)(n,4),a=r[0],i=r[1],o=r[2],u=r[3];if(Object(Rx.a)(this,e),!((o=+o)>=(a=+a))||!((u=+u)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=o,this.xmin=a,this.ymax=u,this.ymin=i,this._init()}return Object(Px.a)(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n=this.delaunay,r=n.points,a=n.hull,i=n.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2),s=0,c=0,l=i.length;s<l;s+=3,c+=2){var f=2*i[s],d=2*i[s+1],h=2*i[s+2],p=r[f],v=r[f+1],m=r[d],g=r[d+1],b=r[h],y=r[h+1],x=m-p,_=g-v,w=b-p,k=y-v,O=x*x+_*_,S=w*w+k*k,j=2*(x*k-_*w);if(j)if(Math.abs(j)<1e-8)e=(p+b)/2,t=(v+y)/2;else{var E=1/j;e=p+(k*O-_*S)*E,t=v+(x*S-w*O)*E}else e=(p+b)/2-1e8*k,t=(v+y)/2+1e8*w;u[c]=e,u[c+1]=t}var C,A,T,N=a[a.length-1],M=4*N,D=r[2*N],I=r[2*N+1];o.fill(0);for(var F=0;F<a.length;++F)C=M,A=D,T=I,M=4*(N=a[F]),D=r[2*N],I=r[2*N+1],o[C+2]=o[M]=T-I,o[C+3]=o[M+1]=D-A}},{key:"render",value:function(e){var t=null==e?e=new VE:void 0,n=this.delaunay,r=n.halfedges,a=n.inedges,i=n.hull,o=this.circumcenters,u=this.vectors;if(i.length<=1)return null;for(var s=0,c=r.length;s<c;++s){var l=r[s];if(!(l<s)){var f=2*Math.floor(s/3),d=2*Math.floor(l/3),h=o[f],p=o[f+1],v=o[d],m=o[d+1];this._renderSegment(h,p,v,m,e)}}for(var g,b=i[i.length-1],y=0;y<i.length;++y){g=b,b=i[y];var x=2*Math.floor(a[b]/3),_=o[x],w=o[x+1],k=4*g,O=this._project(_,w,u[k+2],u[k+3]);O&&this._renderSegment(_,w,O[0],O[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new VE:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new VE:void 0,r=this._clip(e);if(null!==r&&r.length){t.moveTo(r[0],r[1]);for(var a=r.length;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(var i=2;i<a;i+=2)r[i]===r[i-2]&&r[i+1]===r[i-1]||t.lineTo(r[i],r[i+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:w.a.mark((function e(){var t,n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,r=t.length/2;case 2:if(!(n<r)){e.next=11;break}if(!(a=this.cellPolygon(n))){e.next=8;break}return a.index=n,e.next=8,a;case 8:++n,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new GE;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,a){var i,o=this._regioncode(e,t),u=this._regioncode(n,r);0===o&&0===u?(a.moveTo(e,t),a.lineTo(n,r)):(i=this._clipSegment(e,t,n,r,o,u))&&(a.moveTo(i[0],i[1]),a.lineTo(i[2],i[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:w.a.mark((function e(t){var n,r,a,i,o,u,s,c,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=Object(tr.a)(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=25;break}if(i=a.value,!(o=this._clip(i))){e.next=23;break}u=0,s=n.length;case 10:if(!(u<s)){e.next=23;break}c=0,l=o.length;case 12:if(!(c<l)){e.next=20;break}if(n[u]!=o[c]||n[u+1]!=o[c+1]||n[(u+2)%s]!=o[(c+l-2)%l]||n[(u+3)%s]!=o[(c+l-1)%l]){e.next=17;break}return e.next=16,i;case 16:return e.abrupt("break",23);case 17:c+=2,e.next=12;break;case 20:u+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,a=n.halfedges,i=n.triangles,o=r[e];if(-1===o)return null;var u=[],s=o;do{var c=Math.floor(s/3);if(u.push(t[2*c],t[2*c+1]),i[s=s%3===2?s-2:s+1]!==e)break;s=a[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function(e,t){for(var n,r,a,i,o,u=t.length,s=null,c=t[u-2],l=t[u-1],f=this._regioncode(c,l),d=0;d<u;d+=2)if(n=c,r=l,c=t[d],l=t[d+1],a=f,f=this._regioncode(c,l),0===a&&0===f)i=o,o=0,s?s.push(c,l):s=[c,l];else{var h=void 0,p=void 0,v=void 0,m=void 0,g=void 0;if(0===a){if(null===(h=this._clipSegment(n,r,c,l,a,f)))continue;var b=h,y=Object(Nr.a)(b,4);p=y[0],v=y[1],m=y[2],g=y[3]}else{if(null===(h=this._clipSegment(c,l,n,r,f,a)))continue;var x=h,_=Object(Nr.a)(x,4);m=_[0],g=_[1],p=_[2],v=_[3],i=o,o=this._edgecode(p,v),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(p,v):s=[p,v]}i=o,o=this._edgecode(m,g),i&&o&&this._edge(e,i,o,s,s.length),s?s.push(m,g):s=[m,g]}if(s)i=o,o=this._edgecode(s[0],s[1]),i&&o&&this._edge(e,i,o,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,a,i){for(;;){if(0===a&&0===i)return[e,t,n,r];if(a&i)return null;var o=void 0,u=void 0,s=a||i;8&s?(o=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):4&s?(o=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):2&s?(u=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),a?(e=o,t=u,a=this._regioncode(e,t)):(n=o,r=u,i=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,a,i){var o,u=Array.from(t);if((o=this._project(u[0],u[1],n,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],a,i))&&u.push(o[0],o[1]),u=this._clipFinite(e,u))for(var s,c=0,l=u.length,f=this._edgecode(u[l-2],u[l-1]);c<l;c+=2)s=f,f=this._edgecode(u[c],u[c+1]),s&&f&&(c=this._edge(e,s,f,u,c),l=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(e,t,n,r,a){for(;t!==n;){var i=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,i=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,i=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,i=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,i=this.xmin,o=this.ymin}r[a]===i&&r[a+1]===o||!this.contains(e,i,o)||(r.splice(a,0,i,o),a+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,c=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[c]||r[u+1]===r[s+1]&&r[s+1]===r[c+1])&&(r.splice(s,2),u-=2)}return a}},{key:"_project",value:function(e,t,n,r){var a,i,o,u=1/0;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<u&&(o=this.ymin,i=e+(u=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<u&&(o=this.ymax,i=e+(u=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<u&&(i=this.xmax,o=t+(u=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<u&&(i=this.xmin,o=t+(u=a)*r)}return[i,o]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),e}(),HE=w.a.mark(eC),XE=2*Math.PI,YE=Math.pow;function KE(e){return e[0]}function $E(e){return e[1]}function ZE(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var JE=function(){function e(t){Object(Rx.a)(this,e),this._delaunator=new ME(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return Object(Px.a)(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var a=2*t[r],i=2*t[r+1],o=2*t[r+2];if((n[o]-n[a])*(n[i+1]-n[a+1])-(n[i]-n[a])*(n[o+1]-n[a+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],a=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],i=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]),o=0,u=t.length/2;o<u;++o){var s=ZE(t[2*o],t[2*o+1],i);t[2*o]=s[0],t[2*o+1]=s[1]}this._delaunator=new ME(t)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),h=this._hullIndex.fill(-1),p=0,v=c.length;p<v;++p){var m=f[p%3===2?p-2:p+1];-1!==c[p]&&-1!==d[m]||(d[m]=p)}for(var g=0,b=l.length;g<b;++g)h[l[g]]=g;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],d[l[0]]=1,2===l.length&&(d[l[1]]=0))}},{key:"voronoi",value:function(e){return new qE(this,e)}},{key:"neighbors",value:w.a.mark((function e(t){var n,r,a,i,o,u,s,c,l,f,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,a=this._hullIndex,i=this.halfedges,o=this.triangles,!(u=this.collinear)){e.next=10;break}if(!((s=u.indexOf(t))>0)){e.next=6;break}return e.next=6,u[s-1];case 6:if(!(s<u.length-1)){e.next=9;break}return e.next=9,u[s+1];case 9:return e.abrupt("return");case 10:if(-1!==(c=n[t])){e.next=13;break}return e.abrupt("return");case 13:l=c,f=-1;case 14:return e.next=16,f=o[l];case 16:if(o[l=l%3===2?l-2:l+1]===t){e.next=19;break}return e.abrupt("return");case 19:if(-1!==(l=i[l])){e.next=26;break}if((d=r[(a[t]+1)%r.length])===f){e.next=25;break}return e.next=25,d;case 25:return e.abrupt("return");case 26:if(l!==c){e.next=14;break}case 27:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,a=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==a;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,a=this.hull,i=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[e]||!s.length)return(e+1)%(s.length>>1);var c=e,l=YE(t-s[2*e],2)+YE(n-s[2*e+1],2),f=r[e],d=f;do{var h=u[d],p=YE(t-s[2*h],2)+YE(n-s[2*h+1],2);if(p<l&&(l=p,c=h),u[d=d%3===2?d-2:d+1]!==e)break;if(-1===(d=o[d])){if((d=a[(i[e]+1)%a.length])!==h&&YE(t-s[2*d],2)+YE(n-s[2*d+1],2)<l)return d;break}}while(d!==f);return c}},{key:"render",value:function(e){for(var t=null==e?e=new VE:void 0,n=this.points,r=this.halfedges,a=this.triangles,i=0,o=r.length;i<o;++i){var u=r[i];if(!(u<i)){var s=2*a[i],c=2*a[u];e.moveTo(n[s],n[s+1]),e.lineTo(n[c],n[c+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new VE:void 0,r=this.points,a=0,i=r.length;a<i;a+=2){var o=r[a],u=r[a+1];e.moveTo(o+t,u),e.arc(o,u,t,0,XE)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new VE:void 0,n=this.hull,r=this.points,a=2*n[0],i=n.length;e.moveTo(r[a],r[a+1]);for(var o=1;o<i;++o){var u=2*n[o];e.lineTo(r[u],r[u+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new GE;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new VE:void 0,r=this.points,a=this.triangles,i=2*a[e*=3],o=2*a[e+1],u=2*a[e+2];return t.moveTo(r[i],r[i+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[u],r[u+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:w.a.mark((function e(){var t,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,r=t.length/3;case 2:if(!(n<r)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new GE;return this.renderTriangle(e,t),t.value()}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$E,a=arguments.length>3?arguments[3]:void 0;return new e("length"in t?QE(t,n,r,a):Float64Array.from(eC(t,n,r,a)))}}]),e}();function QE(e,t,n,r){for(var a=e.length,i=new Float64Array(2*a),o=0;o<a;++o){var u=e[o];i[2*o]=t.call(r,u,o,e),i[2*o+1]=n.call(r,u,o,e)}return i}function eC(e,t,n,r){var a,i,o,u;return w.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a=0,i=Object(tr.a)(e),s.prev=2,i.s();case 4:if((o=i.n()).done){s.next=13;break}return u=o.value,s.next=8,t.call(r,u,a,e);case 8:return s.next=10,n.call(r,u,a,e);case 10:++a;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),i.e(s.t0);case 18:return s.prev=18,i.f(),s.finish(18);case 21:case"end":return s.stop()}}),HE,null,[[2,15,18,21]])}function tC(e){Zn.call(this,null,e)}tC.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var nC=[-1e5,-1e5,1e5,1e5];function rC(e){for(var t=e[0][0],n=e[0][1],r=e.length-1;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function aC(e,t,n){return e.fields=t||[],e.fname=n,e}function iC(e){return 1===e.length?oC(e[0]):uC(e)}!function(e,t,n){var r=e.prototype=Object.create(t.prototype);r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n]}(r,n)}(tC,Zn,{transform:function(e,t){var n=e.as||"path",r=t.source;if(!r||!r.length)return t;var a=e.size;a=a?[0,0,a[0],a[1]]:(a=e.extent)?[a[0][0],a[0][1],a[1][0],a[1][1]]:nC;for(var i=this.value=JE.from(r,e.x,e.y).voronoi(a),o=0,u=r.length;o<u;++o){var s=i.cellPolygon(o);r[o][n]=s?rC(s):null}return t.reflow(e.modified()).modifies(n)}});var oC=function(e){return function(t){return t[e]}},uC=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function sC(e){throw Error(e)}function cC(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||sC("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&sC("Access path missing closing bracket: "+e),o&&sC("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function lC(e,t,n){var r=cC(e);return e=1===r.length?r[0]:e,aC((n&&n.get||iC)(r),[e],t||e)}lC("id"),aC((function(e){return e}),[],"identity"),aC((function(){return 0}),[],"zero"),aC((function(){return 1}),[],"one"),aC((function(){return!0}),[],"true"),aC((function(){return!1}),[],"false");var fC=Array.isArray;function dC(e){return e[e.length-1]}function hC(e){return null==e||""===e?null:+e}function pC(e){return null!=e?fC(e)?e:[e]:[]}function vC(e){return"function"===typeof e}function mC(e){return vC(e)?e:function(){return e}}var gC=Object.prototype.hasOwnProperty;function bC(e,t){return gC.call(e,t)}var yC,xC;var _C="linear",wC="log",kC="pow",OC="sqrt",SC="symlog",jC="time",EC="utc",CC="sequential",AC="diverging",TC="quantile",NC="quantize",MC="threshold",DC="continuous",IC="discrete",FC="discretizing",RC="interpolating",PC="temporal";function LC(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return LC().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function BC(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return BC(t())},e}var zC=Array.prototype.map;function UC(e){return zC.call(e,hC)}var WC=Array.prototype.slice;var VC={};function GC(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(pC(n)),r}function qC(e,t,n){return arguments.length>1?(VC[e]=GC(e,t,n),this):HC(e)?VC[e]:void 0}function HC(e){return bC(VC,e)}qC("identity",Sc),qC(_C,Oc,DC),qC(wC,Ic,[DC,wC]),qC(kC,Bc,DC),qC(OC,zc,DC),qC(SC,Gc,DC),qC(jC,cl,[DC,PC]),qC(EC,ml,[DC,PC]),qC(CC,yl,[DC,RC]),qC("".concat(CC,"-").concat(_C),yl,[DC,RC]),qC("".concat(CC,"-").concat(wC),xl,[DC,RC,wC]),qC("".concat(CC,"-").concat(kC),wl,[DC,RC]),qC("".concat(CC,"-").concat(OC),kl,[DC,RC]),qC("".concat(CC,"-").concat(SC),_l,[DC,RC]),qC("".concat(AC,"-").concat(_C),jl,[DC,RC]),qC("".concat(AC,"-").concat(wC),El,[DC,RC,wC]),qC("".concat(AC,"-").concat(kC),Al,[DC,RC]),qC("".concat(AC,"-").concat(OC),Tl,[DC,RC]),qC("".concat(AC,"-").concat(SC),Cl,[DC,RC]),qC(TC,Nl,[FC,TC]),qC(NC,Ml,FC),qC(MC,Dl,FC),qC("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=UC(e),r):t.slice()},r.range=function(e){return arguments.length?(n=WC.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],dC(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[IC,FC]),qC("ordinal",ss,IC),qC("band",LC,IC),qC("point",(function(){return BC(LC().paddingInner(1))}),IC);function XC(e,t,n){return Ol(function(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function YC(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function KC(e,t){for(var n in e)ZC(n,t(e[n]))}var $C={};function ZC(e,t){return e=e&&e.toLowerCase(),arguments.length>1?($C[e]=t,this):$C[e]}KC({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},YC),KC({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return XC(YC(e))}));yC={},Object(go.a)(yC,TC,"quantiles"),Object(go.a)(yC,NC,"thresholds"),Object(go.a)(yC,MC,"domain"),xC={},Object(go.a)(xC,TC,"quantiles"),Object(go.a)(xC,NC,"domain");var JC=Math.PI/180,QC=2048;function eA(){var e,t,n,r,a,i,o,u=[256,256],s=aA,c=[],l=Math.random,f={};function d(e,t,n){for(var r,a,i,o,c,f=t.x,d=t.y,h=Math.sqrt(u[0]*u[0]+u[1]*u[1]),p=s(u),v=l()<.5?1:-1,m=-v;(r=p(m+=v))&&(a=~~r[0],i=~~r[1],!(Math.min(Math.abs(a),Math.abs(i))>=h));)if(t.x=f+a,t.y=d+i,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>u[0]||t.y+t.y1>u[1])&&(!n||!nA(t,e,u[0]))&&(!n||(c=n,(o=t).x+o.x1>c[0].x&&o.x+o.x0<c[1].x&&o.y+o.y1>c[0].y&&o.y+o.y0<c[1].y))){for(var g,b=t.sprite,y=t.width>>5,x=u[0]>>5,_=t.x-(y<<4),w=127&_,k=32-w,O=t.y1-t.y0,S=(t.y+t.y0)*x+(_>>5),j=0;j<O;j++){g=0;for(var E=0;E<=y;E++)e[S+E]|=g<<k|(E<y?(g=b[j*y+E])>>>w:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var s=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=QC/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(Qu()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((u[0]>>5)*u[1]),h=null,p=c.length,v=-1,m=[],g=c.map((function(u){return{text:e(u),font:t(u),style:r(u),weight:a(u),rotate:i(u),size:~~(n(u)+1e-14),padding:o(u),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:u}})).sort((function(e,t){return t.size-e.size}));++v<p;){var b=g[v];b.x=u[0]*(l()+.5)>>1,b.y=u[1]*(l()+.5)>>1,tA(s,b,g,v),b.hasText&&d(f,b,h)&&(m.push(b),h?rA(h,b):h=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=u[0]>>1,b.y-=u[1]>>1)}return m},f.words=function(e){return arguments.length?(c=e,f):c},f.size=function(e){return arguments.length?(u=[+e[0],+e[1]],f):u},f.font=function(e){return arguments.length?(t=iA(e),f):t},f.fontStyle=function(e){return arguments.length?(r=iA(e),f):r},f.fontWeight=function(e){return arguments.length?(a=iA(e),f):a},f.rotate=function(e){return arguments.length?(i=iA(e),f):i},f.text=function(t){return arguments.length?(e=iA(t),f):e},f.spiral=function(e){return arguments.length?(s=oA[e]||e,f):s},f.fontSize=function(e){return arguments.length?(n=iA(e),f):n},f.padding=function(e){return arguments.length?(o=iA(e),f):o},f.random=function(e){return arguments.length?(l=e,f):l},f}function tA(e,t,n,r){if(!t.sprite){var a=e.context,i=e.ratio;a.clearRect(0,0,2048/i,QC/i);var o,u,s,c,l,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/i)+"px "+t.font,o=a.measureText(t.text+"m").width*i,s=t.size<<1,t.rotate){var v=Math.sin(t.rotate*JC),m=Math.cos(t.rotate*JC),g=o*m,b=o*v,y=s*m,x=s*v;o=Math.max(Math.abs(g+x),Math.abs(g-x))+31>>5<<5,s=~~Math.max(Math.abs(b+y),Math.abs(b-y))}else o=o+31>>5<<5;if(s>h&&(h=s),f+o>=2048&&(f=0,d+=h,h=0),d+s>=QC)break;a.translate((f+(o>>1))/i,(d+(s>>1))/i),t.rotate&&a.rotate(t.rotate*JC),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=o,t.height=s,t.xoff=f,t.yoff=d,t.x1=o>>1,t.y1=s>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var _=a.getImageData(0,0,2048/i,QC/i).data,w=[];--r>=0;)if((t=n[r]).hasText){for(u=(o=t.width)>>5,s=t.y1-t.y0,c=0;c<s*u;c++)w[c]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,O=-1;for(l=0;l<s;l++){for(c=0;c<o;c++){var S=u*l+(c>>5),j=_[2048*(d+l)+(f+c)<<2]?1<<31-c%32:0;w[S]|=j,k|=j}k?O=l:(t.y0++,s--,l--,d++)}t.y1=t.y0+O,t.sprite=w.slice(0,(t.y1-t.y0)*u)}}}function nA(e,t,n){n>>=5;for(var r,a=e.sprite,i=e.width>>5,o=e.x-(i<<4),u=127&o,s=32-u,c=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var d=0;d<=i;d++)if((r<<s|(d<i?(r=a[f*i+d])>>>u:0))&t[l+d])return!0;l+=n}return!1}function rA(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function aA(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function iA(e){return"function"===typeof e?e:function(){return e}}var oA={archimedean:aA,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},uA=["x","y","font","fontSize","fontStyle","fontWeight","angle"],sA=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cA(e){Zn.call(this,eA(),e)}cA.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:uA}]},function(e,t,n){var r=e.prototype=Object.create(t.prototype);r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n]}(r,n)}(cA,Zn,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||sC("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||sA.some((function(n){var r=e[n];return vC(r)&&t.modified(r.fields)}))){var r,a=t.materialize(t.SOURCE).source,i=this.value,o=e.as||uA,u=e.fontSize||14;if(vC(u)?r=e.fontSizeRange:u=mC(u),r){var s=u,c=qC("sqrt")().domain(function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]}(a,s)).range(r);u=function(e){return c(s(e))}}a.forEach((function(e){e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));for(var l,f,d=i.words(a).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random($r).layout(),h=i.size(),p=h[0]>>1,v=h[1]>>1,m=d.length,g=0;g<m;++g)(f=(l=d[g]).datum)[o[0]]=l.x+p,f[o[1]]=l.y+v,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return t.reflow(n).modifies(o)}}});function lA(e,t,n){return e.fields=t||[],e.fname=n,e}function fA(e){return 1===e.length?dA(e[0]):hA(e)}var dA=function(e){return function(t){return t[e]}},hA=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function pA(e){throw Error(e)}function vA(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||pA("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&pA("Access path missing closing bracket: "+e),o&&pA("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function mA(e,t,n){var r=vA(e);return e=1===r.length?r[0]:e,lA((n&&n.get||fA)(r),[e],t||e)}mA("id"),lA((function(e){return e}),[],"identity"),lA((function(){return 0}),[],"zero"),lA((function(){return 1}),[],"one"),lA((function(){return!0}),[],"true"),lA((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;function gA(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,function(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}(r,n)}var bA=function(e){return new Uint8Array(e)},yA=function(e){return new Uint16Array(e)},xA=function(e){return new Uint32Array(e)};function _A(e,t,n){var r=(t<257?bA:t<65537?yA:xA)(e);return n&&r.set(n),r}function wA(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){var n,a=this,i=a.bisect(a.range,e.value),o=e.index,u=i[0],s=i[1],c=o.length;for(n=0;n<u;++n)t[o[n]]|=r;for(n=s;n<c;++n)t[o[n]]|=r;return a}}}function kA(){var e=xA(0),t=[],n=0;return{insert:function(r,a,i){if(!a.length)return[];var o,u,s,c,l,f,d,h=n,p=a.length,v=xA(p),m=Array(p);for(s=0;s<p;++s)m[s]=r(a[s]),v[s]=s;if(d=v,(f=m).sort.call(d,(function(e,t){var n=f[e],r=f[t];return n<r?-1:n>r?1:0})),c=f,l=d,m=Array.from(l,(function(e){return c[e]})),h)o=t,u=e,t=Array(h+p),e=xA(h+p),function(e,t,n,r,a,i,o,u,s){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)t[l]<a[f]?(u[c]=t[l],s[c]=n[l++]):(u[c]=a[f],s[c]=i[f++]+e);for(;l<r;++l,++c)u[c]=t[l],s[c]=n[l];for(;f<o;++f,++c)u[c]=a[f],s[c]=i[f]+e}(i,o,u,h,m,v,p,t,e);else{if(i>0)for(s=0;s<p;++s)v[s]+=i;t=m,e=v}return n=h+p,{index:v,value:m}},remove:function(r,a){var i,o,u,s=n;for(o=0;!a[e[o]]&&o<s;++o);for(u=o;o<s;++o)a[i=e[o]]||(e[u]=i,t[u]=t[o],++u);n=s-r},bisect:function(e,r){var a;return r?a=r.length:(r=t,a=n),[rs(r,e[0],0,a),ns(r,e[1],0,a)]},reindex:function(t){for(var r=0,a=n;r<a;++r)e[r]=t[e[r]]},index:function(){return e},size:function(){return n}}}function OA(e){Zn.call(this,function(){var e=8,t=[],n=xA(0),r=_A(0,e),a=_A(0,e);return{data:function(){return t},seen:function(){return e=n,r=t.length,n=e.length>=r?e:((a=a||new e.constructor(r)).set(e),a);var e,r,a},add:function(e){for(var n,r=0,a=t.length,i=e.length;r<i;++r)(n=e[r])._index=a++,t.push(n)},remove:function(e,n){var i,o,u,s=t.length,c=Array(s-e),l=t;for(o=0;!n[o]&&o<s;++o)c[o]=t[o],l[o]=o;for(u=o;o<s;++o)i=t[o],n[o]?l[o]=-1:(l[o]=u,r[u]=r[o],a[u]=a[o],c[u]=i,i._index=u++),r[o]=0;return t=c,l},size:function(){return t.length},curr:function(){return r},prev:function(){return a},reset:function(e){return a[e]=r[e]},all:function(){return e<257?255:e<65537?65535:4294967295},set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=_A(t,e,r),a=_A(t,e))}}}(),e),this._indices=null,this._dims=null}function SA(e){Zn.call(this,null,e)}OA.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},gA(OA,Zn,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){for(var n,r,a=e.fields,i=e.query,o=this._indices={},u=this._dims=[],s=i.length,c=0;c<s;++c)r=o[n=a[c].fname]||(o[n]=kA()),u.push(wA(r,c,i[c]));return this.eval(e,t)},reinit:function(e,t){var n,r,a,i,o,u,s,c,l,f=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,v=this._dims,m=this.value,g=m.curr(),b=m.prev(),y=m.all(),x=f.rem=f.add,_=f.mod,w=h.length,k={};if(b.set(g),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&m.add(t.add),t.mod.length)for(u={},s=0,c=(i=t.mod).length;s<c;++s)u[i[s]._index]=1;for(s=0;s<w;++s)l=d[s],(!v[s]||e.modified("fields",s)||t.modified(l.fields))&&((n=k[a=l.fname])||(p[a]=r=kA(),k[a]=n=r.insert(l,t.source,0)),v[s]=wA(r,s,h[s]).onAdd(n,g));for(s=0,c=m.data().length;s<c;++s)o[s]||(b[s]!==g[s]?x.push(s):u[s]&&g[s]!==y&&_.push(s));return m.mask=(1<<w)-1,f},eval:function(e,t){var n=t.materialize().fork(),r=this._dims.length,a=0;return t.rem.length&&(this.remove(e,t,n),a|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(a|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),a|=(1<<r)-1),t.mod.length&&(this.modify(t,n),a|=(1<<r)-1),this.value.mask=a,n},insert:function(e,t,n){var r,a,i,o=t.add,u=this.value,s=this._dims,c=this._indices,l=e.fields,f={},d=n.add,h=u.size()+o.length,p=s.length,v=u.size();u.resize(h,p),u.add(o);var m=u.curr(),g=u.prev(),b=u.all();for(r=0;r<p;++r)i=f[a=l[r].fname]||(f[a]=c[a].insert(l[r],o,v)),s[r].onAdd(i,m);for(;v<h;++v)g[v]=b,m[v]!==b&&d.push(v)},modify:function(e,t){var n,r,a,i=t.mod,o=this.value,u=o.curr(),s=o.all(),c=e.mod;for(n=0,r=c.length;n<r;++n)u[a=c[n]._index]!==s&&i.push(a)},remove:function(e,t,n){var r,a,i,o,u=this._indices,s=this.value,c=s.curr(),l=s.prev(),f=s.all(),d={},h=n.rem,p=t.rem;for(r=0,a=p.length;r<a;++r)d[i=p[r]._index]=1,l[i]=o=c[i],c[i]=f,o!==f&&h.push(i);for(i in u)u[i].remove(a,d);return this.reindex(t,a,d),d},reindex:function(e,t,n){var r=this._indices,a=this.value;e.runAfter((function(){var e=a.remove(t,n);for(var i in r)r[i].reindex(e)}))},update:function(e,t,n){var r,a,i=this._dims,o=e.query,u=t.stamp,s=i.length,c=0;for(n.filters=0,a=0;a<s;++a)e.modified("query",a)&&(r=a,++c);if(1===c)c=i[r].one,this.incrementOne(i[r],o[r],n.add,n.rem);else for(a=0,c=0;a<s;++a)e.modified("query",a)&&(c|=i[a].one,this.incrementAll(i[a],o[a],u,n.add),n.rem=n.add);return c},incrementAll:function(e,t,n,r){var a,i,o,u=this.value,s=u.seen(),c=u.curr(),l=u.prev(),f=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],v=h[1],m=d[0],g=d[1],b=e.one;if(p<m)for(a=p,i=Math.min(m,v);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;else if(p>m)for(a=m,i=Math.min(p,g);a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;if(v>g)for(a=Math.max(p,g),i=v;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;else if(v<g)for(a=Math.max(m,v),i=g;a<i;++a)s[o=f[a]]!==n&&(l[o]=c[o],s[o]=n,r.push(o)),c[o]^=b;e.range=t.slice()},incrementOne:function(e,t,n,r){var a,i,o,u=this.value.curr(),s=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=c[0],p=c[1],v=e.one;if(f<h)for(a=f,i=Math.min(h,d);a<i;++a)u[o=s[a]]^=v,n.push(o);else if(f>h)for(a=h,i=Math.min(f,p);a<i;++a)u[o=s[a]]^=v,r.push(o);if(d>p)for(a=Math.max(f,p),i=d;a<i;++a)u[o=s[a]]^=v,n.push(o);else if(d<p)for(a=Math.max(h,d),i=p;a<i;++a)u[o=s[a]]^=v,r.push(o);e.range=t.slice()}}),SA.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},gA(SA,Zn,{transform:function(e,t){var n=~(e.ignore||0),r=e.filter,a=r.mask;if(0===(a&n))return t.StopPropagation;var i=t.fork(t.ALL),o=r.data(),u=r.curr(),s=r.prev(),c=function(e){return u[e]&n?null:o[e]};return i.filter(i.MOD,c),a&a-1?(i.filter(i.ADD,(function(e){var t=u[e]&n;return!t&&t^s[e]&n?o[e]:null})),i.filter(i.REM,(function(e){var t=u[e]&n;return t&&!(t^t^s[e]&n)?o[e]:null}))):(i.filter(i.ADD,c),i.filter(i.REM,(function(e){return(u[e]&n)===a?o[e]:null}))),i.filter(i.SOURCE,(function(e){return c(e._index)}))}});var jA=n(367),EA=0;var CA="p_";function AA(e){return e&&e.gradient}function TA(e,t,n){var r=e.id,a=e.gradient,i="radial"===a?CA:"";return r||(r=e.id="gradient_"+EA++,"radial"===a?(e.x1=NA(e.x1,.5),e.y1=NA(e.y1,.5),e.r1=NA(e.r1,0),e.x2=NA(e.x2,.5),e.y2=NA(e.y2,.5),e.r2=NA(e.r2,.5),i=CA):(e.x1=NA(e.x1,0),e.y1=NA(e.y1,0),e.x2=NA(e.x2,1),e.y2=NA(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+i+r+")"}function NA(e,t){return null!=e?e:t}var MA=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}};function DA(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IA(e){this._context=e}IA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:DA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:DA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var FA=function(){};function RA(e){this._context=e}RA.prototype={areaStart:FA,areaEnd:FA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:DA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function PA(e){this._context=e}PA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:DA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LA(e,t){this._basis=new IA(e),this._beta=t}LA.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var BA=function e(t){function n(e){return 1===t?new IA(e):new LA(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function zA(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function UA(e,t){this._context=e,this._k=(1-t)/6}UA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:zA(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:zA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var WA=function e(t){function n(e){return new UA(e,t)}return n.tension=function(t){return e(+t)},n}(0);function VA(e,t){this._context=e,this._k=(1-t)/6}VA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var GA=function e(t){function n(e){return new VA(e,t)}return n.tension=function(t){return e(+t)},n}(0);function qA(e,t){this._context=e,this._k=(1-t)/6}qA.prototype={areaStart:FA,areaEnd:FA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:zA(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var HA=function e(t){function n(e){return new qA(e,t)}return n.tension=function(t){return e(+t)},n}(0),XA=Math.abs,YA=Math.atan2,KA=Math.cos,$A=Math.max,ZA=Math.min,JA=Math.sin,QA=Math.sqrt,eT=1e-12,tT=Math.PI,nT=tT/2,rT=2*tT;function aT(e){return e>1?0:e<-1?tT:Math.acos(e)}function iT(e){return e>=1?nT:e<=-1?-nT:Math.asin(e)}function oT(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>eT){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>eT){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function uT(e,t){this._context=e,this._alpha=t}uT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oT(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var sT=function e(t){function n(e){return t?new uT(e,t):new UA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function cT(e,t){this._context=e,this._alpha=t}cT.prototype={areaStart:FA,areaEnd:FA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oT(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var lT=function e(t){function n(e){return t?new cT(e,t):new qA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function fT(e,t){this._context=e,this._alpha=t}fT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oT(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dT=function e(t){function n(e){return t?new fT(e,t):new VA(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function hT(e){this._context=e}hT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var pT=function(e){return new hT(e)};function vT(e){this._context=e}vT.prototype={areaStart:FA,areaEnd:FA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mT(e){return e<0?-1:1}function gT(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(mT(i)+mT(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function bT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yT(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function xT(e){this._context=e}function _T(e){this._context=new wT(e)}function wT(e){this._context=e}function kT(e){this._context=e}function OT(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}xT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yT(this,this._t0,bT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yT(this,bT(this,n=gT(this,e,t)),n);break;default:yT(this,this._t0,n=gT(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(_T.prototype=Object.create(xT.prototype)).point=function(e,t){xT.prototype.point.call(this,t,e)},wT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},kT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=OT(e),a=OT(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ST(e,t){this._context=e,this._t=t}ST.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var jT={basis:{curve:function(e){return new IA(e)}},"basis-closed":{curve:function(e){return new RA(e)}},"basis-open":{curve:function(e){return new PA(e)}},bundle:{curve:BA,tension:"beta",value:.85},cardinal:{curve:WA,tension:"tension",value:0},"cardinal-open":{curve:GA,tension:"tension",value:0},"cardinal-closed":{curve:HA,tension:"tension",value:0},"catmull-rom":{curve:sT,tension:"alpha",value:.5},"catmull-rom-closed":{curve:lT,tension:"alpha",value:.5},"catmull-rom-open":{curve:dT,tension:"alpha",value:.5},linear:{curve:pT},"linear-closed":{curve:function(e){return new vT(e)}},monotone:{horizontal:function(e){return new _T(e)},vertical:function(e){return new xT(e)}},natural:{curve:function(e){return new kT(e)}},step:{curve:function(e){return new ST(e,.5)}},"step-after":{curve:function(e){return new ST(e,1)}},"step-before":{curve:function(e){return new ST(e,0)}}};function ET(e,t,n){var r=ft(jT,e)&&jT[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var CT={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},AT=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],TT=function(e){var t,n,r,a,i,o,u,s,c,l,f,d=[];for(s=0,l=(t=e.slice().replace(AT[0],"###$1").split(AT[1]).slice(1)).length;s<l;++s){for(r=(n=t[s]).slice(1).trim().replace(AT[2],"$1###$2").split(AT[3]),a=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(i=+r[c])===i&&a.push(i);if(u=CT[o.toLowerCase()],a.length-1>u)for(c=1,f=a.length;c<f;c+=u)d.push([o].concat(a.slice(c,c+u)));else d.push(a)}return d},NT=Math.PI/180,MT=Math.PI/2,DT=2*Math.PI,IT=Math.sqrt(3)/2,FT={},RT={},PT=[].join;function LT(e){var t=PT.call(e);if(RT[t])return RT[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,h=c*u,p=Math.cos(a),v=Math.sin(a),m=Math.cos(i),g=Math.sin(i),b=.5*(i-a),y=Math.sin(.5*b),x=8/3*y*y/Math.sin(b),_=n+p-x*v,w=r+v+x*p,k=n+m,O=r+g,S=k+x*g,j=O-x*m;return RT[t]=[l*_+f*w,d*_+h*w,l*S+f*j,d*S+h*j,l*k+f*O,d*k+h*O]}var BT=["l",0,0,0,0,0,0,0];function zT(e,t,n){var r=BT[0]=e[0];if("a"===r||"A"===r)BT[1]=t*e[1],BT[2]=n*e[2],BT[3]=e[3],BT[4]=e[4],BT[5]=e[5],BT[6]=t*e[6],BT[7]=n*e[7];else if("h"===r||"H"===r)BT[1]=t*e[1];else if("v"===r||"V"===r)BT[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)BT[a]=(a%2==1?t:n)*e[a];return BT}var UT=function(e,t,n,r,a,i){var o,u,s,c,l,f=null,d=0,h=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var m=0,g=t.length;m<g;++m){switch(o=t[m],1===a&&1===i||(o=zT(o,a,i)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],e.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],e.moveTo(d+n,h+r);break;case"c":u=d+o[5],s=h+o[6],p=d+o[3],v=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,v+r,u+n,s+r),d=u,h=s;break;case"C":d=o[5],h=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,d+n,h+r);break;case"s":u=d+o[3],s=h+o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,d+o[1]+n,h+o[2]+r,u+n,s+r),p=d+o[1],v=h+o[2],d=u,h=s;break;case"S":u=o[3],s=o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"q":u=d+o[3],s=h+o[4],p=d+o[1],v=h+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"t":u=d+o[1],s=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,v=h):"t"===f[0]?(p=2*d-c,v=2*h-l):"q"===f[0]&&(p=2*d-p,v=2*h-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=s,p=(d=u)+o[1],v=h+o[2];break;case"T":u=o[1],s=o[2],p=2*d-p,v=2*h-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"a":WT(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":WT(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":e.closePath()}f=o}};function WT(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=PT.call(arguments);if(FT[c])return FT[c];var l=o*NT,f=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+f*(s-t)*.5,p=d*(s-t)*.5-f*(u-e)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=d/n,g=f/n,b=-f/r,y=d/r,x=m*u+g*s,_=b*u+y*s,w=m*e+g*t,k=b*e+y*t,O=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;O<0&&(O=0);var S=Math.sqrt(O);i==a&&(S=-S);var j=.5*(x+w)-S*(k-_),E=.5*(_+k)+S*(w-x),C=Math.atan2(_-E,x-j),A=Math.atan2(k-E,w-j)-C;A<0&&1===i?A+=DT:A>0&&0===i&&(A-=DT);for(var T=Math.ceil(Math.abs(A/(MT+.001))),N=[],M=0;M<T;++M){var D=C+M*A/T,I=C+(M+1)*A/T;N[M]=[j,E,D,I,n,r,f,d]}return FT[c]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=LT(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var VT=.5773502691896257,GT={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,DT)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n,a=r-n*VT,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n,a=r-n*VT;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=IT*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function qT(e){return ft(GT,e)?GT[e]:function(e){if(!ft(HT,e)){var t=TT(e);HT[e]={draw:function(e,n){UT(e,t,0,0,Math.sqrt(n)/2)}}}return HT[e]}(e)}var HT={};var XT=Math.PI,YT=2*XT,KT=1e-6,$T=YT-KT;function ZT(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function JT(){return new ZT}ZT.prototype=JT.prototype={constructor:ZT,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>KT)if(Math.abs(l*u-s*c)>KT&&a){var d=n-i,h=r-o,p=u*u+s*s,v=d*d+h*h,m=Math.sqrt(p),g=Math.sqrt(f),b=a*Math.tan((XT-Math.acos((p+f-v)/(2*m*g)))/2),y=b/g,x=b/m;Math.abs(y-1)>KT&&(this._+="L"+(e+y*c)+","+(t+y*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>c*h)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>KT||Math.abs(this._y1-c)>KT)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%YT+YT),f>$T?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>KT&&(this._+="A"+n+","+n+",0,"+ +(f>=XT)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var QT=JT,eN=.448084975506;function tN(e){return e.x}function nN(e){return e.y}function rN(e){return e.width}function aN(e){return e.height}function iN(e){return"function"===typeof e?e:function(){return+e}}function oN(e,t,n){return Math.max(t,Math.min(e,n))}var uN=function(){var e=tN,t=nN,n=rN,r=aN,a=iN(0),i=a,o=a,u=a,s=null;function c(c,l,f){var d,h=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),m=+r.call(this,c),g=Math.min(v,m)/2,b=oN(+a.call(this,c),0,g),y=oN(+i.call(this,c),0,g),x=oN(+o.call(this,c),0,g),_=oN(+u.call(this,c),0,g);if(s||(s=d=QT()),b<=0&&y<=0&&x<=0&&_<=0)s.rect(h,p,v,m);else{var w=h+v,k=p+m;s.moveTo(h+b,p),s.lineTo(w-y,p),s.bezierCurveTo(w-eN*y,p,w,p+eN*y,w,p+y),s.lineTo(w,k-_),s.bezierCurveTo(w,k-eN*_,w-eN*_,k,w-_,k),s.lineTo(h+x,k),s.bezierCurveTo(h+eN*x,k,h,k-eN*x,h,k-x),s.lineTo(h,p+b),s.bezierCurveTo(h,p+eN*b,h+eN*b,p,h+b,p),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=iN(t),c):e},c.y=function(e){return arguments.length?(t=iN(e),c):t},c.width=function(e){return arguments.length?(n=iN(e),c):n},c.height=function(e){return arguments.length?(r=iN(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=iN(e),i=null!=t?iN(t):a,u=null!=n?iN(n):a,o=null!=r?iN(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c},sN=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,h=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-d,o-h),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+d,o+h),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,DT);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,d=!1;for(null==s&&(s=l=QT()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&(d=!d)&&(a=0),d&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l},cN=function(e){return function(){return e}};function lN(e){return e.innerRadius}function fN(e){return e.outerRadius}function dN(e){return e.startAngle}function hN(e){return e.endAngle}function pN(e){return e&&e.padAngle}function vN(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,d=f*s-l*c;if(!(d*d<eT))return[e+(d=(l*(t-i)-f*(e-a))/d)*s,t+d*c]}function mN(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/QA(u*u+s*s),l=c*s,f=-c*u,d=e+l,h=t+f,p=n+l,v=r+f,m=(d+p)/2,g=(h+v)/2,b=p-d,y=v-h,x=b*b+y*y,_=a-i,w=d*v-p*h,k=(y<0?-1:1)*QA($A(0,_*_*x-w*w)),O=(w*y-b*k)/x,S=(-w*b-y*k)/x,j=(w*y+b*k)/x,E=(-w*b+y*k)/x,C=O-m,A=S-g,T=j-m,N=E-g;return C*C+A*A>T*T+N*N&&(O=j,S=E),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(a/_-1),y11:S*(a/_-1)}}function gN(e){return e[0]}function bN(e){return e[1]}var yN=function(){var e=gN,t=bN,n=cN(!0),r=null,a=pT,i=null;function o(o){var u,s,c,l=o.length,f=!1;for(null==r&&(i=a(c=QT())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return o.x=function(t){return arguments.length?(e="function"===typeof t?t:cN(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:cN(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:cN(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},xN=function(){var e=gN,t=null,n=cN(0),r=bN,a=cN(!0),i=null,o=pT,u=null;function s(s){var c,l,f,d,h,p=s.length,v=!1,m=new Array(p),g=new Array(p);for(null==i&&(u=o(h=QT())),c=0;c<=p;++c){if(!(c<p&&a(d=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(m[f],g[f]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+e(d,c,s),g[c]=+n(d,c,s),u.point(t?+t(d,c,s):m[c],r?+r(d,c,s):g[c]))}if(h)return u=null,h+""||null}function c(){return yN().defined(a).curve(o).context(i)}return s.x=function(n){return arguments.length?(e="function"===typeof n?n:cN(+n),t=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:cN(+t),s):e},s.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:cN(+e),s):t},s.y=function(e){return arguments.length?(n="function"===typeof e?e:cN(+e),r=null,s):n},s.y0=function(e){return arguments.length?(n="function"===typeof e?e:cN(+e),s):n},s.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:cN(+e),s):r},s.lineX0=s.lineY0=function(){return c().x(e).y(n)},s.lineY1=function(){return c().x(e).y(r)},s.lineX1=function(){return c().x(t).y(n)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:cN(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s},_N={draw:function(e,t){var n=Math.sqrt(t/tT);e.moveTo(n,0),e.arc(0,0,n,0,rT)}},wN=(Math.sqrt(1/3),Math.sin(tT/10)/Math.sin(7*tT/10));Math.sin(rT/10),Math.cos(rT/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);function kN(e,t){return null!=e?e:t}var ON=function(e){return e.x||0},SN=function(e){return e.y||0},jN=function(e){return!(!1===e.defined)},EN=function(){var e=lN,t=fN,n=cN(0),r=null,a=dN,i=hN,o=pN,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=a.apply(this,arguments)-nT,h=i.apply(this,arguments)-nT,p=XA(h-d),v=h>d;if(u||(u=s=QT()),f<l&&(c=f,f=l,l=c),f>eT)if(p>rT-eT)u.moveTo(f*KA(d),f*JA(d)),u.arc(0,0,f,d,h,!v),l>eT&&(u.moveTo(l*KA(h),l*JA(h)),u.arc(0,0,l,h,d,v));else{var m,g,b=d,y=h,x=d,_=h,w=p,k=p,O=o.apply(this,arguments)/2,S=O>eT&&(r?+r.apply(this,arguments):QA(l*l+f*f)),j=ZA(XA(f-l)/2,+n.apply(this,arguments)),E=j,C=j;if(S>eT){var A=iT(S/l*JA(O)),T=iT(S/f*JA(O));(w-=2*A)>eT?(x+=A*=v?1:-1,_-=A):(w=0,x=_=(d+h)/2),(k-=2*T)>eT?(b+=T*=v?1:-1,y-=T):(k=0,b=y=(d+h)/2)}var N=f*KA(b),M=f*JA(b),D=l*KA(_),I=l*JA(_);if(j>eT){var F,R=f*KA(y),P=f*JA(y),L=l*KA(x),B=l*JA(x);if(p<tT&&(F=vN(N,M,L,B,R,P,D,I))){var z=N-F[0],U=M-F[1],W=R-F[0],V=P-F[1],G=1/JA(aT((z*W+U*V)/(QA(z*z+U*U)*QA(W*W+V*V)))/2),q=QA(F[0]*F[0]+F[1]*F[1]);E=ZA(j,(l-q)/(G-1)),C=ZA(j,(f-q)/(G+1))}}k>eT?C>eT?(m=mN(L,B,N,M,f,C,v),g=mN(R,P,D,I,f,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<j?u.arc(m.cx,m.cy,C,YA(m.y01,m.x01),YA(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,C,YA(m.y01,m.x01),YA(m.y11,m.x11),!v),u.arc(0,0,f,YA(m.cy+m.y11,m.cx+m.x11),YA(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,C,YA(g.y11,g.x11),YA(g.y01,g.x01),!v))):(u.moveTo(N,M),u.arc(0,0,f,b,y,!v)):u.moveTo(N,M),l>eT&&w>eT?E>eT?(m=mN(D,I,R,P,l,-E,v),g=mN(N,M,L,B,l,-E,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),E<j?u.arc(m.cx,m.cy,E,YA(m.y01,m.x01),YA(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,E,YA(m.y01,m.x01),YA(m.y11,m.x11),!v),u.arc(0,0,l,YA(m.cy+m.y11,m.cx+m.x11),YA(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,E,YA(g.y11,g.x11),YA(g.y01,g.x01),!v))):u.arc(0,0,l,_,x,v):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-tT/2;return[KA(r)*n,JA(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:cN(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:cN(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:cN(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:cN(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:cN(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:cN(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:cN(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),CN=xN().x(ON).y1(SN).y0((function(e){return(e.y||0)+(e.height||0)})).defined(jN),AN=xN().y(SN).x1(ON).x0((function(e){return(e.x||0)+(e.width||0)})).defined(jN),TN=yN().x(ON).y(SN).defined(jN),NN=uN().x(ON).y(SN).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return kN(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return kN(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return kN(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return kN(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),MN=function(){var e=cN(_N),t=cN(64),n=null;function r(){var r;if(n||(n=r=QT()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"===typeof t?t:cN(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:cN(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return qT(e.shape||"circle")})).size((function(e){return kN(e.size,64)})),DN=sN().x(ON).y(SN).defined(jN).size((function(e){return e.size||1}));function IN(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function FN(e,t,n,r){return NN.context(e)(t,n,r)}var RN=1;function PN(){RN=1}var LN=function(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+RN++),o=a.clipping[i]||(a.clipping[i]={id:i});return Qe(r)?o.path=r(null):IN(n)?o.path=FN(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"};function BN(e){this.clear(),e&&this.union(e)}var zN=BN.prototype;function UN(e){this.mark=e,this.bounds=this.bounds||new BN}function WN(e){UN.call(this,e),this.items=this.items||[]}function VN(e){this._pending=0,this._loader=e||Object(an.e)()}zN.clone=function(){return new BN(this)},zN.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},zN.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},zN.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},zN.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},zN.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},zN.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},zN.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},zN.scale=function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},zN.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},zN.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},zN.rotatedPoints=function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},zN.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},zN.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},zN.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},zN.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},zN.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},zN.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},zN.width=function(){return this.x2-this.x1},zN.height=function(){return this.y2-this.y1},vt(WN,UN);var GN=VN.prototype;function qN(e){e._pending+=1}function HN(e){e._pending-=1}GN.pending=function(){return this._pending},GN.sanitizeURL=function(e){var t=this;return qN(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return HN(t),e})).catch((function(){return HN(t),null}))},GN.loadImage=function(e){var t=this,n=es();return qN(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=ft(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return HN(t)},a.onerror=function(){return HN(t)},a.src=r,a})).catch((function(e){return HN(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},GN.ready=function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))};var XN=function(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e};var YN,KN,$N,ZN=DT-1e-8;function JN(e){return YN=e,JN}function QN(){}function eM(e,t){YN.add(e,t)}function tM(e,t){eM(KN=e,$N=t)}function nM(e){eM(e,YN.y1)}function rM(e){eM(YN.x1,e)}function aM(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function iM(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(oM(c,e,t,n,r)),0<l&&l<1&&a(oM(l,e,t,n,r))}function oM(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}JN.beginPath=QN,JN.closePath=QN,JN.moveTo=tM,JN.lineTo=tM,JN.rect=function(e,t,n,r){eM(e+n,t+r),tM(e,t)},JN.quadraticCurveTo=function(e,t,n,r){aM(KN,e,n,nM),aM($N,t,r,rM),tM(n,r)},JN.bezierCurveTo=function(e,t,n,r,a,i){iM(KN,e,n,a,nM),iM($N,t,r,i,rM),tM(a,i)},JN.arc=function(e,t,n,r,a,i){if(KN=n*Math.cos(a)+e,$N=n*Math.sin(a)+t,Math.abs(a-r)>ZN)eM(e-n,t-n),eM(e+n,t+n);else{var o,u,s=function(r){return eM(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=DT)<0&&(r+=DT),(a%=DT)<0&&(a+=DT),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=DT,o=r-r%MT,u=0;u<4&&o>a;++u,o-=MT)s(o);else for(o=r-r%MT+MT,u=0;u<4&&o<a;++u,o+=MT)s(o)}};var uM=(uM=Qu(1,1))?uM.getContext("2d"):null,sM=new BN;function cM(e){return function(t,n){if(!uM)return!0;e(uM,t),sM.clear().union(t.bounds).intersect(n).round();for(var r=sM.x1,a=sM.y1,i=sM.x2,o=sM.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(uM.isPointInPath(s,u))return!0;return!1}}function lM(e,t){return t.contains(e.x||0,e.y||0)}function fM(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(sM.set(n,r,n+a,r+i))}function dM(e,t){var n=e.x||0,r=e.y||0;return hM(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function hM(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,h=r-t,p=a-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(i=-h,o=-(c-t)),1===s&&(i=h,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=d-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>m)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<m&&(m=u)}}return!0}var pM=function(e,t){e.globalCompositeOperation=t.blend||"source-over"},vM=function(e,t){return null==e?t:e};function mM(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}var gM=function(e,t,n){return AA(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+vM(t.x1,.5)*a,n.y1+vM(t.y1,.5)*i,Math.max(a,i)*vM(t.r1,0),n.x1+vM(t.x2,.5)*a,n.y1+vM(t.y2,.5)*i,Math.max(a,i)*vM(t.r2,.5));else{var o=vM(t.x1,0),u=vM(t.y1,0),s=vM(t.x2,1),c=vM(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=Qu(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=mM(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return mM(r,t.stops)}(e,n,t.bounds):n},bM=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=gM(e,t,t.fill),!0)},yM=[],xM=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=gM(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||yM),e.lineDashOffset=t.strokeDashOffset||0),!0))};function _M(e,t){return e.zindex-t.zindex||e.index-t.index}function wM(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(_M)}function kM(e,t){var n,r,a=e.items;if(a&&a.length){var i=wM(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function OM(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=wM(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function SM(e){return function(t,n,r){kM(n,(function(n){r&&!r.intersects(n.bounds)||jM(e,t,n,n)}))}}function jM(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(pM(t,n),n.fill&&bM(t,n,a)&&t.fill(),n.stroke&&xM(t,n,a)&&t.stroke()))}function EM(e){return e=e||ge,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,OM(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function CM(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function AM(e){return EM(CM(e))}function TM(e,t){return"translate("+e+","+t+")"}function NM(e){return"rotate("+e+")"}function MM(e){return TM(e.x||0,e.y||0)}function DM(e){return TM(e.x||0,e.y||0)+(e.angle?" "+NM(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}var IM=function(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=NT),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",DM(n)),e("d",t(null,n))},bound:function(e,n){var r=n.x||0,a=n.y||0;return t(JN(e),n),XN(e,n).translate(r,a),n.angle&&e.rotate(n.angle*NT,r,a),e},draw:SM(r),pick:AM(r),isect:n||cM(r)}},FM=IM("arc",(function(e,t){return EN.context(e)(t)}));var RM=function(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a,i=CM(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(JN(e),r),XN(e,r[0]))},draw:(a=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||jM(a,e,t.items[0],t.items)}),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null)},isect:lM,tip:n}},PM=RM("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?AN:CN).curve(ET(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function LM(e,t){e.beginPath(),IN(t)?FN(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function BM(e){var t=vM(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function zM(e,t){var n=BM(t);e("d",FN(null,t,n,n))}function UM(e,t,n,r){var a=BM(t);e.beginPath(),FN(e,t,(n||0)+a,(r||0)+a)}var WM=CM(UM),VM=CM(UM,!1);var GM={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",MM(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),XN(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;kM(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(UM(e,t,a,i),pM(e,t),t.fill&&bM(e,t,u)&&e.fill(),t.stroke&&!o&&xM(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&LM(e,t),n&&n.translate(-a,-i),kM(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(UM(e,t,a,i),pM(e,t),xM(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return OM(t,(function(c){var l,f,d,h,p,v,m,g,b;if((!(g=c.bounds)||g.contains(a,i))&&(h=c.x||0,p=c.y||0,v=h+(c.width||0),m=p+(c.height||0),!(b=c.clip)||!(a<h||a>v||i<p||i>m)))return e.save(),e.translate(h,p),h=a-h,p=i-p,b&&IN(c)&&!WM(e,c,u,s)?(e.restore(),null):(f=c.strokeForeground,(d=!1!==t.interactive)&&f&&c.stroke&&VM(e,c,u,s)?(e.restore(),c):(!(l=OM(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,h,p)?o.pick(e,n,r,h,p):null})))&&d&&(c.fill||!f&&c.stroke)&&WM(e,c,u,s)&&(l=c),e.restore(),l||null))}))},isect:fM,content:function(e,t,n){e("clip-path",t.clip?LN(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),zM(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?zM(e,t):e("d","")}},qM={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function HM(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function XM(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function YM(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function KM(e,t){return"center"===e?t/2:"right"===e?t:0}function $M(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var ZM={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=HM(t,n),a=XM(t,r),i=YM(t,r),o=(t.x||0)-KM(t.align,a),u=(t.y||0)-$M(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",qM["xmlns:xlink"],"xlink:href"),e("transform",TM(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=XM(t,n),a=YM(t,n),i=(t.x||0)-KM(t.align,r),o=(t.y||0)-$M(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;kM(t,(function(t){if(!n||n.intersects(t.bounds)){var a,i,o,u,s=HM(t,r),c=XM(t,s),l=YM(t,s),f=(t.x||0)-KM(t.align,c),d=(t.y||0)-$M(t.baseline,l);!1!==t.aspect&&(i=s.width/s.height,o=t.width/t.height,i===i&&o===o&&i!==o&&(o<i?(d+=(l-(u=c/i))/2,l=u):(f+=(c-(u=l*i))/2,c=u))),(s.complete||s.toDataURL)&&(pM(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(s,f,d,c,l))}}))},pick:EM(),isect:ge,get:HM,xOffset:KM,yOffset:$M},JM=RM("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return TN.curve(ET(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function QM(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*NT,s=t.pathCache;s&&s.path===n||((t.pathCache=s=TT(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),UT(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):UT(e,s,r,a,i,o)}var eD={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",DM(t)),e("d",t.path)},bound:function(e,t){return QM(JN(e),t)?e.set(0,0,0,0):XN(e,t,!0),t.angle&&e.rotate(t.angle*NT,t.x||0,t.y||0),e},draw:SM(QM),pick:AM(QM),isect:cM(QM)};function tD(e,t){e.beginPath(),FN(e,t)}var nD={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",FN(null,t))},bound:function(e,t){var n,r;return XN(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:SM(tD),pick:AM(tD),isect:fM};function rD(e,t,n){var r,a,i,o;return!(!t.stroke||!xM(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var aD={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",MM(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return XN(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){kM(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&rD(e,t,r)&&(pM(e,t),e.stroke())}}))},pick:EM((function(e,t,n,r){return!!e.isPointInStroke&&(rD(e,t,1)&&e.isPointInStroke(n,r))})),isect:dM},iD=IM("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),oD=IM("symbol",(function(e,t){return MN.context(e)(t)}),lM),uD=Ot(),sD={height:pD,measureWidth:dD,estimateWidth:lD,width:lD,canvas:cD};function cD(e){sD.width=e&&uM?dD:lD}function lD(e,t){return fD(bD(e,t),pD(e))}function fD(e,t){return~~(.8*e.length*t)}function dD(e,t){return pD(e)<=0||!(t=bD(e,t))?0:hD(t,xD(e))}function hD(e,t){var n="(".concat(t,") ").concat(e),r=uD.get(n);return void 0===r&&(uM.font=t,r=uM.measureText(e).width,uD.set(n,r)),r}function pD(e){return null!=e.fontSize?+e.fontSize||0:11}function vD(e){return null!=e.lineHeight?e.lineHeight:pD(e)+2}function mD(e){return t=e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text,je(t)?t.length>1?t:t[0]:t;var t}function gD(e){var t=mD(e);return(je(t)?t.length-1:0)*vD(e)}function bD(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(sD.width===dD){var t=xD(e);return function(e){return hD(e,t)}}var n=pD(e);return function(e){return fD(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function yD(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xD(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pD(e)+"px "+yD(e,t)}function _D(e){var t=e.baseline,n=pD(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*vD(e):"line-bottom"===t?.29*n-.5*vD(e):0)}cD(!0);var wD={left:"start",center:"middle",right:"end"},kD=new BN;function OD(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-MT,n+=a*Math.cos(t),r+=a*Math.sin(t)),kD.x1=n,kD.y1=r,kD}function SD(e,t,n){var r,a=sD.height(t),i=t.align,o=OD(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+_D(t)-Math.round(.8*a),f=mD(t);if(je(f)?(a+=vD(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,sD.width(t,n))}),0)):r=sD.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*NT,u,s);else if(2===n)return e.rotatedPoints(t.angle*NT,u,s);return e}var jD={arc:FM,area:PM,group:GM,image:ZM,line:JM,path:eD,rect:nD,rule:aD,shape:iD,symbol:oD,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+_D(t),i=OD(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",wD[t.align]||"start"),s?(n=TM(o,u)+" "+NM(s),(r||a)&&(n+=" "+TM(r,a))):n=TM(o+r,u+a),e("transform",n)},bound:SD,draw:function(e,t,n){kM(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=xD(t),e.textAlign=t.align||"left",a=(r=OD(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*NT),a=i=0),a+=t.dx||0,i+=(t.dy||0)+_D(t),s=mD(t),pM(e,t),je(s))for(u=vD(t),o=0;o<s.length;++o)c=bD(t,s[o]),t.fill&&bM(e,t,l)&&e.fillText(c,a,i),t.stroke&&xM(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=bD(t,s),t.fill&&bM(e,t,l)&&e.fillText(c,a,i),t.stroke&&xM(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:EM((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=OD(t),u=o.x1,s=o.y1,c=SD(kD,t,1),l=-t.angle*NT,f=Math.cos(l),d=Math.sin(l),h=f*a-d*i+(u-f*u+d*s),p=d*a+f*i+(s-d*u-f*s);return c.contains(h,p)})),isect:function(e,t){var n=SD(kD,e,2);return hM(t,n[0],n[1],n[2],n[3])||hM(t,n[0],n[1],n[4],n[5])||hM(t,n[4],n[5],n[6],n[7])||hM(t,n[2],n[3],n[6],n[7])}},trail:RM("trail",(function(e,t){return DN.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null}))},ED=function(e,t,n){var r=jD[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new BN),e,n)},CD={mark:null},AD=function(e,t,n){var r,a,i,o,u=jD[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?i=c[0]:(CD.mark=e,i=CD),o=ED(i,s,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new BN,l)for(r=0,a=c.length;r<a;++r)t.union(ED(c[r],s,n));return e.bounds=t},TD=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ND(e,t){return JSON.stringify(e,TD,t)}function MD(e){return DD("string"===typeof e?JSON.parse(e):e)}function DD(e){var t,n,r,a=e.marktype,i=e.items;if(i)for(n=0,r=i.length;n<r;++n)t=a?"mark":"group",i[n][t]=e,i[n].zindex&&(i[n][t].zdirty=!0),"group"===(a||t)&&DD(i[n]);return a&&AD(e),e}function ID(e){arguments.length?this.root=MD(e):(this.root=RD({marktype:"group",name:"root",role:"frame"}),this.root.items=[new WN(this.root)])}var FD=ID.prototype;function RD(e,t){var n={bounds:new BN,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function PD(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function LD(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function BD(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=PD(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function zD(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function UD(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}FD.toJSON=function(e){return ND(this.root,e||0)},FD.mark=function(e,t,n){var r=RD(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var WD=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function VD(e,t){this._active=null,this._handlers={},this._loader=e||Object(an.e)(),this._tooltip=t||GD}function GD(e,t,n,r){e.element().setAttribute("title",r||"")}var qD=VD.prototype;function HD(e){this._el=null,this._bgcolor=null,this._loader=new VN(e)}qD.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},qD.element=function(){return this._el},qD.canvas=function(){return this._el&&this._el.firstChild},qD.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},qD.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},qD.on=function(){},qD.off=function(){},qD._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},qD.handlers=function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,t[this.eventName(e)]);else for(var r in t)n.push.apply(n,t[r]);return n},qD.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},qD.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=PD(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},qD.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=jD[o.marktype]).tip){for((i=WD(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},qD.getItemBoundingClientRect=function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}};var XD=HD.prototype;XD.initialize=function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},XD.element=function(){return this._el},XD.canvas=function(){return this._el&&this._el.firstChild},XD.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},XD.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},XD.dirty=function(){},XD.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},XD._render=function(){},XD.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},XD._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},XD.sanitizeURL=function(e){return this._load("sanitizeURL",e)},XD.loadImage=function(e){return this._load("loadImage",e)};var YD="dragenter",KD="dragleave",$D="dragover",ZD="mousedown",JD="mousemove",QD="mouseout",eI="mouseover",tI="click",nI="mousewheel",rI="touchstart",aI="touchmove",iI="touchend",oI=["keydown","keypress","keyup",YD,KD,$D,ZD,"mouseup",JD,QD,eI,tI,"dblclick","wheel",nI,rI,aI,iI],uI=JD,sI=QD,cI=tI;function lI(e,t){VD.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}var fI=vt(lI,VD);fI.initialize=function(e,t,n){var r=this;return this._canvas=e&&LD(e,"canvas"),[tI,ZD,JD,QD,KD].forEach((function(e){return dI(r,e)})),VD.prototype.initialize.call(this,e,t,n)};function dI(e,t){(function(e){return e===rI||e===aI||e===iI?[rI,aI,iI]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function hI(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function pI(e){return function(t){this.fire(e,t),this._active=null}}fI.canvas=function(){return this._canvas},fI.context=function(){return this._canvas.getContext("2d")},fI.events=oI,fI.DOMMouseScroll=function(e){this.fire(nI,e)},fI.mousemove=hI(JD,eI,QD),fI.dragover=hI($D,YD,KD),fI.mouseout=pI(QD),fI.dragleave=pI(KD),fI.mousedown=function(e){this._down=this._active,this.fire(ZD,e)},fI.click=function(e){this._down===this._active&&(this.fire(tI,e),this._down=null)},fI.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(rI,e,!0)},fI.touchmove=function(e){this.fire(aI,e,!0)},fI.touchend=function(e){this.fire(iI,e,!0),this._touch=null},fI.fire=function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===cI&&r&&r.href?this.handleHref(t,r,r.href):e!==uI&&e!==sI||this.handleTooltip(t,r,e!==sI),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},fI.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(dI(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},fI.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},fI.pickEvent=function(e){var t=WD(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},fI.pick=function(e,t,n,r,a){var i=this.context();return jD[e.marktype].pick.call(this,i,e,t,n,r,a)};var vI="undefined"!==typeof window&&window.devicePixelRatio||1;function mI(e){HD.call(this,e),this._options={},this._redraw=!1,this._dirty=new BN,this._tempb=new BN}var gI=vt(mI,HD),bI=HD.prototype;gI.initialize=function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:Qu(1,1,this._options.type),e&&this._canvas&&(zD(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),bI.initialize.call(this,e,t,n,r,a)},gI.resize=function(e,t,n,r){if(bI.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?vI:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||ce("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},gI.canvas=function(){return this._canvas},gI.context=function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},gI.dirty=function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)};function yI(e,t){VD.call(this,e,t);var n=this;n._hrefHandler=_I(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=_I(n,(function(e,t){n.handleTooltip(e,t,e.type!==sI)}))}gI._render=function(e){var t,n,r,a=this.context(),i=this._origin,o=this._width,u=this._height,s=this._dirty,c=(t=i,n=o,r=u,(new BN).set(0,0,n,r).translate(-t[0],-t[1]));a.save();var l=this._redraw||s.empty()?(this._redraw=!1,c.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(a,c.intersect(s),i);return this.clear(-i[0],-i[1],o,u),this.draw(a,e,l),a.restore(),s.clear(),this},gI.draw=function(e,t,n){var r=jD[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),Qe(n)?(e.beginPath(),n(e),e.clip()):LM(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},gI.clear=function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var xI=vt(yI,VD);xI.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(cI,this._hrefHandler),r.removeEventListener(uI,this._tooltipHandler),r.removeEventListener(sI,this._tooltipHandler)),this._svg=r=e&&LD(e,"svg"),r&&(r.addEventListener(cI,this._hrefHandler),r.addEventListener(uI,this._tooltipHandler),r.addEventListener(sI,this._tooltipHandler)),VD.prototype.initialize.call(this,e,t,n)},xI.canvas=function(){return this._svg};var _I=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};xI.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:_I(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},xI.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this};var wI="linear",kI="log",OI="pow",SI="sqrt",jI="symlog",EI="time",CI="utc",AI="sequential",TI="diverging",NI="quantile",MI="quantize",DI="threshold",II="continuous",FI="discrete",RI="discretizing",PI="interpolating",LI="temporal";function BI(e,t,n){return e.fields=t||[],e.fname=n,e}function zI(e){return 1===e.length?UI(e[0]):WI(e)}var UI=function(e){return function(t){return t[e]}},WI=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function VI(e){throw Error(e)}function GI(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||VI("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&VI("Access path missing closing bracket: "+e),o&&VI("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function qI(e,t,n){var r=GI(e);return e=1===r.length?r[0]:e,BI((n&&n.get||zI)(r),[e],t||e)}qI("id"),BI((function(e){return e}),[],"identity"),BI((function(){return 0}),[],"zero"),BI((function(){return 1}),[],"one"),BI((function(){return!0}),[],"true"),BI((function(){return!1}),[],"false");var HI=Array.isArray;function XI(e){return e[e.length-1]}function YI(e){return null==e||""===e?null:+e}function KI(e){return null!=e?HI(e)?e:[e]:[]}var $I=Object.prototype.hasOwnProperty;function ZI(e,t){return $I.call(e,t)}function JI(e){return"string"===typeof e}function QI(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[l-0],d=i[1-l],h=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s);e=(d-f)/(h||1),o&&(e=Math.floor(e)),f+=(d-f-e*(n-u))*c,t=e*(1-u),o&&(f=Math.round(f),t=Math.round(t));var p=Ba(n).map((function(t){return f+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=+e[0],c=+e[1],l=i[1]<i[0],f=l?a().reverse():a(),d=f.length-1;if(s===s&&c===c&&(c<s&&(u=s,s=c,c=u),!(c<f[0]||s>i[1-l])))return n=Math.max(0,ns(f,s)-1),o=s===c?n:ns(f,c)-1,s-f[n]>t+1e-10&&++n,l&&(u=n,n=d-o,o=d-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return QI().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function eF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return eF(t())},e}var tF=Array.prototype.map;function nF(e){return tF.call(e,YI)}var rF=Array.prototype.slice;var aF={};function iF(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(KI(n)),r}function oF(e,t,n){return arguments.length>1?(aF[e]=iF(e,t,n),this):uF(e)?aF[e]:void 0}function uF(e){return ZI(aF,e)}function sF(e,t){var n=aF[e];return n&&n.metadata[t]}function cF(e){return sF(e,FI)}function lF(e,t){for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}oF("identity",Sc),oF(wI,Oc,II),oF(kI,Ic,[II,kI]),oF(OI,Bc,II),oF(SI,zc,II),oF(jI,Gc,II),oF(EI,cl,[II,LI]),oF(CI,ml,[II,LI]),oF(AI,yl,[II,PI]),oF("".concat(AI,"-").concat(wI),yl,[II,PI]),oF("".concat(AI,"-").concat(kI),xl,[II,PI,kI]),oF("".concat(AI,"-").concat(OI),wl,[II,PI]),oF("".concat(AI,"-").concat(SI),kl,[II,PI]),oF("".concat(AI,"-").concat(jI),_l,[II,PI]),oF("".concat(TI,"-").concat(wI),jl,[II,PI]),oF("".concat(TI,"-").concat(kI),El,[II,PI,kI]),oF("".concat(TI,"-").concat(OI),Al,[II,PI]),oF("".concat(TI,"-").concat(SI),Tl,[II,PI]),oF("".concat(TI,"-").concat(jI),Cl,[II,PI]),oF(NI,Nl,[RI,NI]),oF(MI,Ml,RI),oF(DI,Dl,RI),oF("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=nF(e),r):t.slice()},r.range=function(e){return arguments.length?(n=rF.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],XI(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[FI,RI]),oF("ordinal",ss,FI),oF("band",QI,FI),oF("point",(function(){return eF(QI().paddingInner(1))}),FI);var fF=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function dF(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hF(){}var pF=.7,vF=1/pF,mF="\\s*([+-]?\\d+)\\s*",gF="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bF="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yF=/^#([0-9a-f]{3,8})$/,xF=new RegExp("^rgb\\("+[mF,mF,mF]+"\\)$"),_F=new RegExp("^rgb\\("+[bF,bF,bF]+"\\)$"),wF=new RegExp("^rgba\\("+[mF,mF,mF,gF]+"\\)$"),kF=new RegExp("^rgba\\("+[bF,bF,bF,gF]+"\\)$"),OF=new RegExp("^hsl\\("+[gF,bF,bF]+"\\)$"),SF=new RegExp("^hsla\\("+[gF,bF,bF,gF]+"\\)$"),jF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function EF(){return this.rgb().formatHex()}function CF(){return this.rgb().formatRgb()}function AF(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yF.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?TF(t):3===n?new IF(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?NF(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?NF(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xF.exec(e))?new IF(t[1],t[2],t[3],1):(t=_F.exec(e))?new IF(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=wF.exec(e))?NF(t[1],t[2],t[3],t[4]):(t=kF.exec(e))?NF(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=OF.exec(e))?LF(t[1],t[2]/100,t[3]/100,1):(t=SF.exec(e))?LF(t[1],t[2]/100,t[3]/100,t[4]):jF.hasOwnProperty(e)?TF(jF[e]):"transparent"===e?new IF(NaN,NaN,NaN,0):null}function TF(e){return new IF(e>>16&255,e>>8&255,255&e,1)}function NF(e,t,n,r){return r<=0&&(e=t=n=NaN),new IF(e,t,n,r)}function MF(e){return e instanceof hF||(e=AF(e)),e?new IF((e=e.rgb()).r,e.g,e.b,e.opacity):new IF}function DF(e,t,n,r){return 1===arguments.length?MF(e):new IF(e,t,n,null==r?1:r)}function IF(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function FF(){return"#"+PF(this.r)+PF(this.g)+PF(this.b)}function RF(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function PF(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function LF(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new UF(e,t,n,r)}function BF(e){if(e instanceof UF)return new UF(e.h,e.s,e.l,e.opacity);if(e instanceof hF||(e=AF(e)),!e)return new UF;if(e instanceof UF)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,u=i-a,s=(i+a)/2;return u?(o=t===i?(n-r)/u+6*(n<r):n===i?(r-t)/u+2:(t-n)/u+4,u/=s<.5?i+a:2-i-a,o*=60):u=s>0&&s<1?0:o,new UF(o,u,s,e.opacity)}function zF(e,t,n,r){return 1===arguments.length?BF(e):new UF(e,t,n,null==r?1:r)}function UF(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function WF(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function VF(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}fF(hF,AF,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:EF,formatHex:EF,formatHsl:function(){return BF(this).formatHsl()},formatRgb:CF,toString:CF}),fF(IF,DF,dF(hF,{brighter:function(e){return e=null==e?vF:Math.pow(vF,e),new IF(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?pF:Math.pow(pF,e),new IF(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FF,formatHex:FF,formatRgb:RF,toString:RF})),fF(UF,zF,dF(hF,{brighter:function(e){return e=null==e?vF:Math.pow(vF,e),new UF(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?pF:Math.pow(pF,e),new UF(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new IF(WF(e>=240?e-240:e+120,a,r),WF(e,a,r),WF(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var GF=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,u=r<t-1?e[r+2]:2*i-a;return VF((n-r/t)*t,o,a,i,u)}},qF=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return VF((n-r/t)*t,a,i,o,u)}},HF=function(e){return function(){return e}};function XF(e,t){return function(n){return e+n*t}}function YF(e,t){var n=t-e;return n?XF(e,n>180||n<-180?n-360*Math.round(n/360):n):HF(isNaN(e)?t:e)}function KF(e){return 1===(e=+e)?$F:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):HF(isNaN(t)?n:t)}}function $F(e,t){var n=t-e;return n?XF(e,n):HF(isNaN(e)?t:e)}var ZF=function e(t){var n=KF(t);function r(e,t){var r=n((e=DF(e)).r,(t=DF(t)).r),a=n(e.g,t.g),i=n(e.b,t.b),o=$F(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function JF(e){return function(t){var n,r,a=t.length,i=new Array(a),o=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=DF(t[n]),i[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return i=e(i),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=i(e),r.g=o(e),r.b=u(e),r+""}}}var QF=JF(GF),eR=JF(qF),tR=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}};function nR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var rR=function(e,t){return(nR(t)?tR:aR)(e,t)};function aR(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=vR(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}var iR=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},oR=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},uR=function(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=vR(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}},sR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cR=new RegExp(sR.source,"g");var lR,fR,dR,hR,pR=function(e,t){var n,r,a,i=sR.lastIndex=cR.lastIndex=0,o=-1,u=[],s=[];for(e+="",t+="";(n=sR.exec(e))&&(r=cR.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:oR(n,r)})),i=cR.lastIndex;return i<t.length&&(a=t.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)u[(n=s[r]).i]=n.x(e);return u.join("")})},vR=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?HF(t):("number"===r?oR:"string"===r?(n=AF(t))?(t=n,ZF):pR:t instanceof AF?ZF:t instanceof Date?iR:nR(t)?tR:Array.isArray(t)?aR:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?uR:oR)(e,t)},mR=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},gR=function(e,t){var n=YF(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},bR=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},yR=180/Math.PI,xR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},_R=function(e,t,n,r,a,i){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*yR,skewX:Math.atan(s)*yR,scaleX:o,scaleY:u}};function wR(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(i,o){var u=[],s=[];return i=e(i),o=e(o),function(e,r,a,i,o,u){if(e!==a||r!==i){var s=o.push("translate(",null,t,null,n);u.push({i:s-4,x:oR(e,a)},{i:s-2,x:oR(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,u,s),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:oR(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}(i.rotate,o.rotate,u,s),function(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:oR(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}(i.skewX,o.skewX,u,s),function(e,t,n,r,i,o){if(e!==n||t!==r){var u=i.push(a(i)+"scale(",null,",",null,")");o.push({i:u-4,x:oR(e,n)},{i:u-2,x:oR(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,u,s),i=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)u[(t=s[n]).i]=t.x(e);return u.join("")}}}var kR=wR((function(e){return"none"===e?xR:(lR||(lR=document.createElement("DIV"),fR=document.documentElement,dR=document.defaultView),lR.style.transform=e,e=dR.getComputedStyle(fR.appendChild(lR),null).getPropertyValue("transform"),fR.removeChild(lR),e=e.slice(7,-1).split(","),_R(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),OR=wR((function(e){return null==e?xR:(hR||(hR=document.createElementNS("http://www.w3.org/2000/svg","g")),hR.setAttribute("transform",e),(e=hR.transform.baseVal.consolidate())?(e=e.matrix,_R(e.a,e.b,e.c,e.d,e.e,e.f)):xR)}),", ",")",")"),SR=Math.SQRT2;function jR(e){return((e=Math.exp(e))+1/e)/2}var ER=function(e,t){var n,r,a=e[0],i=e[1],o=e[2],u=t[0],s=t[1],c=t[2],l=u-a,f=s-i,d=l*l+f*f;if(d<1e-12)r=Math.log(c/o)/SR,n=function(e){return[a+e*l,i+e*f,o*Math.exp(SR*e*r)]};else{var h=Math.sqrt(d),p=(c*c-o*o+4*d)/(2*o*2*h),v=(c*c-o*o-4*d)/(2*c*2*h),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(v*v+1)-v);r=(g-m)/SR,n=function(e){var t,n=e*r,u=jR(m),s=o/(2*h)*(u*(t=SR*n+m,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[a+s*l,i+s*f,o*u/jR(SR*n+m)]}}return n.duration=1e3*r,n};function CR(e){return function(t,n){var r=e((t=zF(t)).h,(n=zF(n)).h),a=$F(t.s,n.s),i=$F(t.l,n.l),o=$F(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=i(e),t.opacity=o(e),t+""}}}var AR=CR(YF),TR=CR($F),NR=Math.PI/180,MR=180/Math.PI,DR=.96422,IR=.82521,FR=4/29,RR=6/29,PR=.12841854934601665;function LR(e){if(e instanceof zR)return new zR(e.l,e.a,e.b,e.opacity);if(e instanceof XR)return YR(e);e instanceof IF||(e=MF(e));var t,n,r=GR(e.r),a=GR(e.g),i=GR(e.b),o=UR((.2225045*r+.7168786*a+.0606169*i)/1);return r===a&&a===i?t=n=o:(t=UR((.4360747*r+.3850649*a+.1430804*i)/DR),n=UR((.0139322*r+.0971045*a+.7141733*i)/IR)),new zR(116*o-16,500*(t-o),200*(o-n),e.opacity)}function BR(e,t,n,r){return 1===arguments.length?LR(e):new zR(e,t,n,null==r?1:r)}function zR(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function UR(e){return e>.008856451679035631?Math.pow(e,1/3):e/PR+FR}function WR(e){return e>RR?e*e*e:PR*(e-FR)}function VR(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function GR(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function qR(e){if(e instanceof XR)return new XR(e.h,e.c,e.l,e.opacity);if(e instanceof zR||(e=LR(e)),0===e.a&&0===e.b)return new XR(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*MR;return new XR(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function HR(e,t,n,r){return 1===arguments.length?qR(e):new XR(e,t,n,null==r?1:r)}function XR(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function YR(e){if(isNaN(e.h))return new zR(e.l,0,0,e.opacity);var t=e.h*NR;return new zR(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function KR(e,t){var n=$F((e=BR(e)).l,(t=BR(t)).l),r=$F(e.a,t.a),a=$F(e.b,t.b),i=$F(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=a(t),e.opacity=i(t),e+""}}function $R(e){return function(t,n){var r=e((t=HR(t)).h,(n=HR(n)).h),a=$F(t.c,n.c),i=$F(t.l,n.l),o=$F(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=i(e),t.opacity=o(e),t+""}}}fF(zR,BR,dF(hF,{brighter:function(e){return new zR(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new zR(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new IF(VR(3.1338561*(t=DR*WR(t))-1.6168667*(e=1*WR(e))-.4906146*(n=IR*WR(n))),VR(-.9787684*t+1.9161415*e+.033454*n),VR(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),fF(XR,HR,dF(hF,{brighter:function(e){return new XR(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new XR(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return YR(this).rgb()}}));var ZR=$R(YF),JR=$R($F),QR=-.14861,eP=1.78277,tP=-.29227,nP=-.90649,rP=1.97294,aP=-1.7884503806,iP=3.5172982438,oP=-.6557636667999999;function uP(e){if(e instanceof cP)return new cP(e.h,e.s,e.l,e.opacity);e instanceof IF||(e=MF(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(oP*r+aP*t-iP*n)/-5.9615122912,i=r-a,o=(rP*(n-a)-tP*i)/nP,u=Math.sqrt(o*o+i*i)/(rP*a*(1-a)),s=u?Math.atan2(o,i)*MR-120:NaN;return new cP(s<0?s+360:s,u,a,e.opacity)}function sP(e,t,n,r){return 1===arguments.length?uP(e):new cP(e,t,n,null==r?1:r)}function cP(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function lP(e){return function t(n){function r(t,r){var a=e((t=sP(t)).h,(r=sP(r)).h),i=$F(t.s,r.s),o=$F(t.l,r.l),u=$F(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=i(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}fF(cP,sP,dF(hF,{brighter:function(e){return e=null==e?vF:Math.pow(vF,e),new cP(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?pF:Math.pow(pF,e),new cP(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*NR,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new IF(255*(t+n*(QR*r+eP*a)),255*(t+n*(tP*r+nP*a)),255*(t+n*(rP*r)),this.opacity)}}));var fP=lP(YF),dP=lP($F),hP=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};function pP(e,t){var n=t[0],r=XI(t)-n;return function(t){return e(n+t*r)}}function vP(e,t,n){return lF(gP(t||"rgb",n),e)}function mP(e,t){for(var n=new Array(t),r=t+1,a=0;a<t;)n[a]=e(++a/r);return n}function gP(e,t){var n=m[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function bP(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function yP(e,t){for(var n in e)_P(n,t(e[n]))}var xP={};function _P(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(xP[e]=t,this):xP[e]}yP({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},bP),yP({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return vP(bP(e))}));var wP,kP,OP=function(e){return HI(e)?e.map((function(e){return String(e)})):String(e)},SP=function(e,t){return e[1]-t[1]},jP=function(e,t){return t[1]-e[1]};function EP(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=XI(r),o=SP;if(a>i&&(r=i,i=a,a=r,o=jP),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],XI(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function CP(e,t,n,r,a,i){var o=t.type,u=OP;if(o===EI||a===EI)u=e.timeFormat(r);else if(o===CI||a===CI)u=e.utcFormat(r);else if(sF(o,kI)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=AP(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function AP(e,t,n){var r=EP(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var TP=(wP={},Object(go.a)(wP,NI,"quantiles"),Object(go.a)(wP,MI,"thresholds"),Object(go.a)(wP,DI,"domain"),wP),NP=(kP={},Object(go.a)(kP,NI,"quantiles"),Object(go.a)(kP,MI,"domain"),kP);function MP(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=XI(e),t}(e.bins):e.type===kI?AP(e,t,!0):TP[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[TP[e.type]]()):EP(e,t)}function DP(e,t,n,r,a,i,o){var u=NP[t.type]&&i!==EI&&i!==CI?function(e,t,n){var r,a=t[NP[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):CP(e,t,n,a,i,o);return"symbol"===r&&function(e){return TP[e.type]||e.bins}(t)?IP(u):"discrete"===r?RP(u):PP(u)}var IP=function(e){return function(t,n,r){var a=FP(r[n+1],FP(r.max,1/0)),i=LP(t,e),o=LP(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},FP=function(e,t){return null!=e?e:t},RP=function(e){return function(t,n){return n?e(t):null}},PP=function(e){return function(t){return e(t)}},LP=function(e,t){return Number.isFinite(e)?t(e):null};function BP(e,t,n,r){var a=r||t.type;return JI(n)&&sF(a,LI)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==EI?n||a!==CI?DP(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function zP(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=BP(e,t,n.format,n.formatType);if(sF(t.type,RI)){var i=MP(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(cF(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(XI(l)))}var UP="aria-hidden",WP="aria-label",VP="role",GP="aria-roledescription",qP="graphics-object",HP="graphics-symbol",XP=function(e,t,n){var r;return r={},Object(go.a)(r,VP,e),Object(go.a)(r,GP,t),Object(go.a)(r,WP,n||void 0),r},YP=It(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),KP={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?eL(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(cF(u)?"discrete":u," scale")+" with ".concat(zP(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?eL(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Me(e)}(i))+" with ".concat(zP(s,u,e));var c}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(QP(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(QP(e),"'")}}},$P={ariaRole:VP,ariaRoleDescription:GP,description:WP};function ZP(e,t){var n=!1===t.aria;if(e(UP,n||void 0),n||null==t.description)for(var r in $P)e($P[r],void 0);else{var a=t.mark.marktype;e(WP,t.description),e(VP,t.ariaRole||("group"===a?qP:HP)),e(GP,t.ariaRoleDescription||"".concat(a," mark"))}}function JP(e){return!1===e.aria?Object(go.a)({},UP,!0):YP[e.role]?null:KP[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return XP(t.role||HP,t.desc,n.description||r(n))}catch(a){return null}}(e,KP[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return XP(n?qP:HP,"".concat(t," mark container"),e.description)}(e)}function QP(e){return Ze(e.text).join(" ")}function eL(e){try{return Ze(Me(e.items).items[0].text).join(" ")}catch(t){return null}}var tL=function(e){return(e+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")};function nL(e,t,n){var r,a,i="<"+e;if(t)for(r in t)null!=(a=t[r])&&(i+=" "+r+'="'+tL(a)+'"');return n&&(i+=" "+n),i+">"}function rL(e){return"</"+e+">"}var aL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},iL={fill:"none","stroke-miterlimit":10},oL=qM.xmlns;function uL(e){HD.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var sL=vt(uL,HD),cL=HD.prototype;function lL(e,t,n){var r,a,i;if("radial"===t.gradient){var o=BD(e,n++,"pattern",oL);o.setAttribute("id",CA+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=BD(o,0,"rect",oL)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+xL()+"#"+t.id+")"),(e=BD(e,n++,"radialGradient",oL)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=BD(e,n++,"linearGradient",oL)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,a=t.stops.length;r<a;++r)(i=BD(e,r,"stop",oL)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return zD(e,r),n}function fL(e,t,n){var r;return(e=BD(e,n,"clipPath",oL)).setAttribute("id",t.id),t.path?(r=BD(e,0,"path",oL)).setAttribute("d",t.path):((r=BD(e,0,"rect",oL)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),zD(e,1),n+1}function dL(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function hL(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=PD(i=t.ownerDocument,r,oL),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=PD(i,"path",oL);o.appendChild(u),u.__data__=e;var s=PD(i,"g",oL);o.appendChild(s),s.__data__=e;var c=PD(i,"path",oL);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}sL.initialize=function(e,t,n,r){if(this._defs={gradient:{},clipping:{}},e){for(var a in this._svg=BD(e,0,"svg",oL),this._svg.setAttribute("class","marks"),zD(e,1),this._root=BD(this._svg,0,"g",oL),iL)this._root.setAttribute(a,iL[a]);zD(this._svg,1)}return this.background(this._bgcolor),cL.initialize.call(this,e,t,n,r)},sL.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),cL.background.apply(this,arguments)},sL.resize=function(e,t,n,r){return cL.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},sL.canvas=function(){return this._svg},sL.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in qM)e[t]=qM[t];var n=this._bgcolor?nL("rect",{width:this._width,height:this._height,fill:this._bgcolor})+rL("rect"):"";return nL("svg",e)+(this._defs.el?this._defs.el.outerHTML:"")+n+this._root.outerHTML+rL("svg")},sL._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),zD(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},sL.updateDefs=function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=BD(e,0,"defs",oL)),r=lL(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=BD(e,0,"defs",oL)),r=fL(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):zD(n,r))},sL._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},sL.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},sL.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},sL._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=jD[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,dL(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,dL(t,s)),t._update=s));return!this._dirtyAll},sL.draw=function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a,i=this._svg,o=jD[t.marktype],u=!1===t.interactive?"none":null,s="g"===o.tag,c=null,l=0;(a=hL(t,e,n,"g",i)).setAttribute("class",UD(t));var f=JP(t);for(var d in f)yL(a,d,f[d]);s||yL(a,"pointer-events",u),yL(a,"clip-path",t.clip?LN(this,t,t.group):null);var h=function(e){var t=r.isDirty(e),n=hL(e,a,c,o.tag,i);t&&(r._update(o,n,e),s&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;kM(n,(function(n){r=e.draw(t,n,r),++a})),zD(t,1+a)}(r,n,e)),c=n,++l};return o.nested?t.items.length&&h(t.items[0]):kM(t,h),zD(a,l),a};var pL=null,vL=null,mL={group:function(e,t,n){var r=pL=t.childNodes[2];vL=r.__values__,e.foreground(bL,n,this),vL=t.__values__,pL=t.childNodes[1],e.content(bL,n,this);var a=pL=t.childNodes[0];e.background(bL,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==vL.events&&(yL(r,"pointer-events",i),yL(a,"pointer-events",i),vL.events=i),n.strokeForeground&&n.stroke){var o=n.fill;yL(r,"display",null),this.style(a,n),yL(a,"stroke",null),o&&(n.fill=null),vL=r.__values__,this.style(r,n),o&&(n.fill=o),pL=null}else yL(r,"display","none")},image:function(e,t,n){!1===n.smooth?(gL(t,"image-rendering","optimizeSpeed"),gL(t,"image-rendering","pixelated")):gL(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=mD(n);je(u)?(r=(a=u.map((function(e){return bD(n,e)}))).join("\n"))!==vL.text&&(zD(t,0),i=t.ownerDocument,o=vD(n),a.forEach((function(e,r){var a=PD(i,"tspan",oL);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),vL.text=r):(a=bD(n,u))!==vL.text&&(t.textContent=a,vL.text=a),yL(t,"font-family",yD(n)),yL(t,"font-size",pD(n)+"px"),yL(t,"font-style",n.fontStyle),yL(t,"font-variant",n.fontVariant),yL(t,"font-weight",n.fontWeight)}};function gL(e,t,n){n!==vL[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),vL[t]=n)}function bL(e,t,n){t!==vL[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(pL,e,t,n):yL(pL,e,t),vL[e]=t)}function yL(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function xL(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function _L(e){HD.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}sL._update=function(e,t,n){pL=t,vL=t.__values__,ZP(bL,n),e.attr(bL,n,this);var r=mL[e.type];r&&r.call(this,e,t,n),pL&&this.style(pL,n)},sL.style=function(e,t){if(null!=t)for(var n in aL){var r="font"===n?yD(t):t[n];if(r!==vL[n]){var a=aL[n];null==r?e.removeAttribute(a):(AA(r)&&(r=TA(r,this._defs.gradient,xL())),e.setAttribute(a,r+"")),vL[n]=r}}};var wL=vt(_L,HD),kL=HD.prototype;function OL(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}wL.resize=function(e,t,n,r){kL.resize.call(this,e,t,n,r);var a=this._origin,i=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var u in qM)o[u]=qM[u];i.head=nL("svg",o);var s=this._bgcolor;return"transparent"!==s&&"none"!==s||(s=null),i.bg=s?nL("rect",{width:this._width,height:this._height,fill:s})+rL("rect"):"",i.root=nL("g",ut({},iL,{transform:"translate("+a+")"})),i.foot=rL("g")+rL("svg"),this},wL.background=function(){var e=kL.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},wL.svg=function(){var e=this._text;return e.head+e.defs+e.bg+e.root+e.body+e.foot},wL._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},wL.buildDefs=function(){var e,t="";for(var n in this._defs.gradient){var r=this._defs.gradient[n],a=r.stops;"radial"===r.gradient?(t+=nL(e="pattern",{id:CA+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t+=nL("rect",{width:"1",height:"1",fill:"url(#"+n+")"})+rL("rect"),t+=rL(e),t+=nL(e="radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):t+=nL(e="linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(var i=0;i<a.length;++i)t+=nL("stop",{offset:a[i].offset,"stop-color":a[i].color})+rL("stop");t+=rL(e)}for(var o in this._defs.clipping){var u=this._defs.clipping[o];t+=nL("clipPath",{id:o}),u.path?t+=nL("path",{d:u.path})+rL("path"):t+=nL("rect",{x:0,y:0,width:u.width,height:u.height})+rL("rect"),t+=rL("clipPath")}return t?nL("defs")+t+rL("defs"):""},wL.attr=function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=yD(t),e["font-size"]=pD(t)+"px",t.fontStyle&&(e["font-style"]=t.fontStyle),t.fontVariant&&(e["font-variant"]=t.fontVariant),t.fontWeight&&(e["font-weight"]=t.fontWeight));for(var i in aL){var o=t[i],u=aL[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(AA(o)&&(o=TA(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},wL.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},wL.mark=function(e){var t=this,n=jD[e.marktype],r=n.tag,a=[ZP,n.attr],i="";i+=nL("g",ut({class:UD(e),"clip-path":e.clip?LN(this,e,e.group):null},JP(e),{"pointer-events":"g"!==r&&!1===e.interactive?"none":null}));var o=function(o){var u=t.href(o);if(u&&(i+=nL("a",u)),i+=nL(r,t.attr(e,o,a,"g"!==r?r:null)),"text"===r){var s=mD(o);if(je(s))for(var c={x:0,dy:vD(o)},l=0;l<s.length;++l)i+=nL("tspan",l?c:null)+OL(bD(o,s[l]))+rL("tspan");else i+=OL(bD(o,s))}else if("g"===r){var f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),i+=nL("path",t.attr(e,o,n.background,"bgrect"))+rL("path"),i+=nL("g",t.attr(e,o,n.content))+t.markGroup(o)+rL("g"),f&&h?(d&&(o.fill=null),o.stroke=h,i+=nL("path",t.attr(e,o,n.foreground,"bgrect"))+rL("path"),d&&(o.fill=d)):i+=nL("path",t.attr(e,o,n.foreground,"bgfore"))+rL("path")}i+=rL(r),u&&(i+=rL("a"))};return n.nested?e.items&&e.items.length&&o(e.items[0]):kM(e,o),i+rL("g")},wL.markGroup=function(e){var t=this,n="";return kM(e,(function(e){n+=t.mark(e)})),n};var SL="canvas",jL="none",EL={Canvas:SL,PNG:"png",SVG:"svg",None:jL},CL={};function AL(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(CL[e]=t,this):CL[e]}function TL(e,t,n){var r=[],a=(new BN).union(t),i=e.marktype;return i?NL(e,a,n,r):"group"===i?ML(e,a,n,r):ce("Intersect scene must be mark node or group item.")}function NL(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)ML(a[u],t,n,r);else for(var s=jD[i].isect;u<o;++u){var c=a[u];DL(c,t,s)&&r.push(c)}}return r}function ML(e,t,n,r){n&&n(e.mark)&&DL(e,t,jD.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)NL(a[s],t,n,r);t.translate(o,u)}return r}function DL(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}CL.canvas=CL.png={renderer:mI,headless:mI,handler:lI},CL.svg={renderer:uL,headless:_L,handler:yI},CL.none={};var IL=new BN,FL=function(e){var t=e.clip;if(Qe(t))t(JN(IL.clear()));else{if(!t)return;IL.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(IL)};function RL(e,t,n){return e===t||("path"===n?PL(e,t):e instanceof Date&&t instanceof Date?+e===+t:yt(e)&&yt(t)?Math.abs(e-t)<=1e-9:e&&t&&(Ee(e)||Ee(t))?null!=e&&null!=t&&function(e,t){var n,r,a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(a.sort(),i.sort(),r=a.length-1;r>=0;r--)if(a[r]!=i[r])return!1;for(r=a.length-1;r>=0;r--)if(!RL(e[n=a[r]],t[n],n))return!1;return typeof e===typeof t}(e,t):e==t)}function PL(e,t){return RL(TT(e),TT(t))}function LL(){PN(),EA=0}function BL(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function zL(e,t,n){return e.fields=t||[],e.fname=n,e}function UL(e){return 1===e.length?WL(e[0]):VL(e)}var WL=function(e){return function(t){return t[e]}},VL=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function GL(e){throw Error(e)}function qL(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||GL("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&GL("Access path missing closing bracket: "+e),o&&GL("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function HL(e,t,n){var r=qL(e);return e=1===r.length?r[0]:e,zL((n&&n.get||UL)(r),[e],t||e)}HL("id"),zL((function(e){return e}),[],"identity"),zL((function(){return 0}),[],"zero"),zL((function(){return 1}),[],"one");var XL=zL((function(){return!0}),[],"true");zL((function(){return!1}),[],"false");var YL=Array.isArray;function KL(e){return e===Object(e)}function $L(e){return e[e.length-1]}function ZL(e){return null==e||""===e?null:+e}function JL(e){return null!=e?YL(e)?e:[e]:[]}function QL(e){return"function"===typeof e}function eB(e){return QL(e)?e:function(){return e}}function tB(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var nB=Object.prototype.hasOwnProperty;function rB(e,t){return nB.call(e,t)}function aB(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,tB(r,n)}function iB(e){return"[object Date]"===Object.prototype.toString.call(e)}function oB(e){return"string"===typeof e}function uB(e){return YL(e)?"["+e.map(uB)+"]":KL(e)||oB(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function sB(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}var cB="default";function lB(e,t){var n=e.globalCursor()?"undefined"!==typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function fB(e,t){var n=e._runtime.data;return rB(n,t)||GL("Unrecognized data set: "+t),n[t]}function dB(e,t){xn(t)||GL("Second argument to changes must be a changeset.");var n=fB(this,e);return n.modified=!0,this.pulse(n.input,t)}function hB(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function pB(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function vB(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function mB(e){var t=vB(e),n=hB(e),r=pB(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(a){e.error(a)}}))}function gB(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function bB(e){this._context=e}bB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gB(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var yB=function(){};function xB(e){this._context=e}xB.prototype={areaStart:yB,areaEnd:yB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _B(e){this._context=e}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wB(e,t){this._basis=new bB(e),this._beta=t}wB.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var kB=function e(t){function n(e){return 1===t?new bB(e):new wB(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function OB(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function SB(e,t){this._context=e,this._k=(1-t)/6}SB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:OB(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:OB(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var jB=function e(t){function n(e){return new SB(e,t)}return n.tension=function(t){return e(+t)},n}(0);function EB(e,t){this._context=e,this._k=(1-t)/6}EB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:OB(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var CB=function e(t){function n(e){return new EB(e,t)}return n.tension=function(t){return e(+t)},n}(0);function AB(e,t){this._context=e,this._k=(1-t)/6}AB.prototype={areaStart:yB,areaEnd:yB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:OB(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var TB=function e(t){function n(e){return new AB(e,t)}return n.tension=function(t){return e(+t)},n}(0),NB=Math.abs,MB=Math.atan2,DB=Math.cos,IB=Math.max,FB=Math.min,RB=Math.sin,PB=Math.sqrt,LB=1e-12,BB=Math.PI,zB=BB/2,UB=2*BB;function WB(e){return e>1?0:e<-1?BB:Math.acos(e)}function VB(e){return e>=1?zB:e<=-1?-zB:Math.asin(e)}function GB(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>LB){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>LB){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function qB(e,t){this._context=e,this._alpha=t}qB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:GB(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var HB=function e(t){function n(e){return t?new qB(e,t):new SB(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function XB(e,t){this._context=e,this._alpha=t}XB.prototype={areaStart:yB,areaEnd:yB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:GB(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var YB=function e(t){function n(e){return t?new XB(e,t):new AB(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function KB(e,t){this._context=e,this._alpha=t}KB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:GB(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $B=function e(t){function n(e){return t?new KB(e,t):new EB(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ZB(e){this._context=e}ZB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var JB=function(e){return new ZB(e)};function QB(e){this._context=e}QB.prototype={areaStart:yB,areaEnd:yB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ez(e){return e<0?-1:1}function tz(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(ez(i)+ez(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function nz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function rz(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function az(e){this._context=e}function iz(e){this._context=new oz(e)}function oz(e){this._context=e}function uz(e){this._context=e}function sz(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rz(this,this._t0,nz(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,rz(this,nz(this,n=tz(this,e,t)),n);break;default:rz(this,this._t0,n=tz(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(iz.prototype=Object.create(az.prototype)).point=function(e,t){az.prototype.point.call(this,t,e)},oz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},uz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=sz(e),a=sz(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cz(e,t){this._context=e,this._t=t}cz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var lz=Math.PI,fz=2*lz,dz=1e-6,hz=fz-dz;function pz(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vz(){return new pz}pz.prototype=vz.prototype={constructor:pz,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>dz)if(Math.abs(l*u-s*c)>dz&&a){var d=n-i,h=r-o,p=u*u+s*s,v=d*d+h*h,m=Math.sqrt(p),g=Math.sqrt(f),b=a*Math.tan((lz-Math.acos((p+f-v)/(2*m*g)))/2),y=b/g,x=b/m;Math.abs(y-1)>dz&&(this._+="L"+(e+y*c)+","+(t+y*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>c*h)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>dz||Math.abs(this._y1-c)>dz)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%fz+fz),f>hz?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>dz&&(this._+="A"+n+","+n+",0,"+ +(f>=lz)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var mz=vz,gz=function(e){return function(){return e}};function bz(e){return e.innerRadius}function yz(e){return e.outerRadius}function xz(e){return e.startAngle}function _z(e){return e.endAngle}function wz(e){return e&&e.padAngle}function kz(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,d=f*s-l*c;if(!(d*d<LB))return[e+(d=(l*(t-i)-f*(e-a))/d)*s,t+d*c]}function Oz(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/PB(u*u+s*s),l=c*s,f=-c*u,d=e+l,h=t+f,p=n+l,v=r+f,m=(d+p)/2,g=(h+v)/2,b=p-d,y=v-h,x=b*b+y*y,_=a-i,w=d*v-p*h,k=(y<0?-1:1)*PB(IB(0,_*_*x-w*w)),O=(w*y-b*k)/x,S=(-w*b-y*k)/x,j=(w*y+b*k)/x,E=(-w*b+y*k)/x,C=O-m,A=S-g,T=j-m,N=E-g;return C*C+A*A>T*T+N*N&&(O=j,S=E),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(a/_-1),y11:S*(a/_-1)}}Array.prototype.slice;var Sz=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)};function jz(e){return e[0]}function Ez(e){return e[1]}var Cz,Az,Tz=function(e,t){var n=gz(!0),r=null,a=JB,i=null;function o(o){var u,s,c,l=(o=Sz(o)).length,f=!1;for(null==r&&(i=a(c=mz())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?jz:gz(e),t="function"===typeof t?t:void 0===t?Ez:gz(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:gz(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:gz(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:gz(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},Nz=function(e,t,n){var r=null,a=gz(!0),i=null,o=JB,u=null;function s(s){var c,l,f,d,h,p=(s=Sz(s)).length,v=!1,m=new Array(p),g=new Array(p);for(null==i&&(u=o(h=mz())),c=0;c<=p;++c){if(!(c<p&&a(d=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(m[f],g[f]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+e(d,c,s),g[c]=+t(d,c,s),u.point(r?+r(d,c,s):m[c],n?+n(d,c,s):g[c]))}if(h)return u=null,h+""||null}function c(){return Tz().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?jz:gz(+e),t="function"===typeof t?t:gz(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?Ez:gz(+n),s.x=function(t){return arguments.length?(e="function"===typeof t?t:gz(+t),r=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:gz(+t),s):e},s.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:gz(+e),s):r},s.y=function(e){return arguments.length?(t="function"===typeof e?e:gz(+e),n=null,s):t},s.y0=function(e){return arguments.length?(t="function"===typeof e?e:gz(+e),s):t},s.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:gz(+e),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:gz(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s},Mz={draw:function(e,t){var n=Math.sqrt(t/BB);e.moveTo(n,0),e.arc(0,0,n,0,UB)}},Dz=(Math.sqrt(1/3),Math.sin(BB/10)/Math.sin(7*BB/10));Math.sin(UB/10),Math.cos(UB/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);var Iz="linear",Fz="log",Rz="pow",Pz="sqrt",Lz="symlog",Bz="time",zz="utc",Uz="sequential",Wz="diverging",Vz="quantile",Gz="quantize",qz="threshold",Hz="continuous",Xz="discrete",Yz="discretizing",Kz="interpolating",$z="temporal";function Zz(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return Zz().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function Jz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Jz(t())},e}var Qz=Array.prototype.map;function eU(e){return Qz.call(e,ZL)}var tU=Array.prototype.slice;var nU={};function rU(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=sB(JL(n)),r}function aU(e,t,n){return arguments.length>1?(nU[e]=rU(e,t,n),this):iU(e)?nU[e]:void 0}function iU(e){return rB(nU,e)}function oU(e,t){var n=nU[e];return n&&n.metadata[t]}function uU(e){return oU(e,Xz)}aU("identity",Sc),aU(Iz,Oc,Hz),aU(Fz,Ic,[Hz,Fz]),aU(Rz,Bc,Hz),aU(Pz,zc,Hz),aU(Lz,Gc,Hz),aU(Bz,cl,[Hz,$z]),aU(zz,ml,[Hz,$z]),aU(Uz,yl,[Hz,Kz]),aU("".concat(Uz,"-").concat(Iz),yl,[Hz,Kz]),aU("".concat(Uz,"-").concat(Fz),xl,[Hz,Kz,Fz]),aU("".concat(Uz,"-").concat(Rz),wl,[Hz,Kz]),aU("".concat(Uz,"-").concat(Pz),kl,[Hz,Kz]),aU("".concat(Uz,"-").concat(Lz),_l,[Hz,Kz]),aU("".concat(Wz,"-").concat(Iz),jl,[Hz,Kz]),aU("".concat(Wz,"-").concat(Fz),El,[Hz,Kz,Fz]),aU("".concat(Wz,"-").concat(Rz),Al,[Hz,Kz]),aU("".concat(Wz,"-").concat(Pz),Tl,[Hz,Kz]),aU("".concat(Wz,"-").concat(Lz),Cl,[Hz,Kz]),aU(Vz,Nl,[Yz,Vz]),aU(Gz,Ml,Yz),aU(qz,Dl,Yz),aU("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=eU(e),r):t.slice()},r.range=function(e){return arguments.length?(n=tU.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],$L(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[Xz,Yz]),aU("ordinal",ss,Xz),aU("band",Zz,Xz),aU("point",(function(){return Jz(Zz().paddingInner(1))}),Xz);function sU(e,t,n){return Ol(function(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function cU(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function lU(e,t){for(var n in e)dU(n,t(e[n]))}var fU={};function dU(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(fU[e]=t,this):fU[e]}lU({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},cU),lU({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return sU(cU(e))}));var hU=function(e){return YL(e)?e.map((function(e){return String(e)})):String(e)},pU=function(e,t){return e[1]-t[1]},vU=function(e,t){return t[1]-e[1]};function mU(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=$L(r),o=pU;if(a>i&&(r=i,i=a,a=r,o=vU),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],$L(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function gU(e,t,n,r,a,i){var o=t.type,u=hU;if(o===Bz||a===Bz)u=e.timeFormat(r);else if(o===zz||a===zz)u=e.utcFormat(r);else if(oU(o,Fz)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=bU(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function bU(e,t,n){var r=mU(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var yU=(Cz={},Object(go.a)(Cz,Vz,"quantiles"),Object(go.a)(Cz,Gz,"thresholds"),Object(go.a)(Cz,qz,"domain"),Cz),xU=(Az={},Object(go.a)(Az,Vz,"quantiles"),Object(go.a)(Az,Gz,"domain"),Az);function _U(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=$L(e),t}(e.bins):e.type===Fz?bU(e,t,!0):yU[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[yU[e.type]]()):mU(e,t)}function wU(e,t,n,r,a,i,o){var u=xU[t.type]&&i!==Bz&&i!==zz?function(e,t,n){var r,a=t[xU[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):gU(e,t,n,a,i,o);return"symbol"===r&&function(e){return yU[e.type]||e.bins}(t)?kU(u):"discrete"===r?SU(u):jU(u)}var kU=function(e){return function(t,n,r){var a=OU(r[n+1],OU(r.max,1/0)),i=EU(t,e),o=EU(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},OU=function(e,t){return null!=e?e:t},SU=function(e){return function(t,n){return n?e(t):null}},jU=function(e){return function(t){return e(t)}},EU=function(e,t){return Number.isFinite(e)?t(e):null};function CU(e,t,n,r){var a=r||t.type;return oB(n)&&oU(a,$z)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==Bz?n||a!==zz?wU(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function AU(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=CU(e,t,n.format,n.formatType);if(oU(t.type,Yz)){var i=_U(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(uU(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a($L(l)))}var TU=0;var NU="p_";function MU(e){return e&&e.gradient}function DU(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?NU:"";return a||(a=e.id="gradient_"+TU++,"radial"===r?(e.x1=IU(e.x1,.5),e.y1=IU(e.y1,.5),e.r1=IU(e.r1,0),e.x2=IU(e.x2,.5),e.y2=IU(e.y2,.5),e.r2=IU(e.r2,.5),i=NU):(e.x1=IU(e.x1,0),e.y1=IU(e.y1,0),e.x2=IU(e.x2,1),e.y2=IU(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function IU(e,t){return null!=e?e:t}var FU={basis:{curve:function(e){return new bB(e)}},"basis-closed":{curve:function(e){return new xB(e)}},"basis-open":{curve:function(e){return new _B(e)}},bundle:{curve:kB,tension:"beta",value:.85},cardinal:{curve:jB,tension:"tension",value:0},"cardinal-open":{curve:CB,tension:"tension",value:0},"cardinal-closed":{curve:TB,tension:"tension",value:0},"catmull-rom":{curve:HB,tension:"alpha",value:.5},"catmull-rom-closed":{curve:YB,tension:"alpha",value:.5},"catmull-rom-open":{curve:$B,tension:"alpha",value:.5},linear:{curve:JB},"linear-closed":{curve:function(e){return new QB(e)}},monotone:{horizontal:function(e){return new iz(e)},vertical:function(e){return new az(e)}},natural:{curve:function(e){return new uz(e)}},step:{curve:function(e){return new cz(e,.5)}},"step-after":{curve:function(e){return new cz(e,1)}},"step-before":{curve:function(e){return new cz(e,0)}}};function RU(e,t,n){var r=rB(FU,e)&&FU[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var PU={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},LU=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function BU(e){var t,n,r,a,i,o,u,s,c,l,f=[],d=e.slice().replace(LU[0],"###$1").split(LU[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=(t=d[u]).slice(1).trim().replace(LU[2],"$1###$2").replace(LU[3],"$1###$2").split(LU[4]),r=[i=t.charAt(0)],s=0,l=n.length;s<l;++s)(a=+n[s])===a&&r.push(a);if(o=PU[i.toLowerCase()],r.length-1>o){var h=r.length;for(s=1,f.push([i].concat(r.slice(s,s+=o))),i="M"===i?"L":"m"===i?"l":i;s<h;s+=o)f.push([i].concat(r.slice(s,s+o)))}else f.push(r)}return f}var zU=Math.PI/180,UU=Math.PI/2,WU=2*Math.PI,VU=Math.sqrt(3)/2,GU={},qU={},HU=[].join;function XU(e){var t=HU.call(e);if(qU[t])return qU[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,h=c*u,p=Math.cos(a),v=Math.sin(a),m=Math.cos(i),g=Math.sin(i),b=.5*(i-a),y=Math.sin(.5*b),x=8/3*y*y/Math.sin(b),_=n+p-x*v,w=r+v+x*p,k=n+m,O=r+g,S=k+x*g,j=O-x*m;return qU[t]=[l*_+f*w,d*_+h*w,l*S+f*j,d*S+h*j,l*k+f*O,d*k+h*O]}var YU=["l",0,0,0,0,0,0,0];function KU(e,t,n){var r=YU[0]=e[0];if("a"===r||"A"===r)YU[1]=t*e[1],YU[2]=n*e[2],YU[3]=e[3],YU[4]=e[4],YU[5]=e[5],YU[6]=t*e[6],YU[7]=n*e[7];else if("h"===r||"H"===r)YU[1]=t*e[1];else if("v"===r||"V"===r)YU[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)YU[a]=(a%2==1?t:n)*e[a];return YU}function $U(e,t,n,r,a,i){var o,u,s,c,l,f=null,d=0,h=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var m=0,g=t.length;m<g;++m){switch(o=t[m],1===a&&1===i||(o=KU(o,a,i)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],e.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],e.moveTo(d+n,h+r);break;case"c":u=d+o[5],s=h+o[6],p=d+o[3],v=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,v+r,u+n,s+r),d=u,h=s;break;case"C":d=o[5],h=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,d+n,h+r);break;case"s":u=d+o[3],s=h+o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,d+o[1]+n,h+o[2]+r,u+n,s+r),p=d+o[1],v=h+o[2],d=u,h=s;break;case"S":u=o[3],s=o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"q":u=d+o[3],s=h+o[4],p=d+o[1],v=h+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"t":u=d+o[1],s=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,v=h):"t"===f[0]?(p=2*d-c,v=2*h-l):"q"===f[0]&&(p=2*d-p,v=2*h-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=s,p=(d=u)+o[1],v=h+o[2];break;case"T":u=o[1],s=o[2],p=2*d-p,v=2*h-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"a":ZU(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":ZU(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":e.closePath()}f=o}}function ZU(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=HU.call(arguments);if(GU[c])return GU[c];var l=o*zU,f=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+f*(s-t)*.5,p=d*(s-t)*.5-f*(u-e)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=d/n,g=f/n,b=-f/r,y=d/r,x=m*u+g*s,_=b*u+y*s,w=m*e+g*t,k=b*e+y*t,O=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;O<0&&(O=0);var S=Math.sqrt(O);i==a&&(S=-S);var j=.5*(x+w)-S*(k-_),E=.5*(_+k)+S*(w-x),C=Math.atan2(_-E,x-j),A=Math.atan2(k-E,w-j)-C;A<0&&1===i?A+=WU:A>0&&0===i&&(A-=WU);for(var T=Math.ceil(Math.abs(A/(UU+.001))),N=[],M=0;M<T;++M){var D=C+M*A/T,I=C+(M+1)*A/T;N[M]=[j,E,D,I,n,r,f,d]}return GU[c]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=XU(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var JU=.5773502691896257,QU={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,WU)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n,a=r-n*JU,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n,a=r-n*JU;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=VU*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function eW(e){return rB(QU,e)?QU[e]:function(e){if(!rB(tW,e)){var t=BU(e);tW[e]={draw:function(e,n){$U(e,t,0,0,Math.sqrt(n)/2)}}}return tW[e]}(e)}var tW={};var nW=.448084975506;function rW(e){return e.x}function aW(e){return e.y}function iW(e){return e.width}function oW(e){return e.height}function uW(e){return"function"===typeof e?e:function(){return+e}}function sW(e,t,n){return Math.max(t,Math.min(e,n))}function cW(e,t){return null!=e?e:t}var lW=function(e){return e.x||0},fW=function(e){return e.y||0},dW=function(e){return!(!1===e.defined)},hW=function(){var e=bz,t=yz,n=gz(0),r=null,a=xz,i=_z,o=wz,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=a.apply(this,arguments)-zB,h=i.apply(this,arguments)-zB,p=NB(h-d),v=h>d;if(u||(u=s=mz()),f<l&&(c=f,f=l,l=c),f>LB)if(p>UB-LB)u.moveTo(f*DB(d),f*RB(d)),u.arc(0,0,f,d,h,!v),l>LB&&(u.moveTo(l*DB(h),l*RB(h)),u.arc(0,0,l,h,d,v));else{var m,g,b=d,y=h,x=d,_=h,w=p,k=p,O=o.apply(this,arguments)/2,S=O>LB&&(r?+r.apply(this,arguments):PB(l*l+f*f)),j=FB(NB(f-l)/2,+n.apply(this,arguments)),E=j,C=j;if(S>LB){var A=VB(S/l*RB(O)),T=VB(S/f*RB(O));(w-=2*A)>LB?(x+=A*=v?1:-1,_-=A):(w=0,x=_=(d+h)/2),(k-=2*T)>LB?(b+=T*=v?1:-1,y-=T):(k=0,b=y=(d+h)/2)}var N=f*DB(b),M=f*RB(b),D=l*DB(_),I=l*RB(_);if(j>LB){var F,R=f*DB(y),P=f*RB(y),L=l*DB(x),B=l*RB(x);if(p<BB&&(F=kz(N,M,L,B,R,P,D,I))){var z=N-F[0],U=M-F[1],W=R-F[0],V=P-F[1],G=1/RB(WB((z*W+U*V)/(PB(z*z+U*U)*PB(W*W+V*V)))/2),q=PB(F[0]*F[0]+F[1]*F[1]);E=FB(j,(l-q)/(G-1)),C=FB(j,(f-q)/(G+1))}}k>LB?C>LB?(m=Oz(L,B,N,M,f,C,v),g=Oz(R,P,D,I,f,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<j?u.arc(m.cx,m.cy,C,MB(m.y01,m.x01),MB(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,C,MB(m.y01,m.x01),MB(m.y11,m.x11),!v),u.arc(0,0,f,MB(m.cy+m.y11,m.cx+m.x11),MB(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,C,MB(g.y11,g.x11),MB(g.y01,g.x01),!v))):(u.moveTo(N,M),u.arc(0,0,f,b,y,!v)):u.moveTo(N,M),l>LB&&w>LB?E>LB?(m=Oz(D,I,R,P,l,-E,v),g=Oz(N,M,L,B,l,-E,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),E<j?u.arc(m.cx,m.cy,E,MB(m.y01,m.x01),MB(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,E,MB(m.y01,m.x01),MB(m.y11,m.x11),!v),u.arc(0,0,l,MB(m.cy+m.y11,m.cx+m.x11),MB(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,E,MB(g.y11,g.x11),MB(g.y01,g.x01),!v))):u.arc(0,0,l,_,x,v):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-BB/2;return[DB(r)*n,RB(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:gz(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:gz(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:gz(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:gz(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:gz(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:gz(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:gz(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),pW=Nz().x(lW).y1(fW).y0((function(e){return(e.y||0)+(e.height||0)})).defined(dW),vW=Nz().y(fW).x1(lW).x0((function(e){return(e.x||0)+(e.width||0)})).defined(dW),mW=Tz().x(lW).y(fW).defined(dW),gW=function(){var e=rW,t=aW,n=iW,r=oW,a=uW(0),i=a,o=a,u=a,s=null;function c(c,l,f){var d,h=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),m=+r.call(this,c),g=Math.min(v,m)/2,b=sW(+a.call(this,c),0,g),y=sW(+i.call(this,c),0,g),x=sW(+o.call(this,c),0,g),_=sW(+u.call(this,c),0,g);if(s||(s=d=mz()),b<=0&&y<=0&&x<=0&&_<=0)s.rect(h,p,v,m);else{var w=h+v,k=p+m;s.moveTo(h+b,p),s.lineTo(w-y,p),s.bezierCurveTo(w-nW*y,p,w,p+nW*y,w,p+y),s.lineTo(w,k-_),s.bezierCurveTo(w,k-nW*_,w-nW*_,k,w-_,k),s.lineTo(h+x,k),s.bezierCurveTo(h+nW*x,k,h,k-nW*x,h,k-x),s.lineTo(h,p+b),s.bezierCurveTo(h,p+nW*b,h+nW*b,p,h+b,p),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=uW(t),c):e},c.y=function(e){return arguments.length?(t=uW(e),c):t},c.width=function(e){return arguments.length?(n=uW(e),c):n},c.height=function(e){return arguments.length?(r=uW(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=uW(e),i=null!=t?uW(t):a,u=null!=n?uW(n):a,o=null!=r?uW(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}().x(lW).y(fW).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return cW(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return cW(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return cW(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return cW(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),bW=function(e,t){var n=null;function r(){var r;if(n||(n=r=mz()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:gz(e||Mz),t="function"===typeof t?t:gz(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:gz(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:gz(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return eW(e.shape||"circle")})).size((function(e){return cW(e.size,64)})),yW=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,h=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-d,o-h),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+d,o+h),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,WU);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,d=!1;for(null==s&&(s=l=mz()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&(d=!d)&&(a=0),d&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().x(lW).y(fW).defined(dW).size((function(e){return e.size||1}));function xW(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function _W(e,t,n,r){return gW.context(e)(t,n,r)}var wW=1;function kW(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+wW++),o=a.clipping[i]||(a.clipping[i]={id:i});return QL(r)?o.path=r(null):xW(n)?o.path=_W(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function OW(e){this.clear(),e&&this.union(e)}function SW(e){this.mark=e,this.bounds=this.bounds||new OW}function jW(e){SW.call(this,e),this.items=this.items||[]}function EW(e){this._pending=0,this._loader=e||Object(an.e)()}function CW(e){e._pending+=1}function AW(e){e._pending-=1}function TW(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}OW.prototype={clone:function(){return new OW(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},aB(jW,SW),EW.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return CW(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return AW(t),e})).catch((function(){return AW(t),null}))},loadImage:function(e){var t=this,n=es();return CW(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=rB(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return AW(t)},a.onerror=function(){return AW(t)},a.src=r,a})).catch((function(e){return AW(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var NW,MW,DW,IW,FW,RW,PW,LW,BW=WU-1e-8,zW=function(e,t){return NW.add(e,t)},UW=function(e,t){return zW(MW=e,DW=t)},WW=function(e){return zW(e,NW.y1)},VW=function(e){return zW(NW.x1,e)},GW=function(e,t){return FW*e+PW*t},qW=function(e,t){return RW*e+LW*t},HW=function(e,t){return zW(GW(e,t),qW(e,t))},XW=function(e,t){return UW(GW(e,t),qW(e,t))};function YW(e,t){return NW=e,t?(IW=t*zU,FW=LW=Math.cos(IW),RW=Math.sin(IW),PW=-RW):(FW=LW=1,IW=RW=PW=0),KW}var KW={beginPath:function(){},closePath:function(){},moveTo:XW,lineTo:XW,rect:function(e,t,n,r){IW?(HW(e+n,t),HW(e+n,t+r),HW(e,t+r),XW(e,t)):(zW(e+n,t+r),UW(e,t))},quadraticCurveTo:function(e,t,n,r){var a=GW(e,t),i=qW(e,t),o=GW(n,r),u=qW(n,r);$W(MW,a,o,WW),$W(DW,i,u,VW),UW(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=GW(e,t),u=qW(e,t),s=GW(n,r),c=qW(n,r),l=GW(a,i),f=qW(a,i);ZW(MW,o,s,l,WW),ZW(DW,u,c,f,VW),UW(l,f)},arc:function(e,t,n,r,a,i){if(r+=IW,a+=IW,MW=n*Math.cos(a)+e,DW=n*Math.sin(a)+t,Math.abs(a-r)>BW)zW(e-n,t-n),zW(e+n,t+n);else{var o,u,s=function(r){return zW(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=WU)<0&&(r+=WU),(a%=WU)<0&&(a+=WU),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=WU,o=r-r%UU,u=0;u<4&&o>a;++u,o-=UU)s(o);else for(o=r-r%UU+UU,u=0;u<4&&o<a;++u,o+=UU)s(o)}}};function $W(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function ZW(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(JW(c,e,t,n,r)),0<l&&l<1&&a(JW(l,e,t,n,r))}function JW(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var QW=(QW=Qu(1,1))?QW.getContext("2d"):null,eV=new OW;function tV(e){return function(t,n){if(!QW)return!0;e(QW,t),eV.clear().union(t.bounds).intersect(n).round();for(var r=eV.x1,a=eV.y1,i=eV.x2,o=eV.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(QW.isPointInPath(s,u))return!0;return!1}}function nV(e,t){return t.contains(e.x||0,e.y||0)}function rV(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(eV.set(n,r,n+a,r+i))}function aV(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,h=r-t,p=a-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(i=-h,o=-(c-t)),1===s&&(i=h,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=d-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>m)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<m&&(m=u)}}return!0}function iV(e,t){e.globalCompositeOperation=t.blend||"source-over"}function oV(e,t){return null==e?t:e}function uV(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function sV(e,t,n){return MU(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+oV(t.x1,.5)*a,n.y1+oV(t.y1,.5)*i,Math.max(a,i)*oV(t.r1,0),n.x1+oV(t.x2,.5)*a,n.y1+oV(t.y2,.5)*i,Math.max(a,i)*oV(t.r2,.5));else{var o=oV(t.x1,0),u=oV(t.y1,0),s=oV(t.x2,1),c=oV(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=Qu(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=uV(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return uV(r,t.stops)}(e,n,t.bounds):n}function cV(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=sV(e,t,t.fill),!0)}var lV=[];function fV(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=sV(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||lV),e.lineDashOffset=t.strokeDashOffset||0),!0))}function dV(e,t){return e.zindex-t.zindex||e.index-t.index}function hV(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(dV)}function pV(e,t){var n,r,a=e.items;if(a&&a.length){var i=hV(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function vV(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=hV(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function mV(e){return function(t,n,r){pV(n,(function(n){r&&!r.intersects(n.bounds)||gV(e,t,n,n)}))}}function gV(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(iV(t,n),n.fill&&cV(t,n,a)&&t.fill(),n.stroke&&fV(t,n,a)&&t.stroke()))}function bV(e){return e=e||XL,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,vV(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function yV(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function xV(e){return bV(yV(e))}function _V(e,t){return"translate("+e+","+t+")"}function wV(e){return"rotate("+e+")"}function kV(e){return _V(e.x||0,e.y||0)}function OV(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=zU),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return _V(e.x||0,e.y||0)+(e.angle?" "+wV(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(YW(e,n.angle),n),TW(e,n).translate(n.x||0,n.y||0)},draw:mV(r),pick:xV(r),isect:n||tV(r)}}var SV=OV("arc",(function(e,t){return hW.context(e)(t)}));function jV(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a,i=yV(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(YW(e),r),TW(e,r[0]))},draw:(a=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||gV(a,e,t.items[0],t.items)}),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null)},isect:nV,tip:n}}var EV=jV("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?vW:pW).curve(RU(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function CV(e,t){e.beginPath(),xW(t)?_W(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function AV(e){var t=oV(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function TV(e,t){var n=AV(t);e("d",_W(null,t,n,n))}function NV(e,t,n,r){var a=AV(t);e.beginPath(),_W(e,t,(n||0)+a,(r||0)+a)}var MV=yV(NV),DV=yV(NV,!1),IV=yV(NV,!0);var FV={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",kV(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),TW(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;pV(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(NV(e,t,a,i),iV(e,t),t.fill&&cV(e,t,u)&&e.fill(),t.stroke&&!o&&fV(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&CV(e,t),n&&n.translate(-a,-i),pV(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(NV(e,t,a,i),iV(e,t),fV(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return vV(t,(function(c){var l,f,d,h=c.bounds;if(!h||h.contains(a,i)){f=c.x||0,d=c.y||0;var p=f+(c.width||0),v=d+(c.height||0),m=c.clip;if(!m||!(a<f||a>p||i<d||i>v)){if(e.save(),e.translate(f,d),f=a-f,d=i-d,m&&xW(c)&&!IV(e,c,u,s))return e.restore(),null;var g=c.strokeForeground,b=!1!==t.interactive;return b&&g&&c.stroke&&DV(e,c,u,s)?(e.restore(),c):(!(l=vV(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&b&&(c.fill||!g&&c.stroke)&&MV(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:rV,content:function(e,t,n){e("clip-path",t.clip?kW(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),TV(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?TV(e,t):e("d","")}},RV={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function PV(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function LV(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function BV(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function zV(e,t){return"center"===e?t/2:"right"===e?t:0}function UV(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var WV={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=PV(t,n),a=LV(t,r),i=BV(t,r),o=(t.x||0)-zV(t.align,a),u=(t.y||0)-UV(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",RV["xmlns:xlink"],"xlink:href"),e("transform",_V(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=LV(t,n),a=BV(t,n),i=(t.x||0)-zV(t.align,r),o=(t.y||0)-UV(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;pV(t,(function(t){if(!n||n.intersects(t.bounds)){var a,i,o,u,s=PV(t,r),c=LV(t,s),l=BV(t,s),f=(t.x||0)-zV(t.align,c),d=(t.y||0)-UV(t.baseline,l);!1!==t.aspect&&(i=s.width/s.height,o=t.width/t.height,i===i&&o===o&&i!==o&&(o<i?(d+=(l-(u=c/i))/2,l=u):(f+=(c-(u=l*i))/2,c=u))),(s.complete||s.toDataURL)&&(iV(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(s,f,d,c,l))}}))},pick:bV(),isect:XL,get:PV,xOffset:zV,yOffset:UV},VV=jV("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return mW.curve(RU(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function GV(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*zU,s=t.pathCache;s&&s.path===n||((t.pathCache=s=BU(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),$U(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):$U(e,s,r,a,i,o)}var qV={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return _V(e.x||0,e.y||0)+(e.angle?" "+wV(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return GV(YW(e,t.angle),t)?e.set(0,0,0,0):TW(e,t,!0)},draw:mV(GV),pick:xV(GV),isect:tV(GV)};function HV(e,t){e.beginPath(),_W(e,t)}var XV={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",_W(null,t))},bound:function(e,t){var n,r;return TW(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:mV(HV),pick:xV(HV),isect:rV};function YV(e,t,n){var r,a,i,o;return!(!t.stroke||!fV(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var KV={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",kV(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return TW(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){pV(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&YV(e,t,r)&&(iV(e,t),e.stroke())}}))},pick:bV((function(e,t,n,r){return!!e.isPointInStroke&&(YV(e,t,1)&&e.isPointInStroke(n,r))})),isect:function(e,t){var n=e.x||0,r=e.y||0;return aV(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},$V=OV("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),ZV=OV("symbol",(function(e,t){return bW.context(e)(t)}),nV),JV=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return rB(t,e)||rB(n,e)},get:function(e){return rB(t,e)?t[e]:rB(n,e)?i(e,n[e]):void 0},set:function(e,n){return rB(t,e)?t[e]=n:i(e,n)}}}(),QV={height:iG,measureWidth:rG,estimateWidth:tG,width:tG,canvas:eG};function eG(e){QV.width=e&&QW?rG:tG}function tG(e,t){return nG(sG(e,t),iG(e))}function nG(e,t){return~~(.8*e.length*t)}function rG(e,t){return iG(e)<=0||!(t=sG(e,t))?0:aG(t,lG(e))}function aG(e,t){var n="(".concat(t,") ").concat(e),r=JV.get(n);return void 0===r&&(QW.font=t,r=QW.measureText(e).width,JV.set(n,r)),r}function iG(e){return null!=e.fontSize?+e.fontSize||0:11}function oG(e){return null!=e.lineHeight?e.lineHeight:iG(e)+2}function uG(e){return t=e.lineBreak&&e.text&&!YL(e.text)?e.text.split(e.lineBreak):e.text,YL(t)?t.length>1?t:t[0]:t;var t}function sG(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(QV.width===rG){var t=lG(e);return function(e){return aG(e,t)}}var n=iG(e);return function(e){return nG(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function cG(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function lG(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+iG(e)+"px "+cG(e,t)}function fG(e){var t=e.baseline,n=iG(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*oG(e):"line-bottom"===t?.29*n-.5*oG(e):0)}eG(!0);var dG={left:"start",center:"middle",right:"end"},hG=new OW;function pG(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-UU,n+=a*Math.cos(t),r+=a*Math.sin(t)),hG.x1=n,hG.y1=r,hG}function vG(e,t,n){var r,a=QV.height(t),i=t.align,o=pG(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+fG(t)-Math.round(.8*a),f=uG(t);if(YL(f)?(a+=oG(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,QV.width(t,n))}),0)):r=QV.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*zU,u,s);else if(2===n)return e.rotatedPoints(t.angle*zU,u,s);return e}var mG={arc:SV,area:EV,group:FV,image:WV,line:VV,path:qV,rect:XV,rule:KV,shape:$V,symbol:ZV,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+fG(t),i=pG(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",dG[t.align]||"start"),s?(n=_V(o,u)+" "+wV(s),(r||a)&&(n+=" "+_V(r,a))):n=_V(o+r,u+a),e("transform",n)},bound:vG,draw:function(e,t,n){pV(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=lG(t),e.textAlign=t.align||"left",a=(r=pG(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*zU),a=i=0),a+=t.dx||0,i+=(t.dy||0)+fG(t),s=uG(t),iV(e,t),YL(s))for(u=oG(t),o=0;o<s.length;++o)c=sG(t,s[o]),t.fill&&cV(e,t,l)&&e.fillText(c,a,i),t.stroke&&fV(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=sG(t,s),t.fill&&cV(e,t,l)&&e.fillText(c,a,i),t.stroke&&fV(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:bV((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=pG(t),u=o.x1,s=o.y1,c=vG(hG,t,1),l=-t.angle*zU,f=Math.cos(l),d=Math.sin(l),h=f*a-d*i+(u-f*u+d*s),p=d*a+f*i+(s-d*u-f*s);return c.contains(h,p)})),isect:function(e,t){var n=vG(hG,e,2);return aV(t,n[0],n[1],n[2],n[3])||aV(t,n[0],n[1],n[4],n[5])||aV(t,n[4],n[5],n[6],n[7])||aV(t,n[2],n[3],n[6],n[7])}},trail:jV("trail",(function(e,t){return yW.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null}))};function gG(e,t,n){var r=mG[e.mark.marktype],a=t||r.bound;return r.nested&&(e=e.mark),a(e.bounds||(e.bounds=new OW),e,n)}var bG={mark:null};var yG=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function xG(e){return _G("string"===typeof e?JSON.parse(e):e)}function _G(e){var t,n,r,a=e.marktype,i=e.items;if(i)for(n=0,r=i.length;n<r;++n)t=a?"mark":"group",i[n][t]=e,i[n].zindex&&(i[n][t].zdirty=!0),"group"===(a||t)&&_G(i[n]);return a&&function(e,t,n){var r,a,i,o,u=mG[e.marktype],s=u.bound,c=e.items,l=c&&c.length;if(u.nested)return l?i=c[0]:(bG.mark=e,i=bG),o=gG(i,s,n),t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new OW,l)for(r=0,a=c.length;r<a;++r)t.union(gG(c[r],s,n));e.bounds=t}(e),e}function wG(e){arguments.length?this.root=xG(e):(this.root=kG({marktype:"group",name:"root",role:"frame"}),this.root.items=[new jW(this.root)])}function kG(e,t){var n={bounds:new OW,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function OG(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function SG(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function jG(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=OG(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function EG(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function CG(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function AG(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function TG(e,t){this._active=null,this._handlers={},this._loader=e||Object(an.e)(),this._tooltip=t||NG}function NG(e,t,n,r){e.element().setAttribute("title",r||"")}function MG(e){this._el=null,this._bgcolor=null,this._loader=new EW(e)}wG.prototype={toJSON:function(e){return function(e,t){return JSON.stringify(e,yG,t)}(this.root,e||0)},mark:function(e,t,n){var r=kG(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},TG.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,Object(mo.a)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,Object(mo.a)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=OG(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=mG[o.marktype]).tip){for((i=AG(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},MG.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var DG="dragenter",IG="dragleave",FG="dragover",RG="mousedown",PG="mousemove",LG="mouseout",BG="mouseover",zG="click",UG="mousewheel",WG="touchstart",VG="touchmove",GG="touchend",qG=PG,HG=LG,XG=zG;function YG(e,t){TG.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function KG(e,t){(function(e){return e===WG||e===VG||e===GG?[WG,VG,GG]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function $G(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function ZG(e){return function(t){this.fire(e,t),this._active=null}}aB(YG,TG,{initialize:function(e,t,n){var r=this;return this._canvas=e&&SG(e,"canvas"),[zG,RG,PG,LG,IG].forEach((function(e){return KG(r,e)})),TG.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",DG,IG,FG,RG,"mouseup",PG,LG,BG,zG,"dblclick","wheel",UG,WG,VG,GG],DOMMouseScroll:function(e){this.fire(UG,e)},mousemove:$G(PG,BG,LG),dragover:$G(FG,DG,IG),mouseout:ZG(LG),dragleave:ZG(IG),mousedown:function(e){this._down=this._active,this.fire(RG,e)},click:function(e){this._down===this._active&&(this.fire(zG,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(WG,e,!0)},touchmove:function(e){this.fire(VG,e,!0)},touchend:function(e){this.fire(GG,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===XG&&r&&r.href?this.handleHref(t,r,r.href):e!==qG&&e!==HG||this.handleTooltip(t,r,e!==HG),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(KG(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=AG(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return mG[e.marktype].pick.call(this,i,e,t,n,r,a)}});var JG="undefined"!==typeof window&&window.devicePixelRatio||1;function QG(e){MG.call(this,e),this._options={},this._redraw=!1,this._dirty=new OW,this._tempb=new OW}var eq=MG.prototype;function tq(e,t){TG.call(this,e,t);var n=this;n._hrefHandler=nq(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=nq(n,(function(e,t){n.handleTooltip(e,t,e.type!==HG)}))}aB(QG,MG,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:Qu(1,1,this._options.type),e&&this._canvas&&(EG(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),eq.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(eq.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?JG:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||GL("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){var t,n,r,a=this.context(),i=this._origin,o=this._width,u=this._height,s=this._dirty,c=(t=i,n=o,r=u,(new OW).set(0,0,n,r).translate(-t[0],-t[1]));a.save();var l=this._redraw||s.empty()?(this._redraw=!1,c.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(a,c.intersect(s),i);return this.clear(-i[0],-i[1],o,u),this.draw(a,e,l),a.restore(),s.clear(),this},draw:function(e,t,n){var r=mG[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),QL(n)?(e.beginPath(),n(e),e.clip()):CV(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var nq=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};aB(tq,TG,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(XG,this._hrefHandler),r.removeEventListener(qG,this._tooltipHandler),r.removeEventListener(HG,this._tooltipHandler)),this._svg=r=e&&SG(e,"svg"),r&&(r.addEventListener(XG,this._hrefHandler),r.addEventListener(qG,this._tooltipHandler),r.addEventListener(HG,this._tooltipHandler)),TG.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:nq(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var rq="aria-hidden",aq="aria-label",iq="role",oq="aria-roledescription",uq="graphics-object",sq="graphics-symbol",cq=function(e,t,n){var r;return r={},Object(go.a)(r,iq,e),Object(go.a)(r,oq,t),Object(go.a)(r,aq,n||void 0),r},lq=sB(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),fq={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?mq(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(uU(u)?"discrete":u," scale")+" with ".concat(AU(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?mq(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+$L(e)}(i))+" with ".concat(AU(s,u,e));var c}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(vq(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(vq(e),"'")}}},dq={ariaRole:iq,ariaRoleDescription:oq,description:aq};function hq(e,t){var n=!1===t.aria;if(e(rq,n||void 0),n||null==t.description)for(var r in dq)e(dq[r],void 0);else{var a=t.mark.marktype;e(aq,t.description),e(iq,t.ariaRole||("group"===a?uq:sq)),e(oq,t.ariaRoleDescription||"".concat(a," mark"))}}function pq(e){return!1===e.aria?Object(go.a)({},rq,!0):lq[e.role]?null:fq[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return cq(t.role||sq,t.desc,n.description||r(n))}catch(a){return null}}(e,fq[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return cq(n?uq:sq,"".concat(t," mark container"),e.description)}(e)}function vq(e){return JL(e.text).join(" ")}function mq(e){try{return JL($L(e.items).items[0].text).join(" ")}catch(t){return null}}var gq=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function bq(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(gq(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=gq(e),u},toString:function(){return e}};return u}var yq=function(e){return xq(bq(),e)+""};function xq(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes())for(var i=t.childNodes,o=i.length,u=0;u<o;u++){var s=i[u];3===s.nodeType?e.text(s.nodeValue):xq(e,s)}return e.close()}var _q={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},wq={fill:"none","stroke-miterlimit":10},kq="http://www.w3.org/2000/xmlns/",Oq=RV.xmlns;function Sq(e){MG.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var jq=MG.prototype;function Eq(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function Cq(e,t,n){var r,a,i;if("radial"===t.gradient){var o=jG(e,n++,"pattern",Oq);Rq(o,{id:NU+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),Rq(o=jG(o,0,"rect",Oq),{width:1,height:1,fill:"url(".concat(Lq(),"#").concat(t.id,")")}),Rq(e=jG(e,n++,"radialGradient",Oq),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Rq(e=jG(e,n++,"linearGradient",Oq),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=jG(e,r,"stop",Oq)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return EG(e,r),n}function Aq(e,t,n){return(e=jG(e,n,"clipPath",Oq)).setAttribute("id",t.id),t.path?jG(e,0,"path",Oq).setAttribute("d",t.path):Rq(jG(e,0,"rect",Oq),{x:0,y:0,width:t.width,height:t.height}),EG(e,1),n+1}function Tq(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=OG(i=t.ownerDocument,r,Oq),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=OG(i,"path",Oq);o.appendChild(u),u.__data__=e;var s=OG(i,"g",Oq);o.appendChild(s),s.__data__=e;var c=OG(i,"path",Oq);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}aB(Sq,MG,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=jG(e,0,"svg",Oq),this._svg.setAttributeNS(kq,"xmlns",Oq),this._svg.setAttributeNS(kq,"xmlns:xlink",RV["xmlns:xlink"]),this._svg.setAttribute("version",RV.version),this._svg.setAttribute("class","marks"),EG(e,1),this._root=jG(this._svg,0,"g",Oq),Rq(this._root,wq),EG(this._svg,1)),this.background(this._bgcolor),jq.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),jq.background.apply(this,arguments)},resize:function(e,t,n,r){return jq.resize.call(this,e,t,n,r),this._svg&&(Rq(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),Rq(e=jG(t,0,"rect",Oq),{width:this._width,height:this._height,fill:n}));var r=yq(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),EG(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=mG[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,Eq(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,Eq(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a=this._svg,i=mG[t.marktype],o=!1===t.interactive?"none":null,u="g"===i.tag,s=null,c=0,l=Tq(t,e,n,"g",a);l.setAttribute("class",CG(t));var f=pq(t);for(var d in f)Pq(l,d,f[d]);u||Pq(l,"pointer-events",o),Pq(l,"clip-path",t.clip?kW(this,t,t.group):null);var h=function(e){var t=r.isDirty(e),n=Tq(e,l,s,i.tag,a);t&&(r._update(i,n,e),u&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;pV(n,(function(n){r=e.mark(t,n,r),++a})),EG(t,1+a)}(r,n,e)),s=n,++c};return i.nested?t.items.length&&h(t.items[0]):pV(t,h),EG(l,c),l},_update:function(e,t,n){Nq=t,Mq=t.__values__,hq(Iq,n),e.attr(Iq,n,this);var r=Dq[e.type];r&&r.call(this,e,t,n),Nq&&this.style(Nq,n)},style:function(e,t){if(null!=t)for(var n in _q){var r="font"===n?cG(t):t[n];if(r!==Mq[n]){var a=_q[n];null==r?e.removeAttribute(a):(MU(r)&&(r=DU(r,this._defs.gradient,Lq())),e.setAttribute(a,r+"")),Mq[n]=r}}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=jG(e,1,"defs",Oq)),r=Cq(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=jG(e,1,"defs",Oq)),r=Aq(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):EG(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var Nq=null,Mq=null,Dq={group:function(e,t,n){var r=Nq=t.childNodes[2];Mq=r.__values__,e.foreground(Iq,n,this),Mq=t.__values__,Nq=t.childNodes[1],e.content(Iq,n,this);var a=Nq=t.childNodes[0];e.background(Iq,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==Mq.events&&(Pq(r,"pointer-events",i),Pq(a,"pointer-events",i),Mq.events=i),n.strokeForeground&&n.stroke){var o=n.fill;Pq(r,"display",null),this.style(a,n),Pq(a,"stroke",null),o&&(n.fill=null),Mq=r.__values__,this.style(r,n),o&&(n.fill=o),Nq=null}else Pq(r,"display","none")},image:function(e,t,n){!1===n.smooth?(Fq(t,"image-rendering","optimizeSpeed"),Fq(t,"image-rendering","pixelated")):Fq(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=uG(n);YL(u)?(r=(a=u.map((function(e){return sG(n,e)}))).join("\n"))!==Mq.text&&(EG(t,0),i=t.ownerDocument,o=oG(n),a.forEach((function(e,r){var a=OG(i,"tspan",Oq);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),Mq.text=r):(a=sG(n,u))!==Mq.text&&(t.textContent=a,Mq.text=a),Pq(t,"font-family",cG(n)),Pq(t,"font-size",iG(n)+"px"),Pq(t,"font-style",n.fontStyle),Pq(t,"font-variant",n.fontVariant),Pq(t,"font-weight",n.fontWeight)}};function Iq(e,t,n){t!==Mq[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(Nq,e,t,n):Pq(Nq,e,t),Mq[e]=t)}function Fq(e,t,n){n!==Mq[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Mq[t]=n)}function Rq(e,t){for(var n in t)Pq(e,n,t[n])}function Pq(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Lq(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function Bq(e){MG.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}aB(Bq,MG,{svg:function(){return this._text},_render:function(e){var t=bq();t.open("svg",tB({},RV,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",wq,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=mG[t.marktype],a=r.tag,i=[hq,r.attr];e.open("g",{class:CG(t),"clip-path":t.clip?kW(this,t,t.group):null},pq(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=uG(o);if(YL(s))for(var c={x:0,dy:oG(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(sG(o,s[l])).close();else e.text(sG(o,s))}else if("g"===a){var f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),pV(o,(function(t){return n.mark(e,t)})),e.close(),f&&h?(d&&(o.fill=null),o.stroke=h,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),d&&(o.fill=d)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):pV(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=cG(t),e["font-size"]=iG(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var i in _q){var o=t[i],u=_q[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(MU(o)&&(o=DU(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:NU+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var zq="canvas",Uq=zq,Wq="png",Vq="svg",Gq={};function qq(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Gq[e]=t,this):Gq[e]}Gq.canvas=Gq.png={renderer:QG,headless:QG,handler:YG},Gq.svg={renderer:Sq,headless:Bq,handler:tq},Gq.none={};new OW;var Hq=function(e,t,n){var r,a,i=e._renderer,o=i&&i.canvas();return o&&(a=vB(e),(r=AG(t.changedTouches?t.changedTouches[0]:t,o))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function a(e){var n,a=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){a=n;break}return a&&a.mark&&a.mark.interactive?a:{}}function i(e){if(!e)return n;oB(e)&&(e=a(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:eB(e),item:eB(t||{}),group:a,xy:i,x:function(e){return i(e)[0]},y:function(e){return i(e)[1]}}}(e,n,r),t};var Xq="view",Yq={trap:!1};function Kq(e,t,n){var r=e._eventConfig&&e._eventConfig[t];return!(!1===r||KL(r)&&!r[n])||(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1)}function $q(e){return e.item}function Zq(e){return e.item.mark.source}function Jq(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}var Qq=function(e,t,n){var r=document.createElement(e);for(var a in t)r.setAttribute(a,t[a]);return null!=n&&(r.textContent=n),r},eH="vega-bind",tH="vega-bind-name",nH=function(e,t,n){if(t){var r=n.param,a=n.state;return a||(a=n.state={elements:null,active:!1,set:null,update:function(t){t!==e.signal(r.signal)&&e.runAsync(null,(function(){a.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(a.update=function(e,t){var n;return function(r){n&&clearTimeout(n),n=setTimeout((function(){return t(r),n=null}),e)}}(r.debounce,a.update))),function(e,t,n,r){var a=Qq("div",{class:eH}),i="radio"===n.input?a:a.appendChild(Qq("label"));i.appendChild(Qq("span",{class:tH},n.name||n.signal)),t.appendChild(a);var o=rH;switch(n.input){case"checkbox":o=aH;break;case"select":o=iH;break;case"radio":o=oH;break;case"range":o=uH}o(e,i,n,r)}(a,t,r,e.signal(r.signal)),a.active||(e.on(e._signals[r.signal],null,(function(){a.source?a.source=!1:a.set(e.signal(r.signal))})),a.active=!0),a}};function rH(e,t,n,r){var a=Qq("input");for(var i in n)"signal"!==i&&"element"!==i&&a.setAttribute("input"===i?"type":i,n[i]);a.setAttribute("name",n.signal),a.value=r,t.appendChild(a),a.addEventListener("input",(function(){return e.update(a.value)})),e.elements=[a],e.set=function(e){return a.value=e}}function aH(e,t,n,r){var a={type:"checkbox",name:n.signal};r&&(a.checked=!0);var i=Qq("input",a);t.appendChild(i),i.addEventListener("change",(function(){return e.update(i.checked)})),e.elements=[i],e.set=function(e){return i.checked=!!e||null}}function iH(e,t,n,r){var a=Qq("select",{name:n.signal}),i=n.labels||[];n.options.forEach((function(e,t){var n={value:e};sH(e,r)&&(n.selected=!0),a.appendChild(Qq("option",n,(i[t]||e)+""))})),t.appendChild(a),a.addEventListener("change",(function(){e.update(n.options[a.selectedIndex])})),e.elements=[a],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(sH(n.options[t],e))return void(a.selectedIndex=t)}}function oH(e,t,n,r){var a=Qq("span",{class:"vega-bind-radio"}),i=n.labels||[];t.appendChild(a),e.elements=n.options.map((function(t,o){var u={type:"radio",name:n.signal,value:t};sH(t,r)&&(u.checked=!0);var s=Qq("input",u);s.addEventListener("change",(function(){return e.update(t)}));var c=Qq("label",{},(i[o]||t)+"");return c.prepend(s),a.appendChild(c),s})),e.set=function(t){for(var n=e.elements,r=n.length,a=0;a<r;++a)sH(n[a].value,t)&&(n[a].checked=!0)}}function uH(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var a=null!=n.max?n.max:Math.max(100,+r)||100,i=n.min||Math.min(0,a,+r)||0,o=n.step||Object(cs.c)(i,a,100),u=Qq("input",{type:"range",name:n.signal,min:i,max:a,step:o});u.value=r;var s=Qq("span",{},+r);t.appendChild(u),t.appendChild(s);var c=function(){s.textContent=u.value,e.update(+u.value)};u.addEventListener("input",c),u.addEventListener("change",c),e.elements=[u],e.set=function(e){u.value=e,s.textContent=e}}function sH(e,t){return e===t||e+""===t+""}var cH=function(e,t,n,r,a,i){return(t=t||new r(e.loader())).initialize(n,hB(e),pB(e),vB(e),a,i).background(e.background())},lH=function(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null};function fH(e,t){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}var dH=function(e){return+e||0},hH=function(e){return KL(e)?{top:dH(e.top),bottom:dH(e.bottom),left:dH(e.left),right:dH(e.right)}:function(e){return{top:e,bottom:e,left:e,right:e}}(dH(e))},pH=function(e,t,n,r){return vH.apply(this,arguments)};function vH(){return(vH=Object(Pt.a)(w.a.mark((function e(t,n,r,a){var i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qq(n),(o=i&&i.headless)||GL("Unrecognized renderer type: "+n),e.next=4,t.runAsync();case 4:return e.abrupt("return",cH(t,null,null,o,r,a).renderAsync(t._scenegraph.root));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mH(){return(mH=Object(Pt.a)(w.a.mark((function e(t,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t!==Uq&&t!==Vq&&t!==Wq&&GL("Unrecognized image type: "+t),e.next=3,pH(this,t,n);case 3:return r=e.sent,e.abrupt("return",t===Vq?gH(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function gH(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function bH(){return(bH=Object(Pt.a)(w.a.mark((function e(t,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pH(this,Uq,t,n);case 2:return r=e.sent,e.abrupt("return",r.canvas());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function yH(){return(yH=Object(Pt.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pH(this,Vq,t);case 2:return n=e.sent,e.abrupt("return",n.svg());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function xH(e,t,n){return e.fields=t||[],e.fname=n,e}function _H(e){return 1===e.length?wH(e[0]):kH(e)}var wH=function(e){return function(t){return t[e]}},kH=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function OH(e){throw Error(e)}function SH(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||OH("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&OH("Access path missing closing bracket: "+e),o&&OH("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function jH(e,t,n){var r=SH(e);return e=1===r.length?r[0]:e,xH((n&&n.get||_H)(r),[e],t||e)}jH("id");var EH=xH((function(e){return e}),[],"identity"),CH=(xH((function(){return 0}),[],"zero"),xH((function(){return 1}),[],"one"),xH((function(){return!0}),[],"true"));xH((function(){return!1}),[],"false");var AH=Array.isArray;function TH(e){return e===Object(e)}function NH(e){return e[e.length-1]}function MH(e){return null==e||""===e?null:+e}var DH=function(e){return function(t){return e*Math.exp(t)}},IH=function(e){return function(t){return Math.log(e*t)}},FH=function(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}},RH=function(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}},PH=function(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}};function LH(e,t,n,r){var a=n(e[0]),i=n(NH(e)),o=(i-a)*t;return[r(a-o),r(i-o)]}function BH(e,t,n,r,a){var i=r(e[0]),o=r(NH(e)),u=null!=t?r(t):(i+o)/2;return[a(u+(i-u)*n),a(u+(o-u)*n)]}function zH(e){return null!=e?AH(e)?e:[e]:[]}function UH(e){return"function"===typeof e}function WH(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var VH=Object.prototype.hasOwnProperty;function GH(e,t){return VH.call(e,t)}function qH(e,t,n){var r=e.prototype=Object.create(t.prototype);return r.constructor=e,WH(r,n)}function HH(e){return"[object Date]"===Object.prototype.toString.call(e)}function XH(e){return"number"===typeof e}function YH(e){return"string"===typeof e}function KH(e,t){for(var n="";--t>=0;)n+=e;return n}function $H(e){return e&&NH(e)-e[0]||0}function ZH(e){return AH(e)?"["+e.map(ZH)+"]":TH(e)||YH(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var JH=function(e){return XH(e)||HH(e)?e:Date.parse(e)};function QH(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}function eX(e){var t=this.context.data[e];return t?t.values.value:[]}var tX=function(e){return function(t,n){return this.context.dataflow.locale()[e](n)(t)}},nX=tX("format"),rX=tX("timeFormat"),aX=tX("utcFormat"),iX=tX("timeParse"),oX=tX("utcParse"),uX=new Date(2e3,0,1);function sX(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(uX.setYear(2e3),uX.setMonth(e),uX.setDate(t),rX.call(this,uX,n)):""}var cX,lX,fX,dX,hX,pX="RawCode",vX="Literal",mX="Property",gX="Identifier",bX="ArrayExpression",yX="BinaryExpression",xX="CallExpression",_X="ConditionalExpression",wX="LogicalExpression",kX="MemberExpression",OX="ObjectExpression",SX="UnaryExpression";function jX(e){this.type=e}jX.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case bX:return e.elements;case yX:case wX:return[e.left,e.right];case xX:return[e.callee].concat(e.arguments);case _X:return[e.test,e.consequent,e.alternate];case kX:return[e.object,e.property];case OX:return e.properties;case mX:return[e.key,e.value];case SX:return[e.argument];case gX:case vX:case pX:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(cX={})[1]="Boolean",cX[2]="<end>",cX[3]="Identifier",cX[4]="Keyword",cX[5]="Null",cX[6]="Numeric",cX[7]="Punctuator",cX[8]="String",cX[9]="RegularExpression";var EX="Identifier",CX="Unexpected token %0",AX="Invalid regular expression",TX="Invalid regular expression: missing /",NX="Octal literals are not allowed in strict mode.",MX="ILLEGAL",DX="Disabled.",IX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),FX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function RX(e,t){if(!e)throw new Error("ASSERT: "+t)}function PX(e){return e>=48&&e<=57}function LX(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function BX(e){return"01234567".indexOf(e)>=0}function zX(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function UX(e){return 10===e||13===e||8232===e||8233===e}function WX(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&IX.test(String.fromCharCode(e))}function VX(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&FX.test(String.fromCharCode(e))}var GX={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function qX(){for(var e;fX<dX&&(zX(e=lX.charCodeAt(fX))||UX(e));)++fX}function HX(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)fX<dX&&LX(lX[fX])?(r=lX[fX++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):sY({},CX,MX);return String.fromCharCode(a)}function XX(){var e,t,n,r;for(t=0,"}"===(e=lX[fX])&&sY({},CX,MX);fX<dX&&LX(e=lX[fX++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&sY({},CX,MX),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function YX(){var e,t;for(e=lX.charCodeAt(fX++),t=String.fromCharCode(e),92===e&&(117!==lX.charCodeAt(fX)&&sY({},CX,MX),++fX,(e=HX("u"))&&"\\"!==e&&WX(e.charCodeAt(0))||sY({},CX,MX),t=e);fX<dX&&VX(e=lX.charCodeAt(fX));)++fX,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==lX.charCodeAt(fX)&&sY({},CX,MX),++fX,(e=HX("u"))&&"\\"!==e&&VX(e.charCodeAt(0))||sY({},CX,MX),t+=e);return t}function KX(){var e,t;return e=fX,{type:1===(t=92===lX.charCodeAt(fX)?YX():function(){var e,t;for(e=fX++;fX<dX;){if(92===(t=lX.charCodeAt(fX)))return fX=e,YX();if(!VX(t))break;++fX}return lX.slice(e,fX)}()).length?3:GX.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:fX}}function $X(){var e,t,n,r,a=fX,i=lX.charCodeAt(fX),o=lX[fX];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++fX,{type:7,value:String.fromCharCode(i),start:a,end:fX};default:if(61===(e=lX.charCodeAt(fX+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return fX+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:fX};case 33:case 61:return fX+=2,61===lX.charCodeAt(fX)&&++fX,{type:7,value:lX.slice(a,fX),start:a,end:fX}}}return">>>="===(r=lX.substr(fX,4))?{type:7,value:r,start:a,end:fX+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:fX+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:fX+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++fX}:void sY({},CX,MX)}function ZX(){var e,t,n;if(RX(PX((n=lX[fX]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=fX,e="","."!==n){if(e=lX[fX++],n=lX[fX],"0"===e){if("x"===n||"X"===n)return++fX,function(e){for(var t="";fX<dX&&LX(lX[fX]);)t+=lX[fX++];return 0===t.length&&sY({},CX,MX),WX(lX.charCodeAt(fX))&&sY({},CX,MX),{type:6,value:parseInt("0x"+t,16),start:e,end:fX}}(t);if(BX(n))return function(e){for(var t="0"+lX[fX++];fX<dX&&BX(lX[fX]);)t+=lX[fX++];return(WX(lX.charCodeAt(fX))||PX(lX.charCodeAt(fX)))&&sY({},CX,MX),{type:6,value:parseInt(t,8),octal:!0,start:e,end:fX}}(t);n&&PX(n.charCodeAt(0))&&sY({},CX,MX)}for(;PX(lX.charCodeAt(fX));)e+=lX[fX++];n=lX[fX]}if("."===n){for(e+=lX[fX++];PX(lX.charCodeAt(fX));)e+=lX[fX++];n=lX[fX]}if("e"===n||"E"===n)if(e+=lX[fX++],"+"!==(n=lX[fX])&&"-"!==n||(e+=lX[fX++]),PX(lX.charCodeAt(fX)))for(;PX(lX.charCodeAt(fX));)e+=lX[fX++];else sY({},CX,MX);return WX(lX.charCodeAt(fX))&&sY({},CX,MX),{type:6,value:parseFloat(e),start:t,end:fX}}function JX(){var e,t,n,r;return hX=null,qX(),e=fX,t=function(){var e,t,n,r;for(RX("/"===(e=lX[fX]),"Regular expression literal must start with a slash"),t=lX[fX++],n=!1,r=!1;fX<dX;)if(t+=e=lX[fX++],"\\"===e)UX((e=lX[fX++]).charCodeAt(0))&&sY({},TX),t+=e;else if(UX(e.charCodeAt(0)))sY({},TX);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||sY({},TX),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";fX<dX&&VX((e=lX[fX]).charCodeAt(0));)++fX,"\\"===e&&fX<dX?sY({},CX,MX):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&sY({},AX,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";sY({},AX)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){sY({},AX)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:fX}}function QX(){var e;return qX(),fX>=dX?{type:2,start:fX,end:fX}:WX(e=lX.charCodeAt(fX))?KX():40===e||41===e||59===e?$X():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(RX("'"===(e=lX[fX])||'"'===e,"String literal must starts with a quote"),t=fX,++fX;fX<dX;){if((n=lX[fX++])===e){e="";break}if("\\"===n)if((n=lX[fX++])&&UX(n.charCodeAt(0)))"\r"===n&&"\n"===lX[fX]&&++fX;else switch(n){case"u":case"x":"{"===lX[fX]?(++fX,a+=XX()):a+=HX(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:BX(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),fX<dX&&BX(lX[fX])&&(i=!0,r=8*r+"01234567".indexOf(lX[fX++]),"0123".indexOf(n)>=0&&fX<dX&&BX(lX[fX])&&(r=8*r+"01234567".indexOf(lX[fX++]))),a+=String.fromCharCode(r)):a+=n}else{if(UX(n.charCodeAt(0)))break;a+=n}}return""!==e&&sY({},CX,MX),{type:8,value:a,octal:i,start:t,end:fX}}():46===e?PX(lX.charCodeAt(fX+1))?ZX():$X():PX(e)?ZX():$X()}function eY(){var e;return fX=(e=hX).end,hX=QX(),fX=e.end,e}function tY(){var e;e=fX,hX=QX(),fX=e}function nY(e,t,n){var r=new jX("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function rY(e,t){var n=new jX("CallExpression");return n.callee=e,n.arguments=t,n}function aY(e){var t=new jX(EX);return t.name=e,t}function iY(e){var t=new jX("Literal");return t.value=e.value,t.raw=lX.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function oY(e,t,n){var r=new jX("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function uY(e,t,n){var r=new jX("Property");return r.key=t,r.value=n,r.kind=e,r}function sY(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return RX(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=fX,n.description=a,n}function cY(e){2===e.type&&sY(e,"Unexpected end of input"),6===e.type&&sY(e,"Unexpected number"),8===e.type&&sY(e,"Unexpected string"),3===e.type&&sY(e,"Unexpected identifier"),4===e.type&&sY(e,"Unexpected reserved word"),sY(e,CX,e.value)}function lY(e){var t=eY();7===t.type&&t.value===e||cY(t)}function fY(e){return 7===hX.type&&hX.value===e}function dY(e){return 4===hX.type&&hX.value===e}function hY(){var e=[];for(fX=hX.start,lY("[");!fY("]");)fY(",")?(eY(),e.push(null)):(e.push(SY()),fY("]")||lY(","));return eY(),function(e){var t=new jX("ArrayExpression");return t.elements=e,t}(e)}function pY(){var e;return fX=hX.start,8===(e=eY()).type||6===e.type?(e.octal&&sY(e,NX),iY(e)):aY(e.value)}function vY(){var e,t,n;return fX=hX.start,3===(e=hX).type?(n=pY(),lY(":"),uY("init",n,SY())):2!==e.type&&7!==e.type?(t=pY(),lY(":"),uY("init",t,SY())):void cY(e)}function mY(){var e,t,n=[],r={},a=String;for(fX=hX.start,lY("{");!fY("}");)t="$"+((e=vY()).key.type===EX?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?sY({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),fY("}")||lY(",");return lY("}"),function(e){var t=new jX("ObjectExpression");return t.properties=e,t}(n)}var gY={if:1};function bY(){var e,t,n;if(fY("("))return function(){var e;return lY("("),e=jY(),lY(")"),e}();if(fY("["))return hY();if(fY("{"))return mY();if(e=hX.type,fX=hX.start,3===e||gY[hX.value])n=aY(eY().value);else if(8===e||6===e)hX.octal&&sY(hX,NX),n=iY(eY());else{if(4===e)throw new Error(DX);1===e?((t=eY()).value="true"===t.value,n=iY(t)):5===e?((t=eY()).value=null,n=iY(t)):fY("/")||fY("/=")?(n=iY(JX()),tY()):cY(eY())}return n}function yY(){var e=[];if(lY("("),!fY(")"))for(;fX<dX&&(e.push(SY()),!fY(")"));)lY(",");return lY(")"),e}function xY(){return lY("."),function(){var e;return fX=hX.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=eY())||cY(e),aY(e.value)}()}function _Y(){var e;return lY("["),e=jY(),lY("]"),e}function wY(){var e=function(){var e;for(e=bY();;)if(fY("."))e=oY(".",e,xY());else if(fY("("))e=rY(e,yY());else{if(!fY("["))break;e=oY("[",e,_Y())}return e}();if(7===hX.type&&(fY("++")||fY("--")))throw new Error(DX);return e}function kY(){var e,t;if(7!==hX.type&&4!==hX.type)t=wY();else{if(fY("++")||fY("--"))throw new Error(DX);if(fY("+")||fY("-")||fY("~")||fY("!"))e=eY(),t=kY(),t=function(e,t){var n=new jX("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(dY("delete")||dY("void")||dY("typeof"))throw new Error(DX);t=wY()}}return t}function OY(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function SY(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=hX,s=kY(),0===(a=OY(r=hX)))return s;for(r.prec=a,eY(),t=[e,hX],i=[s,r,o=kY()];(a=OY(hX))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=nY(u,s,o),i.push(n);(r=eY()).prec=a,i.push(r),t.push(hX),n=kY(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=nY(i[c-1].value,i[c-2],n),c-=2;return n}(),fY("?")&&(eY(),t=SY(),lY(":"),e=function(e,t,n){var r=new jX("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,SY())),e}function jY(){var e=SY();if(fY(","))throw new Error(DX);return e}var EY={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},CY=function(e){function t(t,n,r){return function(a){return function(t,n,r,a){var i=e(n[0]);return r&&(i=r+"("+i+")",0===r.lastIndexOf("new ",0)&&(i="("+i+")")),i+"."+t+(a<0?"":0===a?"()":"("+n.slice(1).map(e).join(",")+")")}(t,a,n,r)}}var n="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&OH("Missing arguments to clamp function."),t.length>3&&OH("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),join:t("join",null),indexof:t("indexOf",null),lastindexof:t("lastIndexOf",null),slice:t("slice",null),reverse:function(t){return"("+e(t[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),replace:t("replace",r),trim:t("trim",r,0),regexp:a,test:t("test",a),if:function(t){t.length<3&&OH("Missing arguments to if function."),t.length>3&&OH("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};function AY(e,t,n,r){t[0].type!==vX&&OH("First argument to data functions must be a string literal.");var a=t[0].value,i=":"+a;if(!GH(i,r))try{r[i]=n.getData(a).tuplesRef()}catch(o){}}function TY(e,t,n,r){if(t[0].type===vX)NY(n,r,t[0].value);else for(e in n.scales)NY(n,r,e)}function NY(e,t,n){var r="%"+n;if(!GH(t,r))try{t[r]=e.scaleRef(n)}catch(a){}}function MY(e,t){var n;return UH(e)?e:YH(e)?(n=t.scales[e])&&n.value:void 0}function DY(e,t,n){t.__bandwidth=function(e){return e&&e.bandwidth?e.bandwidth():0},n._bandwidth=TY,n._range=TY,n._scale=TY;var r=function(t){return"_["+(t.type===vX?ZH("%"+t.value):ZH("%")+"+"+e(t))+"]"};return{_bandwidth:function(e){return"this.__bandwidth(".concat(r(e[0]),")")},_range:function(e){return"".concat(r(e[0]),".range()")},_scale:function(t){return"".concat(r(t[0]),"(").concat(e(t[1]),")")}}}var IY,FY,RY,PY,LY,BY=new Lx,zY=new Lx,UY={point:s_,lineStart:s_,lineEnd:s_,polygonStart:function(){BY=new Lx,UY.lineStart=WY,UY.lineEnd=VY},polygonEnd:function(){var e=+BY;zY.add(e<0?Gx+e:e),this.lineStart=this.lineEnd=this.point=s_},sphere:function(){zY.add(Gx)}};function WY(){UY.point=GY}function VY(){qY(IY,FY)}function GY(e,t){UY.point=qY,IY=e,FY=t,RY=e*=Hx,PY=$x(t=(t*=Hx)/2+Vx),LY=n_(t)}function qY(e,t){var n=(e*=Hx)-RY,r=n>=0?1:-1,a=r*n,i=$x(t=(t*=Hx)/2+Vx),o=n_(t),u=LY*o,s=PY*i+u*$x(a),c=u*r*n_(a);BY.add(Kx(c,s)),RY=e,PY=i,LY=o}var HY,XY,YY,KY,$Y,ZY,JY,QY,eK,tK,nK,rK={point:aK,lineStart:oK,lineEnd:uK,polygonStart:function(){rK.point=sK,rK.lineStart=cK,rK.lineEnd=lK,eK=new Lx,UY.polygonStart()},polygonEnd:function(){UY.polygonEnd(),rK.point=aK,rK.lineStart=oK,rK.lineEnd=uK,BY<0?(HY=-(YY=180),XY=-(KY=90)):eK>Bx?KY=90:eK<-1e-6&&(XY=-90),nK[0]=HY,nK[1]=YY},sphere:function(){HY=-(YY=180),XY=-(KY=90)}};function aK(e,t){tK.push(nK=[HY=e,YY=e]),t<XY&&(XY=t),t>KY&&(KY=t)}function iK(e,t){var n=mw([e*Hx,t*Hx]);if(QY){var r=bw(QY,n),a=bw([r[1],-r[0],0],r);_w(a),a=vw(a);var i,o=e-$Y,u=o>0?1:-1,s=a[0]*qx*u,c=Xx(o)>180;c^(u*$Y<s&&s<u*e)?(i=a[1]*qx)>KY&&(KY=i):c^(u*$Y<(s=(s+360)%360-180)&&s<u*e)?(i=-a[1]*qx)<XY&&(XY=i):(t<XY&&(XY=t),t>KY&&(KY=t)),c?e<$Y?fK(HY,e)>fK(HY,YY)&&(YY=e):fK(e,YY)>fK(HY,YY)&&(HY=e):YY>=HY?(e<HY&&(HY=e),e>YY&&(YY=e)):e>$Y?fK(HY,e)>fK(HY,YY)&&(YY=e):fK(e,YY)>fK(HY,YY)&&(HY=e)}else tK.push(nK=[HY=e,YY=e]);t<XY&&(XY=t),t>KY&&(KY=t),QY=n,$Y=e}function oK(){rK.point=iK}function uK(){nK[0]=HY,nK[1]=YY,rK.point=aK,QY=null}function sK(e,t){if(QY){var n=e-$Y;eK.add(Xx(n)>180?n+(n>0?360:-360):n)}else ZY=e,JY=t;UY.point(e,t),iK(e,t)}function cK(){UY.lineStart()}function lK(){sK(ZY,JY),UY.lineEnd(),Xx(eK)>Bx&&(HY=-(YY=180)),nK[0]=HY,nK[1]=YY,QY=null}function fK(e,t){return(t-=e)<0?t+360:t}function dK(e,t){return e[0]-t[0]}function hK(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var pK,vK,mK,gK,bK,yK,xK,_K,wK,kK,OK,SK,jK,EK,CK,AK,TK={sphere:s_,point:NK,lineStart:DK,lineEnd:RK,polygonStart:function(){TK.lineStart=PK,TK.lineEnd=LK},polygonEnd:function(){TK.lineStart=DK,TK.lineEnd=RK}};function NK(e,t){e*=Hx;var n=$x(t*=Hx);MK(n*$x(e),n*n_(e),n_(t))}function MK(e,t,n){++pK,mK+=(e-mK)/pK,gK+=(t-gK)/pK,bK+=(n-bK)/pK}function DK(){TK.point=IK}function IK(e,t){e*=Hx;var n=$x(t*=Hx);EK=n*$x(e),CK=n*n_(e),AK=n_(t),TK.point=FK,MK(EK,CK,AK)}function FK(e,t){e*=Hx;var n=$x(t*=Hx),r=n*$x(e),a=n*n_(e),i=n_(t),o=Kx(a_((o=CK*i-AK*a)*o+(o=AK*r-EK*i)*o+(o=EK*a-CK*r)*o),EK*r+CK*a+AK*i);vK+=o,yK+=o*(EK+(EK=r)),xK+=o*(CK+(CK=a)),_K+=o*(AK+(AK=i)),MK(EK,CK,AK)}function RK(){TK.point=NK}function PK(){TK.point=BK}function LK(){zK(SK,jK),TK.point=NK}function BK(e,t){SK=e,jK=t,e*=Hx,t*=Hx,TK.point=zK;var n=$x(t);EK=n*$x(e),CK=n*n_(e),AK=n_(t),MK(EK,CK,AK)}function zK(e,t){e*=Hx;var n=$x(t*=Hx),r=n*$x(e),a=n*n_(e),i=n_(t),o=CK*i-AK*a,u=AK*r-EK*i,s=EK*a-CK*r,c=Qx(o,u,s),l=u_(c),f=c&&-l/c;wK.add(f*o),kK.add(f*u),OK.add(f*s),vK+=l,yK+=l*(EK+(EK=r)),xK+=l*(CK+(CK=a)),_K+=l*(AK+(AK=i)),MK(EK,CK,AK)}function UK(e,t){return function(n,r,a){if(n){var i=MY(n,(a||this).context);return i&&i.path[e](r)}return t(r)}}var WK=UK("area",(function(e){return zY=new Lx,Fx(e,UY),2*zY})),VK=UK("bounds",(function(e){var t,n,r,a,i,o,u;if(KY=YY=-(HY=XY=1/0),tK=[],Fx(e,rK),n=tK.length){for(tK.sort(dK),t=1,i=[r=tK[0]];t<n;++t)hK(r,(a=tK[t])[0])||hK(r,a[1])?(fK(r[0],a[1])>fK(r[0],r[1])&&(r[1]=a[1]),fK(a[0],r[1])>fK(r[0],r[1])&&(r[0]=a[0])):i.push(r=a);for(o=-1/0,t=0,r=i[n=i.length-1];t<=n;r=a,++t)a=i[t],(u=fK(r[1],a[0]))>o&&(o=u,HY=a[0],YY=r[1])}return tK=nK=null,HY===1/0||XY===1/0?[[NaN,NaN],[NaN,NaN]]:[[HY,XY],[YY,KY]]})),GK=UK("centroid",(function(e){pK=vK=mK=gK=bK=yK=xK=_K=0,wK=new Lx,kK=new Lx,OK=new Lx,Fx(e,TK);var t=+wK,n=+kK,r=+OK,a=Qx(t,n,r);return a<zx&&(t=yK,n=xK,r=_K,vK<Bx&&(t=mK,n=gK,r=bK),(a=Qx(t,n,r))<zx)?[NaN,NaN]:[Kx(n,t)*qx,u_(r/a)*qx]}));function qK(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function HK(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function XK(e){var t=Is(e);return.2126*HK(t.r)+.7152*HK(t.g)+.0722*HK(t.b)}function YK(e,t){return e===t||e!==e&&t!==t||(AH(e)?!(!AH(t)||e.length!==t.length)&&function(e,t){for(var n=0,r=e.length;n<r;++n)if(!YK(e[n],t[n]))return!1;return!0}(e,t):!(!TH(e)||!TH(t))&&KK(e,t))}function KK(e,t){for(var n in e)if(!YK(e[n],t[n]))return!1;return!0}function $K(e){return function(t){return KK(e,t)}}var ZK,JK;function QK(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}var e$="linear",t$="log",n$="pow",r$="sqrt",a$="symlog",i$="time",o$="utc",u$="sequential",s$="diverging",c$="quantile",l$="quantize",f$="threshold",d$="continuous",h$="discrete",p$="discretizing",v$="interpolating",m$="temporal";function g$(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=QK(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return g$().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function b$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return b$(t())},e}var y$=Array.prototype.map;function x$(e){return y$.call(e,MH)}var _$=Array.prototype.slice;var w$={};function k$(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=QH(zH(n)),r}function O$(e,t,n){return arguments.length>1?(w$[e]=k$(e,t,n),this):S$(e)?w$[e]:void 0}function S$(e){return GH(w$,e)}function j$(e,t){var n=w$[e];return n&&n.metadata[t]}function E$(e){return j$(e,h$)}O$("identity",Sc),O$(e$,Oc,d$),O$(t$,Ic,[d$,t$]),O$(n$,Bc,d$),O$(r$,zc,d$),O$(a$,Gc,d$),O$(i$,cl,[d$,m$]),O$(o$,ml,[d$,m$]),O$(u$,yl,[d$,v$]),O$("".concat(u$,"-").concat(e$),yl,[d$,v$]),O$("".concat(u$,"-").concat(t$),xl,[d$,v$,t$]),O$("".concat(u$,"-").concat(n$),wl,[d$,v$]),O$("".concat(u$,"-").concat(r$),kl,[d$,v$]),O$("".concat(u$,"-").concat(a$),_l,[d$,v$]),O$("".concat(s$,"-").concat(e$),jl,[d$,v$]),O$("".concat(s$,"-").concat(t$),El,[d$,v$,t$]),O$("".concat(s$,"-").concat(n$),Al,[d$,v$]),O$("".concat(s$,"-").concat(r$),Tl,[d$,v$]),O$("".concat(s$,"-").concat(a$),Cl,[d$,v$]),O$(c$,Nl,[p$,c$]),O$(l$,Ml,p$),O$(f$,Dl,p$),O$("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=x$(e),r):t.slice()},r.range=function(e){return arguments.length?(n=_$.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],NH(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[h$,p$]),O$("ordinal",ss,h$),O$("band",g$,h$),O$("point",(function(){return b$(g$().paddingInner(1))}),h$);var C$=["clamp","base","constant","exponent"];function A$(e,t,n){return Ol(function(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function T$(e,t,n){var r,a,i,o,u=n-t;return u&&Number.isFinite(u)?(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),i=O$(a)().domain([t,n]).range([0,1]),C$.forEach((function(t){return e[t]?i[t](e[t]()):0})),i):UH(o=.5)?o:function(){return o}}function N$(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function M$(e,t){for(var n in e)I$(n,t(e[n]))}var D$={};function I$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(D$[e]=t,this):D$[e]}M$({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},N$),M$({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return A$(N$(e))}));var F$=function(e){return AH(e)?e.map((function(e){return String(e)})):String(e)},R$=function(e,t){return e[1]-t[1]},P$=function(e,t){return t[1]-e[1]};function L$(e,t){return e.bins?function(e,t,n){var r=e.range(),a=r[0],i=NH(r),o=R$;if(a>i&&(r=i,i=a,a=r,o=P$),a=Math.floor(a),i=Math.ceil(i),t=t.map((function(t){return[t,e(t)]})).filter((function(e){return a<=e[1]&&e[1]<=i})).sort(o).map((function(e){return e[0]})),n>0&&t.length>1){for(var u=[t[0],NH(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=u)}return t}(e,e.bins):e.ticks?e.ticks(t):e.domain()}function B$(e,t,n,r,a,i){var o=t.type,u=F$;if(o===i$||a===i$)u=e.timeFormat(r);else if(o===o$||a===o$)u=e.utcFormat(r);else if(j$(o,t$)){var s=e.formatFloat(r);if(i||t.bins)u=s;else{var c=z$(t,n,!1);u=function(e){return c(e)?s(e):""}}}else if(t.tickFormat){var l=t.domain();u=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(u=e.format(r));return u}function z$(e,t,n){var r=L$(e,t),a=e.base(),i=Math.log(a),o=Math.max(1,a*t/r.length),u=function(e){var t=e/Math.pow(a,Math.round(Math.log(e)/i));return t*a<a-.5&&(t*=a),t<=o};return n?r.filter(u):u}var U$=(ZK={},Object(go.a)(ZK,c$,"quantiles"),Object(go.a)(ZK,l$,"thresholds"),Object(go.a)(ZK,f$,"domain"),ZK),W$=(JK={},Object(go.a)(JK,c$,"quantiles"),Object(go.a)(JK,l$,"domain"),JK);function V$(e,t){return e.bins?function(e){var t=e.slice(0,-1);return t.max=NH(e),t}(e.bins):e.type===t$?z$(e,t,!0):U$[e.type]?function(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[U$[e.type]]()):L$(e,t)}function G$(e,t,n,r,a,i,o){var u=W$[t.type]&&i!==i$&&i!==o$?function(e,t,n){var r,a=t[W$[t.type]](),i=a.length,o=i>1?a[1]-a[0]:a[0];for(r=1;r<i;++r)o=Math.min(o,a[r]-a[r-1]);return e.formatSpan(0,o,30,n)}(e,t,a):B$(e,t,n,a,i,o);return"symbol"===r&&function(e){return U$[e.type]||e.bins}(t)?q$(u):"discrete"===r?X$(u):Y$(u)}var q$=function(e){return function(t,n,r){var a=H$(r[n+1],H$(r.max,1/0)),i=K$(t,e),o=K$(a,e);return i&&o?i+" \u2013 "+o:o?"< "+o:"\u2265 "+i}},H$=function(e,t){return null!=e?e:t},X$=function(e){return function(t,n){return n?e(t):null}},Y$=function(e){return function(t){return e(t)}},K$=function(e,t){return Number.isFinite(e)?t(e):null};function $$(e,t,n,r){var a=r||t.type;return YH(n)&&j$(a,m$)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||a!==i$?n||a!==o$?G$(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function Z$(e,t,n){n=n||{};var r=Math.max(3,n.maxlen||7),a=$$(e,t,n.format,n.formatType);if(j$(t.type,p$)){var i=V$(t).slice(1).map(a),o=i.length;return"".concat(o," boundar").concat(1===o?"y":"ies",": ").concat(i.join(", "))}if(E$(t.type)){var u=t.domain(),s=u.length,c=s>r?u.slice(0,r-2).map(a).join(", ")+", ending with "+u.slice(-1).map(a):u.map(a).join(", ");return"".concat(s," value").concat(1===s?"":"s",": ").concat(c)}var l=t.domain();return"values from ".concat(a(l[0])," to ").concat(a(NH(l)))}function J$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Q$(e){this._context=e}Q$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:J$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:J$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var eZ=function(){};function tZ(e){this._context=e}tZ.prototype={areaStart:eZ,areaEnd:eZ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:J$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nZ(e){this._context=e}nZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:J$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rZ(e,t){this._basis=new Q$(e),this._beta=t}rZ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,a=e[0],i=t[0],o=e[n]-a,u=t[n]-i,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(a+r*o),this._beta*t[s]+(1-this._beta)*(i+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var aZ=function e(t){function n(e){return 1===t?new Q$(e):new rZ(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function iZ(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function oZ(e,t){this._context=e,this._k=(1-t)/6}oZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:iZ(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:iZ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var uZ=function e(t){function n(e){return new oZ(e,t)}return n.tension=function(t){return e(+t)},n}(0);function sZ(e,t){this._context=e,this._k=(1-t)/6}sZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:iZ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cZ=function e(t){function n(e){return new sZ(e,t)}return n.tension=function(t){return e(+t)},n}(0);function lZ(e,t){this._context=e,this._k=(1-t)/6}lZ.prototype={areaStart:eZ,areaEnd:eZ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:iZ(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var fZ=function e(t){function n(e){return new lZ(e,t)}return n.tension=function(t){return e(+t)},n}(0),dZ=Math.abs,hZ=Math.atan2,pZ=Math.cos,vZ=Math.max,mZ=Math.min,gZ=Math.sin,bZ=Math.sqrt,yZ=1e-12,xZ=Math.PI,_Z=xZ/2,wZ=2*xZ;function kZ(e){return e>1?0:e<-1?xZ:Math.acos(e)}function OZ(e){return e>=1?_Z:e<=-1?-_Z:Math.asin(e)}function SZ(e,t,n){var r=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>yZ){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>yZ){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,a,i,o,e._x2,e._y2)}function jZ(e,t){this._context=e,this._alpha=t}jZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:SZ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var EZ=function e(t){function n(e){return t?new jZ(e,t):new oZ(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function CZ(e,t){this._context=e,this._alpha=t}CZ.prototype={areaStart:eZ,areaEnd:eZ,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:SZ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var AZ=function e(t){function n(e){return t?new CZ(e,t):new lZ(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function TZ(e,t){this._context=e,this._alpha=t}TZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:SZ(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var NZ=function e(t){function n(e){return t?new TZ(e,t):new sZ(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function MZ(e){this._context=e}MZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var DZ=function(e){return new MZ(e)};function IZ(e){this._context=e}IZ.prototype={areaStart:eZ,areaEnd:eZ,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function FZ(e){return e<0?-1:1}function RZ(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),u=(i*a+o*r)/(r+a);return(FZ(i)+FZ(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(u))||0}function PZ(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function LZ(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,u=(i-r)/3;e._context.bezierCurveTo(r+u,a+u*t,i-u,o-u*n,i,o)}function BZ(e){this._context=e}function zZ(e){this._context=new UZ(e)}function UZ(e){this._context=e}function WZ(e){this._context=e}function VZ(e){var t,n,r=e.length-1,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}BZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LZ(this,this._t0,PZ(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LZ(this,PZ(this,n=RZ(this,e,t)),n);break;default:LZ(this,this._t0,n=RZ(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(zZ.prototype=Object.create(BZ.prototype)).point=function(e,t){BZ.prototype.point.call(this,t,e)},UZ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}},WZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=VZ(e),a=VZ(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function GZ(e,t){this._context=e,this._t=t}GZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var qZ=Math.PI,HZ=2*qZ,XZ=1e-6,YZ=HZ-XZ;function KZ(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function $Z(){return new KZ}KZ.prototype=$Z.prototype={constructor:KZ,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,a,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+a)+","+(this._y1=+i)},arcTo:function(e,t,n,r,a){e=+e,t=+t,n=+n,r=+r,a=+a;var i=this._x1,o=this._y1,u=n-e,s=r-t,c=i-e,l=o-t,f=c*c+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>XZ)if(Math.abs(l*u-s*c)>XZ&&a){var d=n-i,h=r-o,p=u*u+s*s,v=d*d+h*h,m=Math.sqrt(p),g=Math.sqrt(f),b=a*Math.tan((qZ-Math.acos((p+f-v)/(2*m*g)))/2),y=b/g,x=b/m;Math.abs(y-1)>XZ&&(this._+="L"+(e+y*c)+","+(t+y*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>c*h)+","+(this._x1=e+x*u)+","+(this._y1=t+x*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,a,i){e=+e,t=+t,i=!!i;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=e+o,c=t+u,l=1^i,f=i?r-a:a-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>XZ||Math.abs(this._y1-c)>XZ)&&(this._+="L"+s+","+c),n&&(f<0&&(f=f%HZ+HZ),f>YZ?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+l+","+(this._x1=s)+","+(this._y1=c):f>XZ&&(this._+="A"+n+","+n+",0,"+ +(f>=qZ)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ZZ=$Z,JZ=function(e){return function(){return e}};function QZ(e){return e.innerRadius}function eJ(e){return e.outerRadius}function tJ(e){return e.startAngle}function nJ(e){return e.endAngle}function rJ(e){return e&&e.padAngle}function aJ(e,t,n,r,a,i,o,u){var s=n-e,c=r-t,l=o-a,f=u-i,d=f*s-l*c;if(!(d*d<yZ))return[e+(d=(l*(t-i)-f*(e-a))/d)*s,t+d*c]}function iJ(e,t,n,r,a,i,o){var u=e-n,s=t-r,c=(o?i:-i)/bZ(u*u+s*s),l=c*s,f=-c*u,d=e+l,h=t+f,p=n+l,v=r+f,m=(d+p)/2,g=(h+v)/2,b=p-d,y=v-h,x=b*b+y*y,_=a-i,w=d*v-p*h,k=(y<0?-1:1)*bZ(vZ(0,_*_*x-w*w)),O=(w*y-b*k)/x,S=(-w*b-y*k)/x,j=(w*y+b*k)/x,E=(-w*b+y*k)/x,C=O-m,A=S-g,T=j-m,N=E-g;return C*C+A*A>T*T+N*N&&(O=j,S=E),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(a/_-1),y11:S*(a/_-1)}}Array.prototype.slice;var oJ=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)};function uJ(e){return e[0]}function sJ(e){return e[1]}var cJ=function(e,t){var n=JZ(!0),r=null,a=DZ,i=null;function o(o){var u,s,c,l=(o=oJ(o)).length,f=!1;for(null==r&&(i=a(c=ZZ())),u=0;u<=l;++u)!(u<l&&n(s=o[u],u,o))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(s,u,o),+t(s,u,o));if(c)return i=null,c+""||null}return e="function"===typeof e?e:void 0===e?uJ:JZ(e),t="function"===typeof t?t:void 0===t?sJ:JZ(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:JZ(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:JZ(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:JZ(!!e),o):n},o.curve=function(e){return arguments.length?(a=e,null!=r&&(i=a(r)),o):a},o.context=function(e){return arguments.length?(null==e?r=i=null:i=a(r=e),o):r},o},lJ=function(e,t,n){var r=null,a=JZ(!0),i=null,o=DZ,u=null;function s(s){var c,l,f,d,h,p=(s=oJ(s)).length,v=!1,m=new Array(p),g=new Array(p);for(null==i&&(u=o(h=ZZ())),c=0;c<=p;++c){if(!(c<p&&a(d=s[c],c,s))===v)if(v=!v)l=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=c-1;f>=l;--f)u.point(m[f],g[f]);u.lineEnd(),u.areaEnd()}v&&(m[c]=+e(d,c,s),g[c]=+t(d,c,s),u.point(r?+r(d,c,s):m[c],n?+n(d,c,s):g[c]))}if(h)return u=null,h+""||null}function c(){return cJ().defined(a).curve(o).context(i)}return e="function"===typeof e?e:void 0===e?uJ:JZ(+e),t="function"===typeof t?t:JZ(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?sJ:JZ(+n),s.x=function(t){return arguments.length?(e="function"===typeof t?t:JZ(+t),r=null,s):e},s.x0=function(t){return arguments.length?(e="function"===typeof t?t:JZ(+t),s):e},s.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:JZ(+e),s):r},s.y=function(e){return arguments.length?(t="function"===typeof e?e:JZ(+e),n=null,s):t},s.y0=function(e){return arguments.length?(t="function"===typeof e?e:JZ(+e),s):t},s.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:JZ(+e),s):n},s.lineX0=s.lineY0=function(){return c().x(e).y(t)},s.lineY1=function(){return c().x(e).y(n)},s.lineX1=function(){return c().x(r).y(t)},s.defined=function(e){return arguments.length?(a="function"===typeof e?e:JZ(!!e),s):a},s.curve=function(e){return arguments.length?(o=e,null!=i&&(u=o(i)),s):o},s.context=function(e){return arguments.length?(null==e?i=u=null:u=o(i=e),s):i},s},fJ={draw:function(e,t){var n=Math.sqrt(t/xZ);e.moveTo(n,0),e.arc(0,0,n,0,wZ)}},dJ=(Math.sqrt(1/3),Math.sin(xZ/10)/Math.sin(7*xZ/10)),hJ=(Math.sin(wZ/10),Math.cos(wZ/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),0);var pJ="p_";function vJ(e){return e&&e.gradient}function mJ(e,t,n){var r=e.gradient,a=e.id,i="radial"===r?pJ:"";return a||(a=e.id="gradient_"+hJ++,"radial"===r?(e.x1=gJ(e.x1,.5),e.y1=gJ(e.y1,.5),e.r1=gJ(e.r1,0),e.x2=gJ(e.x2,.5),e.y2=gJ(e.y2,.5),e.r2=gJ(e.r2,.5),i=pJ):(e.x1=gJ(e.x1,0),e.y1=gJ(e.y1,0),e.x2=gJ(e.x2,1),e.y2=gJ(e.y2,0))),t[a]=e,"url("+(n||"")+"#"+i+a+")"}function gJ(e,t){return null!=e?e:t}var bJ={basis:{curve:function(e){return new Q$(e)}},"basis-closed":{curve:function(e){return new tZ(e)}},"basis-open":{curve:function(e){return new nZ(e)}},bundle:{curve:aZ,tension:"beta",value:.85},cardinal:{curve:uZ,tension:"tension",value:0},"cardinal-open":{curve:cZ,tension:"tension",value:0},"cardinal-closed":{curve:fZ,tension:"tension",value:0},"catmull-rom":{curve:EZ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:AZ,tension:"alpha",value:.5},"catmull-rom-open":{curve:NZ,tension:"alpha",value:.5},linear:{curve:DZ},"linear-closed":{curve:function(e){return new IZ(e)}},monotone:{horizontal:function(e){return new zZ(e)},vertical:function(e){return new BZ(e)}},natural:{curve:function(e){return new WZ(e)}},step:{curve:function(e){return new GZ(e,.5)}},"step-after":{curve:function(e){return new GZ(e,1)}},"step-before":{curve:function(e){return new GZ(e,0)}}};function yJ(e,t,n){var r=GH(bJ,e)&&bJ[e],a=null;return r&&(a=r.curve||r[t||"vertical"],r.tension&&null!=n&&(a=a[r.tension](n))),a}var xJ={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_J=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function wJ(e){var t,n,r,a,i,o,u,s,c,l,f=[],d=e.slice().replace(_J[0],"###$1").split(_J[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=(t=d[u]).slice(1).trim().replace(_J[2],"$1###$2").replace(_J[3],"$1###$2").split(_J[4]),r=[i=t.charAt(0)],s=0,l=n.length;s<l;++s)(a=+n[s])===a&&r.push(a);if(o=xJ[i.toLowerCase()],r.length-1>o){var h=r.length;for(s=1,f.push([i].concat(r.slice(s,s+=o))),i="M"===i?"L":"m"===i?"l":i;s<h;s+=o)f.push([i].concat(r.slice(s,s+o)))}else f.push(r)}return f}var kJ=Math.PI/180,OJ=Math.PI/2,SJ=2*Math.PI,jJ=Math.sqrt(3)/2,EJ={},CJ={},AJ=[].join;function TJ(e){var t=AJ.call(e);if(CJ[t])return CJ[t];var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],c=e[7],l=c*o,f=-s*u,d=s*o,h=c*u,p=Math.cos(a),v=Math.sin(a),m=Math.cos(i),g=Math.sin(i),b=.5*(i-a),y=Math.sin(.5*b),x=8/3*y*y/Math.sin(b),_=n+p-x*v,w=r+v+x*p,k=n+m,O=r+g,S=k+x*g,j=O-x*m;return CJ[t]=[l*_+f*w,d*_+h*w,l*S+f*j,d*S+h*j,l*k+f*O,d*k+h*O]}var NJ=["l",0,0,0,0,0,0,0];function MJ(e,t,n){var r=NJ[0]=e[0];if("a"===r||"A"===r)NJ[1]=t*e[1],NJ[2]=n*e[2],NJ[3]=e[3],NJ[4]=e[4],NJ[5]=e[5],NJ[6]=t*e[6],NJ[7]=n*e[7];else if("h"===r||"H"===r)NJ[1]=t*e[1];else if("v"===r||"V"===r)NJ[1]=n*e[1];else for(var a=1,i=e.length;a<i;++a)NJ[a]=(a%2==1?t:n)*e[a];return NJ}function DJ(e,t,n,r,a,i){var o,u,s,c,l,f=null,d=0,h=0,p=0,v=0;null==n&&(n=0),null==r&&(r=0),null==a&&(a=1),null==i&&(i=a),e.beginPath&&e.beginPath();for(var m=0,g=t.length;m<g;++m){switch(o=t[m],1===a&&1===i||(o=MJ(o,a,i)),o[0]){case"l":d+=o[1],h+=o[2],e.lineTo(d+n,h+r);break;case"L":d=o[1],h=o[2],e.lineTo(d+n,h+r);break;case"h":d+=o[1],e.lineTo(d+n,h+r);break;case"H":d=o[1],e.lineTo(d+n,h+r);break;case"v":h+=o[1],e.lineTo(d+n,h+r);break;case"V":h=o[1],e.lineTo(d+n,h+r);break;case"m":d+=o[1],h+=o[2],e.moveTo(d+n,h+r);break;case"M":d=o[1],h=o[2],e.moveTo(d+n,h+r);break;case"c":u=d+o[5],s=h+o[6],p=d+o[3],v=h+o[4],e.bezierCurveTo(d+o[1]+n,h+o[2]+r,p+n,v+r,u+n,s+r),d=u,h=s;break;case"C":d=o[5],h=o[6],p=o[3],v=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,p+n,v+r,d+n,h+r);break;case"s":u=d+o[3],s=h+o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,d+o[1]+n,h+o[2]+r,u+n,s+r),p=d+o[1],v=h+o[2],d=u,h=s;break;case"S":u=o[3],s=o[4],p=2*d-p,v=2*h-v,e.bezierCurveTo(p+n,v+r,o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"q":u=d+o[3],s=h+o[4],p=d+o[1],v=h+o[2],e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"Q":u=o[3],s=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,u+n,s+r),d=u,h=s,p=o[1],v=o[2];break;case"t":u=d+o[1],s=h+o[2],null===f[0].match(/[QqTt]/)?(p=d,v=h):"t"===f[0]?(p=2*d-c,v=2*h-l):"q"===f[0]&&(p=2*d-p,v=2*h-v),c=p,l=v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),h=s,p=(d=u)+o[1],v=h+o[2];break;case"T":u=o[1],s=o[2],p=2*d-p,v=2*h-v,e.quadraticCurveTo(p+n,v+r,u+n,s+r),d=u,h=s;break;case"a":IJ(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+h+r]),d+=o[6],h+=o[7];break;case"A":IJ(e,d+n,h+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),d=o[6],h=o[7];break;case"z":case"Z":e.closePath()}f=o}}function IJ(e,t,n,r){for(var a=function(e,t,n,r,a,i,o,u,s){var c=AJ.call(arguments);if(EJ[c])return EJ[c];var l=o*kJ,f=Math.sin(l),d=Math.cos(l),h=d*(u-e)*.5+f*(s-t)*.5,p=d*(s-t)*.5-f*(u-e)*.5,v=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var m=d/n,g=f/n,b=-f/r,y=d/r,x=m*u+g*s,_=b*u+y*s,w=m*e+g*t,k=b*e+y*t,O=1/((w-x)*(w-x)+(k-_)*(k-_))-.25;O<0&&(O=0);var S=Math.sqrt(O);i==a&&(S=-S);var j=.5*(x+w)-S*(k-_),E=.5*(_+k)+S*(w-x),C=Math.atan2(_-E,x-j),A=Math.atan2(k-E,w-j)-C;A<0&&1===i?A+=SJ:A>0&&0===i&&(A-=SJ);for(var T=Math.ceil(Math.abs(A/(OJ+.001))),N=[],M=0;M<T;++M){var D=C+M*A/T,I=C+(M+1)*A/T;N[M]=[j,E,D,I,n,r,f,d]}return EJ[c]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),i=0;i<a.length;++i){var o=TJ(a[i]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var FJ=.5773502691896257,RJ={circle:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,SJ)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,a=n/2.5,i=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-i),e.lineTo(a,-i),e.lineTo(0,-n),e.lineTo(-a,-i),e.lineTo(-r,-i),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n,a=r-n*FJ,i=n/4;e.moveTo(0,-r-a),e.lineTo(-i,r-a),e.lineTo(i,r-a),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n,a=r-n*FJ;e.moveTo(0,-r-a),e.lineTo(-n,r-a),e.lineTo(n,r-a),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=jJ*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function PJ(e){return GH(RJ,e)?RJ[e]:function(e){if(!GH(LJ,e)){var t=wJ(e);LJ[e]={draw:function(e,n){DJ(e,t,0,0,Math.sqrt(n)/2)}}}return LJ[e]}(e)}var LJ={};var BJ=.448084975506;function zJ(e){return e.x}function UJ(e){return e.y}function WJ(e){return e.width}function VJ(e){return e.height}function GJ(e){return"function"===typeof e?e:function(){return+e}}function qJ(e,t,n){return Math.max(t,Math.min(e,n))}function HJ(e,t){return null!=e?e:t}var XJ=function(e){return e.x||0},YJ=function(e){return e.y||0},KJ=function(e){return!(!1===e.defined)},$J=function(){var e=QZ,t=eJ,n=JZ(0),r=null,a=tJ,i=nJ,o=rJ,u=null;function s(){var s,c,l=+e.apply(this,arguments),f=+t.apply(this,arguments),d=a.apply(this,arguments)-_Z,h=i.apply(this,arguments)-_Z,p=dZ(h-d),v=h>d;if(u||(u=s=ZZ()),f<l&&(c=f,f=l,l=c),f>yZ)if(p>wZ-yZ)u.moveTo(f*pZ(d),f*gZ(d)),u.arc(0,0,f,d,h,!v),l>yZ&&(u.moveTo(l*pZ(h),l*gZ(h)),u.arc(0,0,l,h,d,v));else{var m,g,b=d,y=h,x=d,_=h,w=p,k=p,O=o.apply(this,arguments)/2,S=O>yZ&&(r?+r.apply(this,arguments):bZ(l*l+f*f)),j=mZ(dZ(f-l)/2,+n.apply(this,arguments)),E=j,C=j;if(S>yZ){var A=OZ(S/l*gZ(O)),T=OZ(S/f*gZ(O));(w-=2*A)>yZ?(x+=A*=v?1:-1,_-=A):(w=0,x=_=(d+h)/2),(k-=2*T)>yZ?(b+=T*=v?1:-1,y-=T):(k=0,b=y=(d+h)/2)}var N=f*pZ(b),M=f*gZ(b),D=l*pZ(_),I=l*gZ(_);if(j>yZ){var F,R=f*pZ(y),P=f*gZ(y),L=l*pZ(x),B=l*gZ(x);if(p<xZ&&(F=aJ(N,M,L,B,R,P,D,I))){var z=N-F[0],U=M-F[1],W=R-F[0],V=P-F[1],G=1/gZ(kZ((z*W+U*V)/(bZ(z*z+U*U)*bZ(W*W+V*V)))/2),q=bZ(F[0]*F[0]+F[1]*F[1]);E=mZ(j,(l-q)/(G-1)),C=mZ(j,(f-q)/(G+1))}}k>yZ?C>yZ?(m=iJ(L,B,N,M,f,C,v),g=iJ(R,P,D,I,f,C,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),C<j?u.arc(m.cx,m.cy,C,hZ(m.y01,m.x01),hZ(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,C,hZ(m.y01,m.x01),hZ(m.y11,m.x11),!v),u.arc(0,0,f,hZ(m.cy+m.y11,m.cx+m.x11),hZ(g.cy+g.y11,g.cx+g.x11),!v),u.arc(g.cx,g.cy,C,hZ(g.y11,g.x11),hZ(g.y01,g.x01),!v))):(u.moveTo(N,M),u.arc(0,0,f,b,y,!v)):u.moveTo(N,M),l>yZ&&w>yZ?E>yZ?(m=iJ(D,I,R,P,l,-E,v),g=iJ(N,M,L,B,l,-E,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),E<j?u.arc(m.cx,m.cy,E,hZ(m.y01,m.x01),hZ(g.y01,g.x01),!v):(u.arc(m.cx,m.cy,E,hZ(m.y01,m.x01),hZ(m.y11,m.x11),!v),u.arc(0,0,l,hZ(m.cy+m.y11,m.cx+m.x11),hZ(g.cy+g.y11,g.cx+g.x11),v),u.arc(g.cx,g.cy,E,hZ(g.y11,g.x11),hZ(g.y01,g.x01),!v))):u.arc(0,0,l,_,x,v):u.lineTo(D,I)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-xZ/2;return[pZ(r)*n,gZ(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:JZ(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:JZ(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:JZ(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:JZ(+e),s):r},s.startAngle=function(e){return arguments.length?(a="function"===typeof e?e:JZ(+e),s):a},s.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:JZ(+e),s):i},s.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:JZ(+e),s):o},s.context=function(e){return arguments.length?(u=null==e?null:e,s):u},s}().startAngle((function(e){return e.startAngle||0})).endAngle((function(e){return e.endAngle||0})).padAngle((function(e){return e.padAngle||0})).innerRadius((function(e){return e.innerRadius||0})).outerRadius((function(e){return e.outerRadius||0})).cornerRadius((function(e){return e.cornerRadius||0})),ZJ=lJ().x(XJ).y1(YJ).y0((function(e){return(e.y||0)+(e.height||0)})).defined(KJ),JJ=lJ().y(YJ).x1(XJ).x0((function(e){return(e.x||0)+(e.width||0)})).defined(KJ),QJ=cJ().x(XJ).y(YJ).defined(KJ),eQ=function(){var e=zJ,t=UJ,n=WJ,r=VJ,a=GJ(0),i=a,o=a,u=a,s=null;function c(c,l,f){var d,h=null!=l?l:+e.call(this,c),p=null!=f?f:+t.call(this,c),v=+n.call(this,c),m=+r.call(this,c),g=Math.min(v,m)/2,b=qJ(+a.call(this,c),0,g),y=qJ(+i.call(this,c),0,g),x=qJ(+o.call(this,c),0,g),_=qJ(+u.call(this,c),0,g);if(s||(s=d=ZZ()),b<=0&&y<=0&&x<=0&&_<=0)s.rect(h,p,v,m);else{var w=h+v,k=p+m;s.moveTo(h+b,p),s.lineTo(w-y,p),s.bezierCurveTo(w-BJ*y,p,w,p+BJ*y,w,p+y),s.lineTo(w,k-_),s.bezierCurveTo(w,k-BJ*_,w-BJ*_,k,w-_,k),s.lineTo(h+x,k),s.bezierCurveTo(h+BJ*x,k,h,k-BJ*x,h,k-x),s.lineTo(h,p+b),s.bezierCurveTo(h,p+BJ*b,h+BJ*b,p,h+b,p),s.closePath()}if(d)return s=null,d+""||null}return c.x=function(t){return arguments.length?(e=GJ(t),c):e},c.y=function(e){return arguments.length?(t=GJ(e),c):t},c.width=function(e){return arguments.length?(n=GJ(e),c):n},c.height=function(e){return arguments.length?(r=GJ(e),c):r},c.cornerRadius=function(e,t,n,r){return arguments.length?(a=GJ(e),i=null!=t?GJ(t):a,u=null!=n?GJ(n):a,o=null!=r?GJ(r):i,c):a},c.context=function(e){return arguments.length?(s=null==e?null:e,c):s},c}().x(XJ).y(YJ).width((function(e){return e.width||0})).height((function(e){return e.height||0})).cornerRadius((function(e){return HJ(e.cornerRadiusTopLeft,e.cornerRadius)||0}),(function(e){return HJ(e.cornerRadiusTopRight,e.cornerRadius)||0}),(function(e){return HJ(e.cornerRadiusBottomRight,e.cornerRadius)||0}),(function(e){return HJ(e.cornerRadiusBottomLeft,e.cornerRadius)||0})),tQ=function(e,t){var n=null;function r(){var r;if(n||(n=r=ZZ()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"===typeof e?e:JZ(e||fJ),t="function"===typeof t?t:JZ(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"===typeof t?t:JZ(t),r):e},r.size=function(e){return arguments.length?(t="function"===typeof e?e:JZ(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((function(e){return PJ(e.shape||"circle")})).size((function(e){return HJ(e.size,64)})),nQ=function(){var e,t,n,r,a,i,o,u,s=null;function c(e,t,n){var r=n/2;if(a){var c=o-t,l=e-i;if(c||l){var f=Math.sqrt(c*c+l*l),d=(c/=f)*u,h=(l/=f)*u,p=Math.atan2(l,c);s.moveTo(i-d,o-h),s.lineTo(e-c*r,t-l*r),s.arc(e,t,r,p-Math.PI,p),s.lineTo(i+d,o+h),s.arc(i,o,u,p,p+Math.PI)}else s.arc(e,t,r,0,SJ);s.closePath()}else a=1;i=e,o=t,u=r}function l(i){var o,u,l,f=i.length,d=!1;for(null==s&&(s=l=ZZ()),o=0;o<=f;++o)!(o<f&&r(u=i[o],o,i))===d&&(d=!d)&&(a=0),d&&c(+e(u,o,i),+t(u,o,i),+n(u,o,i));if(l)return s=null,l+""||null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(e){return arguments.length?(t=e,l):t},l.size=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(r=e,l):r},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}().x(XJ).y(YJ).defined(KJ).size((function(e){return e.size||1}));function rQ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function aQ(e,t,n,r){return eQ.context(e)(t,n,r)}var iQ=1;function oQ(e,t,n){var r=t.clip,a=e._defs,i=t.clip_id||(t.clip_id="clip"+iQ++),o=a.clipping[i]||(a.clipping[i]={id:i});return UH(r)?o.path=r(null):rQ(n)?o.path=aQ(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+i+")"}function uQ(e){this.clear(),e&&this.union(e)}function sQ(e){this.mark=e,this.bounds=this.bounds||new uQ}function cQ(e){sQ.call(this,e),this.items=this.items||[]}function lQ(e){this._pending=0,this._loader=e||Object(an.e)()}function fQ(e){e._pending+=1}function dQ(e){e._pending-=1}function hQ(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){var r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}uQ.prototype={clone:function(){return new uQ(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var r=this.x1,a=this.y1,i=this.x2,o=this.y2,u=Math.cos(e),s=Math.sin(e),c=t-t*u+n*s,l=n-t*s-n*u;return[u*r-s*a+c,s*r+u*a+l,u*r-s*o+c,s*r+u*o+l,u*i-s*a+c,s*i+u*a+l,u*i-s*o+c,s*i+u*o+l]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},qH(cQ,sQ),lQ.prototype={pending:function(){return this._pending},sanitizeURL:function(e){var t=this;return fQ(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return dQ(t),e})).catch((function(){return dQ(t),null}))},loadImage:function(e){var t=this,n=es();return fQ(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var a=new n,i=GH(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=i&&(a.crossOrigin=i),a.onload=function(){return dQ(t)},a.onerror=function(){return dQ(t)},a.src=r,a})).catch((function(e){return dQ(t),{complete:!1,width:0,height:0,src:e&&e.url||""}}))},ready:function(){var e=this;return new Promise((function(t){!function n(r){e.pending()?setTimeout((function(){n(!0)}),10):t(r)}(!1)}))}};var pQ,vQ,mQ,gQ,bQ,yQ,xQ,_Q,wQ=SJ-1e-8,kQ=function(e,t){return pQ.add(e,t)},OQ=function(e,t){return kQ(vQ=e,mQ=t)},SQ=function(e){return kQ(e,pQ.y1)},jQ=function(e){return kQ(pQ.x1,e)},EQ=function(e,t){return bQ*e+xQ*t},CQ=function(e,t){return yQ*e+_Q*t},AQ=function(e,t){return kQ(EQ(e,t),CQ(e,t))},TQ=function(e,t){return OQ(EQ(e,t),CQ(e,t))};function NQ(e,t){return pQ=e,t?(gQ=t*kJ,bQ=_Q=Math.cos(gQ),yQ=Math.sin(gQ),xQ=-yQ):(bQ=_Q=1,gQ=yQ=xQ=0),MQ}var MQ={beginPath:function(){},closePath:function(){},moveTo:TQ,lineTo:TQ,rect:function(e,t,n,r){gQ?(AQ(e+n,t),AQ(e+n,t+r),AQ(e,t+r),TQ(e,t)):(kQ(e+n,t+r),OQ(e,t))},quadraticCurveTo:function(e,t,n,r){var a=EQ(e,t),i=CQ(e,t),o=EQ(n,r),u=CQ(n,r);DQ(vQ,a,o,SQ),DQ(mQ,i,u,jQ),OQ(o,u)},bezierCurveTo:function(e,t,n,r,a,i){var o=EQ(e,t),u=CQ(e,t),s=EQ(n,r),c=CQ(n,r),l=EQ(a,i),f=CQ(a,i);IQ(vQ,o,s,l,SQ),IQ(mQ,u,c,f,jQ),OQ(l,f)},arc:function(e,t,n,r,a,i){if(r+=gQ,a+=gQ,vQ=n*Math.cos(a)+e,mQ=n*Math.sin(a)+t,Math.abs(a-r)>wQ)kQ(e-n,t-n),kQ(e+n,t+n);else{var o,u,s=function(r){return kQ(n*Math.cos(r)+e,n*Math.sin(r)+t)};if(s(r),s(a),a!==r)if((r%=SJ)<0&&(r+=SJ),(a%=SJ)<0&&(a+=SJ),a<r&&(i=!i,o=r,r=a,a=o),i)for(a-=SJ,o=r-r%OJ,u=0;u<4&&o>a;++u,o-=OJ)s(o);else for(o=r-r%OJ+OJ,u=0;u<4&&o<a;++u,o+=OJ)s(o)}}};function DQ(e,t,n,r){var a=(e-t)/(e+n-2*t);0<a&&a<1&&r(e+(t-e)*a)}function IQ(e,t,n,r,a){var i,o=r-e+3*t-3*n,u=e+n-2*t,s=e-t,c=0,l=0;Math.abs(o)>1e-14?(i=u*u+s*o)>=0&&(c=(-u+(i=Math.sqrt(i)))/o,l=(-u-i)/o):c=.5*s/u,0<c&&c<1&&a(FQ(c,e,t,n,r)),0<l&&l<1&&a(FQ(l,e,t,n,r))}function FQ(e,t,n,r,a){var i=1-e,o=i*i,u=e*e;return o*i*t+3*o*e*n+3*i*u*r+u*e*a}var RQ=(RQ=Qu(1,1))?RQ.getContext("2d"):null,PQ=new uQ;function LQ(e){return function(t,n){if(!RQ)return!0;e(RQ,t),PQ.clear().union(t.bounds).intersect(n).round();for(var r=PQ.x1,a=PQ.y1,i=PQ.x2,o=PQ.y2,u=a;u<=o;++u)for(var s=r;s<=i;++s)if(RQ.isPointInPath(s,u))return!0;return!1}}function BQ(e,t){return t.contains(e.x||0,e.y||0)}function zQ(e,t){var n=e.x||0,r=e.y||0,a=e.width||0,i=e.height||0;return t.intersects(PQ.set(n,r,n+a,r+i))}function UQ(e,t,n,r,a){var i,o,u,s,c=e.x1,l=e.y1,f=e.x2,d=e.y2,h=r-t,p=a-n,v=0,m=1;for(s=0;s<4;++s){if(0===s&&(i=-h,o=-(c-t)),1===s&&(i=h,o=f-t),2===s&&(i=-p,o=-(l-n)),3===s&&(i=p,o=d-n),Math.abs(i)<1e-10&&o<0)return!1;if(u=o/i,i<0){if(u>m)return!1;u>v&&(v=u)}else if(i>0){if(u<v)return!1;u<m&&(m=u)}}return!0}function WQ(e,t){e.globalCompositeOperation=t.blend||"source-over"}function VQ(e,t){return null==e?t:e}function GQ(e,t){for(var n=t.length,r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function qQ(e,t,n){return vJ(n)?function(e,t,n){var r,a=n.width(),i=n.height();if("radial"===t.gradient)r=e.createRadialGradient(n.x1+VQ(t.x1,.5)*a,n.y1+VQ(t.y1,.5)*i,Math.max(a,i)*VQ(t.r1,0),n.x1+VQ(t.x2,.5)*a,n.y1+VQ(t.y2,.5)*i,Math.max(a,i)*VQ(t.r2,.5));else{var o=VQ(t.x1,0),u=VQ(t.y1,0),s=VQ(t.x2,1),c=VQ(t.y2,0);if(o!==s&&u!==c&&a!==i){var l=Qu(Math.ceil(a),Math.ceil(i)),f=l.getContext("2d");return f.scale(a,i),f.fillStyle=GQ(f.createLinearGradient(o,u,s,c),t.stops),f.fillRect(0,0,a,i),e.createPattern(l,"no-repeat")}r=e.createLinearGradient(n.x1+o*a,n.y1+u*i,n.x1+s*a,n.y1+c*i)}return GQ(r,t.stops)}(e,n,t.bounds):n}function HQ(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=qQ(e,t,t.fill),!0)}var XQ=[];function YQ(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=qQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||XQ),e.lineDashOffset=t.strokeDashOffset||0),!0))}function KQ(e,t){return e.zindex-t.zindex||e.index-t.index}function $Q(e){if(!e.zdirty)return e.zitems;var t,n,r,a=e.items,i=[];for(n=0,r=a.length;n<r;++n)(t=a[n]).index=n,t.zindex&&i.push(t);return e.zdirty=!1,e.zitems=i.sort(KQ)}function ZQ(e,t){var n,r,a=e.items;if(a&&a.length){var i=$Q(e);if(i&&i.length){for(n=0,r=a.length;n<r;++n)a[n].zindex||t(a[n]);a=i}for(n=0,r=a.length;n<r;++n)t(a[n])}}function JQ(e,t){var n,r,a=e.items;if(!a||!a.length)return null;var i=$Q(e);for(i&&i.length&&(a=i),r=a.length;--r>=0;)if(n=t(a[r]))return n;if(a===i)for(r=(a=e.items).length;--r>=0;)if(!a[r].zindex&&(n=t(a[r])))return n;return null}function QQ(e){return function(t,n,r){ZQ(n,(function(n){r&&!r.intersects(n.bounds)||e0(e,t,n,n)}))}}function e0(e,t,n,r){var a=null==n.opacity?1:n.opacity;0!==a&&(e(t,r)||(WQ(t,n),n.fill&&HQ(t,n,a)&&t.fill(),n.stroke&&YQ(t,n,a)&&t.stroke()))}function t0(e){return e=e||CH,function(t,n,r,a,i,o){return r*=t.pixelRatio,a*=t.pixelRatio,JQ(n,(function(n){var u=n.bounds;if((!u||u.contains(i,o))&&u)return e(t,n,r,a,i,o)?n:void 0}))}}function n0(e,t){return function(n,r,a,i){var o,u,s=Array.isArray(r)?r[0]:r,c=null==t?s.fill:t,l=s.stroke&&n.isPointInStroke;return l&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!e(n,r)&&(c&&n.isPointInPath(a,i)||l&&n.isPointInStroke(a,i))}}function r0(e){return t0(n0(e))}function a0(e,t){return"translate("+e+","+t+")"}function i0(e){return"rotate("+e+")"}function o0(e){return a0(e.x||0,e.y||0)}function u0(e,t,n){function r(e,n){var r=n.x||0,a=n.y||0,i=n.angle||0;e.translate(r,a),i&&e.rotate(i*=kJ),e.beginPath(),t(e,n),i&&e.rotate(-i),e.translate(-r,-a)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return a0(e.x||0,e.y||0)+(e.angle?" "+i0(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(NQ(e,n.angle),n),hQ(e,n).translate(n.x||0,n.y||0)},draw:QQ(r),pick:r0(r),isect:n||LQ(r)}}var s0=u0("arc",(function(e,t){return $J.context(e)(t)}));function c0(e,t,n){function r(e,n){e.beginPath(),t(e,n)}var a,i=n0(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(NQ(e),r),hQ(e,r[0]))},draw:(a=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||e0(a,e,t.items[0],t.items)}),pick:function(e,t,n,r,a,o){var u=t.items,s=t.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,u,n,r)?u[0]:null)},isect:BQ,tip:n}}var l0=c0("area",(function(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?JJ:ZJ).curve(yJ(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a="horizontal"===e[0].orient?t[1]:t[0],i="horizontal"===e[0].orient?"y":"x",o=e.length,u=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][i]-a))<u&&(u=r,n=e[o]);return n}));function f0(e,t){e.beginPath(),rQ(t)?aQ(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function d0(e){var t=VQ(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function h0(e,t){var n=d0(t);e("d",aQ(null,t,n,n))}function p0(e,t,n,r){var a=d0(t);e.beginPath(),aQ(e,t,(n||0)+a,(r||0)+a)}var v0=n0(p0),m0=n0(p0,!1),g0=n0(p0,!0);var b0={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",o0(t))},bound:function(e,t){if(!t.clip&&t.items)for(var n=t.items,r=n.length,a=0;a<r;++a)e.union(n[a].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),hQ(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){var r=this;ZQ(t,(function(t){var a=t.x||0,i=t.y||0,o=t.strokeForeground,u=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&u&&(p0(e,t,a,i),WQ(e,t),t.fill&&HQ(e,t,u)&&e.fill(),t.stroke&&!o&&YQ(e,t,u)&&e.stroke()),e.save(),e.translate(a,i),t.clip&&f0(e,t),n&&n.translate(-a,-i),ZQ(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,i),e.restore(),o&&t.stroke&&u&&(p0(e,t,a,i),WQ(e,t),YQ(e,t,u)&&e.stroke())}))},pick:function(e,t,n,r,a,i){var o=this;if(t.bounds&&!t.bounds.contains(a,i)||!t.items)return null;var u=n*e.pixelRatio,s=r*e.pixelRatio;return JQ(t,(function(c){var l,f,d,h=c.bounds;if(!h||h.contains(a,i)){f=c.x||0,d=c.y||0;var p=f+(c.width||0),v=d+(c.height||0),m=c.clip;if(!m||!(a<f||a>p||i<d||i>v)){if(e.save(),e.translate(f,d),f=a-f,d=i-d,m&&rQ(c)&&!g0(e,c,u,s))return e.restore(),null;var g=c.strokeForeground,b=!1!==t.interactive;return b&&g&&c.stroke&&m0(e,c,u,s)?(e.restore(),c):(!(l=JQ(c,(function(e){return function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&b&&(c.fill||!g&&c.stroke)&&v0(e,c,u,s)&&(l=c),e.restore(),l||null)}}}))},isect:zQ,content:function(e,t,n){e("clip-path",t.clip?oQ(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),h0(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?h0(e,t):e("d","")}},y0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function x0(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function _0(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function w0(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function k0(e,t){return"center"===e?t/2:"right"===e?t:0}function O0(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var S0={type:"image",tag:"image",nested:!1,attr:function(e,t,n){var r=x0(t,n),a=_0(t,r),i=w0(t,r),o=(t.x||0)-k0(t.align,a),u=(t.y||0)-O0(t.baseline,i);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",y0["xmlns:xlink"],"xlink:href"),e("transform",a0(o,u)),e("width",a),e("height",i),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){var n=t.image,r=_0(t,n),a=w0(t,n),i=(t.x||0)-k0(t.align,r),o=(t.y||0)-O0(t.baseline,a);return e.set(i,o,i+r,o+a)},draw:function(e,t,n){var r=this;ZQ(t,(function(t){if(!n||n.intersects(t.bounds)){var a,i,o,u,s=x0(t,r),c=_0(t,s),l=w0(t,s),f=(t.x||0)-k0(t.align,c),d=(t.y||0)-O0(t.baseline,l);!1!==t.aspect&&(i=s.width/s.height,o=t.width/t.height,i===i&&o===o&&i!==o&&(o<i?(d+=(l-(u=c/i))/2,l=u):(f+=(c-(u=l*i))/2,c=u))),(s.complete||s.toDataURL)&&(WQ(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(s,f,d,c,l))}}))},pick:t0(),isect:CH,get:x0,xOffset:k0,yOffset:O0},j0=c0("line",(function(e,t){var n=t[0],r=n.interpolate||"linear";return QJ.curve(yJ(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,a=Math.pow(e[0].strokeWidth||1,2),i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<a)return e[i];return null}));function E0(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,a=t.y||0,i=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*kJ,s=t.pathCache;s&&s.path===n||((t.pathCache=s=wJ(n)).path=n),u&&e.rotate&&e.translate?(e.translate(r,a),e.rotate(u),DJ(e,s,0,0,i,o),e.rotate(-u),e.translate(-r,-a)):DJ(e,s,r,a,i,o)}var C0={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return a0(e.x||0,e.y||0)+(e.angle?" "+i0(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return E0(NQ(e,t.angle),t)?e.set(0,0,0,0):hQ(e,t,!0)},draw:QQ(E0),pick:r0(E0),isect:LQ(E0)};function A0(e,t){e.beginPath(),aQ(e,t)}var T0={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",aQ(null,t))},bound:function(e,t){var n,r;return hQ(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:QQ(A0),pick:r0(A0),isect:zQ};function N0(e,t,n){var r,a,i,o;return!(!t.stroke||!YQ(e,t,n))&&(r=t.x||0,a=t.y||0,i=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:a,e.beginPath(),e.moveTo(r,a),e.lineTo(i,o),!0)}var M0={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",o0(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return hQ(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){ZQ(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&N0(e,t,r)&&(WQ(e,t),e.stroke())}}))},pick:t0((function(e,t,n,r){return!!e.isPointInStroke&&(N0(e,t,1)&&e.isPointInStroke(n,r))})),isect:function(e,t){var n=e.x||0,r=e.y||0;return UQ(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},D0=u0("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),I0=u0("symbol",(function(e,t){return tQ.context(e)(t)}),BQ),F0=function(e){var t,n,r;e=+e||1e4;var a=function(){t={},n={},r=0},i=function(a,i){return++r>e&&(n=t,t={},r=1),t[a]=i};return a(),{clear:a,has:function(e){return GH(t,e)||GH(n,e)},get:function(e){return GH(t,e)?t[e]:GH(n,e)?i(e,n[e]):void 0},set:function(e,n){return GH(t,e)?t[e]=n:i(e,n)}}}(),R0={height:W0,measureWidth:z0,estimateWidth:L0,width:L0,canvas:P0};function P0(e){R0.width=e&&RQ?z0:L0}function L0(e,t){return B0(q0(e,t),W0(e))}function B0(e,t){return~~(.8*e.length*t)}function z0(e,t){return W0(e)<=0||!(t=q0(e,t))?0:U0(t,X0(e))}function U0(e,t){var n="(".concat(t,") ").concat(e),r=F0.get(n);return void 0===r&&(RQ.font=t,r=RQ.measureText(e).width,F0.set(n,r)),r}function W0(e){return null!=e.fontSize?+e.fontSize||0:11}function V0(e){return null!=e.lineHeight?e.lineHeight:W0(e)+2}function G0(e){return t=e.lineBreak&&e.text&&!AH(e.text)?e.text.split(e.lineBreak):e.text,AH(t)?t.length>1?t:t[0]:t;var t}function q0(e,t){var n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(R0.width===z0){var t=X0(e);return function(e){return U0(e,t)}}var n=W0(e);return function(e){return B0(e,n)}}(e);if(r(t)<n)return t;var a,i=e.ellipsis||"\u2026",o="rtl"===e.dir,u=0,s=t.length;if(n-=r(i),o){for(;u<s;)a=u+s>>>1,r(t.slice(a))>n?u=a+1:s=a;return i+t.slice(u)}for(;u<s;)a=1+(u+s>>>1),r(t.slice(0,a))<n?u=a:s=a-1;return t.slice(0,u)+i}(e,n):n}function H0(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function X0(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+W0(e)+"px "+H0(e,t)}function Y0(e){var t=e.baseline,n=W0(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*V0(e):"line-bottom"===t?.29*n-.5*V0(e):0)}P0(!0);var K0={left:"start",center:"middle",right:"end"},$0=new uQ;function Z0(e){var t,n=e.x||0,r=e.y||0,a=e.radius||0;return a&&(t=(e.theta||0)-OJ,n+=a*Math.cos(t),r+=a*Math.sin(t)),$0.x1=n,$0.y1=r,$0}function J0(e,t,n){var r,a=R0.height(t),i=t.align,o=Z0(t),u=o.x1,s=o.y1,c=t.dx||0,l=(t.dy||0)+Y0(t)-Math.round(.8*a),f=G0(t);if(AH(f)?(a+=V0(t)*(f.length-1),r=f.reduce((function(e,n){return Math.max(e,R0.width(t,n))}),0)):r=R0.width(t,f),"center"===i?c-=r/2:"right"===i&&(c-=r),e.set(c+=u,l+=s,c+r,l+a),t.angle&&!n)e.rotate(t.angle*kJ,u,s);else if(2===n)return e.rotatedPoints(t.angle*kJ,u,s);return e}var Q0={arc:s0,area:l0,group:b0,image:S0,line:j0,path:C0,rect:T0,rule:M0,shape:D0,symbol:I0,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,a=(t.dy||0)+Y0(t),i=Z0(t),o=i.x1,u=i.y1,s=t.angle||0;e("text-anchor",K0[t.align]||"start"),s?(n=a0(o,u)+" "+i0(s),(r||a)&&(n+=" "+a0(r,a))):n=a0(o+r,u+a),e("transform",n)},bound:J0,draw:function(e,t,n){ZQ(t,(function(t){var r,a,i,o,u,s,c,l=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===l||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=X0(t),e.textAlign=t.align||"left",a=(r=Z0(t)).x1,i=r.y1,t.angle&&(e.save(),e.translate(a,i),e.rotate(t.angle*kJ),a=i=0),a+=t.dx||0,i+=(t.dy||0)+Y0(t),s=G0(t),WQ(e,t),AH(s))for(u=V0(t),o=0;o<s.length;++o)c=q0(t,s[o]),t.fill&&HQ(e,t,l)&&e.fillText(c,a,i),t.stroke&&YQ(e,t,l)&&e.strokeText(c,a,i),i+=u;else c=q0(t,s),t.fill&&HQ(e,t,l)&&e.fillText(c,a,i),t.stroke&&YQ(e,t,l)&&e.strokeText(c,a,i);t.angle&&e.restore()}}))},pick:t0((function(e,t,n,r,a,i){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Z0(t),u=o.x1,s=o.y1,c=J0($0,t,1),l=-t.angle*kJ,f=Math.cos(l),d=Math.sin(l),h=f*a-d*i+(u-f*u+d*s),p=d*a+f*i+(s-d*u-f*s);return c.contains(h,p)})),isect:function(e,t){var n=J0($0,e,2);return UQ(t,n[0],n[1],n[2],n[3])||UQ(t,n[0],n[1],n[4],n[5])||UQ(t,n[4],n[5],n[6],n[7])||UQ(t,n[2],n[3],n[6],n[7])}},trail:c0("trail",(function(e,t){return nQ.context(e)(t)}),(function(e,t){for(var n,r,a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<(n=e[a].size||1)*n)return e[a];return null}))};function e1(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function t1(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,a=n.length;r<a;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function n1(e,t,n,r){var a,i=e.childNodes[t];return i&&i.tagName.toLowerCase()===n.toLowerCase()||(a=i||null,i=e1(e.ownerDocument,n,r),e.insertBefore(i,a)),i}function r1(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function a1(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function i1(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function o1(e,t){this._active=null,this._handlers={},this._loader=e||Object(an.e)(),this._tooltip=t||u1}function u1(e,t,n,r){e.element().setAttribute("title",r||"")}function s1(e){this._el=null,this._bgcolor=null,this._loader=new lQ(e)}o1.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){var t=this._handlers,n=[];if(e)n.push.apply(n,Object(mo.a)(t[this.eventName(e)]));else for(var r in t)n.push.apply(n,Object(mo.a)(t[r]));return n},eventName:function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=e1(null,"a");for(var a in t)r.setAttribute(a,t[a]);r.dispatchEvent(n)})).catch((function(){}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var a,i,o=e&&e.mark;if(o&&(a=Q0[o.marktype]).tip){for((i=i1(t,n))[0]-=r[0],i[1]-=r[1];e=e.mark.group;)i[0]-=e.x||0,i[1]-=e.y||0;e=a.tip(o.items,i)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){var t=this.canvas();if(t){for(var n=t.getBoundingClientRect(),r=this._origin,a=e.bounds,i=a.width(),o=a.height(),u=a.x1+r[0]+n.left,s=a.y1+r[1]+n.top;e.mark&&(e=e.mark.group);)u+=e.x||0,s+=e.y||0;return{x:u,y:s,width:i,height:o,left:u,top:s,right:u+i,bottom:s+o}}}},s1.prototype={initialize:function(e,t,n,r,a){return this._el=e,this.resize(t,n,r,a)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var a=n._call;n._ready=n._loader.ready().then((function(e){e&&a(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};var c1="dragenter",l1="dragleave",f1="dragover",d1="mousedown",h1="mousemove",p1="mouseout",v1="mouseover",m1="click",g1="mousewheel",b1="touchstart",y1="touchmove",x1="touchend",_1=h1,w1=p1,k1=m1;function O1(e,t){o1.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function S1(e,t){(function(e){return e===b1||e===y1||e===x1?[b1,y1,x1]:[e]})(t).forEach((function(t){return function(e,t){var n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?function(n){return e[t](n)}:function(n){return e.fire(t,n)}))}(e,t)}))}function j1(e,t,n){return function(r){var a=this._active,i=this.pickEvent(r);i===a||(a&&a.exit||this.fire(n,r),this._active=i,this.fire(t,r)),this.fire(e,r)}}function E1(e){return function(t){this.fire(e,t),this._active=null}}qH(O1,o1,{initialize:function(e,t,n){var r=this;return this._canvas=e&&t1(e,"canvas"),[m1,d1,h1,p1,l1].forEach((function(e){return S1(r,e)})),o1.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",c1,l1,f1,d1,"mouseup",h1,p1,v1,m1,"dblclick","wheel",g1,b1,y1,x1],DOMMouseScroll:function(e){this.fire(g1,e)},mousemove:j1(h1,v1,p1),dragover:j1(f1,c1,l1),mouseout:E1(p1),dragleave:E1(l1),mousedown:function(e){this._down=this._active,this.fire(d1,e)},click:function(e){this._down===this._active&&(this.fire(m1,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(b1,e,!0)},touchmove:function(e){this.fire(y1,e,!0)},touchend:function(e){this.fire(x1,e,!0),this._touch=null},fire:function(e,t,n){var r=n?this._touch:this._active,a=this._handlers[e];if(t.vegaType=e,e===k1&&r&&r.href?this.handleHref(t,r,r.href):e!==_1&&e!==w1||this.handleTooltip(t,r,e!==w1),a)for(var i=0,o=a.length;i<o;++i)a[i].handler.call(this._obj,t,r)},on:function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(S1(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&r.splice(a,1),this},pickEvent:function(e){var t=i1(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,a){var i=this.context();return Q0[e.marktype].pick.call(this,i,e,t,n,r,a)}});var C1="undefined"!==typeof window&&window.devicePixelRatio||1;function A1(e){s1.call(this,e),this._options={},this._redraw=!1,this._dirty=new uQ,this._tempb=new uQ}var T1=s1.prototype;function N1(e,t){o1.call(this,e,t);var n=this;n._hrefHandler=M1(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=M1(n,(function(e,t){n.handleTooltip(e,t,e.type!==w1)}))}qH(A1,s1,{initialize:function(e,t,n,r,a,i){return this._options=i||{},this._canvas=this._options.externalContext?null:Qu(1,1,this._options.type),e&&this._canvas&&(r1(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),T1.initialize.call(this,e,t,n,r,a)},resize:function(e,t,n,r){if(T1.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,a,i){var o="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),s=o?C1:a;for(var c in e.width=t*s,e.height=n*s,i)u[c]=i[c];o&&1!==s&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=s,u.setTransform(s,0,0,s,s*r[0],s*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{var a=this._options.externalContext;a||OH("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){for(var t=this._tempb.clear().union(e.bounds),n=e.mark.group;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){var t,n,r,a=this.context(),i=this._origin,o=this._width,u=this._height,s=this._dirty,c=(t=i,n=o,r=u,(new uQ).set(0,0,n,r).translate(-t[0],-t[1]));a.save();var l=this._redraw||s.empty()?(this._redraw=!1,c.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(a,c.intersect(s),i);return this.clear(-i[0],-i[1],o,u),this.draw(a,e,l),a.restore(),s.clear(),this},draw:function(e,t,n){var r=Q0[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),UH(n)?(e.beginPath(),n(e),e.clip()):f0(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){var a=this._options,i=this.context();"pdf"===a.type||a.externalContext||i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))}});var M1=function(e,t){return function(n){var r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)}};qH(N1,o1,{initialize:function(e,t,n){var r=this._svg;return r&&(r.removeEventListener(k1,this._hrefHandler),r.removeEventListener(_1,this._tooltipHandler),r.removeEventListener(w1,this._tooltipHandler)),this._svg=r=e&&t1(e,"svg"),r&&(r.addEventListener(k1,this._hrefHandler),r.addEventListener(_1,this._tooltipHandler),r.addEventListener(w1,this._tooltipHandler)),o1.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var a={type:e,handler:t,listener:M1(this,t)};(r[n]||(r[n]=[])).push(a),this._svg&&this._svg.addEventListener(n,a.listener)}return this},off:function(e,t){var n=this.eventName(e),r=this._handlers[n],a=this._handlerIndex(r,e,t);return a>=0&&(this._svg&&this._svg.removeEventListener(n,r[a].listener),r.splice(a,1)),this}});var D1="aria-hidden",I1="aria-label",F1="role",R1="aria-roledescription",P1="graphics-object",L1="graphics-symbol",B1=function(e,t,n){var r;return r={},Object(go.a)(r,F1,e),Object(go.a)(r,R1,t),Object(go.a)(r,I1,n||void 0),r},z1=QH(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),U1={axis:{desc:"axis",caption:function(e){var t=e.datum,n=e.orient,r=t.title?H1(e):null,a=e.context,i=a.scales[t.scale].value,o=a.dataflow.locale(),u=i.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(E$(u)?"discrete":u," scale")+" with ".concat(Z$(o,i,e))}},legend:{desc:"legend",caption:function(e){var t=e.datum,n=t.title?H1(e):null,r="".concat(t.type||""," legend").trim(),a=t.scales,i=Object.keys(a),o=e.context,u=o.scales[a[i[0]]].value,s=o.dataflow.locale();return c=r,(c.length?c[0].toUpperCase()+c.slice(1):c)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(e){return(e=e.map((function(e){return e+("fill"===e||"stroke"===e?" color":"")}))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+NH(e)}(i))+" with ".concat(Z$(s,u,e));var c}},"title-text":{desc:"title",caption:function(e){return"Title text '".concat(q1(e),"'")}},"title-subtitle":{desc:"subtitle",caption:function(e){return"Subtitle text '".concat(q1(e),"'")}}},W1={ariaRole:F1,ariaRoleDescription:R1,description:I1};function V1(e,t){var n=!1===t.aria;if(e(D1,n||void 0),n||null==t.description)for(var r in W1)e(W1[r],void 0);else{var a=t.mark.marktype;e(I1,t.description),e(F1,t.ariaRole||("group"===a?P1:L1)),e(R1,t.ariaRoleDescription||"".concat(a," mark"))}}function G1(e){return!1===e.aria?Object(go.a)({},D1,!0):z1[e.role]?null:U1[e.role]?function(e,t){try{var n=e.items[0],r=t.caption||function(){return""};return B1(t.role||L1,t.desc,n.description||r(n))}catch(a){return null}}(e,U1[e.role]):function(e){var t=e.marktype,n="group"===t||"text"===t||e.items.some((function(e){return null!=e.description&&!1!==e.aria}));return B1(n?P1:L1,"".concat(t," mark container"),e.description)}(e)}function q1(e){return zH(e.text).join(" ")}function H1(e){try{return zH(NH(e.items).items[0].text).join(" ")}catch(t){return null}}var X1=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};function Y1(){var e="",t="",n="",r=[],a=function(){return t=n=""},i=function(i){t&&(e+="".concat(t,">").concat(n),a()),r.push(i)},o=function(e,n){return null!=n&&(t+=" ".concat(e,'="').concat(X1(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),u},u={open:function(e){i(e),t="<"+e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var s=0,c=r;s<c.length;s++){var l=c[s];for(var f in l)o(f,l[f])}return u},close:function(){var i=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(i,">"):"/>"):"</".concat(i,">"),a(),u},attr:o,text:function(e){return n+=X1(e),u},toString:function(){return e}};return u}var K1=function(e){return $1(Y1(),e)+""};function $1(e,t){if(e.open(t.tagName),t.hasAttributes())for(var n=t.attributes,r=n.length,a=0;a<r;++a)e.attr(n[a].name,n[a].value);if(t.hasChildNodes())for(var i=t.childNodes,o=i.length,u=0;u<o;u++){var s=i[u];3===s.nodeType?e.text(s.nodeValue):$1(e,s)}return e.close()}var Z1={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},J1={fill:"none","stroke-miterlimit":10},Q1="http://www.w3.org/2000/xmlns/",e2=y0.xmlns;function t2(e){s1.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var n2=s1.prototype;function r2(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function a2(e,t,n){var r,a,i;if("radial"===t.gradient){var o=n1(e,n++,"pattern",e2);d2(o,{id:pJ+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),d2(o=n1(o,0,"rect",e2),{width:1,height:1,fill:"url(".concat(p2(),"#").concat(t.id,")")}),d2(e=n1(e,n++,"radialGradient",e2),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else d2(e=n1(e,n++,"linearGradient",e2),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,a=t.stops.length;r<a;++r)(i=n1(e,r,"stop",e2)).setAttribute("offset",t.stops[r].offset),i.setAttribute("stop-color",t.stops[r].color);return r1(e,r),n}function i2(e,t,n){return(e=n1(e,n,"clipPath",e2)).setAttribute("id",t.id),t.path?n1(e,0,"path",e2).setAttribute("d",t.path):d2(n1(e,0,"rect",e2),{x:0,y:0,width:t.width,height:t.height}),r1(e,1),n+1}function o2(e,t,n,r,a){var i,o=e._svg;if(!o&&(o=e1(i=t.ownerDocument,r,e2),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var u=e1(i,"path",e2);o.appendChild(u),u.__data__=e;var s=e1(i,"g",e2);o.appendChild(s),s.__data__=e;var c=e1(i,"path",e2);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==a||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}qH(t2,s1,{initialize:function(e,t,n,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=n1(e,0,"svg",e2),this._svg.setAttributeNS(Q1,"xmlns",e2),this._svg.setAttributeNS(Q1,"xmlns:xlink",y0["xmlns:xlink"]),this._svg.setAttribute("version",y0.version),this._svg.setAttribute("class","marks"),r1(e,1),this._root=n1(this._svg,0,"g",e2),d2(this._root,J1),r1(this._svg,1)),this.background(this._bgcolor),n2.initialize.call(this,e,t,n,r,a)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),n2.background.apply(this,arguments)},resize:function(e,t,n,r){return n2.resize.call(this,e,t,n,r),this._svg&&(d2(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){var e,t=this._svg,n=this._bgcolor;if(!t)return null;n&&(t.removeAttribute("style"),d2(e=n1(t,0,"rect",e2),{width:this._width,height:this._height,fill:n}));var r=K1(t);return n&&(t.removeChild(e),this._svg.style.setProperty("background-color",n)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),r1(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length||!this._dirtyID)return!0;var t,n,r,a,i,o,u,s=++this._dirtyID;for(i=0,o=e.length;i<o;++i)(n=(t=e[i]).mark).marktype!==r&&(r=n.marktype,a=Q0[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,r2(t,s),n.items.forEach((function(e){e.dirty=s}))),n.zdirty||(t.exit?(a.nested&&n.items.length?(u=n.items[0])._svg&&this._update(a,u._svg,u):t._svg&&(u=t._svg.parentNode)&&u.removeChild(t._svg),t._svg=null):(t=a.nested?n.items[0]:t)._update!==s&&(t._svg&&t._svg.ownerSVGElement?this._update(a,t._svg,t):(this._dirtyAll=!1,r2(t,s)),t._update=s));return!this._dirtyAll},mark:function(e,t,n){var r=this;if(!this.isDirty(t))return t._svg;var a=this._svg,i=Q0[t.marktype],o=!1===t.interactive?"none":null,u="g"===i.tag,s=null,c=0,l=o2(t,e,n,"g",a);l.setAttribute("class",a1(t));var f=G1(t);for(var d in f)h2(l,d,f[d]);u||h2(l,"pointer-events",o),h2(l,"clip-path",t.clip?oQ(this,t,t.group):null);var h=function(e){var t=r.isDirty(e),n=o2(e,l,s,i.tag,a);t&&(r._update(i,n,e),u&&function(e,t,n){t=t.lastChild.previousSibling;var r,a=0;ZQ(n,(function(n){r=e.mark(t,n,r),++a})),r1(t,1+a)}(r,n,e)),s=n,++c};return i.nested?t.items.length&&h(t.items[0]):ZQ(t,h),r1(l,c),l},_update:function(e,t,n){u2=t,s2=t.__values__,V1(l2,n),e.attr(l2,n,this);var r=c2[e.type];r&&r.call(this,e,t,n),u2&&this.style(u2,n)},style:function(e,t){if(null!=t)for(var n in Z1){var r="font"===n?H0(t):t[n];if(r!==s2[n]){var a=Z1[n];null==r?e.removeAttribute(a):(vJ(r)&&(r=mJ(r,this._defs.gradient,p2())),e.setAttribute(a,r+"")),s2[n]=r}}},defs:function(){var e=this._svg,t=this._defs,n=t.el,r=0;for(var a in t.gradient)n||(t.el=n=n1(e,1,"defs",e2)),r=a2(n,t.gradient[a],r);for(var i in t.clipping)n||(t.el=n=n1(e,1,"defs",e2)),r=i2(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):r1(n,r))},_clearDefs:function(){var e=this._defs;e.gradient={},e.clipping={}}});var u2=null,s2=null,c2={group:function(e,t,n){var r=u2=t.childNodes[2];s2=r.__values__,e.foreground(l2,n,this),s2=t.__values__,u2=t.childNodes[1],e.content(l2,n,this);var a=u2=t.childNodes[0];e.background(l2,n,this);var i=!1===n.mark.interactive?"none":null;if(i!==s2.events&&(h2(r,"pointer-events",i),h2(a,"pointer-events",i),s2.events=i),n.strokeForeground&&n.stroke){var o=n.fill;h2(r,"display",null),this.style(a,n),h2(a,"stroke",null),o&&(n.fill=null),s2=r.__values__,this.style(r,n),o&&(n.fill=o),u2=null}else h2(r,"display","none")},image:function(e,t,n){!1===n.smooth?(f2(t,"image-rendering","optimizeSpeed"),f2(t,"image-rendering","pixelated")):f2(t,"image-rendering",null)},text:function(e,t,n){var r,a,i,o,u=G0(n);AH(u)?(r=(a=u.map((function(e){return q0(n,e)}))).join("\n"))!==s2.text&&(r1(t,0),i=t.ownerDocument,o=V0(n),a.forEach((function(e,r){var a=e1(i,"tspan",e2);a.__data__=n,a.textContent=e,r&&(a.setAttribute("x",0),a.setAttribute("dy",o)),t.appendChild(a)})),s2.text=r):(a=q0(n,u))!==s2.text&&(t.textContent=a,s2.text=a),h2(t,"font-family",H0(n)),h2(t,"font-size",W0(n)+"px"),h2(t,"font-style",n.fontStyle),h2(t,"font-variant",n.fontVariant),h2(t,"font-weight",n.fontWeight)}};function l2(e,t,n){t!==s2[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(u2,e,t,n):h2(u2,e,t),s2[e]=t)}function f2(e,t,n){n!==s2[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),s2[t]=n)}function d2(e,t){for(var n in t)h2(e,n,t[n])}function h2(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function p2(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function v2(e){s1.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}qH(v2,s1,{svg:function(){return this._text},_render:function(e){var t=Y1();t.open("svg",WH({},y0,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));var n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",J1,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){var n=this,r=Q0[t.marktype],a=r.tag,i=[V1,r.attr];e.open("g",{class:a1(t),"clip-path":t.clip?oQ(this,t,t.group):null},G1(t),{"pointer-events":"g"!==a&&!1===t.interactive?"none":null});var o=function(o){var u=n.href(o);if(u&&e.open("a",u),e.open(a,n.attr(t,o,i,"g"!==a?a:null)),"text"===a){var s=G0(o);if(AH(s))for(var c={x:0,dy:V0(o)},l=0;l<s.length;++l)e.open("tspan",l?c:null).text(q0(o,s[l])).close();else e.text(q0(o,s))}else if("g"===a){var f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),e.open("path",n.attr(t,o,r.background,"bgrect")).close(),e.open("g",n.attr(t,o,r.content)),ZQ(o,(function(t){return n.mark(e,t)})),e.close(),f&&h?(d&&(o.fill=null),o.stroke=h,e.open("path",n.attr(t,o,r.foreground,"bgrect")).close(),d&&(o.fill=d)):e.open("path",n.attr(t,o,r.foreground,"bgfore")).close()}e.close(),u&&e.close()};return r.nested?t.items&&t.items.length&&o(t.items[0]):ZQ(t,o),e.close()},href:function(e){var t,n=this,r=e.href;if(r){if(t=this._hrefs&&this._hrefs[r])return t;this.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},attr:function(e,t,n,r){var a=this,i={},o=function(e,t,n,r){i[r||e]=t};return Array.isArray(n)?n.forEach((function(e){return e(o,t,a)})):n(o,t,this),r&&function(e,t,n,r,a){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=H0(t),e["font-size"]=W0(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(var i in Z1){var o=t[i],u=Z1[i];("transparent"!==o||"fill"!==u&&"stroke"!==u)&&null!=o&&(vJ(o)&&(o=mJ(o,a.gradient,"")),e[u]=o)}}(i,t,e,r,this._defs),i},defs:function(e){var t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){for(var r in e.open("defs"),t){var a=t[r],i=a.stops;"radial"===a.gradient?(e.open("pattern",{id:pJ+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):e.open("linearGradient",{id:r,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(var o=0;o<i.length;++o)e.open("stop",{offset:i[o].offset,"stop-color":i[o].color}).close();e.close()}for(var u in n){var s=n[u];e.open("clipPath",{id:u}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});var m2={};function g2(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var a=e.items,i=e.marktype,o=a.length,u=0;if("group"===i)for(;u<o;++u)b2(a[u],t,n,r);else for(var s=Q0[i].isect;u<o;++u){var c=a[u];y2(c,t,s)&&r.push(c)}}return r}function b2(e,t,n,r){n&&n(e.mark)&&y2(e,t,Q0.group.isect)&&r.push(e);var a=e.items,i=a&&a.length;if(i){var o=e.x||0,u=e.y||0;t.translate(-o,-u);for(var s=0;s<i;++s)g2(a[s],t,n,r);t.translate(o,u)}return r}function y2(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}m2.canvas=m2.png={renderer:A1,headless:A1,handler:O1},m2.svg={renderer:t2,headless:v2,handler:N1},m2.none={};new uQ;var x2=function(e){return e.data};function _2(e,t){var n=eX.call(t,e);return n.root&&n.root.lookup||{}}var w2=function(){return"undefined"!==typeof window&&window||null};function k2(e,t,n){return e.fields=t||[],e.fname=n,e}function O2(e){return 1===e.length?S2(e[0]):j2(e)}var S2=function(e){return function(t){return t[e]}},j2=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function E2(e){throw Error(e)}function C2(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||E2("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&E2("Access path missing closing bracket: "+e),o&&E2("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function A2(e,t,n){var r=C2(e);return e=1===r.length?r[0]:e,k2((n&&n.get||O2)(r),[e],t||e)}A2("id"),k2((function(e){return e}),[],"identity"),k2((function(){return 0}),[],"zero"),k2((function(){return 1}),[],"one"),k2((function(){return!0}),[],"true"),k2((function(){return!1}),[],"false");var T2=Array.isArray;function N2(e){return e[e.length-1]}function M2(e){return null==e||""===e?null:+e}function D2(e){return null!=e?T2(e)?e:[e]:[]}var I2=Object.prototype.hasOwnProperty;function F2(e,t){return I2.call(e,t)}function R2(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)}function P2(e){return"[object Date]"===Object.prototype.toString.call(e)}var L2,B2="RawCode",z2="Literal",U2="Property",W2="Identifier",V2="ArrayExpression",G2="BinaryExpression",q2="CallExpression",H2="ConditionalExpression",X2="LogicalExpression",Y2="MemberExpression",K2="ObjectExpression",$2="UnaryExpression";function Z2(e){this.type=e}Z2.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case V2:return e.elements;case G2:case X2:return[e.left,e.right];case q2:return[e.callee].concat(e.arguments);case H2:return[e.test,e.consequent,e.alternate];case Y2:return[e.object,e.property];case K2:return e.properties;case U2:return[e.key,e.value];case $2:return[e.argument];case W2:case z2:case B2:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(L2={})[1]="Boolean",L2[2]="<end>",L2[3]="Identifier",L2[4]="Keyword",L2[5]="Null",L2[6]="Numeric",L2[7]="Punctuator",L2[8]="String",L2[9]="RegularExpression";new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");var J2="intersect",Q2="union",e3="index:unit";function t3(e,t){for(var n,r,a=t.fields,i=t.values,o=a.length,u=0;u<o;++u)if((r=a[u]).getter=A2.getter||A2(r.field),P2(n=r.getter(e))&&(n=M2(n)),P2(i[u])&&(i[u]=M2(i[u])),P2(i[u][0])&&(i[u]=i[u].map(M2)),"E"===r.type){if(T2(i[u])?i[u].indexOf(n)<0:n!==i[u])return!1}else if("R"===r.type){if(!R2(n,i[u]))return!1}else if("R-RE"===r.type){if(!R2(n,i[u],!0,!1))return!1}else if("R-E"===r.type){if(!R2(n,i[u],!1,!1))return!1}else if("R-LE"===r.type&&!R2(n,i[u],!1,!0))return!1;return!0}var n3=A2("_vgsid_"),r3=function(e){var t=e,n=e;function r(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return(r=e(t))<(a=n)?-1:r>a?1:r>=a?0:NaN;var r,a}}(e)),{left:r,center:function(e,n,a,i){null==a&&(a=0),null==i&&(i=e.length);var o=r(e,n,a,i-1);return o>a&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}(n3);r3.left,r3.right;var a3={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t},R_union:function(e,t){var n=M2(t[0]),r=M2(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=M2(t[0]),r=M2(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function i3(e,t,n,r){t[0].type!==z2&&E2("First argument to selection functions must be a string literal.");var a=t[0].value,i="unit",o="@unit",u=":"+a;(t.length>=2&&N2(t).value)!==J2||F2(r,o)||(r["@unit"]=n.getData(a).indataRef(n,i)),F2(r,u)||(r[u]=n.getData(a).tuplesRef())}var o3={random:function(){return $r()},cumulativeNormal:ua,cumulativeLogNormal:ha,cumulativeUniform:ya,densityNormal:oa,densityLogNormal:da,densityUniform:ba,quantileNormal:sa,quantileLogNormal:pa,quantileUniform:xa,sampleNormal:ia,sampleLogNormal:fa,sampleUniform:ga,isArray:AH,isBoolean:function(e){return"boolean"===typeof e},isDate:HH,isDefined:function(e){return void 0!==e},isNumber:XH,isObject:TH,isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isString:YH,isTuple:dn,isValid:function(e){return null!=e&&e===e},toBoolean:function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e},toDate:function(e,t){return t=t||JH,null==e||""===e?null:t(e)},toNumber:MH,toString:function(e){return null==e||""===e?null:e+""},flush:function(e,t,n,r,a,i){if(!n&&0!==n)return i;var o,u=+n,s=e[0],c=NH(e);c<s&&(o=s,s=c,c=o),o=Math.abs(t-s);var l=Math.abs(c-t);return o<l&&o<=u?r:l<=u?a:i},lerp:function(e,t){var n=e[0],r=NH(e),a=+t;return a?1===a?r:n+a*(r-n):n},merge:function(){var e=[].slice.call(arguments);return e.unshift({}),WH.apply(null,e)},pad:function(e,t,n,r){var a=n||" ",i=e+"",o=t-i.length;return o<=0?i:"left"===r?KH(a,o)+i:"center"===r?KH(a,~~(o/2))+i+KH(a,Math.ceil(o/2)):i+KH(a,o)},peek:NH,span:$H,inrange:function(e,t,n,r){var a,i=t[0],o=t[t.length-1];return i>o&&(a=i,i=o,o=a),r=void 0===r||r,((n=void 0===n||n)?i<=e:i<e)&&(r?e<=o:e<o)},truncate:function(e,t,n,r){var a=null!=r?r:"\u2026",i=e+"",o=i.length,u=Math.max(0,t-a.length);return o<=t?i:"left"===n?a+i.slice(o-u):"center"===n?i.slice(0,Math.ceil(u/2))+a+i.slice(o-~~(u/2)):i.slice(0,u)+a},rgb:Is,lab:nf,hcl:lf,hsl:Us,luminance:XK,contrast:function(e,t){var n=XK(e),r=XK(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Ba,format:nX,utcFormat:aX,utcParse:oX,utcOffset:Ua.w,utcSequence:Ua.x,timeFormat:rX,timeParse:iX,timeOffset:Ua.q,timeSequence:Ua.r,timeUnitSpecifier:Ua.s,monthFormat:function(e){return sX.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return sX.call(this,e,1,"%b")},dayFormat:function(e){return sX.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return sX.call(this,0,2+e,"%a")},quarter:function(e){return 1+~~(new Date(e).getMonth()/3)},utcquarter:function(e){return 1+~~(new Date(e).getUTCMonth()/3)},week:Ua.A,utcweek:Ua.z,dayofyear:Ua.m,utcdayofyear:Ua.y,warn:function(){return qK(this.context.dataflow,"warn",arguments)},info:function(){return qK(this.context.dataflow,"info",arguments)},debug:function(){return qK(this.context.dataflow,"debug",arguments)},extent:function(e,t){var n,r,a,i,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];o<n&&(null==r||r!==r);r=e[++o]);for(a=i=r;o<n;++o)null!=(r=e[o])&&(r<a&&(a=r),r>i&&(i=r))}else{for(r=t(e[o]);o<n&&(null==r||r!==r);r=t(e[++o]));for(a=i=r;o<n;++o)null!=(r=t(e[o]))&&(r<a&&(a=r),r>i&&(i=r))}return[a,i]},inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];var r=Object(Nr.a)(e,2),a=r[0],i=r[1],o=(new uQ).set(a[0],a[1],i[0],i[1]);return function(e,t,n){var r=[],a=(new uQ).union(t),i=e.marktype;return i?g2(e,a,n,r):"group"===i?b2(e,a,n,r):OH("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,o,function(e){var t=null;if(e){var n=zH(e.marktype),r=zH(e.markname);t=function(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))},clampRange:function(e,t,n){var r,a=e[0],i=e[1];return i<a&&(r=i,i=a,a=r),(r=i-a)>=n-t?[t,n]:[a=Math.min(Math.max(a,t),n-r),a+r]},pinchDistance:function(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){var e=w2();return e?e.screen:{}},containerSize:function(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){var e=w2();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return QK(e||0,t||0,n||0)},setdata:function(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(CH).insert(t)),1},pathShape:function(e){var t=null;return function(n){return n?DJ(n,t=t||wJ(e)):e}},panLinear:function(e,t){return LH(e,t,MH,EH)},panLog:function(e,t){var n=Math.sign(e[0]);return LH(e,t,IH(n),DH(n))},panPow:function(e,t,n){return LH(e,t,PH(n),PH(1/n))},panSymlog:function(e,t,n){return LH(e,t,FH(n),RH(n))},zoomLinear:function(e,t,n){return BH(e,t,n,MH,EH)},zoomLog:function(e,t,n){var r=Math.sign(e[0]);return BH(e,t,n,IH(r),DH(r))},zoomPow:function(e,t,n,r){return BH(e,t,n,PH(r),PH(1/r))},zoomSymlog:function(e,t,n,r){return BH(e,t,n,FH(r),RH(r))},encode:function(e,t,n){if(e){var r=this.context.dataflow,a=e.mark.source;r.pulse(a,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,a,i){var o,u,s=this.context.dataflow,c=this.context.data[e],l=c.input,f=s.stamp(),d=c.changes;if(!1===s._trigger||!(l.value.length||t||r))return 0;if((!d||d.stamp<f)&&(c.changes=d=s.changeset(),d.stamp=f,s.runAfter((function(){c.modified=!0,s.pulse(l,d).run()}),!0,1)),n&&(o=!0===n?CH:AH(n)||dn(n)?n:$K(n),d.remove(o)),t&&d.insert(t),r&&(o=$K(r),l.value.some(o)?d.remove(o):d.insert(r)),a)for(u in i)d.modify(a,u,i[u]);return 1}},u3=["view","item","group","xy","x","y"],s3="this.",c3={},l3={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(e){return"_[".concat(ZH("$"+e),"]")},functions:function(e){var t=CY(e);for(var n in u3.forEach((function(e){return t[e]="event.vega."+e})),o3)t[n]=s3+n;return WH(t,DY(e,o3,c3)),t},constants:EY,visitors:c3},f3=function(e){var t=(e=e||{}).whitelist?QH(e.whitelist):{},n=e.blacklist?QH(e.blacklist):{},r=e.constants||EY,a=(e.functions||CY)(f),i=e.globalvar,o=e.fieldvar,u=UH(i)?i:function(e){return"".concat(i,'["').concat(e,'"]')},s={},c={},l=0;function f(e){if(YH(e))return e;var t=d[e.type];return null==t&&OH("Unsupported type: "+e.type),t(e)}var d={Literal:function(e){return e.raw},Identifier:function(e){var a=e.name;return l>0?a:GH(n,a)?OH("Illegal identifier: "+a):GH(r,a)?r[a]:GH(t,a)?a:(s[a]=1,u(a))},MemberExpression:function(e){var t=!e.computed,n=f(e.object);t&&(l+=1);var r=f(e.property);return n===o&&(c[function(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){"Identifier"!==e.callee.type&&OH("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=GH(a,t)&&a[t];return r||OH("Unrecognized function: "+t),UH(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(f).join(",")+"]"},BinaryExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+f(e.argument)+")"},ConditionalExpression:function(e){return"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")"},LogicalExpression:function(e){return"("+f(e.left)+e.operator+f(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(f).join(",")+"}"},Property:function(e){l+=1;var t=f(e.key);return l-=1,t+":"+f(e.value)}};function h(e){var t={code:f(e),globals:Object.keys(s),fields:Object.keys(c)};return s={},c={},t}return h.functions=a,h.constants=r,h}(l3);function d3(e,t,n){return 1===arguments.length?o3[e]:(o3[e]=t,n&&(c3[e]=n),f3&&(f3.functions[e]=s3+e),this)}d3("bandwidth",(function(e,t){var n=MY(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),TY),d3("copy",(function(e,t){var n=MY(e,(t||this).context);return n?n.copy():void 0}),TY),d3("domain",(function(e,t){var n=MY(e,(t||this).context);return n?n.domain():[]}),TY),d3("range",(function(e,t){var n=MY(e,(t||this).context);return n&&n.range?n.range():[]}),TY),d3("invert",(function(e,t,n){var r=MY(e,(n||this).context);return r?AH(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),TY),d3("scale",(function(e,t,n){var r=MY(e,(n||this).context);return r?r(t):void 0}),TY),d3("gradient",(function(e,t,n,r,a){e=MY(e,(a||this).context);var i=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}(t,n),o=e.domain(),u=o[0],s=NH(o),c=EH;return s-u?c=T$(e,u,s):e=(e.interpolator?O$("sequential")().interpolator(e.interpolator()):O$("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,s=1]),e.ticks&&(u!==(o=e.ticks(+r||15))[0]&&o.unshift(u),s!==NH(o)&&o.push(s)),o.forEach((function(t){return i.stop(c(t),e(t))})),i}),TY),d3("geoArea",WK,TY),d3("geoBounds",VK,TY),d3("geoCentroid",GK,TY),d3("geoShape",(function(e,t,n){var r=MY(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),TY),d3("indata",(function(e,t,n){var r=this.context.data[e]["index:"+t],a=r?r.value.get(n):void 0;return a?a.count:a}),(function(e,t,n,r){t[0].type!==vX&&OH("First argument to indata must be a string literal."),t[1].type!==vX&&OH("Second argument to indata must be a string literal.");var a=t[0].value,i=t[1].value,o="@"+i;GH(o,r)||(r[o]=n.getData(a).indataRef(n,i))})),d3("data",eX,AY),d3("treePath",(function(e,t,n){var r=_2(e,this),a=r[t],i=r[n];return a&&i?a.path(i).map(x2):void 0}),AY),d3("treeAncestors",(function(e,t){var n=_2(e,this)[t];return n?n.ancestors().map(x2):void 0}),AY),d3("vlSelectionTest",(function(e,t,n){for(var r,a,i,o,u,s=this.context.data[e],c=s?s.values.value:[],l=s?s[e3]&&s[e3].value:void 0,f=n===J2,d=c.length,h=0;h<d;++h)if(r=c[h],l&&f){if(-1===(i=(a=a||{})[o=r.unit]||0))continue;if(u=t3(t,r),a[o]=u?-1:++i,u&&1===l.size)return!0;if(!u&&i===l.get(o).count)return!1}else if(f^(u=t3(t,r)))return u;return d&&f}),i3),d3("vlSelectionResolve",(function(e,t,n,r){for(var a,i,o,u,s,c,l,f,d,h,p,v=this.context.data[e],m=v?v.values.value:[],g={},b={},y={},x=m.length,_=0;_<x;++_){for(u=(a=m[_]).unit,i=a.fields,o=a.values,h=0,p=i.length;h<p;++h)s=i[h],l=(c=g[s.field]||(g[s.field]={}))[u]||(c[u]=[]),y[s.field]=f=s.type.charAt(0),d=a3[f+"_union"],c[u]=d(l,D2(o[h]));n&&(l=b[u]||(b[u]=[])).push(D2(o).reduce((function(e,t,n){return e[i[n].field]=t,e}),{}))}return t=t||Q2,Object.keys(g).forEach((function(e){g[e]=Object.keys(g[e]).map((function(t){return g[e][t]})).reduce((function(n,r){return void 0===n?r:a3[y[e]+"_"+t](n,r)}))})),m=Object.keys(b),n&&m.length&&(g[r?"vlPoint":"vlMulti"]=t===Q2?Object(go.a)({},"or",m.reduce((function(e,t){return e.push.apply(e,Object(mo.a)(b[t])),e}),[])):Object(go.a)({},"and",m.map((function(e){return Object(go.a)({},"or",b[e])})))),g}),i3);var h3=function(e,t){var n,r={};try{n=function(e){fX=0,dX=(lX=e).length,hX=null,tY();var t=jY();if(2!==hX.type)throw new Error("Unexpect token after expression.");return t}(e=YH(e)?e:ZH(e)+"")}catch(i){OH("Expression parse error: "+e)}n.visit((function(e){if(e.type===xX){var n=e.callee.name,a=l3.visitors[n];a&&a(n,e.arguments,t,r)}}));var a=f3(n);return a.globals.forEach((function(e){var n="$"+e;!GH(r,n)&&t.getSignal(e)&&(r[n]=t.signalRef(e))})),{$expr:WH({code:a.code},t.options.ast?{ast:n}:null),$fields:a.fields,$params:r}};function p3(e,t,n){return e.fields=t||[],e.fname=n,e}function v3(e){return 1===e.length?m3(e[0]):g3(e)}var m3=function(e){return function(t){return t[e]}},g3=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function b3(e){throw Error(e)}function y3(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||b3("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&b3("Access path missing closing bracket: "+e),o&&b3("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function x3(e,t,n){var r=y3(e);return e=1===r.length?r[0]:e,p3((n&&n.get||v3)(r),[e],t||e)}x3("id"),p3((function(e){return e}),[],"identity"),p3((function(){return 0}),[],"zero"),p3((function(){return 1}),[],"one");var _3=p3((function(){return!0}),[],"true");p3((function(){return!1}),[],"false");var w3=Array.isArray;function k3(e){return e===Object(e)}function O3(e){return null!=e?w3(e)?e:[e]:[]}function S3(e){return"function"===typeof e}var j3=function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},E3=function(e,t){return 1===e.length?C3(e[0],t[0]):A3(e,t,e.length)},C3=function(e,t){return function(n,r){return j3(e(n),e(r))*t}},A3=function(e,t,n){return t.push(0),function(r,a){for(var i,o=0,u=-1;0===o&&++u<n;)i=e[u],o=j3(i(r),i(a));return o*t[u]}};var T3=Object.prototype.hasOwnProperty;function N3(e,t){return T3.call(e,t)}function M3(e){return w3(e)?"["+e.map(M3)+"]":k3(e)||"string"===typeof e?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function D3(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}var I3=D3(["rule"]),F3=D3(["group","image","rect"]);function R3(e){return(e+"").toLowerCase()}function P3(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");var r=Function.apply(void 0,Object(mo.a)(t.concat(n)));return e&&e.functions?r.bind(e.functions):r}var L3={operator:function(e,t){return P3(e,["_"],t.code)},parameter:function(e,t){return P3(e,["datum","_"],t.code)},event:function(e,t){return P3(e,["event"],t.code)},handler:function(e,t){return P3(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";"))},encode:function(e,t){var n=t.marktype,r=t.channels,a="var o=item,datum=o.datum,m=0,$;";for(var i in r){var o="o["+M3(i)+"]";a+="$=".concat(r[i].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return a+=function(e,t){var n="";return I3[t]||(e.x2&&(e.x?(F3[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(F3[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),P3(e,["item","_"],a+="return m;")},codegen:{get:function(e){var t="[".concat(e.map(M3).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){var n,r=Function("a","b","var u, v; return "+e.map((function(e,r){var a,i,o=t[r];return e.path?(a="a".concat(e.path),i="b".concat(e.path)):((n=n||{})["f"+r]=e,a="this.f".concat(r,"(a)"),i="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(a,i,-o,o)})).join("")+"0;");return n?r.bind(n):r}}};function B3(e,t,n){if(!e||!k3(e))return e;for(var r,a=0,i=z3.length;a<i;++a)if(N3(e,(r=z3[a]).key))return r.parse(e,t,n);return e}var z3=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||b3("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=function(e,t,n){e&&(e=t?O3(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):O3(e));var r,a=e&&e.length,i=n&&n.get||v3,o=function(e){return i(t?[e]:y3(e))};if(a)if(1===a){var u=o(e[0]);r=function(e){return""+u(e)}}else{var s=e.map(o);r=function(e){for(var t=""+s[0](e),n=0;++n<a;)t+="|"+s[n](e);return t}}else r=function(){return""};return p3(r,e,"key")}(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);var r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=p3(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=x3(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){var n=e.$encode,r={};for(var a in n){var i=n[a];r[a]=p3(t.encodeExpression(i.$expr),i.$fields),r[a].output=i.$output}return r}},{key:"$compare",parse:function(e,t){var n="c:"+e.$compare+"_"+e.$order,r=O3(e.$compare).map((function(e){return e&&e.$tupleid?hn:e}));return t.fn[n]||(t.fn[n]=function(e,t,n){n=n||{},t=O3(t)||[];var r=[],a=[],i={},o=n.comparator||E3;return O3(e).forEach((function(e,o){var u;null!=e&&(r.push("descending"===t[o]?-1:1),a.push(e=S3(e)?e:x3(e,null,n)),(u=e,(null==u?null:u.fields)||[]).forEach((function(e){return i[e]=1})))})),0===a.length?null:p3(o(a,r),Object.keys(i))}(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){var n=e.$subflow;return function(e,r,a){var i=t.fork().parse(n),o=i.get(n.operators[0].id),u=i.signals.parent;return u&&u.set(a),o.detachSubflow=function(){return t.detach(i)},o}}},{key:"$tupleid",parse:function(){return hn}}];var U3={skip:!0};function W3(e,t,n,r){return new V3(e,t,n,r)}function V3(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||L3,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function G3(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}V3.prototype=G3.prototype={fork:function(){var e=new G3(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((function(t){return t!==e}));for(var t=Object.keys(e.nodes),n=0,r=t;n<r.length;n++){var a=r[n];e.nodes[a]._targets=null}for(var i=0,o=t;i<o.length;i++){var u=o[i];e.nodes[u].detach()}e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){var n=this,r=n.dataflow,a=e.value;if(n.set(e.id,t),"collect"===R3(e.type)&&a&&(a.$ingest?r.ingest(t,a.$ingest,a.$format):a.$request?r.preload(t,a.$request,a.$format):r.pulse(t,r.changeset().insert(a))),e.root&&(n.root=t),e.parent){var i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((function(){i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data){var o=function(r){var a=n.data[r]||(n.data[r]={});e.data[r].forEach((function(e){return a[e]=t}))};for(var u in e.data)o(u)}},resolve:function(){return(this.unresolved||[]).forEach((function(e){return e()})),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[R3(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,a){this.dataflow.on(t,n,r,a,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){var t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((function(e){return t.parseOperator(e)})),n.forEach((function(e){return t.parseOperatorParameters(e)})),(e.streams||[]).forEach((function(e){return t.parseStream(e)})),(e.updates||[]).forEach((function(e){return t.parseUpdate(e)})),t.resolve()},parseOperator:function(e){var t=this;"operator"!==R3(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){var t=this;if(e.params){var n=t.get(e.id);n||b3("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};var n=this;for(var r in e){var a=e[r];t[r]=w3(a)?a.map((function(e){return B3(e,n,t)})):B3(a,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,a=null!=e.stream?n.get(e.stream):void 0;e.source?a=n.events(e.source,e.type,r):e.merge&&(a=(t=e.merge.map((function(e){return n.get(e)})))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((function(e){return n.get(e)})),a=a.between(t[0],t[1])),e.filter&&(a=a.filter(r)),null!=e.throttle&&(a=a.throttle(+e.throttle)),null!=e.debounce&&(a=a.debounce(+e.debounce)),null==a&&b3("Invalid stream definition: "+JSON.stringify(e)),e.consume&&a.consume(!0),n.stream(e,a)},parseUpdate:function(e){var t,n=this,r=k3(r=e.source)?r.$ref:r,a=n.get(r),i=e.update,o=void 0;a||b3("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),i&&i.$expr&&(i.$params&&(o=n.parseParameters(i.$params)),i=n.handlerExpression(i.$expr)),n.update(e,a,t,i,o)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var a=t.signals[n];e.signals(n,a)&&(r[n]=a.value)}))}if(e.data){var a=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(a[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,a=e.signals;Object.keys(a||{}).forEach((function(e){n.update(t.signals[e],a[e],U3)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(_3).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var q3="width",H3="height",X3="padding",Y3={skip:!0};function K3(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===X3?r.left+r.right:0)}function $3(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===X3?r.top+r.bottom:0)}function Z3(e,t){return t.modified&&YL(t.input.value)&&e.indexOf("_:vega:_")}function J3(e,t){return!("parent"===e||t instanceof Jn.proxy)}var Q3=function(e,t,n,r){var a=e.element();a&&a.setAttribute("title",function(e){return null==e?"":YL(e)?e4(e):KL(e)&&!iB(e)?(t=e,Object.keys(t).map((function(e){var n=t[e];return e+": "+(YL(n)?e4(n):t4(n))})).join("\n")):e+"";var t}(r))};function e4(e){return"["+e.map(t4).join(", ")+"]"}function t4(e){return YL(e)?"[\u2026]":KL(e)&&!iB(e)?"{\u2026}":e}function n4(e,t){var n=this;if(t=t||{},Kn.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){var r=tB({},e.locale,t.locale);n.locale(Object(on.b)(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Uq,n._scenegraph=new wG;var a=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Q3,n._redraw=!0,n._handler=(new YG).scene(a),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){var t=tB({defaults:{}},e),n=function(e,t){t.forEach((function(t){YL(e[t])&&(e[t]=sB(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);var i=function(e,t,n){return W3(e,Jn,o3,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((function(e){return{state:null,param:tB({},e)}})),i.root&&i.root.set(a),a.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(a.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=K3(n,n._width),n._viewHeight=$3(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,a=t.padding;function i(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=K3(e,t.size),i()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=$3(e,t.size),i()}),{size:r});var o=e.add(null,i,{pad:a});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=a.rank+1}(n),function(e){e.add(null,(function(t){return e._background=t.bg,e._resize=1,t.bg}),{bg:e._signals.background})}(n),function(e){var t=e._signals.cursor||(e._signals.cursor=e.add({user:cB,item:null}));e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,a=r?oB(r)?r:r.user:cB,i=n.item&&n.item.cursor||null;return r&&a===r.user&&i==r.item?r:{user:a,item:i}})),e.add(null,(function(t){var n=t.cursor,r=this.value;return oB(n)||(r=n.item,n=n.user),lB(e,n&&n!==cB?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function r4(e,t){return rB(e._signals,t)?e._signals[t]:GL("Unrecognized signal name: "+uB(t))}function a4(e,t){var n=(e._targets||[]).filter((function(e){return e._update&&e._update.handler===t}));return n.length?n[0]:null}function i4(e,t,n,r){var a=a4(n,r);return a||((a=lH(e,(function(){return r(t,n.value)}))).handler=r,e.on(n,null,a)),e}function o4(e,t,n){var r=a4(t,n);return r&&t._targets.remove(r),e}function u4(e,t,n){return e.fields=t||[],e.fname=n,e}function s4(e){return 1===e.length?c4(e[0]):l4(e)}aB(n4,Kn,{evaluate:function(e,t,n){var r=this;return Object(Pt.a)(w.a.mark((function a(){return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Kn.prototype.evaluate.call(r,e,t);case 2:if(!r._redraw&&!r._resize){a.next=14;break}if(a.prev=3,!r._renderer){a.next=8;break}return r._resize&&(r._resize=0,mB(r)),a.next=8,r._renderer.renderAsync(r._scenegraph.root);case 8:r._redraw=!1,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),r.error(a.t0);case 14:return n&&sn(r,n),a.abrupt("return",r);case 16:case"end":return a.stop()}}),a,null,[[3,11]])})))()},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){var t=null!=e?e+"":null;return t!==this._desc&&BL(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){var r=r4(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",hH(e)):hH(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(qq(e)||GL("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(Kn.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(r4(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,a,i){this.runAfter((function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(q3,n,Y3),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.signal(H3,r,Y3),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===a[0]&&o._origin[1]===a[1]||(o._resize=1,o._origin=a),u&&o.run("enter"),i&&o.runAfter((function(e){return e.resize()}))}),!1,1)},addEventListener:function(e,t,n){var r=t;return n&&!1===n.trap||((r=lH(this,t)).raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,a=this._handler.handlers(e),i=a.length;--i>=0;)if(r=a[i].type,n=a[i].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return i4(this,e,r4(this,e),t)},removeSignalListener:function(e,t){return o4(this,r4(this,e),t)},addDataListener:function(e,t){return i4(this,e,fB(this,e).values,t)},removeDataListener:function(e,t){return o4(this,fB(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){var t=lB(this,null);this._globalCursor=!!e,t&&lB(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new fS,a=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?cS():+n,r._restart((function i(o){o+=a,r._restart(i,a+=t,n),e(o)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,a=this,i=new An(n),o=function(n,r){a.runAsync(null,(function(){e===Xq&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,a=n.allow;return!1!==r&&!0!==a&&(!0===r||!1===a||(r?r[t]:a?!a[t]:e.preventDefault()))}(a,t)&&n.preventDefault(),i.receive(Hq(a,n,r))}))};if("timer"===e)Kq(a,"timer",t)&&a.timer(o,t);else if(e===Xq)Kq(a,"view",t)&&a.addEventListener(t,o,Yq);else if("window"===e?Kq(a,"window",t)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&Kq(a,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(t,o);a._eventListeners.push({type:t,sources:r,handler:o})}else a.warn("Can not resolve event source: "+e);return i},finalize:function(){var e,t,n,r=this._tooltip,a=this._timers,i=this._eventListeners;for(e=a.length;--e>=0;)a[e].stop();for(e=i.length;--e>=0;)for(t=(n=i[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",$q),Zq,Jq(e)),this.on(this.events("view","mouseout",$q),Zq,Jq(t)),this},data:function(e,t){return arguments.length<2?fB(this,e).values.value:dB.call(this,e,_n().remove(XL).insert(t))},change:dB,insert:function(e,t){return dB.call(this,e,_n().insert(t))},remove:function(e,t){return dB.call(this,e,_n().remove(t))},scale:function(e){var t=this._runtime.scales;return rB(t,e)||GL("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){var n=this,r=n._renderType,a=n._eventConfig.bind,i=qq(r);e=n._el=e?fH(n,e):null,function(e){var t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),BL(t,e.description()))}(n),i||n.error("Unrecognized renderer type: "+r);var o=i.handler||YG,u=e?i.renderer:i.headless;return n._renderer=u?cH(n,n._renderer,e,u):null,n._handler=function(e,t,n,r){var a=new r(e.loader(),lH(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,vB(e),e);return t&&t.handlers().forEach((function(e){a.on(e.type,e.handler)})),a}(n,n._handler,e,o),n._redraw=!0,e&&"none"!==a&&(t=t?n._elBind=fH(n,t):e.appendChild(Qq("form",{class:"vega-bindings"})),n._bind.forEach((function(e){e.param.element&&"container"!==a&&(e.element=fH(n,e.param.element))})),n._bind.forEach((function(e){nH(n,e.element||t,e)}))),n},toImageURL:function(e,t){return mH.apply(this,arguments)},toCanvas:function(e,t){return bH.apply(this,arguments)},toSVG:function(e){return yH.apply(this,arguments)},getState:function(e){return this._runtime.getState(e||{data:Z3,signals:J3,recurse:!0})},setState:function(e){return this.runAsync(null,(function(t){t._trigger=!1,t._runtime.setState(e)}),(function(e){e._trigger=!0})),this}});var c4=function(e){return function(t){return t[e]}},l4=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function f4(e){throw Error(e)}function d4(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||f4("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&f4("Access path missing closing bracket: "+e),o&&f4("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function h4(e,t,n){var r=d4(e);return e=1===r.length?r[0]:e,u4((n&&n.get||s4)(r),[e],t||e)}h4("id"),u4((function(e){return e}),[],"identity"),u4((function(){return 0}),[],"zero"),u4((function(){return 1}),[],"one"),u4((function(){return!0}),[],"true"),u4((function(){return!1}),[],"false");var p4=Array.isArray;function v4(e){return e===Object(e)}var m4=function(e){return"__proto__"!==e};function g4(e,t,n,r){var a,i;if(m4(t))if(v4(n)&&!p4(n))for(a in i=v4(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[a])?g4(i,a,n[a]):m4(a)&&(i[a]=n[a]);else e[t]=n}function b4(e,t){if(null==e)return t;var n={},r=[];function a(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(a),e.forEach(a),r}function y4(e){return e[e.length-1]}function x4(e){return null==e||""===e?null:+e}function _4(e){return null!=e?p4(e)?e:[e]:[]}function w4(e){for(var t,n,r=1,a=arguments.length;r<a;++r)for(n in t=arguments[r])e[n]=t[n];return e}var k4=Object.prototype.hasOwnProperty;function O4(e,t){return k4.call(e,t)}function S4(e){return"string"===typeof e}function j4(e){return p4(e)?"["+e.map(j4)+"]":v4(e)||S4(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var E4=function(e){return v4(e)?e:{type:e||"pad"}},C4=function(e){return+e||0},A4=function(e){return v4(e)?e.signal?e:{top:C4(e.top),bottom:C4(e.bottom),left:C4(e.left),right:C4(e.right)}:{top:t=C4(e),bottom:t,left:t,right:t};var t},T4=function(e){return v4(e)&&!p4(e)?w4({},e):{value:e}};function N4(e,t,n,r){return null!=n?(v4(n)&&!p4(n)||p4(n)&&n.length&&v4(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function M4(e,t,n){for(var r in t)N4(e,r,t[r]);for(var a in n)N4(e,a,n[a],"update")}function D4(e,t,n){for(var r in t)n&&O4(n,r)||(e[r]=w4(e[r]||{},t[r]));return e}function I4(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var F4="mark",R4="frame",P4="scope",L4="legend-label",B4="title-text",z4="title-subtitle";function U4(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}var W4=function(e){return S4(e)?j4(e):e.signal?"(".concat(e.signal,")"):H4(e)};function V4(e){if(null!=e.gradient)return function(e){var t=[e.start,e.stop,e.count].map((function(e){return null==e?null:j4(e)}));for(;t.length&&null==y4(t);)t.pop();return t.unshift(W4(e.gradient)),"gradient(".concat(t.join(","),")")}(e);var t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?G4("hcl",e.h,e.c,e.l):e.h||e.s?G4("hsl",e.h,e.s,e.l):e.l||e.a?G4("lab",e.l,e.a,e.b):e.r||e.g||e.b?G4("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?H4(e.field):void 0!==e.value?j4(e.value):void 0;return null!=e.scale&&(t=function(e,t){var n=W4(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1===+e.band?"":"*"+q4(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(q4(e.exponent),")")),null!=e.mult&&(t+="*".concat(q4(e.mult))),null!=e.offset&&(t+="+".concat(q4(e.offset))),e.round&&(t="round(".concat(t,")")),t}var G4=function(e,t,n,r){return"(".concat(e,"(").concat([t,n,r].map(V4).join(","),")+'')")};function q4(e){return v4(e)?"("+V4(e)+")":e}function H4(e){return X4(v4(e)?e:{datum:e})}function X4(e){var t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):f4("Invalid field reference: "+j4(e));return e.signal||(r=S4(r)?d4(r).map(j4).join("]["):X4(r)),t+"["+r+"]"}var Y4=function(e,t,n,r,a,i){var o={};for(var u in(i=i||{}).encoders={$encode:o},e=function(e,t,n,r,a){var i,o,u,s={},c={};for(o in o="lineBreak","text"!==t||null==a[o]||I4(o,e)||U4(s,o,a[o]),("legend"==n||String(n).startsWith("axis"))&&(n=null),u=n===R4?a.group:n===F4?w4({},a.mark,a[t]):null)I4(o,e)||("fill"===o||"stroke"===o)&&(I4("fill",e)||I4("stroke",e))||U4(s,o,u[o]);for(o in _4(r).forEach((function(t){var n=a.style&&a.style[t];for(var r in n)I4(r,e)||U4(s,r,n[r])})),e=w4({},e),s)(u=s[o]).signal?(i=i||{})[o]=u:c[o]=u;return e.enter=w4(c,e.enter),i&&(e.update=w4(i,e.update)),e}(e,t,n,r,a.config))o[u]=K4(e[u],t,i,a);return i};function K4(e,t,n,r){var a,i={},o={};for(var u in e)null!=e[u]&&(i[u]=$4((a=e[u],p4(a)?function(e){var t="";return e.forEach((function(e){var n=V4(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===y4(t)&&(t+="null"),t}(a):V4(a)),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function $4(e,t,n,r){var a=h3(e,t);return a.$fields.forEach((function(e){return r[e]=1})),w4(n,a.$params),a.$expr}var Z4=["value","update","init","react","bind"];function J4(e,t){f4(e+' for "outer" push: '+j4(t))}var Q4=function(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||J4("No prior signal definition",n),Z4.forEach((function(t){void 0!==e[t]&&J4("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}};function e5(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function t5(e,t,n,r){return new e5(e,t,n,r)}function n5(e,t){return t5("operator",e,t)}function r5(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function a5(e,t){return t?{$field:e,$name:t}:{$field:e}}var i5=a5("key");function o5(e,t){return{$compare:e,$order:t}}function u5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var s5="scope",c5="view";function l5(e){return e&&e.signal}function f5(e){if(l5(e))return!0;if(v4(e))for(var t in e)if(f5(e[t]))return!0;return!1}function d5(e,t){return null!=e?e:t}function h5(e){return e&&e.signal||e}var p5="timer";function v5(e,t){return(e.merge?m5:e.stream?g5:e.type?b5:f4("Invalid stream specification: "+j4(e)))(e,t)}function m5(e,t){var n=y5({merge:e.merge.map((function(e){return v5(e,t)}))},e,t);return t.addStream(n).id}function g5(e,t){var n=y5({stream:v5(e.stream,t)},e,t);return t.addStream(n).id}function b5(e,t){var n,r;e.type===p5?(n=t.event(p5,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===s5?c5:r||c5,e.type);var a=y5({stream:n},e,t);return 1===Object.keys(a).length?n:t.addStream(a).id}function y5(e,t,n){var r=t.between;return r&&(2!==r.length&&f4('Stream "between" parameter must have 2 entries: '+j4(t)),e.between=[v5(r[0],n),v5(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===s5&&r.push("inScope(event.item)"),r.length&&(e.filter=h3("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}var x5,_5,w5="[",k5="]",O5=/[[\]{}]/,S5={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function j5(e,t,n){return x5=t||"view",_5=n||S5,C5(e.trim()).map(A5)}function E5(e,t,n,r,a){for(var i,o=e.length,u=0;t<o;++t){if(i=e[t],!u&&i===n)return t;a&&a.indexOf(i)>=0?--u:r&&r.indexOf(i)>=0&&++u}return t}function C5(e){for(var t=[],n=e.length,r=0,a=0;a<n;)a=E5(e,a,",","[{","]}"),t.push(e.substring(r,a).trim()),r=++a;if(0===t.length)throw"Empty event selector: "+e;return t}function A5(e){return"["===e[0]?function(e){var t,n=e.length,r=1;if((r=E5(e,r,k5,w5,k5))===n)throw"Empty between selector: "+e;if(2!==(t=C5(e.substring(1,r))).length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;t=t.map(A5);var a=A5(e.slice(1).trim());if(a.between)return{between:t,stream:a};a.between=t;return a}(e):function(e){var t,n,r={source:x5},a=[],i=[0,0],o=0,u=0,s=e.length,c=0;if("}"===e[s-1]){if(!((c=e.lastIndexOf("{"))>=0))throw"Unmatched right brace: "+e;try{i=function(e){var t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(c+1,s-1))}catch(f){throw"Invalid throttle specification: "+e}s=(e=e.slice(0,c).trim()).length,c=0}if(!s)throw e;"@"===e[0]&&(o=++c);(t=E5(e,c,":"))<s&&(a.push(e.substring(u,t).trim()),u=c=++t);if((c=E5(e,c,w5))===s)a.push(e.substring(u,s).trim());else if(a.push(e.substring(u,c).trim()),n=[],(u=++c)===s)throw"Unmatched left bracket: "+e;for(;c<s;){if((c=E5(e,c,k5))===s)throw"Unmatched left bracket: "+e;if(n.push(e.substring(u,c).trim()),c<s-1&&e[++c]!==w5)throw"Expected left bracket: "+e;u=++c}if(!(s=a.length)||O5.test(a[s-1]))throw"Invalid event selector: "+e;s>1?(r.type=a[1],o?r.markname=a[0].slice(1):(l=a[0],_5[l]?r.marktype=a[0]:r.source=a[0])):r.type=a[0];var l;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);i[0]&&(r.throttle=i[0]);i[1]&&(r.debounce=i[1]);return r}(e)}var T5={code:"_.$value",ast:{type:"Identifier",value:"value"}},N5=function(e,t,n){var r=e.encode,a={target:n},i=e.events,o=e.update,u=[];i||f4("Signal update missing events specification."),S4(i)&&(i=j5(i,t.isSubscope()?s5:c5)),i=_4(i).filter((function(e){return e.signal||e.scale?(u.push(e),0):1})),u.length>1&&(u=[M5(u)]),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=r&&(o&&f4("Signal encode and update are mutually exclusive."),o="encode(item(),"+j4(r)+")"),a.update=S4(o)?h3(o,t):null!=o.expr?h3(o.expr,t):null!=o.value?o.value:null!=o.signal?{$expr:T5,$params:{$value:t.signalRef(o.signal)}}:f4("Invalid signal update specification."),e.force&&(a.options={force:!0}),u.forEach((function(e){return t.addUpdate(w4(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):v5(e,t)}}(e,t),a))}))};function M5(e){return{signal:"["+e.map((function(e){return e.scale?'scale("'+e.scale+'")':e.signal}))+"]"}}var D5,I5,F5=function(e){return function(t,n,r){return t5(e,n,t||void 0,r)}},R5=F5("aggregate"),P5=F5("axisticks"),L5=F5("bound"),B5=F5("collect"),z5=F5("compare"),U5=F5("datajoin"),W5=F5("encode"),V5=F5("expression"),G5=(F5("extent"),F5("facet")),q5=F5("field"),H5=F5("key"),X5=F5("legendentries"),Y5=F5("load"),K5=F5("mark"),$5=F5("multiextent"),Z5=F5("multivalues"),J5=F5("overlap"),Q5=F5("params"),e6=F5("prefacet"),t6=F5("projection"),n6=F5("proxy"),r6=F5("relay"),a6=F5("render"),i6=F5("scale"),o6=F5("sieve"),u6=F5("sortitems"),s6=F5("viewlayout"),c6=F5("values");var l6="linear",f6="log",d6="pow",h6="sqrt",p6="symlog",v6="time",m6="utc",g6="sequential",b6="diverging",y6="quantile",x6="quantize",_6="threshold",w6="continuous",k6="discrete",O6="discretizing",S6="interpolating",j6="temporal";function E6(){var e,t,n=ss().unknown(void 0),r=n.domain,a=n.range,i=[0,1],o=!1,u=0,s=0,c=.5;function l(){var n=r().length,l=i[1]<i[0],f=i[1-l],d=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0}(n,u,s),h=i[l-0];e=(f-h)/(d||1),o&&(e=Math.floor(e)),h+=(f-h-e*(n-u))*c,t=e*(1-u),o&&(h=Math.round(h),t=Math.round(t));var p=Ba(n).map((function(t){return h+e*t}));return a(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),l()):r()},n.range=function(e){return arguments.length?(i=[+e[0],+e[1]],l()):i.slice()},n.rangeRound=function(e){return i=[+e[0],+e[1]],o=!0,l()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,l()):o},n.padding=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u=s,l()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},n.paddingOuter=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),l()):s},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),l()):c},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,u,s=i[1]<i[0],c=s?a().reverse():a(),l=c.length-1,f=+e[0],d=+e[1];if(f===f&&d===d&&(d<f&&(u=f,f=d,d=u),!(d<c[0]||f>i[1-s])))return n=Math.max(0,ns(c,f)-1),o=f===d?n:ns(c,d)-1,f-c[n]>t+1e-10&&++n,s&&(u=n,n=l-o,o=l-u),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return E6().domain(r()).range(i).round(o).paddingInner(u).paddingOuter(s).align(c)},l()}function C6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return C6(t())},e}var A6=Array.prototype.map;function T6(e){return A6.call(e,x4)}var N6=Array.prototype.slice;var M6={};function D6(e,t,n){var r=function(){var n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){var n,r=t[0],a=t[1];return a<r&&(n=r,r=a,a=n),[e.invert(r),e.invert(a)]}}(n):n.invertExtent?function(e){return function(t){var n,r,a,i,o=e.range(),u=t[0],s=t[1],c=-1;for(s<u&&(r=u,u=s,s=r),a=0,i=o.length;a<i;++a)o[a]>=u&&o[a]<=s&&(c<0&&(c=a),n=a);if(!(c<0))return u=e.invertExtent(o[c]),s=e.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}(n):void 0),n.type=e,n};return r.metadata=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return t}(_4(n)),r}function I6(e,t,n){return arguments.length>1?(M6[e]=D6(e,t,n),this):F6(e)?M6[e]:void 0}function F6(e){return O4(M6,e)}function R6(e,t){var n=M6[e];return n&&n.metadata[t]}function P6(e){return R6(e,k6)}function L6(e){return R6(e,O6)}function B6(e){return R6(e,y6)}I6("identity",Sc),I6(l6,Oc,w6),I6(f6,Ic,[w6,f6]),I6(d6,Bc,w6),I6(h6,zc,w6),I6(p6,Gc,w6),I6(v6,cl,[w6,j6]),I6(m6,ml,[w6,j6]),I6(g6,yl,[w6,S6]),I6("".concat(g6,"-").concat(l6),yl,[w6,S6]),I6("".concat(g6,"-").concat(f6),xl,[w6,S6,f6]),I6("".concat(g6,"-").concat(d6),wl,[w6,S6]),I6("".concat(g6,"-").concat(h6),kl,[w6,S6]),I6("".concat(g6,"-").concat(p6),_l,[w6,S6]),I6("".concat(b6,"-").concat(l6),jl,[w6,S6]),I6("".concat(b6,"-").concat(f6),El,[w6,S6,f6]),I6("".concat(b6,"-").concat(d6),Al,[w6,S6]),I6("".concat(b6,"-").concat(h6),Tl,[w6,S6]),I6("".concat(b6,"-").concat(p6),Cl,[w6,S6]),I6(y6,Nl,[O6,y6]),I6(x6,Ml,O6),I6(_6,Dl,O6),I6("bin-ordinal",(function e(){var t=[],n=[];function r(e){return null==e||e!==e?void 0:n[(as(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=T6(e),r):t.slice()},r.range=function(e){return arguments.length?(n=N6.call(e),r):n.slice()},r.tickFormat=function(e,n){return fs(t[0],y4(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[k6,O6]),I6("ordinal",ss,k6),I6("band",E6,k6),I6("point",(function(){return C6(E6().paddingInner(1))}),k6);function z6(e,t,n){return Ol(function(e,t){var n=o[function(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}(t||"rgb",n),e)}function U6(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function W6(e,t){for(var n in e)G6(n,t(e[n]))}var V6={};function G6(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(V6[e]=t,this):V6[e]}W6({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},U6),W6({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return z6(U6(e))}));D5={},Object(go.a)(D5,y6,"quantiles"),Object(go.a)(D5,x6,"thresholds"),Object(go.a)(D5,_6,"domain"),I5={},Object(go.a)(I5,y6,"quantiles"),Object(go.a)(I5,x6,"domain");var q6=0,H6={min:"min",max:"max",count:"sum"};function X6(e,t){var n,r,a=t.getScale(e.name).params;for(n in a.domain=Z6(e.domain,e,t),null!=e.range&&(a.range=i8(e,t,a)),null!=e.interpolate&&function(e,t){t.interpolate=Y6(e.type||e),null!=e.gamma&&(t.interpolateGamma=Y6(e.gamma))}(e.interpolate,a),null!=e.nice&&(a.nice=v4(r=e.nice)?{interval:Y6(r.interval),step:Y6(r.step)}:Y6(r)),null!=e.bins&&(a.bins=function(e,t){return e.signal||p4(e)?K6(e,t):t.objectProperty(e)}(e.bins,t)),e)O4(a,n)||"name"===n||(a[n]=Y6(e[n],t))}function Y6(e,t){return v4(e)?e.signal?t.signalRef(e.signal):f4("Unsupported object: "+j4(e)):e}function K6(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return Y6(e,t)}))}function $6(e){f4("Can not find data set: "+j4(e))}function Z6(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(p4(e)?J6:e.fields?e8:Q6)(e,t,n);null==t.domainMin&&null==t.domainMax||f4("No scale domain defined for domainMin/domainMax to override.")}function J6(e,t,n){return e.map((function(e){return Y6(e,n)}))}function Q6(e,t,n){var r=n.getData(e.data);return r||$6(e.data),P6(t.type)?r.valuesRef(n,e.field,n8(e.sort,!1)):B6(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function e8(e,t,n){var r=e.data,a=e.fields.reduce((function(e,t){return t=S4(t)?{data:r,field:t}:p4(t)||t.signal?function(e,t){var n="_:vega:_"+q6++,r=B5({});if(p4(e))r.value={$ingest:e};else if(e.signal){var a="setdata("+j4(n)+","+e.signal+")";r.params.input=t.signalRef(a)}return t.addDataPipeline(n,[r,o6({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(P6(t.type)?t8:B6(t.type)?r8:a8)(e,n,a)}function t8(e,t,n){var r,a,i=n8(e.sort,!0),o=n.map((function(e){var n=t.getData(e.data);return n||$6(e.data),n.countsRef(t,e.field,i)})),u={groupby:i5,pulse:o};i&&(r=i.op||"count",a=i.field?u5(r,i.field):"count",u.ops=[H6[r]],u.fields=[t.fieldRef(a)],u.as=[a]),r=t.add(R5(u));var s=t.add(B5({pulse:r5(r)}));return a=t.add(c6({field:i5,sort:t.sortRef(i),pulse:r5(s)})),r5(a)}function n8(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!H6[e.op]&&f4("Multiple domain scales can not be sorted using "+e.op):f4("No field provided for sort aggregate op: "+e.op):v4(e)?e.field="key":e={field:"key"}),e}function r8(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||$6(e.data),n.domainRef(t,e.field)}));return r5(t.add(Z5({values:r})))}function a8(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||$6(e.data),n.extentRef(t,e.field)}));return r5(t.add($5({extents:r})))}function i8(e,t,n){var r=t.config.range,a=e.range;if(a.signal)return t.signalRef(a.signal);if(S4(a)){if(r&&O4(r,a))return i8(e=w4({},e,{range:r[a]}),t,n);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=P6(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:f4("Unrecognized scale range value: "+j4(a))}else{if(a.scheme)return n.scheme=p4(a.scheme)?K6(a.scheme,t):Y6(a.scheme,t),a.extent&&(n.schemeExtent=K6(a.extent,t)),void(a.count&&(n.schemeCount=Y6(a.count,t)));if(a.step)return void(n.rangeStep=Y6(a.step,t));if(P6(e.type)&&!p4(a))return Z6(a,e,t);p4(a)||f4("Unsupported range type: "+j4(a))}return a.map((function(e){return(p4(e)?K6:Y6)(e,t)}))}function o8(e,t,n){return p4(e)?e.map((function(e){return o8(e,t,n)})):v4(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:f4("Unsupported parameter object: "+j4(e)):e}var u8="top",s8="left",c8="right",l8="bottom",f8="center",d8="index",h8="label",p8="perc",v8="value",m8="guide-label",g8="guide-title",b8="group-title",y8="group-subtitle",x8="symbol",_8="gradient",w8="discrete",k8="size",O8=[k8,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],S8={name:1,style:1,interactive:1},j8={value:0},E8={value:1},C8="group",A8="rect",T8="rule",N8="text",M8=function(e){return e.type=C8,e.interactive=e.interactive||!1,e};function D8(e,t){var n=function(n,r){return d5(e[n],d5(t[n],r))};return n.isVertical=function(n){return"vertical"===d5(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection))},n.gradientLength=function(){return d5(e.gradientLength,t.gradientLength||t.gradientWidth)},n.gradientThickness=function(){return d5(e.gradientThickness,t.gradientThickness||t.gradientHeight)},n.entryColumns=function(){return d5(e.columns,d5(t.columns,+n.isVertical(!0)))},n}function I8(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function F8(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}var R8=F8(j4(s8),j4(c8),j4(f8));function P8(e,t){return t?e?v4(e)?Object.assign({},e,{offset:P8(e.offset,t)}):{value:e,offset:t}:t:e}var L8=function(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=D4(e.encode,t,S8)):e.interactive=!1,e},B8=function(e,t,n,r){var a,i,o,u,s,c=D8(e,n),l=c.isVertical(),f=c.gradientThickness(),d=c.gradientLength();l?(i=[0,1],o=[0,0],u=f,s=d):(i=[0,0],o=[1,0],u=d,s=f);var h={enter:a={opacity:j8,x:j8,y:j8,width:T4(u),height:T4(s)},update:w4({},a,{opacity:E8,fill:{gradient:t,start:i,stop:o}}),exit:{opacity:j8}};return M4(h,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),L8({type:A8,role:"legend-gradient",encode:h},r)},z8=function(e,t,n,r,a){var i,o,u,s,c=D8(e,n),l=c.isVertical(),f=c.gradientThickness(),d=c.gradientLength(),h="";l?(i="y",u="y2",o="x",s="width",h="1-"):(i="x",u="x2",o="y",s="height");var p={opacity:j8,fill:{scale:t,field:v8}};p[i]={signal:h+"datum."+p8,mult:d},p[o]=j8,p[u]={signal:h+"datum.perc2",mult:d},p[s]=T4(f);var v={enter:p,update:w4({},p,{opacity:E8}),exit:{opacity:j8}};return M4(v,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),L8({type:A8,role:"legend-band",key:v8,from:a,encode:v},r)},U8="datum.".concat(p8,'<=0?"').concat(s8,'":datum.').concat(p8,'>=1?"').concat(c8,'":"').concat(f8,'"'),W8="datum.".concat(p8,'<=0?"').concat(l8,'":datum.').concat(p8,'>=1?"').concat(u8,'":"').concat("middle",'"'),V8=function(e,t,n,r){var a,i,o,u,s=D8(e,t),c=s.isVertical(),l=T4(s.gradientThickness()),f=s.gradientLength(),d=s("labelOverlap"),h="",p={enter:a={opacity:j8},update:i={opacity:E8,text:{field:h8}},exit:{opacity:j8}};return M4(p,{fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:d5(e.labelLimit,t.gradientLabelLimit)}),c?(a.align={value:"left"},a.baseline=i.baseline={signal:W8},o="y",u="x",h="1-"):(a.align=i.align={signal:U8},a.baseline={value:"top"},o="x",u="y"),a[o]=i[o]={signal:h+"datum."+p8,mult:f},a[u]=i[u]=l,l.offset=d5(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:s("labelSeparation"),method:d,order:"datum.index"}:void 0,L8({type:N8,role:L4,style:m8,key:v8,from:r,encode:p,overlap:d},n)},G8=function(e,t,n,r,a){var i,o,u,s,c,l=D8(e,t),f=n.entries,d=!(!f||!f.interactive),h=f?f.name:void 0,p=l("clipHeight"),v=l("symbolOffset"),m={data:"value"},g="(".concat(a,") ? datum.").concat("offset"," : datum.").concat(k8),b=p?T4(p):{field:k8},y="datum.".concat(d8),x="max(1, ".concat(a,")");b.mult=.5,i={enter:o={opacity:j8,x:{signal:g,mult:.5,offset:v},y:b},update:u={opacity:E8,x:o.x,y:o.y},exit:{opacity:j8}};var _=null,w=null;e.fill||(_=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),M4(i,{fill:l("symbolFillColor",_),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",w),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),O8.forEach((function(t){e[t]&&(u[t]=o[t]={scale:e[t],field:v8})}));var k=L8({type:"symbol",role:"legend-symbol",key:v8,from:m,clip:!!p||void 0,encode:i},n.symbols),O=T4(v);O.offset=l("labelOffset"),M4(i={enter:o={opacity:j8,x:{signal:g,offset:O},y:b},update:u={opacity:E8,text:{field:h8},x:o.x,y:o.y},exit:{opacity:j8}},{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});var S=L8({type:N8,role:L4,style:m8,key:v8,from:m,encode:i},n.labels);return i={enter:{noBound:{value:!p},width:j8,height:p?T4(p):j8,opacity:j8},exit:{opacity:j8},update:u={opacity:E8,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(s="ceil(item.mark.items.length / ".concat(x,")"),u.row.signal="".concat(y,"%").concat(s),u.column.signal="floor(".concat(y," / ").concat(s,")"),c={field:["row",y]}):(u.row.signal="floor(".concat(y," / ").concat(x,")"),u.column.signal="".concat(y," % ").concat(x),c={field:y}),u.column.signal="(".concat(a,")?").concat(u.column.signal,":").concat(y),M8({role:P4,from:r={facet:{data:r,name:"value",groupby:d8}},encode:D4(i,f,S8),marks:[k,S],name:h,interactive:d,sort:c})};var q8='item.orient === "left"',H8='item.orient === "right"',X8="(".concat(q8," || ").concat(H8,")"),Y8="datum.vgrad && ".concat(X8),K8=F8('"top"','"bottom"','"middle"'),$8=F8('"right"','"left"','"center"'),Z8="datum.vgrad && ".concat(H8," ? (").concat($8,") : (").concat(X8," && !(datum.vgrad && ").concat(q8,')) ? "left" : ').concat(R8),J8="item._anchor || (".concat(X8,' ? "middle" : "start")'),Q8="".concat(Y8," ? (").concat(q8," ? -90 : 90) : 0"),e7="".concat(X8," ? (datum.vgrad ? (").concat(H8,' ? "bottom" : "top") : ').concat(K8,') : "top"'),t7=function(e,t){var n;return v4(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+n7(e.path)+")":e.sphere&&(n="geoShape("+n7(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e};function n7(e){return v4(e)&&e.signal?e.signal:j4(e)}var r7=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===C8?P4:t||F4:t},a7=function(e){return{marktype:e.type,name:e.name||void 0,role:e.role||r7(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}},i7=function(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e},o7=function(e,t){var n=Qn(e.type);n||f4("Unrecognized transform type: "+j4(e.type));var r=t5(n.type.toLowerCase(),null,u7(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r};function u7(e,t,n){for(var r={},a=e.params.length,i=0;i<a;++i){var o=e.params[i];r[o.name]=s7(o,t,n)}return r}function s7(e,t,n){var r=e.type,a=t[e.name];return"index"===r?function(e,t,n){S4(t.from)||f4('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==a?"param"===r?function(e,t,n){var r=t[e.name];return e.array?(p4(r)||f4("Expected an array of sub-parameters. Instead: "+j4(r)),r.map((function(t){return l7(e,t,n)}))):l7(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!l5(a)?a.map((function(t){return c7(e,t,n)})):c7(e,a,n):void(e.required&&f4("Missing required "+j4(t.type)+" parameter: "+j4(e.name)))}function c7(e,t,n){var r=e.type;if(l5(t))return p7(r)?f4("Expression references can not be signals."):v7(r)?n.fieldRef(t):m7(r)?n.compareRef(t):n.signalRef(t.signal);var a=e.expr||v7(r);return a&&f7(t)?n.exprRef(t.expr,t.as):a&&d7(t)?a5(t.field,t.as):p7(r)?h3(t,n):h7(r)?r5(n.getData(t).values):v7(r)?a5(t):m7(r)?n.compareRef(t):t}function l7(e,t,n){for(var r,a=e.params.length,i=0;i<a;++i){for(var o in(r=e.params[i]).key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||f4("Unsupported parameter: "+j4(t));var u=w4(u7(r,t,n),r.key);return r5(n.add(Q5(u)))}var f7=function(e){return e&&e.expr},d7=function(e){return e&&e.field},h7=function(e){return"data"===e},p7=function(e){return"expr"===e},v7=function(e){return"field"===e},m7=function(e){return"compare"===e};function g7(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:r5(t.getData(e.data).output)}function b7(e,t,n,r,a){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=a,this.index={}}function y7(e){return S4(e)?e:null}function x7(e,t,n){var r,a=u5(n.op,n.field);if(t.ops){for(var i=0,o=t.as.length;i<o;++i)if(t.as[i]===a)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(a))}function _7(e,t,n,r,a,i,o){var u,s,c=t[n]||(t[n]={}),l=function(e){return v4(e)?("descending"===e.order?"-":"+")+u5(e.op,e.field):""}(i),f=y7(a);if(null!=f&&(e=t.scope,u=c[f+=l?"|"+l:""]),!u){var d=i?{field:i5,pulse:t.countsRef(e,a,i)}:{field:e.fieldRef(a),pulse:r5(t.output)};l&&(d.sort=e.sortRef(i)),s=e.add(t5(r,void 0,d)),o&&(t.index[a]=s),u=r5(s),null!=f&&(c[f]=u)}return u}b7.fromEntries=function(e,t){var n=t.length,r=t[n-1],a=t[n-2],i=t[0],o=null,u=1;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=r5(t[u-1]),e.add(t[u]),"aggregate"===t[u].type&&(o=t[u]);return new b7(e,i,a,r,o)},b7.prototype={countsRef:function(e,t,n){var r,a,i,o=this,u=o.counts||(o.counts={}),s=y7(t);return null!=s&&(e=o.scope,r=u[s]),r?n&&n.field&&x7(e,r.agg.params,n):(i={groupby:e.fieldRef(t,"key"),pulse:r5(o.output)},n&&n.field&&x7(e,i,n),a=e.add(R5(i)),r=e.add(B5({pulse:r5(a)})),r={agg:a,ref:r5(r)},null!=s&&(u[s]=r)),r.ref},tuplesRef:function(){return r5(this.values)},extentRef:function(e,t){return _7(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return _7(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return _7(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return _7(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return _7(e,this,"indata","tupleindex",t,!0,!0)}};var w7=function(e,t,n){var r=e.remove,a=e.insert,i=e.toggle,o=e.modify,u=e.values,s=t.add(n5()),c="if("+e.trigger+',modify("'+n+'",'+[a,r,i,o,u].map((function(e){return null==e?"null":e})).join(",")+"),0)",l=h3(c,t);s.update=l.$expr,s.params=l.$params},k7=function(e,t){var n,r,a,i,o,u,s,c=r7(e),l=e.type===C8,f=e.from&&e.from.facet,d=e.overlap,h=e.layout||c===P4||c===R4,p=c===F4||h||f,v=function(e,t,n){var r,a,i,o,u;return e?(r=e.facet)&&(t||f4("Only group marks can be faceted."),null!=r.field?o=u=g7(r,n):(e.data?u=r5(n.getData(e.data).aggregate):((i=o7(w4({type:"aggregate",groupby:_4(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),i.params.pulse=g7(r,n),o=u=r5(n.add(i))),a=n.keyRef(r.groupby,!0))):o=r5(n.add(B5(null,[{}]))),o||(o=g7(e,n)),{key:a,pulse:o,parent:u}}(e.from,l,t),m=r5(r=t.add(U5({key:v.key||(e.key?a5(e.key):void 0),pulse:v.pulse,clean:!l})));r=a=t.add(B5({pulse:m})),r=t.add(K5({markdef:a7(e),interactive:i7(e.interactive,t),clip:t7(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:r5(r)}));var g=r5(r);(r=i=t.add(W5(Y4(e.encode,e.type,c,e.style,t,{mod:!1,pulse:g})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=o7(e,t),a=n.metadata;(a.generates||a.changes)&&f4("Mark transforms should not generate new data."),a.nomod||(i.params.mod=!0),n.params.pulse=r5(r),t.add(r=n)})),e.sort&&(r=t.add(u6({sort:t.compareRef(e.sort),pulse:r5(r)})));var b=r5(r);(f||h)&&(u=r5(h=t.add(s6({layout:t.objectProperty(e.layout),legends:t.legends,mark:g,pulse:b}))));var y=t.add(L5({mark:g,pulse:u||b}));s=r5(y),l&&(p&&((n=t.operators).pop(),h&&n.pop()),t.pushState(b,u||s,m),f?function(e,t,n){var r,a=e.from.facet,i=a.name,o=g7(a,t);a.name||f4("Facet must have a name: "+j4(a)),a.data||f4("Facet must reference a data set: "+j4(a)),a.field?r=t.add(e6({field:t.fieldRef(a.field),pulse:o})):a.groupby?r=t.add(G5({key:t.keyRef(a.groupby),group:r5(t.proxy(n.parent)),pulse:o})):f4("Facet must specify groupby or field: "+j4(a));var u=t.fork(),s=u.add(B5()),c=u.add(o6({pulse:r5(s)}));u.addData(i,new b7(u,s,s,c)),u.addSignal("parent",null),r.params.subflow={$subflow:u.parse(e).toRuntime()}}(e,t,v):p?function(e,t,n){var r=t.add(e6({pulse:n.pulse})),a=t.fork();a.add(o6()),a.addSignal("parent",null),r.params.subflow={$subflow:a.parse(e).toRuntime()}}(e,t,v):t.parse(e),t.popState(),p&&(h&&n.push(h),n.push(y))),d&&(s=function(e,t,n){var r=e.method,a=e.bound,i=e.separation,o={separation:l5(i)?n.signalRef(i.signal):i,method:l5(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(o.sort=n.compareRef({field:e.order}));if(a){var u=a.tolerance;o.boundTolerance=l5(u)?n.signalRef(u.signal):+u,o.boundScale=n.scaleRef(a.scale),o.boundOrient=a.orient}return r5(n.add(J5(o)))}(d,s,t));var x=t.add(a6({pulse:s})),_=t.add(o6({pulse:r5(x)},void 0,t.parent()));null!=e.name&&(o=e.name,t.addData(o,new b7(t,a,x,_)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&f4("Marks only support modify triggers."),w7(e,t,o)})))};var O7=function(e,t){var n,r,a,i=t.config.legend,o=e.encode||{},u=D8(e,i),s=o.legend||{},c=s.name||void 0,l=s.interactive,f=s.style,d={},h=0;O8.forEach((function(t){return e[t]?(d[t]=e[t],h=h||e[t]):0})),h||f4("Missing valid scale for legend.");var p=function(e,t){var n=e.type||x8;e.type||1!==function(e){return O8.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=R6(t,w6)?_8:L6(t)?w8:x8);return n!==_8?n:L6(t)?w8:_8}(e,t.scaleType(h)),v={title:null!=e.title,scales:d,type:p,vgrad:"symbol"!==p&&u.isVertical()},m=r5(t.add(B5(null,[v]))),g=r5(t.add(X5(r={type:p,scale:t.scaleRef(h),count:t.objectProperty(u("tickCount")),limit:t.property(u("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===_8?(a=[B8(e,h,i,o.gradient),V8(e,i,o.labels,g)],r.count=r.count||t.signalRef("max(2,2*floor((".concat(h5(u.gradientLength()),")/100))"))):p===w8?a=[z8(e,h,i,o.gradient,g),V8(e,i,o.labels,g)]:(n=function(e,t){var n=D8(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,i),a=[G8(e,i,o,g,h5(n.columns))],r.size=function(e,t,n){var r=h5(j7("size",e,n)),a=h5(j7("strokeWidth",e,n)),i=h5(function(e,t,n){return I8("fontSize",e)||function(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,m8));return h3("max(ceil(sqrt(".concat(r,")+").concat(a,"),").concat(i,")"),t)}(e,t,a[0].marks)),a=[M8({role:"legend-entry",from:m,encode:{enter:{x:{value:0},y:{value:0}}},marks:a,layout:n,interactive:l})],v.title&&a.push(function(e,t,n,r){var a=D8(e,t),i={enter:{opacity:j8},update:{opacity:E8,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:j8}};return M4(i,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:J8},angle:{signal:Q8},align:{signal:Z8},baseline:{signal:e7},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),L8({type:N8,role:"legend-title",style:g8,from:r,encode:i},n)}(e,i,o.title,m)),k7(M8({role:"legend",from:m,encode:D4(S7(u,e,i),s,S8),marks:a,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:c,interactive:l,style:f}),t)};function S7(e,t,n){var r={enter:{},update:{}};return M4(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function j7(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):I8(e,n[0].encode)}var E7='item.orient==="'.concat(s8,'"?-90:item.orient==="').concat(c8,'"?90:0'),C7=function(e,t){var n=D8(e=S4(e)?{text:e}:e,t.config.title),r=e.encode||{},a=r.group||{},i=a.name||void 0,o=a.interactive,u=a.style,s=[],c=r5(t.add(B5(null,[{}])));return s.push(function(e,t,n,r){var a={value:0},i=e.text,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return M4(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),L8({type:N8,role:B4,style:b8,from:r,encode:o},n)}(e,n,function(e){var t=e.encode;return t&&t.title||w4({name:e.name,interactive:e.interactive,style:e.style},t)}(e),c)),e.subtitle&&s.push(function(e,t,n,r){var a={value:0},i=e.subtitle,o={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return M4(o,{text:i,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),L8({type:N8,role:z4,style:y8,from:r,encode:o},n)}(e,n,r.subtitle,c)),k7(M8({role:"title",from:c,encode:A7(n,a),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:i,interactive:o,style:u}),t)};function A7(e,t){var n={enter:{},update:{}};return M4(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:R8},angle:{signal:E7},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),D4(n,t,S8)}function T7(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(o7(e,t))})),e.on&&e.on.forEach((function(n){w7(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){var r,a,i,o,u,s=[],c=null,l=!1,f=!1;e.values?f5(e.values)||f5(e.format)?(s.push(M7(t,e)),s.push(c=N7())):s.push(c=N7({$ingest:e.values,$format:e.format})):e.url?f5(e.url)||f5(e.format)?(s.push(M7(t,e)),s.push(c=N7())):s.push(c=N7({$request:e.url,$format:e.format})):e.source&&(c=r=_4(e.source).map((function(e){return r5(t.getData(e).output)})),s.push(null));for(a=0,i=n.length;a<i;++a)u=(o=n[a]).metadata,c||u.source||s.push(c=N7()),s.push(o),u.generates&&(f=!0),u.modifies&&!f&&(l=!0),u.source?c=o:u.changes&&(c=null);r&&(i=r.length-1,s[0]=r6({derive:l,pulse:i?r:r[0]}),(l||i)&&s.splice(1,0,N7()));c||s.push(N7());return s.push(o6({})),s}(e,t,n))}function N7(e){var t=B5({},e);return t.metadata={source:!0},t}function M7(e,t){return Y5({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}var D7=function(e){return e===l8||e===u8},I7=function(e,t,n){return l5(e)?z7(e.signal,t,n):e===s8||e===u8?t:n},F7=function(e,t,n){return l5(e)?L7(e.signal,t,n):D7(e)?t:n},R7=function(e,t,n){return l5(e)?B7(e.signal,t,n):D7(e)?n:t},P7=function(e,t,n){return l5(e)?U7(e.signal,t,n):e===u8?{value:t}:{value:n}},L7=function(e,t,n){return V7("".concat(e," === '").concat(u8,"' || ").concat(e," === '").concat(l8,"'"),t,n)},B7=function(e,t,n){return V7("".concat(e," !== '").concat(u8,"' && ").concat(e," !== '").concat(l8,"'"),t,n)},z7=function(e,t,n){return q7("".concat(e," === '").concat(s8,"' || ").concat(e," === '").concat(u8,"'"),t,n)},U7=function(e,t,n){return q7("".concat(e," === '").concat(u8,"'"),t,n)},W7=function(e,t,n){return q7("".concat(e," === '").concat(c8,"'"),t,n)},V7=function(e,t,n){return t=null!=t?T4(t):t,n=null!=n?T4(n):n,G7(t)&&G7(n)?(t=t?t.signal||j4(t.value):null,n=n?n.signal||j4(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[w4({test:e},t)].concat(n||[])},G7=function(e){return null==e||1===Object.keys(e).length},q7=function(e,t,n){return{signal:"".concat(e," ? (").concat(H7(t),") : (").concat(H7(n),")")}},H7=function(e){return l5(e)?e.signal:null==e?null:j4(e)},X7=function(e,t){var n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Y7(e,t,n,r){var a;if(t&&O4(t,e))return t[e];if(O4(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][a]}if(e.startsWith("label")){switch(e){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][a]}return null}function K7(e){var t,n={},r=Object(tr.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a)for(var i in a)n[i]=1}}catch(o){r.e(o)}finally{r.f()}return Object.keys(n)}function $7(e,t){return{scale:e.scale,range:t}}var Z7=function(e,t,n,r,a){var i,o,u,s=D8(e,t),c=e.orient,l=e.gridScale,f=I7(c,1,-1),d=function(e,t){if(1===t);else if(v4(e)){for(var n=e=w4({},e);null!=n.mult;){if(!v4(n.mult))return n.mult=l5(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=w4({},n.mult)}n.mult=t}else e=l5(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,f),h={enter:i={opacity:j8},update:u={opacity:E8},exit:o={opacity:j8}};M4(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});var p={scale:e.scale,field:v8,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")},v=F7(c,{signal:"height"},{signal:"width"}),m=l?{scale:l,range:0,mult:f,offset:d}:{value:0,offset:d},g=l?{scale:l,range:1,mult:f,offset:d}:w4(v,{mult:f,offset:d});return i.x=u.x=F7(c,p,m),i.y=u.y=R7(c,p,m),i.x2=u.x2=R7(c,g),i.y2=u.y2=F7(c,g),o.x=F7(c,p),o.y=R7(c,p),L8({type:T8,role:"axis-grid",key:v8,from:r,encode:h},n)};function J7(e,t,n,r,a){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+a+")"}}var Q7=function(e,t,n,r,a,i){var o,u=D8(e,t),s=e.orient,c=e.scale,l=I7(s,-1,1),f=h5(u("labelFlush")),d=h5(u("labelFlushOffset")),h=u("labelAlign"),p=u("labelBaseline"),v=0===f||!!f,m=T4(a);m.mult=l,m.offset=T4(u("labelPadding")||0),m.offset.mult=l;var g={scale:c,field:v8,band:.5,offset:P8(i.offset,u("labelOffset"))},b=F7(s,v?J7(c,f,'"left"','"right"','"center"'):{value:"center"},function(e,t,n){return l5(e)?W7(e.signal,t,n):e===c8?{value:t}:{value:n}}(s,"left","right")),y=F7(s,P7(s,"bottom","top"),v?J7(c,f,'"top"','"bottom"','"middle"'):{value:"middle"}),x=J7(c,f,"-(".concat(d,")"),d,0);v=v&&d;var _={opacity:j8,x:F7(s,g,m),y:R7(s,g,m)},w={enter:_,update:o={opacity:E8,text:{field:h8},x:_.x,y:_.y,align:b,baseline:y},exit:{opacity:j8,x:_.x,y:_.y}};M4(w,{dx:!h&&v?F7(s,x):null,dy:!p&&v?R7(s,x):null}),M4(w,{angle:u("labelAngle"),fill:u("labelColor"),fillOpacity:u("labelOpacity"),font:u("labelFont"),fontSize:u("labelFontSize"),fontWeight:u("labelFontWeight"),fontStyle:u("labelFontStyle"),limit:u("labelLimit"),lineHeight:u("labelLineHeight")},{align:h,baseline:p});var k=u("labelBound"),O=u("labelOverlap");return O=O||k?{separation:u("labelSeparation"),method:O,order:"datum.index",bound:k?{scale:c,orient:s,tolerance:k}:null}:void 0,o.align!==b&&(o.align=X7(o.align,b)),o.baseline!==y&&(o.baseline=X7(o.baseline,y)),L8({type:N8,role:"axis-label",style:m8,key:v8,from:r,encode:w,overlap:O},n)},e9=function(e,t,n,r){var a,i,o=D8(e,t),u=e.orient,s=I7(u,-1,1),c={enter:a={opacity:j8,anchor:T4(o("titleAnchor",null)),align:{signal:R8}},update:i=w4({},a,{opacity:E8,text:T4(e.title)}),exit:{opacity:j8}},l={signal:'lerp(range("'.concat(e.scale,'"), ').concat(F8(0,1,.5),")")};return i.x=F7(u,l),i.y=R7(u,l),a.angle=F7(u,j8,function(e,t){return 0===t?0:l5(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t}}(s,90)),a.baseline=F7(u,P7(u,l8,u8),{value:l8}),i.angle=a.angle,i.baseline=a.baseline,M4(c,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),function(e,t,n,r){var a=function(e,t){return null!=e?(n.update[t]=X7(T4(e),n.update[t]),!1):!I4(t,r)},i=a(e("titleX"),"x"),o=a(e("titleY"),"y");n.enter.auto=o===i?T4(o):F7(t,T4(o),T4(i))}(o,u,c,n),c.update.align=X7(c.update.align,a.align),c.update.angle=X7(c.update.angle,a.angle),c.update.baseline=X7(c.update.baseline,a.baseline),L8({type:N8,role:"axis-title",style:g8,from:r,encode:c},n)};var t9=function(e,t){var n,r=function(e,t){var n,r,a,i,o,u,s,c,l=t.config,f=l.style,d=l.axis,h="band"===t.scaleType(e.scale)&&l.axisBand,p=e.orient;if(l5(p)){var v=K7([l.axisX,l.axisY]),m=K7([l.axisTop,l.axisBottom,l.axisLeft,l.axisRight]);n={};var g,b=Object(tr.a)(v);try{for(b.s();!(g=b.n()).done;)n[a=g.value]=F7(p,Y7(a,l.axisX,d,f),Y7(a,l.axisY,d,f))}catch(_){b.e(_)}finally{b.f()}r={};var y,x=Object(tr.a)(m);try{for(x.s();!(y=x.n()).done;)r[a=y.value]=(i=p.signal,o=Y7(a,l.axisTop,d,f),u=Y7(a,l.axisBottom,d,f),s=Y7(a,l.axisLeft,d,f),c=Y7(a,l.axisRight,d,f),{signal:(null!=s?"".concat(i," === '").concat(s8,"' ? (").concat(H7(s),") : "):"")+(null!=u?"".concat(i," === '").concat(l8,"' ? (").concat(H7(u),") : "):"")+(null!=c?"".concat(i," === '").concat(c8,"' ? (").concat(H7(c),") : "):"")+(null!=o?"".concat(i," === '").concat(u8,"' ? (").concat(H7(o),") : "):"")+"(null)"})}catch(_){x.e(_)}finally{x.f()}}else n=p===u8||p===l8?l.axisX:l.axisY,r=l["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?w4({},d,n,r,h):d}(e,t),a=e.encode||{},i=a.axis||{},o=i.name||void 0,u=i.interactive,s=i.style,c=D8(e,r),l=function(e){var t,n,r=e("tickBand"),a=e("tickOffset");return r?r.signal?(t={signal:"(".concat(r.signal,") === 'extent' ? 1 : 0.5")},n={signal:"(".concat(r.signal,") === 'extent'")},v4(a)||(a={signal:"(".concat(r.signal,") === 'extent' ? 0 : ").concat(a)})):"extent"===r?(t=1,n=!0,a=0):(t=.5,n=!1):(t=e("bandPosition"),n=e("tickExtra")),{extra:n,band:t,offset:a}}(c),f={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:null!=e.title},d=r5(t.add(B5({},[f]))),h=r5(t.add(P5({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];return f.grid&&p.push(Z7(e,r,a.grid,h,l)),f.ticks&&(n=c("tickSize"),p.push(function(e,t,n,r,a,i){var o,u,s,c=D8(e,t),l=e.orient,f=I7(l,-1,1),d={enter:o={opacity:j8},update:s={opacity:E8},exit:u={opacity:j8}};M4(d,{stroke:c("tickColor"),strokeCap:c("tickCap"),strokeDash:c("tickDash"),strokeDashOffset:c("tickDashOffset"),strokeOpacity:c("tickOpacity"),strokeWidth:c("tickWidth")});var h=T4(a);h.mult=f;var p={scale:e.scale,field:v8,band:i.band,extra:i.extra,offset:i.offset,round:c("tickRound")};return s.y=o.y=F7(l,j8,p),s.y2=o.y2=F7(l,h),u.x=F7(l,p),s.x=o.x=R7(l,j8,p),s.x2=o.x2=R7(l,h),u.y=R7(l,p),L8({type:T8,role:"axis-tick",key:v8,from:r,encode:d},n)}(e,r,a.ticks,h,n,l))),f.labels&&(n=f.ticks?n:0,p.push(Q7(e,r,a.labels,h,n,l))),f.domain&&p.push(function(e,t,n,r){var a,i,o=D8(e,t),u=e.orient,s={enter:a={opacity:j8},update:i={opacity:E8},exit:{opacity:j8}};M4(s,{stroke:o("domainColor"),strokeCap:o("domainCap"),strokeDash:o("domainDash"),strokeDashOffset:o("domainDashOffset"),strokeWidth:o("domainWidth"),strokeOpacity:o("domainOpacity")});var c=$7(e,0),l=$7(e,1);return a.x=i.x=F7(u,c,j8),a.x2=i.x2=F7(u,l),a.y=i.y=R7(u,c,j8),a.y2=i.y2=R7(u,l),L8({type:T8,role:"axis-domain",from:r,encode:s},n)}(e,r,a.domain,d)),f.title&&p.push(e9(e,r,a.title,d)),k7(M8({role:"axis",from:d,encode:D4(n9(c,e),i,S8),marks:p,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:o,interactive:u,style:s}),t)};function n9(e,t){var n={enter:{},update:{}};return M4(n,{orient:e("orient"),offset:e("offset")||0,position:d5(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}var r9=function(e,t,n){var r=_4(e.signals),a=_4(e.scales);return n||r.forEach((function(e){return Q4(e,t)})),_4(e.projections).forEach((function(e){return function(e,t){var n=t.config.projection||{},r={};for(var a in e)"name"!==a&&(r[a]=o8(e[a],a,t));for(var i in n)null==r[i]&&(r[i]=o8(n[i],i,t));t.addProjection(e.name,r)}(e,t)})),a.forEach((function(e){return function(e,t){var n=e.type||"linear";F6(n)||f4("Unrecognized scale type: "+j4(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)})),_4(e.data).forEach((function(e){return T7(e,t)})),a.forEach((function(e){return X6(e,t)})),(n||r).forEach((function(e){return function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?f4("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=h3(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){return N5(e,t,n.id)}))}(e,t)})),_4(e.axes).forEach((function(e){return t9(e,t)})),_4(e.marks).forEach((function(e){return k7(e,t)})),_4(e.legends).forEach((function(e){return O7(e,t)})),e.title&&C7(e.title,t),t.parseLambdas(),t};function a9(e,t){var n=t.config,r=r5(t.root=t.add(n5())),a=function(e,t){var n=function(n){return d5(e[n],t[n])},r=[i9("background",n("background")),i9("autosize",E4(n("autosize"))),i9("padding",A4(n("padding"))),i9("width",n("width")||0),i9("height",n("height")||0)],a=r.reduce((function(e,t){return e[t.name]=t,e}),{}),i={};return _4(e.signals).forEach((function(e){O4(a,e.name)?e=w4(a[e.name],e):r.push(e),i[e.name]=e})),_4(t.signals).forEach((function(e){O4(i,e.name)||O4(a,e.name)||r.push(e)})),r}(e,n);a.forEach((function(e){return Q4(e,t)})),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;var i=t.add(B5()),o=t.add(W5(Y4(function(e){return D4({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e)}(e.encode),C8,R4,e.style,t,{pulse:r5(i)}))),u=t.add(s6({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:r5(o)}));t.operators.pop(),t.pushState(r5(o),r5(u),null),r9(e,t,a),t.operators.push(u);var s=t.add(L5({mark:r,pulse:r5(u)}));return s=t.add(a6({pulse:r5(s)})),s=t.add(o6({pulse:r5(s)})),t.addData("root",new b7(t,i,i,s)),t}function i9(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function o9(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function u9(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function s9(e){return(p4(e)?c9:l9)(e)}function c9(e){for(var t=e.length,n="[",r=0;r<t;++r){var a=e[r];n+=(r>0?",":"")+(v4(a)?a.signal||s9(a):j4(a))}return n+"]"}function l9(e){var t,n,r="{",a=0;for(t in e)n=e[t],r+=(++a>1?",":"")+j4(t)+":"+(v4(n)?n.signal||s9(n):j4(n));return r+"}"}o9.prototype=u9.prototype={parse:function(e){return r9(e,this)},fork:function(){return new u9(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},proxy:function(e){var t=e instanceof e5?r5(e):e;return this.add(n6({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var r in n((t=this.data[e]).input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values"),t.index)n(t.index[r],e,"index:"+r);return this},pushState:function(e,t,n){this._encode.push(r5(this.add(o6({pulse:e})))),this._parent.push(t),this._lookup.push(n?r5(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return y4(this._parent)},encode:function(){return y4(this._encode)},lookup:function(){return y4(this._lookup)},markpath:function(){var e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(S4(e))return a5(e,t);e.signal||f4("Unsupported field reference: "+j4(e));var n=e.signal,r=this.field[n];if(!r){var a={name:this.signalRef(n)};t&&(a.as=t),this.field[n]=r=r5(this.add(q5(a)))}return r},compareRef:function(e){var t=this,n=!1,r=function(e){return l5(e)?(n=!0,t.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(n=!0,t.exprRef(e.expr)):e},a=_4(e.field).map(r),i=_4(e.order).map(r);return n?r5(this.add(z5({fields:a,orders:i}))):o5(a,i)},keyRef:function(e,t){var n=!1,r=this.signals;return e=_4(e).map((function(e){return l5(e)?(n=!0,r5(r[e.signal])):e})),n?r5(this.add(H5({fields:e,flat:t}))):function(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;var t=u5(e.op,e.field),n=e.order||"ascending";return n.signal?r5(this.add(z5({fields:t,orders:this.signalRef(n.signal)}))):o5(t,n)},event:function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return O4(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&f4("Duplicate signal name: "+j4(e));var n=t instanceof e5?t:this.add(n5(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||f4("Unrecognized signal name: "+j4(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?r5(this.signals[e]):(O4(this.lambdas,e)||(this.lambdas[e]=this.add(n5(null))),r5(this.lambdas[e]))},parseLambdas:function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],a=h3(r,this),i=this.lambdas[r];i.params=a.$params,i.update=a.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&v4(e)?this.signalRef(e.signal||s9(e)):e},exprRef:function(e,t){var n={expr:h3(e,this)};return t&&(n.expr.$name=t),r5(this.add(V5(n)))},addBinding:function(e,t){this.bindings||f4("Nested signals do not support binding: "+j4(e)),this.bindings.push(w4({signal:e},t))},addScaleProj:function(e,t){O4(this.scales,e)&&f4("Duplicate scale or projection name: "+j4(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,i6(t))},addProjection:function(e,t){this.addScaleProj(e,t6(t))},getScale:function(e){return this.scales[e]||f4("Unrecognized scale name: "+j4(e)),this.scales[e]},scaleRef:function(e){return r5(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return O4(this.data,e)&&f4("Duplicate data set name: "+j4(e)),this.data[e]=t},getData:function(e){return this.data[e]||f4("Undefined data set name: "+j4(e)),this.data[e]},addDataPipeline:function(e,t){return O4(this.data,e)&&f4("Duplicate data set name: "+j4(e)),this.addData(e,b7.fromEntries(this,t))}};var f9=function(e,t,n){return v4(e)||f4("Input Vega specification must be an object."),a9(e,new o9(t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=b4(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;g4(e,n,t[n],r)}return e}),{})}(function(){var e="sans-serif",t="#4c78a8",n="#000",r="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()};ut(Jn,i,u,s,c,l,f,d,h,p,v);var d9=n(383);function h9(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var p9=n(384),v9=n.n(p9),m9=n(385),g9=n.n(m9),b9=n(167),y9=n.n(b9);function x9(e){return!!e.or}function _9(e){return!!e.and}function w9(e){return!!e.not}function k9(e,t){if(w9(e))k9(e.not,t);else if(_9(e)){var n,r=Object(tr.a)(e.and);try{for(r.s();!(n=r.n()).done;){k9(n.value,t)}}catch(o){r.e(o)}finally{r.f()}}else if(x9(e)){var a,i=Object(tr.a)(e.or);try{for(i.s();!(a=i.n()).done;){k9(a.value,t)}}catch(o){i.e(o)}finally{i.f()}}else t(e)}function O9(e,t){return w9(e)?{not:O9(e.not,t)}:_9(e)?{and:e.and.map((function(e){return O9(e,t)}))}:x9(e)?{or:e.or.map((function(e){return O9(e,t)}))}:t(e)}var S9=g9.a,j9=v9.a;function E9(e,t){var n,r={},a=Object(tr.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;ft(e,i)&&(r[i]=e[i])}}catch(o){a.e(o)}finally{a.f()}return r}function C9(e,t){var n,r=Object.assign({},e),a=Object(tr.a)(t);try{for(a.s();!(n=a.n()).done;){delete r[n.value]}}catch(i){a.e(i)}finally{a.f()}return r}Set.prototype.toJSON=function(){return"Set(".concat(Object(mo.a)(this).map((function(e){return y9()(e)})).join(","),")")};var A9=y9.a;function T9(e){if(yt(e))return e;var t=_t(e)?e:y9()(e);if(t.length<250)return t;for(var n=0,r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function N9(e){return!1===e||null===e}function M9(e,t){return e.indexOf(t)>-1}function D9(e,t){var n,r=0,a=Object(tr.a)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=Object(Nr.a)(n.value,2),o=i[0];if(t(i[1],o,r++))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}function I9(e,t){var n,r=0,a=Object(tr.a)(e.entries());try{for(a.s();!(n=a.n()).done;){var i=Object(Nr.a)(n.value,2),o=i[0];if(!t(i[1],o,r++))return!1}}catch(u){a.e(u)}finally{a.f()}return!0}function F9(e,t){var n,r=Object(tr.a)(U9(t));try{for(r.s();!(n=r.n()).done;){var a=n.value;Te(e,a,t[a],!0)}}catch(i){r.e(i)}finally{r.f()}}function R9(e,t){var n,r,a=[],i={},o=Object(tr.a)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;(n=t(u))in i||(i[n]=1,a.push(u))}}catch(s){o.e(s)}finally{o.f()}return a}function P9(e,t){var n,r=Object(tr.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.has(a))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function L9(e){var t,n=new Set,r=Object(tr.a)(e);try{var a=function(){var e,r=t.value,a=le(r).map((function(e,t){return 0===t?e:"[".concat(e,"]")})),i=a.map((function(e,t){return a.slice(0,t+1).join("")})),o=Object(tr.a)(i);try{for(o.s();!(e=o.n()).done;){var u=e.value;n.add(u)}}catch(s){o.e(s)}finally{o.f()}};for(r.s();!(t=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return n}function B9(e,t){return void 0===e||void 0===t||P9(L9(e),L9(t))}function z9(e){return 0===U9(e).length}var U9=Object.keys,W9=Object.values;function V9(e){var t=[];for(var n in e)ft(e,n)&&t.push({key:n,value:e[n]});return t}function G9(e){return!0===e||!1===e}function q9(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function H9(e,t){return w9(e)?"!("+H9(e.not,t)+")":_9(e)?"("+e.and.map((function(e){return H9(e,t)})).join(") && (")+")":x9(e)?"("+e.or.map((function(e){return H9(e,t)})).join(") || (")+")":t(e)}function X9(e,t){if(0===t.length)return!0;var n=t.shift();return n in e&&X9(e[n],t)&&delete e[n],z9(e)}function Y9(e){return e.charAt(0).toUpperCase()+e.substr(1)}function K9(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=le(e),r=[],a=1;a<=n.length;a++){var i="[".concat(n.slice(0,a).map(At).join("]["),"]");r.push("".concat(t).concat(i))}return r.join(" && ")}function $9(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(t,"[").concat(At(le(e).join(".")),"]")}function Z9(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function J9(e){return"".concat(le(e).map(Z9).join("\\."))}function Q9(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eee(e){return"".concat(le(e).join("."))}function tee(e){return e?le(e).length:0}function nee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(void 0!==i)return i}}var ree=42;function aee(e){var t=++ree;return e?String(e)+t:t}function iee(e){return function(e){return 0===e.indexOf("__")}(e)?e:"__".concat(e)}function oee(e){if(void 0!==e)return(e%360+360)%360}function uee(e){return!!yt(e)||!isNaN(e)&&!isNaN(parseFloat(e))}var see={domainColor:{part:"domain",vgProp:"stroke"},labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDash"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDash"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"},titleColor:{part:"title",vgProp:"fill"},title:null};function cee(e){return e&&e.condition}var lee=["domain","grid","labels","ticks","title"],fee={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},dee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},hee=Object.assign(Object.assign({},dee),{style:1,labelExpr:1,encoding:1});function pee(e){return!!hee[e]}U9(hee);var vee={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},mee=vee.arc,gee=vee.area,bee=vee.bar,yee=vee.image,xee=vee.line,_ee=vee.point,wee=vee.rect,kee=vee.rule,Oee=vee.text,See=vee.tick,jee=vee.trail,Eee=vee.circle,Cee=vee.square,Aee=vee.geoshape;function Tee(e){return M9(["line","area","trail"],e)}function Nee(e){return M9(["rect","bar","image","arc"],e)}var Mee=U9(vee);function Dee(e){return e.type}It(Mee);var Iee=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),Fee=U9({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),Ree={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Pee={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},Lee={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function Bee(e){return"mark"in e}var zee=function(){function e(t,n){Object(Rx.a)(this,e),this.name=t,this.run=n}return Object(Px.a)(e,[{key:"hasMatchingType",value:function(e){return!!Bee(e)&&(Dee(t=e.mark)?t.type:t)===this.name;var t}}]),e}(),Uee={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Wee={count:1,min:1,max:1};function Vee(e){return!!e&&!!e.argmin}function Gee(e){return!!e&&!!e.argmax}U9(Uee);function qee(e){return _t(e)&&!!Uee[e]}var Hee=["count","valid","missing","distinct"];function Xee(e){return _t(e)&&M9(Hee,e)}var Yee=["count","sum","distinct","valid","missing"],Kee=It(["mean","average","median","q1","q3","min","max"]),$ee="row",Zee="column",Jee="facet",Qee="x",ete="y",tte="x2",nte="y2",rte="radius",ate="radius2",ite="theta",ote="theta2",ute="latitude",ste="longitude",cte="latitude2",lte="longitude2",fte="color",dte="fill",hte="stroke",pte="shape",vte="size",mte="angle",gte="opacity",bte="fillOpacity",yte="strokeOpacity",xte="strokeWidth",_te="strokeDash",wte="text",kte="order",Ote="detail",Ste="key",jte="tooltip",Ete="href",Cte="url",Ate="description",Tte={theta:1,theta2:1,radius:1,radius2:1};function Nte(e){return e in Tte}var Mte={longitude:1,longitude2:1,latitude:1,latitude2:1};var Dte=U9(Mte),Ite=Object.assign(Object.assign(Object.assign(Object.assign({},{x:1,y:1,x2:1,y2:1}),Tte),Mte),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Fte(e){return e===fte||e===dte||e===hte}var Rte={row:1,column:1,facet:1},Pte=U9(Rte),Lte=Object.assign(Object.assign({},Ite),Rte),Bte=U9(Lte),zte=(Lte.order,Lte.detail,Lte.tooltip,h9(Lte,["order","detail","tooltip"])),Ute=(zte.row,zte.column,zte.facet,h9(zte,["row","column","facet"]));U9(zte),U9(Ute);function Wte(e){return!!Lte[e]}var Vte=[tte,nte,cte,lte,ote,ate];function Gte(e){return qte(e)!==e}function qte(e){switch(e){case tte:return Qee;case nte:return ete;case cte:return ute;case lte:return ste;case ote:return ite;case ate:return rte}return e}function Hte(e){if(Nte(e))switch(e){case ite:return"startAngle";case ote:return"endAngle";case rte:return"outerRadius";case ate:return"innerRadius"}return e}function Xte(e){switch(e){case Qee:return tte;case ete:return nte;case ute:return cte;case ste:return lte;case ite:return ote;case rte:return ate}}function Yte(e){switch(e){case Qee:case tte:return"width";case ete:case nte:return"height"}}U9(Ite),Ite.x,Ite.y,Ite.x2,Ite.y2,Ite.latitude,Ite.longitude,Ite.latitude2,Ite.longitude2,Ite.theta,Ite.theta2,Ite.radius,Ite.radius2;var Kte=h9(Ite,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),$te=U9(Kte),Zte={x:1,y:1},Jte=U9(Zte);function Qte(e){return e in Zte}var ene={theta:1,radius:1},tne=U9(ene);function nne(e){return"width"===e?Qee:ete}Kte.text,Kte.tooltip,Kte.href,Kte.url,Kte.description,Kte.detail,Kte.key,Kte.order;var rne=h9(Kte,["text","tooltip","href","url","description","detail","key","order"]),ane=U9(rne);var ine=Object.assign(Object.assign(Object.assign({},Zte),ene),rne),one=U9(ine);function une(e){return!!ine[e]}function sne(e,t){return function(e){switch(e){case fte:case dte:case hte:case Ate:case Ote:case Ste:case jte:case Ete:case kte:case gte:case bte:case yte:case xte:case Jee:case $ee:case Zee:return cne;case Qee:case ete:case ute:case ste:return lne;case tte:case nte:case cte:case lte:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case vte:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case _te:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case pte:return{point:"always",geoshape:"always"};case wte:return{text:"always"};case mte:return{point:"always",square:"always",text:"always"};case Cte:return{image:"always"};case ite:case rte:return{text:"always",arc:"always"};case ote:case ate:return{arc:"always"}}}(e)[t]}var cne={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},lne=h9(cne,["geoshape"]);function fne(e){switch(e){case Qee:case ete:case ite:case rte:case vte:case mte:case xte:case gte:case bte:case yte:case tte:case nte:case ote:case ate:return;case Jee:case $ee:case Zee:case pte:case _te:case wte:case jte:case Ete:case Cte:case Ate:return"discrete";case fte:case dte:case hte:return"flexible";case ute:case ste:case cte:case lte:case Ote:case Ste:case kte:return}}function dne(e){return gt(e)&&(e=Aoe(e,void 0)),"bin"+U9(e).map((function(t){return mne(e[t])?q9("_".concat(t,"_").concat(Object.entries(e[t]))):q9("_".concat(t,"_").concat(e[t]))})).join("")}function hne(e){return!0===e||vne(e)&&!e.binned}function pne(e){return"binned"===e||vne(e)&&!0===e.binned}function vne(e){return Ee(e)}function mne(e){return null===e||void 0===e?void 0:e.selection}function gne(e){switch(e){case $ee:case Zee:case vte:case fte:case dte:case hte:case xte:case gte:case bte:case yte:case pte:return 6;case _te:return 4;default:return 10}}var bne=n(289);function yne(e){return"Invalid specification ".concat(JSON.stringify(e),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}var xne='Autosize "fit" only works for single views and layered views.';function _ne(e){return"".concat("width"==e?"Width":"Height",' "container" only works for single views and layered views.')}function wne(e){var t="width"==e?"x":"y";return"".concat("width"==e?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(t,'".')}function kne(e){return e?'Dropping "fit-'.concat(e,'" because spec has discrete ').concat(Yte(e),"."):'Dropping "fit" because spec has discrete size.'}function One(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function Sne(e,t){return'Cannot project a selection on encoding channel "'.concat(e,'" as it uses an aggregate function ("').concat(t,'").')}function jne(e){return'The "nearest" transform is not supported for '.concat(e," marks.")}function Ene(e){return"Selection not supported for ".concat(e," yet.")}function Cne(e){return'Cannot find a selection named "'.concat(e,'".')}var Ane="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Tne="Legend bindings are only supported for selections over an individual field or encoding channel.";function Nne(e){return'Cannot define and lookup the "'.concat(e,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}function Mne(e){return'Unknown repeated value "'.concat(e,'".')}function Dne(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}var Ine="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Fne(e){return'Unrecognized parse "'.concat(e,'".')}function Rne(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}function Pne(e){return"Ignoring an invalid transform: ".concat(A9(e),".")}var Lne='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Bne(e){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(e," are dropped.")}function zne(e){return"Layer's shared ".concat(e.join(",")," channel ").concat(1===e.length?"is":"are"," overriden.")}function Une(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(A9(t)," is overridden by a child projection ").concat(A9(n),".")}var Wne="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Vne(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(A9(n),"}.")}function Gne(e){return'Invalid field type "'.concat(e,'".')}function qne(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}function Hne(e){return'Invalid aggregation operator "'.concat(e,'".')}function Xne(e,t){return'Missing type for channel "'.concat(e,'", using "').concat(t,'" instead.')}function Yne(e,t){var n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function Kne(e,t){return"Dropping ".concat(A9(e),' from channel "').concat(t,'" since it does not contain any data field, datum, value, or signal.')}function $ne(e,t,n){return"".concat(e,"-encoding with type ").concat(t," is deprecated. Replacing with ").concat(n,"-encoding.")}var Zne="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Jne(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function Qne(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}function ere(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function tre(e){return"Facet encoding dropped as ".concat(e.join(" and ")," ").concat(e.length>1?"are":"is"," also specified.")}function nre(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}function rre(e,t){return"Line mark is for continuous lines and thus cannot be used with ".concat(e&&t?"x2 and y2":e?"x2":"y2",". We will use the rule mark (line segments) instead.")}function are(e,t){return'Specified orient "'.concat(e,'" overridden with "').concat(t,'".')}var ire="Custom domain scale cannot be unioned with default field-based domain.",ore='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function ure(e){return'Cannot use the scale property "'.concat(e,'" with non-color channel.')}function sre(e){return"Using unaggregated domain with raw field has no effect (".concat(A9(e),").")}function cre(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function lre(e){return"Unaggregated domain is currently unsupported for log scale (".concat(A9(e),").")}function fre(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}function dre(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}function hre(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}function pre(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function vre(e,t){return'Scale type "'.concat(t,'" does not work with mark "').concat(e,'".')}function mre(e){return'The step for "'.concat(e,'" is dropped because the ').concat("width"===e?"x":"y"," is continuous.")}function gre(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(A9(n)," and ").concat(A9(r),"). Using ").concat(A9(n),".")}function bre(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(A9(n)," and ").concat(A9(r),"). Using the union of the two domains.")}function yre(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}function xre(e){return"Dropping sort property ".concat(A9(e),' as unioned domains only support boolean or op "count", "min", and "max".')}var _re="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",wre="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",kre="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Ore="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.",Sre="Invalid channel for axis.";function jre(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2".')}function Ere(e){return"Cannot stack non-linear scale (".concat(e,").")}function Cre(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'").')}function Are(e,t){return"Invalid ".concat(e,": ").concat(A9(t),".")}function Tre(e){return"Dropping day from datetime ".concat(A9(e)," as day cannot be combined with other units.")}function Nre(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}function Mre(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}function Dre(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}function Ire(e,t){return"Center is not needed to be specified in ".concat(t," when extent is ").concat(e,".")}function Fre(e){return"1D error band does not support ".concat(e,".")}function Rre(e){return"Channel ".concat(e,' is required for "binned" bin.')}function Pre(e){return"Domain for ".concat(e," is required for threshold scale.")}var Lre=Se(we),Bre=Lre;function zre(e){return Bre=e}function Ure(){return Bre=Lre}function Wre(){var e;(e=Bre).warn.apply(e,arguments)}function Vre(e){if(e&&Ee(e)){var t,n=Object(tr.a)(Qre);try{for(n.s();!(t=n.n()).done;){if(t.value in e)return!0}}catch(r){n.e(r)}finally{n.f()}}return!1}var Gre=["january","february","march","april","may","june","july","august","september","october","november","december"],qre=Gre.map((function(e){return e.substr(0,3)})),Hre=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Xre=Hre.map((function(e){return e.substr(0,3)}));function Yre(e,t){var n=[];if(t&&void 0!==e.day&&U9(e).length>1&&(Wre(b.droppedDay(e)),delete(e=j9(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){var r=t?function(e){if(uee(e)&&(e=+e),yt(e))return e-1;var t=e.toLowerCase(),n=Gre.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=qre.indexOf(r);if(-1!==a)return a;throw new Error(b.invalidTimeUnit("month",e))}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){var a=t?function(e){if(uee(e)&&(e=+e),yt(e))return e>4&&Wre(b.invalidTimeUnit("quarter",e)),e-1;throw new Error(b.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(yt(a)?3*a:a+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var i=t?function(e){if(uee(e)&&(e=+e),yt(e))return e%7;var t=e.toLowerCase(),n=Hre.indexOf(t);if(-1!==n)return n;var r=t.substr(0,3),a=Xre.indexOf(r);if(-1!==a)return a;throw new Error(b.invalidTimeUnit("day",e))}(e.day):e.day;n.push(yt(i)?i+1:i+"+1")}else n.push(1);for(var o=0,u=["hours","minutes","seconds","milliseconds"];o<u.length;o++){var s=e[u[o]];n.push("undefined"===typeof s?0:s)}return n}function Kre(e){var t=Yre(e,!0).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function $re(e){var t=Yre(e,!1).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function Zre(e){var t=Yre(e,!0);return e.utc?+new Date(Date.UTC.apply(Date,Object(mo.a)(t))):+Object(bne.a)(Date,Object(mo.a)(t))}var Jre={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Qre=U9(Jre);function eae(e){return e.startsWith("utc")}var tae={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function nae(e){var t,n=[],r=Object(tr.a)(Qre);try{for(r.s();!(t=r.n()).done;){var a=t.value;rae(e,a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function rae(e,t){var n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function aae(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{end:!1},a=r.end,i=K9(t),o=eae(e)?"utc":"";function u(e){return"quarter"===e?"(".concat(o,"quarter(").concat(i,")-1)"):"".concat(o).concat(e,"(").concat(i,")")}var s,c={},l=Object(tr.a)(Qre);try{for(l.s();!(s=l.n()).done;){var f=s.value;rae(e,f)&&(c[f]=u(f),n=f)}}catch(d){l.e(d)}finally{l.f()}return a&&(c[n]+="+1"),$re(c)}function iae(e){if(e){var t=nae(e);return"timeUnitSpecifier(".concat(y9()(t),", ").concat(y9()(tae),")")}}function oae(e){var t;if(e)return _t(e)?t={unit:e}:Ee(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),eae(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function uae(e){var t=oae(e),n=t.utc,r=h9(t,["utc"]);return r.unit?(n?"utc":"")+U9(r).map((function(e){return q9("".concat("unit"===e?"":"_".concat(e,"_")).concat(r[e]))})).join(""):(n?"utc":"")+"timeunit"+U9(r).map((function(e){return q9("_".concat(e,"_").concat(r[e]))})).join("")}function sae(e){return e&&!!e.signal}function cae(e){return!!e.step}function lae(e){return!je(e)&&("field"in e&&"data"in e)}var fae=U9({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1}),dae={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},hae=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function pae(e){return e&&!!e.field&&void 0!==e.equal}function vae(e){return e&&!!e.field&&void 0!==e.lt}function mae(e){return e&&!!e.field&&void 0!==e.lte}function gae(e){return e&&!!e.field&&void 0!==e.gt}function bae(e){return e&&!!e.field&&void 0!==e.gte}function yae(e){if(e&&e.field){if(je(e.range)&&2===e.range.length)return!0;if(sae(e.range))return!0}return!1}function xae(e){return e&&!!e.field&&(je(e.oneOf)||je(e.in))}function _ae(e){return e&&!!e.field&&void 0!==e.valid}function wae(e){return xae(e)||pae(e)||yae(e)||vae(e)||gae(e)||mae(e)||bae(e)}function kae(e,t){return Moe(e,{timeUnit:t,wrapTime:!0})}function Oae(e,t){return e.map((function(e){return kae(e,t)}))}function Sae(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.field,a=null===(t=oae(e.timeUnit))||void 0===t?void 0:t.unit,i=a?"time("+aae(a,r)+")":doe(e,{expr:"datum"});if(pae(e))return i+"==="+kae(e.equal,a);if(vae(e)){var o=e.lt;return"".concat(i,"<").concat(kae(o,a))}if(gae(e)){var u=e.gt;return"".concat(i,">").concat(kae(u,a))}if(mae(e)){var s=e.lte;return"".concat(i,"<=").concat(kae(s,a))}if(bae(e)){var c=e.gte;return"".concat(i,">=").concat(kae(c,a))}if(xae(e))return"indexof([".concat(Oae(e.oneOf,a).join(","),"], ").concat(i,") !== -1");if(_ae(e))return jae(i,e.valid);if(yae(e)){var l=e.range,f=sae(l)?{signal:"".concat(l.signal,"[0]")}:l[0],d=sae(l)?{signal:"".concat(l.signal,"[1]")}:l[1];if(null!==f&&null!==d&&n)return"inrange("+i+", ["+kae(f,a)+", "+kae(d,a)+"])";var h=[];return null!==f&&h.push("".concat(i," >= ").concat(kae(f,a))),null!==d&&h.push("".concat(i," <= ").concat(kae(d,a))),h.length>0?h.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function jae(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?"isValid(".concat(e,") && isFinite(+").concat(e,")"):"!isValid(".concat(e,") || !isFinite(+").concat(e,")")}function Eae(e){var t;return wae(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:null===(t=oae(e.timeUnit))||void 0===t?void 0:t.unit}):e}var Cae={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};var Aae=Cae.quantitative,Tae=Cae.ordinal,Nae=Cae.temporal,Mae=Cae.nominal,Dae=Cae.geojson,Iae=U9(Cae);var Fae="linear",Rae="log",Pae="pow",Lae="sqrt",Bae="symlog",zae="time",Uae="utc",Wae="quantile",Vae="quantize",Gae="threshold",qae="point",Hae="band",Xae={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},Yae=U9(Xae);function Kae(e,t){var n=Xae[e],r=Xae[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}var $ae={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Zae(e){return $ae[e]}var Jae=["linear","log","pow","sqrt","symlog","time","utc"],Qae=It(Jae),eie=It(["linear","log","pow","sqrt","symlog"]);var tie=It(["quantile","quantize","threshold"]),nie=Jae.concat(["quantile","quantize","threshold","sequential","identity"]),rie=It(nie),aie=It(["ordinal","bin-ordinal","point","band"]);function iie(e){return e in aie}function oie(e){return e in rie}function uie(e){return e in Qae}function sie(e){return e in tie}function cie(e){return null===e||void 0===e?void 0:e.selection}var lie={type:1,domain:1,domainMid:1,align:1,range:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},fie=(U9(lie),h9(lie,["type","domain","range","scheme"])),die=U9(fie);!function(){var e,t,n={},r=Object(tr.a)(Bte);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=Object(tr.a)(Iae);try{for(o.s();!(a=o.n()).done;){var u,s=a.value,c=Object(tr.a)(Yae);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=gie(i,s);mie(i,l)&&vie(l,s)&&(n[f]=null!==(e=n[f])&&void 0!==e?e:[],n[f].push(l))}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}}}catch(d){r.e(d)}finally{r.f()}}();function hie(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!M9(["point","band","identity"],e);case"bins":return!M9(["point","band","identity","ordinal"],e);case"round":return uie(e)||"band"===e||"point"===e;case"padding":return uie(e)||M9(["point","band"],e);case"paddingOuter":case"align":return M9(["point","band"],e);case"paddingInner":return"band"===e;case"domainMid":case"clamp":return uie(e);case"nice":return uie(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return oie(e)&&!M9(["log","time","utc","threshold","quantile"],e)}}function pie(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Fte(e)?void 0:b.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"reverse":case"round":case"clamp":case"zero":return}}function vie(e,t){return M9([Tae,Mae],t)?void 0===e||iie(e):t===Nae?M9([zae,Uae,void 0],e):t!==Aae||M9([Rae,Pae,Lae,Bae,Wae,Vae,Gae,Fae,void 0],e)}function mie(e,t){if(!une(e))return!1;switch(e){case Qee:case ete:case ite:case rte:return uie(t)||M9(["band","point"],t);case vte:case xte:case gte:case bte:case yte:case mte:return uie(t)||sie(t)||M9(["band","point","ordinal"],t);case fte:case dte:case hte:return"band"!==t;case _te:return"ordinal"===t||sie(t);case pte:return"ordinal"===t}}function gie(e,t){return e+"_"+t}function bie(e){var t=e.channel,n=e.channelDef,r=e.markDef,a=e.scale,i=e.config,o=Oie(e);return Qie(n)&&!Xee(n.aggregate)&&a&&uie(a.get("type"))&&!1===a.get("zero")?yie({fieldDef:n,channel:t,markDef:r,ref:o,config:i}):o}function yie(e){var t=e.fieldDef,n=e.channel,r=e.markDef,a=e.ref,i=e.config;return Tee(r.type)||null===Uoe("invalid",r,i)?a:[xie(t,n),a]}function xie(e,t){var n=_ie(e,!0),r="y"===qte(t)?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function _ie(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return jae(_t(e)?e:doe(e,{expr:"datum"}),!t)}function wie(e,t,n,r){var a={};if(t&&(a.scale=t),toe(e)){var i=e.datum;Vre(i)?a.signal=Kre(i):sae(i)?a.signal=i.signal:a.value=i}else a.field=doe(e,n);if(r){var o=r.offset,u=r.band;o&&(a.offset=o),u&&(a.band=u)}return a}function kie(e){var t=e.scaleName,n=e.fieldOrDatumDef,r=e.fieldOrDatumDef2,a=e.offset,i=e.startSuffix,o=e.band,u=void 0===o?.5:o,s=0<u&&u<1?"datum":void 0,c=doe(n,{expr:s,suffix:i}),l=void 0!==r?doe(r,{expr:s}):doe(n,{suffix:"end",expr:s}),f={};if(0===u||1===u){f.scale=t;var d=0===u?c:l;f.field=d}else{var h="".concat(u," * ").concat(c," + ").concat(1-u," * ").concat(l);f.signal='scale("'.concat(t,'", ').concat(h,")")}return a&&(f.offset=a),f}function Oie(e){var t,n=e.channel,r=e.channelDef,a=e.channel2Def,i=e.markDef,o=e.config,u=e.scaleName,s=e.scale,c=e.stack,l=e.offset,f=e.defaultRef,d=e.band;if(r){if(aoe(r)){if(ioe(r)){d=null!==d&&void 0!==d?d:Yie({channel:n,fieldDef:r,fieldDef2:a,markDef:i,stack:c,config:o,isMidPoint:!0});var h=r.bin,p=r.timeUnit,v=r.type;if(hne(h)||d&&p&&v===Nae)return c&&c.impute?wie(r,u,{binSuffix:"mid"},{offset:l}):d?kie({scaleName:u,fieldOrDatumDef:r,band:d,offset:l}):wie(r,u,Ioe(r,n)?{binSuffix:"range"}:{},{offset:l});if(pne(h)){if(Qie(a))return kie({scaleName:u,fieldOrDatumDef:r,fieldOrDatumDef2:a,band:d,offset:l});var m=n===Qee?tte:nte;Wre(b.channelRequiredForBinned(m))}}var g=null===s||void 0===s?void 0:s.get("type");return wie(r,u,iie(g)?{binSuffix:"range"}:{},{offset:l,band:"band"===g?null!==(t=null!==d&&void 0!==d?d:r.band)&&void 0!==t?t:.5:void 0})}if(ooe(r)){var y=r.value,x=l?{offset:l}:{};return Object.assign(Object.assign({},Sie(n,y)),x)}}return Qe(f)&&(f=f()),f?Object.assign(Object.assign({},f),l?{offset:l}:{}):f}function Sie(e,t){return M9(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:M9(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:Poe(t)}function jie(e){return e&&"number"!==e&&"time"!==e}function Eie(e,t,n){return"".concat(e,"(").concat(t).concat(n?", ".concat(JSON.stringify(n)):"",")")}function Cie(e){var t,n,r=e.fieldOrDatumDef,a=e.format,i=e.formatType,o=e.expr,u=e.normalizeStack,s=e.config;if(jie(i))return Tie({fieldOrDatumDef:r,format:a,formatType:i,expr:o,config:s});var c=Aie(r,o,u);if(Noe(r)){var l=function(e,t,n,r,a){return!t||n?(n=_t(n)?n:r,"".concat(a?"utc":"time","Format(").concat(e,", '").concat(n,"')")):function(e,t,n){if(e){var r=iae(e),a=n||eae(e);return"".concat(a?"utc":"time","Format(").concat(t,", ").concat(r,")")}}(t,e,a)}(c,Qie(r)?null===(t=oae(r.timeUnit))||void 0===t?void 0:t.unit:void 0,a,s.timeFormat,uoe(r)&&(null===(n=r.scale)||void 0===n?void 0:n.type)===Uae);return l?{signal:l}:void 0}return a=Die(eoe(r),a,s),Qie(r)&&hne(r.bin)?{signal:Rie(c,doe(r,{expr:o,binSuffix:"end"}),a,i,s)}:a||"quantitative"===eoe(r)?{signal:"".concat(Iie(c,a))}:{signal:"isValid(".concat(c,") ? ").concat(c,' : ""+').concat(c)}}function Aie(e,t,n){return Qie(e)?n?"".concat(doe(e,{expr:t,suffix:"end"}),"-").concat(doe(e,{expr:t,suffix:"start"})):doe(e,{expr:t}):function(e){var t=e.datum;return Vre(t)?Kre(t):"".concat(JSON.stringify(t))}(e)}function Tie(e){var t=e.fieldOrDatumDef,n=e.format,r=e.formatType,a=e.expr,i=e.normalizeStack,o=e.config,u=e.field;return u=null!==u&&void 0!==u?u:Aie(t,a,i),Qie(t)&&hne(t.bin)?{signal:Rie(u,doe(t,{expr:a,binSuffix:"end"}),n,r,o)}:{signal:Eie(r,u,n)}}function Nie(e,t,n,r,a,i){var o;if(!jie(r))return Noe(e)?function(e,t,n,r){if(e)return e;if(t)return{signal:iae(t)};return r?void 0:n.timeFormat}(n,Qie(e)?null===(o=oae(e.timeUnit))||void 0===o?void 0:o.unit:void 0,a,i):Die(t,n,a)}function Mie(e,t,n){return e&&(sae(e)||"number"===e||"time"===e)?e:Noe(t)&&"time"!==n&&"utc"!==n?"time":void 0}function Die(e,t,n){return _t(t)?t:e===Aae?n.numberFormat:void 0}function Iie(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function Fie(e,t,n,r){var a;return jie(n)?Eie(n,e,t):Iie(e,null!==(a=_t(t)?t:void 0)&&void 0!==a?a:r.numberFormat)}function Rie(e,t,n,r,a){var i=Fie(e,n,r,a),o=Fie(t,n,r,a);return"".concat(jae(e,!1),' ? "null" : ').concat(i,' + "').concat(" \u2013 ",'" + ').concat(o)}var Pie="min",Lie={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Bie(e){return e in Lie}function zie(e){return!!e&&!!e.encoding}function Uie(e){return!!e&&("count"===e.op||!!e.field)}function Wie(e){return!!e&&je(e)}function Vie(e){return"row"in e||"column"in e}function Gie(e){return!!e&&"header"in e}function qie(e){return"facet"in e}function Hie(e){var t=e.field,n=e.timeUnit,r=e.bin,a=e.aggregate;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),r?{bin:r}:{}),a?{aggregate:a}:{}),{field:t})}function Xie(e){return ioe(e)&&"sort"in e}function Yie(e){var t=e.channel,n=e.fieldDef,r=e.fieldDef2,a=e.markDef,i=e.stack,o=e.config,u=e.isMidPoint;if(aoe(n)&&void 0!==n.band)return n.band;if(Qie(n)){var s=n.timeUnit,c=n.bin;if(s&&!r)return u?Woe("timeUnitBandPosition",a,o):Nee(a.type)?Woe("timeUnitBand",a,o):0;if(hne(c))return Nee(a.type)&&!u?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===t&&u?.5:void 0}function Kie(e,t,n,r,a,i){return!!(hne(t.bin)||t.timeUnit&&ioe(t)&&"temporal"===t.type)&&!!Yie({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:a,config:i})}function $ie(e){return!!e&&"condition"in e}function Zie(e){var t=e&&e.condition;return!!t&&!je(t)&&Qie(t)}function Jie(e){var t=e&&e.condition;return!!t&&!je(t)&&aoe(t)}function Qie(e){return!!e&&(!!e.field||"count"===e.aggregate)}function eoe(e){return e&&e.type}function toe(e){return!!e&&"datum"in e}function noe(e){return ioe(e)&&poe(e)||roe(e)}function roe(e){return toe(e)&&yt(e.datum)}function aoe(e){return Qie(e)||toe(e)}function ioe(e){return!!e&&("field"in e&&"type"in e||"count"===e.aggregate)}function ooe(e){return e&&"value"in e&&"value"in e}function uoe(e){return!!e&&("scale"in e||"sort"in e)}function soe(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function coe(e){return!!e&&"legend"in e}function loe(e){return!!e&&("format"in e||"formatType"in e)}function foe(e){return"op"in e}function doe(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.field,o=a.prefix,u=a.suffix,s="";if(voe(e))i=iee("count");else{var c;if(!a.nofn)if(foe(e))c=e.op;else{var l=e.bin,f=e.aggregate,d=e.timeUnit;hne(l)?(c=dne(l),u=(null!==(t=a.binSuffix)&&void 0!==t?t:"")+(null!==(n=a.suffix)&&void 0!==n?n:"")):f?Gee(f)?(s='["'.concat(i,'"]'),i="argmax_".concat(f.argmax)):Vee(f)?(s='["'.concat(i,'"]'),i="argmin_".concat(f.argmin)):c=String(f):d&&(c=uae(d),u=(!M9(["range","mid"],a.binSuffix)&&a.binSuffix||"")+(null!==(r=a.suffix)&&void 0!==r?r:""))}c&&(i=i?"".concat(c,"_").concat(i):c)}return u&&(i="".concat(i,"_").concat(u)),o&&(i="".concat(o,"_").concat(i)),a.forAs?eee(i):a.expr?$9(i,a.expr)+s:J9(i)+s}function hoe(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Qie(e)&&!!e.bin;case"temporal":return!1}throw new Error(b.invalidFieldType(e.type))}function poe(e){return!hoe(e)}function voe(e){return"count"===e.aggregate}var moe=function(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){var t=e.aggregate,n=e.bin,r=e.timeUnit,a=e.field;if(Gee(t))return"".concat(a," for argmax(").concat(t.argmax,")");if(Vee(t))return"".concat(a," for argmin(").concat(t.argmin,")");var i=oae(r),o=t||(null===i||void 0===i?void 0:i.unit)||(null===i||void 0===i?void 0:i.maxbins)&&"timeunit"||hne(n)&&"bin";return o?o.toUpperCase()+"("+a+")":a}(e);default:return function(e,t){var n,r=e.field,a=e.bin,i=e.timeUnit,o=e.aggregate;if("count"===o)return t.countTitle;if(hne(a))return"".concat(r," (binned)");if(i){var u=null===(n=oae(i))||void 0===n?void 0:n.unit;if(u)return"".concat(r," (").concat(nae(u).join("-"),")")}else if(o)return Gee(o)?"".concat(r," for max ").concat(o.argmax):Vee(o)?"".concat(r," for min ").concat(o.argmin):"".concat(Y9(o)," of ").concat(r);return r}(e,t)}},goe=moe;function boe(e){goe=e}function yoe(){boe(moe)}function xoe(e,t,n){var r,a,i=n.allowDisabling,o=n.includeDefault,u=void 0===o||o,s=(null!==(r=_oe(e))&&void 0!==r?r:{}).title;if(!Qie(e))return s;var c=e,l=u?woe(c,t):void 0;return i?nee(s,c.title,l):null!==(a=null!==s&&void 0!==s?s:c.title)&&void 0!==a?a:l}function _oe(e){return soe(e)&&e.axis?e.axis:coe(e)&&e.legend?e.legend:Gie(e)&&e.header?e.header:void 0}function woe(e,t){return goe(e,t)}function koe(e){var t;if(loe(e))return{format:e.format,formatType:e.formatType};var n=null!==(t=_oe(e))&&void 0!==t?t:{};return{format:n.format,formatType:n.formatType}}function Ooe(e){return Qie(e)?e:Zie(e)?e.condition:void 0}function Soe(e){return aoe(e)?e:Jie(e)?e.condition:void 0}function joe(e,t,n){if(_t(e)||yt(e)||gt(e)){var r=_t(e)?"string":yt(e)?"number":"boolean";return Wre(b.primitiveChannelDef(t,r,e)),{value:e}}return aoe(e)?Eoe(e,t,n):Jie(e)?Object.assign(Object.assign({},e),{condition:Eoe(e.condition,t,n)}):e}function Eoe(e,t,n){if(loe(e)){e.format;var r=e.formatType,a=h9(e,["format","formatType"]);if(jie(r)&&!n.customFormatTypes)return Wre(b.customFormatTypeNotAllowed(t)),Eoe(a,t,n)}else{var i=soe(e)?"axis":coe(e)?"legend":Gie(e)?"header":null;if(i&&e[i]){var o=e[i],u=(o.format,o.formatType),s=h9(o,["format","formatType"]);if(jie(u)&&!n.customFormatTypes)return Wre(b.customFormatTypeNotAllowed(t)),Eoe(Object.assign(Object.assign({},e),Object(go.a)({},i,s)),t,n)}}return Qie(e)?Coe(e,t):function(e){var t=e.type;if(t)return e;var n=e.datum;return t=yt(n)?"quantitative":_t(n)?"nominal":Vre(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}(e)}function Coe(e,t){var n=e.aggregate,r=e.timeUnit,a=e.bin,i=e.field,o=Object.assign({},e);if(!n||qee(n)||Gee(n)||Vee(n)||(Wre(b.invalidAggregate(n)),delete o.aggregate),r&&(o.timeUnit=oae(r)),i&&(o.field="".concat(i)),hne(a)&&(o.bin=Aoe(a,t)),pne(a)&&!Qte(t)&&Wre("Channel ".concat(t,' should not be used with "binned" bin.')),ioe(o)){var u=o.type,s=function(e){if(e)switch(e=e.toLowerCase()){case"q":case Aae:return"quantitative";case"t":case Nae:return"temporal";case"o":case Tae:return"ordinal";case"n":case Mae:return"nominal";case Dae:return"geojson"}}(u);u!==s&&(o.type=s),"quantitative"!==u&&Xee(n)&&(Wre(b.invalidFieldTypeForCountAggregate(u,n)),o.type="quantitative")}else if(!Gte(t)){var c=function(e,t){if(e.timeUnit)return"temporal";if(hne(e.bin))return"quantitative";switch(fne(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(o,t);Wre(b.missingFieldType(t,c)),o.type=c}if(ioe(o)){var l=function(e,t){var n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case $ee:case Zee:case Jee:return poe(e)?{compatible:!1,warning:b.facetChannelShouldBeDiscrete(t)}:Toe;case Qee:case ete:case fte:case dte:case hte:case wte:case Ote:case Ste:case jte:case Ete:case Cte:case mte:case ite:case rte:case Ate:return Toe;case ste:case lte:case ute:case cte:return n!==Aae?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:Toe;case gte:case bte:case yte:case xte:case vte:case ote:case ate:case tte:case nte:return"nominal"!==n||e.sort?Toe:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case _te:return M9(["ordinal","nominal"],e.type)?Toe:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case pte:return M9(["ordinal","nominal","geojson"],e.type)?Toe:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case kte:return"nominal"!==e.type||"sort"in e?Toe:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(o,t),f=l.compatible,d=l.warning;f||Wre(d)}if(Xie(o)&&_t(o.sort)){var h=o.sort;if(Bie(h))return Object.assign(Object.assign({},o),{sort:{encoding:h}});var p=h.substr(1);if("-"===h.charAt(0)&&Bie(p))return Object.assign(Object.assign({},o),{sort:{encoding:p,order:"descending"}})}if(Gie(o)){var v=o.header,m=v.orient,g=h9(v,["orient"]);if(m)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},g),{labelOrient:v.labelOrient||m,titleOrient:v.titleOrient||m})})}return o}function Aoe(e,t){return gt(e)?{maxbins:gne(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign(Object.assign({},e),{maxbins:gne(t)})}var Toe={compatible:!0};function Noe(e){var t,n=koe(e).formatType;return"time"===n||!n&&((t=e)&&("temporal"===t.type||Qie(t)&&!!t.timeUnit))}function Moe(e,t){var n,r,a=t.timeUnit,i=t.type,o=t.wrapTime,u=t.undefinedIfExprNotRequired,s=a&&(null===(n=oae(a))||void 0===n?void 0:n.unit),c=s||"temporal"===i;return sae(e)?r=e.signal:Vre(e)?(c=!0,r=Kre(e)):(_t(e)||yt(e))&&c&&(r="datetime(".concat(JSON.stringify(e),")"),function(e){return!!Jre[e]}(s)&&(yt(e)&&e<1e4||_t(e)&&isNaN(Date.parse(e)))&&(r=Kre(Object(go.a)({},s,e)))),r?o&&c?"time(".concat(r,")"):r:u?void 0:JSON.stringify(e)}function Doe(e,t){var n=e.type;return t.map((function(t){var r=Moe(t,{timeUnit:Qie(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Ioe(e,t){return hne(e.bin)?une(t)&&M9(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function Foe(e){var t=e.anchor,n=e.frame,r=e.offset,a=e.orient,i=e.color,o=e.subtitleColor,u=e.subtitleFont,s=e.subtitleFontSize,c=e.subtitleFontStyle,l=e.subtitleFontWeight,f=e.subtitleLineHeight,d=e.subtitlePadding,h=h9(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),p=Object.assign(Object.assign({},h),i?{fill:i}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),a?{orient:a}:{}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o?{subtitleColor:o}:{}),u?{subtitleFont:u}:{}),s?{subtitleFontSize:s}:{}),c?{subtitleFontStyle:c}:{}),l?{subtitleFontWeight:l}:{}),f?{subtitleLineHeight:f}:{}),d?{subtitlePadding:d}:{});return{titleMarkConfig:p,subtitleMarkConfig:E9(p,["align","baseline","dx","dy","limit"]),nonMark:v,subtitle:m}}function Roe(e){return _t(e)||je(e)&&_t(e[0])}function Poe(e){return sae(e)?e:void 0!==e?{value:e}:void 0}function Loe(e){return sae(e)?e.signal:At(e.value)}function Boe(e){return sae(e)?e.signal:null==e?null:At(e)}function zoe(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function Uoe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel,i=r.ignoreVgConfig;return a&&void 0!==t[a]?t[a]:void 0!==t[e]?t[e]:!i||a&&a!==e?Woe(e,t,n,r):void 0}function Woe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.vgChannel;return nee(a?Voe(e,t,n.style):void 0,Voe(e,t,n.style),a?n[t.type][a]:void 0,n[t.type][e],a?n.mark[a]:n.mark[e])}function Voe(e,t,n){return Goe(e,zoe(t),n)}function Goe(e,t,n){var r;t=Ze(t);var a,i=Object(tr.a)(t);try{for(i.s();!(a=i.n()).done;){var o=n[a.value];o&&void 0!==o[e]&&(r=o[e])}}catch(u){i.e(u)}finally{i.f()}return r}function qoe(e,t){return Ze(e).reduce((function(e,n){var r;return e.field.push(doe(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function Hoe(e,t){var n=Object(mo.a)(e);return t.forEach((function(e){var t,r=Object(tr.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(S9(a,e))return}}catch(i){r.e(i)}finally{r.f()}n.push(e)})),n}function Xoe(e,t){return S9(e,t)||!t?e:e?[].concat(Object(mo.a)(Ze(e)),Object(mo.a)(Ze(t))).join(", "):t}function Yoe(e,t){var n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((Roe(n)||sae(n))&&(Roe(r)||sae(r)))return{explicit:e.explicit,value:Xoe(n,r)};if(Roe(n)||sae(n))return{explicit:e.explicit,value:n};if(Roe(r)||sae(r))return{explicit:e.explicit,value:r};if(!Roe(n)&&!sae(n)&&!Roe(r)&&!sae(r))return{explicit:e.explicit,value:Hoe(n,r)};throw new Error("It should never reach here")}function Koe(e,t){var n=e&&e[t];return!!n&&(je(n)?D9(n,(function(e){return!!e.field})):Qie(n)||Zie(n))}function $oe(e){return D9(Bte,(function(t){if(Koe(e,t)){var n=e[t];if(je(n))return D9(n,(function(e){return!!e.aggregate}));var r=Ooe(n);return r&&!!r.aggregate}return!1}))}function Zoe(e,t){var n=[],r=[],a=[],i=[],o={};return eue(e,(function(u,s){if(Qie(u)){var c=u.field,l=u.aggregate,f=u.bin,d=u.timeUnit,h=h9(u,["field","aggregate","bin","timeUnit"]);if(l||d||f){var p,v=_oe(u),m=v&&v.title,g=doe(u,{forAs:!0}),b=Object.assign(Object.assign(Object.assign({},m?[]:{title:xoe(u,t,{allowDisabling:!0})}),h),{field:g});if(l){if(Gee(l)?(p="argmax",g=doe({op:"argmax",field:l.argmax},{forAs:!0}),b.field="".concat(g,".").concat(c)):Vee(l)?(p="argmin",g=doe({op:"argmin",field:l.argmin},{forAs:!0}),b.field="".concat(g,".").concat(c)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(p=l),p){var y={op:p,as:g};c&&(y.field=c),i.push(y)}}else if(n.push(g),ioe(u)&&hne(f)){if(r.push({bin:f,field:c,as:g}),n.push(doe(u,{binSuffix:"end"})),Ioe(u,s)&&n.push(doe(u,{binSuffix:"range"})),Qte(s)){var x={field:g+"_end"};o[s+"2"]=x}b.bin="binned",Gte(s)||(b.type=Aae)}else if(d){a.push({timeUnit:d,field:c,as:g});var _=ioe(u)&&u.type!==Nae&&"time";_&&(s===wte||s===jte?b.formatType=_:!function(e){return!!Kte[e]}(s)?Qte(s)&&(b.axis=Object.assign({formatType:_},b.axis)):b.legend=Object.assign({formatType:_},b.legend))}o[s]=b}else n.push(c),o[s]=e[s]}else o[s]=e[s]})),{bins:r,timeUnits:a,aggregate:i,groupby:n,encoding:o}}function Joe(e,t,n){var r=t.type;return U9(e).reduce((function(a,i){if(!Wte(i))return Wre(b.invalidEncodingChannel(i)),a;var o=e[i];if("angle"!==i||"arc"!==r||e.theta||(Wre(b.REPLACE_ANGLE_WITH_THETA),i=ite),!function(e,t,n){var r=sne(t,n);if(!r)return!1;if("binned"===r){var a=e[t===tte?Qee:ete];return!!(Qie(a)&&Qie(e[t])&&pne(a.bin))}return!0}(e,i,r))return Wre(b.incompatibleChannel(i,r)),a;if(i===vte&&"line"===r){var u=Ooe(e[i]);if(null===u||void 0===u?void 0:u.aggregate)return Wre(b.LINE_WITH_VARYING_SIZE),a}if(i===fte&&(t.filled?"fill"in e:"stroke"in e))return Wre(b.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),a;if(i===Ote||i===kte&&!je(o)&&!ooe(o)||i===jte&&je(o))o&&(a[i]=Ze(o).reduce((function(e,t){return Qie(t)?e.push(Coe(t,i)):Wre(b.emptyFieldDef(t,i)),e}),[]));else{if(i===jte&&null===o)a[i]=null;else if(!Qie(o)&&!toe(o)&&!ooe(o)&&!$ie(o)&&!sae(o))return Wre(b.emptyFieldDef(o,i)),a;a[i]=joe(o,i,n)}return a}),{})}function Qoe(e){var t,n=[],r=Object(tr.a)(U9(e));try{for(r.s();!(t=r.n()).done;){var a=t.value;if(Koe(e,a)){var i,o=e[a],u=Ze(o),s=Object(tr.a)(u);try{for(s.s();!(i=s.n()).done;){var c=i.value;Qie(c)?n.push(c):Zie(c)&&n.push(c.condition)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return n}function eue(e,t,n){if(e){var r,a=Object(tr.a)(U9(e));try{for(a.s();!(r=a.n()).done;){var i=r.value,o=e[i];if(je(o)){var u,s=Object(tr.a)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;t.call(n,c,i)}}catch(l){s.e(l)}finally{s.f()}}else t.call(n,o,i)}}catch(l){a.e(l)}finally{a.f()}}}function tue(e,t,n,r){return e?U9(e).reduce((function(n,a){var i=e[a];return je(i)?i.reduce((function(e,n){return t.call(r,e,n,a)}),n):t.call(r,n,i,a)}),n):n}function nue(e,t){return U9(t).reduce((function(n,r){switch(r){case Qee:case ete:case Ete:case Ate:case Cte:case tte:case nte:case ite:case ote:case rte:case ate:case ute:case ste:case cte:case lte:case wte:case pte:case mte:case jte:return n;case kte:if("line"===e||"trail"===e)return n;case Ote:case Ste:var a=t[r];if(je(a)||Qie(a)){var i,o=Object(tr.a)(Ze(a));try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate||n.push(doe(u,{}))}}catch(c){o.e(c)}finally{o.f()}}return n;case vte:if("trail"===e)return n;case fte:case dte:case hte:case gte:case bte:case yte:case _te:case xte:var s=Ooe(t[r]);return s&&!s.aggregate&&n.push(doe(s,{})),n}}),[])}function rue(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var a=e.map((function(e){var n=e.fieldPrefix,a=e.titlePrefix,i=r?" of ".concat(t.field):"";return{field:n+t.field,type:t.type,title:sae(a)?{signal:a+'"'.concat(escape(i),'"')}:a+i}}));return{tooltip:[].concat(Object(mo.a)(a),Object(mo.a)(Qoe(n)))}}function aue(e){var t=e.axis,n=e.title,r=e.field;return t&&void 0!==t.title?void 0:nee(n,r)}function iue(e,t,n,r,a){var i=n.scale,o=n.axis;return function(u){var s=u.partName,c=u.mark,l=u.positionPrefix,f=u.endPositionPrefix,d=void 0===f?void 0:f,h=u.aria,p=u.extraEncoding,v=void 0===p?{}:p,m=aue(n);return oue(e,s,a,h,{mark:c,encoding:Object.assign(Object.assign(Object.assign(Object(go.a)({},t,Object.assign(Object.assign(Object.assign({field:l+"_"+n.field,type:n.type},void 0!==m?{title:m}:{}),void 0!==i?{scale:i}:{}),void 0!==o?{axis:o}:{})),_t(d)?Object(go.a)({},t+"2",{field:d+"_"+n.field}):{}),r),v)})}}function oue(e,t,n,r,a){var i=e.clip,o=e.color,u=e.opacity,s=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign(Object.assign({},a),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),u?{opacity:u}:{}),Dee(a.mark)?a.mark:{type:a.mark}),{style:"".concat(s,"-").concat(t)}),gt(e[t])?{}:e[t]),!1===r?{aria:r}:{})})]:[]}function uue(e,t,n){var r=e.encoding,a="vertical"===t?"y":"x",i=r[a],o=r[a+"2"],u=r[a+"Error"],s=r[a+"Error2"];return{continuousAxisChannelDef:sue(i,n),continuousAxisChannelDef2:sue(o,n),continuousAxisChannelDefError:sue(u,n),continuousAxisChannelDefError2:sue(s,n),continuousAxis:a}}function sue(e,t){if(e&&e.aggregate){var n=e.aggregate,r=h9(e,["aggregate"]);return n!==t&&Wre(b.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function cue(e,t){var n=e.mark,r=e.encoding,a=r.x,i=r.y;if(noe(a)){if(noe(i)){var o=Qie(a)&&a.aggregate,u=Qie(i)&&i.aggregate;if(o||u!==t){if(u||o!==t){if(o===t&&u===t)throw new Error("Both x and y cannot have aggregate");return Dee(n)&&n.orient?n.orient:"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(noe(i))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}var lue="boxplot",fue=new zee(lue,hue);function due(e){return yt(e)?"tukey":e}function hue(e,t){var n,r,a=t.config,i=e.mark,o=(e.encoding,e.selection),u=(e.projection,h9(e,["mark","encoding","selection","projection"])),s=Dee(i)?i:{type:i};o&&Wre(b.selectionNotSupported("boxplot"));var c,l=null!==(n=s.extent)&&void 0!==n?n:a.boxplot.extent,f=Uoe("size",s,a),d=due(l),h=function(e,t,n){var r=cue(e,lue),a=uue(e,r,lue),i=a.continuousAxisChannelDef,o=a.continuousAxis,u=i.field,s=due(t),c=[].concat(Object(mo.a)(pue(u)),[{op:"median",field:u,as:"mid_box_"+u},{op:"min",field:u,as:("min-max"===s?"lower_whisker_":"min_")+u},{op:"max",field:u,as:("min-max"===s?"upper_whisker_":"max_")+u}]),l="min-max"===s||"tukey"===s?[]:[{calculate:'datum["upper_box_'.concat(u,'"] - datum["lower_box_').concat(u,'"]'),as:"iqr_"+u},{calculate:'min(datum["upper_box_'.concat(u,'"] + datum["iqr_').concat(u,'"] * ').concat(t,', datum["max_').concat(u,'"])'),as:"upper_whisker_"+u},{calculate:'max(datum["lower_box_'.concat(u,'"] - datum["iqr_').concat(u,'"] * ').concat(t,', datum["min_').concat(u,'"])'),as:"lower_whisker_"+u}],f=e.encoding,d=o,h=(f[d],function(e){var t,n,r=e.tooltip,a=h9(e,["tooltip"]);if(!r)return{filteredEncoding:e};if(je(r)){var i,o=Object(tr.a)(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;u.aggregate?(t||(t=[]),t.push(u)):(n||(n=[]),n.push(u))}}catch(s){o.e(s)}finally{o.f()}t&&(a.tooltip=t)}else r.aggregate?a.tooltip=r:n=r;return je(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:a}}(h9(f,["symbol"===typeof d?d:d+""]))),p=h.customTooltipWithoutAggregatedField,v=Zoe(h.filteredEncoding,n),m=v.bins,g=v.timeUnits,b=v.aggregate,y=v.groupby,x=v.encoding,_="vertical"===r?"horizontal":"vertical",w=r;return{transform:[].concat(Object(mo.a)(m),Object(mo.a)(g),[{aggregate:[].concat(Object(mo.a)(b),Object(mo.a)(c)),groupby:y}],l),groupby:y,aggregate:b,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:x,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:p}}(e,l,a),p=h.transform,v=h.continuousAxisChannelDef,m=h.continuousAxis,g=h.groupby,y=h.aggregate,x=h.encodingWithoutContinuousAxis,_=h.ticksOrient,w=h.boxOrient,k=h.customTooltipWithoutAggregatedField,O=(x.color,x.size),S=h9(x,["color","size"]),j=function(e){return iue(s,m,v,e,a.boxplot)},E=j(S),C=j(x),A=j(Object.assign(Object.assign({},S),O?{size:O}:{})),T=rue([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],v,x),N={type:"tick",color:"black",opacity:1,orient:_,invalid:null},M="min-max"===d?T:rue([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,x),D=[].concat(Object(mo.a)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",aria:!1,extraEncoding:M})),Object(mo.a)(E({partName:"rule",mark:{type:"rule",invalid:null},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",aria:!1,extraEncoding:M})),Object(mo.a)(E({partName:"ticks",mark:N,positionPrefix:"lower_whisker",aria:!1,extraEncoding:M})),Object(mo.a)(E({partName:"ticks",mark:N,positionPrefix:"upper_whisker",aria:!1,extraEncoding:M}))),I=[].concat(Object(mo.a)("tukey"!==d?D:[]),Object(mo.a)(C({partName:"box",mark:Object.assign(Object.assign({type:"bar"},f?{size:f}:{}),{orient:w,invalid:null}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",aria:!1,extraEncoding:T})),Object(mo.a)(A({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Ee(a.boxplot.median)&&a.boxplot.median.color?{color:a.boxplot.median.color}:{}),f?{size:f}:{}),{orient:_,ariaRoleDescription:"box"}),positionPrefix:"mid_box",extraEncoding:T})));if("min-max"!==d){var F='datum["lower_box_'.concat(v.field,'"]'),R='datum["upper_box_'.concat(v.field,'"]'),P="(".concat(R," - ").concat(F,")"),L="".concat(F," - ").concat(l," * ").concat(P),B="".concat(R," + ").concat(l," * ").concat(P),z='datum["'.concat(v.field,'"]'),U={joinaggregate:pue(v.field),groupby:g},W=void 0;"tukey"===d&&(W={transform:[{filter:"(".concat(L," <= ").concat(z,") && (").concat(z," <= ").concat(B,")")},{aggregate:[{op:"min",field:v.field,as:"lower_whisker_"+v.field},{op:"max",field:v.field,as:"upper_whisker_"+v.field},{op:"min",field:"lower_box_"+v.field,as:"lower_box_"+v.field},{op:"max",field:"upper_box_"+v.field,as:"upper_box_"+v.field}].concat(Object(mo.a)(y)),groupby:g}],layer:D});S.tooltip;var V=h9(S,["tooltip"]),G=v.scale,q=v.axis,H=aue(v),X=oue(s,"outliers",a.boxplot,!0,{transform:[{filter:"(".concat(z," < ").concat(L,") || (").concat(z," > ").concat(B,")")}],mark:"point",encoding:Object.assign(Object.assign(Object(go.a)({},m,Object.assign(Object.assign(Object.assign({field:v.field,type:v.type},void 0!==H?{title:H}:{}),void 0!==G?{scale:G}:{}),void 0!==q?{axis:q}:{})),V),k?{tooltip:k}:{})})[0];X&&W?c={transform:[U],layer:[X,W]}:X?(c=X).transform.unshift(U):W&&(c=W).transform.unshift(U)}return c?Object.assign(Object.assign({},u),{layer:[c,{transform:p,layer:I}]}):Object.assign(Object.assign({},u),{transform:(null!==(r=u.transform)&&void 0!==r?r:[]).concat(p),layer:I})}function pue(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}var vue="errorbar",mue=new zee(vue,gue);function gue(e,t){var n=t.config,r=yue(e,vue,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.ticksOrient,c=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,d=iue(c,o,i,u,n.errorbar),h={type:"tick",orient:s},p=[].concat(Object(mo.a)(d({partName:"ticks",mark:h,positionPrefix:"lower",aria:!1,extraEncoding:f})),Object(mo.a)(d({partName:"ticks",mark:h,positionPrefix:"upper",aria:!1,extraEncoding:f})),Object(mo.a)(d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar"},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})));return Object.assign(Object.assign(Object.assign({},l),{transform:a}),p.length>1?{layer:p}:Object.assign({},p[0]))}function bue(e,t){var n=e.encoding;if(function(e){return(aoe(e.x)||aoe(e.y))&&!aoe(e.x2)&&!aoe(e.y2)&&!aoe(e.xError)&&!aoe(e.xError2)&&!aoe(e.yError)&&!aoe(e.yError2)}(n))return{orient:cue(e,t),inputType:"raw"};var r=function(e){return aoe(e.x2)||aoe(e.y2)}(n),a=function(e){return aoe(e.xError)||aoe(e.xError2)||aoe(e.yError)||aoe(e.yError2)}(n),i=n.x,o=n.y;if(r){if(a)throw new Error("".concat(t," cannot be both type aggregated-upper-lower and aggregated-error"));var u=n.x2,s=n.y2;if(aoe(u)&&aoe(s))throw new Error("".concat(t," cannot have both x2 and y2"));if(aoe(u)){if(noe(i))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(t))}if(aoe(s)){if(noe(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(t))}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(aoe(l)&&!aoe(c))throw new Error("".concat(t," cannot have xError2 without xError"));if(aoe(d)&&!aoe(f))throw new Error("".concat(t," cannot have yError2 without yError"));if(aoe(c)&&aoe(f))throw new Error("".concat(t," cannot have both xError and yError with both are quantiative"));if(aoe(c)){if(noe(i))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(aoe(f)){if(noe(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function yue(e,t,n){var r,a=e.mark,i=e.encoding,o=e.selection,u=(e.projection,h9(e,["mark","encoding","selection","projection"])),s=Dee(a)?a:{type:a};o&&Wre(b.selectionNotSupported(t));var c=bue(e,t),l=c.orient,f=c.inputType,d=uue(e,l,t),h=d.continuousAxisChannelDef,p=d.continuousAxisChannelDef2,v=d.continuousAxisChannelDefError,m=d.continuousAxisChannelDefError2,g=d.continuousAxis,y=function(e,t,n,r,a,i,o,u){var s,c=[],l=[],f=t.field,d=!1;if("raw"===i){var h,p,v,m=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":u.errorbar.center,g=e.extent?e.extent:"mean"===m?"stderr":"iqr";if("median"===m!==("iqr"===g)&&Wre(b.errorBarCenterIsUsedWithWrongExtent(m,g,o)),"stderr"===g||"stdev"===g)c=[{op:g,field:f,as:"extent_"+f},{op:m,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],s=[{fieldPrefix:"center_",titlePrefix:Y9(m)},{fieldPrefix:"upper_",titlePrefix:xue(m,g,"+")},{fieldPrefix:"lower_",titlePrefix:xue(m,g,"-")}],d=!0;else e.center&&e.extent&&Wre(b.errorBarCenterIsNotNeeded(e.extent,o)),"ci"===g?(h="mean",p="ci0",v="ci1"):(h="median",p="q1",v="q3"),c=[{op:p,field:f,as:"lower_"+f},{op:v,field:f,as:"upper_"+f},{op:h,field:f,as:"center_"+f}],s=[{fieldPrefix:"upper_",titlePrefix:xoe({field:f,aggregate:v,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:xoe({field:f,aggregate:p,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:xoe({field:f,aggregate:h,type:"quantitative"},u,{allowDisabling:!1})}]}else{(e.center||e.extent)&&Wre(b.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===i?(s=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===i&&(s=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],a?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(a.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y,x=Object(tr.a)(l);try{for(x.s();!(y=x.n()).done;){var _=y.value;s.push({fieldPrefix:_.as.substring(0,6),titlePrefix:Q9(Q9(_.calculate,'datum["',""),'"]',"")})}}catch(w){x.e(w)}finally{x.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:s,tooltipTitleWithFieldName:d}}(s,h,p,v,m,f,t,n),x=y.errorBarSpecificAggregate,_=y.postAggregateCalculates,w=y.tooltipSummary,k=y.tooltipTitleWithFieldName,O=i,S=g,j=(O[S],"x"===g?"x2":"y2"),E=(O[j],"x"===g?"xError":"yError"),C=(O[E],"x"===g?"xError2":"yError2"),A=(O[C],Zoe(h9(O,["symbol"===typeof S?S:S+"","symbol"===typeof j?j:j+"","symbol"===typeof E?E:E+"","symbol"===typeof C?C:C+""]),n)),T=A.bins,N=A.timeUnits,M=A.aggregate,D=A.groupby,I=A.encoding,F=[].concat(Object(mo.a)(M),Object(mo.a)(x)),R="raw"!==f?[]:D,P=rue(w,h,I,k);return{transform:[].concat(Object(mo.a)(null!==(r=u.transform)&&void 0!==r?r:[]),Object(mo.a)(T),Object(mo.a)(N),Object(mo.a)(0===F.length?[]:[{aggregate:F,groupby:R}]),Object(mo.a)(_)),groupby:R,continuousAxisChannelDef:h,continuousAxis:g,encodingWithoutContinuousAxis:I,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:s,outerSpec:u,tooltipEncoding:P}}function xue(e,t,n){return Y9(e)+" "+n+" "+t}var _ue="errorband",wue=new zee(_ue,kue);function kue(e,t){var n=t.config,r=yue(e,_ue,n),a=r.transform,i=r.continuousAxisChannelDef,o=r.continuousAxis,u=r.encodingWithoutContinuousAxis,s=r.markDef,c=r.outerSpec,l=r.tooltipEncoding,f=s,d=iue(f,o,i,u,n.errorband),h=void 0!==e.encoding.x&&void 0!==e.encoding.y,p={type:h?"area":"rect"},v={type:h?"line":"rule"},m=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return h?(p=Object.assign(Object.assign(Object.assign({},p),m),{ariaRoleDescription:"errorband"}),v=Object.assign(Object.assign({},v),m)):f.interpolate?Wre(b.errorBand1DNotSupport("interpolate")):f.tension&&Wre(b.errorBand1DNotSupport("tension")),Object.assign(Object.assign({},c),{transform:a,layer:[].concat(Object(mo.a)(d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})),Object(mo.a)(d({partName:"borders",mark:v,positionPrefix:"lower",aria:!1,extraEncoding:l})),Object(mo.a)(d({partName:"borders",mark:v,positionPrefix:"upper",aria:!1,extraEncoding:l})))})}var Oue={};function Sue(e,t,n){var r=new zee(e,t);Oue[e]={normalizer:r,parts:n}}Sue(lue,hue,["box","median","outliers","rule","ticks"]),Sue(vue,gue,["ticks","rule"]),Sue(_ue,kue,["band","borders"]);var jue=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Eue=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Cue={fillColor:{part:"legend",vgProp:"fill"},gradientStrokeColor:{part:"gradient",vgProp:"stroke"},labelColor:{part:"labels",vgProp:"fill"},strokeColor:{part:"legend",vgProp:"stroke"},symbolFillColor:{part:"symbols",vgProp:"fill"},symbolStrokeColor:{part:"symbols",vgProp:"stroke"},titleColor:{part:"title",vgProp:"fill"}},Aue={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Tue=(U9(Aue),"_vgsid_"),Nue={single:{on:"click",fields:[Tue],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[Tue],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Mue(e){return!!e&&("legend"===e||!!e.legend)}function Due(e){return Mue(e)&&Ee(e)}function Iue(e){return"concat"in e}function Fue(e){return"vconcat"in e}function Rue(e){return"hconcat"in e}function Pue(e){return Ee(e)&&void 0!==e.step}function Lue(e){return e.view||e.width||e.height}var Bue=U9({align:1,bounds:1,center:1,columns:1,spacing:1});function zue(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function Uue(e,t){var n=Wue(e,t);return Pue(n)?n.step:Vue}function Wue(e,t){var n;return nee(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}var Vue=20;var Gue={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Vue},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:Pee,circle:{},geoshape:{},image:{},line:{},point:{},rect:Lee,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Nue,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},que=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Hue={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Xue={blue:que[0],orange:que[1],red:que[2],teal:que[3],green:que[4],yellow:que[5],purple:que[6],pink:que[7],brown:que[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Yue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{signals:[{name:"color",value:Ee(e)?Object.assign(Object.assign({},Xue),e):Xue}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Kue(e){return{signals:[{name:"fontSize",value:Ee(e)?Object.assign(Object.assign({},Hue),e):Hue}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $ue(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Zue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.font,r=e.fontSize,a=h9(e,["color","font","fontSize"]);return Ae({},Gue,n?$ue(n):{},t?Yue(t):{},r?Kue(r):{},a||{})}var Jue=["view"].concat(Object(mo.a)(Mee)),Que=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ese=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function tse(e){e=j9(e);var t,n=Object(tr.a)(Que);try{for(n.s();!(t=n.n()).done;){delete e[t.value]}}catch(k){n.e(k)}finally{n.f()}if(e.axis)for(var r in e.axis)cee(e.axis[r])&&delete e.axis[r];if(e.legend){var a,i=Object(tr.a)(jue);try{for(i.s();!(a=i.n()).done;){var o=a.value;delete e.legend[o]}}catch(k){i.e(k)}finally{i.f()}}if(e.mark){var u,s=Object(tr.a)(Fee);try{for(s.s();!(u=s.n()).done;){var c=u.value;delete e.mark[c]}}catch(k){s.e(k)}finally{s.f()}e.mark.tooltip&&Ee(e.mark.tooltip)&&delete e.mark.tooltip}var l,f=Object(tr.a)(Jue);try{for(f.s();!(l=f.n()).done;){var d,h=l.value,p=Object(tr.a)(Fee);try{for(p.s();!(d=p.n()).done;){var v=d.value;delete e[h][v]}}catch(k){p.e(k)}finally{p.f()}var m=ese[h];if(m){var g,b=Object(tr.a)(m);try{for(b.s();!(g=b.n()).done;){var y=g.value;delete e[h][y]}}catch(k){b.e(k)}finally{b.f()}}nse(e,h)}}catch(k){f.e(k)}finally{f.f()}var x,_=Object(tr.a)(U9(Oue));try{for(_.s();!(x=_.n()).done;){delete e[x.value]}}catch(k){_.e(k)}finally{_.f()}for(var w in function(e){var t=Foe(e.title),n=t.titleMarkConfig,r=t.subtitleMarkConfig,a=t.subtitle;z9(n)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),n));z9(r)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),r));z9(a)?delete e.title:e.title=a}(e),e)Ee(e[w])&&z9(e[w])&&delete e[w];return z9(e)?void 0:e}function nse(e,t,n,r){var a=r?e[t][r]:e[t];"view"===t&&(n="cell");var i=Object.assign(Object.assign({},a),e.style[null!==n&&void 0!==n?n:t]);z9(i)||(e.style[null!==n&&void 0!==n?n:t]=i),r||delete e[t]}function rse(e){return"layer"in e}var ase=n(28),ise=n(25),ose=n(13),use=n(14),sse=function(){function e(){Object(Rx.a)(this,e)}return Object(Px.a)(e,[{key:"map",value:function(e,t){return qie(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Rue(e)?this.mapHConcat(e,t):Fue(e)?this.mapVConcat(e,t):Iue(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}},{key:"mapLayerOrUnit",value:function(e,t){if(rse(e))return this.mapLayer(e,t);if(Bee(e))return this.mapUnit(e,t);throw new Error(b.invalidSpec(e))}},{key:"mapLayer",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{layer:e.layer.map((function(e){return n.mapLayerOrUnit(e,t)}))})}},{key:"mapHConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{hconcat:e.hconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapVConcat",value:function(e,t){var n=this;return Object.assign(Object.assign({},e),{vconcat:e.vconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapConcat",value:function(e,t){var n=this,r=e.concat,a=h9(e,["concat"]);return Object.assign(Object.assign({},a),{concat:r.map((function(e){return n.map(e,t)}))})}},{key:"mapFacet",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}},{key:"mapRepeat",value:function(e,t){return Object.assign(Object.assign({},e),{spec:this.map(e.spec,t)})}}]),e}(),cse={zero:1,center:1,normalize:1};function lse(e){return e in cse}var fse=new Set([mee,bee,gee,kee,_ee,Eee,Cee,xee,Oee,See]),dse=new Set([bee,gee,mee]);function hse(e,t){var n,r,a="x"===t?"y":"radius",i=e[t],o=e[a];if(Qie(i)&&Qie(o))if("quantitative"===eoe(i)&&"quantitative"===eoe(o)){if(i.stack)return t;if(o.stack)return a;var u=Qie(i)&&!!i.aggregate;if(u!==(Qie(o)&&!!o.aggregate))return u?t:a;var s=null===(n=i.scale)||void 0===n?void 0:n.type,c=null===(r=o.scale)||void 0===r?void 0:r.type;if(s&&"linear"!==s)return a;if(c&&"linear"!==c)return t}else{if("quantitative"===eoe(i))return t;if("quantitative"===eoe(o))return a}else{if("quantitative"===eoe(i))return t;if("quantitative"===eoe(o))return a}}function pse(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vse(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Dee(e)?e.type:e;if(!fse.has(r))return null;var a=hse(t,"x")||hse(t,"theta");if(!a)return null;var i=t[a],o=Qie(i)?doe(i,{}):void 0,u=pse(a),s=t[u],c=Qie(s)?doe(s,{}):void 0;c===o&&(c=void 0,s=void 0,u=void 0);var l,f=$te.reduce((function(e,n){if("tooltip"!==n&&Koe(t,n)){var r,a=t[n],i=Object(tr.a)(Ze(a));try{for(i.s();!(r=i.n()).done;){var o=Ooe(r.value);if(!o.aggregate){var u=doe(o,{});u&&u===c||e.push({channel:n,fieldDef:o})}}}catch(s){i.e(s)}finally{i.f()}}return e}),[]);if(void 0!==i.stack?l=gt(i.stack)?i.stack?"zero":null:i.stack:f.length>0&&dse.has(r)&&(l="zero"),!l||!lse(l))return null;if($oe(t)&&0===f.length)return null;if(i.scale&&i.scale.type&&i.scale.type!==Fae){if(n.disallowNonLinearStack)return null;Wre(b.cannotStackNonLinearScale(i.scale.type))}return aoe(t[Xte(a)])?(void 0!==i.stack&&Wre(b.cannotStackRangedMark(a)),null):(Qie(i)&&i.aggregate&&!M9(Yee,i.aggregate)&&Wre(b.stackNonSummativeAggregate(i.aggregate)),{groupbyChannel:s?u:void 0,groupbyField:c,fieldChannel:a,impute:null!==i.impute&&Tee(r),stackBy:f,offset:l})}function mse(e){e.point,e.line;var t=h9(e,["point","line"]);return U9(t).length>1?t:t.type}function gse(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){var r=n[t];e[r]&&(e=Object.assign(Object.assign({},e),Object(go.a)({},r,C9(e[r],["point","line"]))))}return e}function bse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===e.point?{opacity:0}:e.point?Ee(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?Ee(t.point)?t.point:{}:void 0}function yse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}var xse=function(){function e(){Object(Rx.a)(this,e),this.name="path-overlay"}return Object(Px.a)(e,[{key:"hasMatchingType",value:function(e,t){if(Bee(e)){var n=e.mark,r=e.encoding,a=Dee(n)?n:{type:n};switch(a.type){case"line":case"rule":case"trail":return!!bse(a,t[a.type],r);case"area":return!!bse(a,t[a.type],r)||!!yse(a,t[a.type])}}return!1}},{key:"run",value:function(e,t,n){var r=t.config,a=e.selection,i=e.projection,o=e.encoding,u=e.mark,s=h9(e,["selection","projection","encoding","mark"]),c=Dee(u)?u:{type:u},l=bse(c,r[c.type],o),f="area"===c.type&&yse(c,r[c.type]),d=[Object.assign(Object.assign({},a?{selection:a}:{}),{mark:mse(Object.assign(Object.assign({},"area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{}),c)),encoding:C9(o,["shape"])})],h=vse(c,o),p=o;if(h){var v=h.fieldChannel,m=h.offset;p=Object.assign(Object.assign({},o),Object(go.a)({},v,Object.assign(Object.assign({},o[v]),m?{stack:m}:{})))}return f&&d.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"line"},E9(c,["clip","interpolate","tension","tooltip"])),f),encoding:p})),l&&d.push(Object.assign(Object.assign({},i?{projection:i}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},E9(c,["clip","tooltip"])),l),encoding:p})),n(Object.assign(Object.assign({},s),{layer:d}),Object.assign(Object.assign({},t),{config:gse(r)}))}}]),e}(),_se=function(){function e(){Object(Rx.a)(this,e),this.name="RangeStep"}return Object(Px.a)(e,[{key:"hasMatchingType",value:function(e){var t;if(Bee(e)&&e.encoding){var n,r=Object(tr.a)(Jte);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=e.encoding[a];if(i&&aoe(i)&&(null===(t=null===i||void 0===i?void 0:i.scale)||void 0===t?void 0:t.rangeStep))return!0}}catch(o){r.e(o)}finally{r.f()}}return!1}},{key:"run",value:function(e){var t,n,r={},a=Object.assign({},e.encoding),i=Object(tr.a)(Jte);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=Yte(o),s=a[o];if(s&&aoe(s)&&(null===(t=null===s||void 0===s?void 0:s.scale)||void 0===t?void 0:t.rangeStep)){var c=s.scale,l=h9(s,["scale"]),f=c,d=(f.rangeStep,h9(f,["rangeStep"]));r[u]={step:c.rangeStep},Wre(b.RANGE_STEP_DEPRECATED),a=Object.assign(Object.assign({},a),Object(go.a)({},o,Object.assign(Object.assign({},l),z9(d)?{}:{scale:d})))}}}catch(h){i.e(h)}finally{i.f()}return Object.assign(Object.assign(Object.assign({},r),e),{encoding:a})}}]),e}();function wse(e,t){return t?Vie(e)?Cse(e,t):Sse(e,t):e}function kse(e,t){return t?Cse(e,t):e}function Ose(e,t,n){var r,a=t[e];return(r=a)&&!_t(r)&&"repeat"in r?a.repeat in n?Object.assign(Object.assign({},t),Object(go.a)({},e,n[a.repeat])):void Wre(b.noSuchRepeatedValue(a.repeat)):t}function Sse(e,t){if(void 0!==(e=Ose("field",e,t))){if(null===e)return null;if(Xie(e)&&Uie(e.sort)){var n=Ose("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function jse(e,t){if(Qie(e))return Sse(e,t);var n=Ose("datum",e,t);return n===e||n.type||(n.type="nominal"),n}function Ese(e,t){if(!aoe(e)){if(Jie(e)){var n=jse(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});e.condition;return h9(e,["condition"])}return e}var r=jse(e,t);return r||($ie(e)?{condition:e.condition}:void 0)}function Cse(e,t){var n={};for(var r in e)if(ft(e,r)){var a=e[r];if(je(a))n[r]=a.map((function(e){return Ese(e,t)})).filter((function(e){return e}));else{var i=Ese(a,t);void 0!==i&&(n[r]=i)}}return n}var Ase=function(){function e(){Object(Rx.a)(this,e),this.name="RuleForRangedLine"}return Object(Px.a)(e,[{key:"hasMatchingType",value:function(e){if(Bee(e)){var t=e.encoding;if("line"===e.mark){var n,r=Object(tr.a)(Vte);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=t[qte(a)];if(t[a]&&(Qie(i)&&!pne(i.bin)||toe(i)))return!0}}catch(o){r.e(o)}finally{r.f()}}}return!1}},{key:"run",value:function(e,t,n){var r=e.encoding;return Wre(b.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign(Object.assign({},e),{mark:"rule"}),t)}}]),e}();function Tse(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=U9(t).reduce((function(e,t){return n[t]&&e.push(t),e}),[]);r.length>0&&Wre(b.encodingOverridden(r))}var a=Object.assign(Object.assign({},null!==t&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{});return z9(a)?void 0:a}function Nse(e){var t=e.parentProjection,n=e.projection;return t&&n&&Wre(b.projectionOverridden({parentProjection:t,projection:n})),null!==n&&void 0!==n?n:t}function Mse(e,t){void 0===t&&(t=Zue(e.config));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Dse.map(e,{config:t})}(e,t),r=function(e,t,n){var r=t.width,a=t.height,i=Bee(e)||rse(e),o={};i?"container"==r&&"container"==a?(o.type="fit",o.contains="padding"):"container"==r?(o.type="fit-x",o.contains="padding"):"container"==a&&(o.type="fit-y",o.contains="padding"):("container"==r&&(Wre(b.containerSizeNonSingle("width")),r=void 0),"container"==a&&(Wre(b.containerSizeNonSingle("height")),a=void 0));var u=Object.assign(Object.assign(Object.assign({type:"pad"},o),n?Ise(n.autosize):{}),Ise(e.autosize));"fit"!==u.type||i||(Wre(b.FIT_NON_SINGLE),u.type="pad");"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&Wre(b.containerSizeNotCompatibleWithAutosize("width"));"container"==a&&"fit"!=u.type&&"fit-y"!=u.type&&Wre(b.containerSizeNotCompatibleWithAutosize("height"));if(S9(u,{type:"pad"}))return;return u}(n,{width:e.width,height:e.height,autosize:e.autosize},t);return Object.assign(Object.assign({},n),r?{autosize:r}:{})}var Dse=new(function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){var e;return Object(Rx.a)(this,n),(e=t.apply(this,arguments)).nonFacetUnitNormalizers=[fue,mue,wue,new xse,new Ase,new _se],e}return Object(Px.a)(n,[{key:"map",value:function(e,t){if(Bee(e)){var r=Koe(e.encoding,$ee),a=Koe(e.encoding,Zee),i=Koe(e.encoding,Jee);if(r||a||i)return this.mapFacetedUnit(e,t)}return Object(ase.a)(Object(ise.a)(n.prototype),"map",this).call(this,e,t)}},{key:"mapUnit",value:function(e,t){var n=t.parentEncoding,r=t.parentProjection,a=Object.assign(Object.assign({},e),{encoding:kse(e.encoding,t.repeater)});if(n||r)return this.mapUnitWithParentEncodingOrProjection(a,t);var i,o=this.mapLayerOrUnit.bind(this),u=Object(tr.a)(this.nonFacetUnitNormalizers);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(s.hasMatchingType(a,t.config))return s.run(a,t,o)}}catch(c){u.e(c)}finally{u.f()}return a}},{key:"mapRepeat",value:function(e,t){return function(e){return!je(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}},{key:"mapLayerRepeat",value:function(e,t){var n=this,r=e.repeat,a=e.spec,i=h9(e,["repeat","spec"]),o=r.row,u=r.column,s=r.layer,c=t.repeater,l=void 0===c?{}:c,f=t.repeaterPrefix,d=void 0===f?"":f;return o||u?this.mapRepeat(Object.assign(Object.assign({},e),{repeat:Object.assign(Object.assign({},o?{row:o}:{}),u?{column:u}:{}),spec:{repeat:{layer:s},spec:a}}),t):Object.assign(Object.assign({},i),{layer:s.map((function(e){var r=Object.assign(Object.assign({},l),{layer:e}),i=(a.name||"")+d+"child__layer_".concat(q9(e)),o=n.mapLayerOrUnit(a,Object.assign(Object.assign({},t),{repeater:r,repeaterPrefix:i}));return o.name=i,o}))})}},{key:"mapNonLayerRepeat",value:function(e,t){var n,r=e,a=r.repeat,i=r.spec,o=r.data,u=h9(e,["repeat","spec","data"]);!je(a)&&e.columns&&(e=C9(e,["columns"]),Wre(b.columnsNotSupportByRowCol("repeat")));var s,c=[],l=t.repeater,f=void 0===l?{}:l,d=t.repeaterPrefix,h=void 0===d?"":d,p=!je(a)&&a.row||[f?f.row:null],v=!je(a)&&a.column||[f?f.column:null],m=je(a)&&a||[f?f.repeat:null],g=Object(tr.a)(m);try{for(g.s();!(s=g.n()).done;){var y,x=s.value,_=Object(tr.a)(p);try{for(_.s();!(y=_.n()).done;){var w,k=y.value,O=Object(tr.a)(v);try{for(O.s();!(w=O.n()).done;){var S=w.value,j={repeat:x,row:k,column:S,layer:f.layer},E=(i.name||"")+h+"child__"+(je(a)?"".concat(q9(x)):(a.row?"row_".concat(q9(k)):"")+(a.column?"column_".concat(q9(S)):"")),C=this.map(i,Object.assign(Object.assign({},t),{repeater:j,repeaterPrefix:E}));C.name=E,c.push(C9(C,["data"]))}}catch(T){O.e(T)}finally{O.f()}}}catch(T){_.e(T)}finally{_.f()}}}catch(T){g.e(T)}finally{g.f()}var A=je(a)?e.columns:a.column?a.column.length:1;return Object.assign(Object.assign({data:null!==(n=i.data)&&void 0!==n?n:o,align:"all"},u),{columns:A,concat:c})}},{key:"mapFacet",value:function(e,t){return Vie(e.facet)&&e.columns&&(e=C9(e,["columns"]),Wre(b.columnsNotSupportByRowCol("facet"))),Object(ase.a)(Object(ise.a)(n.prototype),"mapFacet",this).call(this,e,t)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(e,t){var n=e.encoding,r=e.projection,a=t.parentEncoding,i=t.parentProjection,o=t.config,u=Nse({parentProjection:i,projection:r}),s=Tse({parentEncoding:a,encoding:kse(n,t.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},e),u?{projection:u}:{}),s?{encoding:s}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(e,t){var n=e.encoding,r=n.row,a=n.column,i=n.facet,o=h9(n,["row","column","facet"]),u=e.mark,s=e.width,c=e.projection,l=e.height,f=e.view,d=e.selection,h=(e.encoding,h9(e,["mark","width","projection","height","view","selection","encoding"])),p=this.getFacetMappingAndLayout({row:r,column:a,facet:i},t),v=p.facetMapping,m=p.layout,g=kse(o,t.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},h),m),{facet:v,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s?{width:s}:{}),l?{height:l}:{}),f?{view:f}:{}),c?{projection:c}:{}),{mark:u,encoding:g}),d?{selection:d}:{})}),t)}},{key:"getFacetMappingAndLayout",value:function(e,t){var n,r=e.row,a=e.column,i=e.facet;if(r||a){i&&Wre(b.facetChannelDropped([].concat(Object(mo.a)(r?[$ee]:[]),Object(mo.a)(a?[Zee]:[]))));for(var o={},u={},s=0,c=[$ee,Zee];s<c.length;s++){var l=c[s],f=e[l];if(f){f.align,f.center,f.spacing,f.columns;var d=h9(f,["align","center","spacing","columns"]);o[l]=d;for(var h=0,p=["align","center","spacing"];h<p.length;h++){var v=p[h];void 0!==f[v]&&(u[v]=null!==(n=u[v])&&void 0!==n?n:{},u[v][l]=f[v])}}}return{facetMapping:o,layout:u}}var m=i.align,g=i.center,y=i.spacing,x=i.columns;return{facetMapping:wse(h9(i,["align","center","spacing","columns"]),t.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},m?{align:m}:{}),g?{center:g}:{}),y?{spacing:y}:{}),x?{columns:x}:{})}}},{key:"mapLayer",value:function(e,t){var r=t.parentEncoding,a=t.parentProjection,i=h9(t,["parentEncoding","parentProjection"]),o=e.encoding,u=e.projection,s=h9(e,["encoding","projection"]),c=Object.assign(Object.assign({},i),{parentEncoding:Tse({parentEncoding:r,encoding:o}),parentProjection:Nse({parentProjection:a,projection:u})});return Object(ase.a)(Object(ise.a)(n.prototype),"mapLayer",this).call(this,s,c)}}]),n}(sse));function Ise(e){return _t(e)?{type:e}:null!==e&&void 0!==e?e:{}}var Fse=["background","padding"];function Rse(e){return Fse.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}var Pse=n(55),Lse=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(Rx.a)(this,e),this.explicit=t,this.implicit=n}return Object(Px.a)(e,[{key:"clone",value:function(){return new e(j9(this.explicit),j9(this.implicit))}},{key:"combine",value:function(){return Object.assign(Object.assign({},this.explicit),this.implicit)}},{key:"get",value:function(e){return nee(this.explicit[e],this.implicit[e])}},{key:"getWithExplicit",value:function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}},{key:"set",value:function(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}},{key:"copyKeyFromSplit",value:function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}},{key:"copyKeyFromObject",value:function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}},{key:"copyAll",value:function(e){var t,n=Object(tr.a)(U9(e.combine()));try{for(n.s();!(t=n.n()).done;){var r=t.value,a=e.getWithExplicit(r);this.setWithExplicit(r,a)}}catch(i){n.e(i)}finally{n.f()}}}]),e}();function Bse(e){return{explicit:!0,value:e}}function zse(e){return{explicit:!1,value:e}}function Use(e){return function(t,n,r,a){var i=e(t.value,n.value);return i>0?t:i<0?n:Wse(t,n,r,a)}}function Wse(e,t,n,r){return e.explicit&&t.explicit&&Wre(b.mergeConflictingProperty(n,r,e.value,t.value)),e}function Vse(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wse;return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:S9(e.value,t.value)?e:a(e,t,n,r)}var Gse=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(Rx.a)(this,n),(e=t.call(this,r,a)).explicit=r,e.implicit=a,e.parseNothing=i,e}return Object(Px.a)(n,[{key:"clone",value:function(){var e=Object(ase.a)(Object(ise.a)(n.prototype),"clone",this).call(this);return e.parseNothing=this.parseNothing,e}}]),n}(Lse);function qse(e){return"url"in e}function Hse(e){return"values"in e}function Xse(e){return"name"in e&&!qse(e)&&!Hse(e)&&!Yse(e)}function Yse(e){return e&&(Kse(e)||$se(e)||Zse(e))}function Kse(e){return"sequence"in e}function $se(e){return"sphere"in e}function Zse(e){return"graticule"in e}var Jse="main",Qse="raw";function ece(e){return"filter"in e}function tce(e){return"lookup"in e}function nce(e){return"pivot"in e}function rce(e){return"density"in e}function ace(e){return"quantile"in e}function ice(e){return"regression"in e}function oce(e){return"loess"in e}function uce(e){return"sample"in e}function sce(e){return"window"in e}function cce(e){return"joinaggregate"in e}function lce(e){return"flatten"in e}function fce(e){return"calculate"in e}function dce(e){return"bin"in e}function hce(e){return"impute"in e}function pce(e){return"timeUnit"in e}function vce(e){return"aggregate"in e}function mce(e){return"stack"in e}function gce(e){return"fold"in e}function bce(e,t,n,r){var a=$ie(t)&&t.condition,i=r(t);if(a){var o=Ze(a).map((function(t){var n=r(t),a=function(e){return e.selection}(t)?cde(e,t.selection):fde(e,t.test);return Object.assign({test:a},n)}));return Object(go.a)({},n,[].concat(Object(mo.a)(o),Object(mo.a)(void 0!==i?[i]:[])))}return void 0!==i?Object(go.a)({},n,i):{}}function yce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=e.encoding[t];return bce(e,n,t,(function(t){return xce(t,e.config)}))}function xce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(e){if(ooe(e))return Poe(e.value);if(aoe(e)){var r=koe(e),a=r.format,i=r.formatType;return Cie({fieldOrDatumDef:e,format:a,formatType:i,expr:n,config:t})}}}function _ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.encoding,r=e.markDef,a=e.config,i=e.stack,o=n.tooltip;if(je(o))return{tooltip:kce({tooltip:o},i,a,t)};var u=t.reactiveGeom?"datum.datum":"datum";return bce(e,o,"tooltip",(function(e){var o=xce(e,a,u);if(o)return o;if(null!==e){var s=Uoe("tooltip",r,a);return!0===s&&(s={content:"encoding"}),_t(s)?{value:s}:Ee(s)?"encoding"===s.content?kce(n,i,a,t):{signal:u}:void 0}}))}function wce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i={},o=a?"datum.datum":"datum",u=[];function s(r,a){var s,c=qte(a),l=ioe(r)?r:Object.assign(Object.assign({},r),{type:e[c].type}),f=Ze(xoe(l,n,{allowDisabling:!1})).join(", ");if(Qte(a)){var d="x"===a?"x2":"y2",h=Ooe(e[d]);if(pne(l.bin)&&h){var p=doe(l,{expr:o}),v=doe(h,{expr:o}),m=koe(l);s=Rie(p,v,m.format,m.formatType,n),i[d]=!0}else if(t&&t.fieldChannel===a&&"normalize"===t.offset){var g=koe(l);s=Cie({fieldOrDatumDef:l,format:g.format,formatType:g.formatType,expr:o,config:n,normalizeStack:!0}).signal}}s=null!==s&&void 0!==s?s:xce(l,n,o).signal,u.push({channel:a,key:f,value:s})}eue(e,(function(e,t){Qie(e)?s(e,t):Zie(e)&&s(e.condition,t)}));for(var c={},l=0,f=u;l<f.length;l++){var d=f[l],h=d.channel,p=d.key,v=d.value;i[h]||c[p]||(c[At(p)]=v)}return c}function kce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.reactiveGeom,i=wce(e,t,n,{reactiveGeom:a}),o=V9(i).map((function(e){var t=e.key,n=e.value;return"".concat(t,": ").concat(n)}));return o.length>0?{signal:"{".concat(o.join(", "),"}")}:void 0}function Oce(e){var t=Uoe("aria",e.markDef,e.config);return!1===t?{}:Object.assign(Object.assign(Object.assign({},t?{aria:t}:{}),function(e){var t=e.mark,n=e.markDef,r=e.config;if(!1===r.aria)return{};var a=Uoe("ariaRoleDescription",n,r);if(null!=a)return{ariaRoleDescription:{value:a}};return t in dae?{}:{ariaRoleDescription:{value:t}}}(e)),function(e){var t=e.encoding,n=e.markDef,r=e.config,a=e.stack,i=t.description;if(i)return bce(e,i,"description",(function(t){return xce(t,e.config)}));var o=Uoe("description",n,r);if(null!=o)return{description:Poe(o)};if(!1===r.aria)return{};var u=wce(t,a,r);if(z9(u))return;return{description:{signal:V9(u).map((function(e){var t=e.key,n=e.value;return"".concat(t,' + ": " + (').concat(n,")")})).join(' + "; " + ')}}}(e))}function Sce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.markDef,a=t.encoding,i=t.config,o=n.vgChannel,u=n.defaultRef,s=n.defaultValue;void 0===u&&void 0!==(s=null!==s&&void 0!==s?s:Uoe(e,r,i,{vgChannel:o,ignoreVgConfig:!0}))&&(u=Poe(s));var c=a[e];return bce(t,c,null!==o&&void 0!==o?o:e,(function(n){return Oie({channel:e,channelDef:n,markDef:r,config:i,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:u})}))}function jce(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{filled:void 0},o=e.markDef,u=e.encoding,s=e.config,c=o.type,l=null!==(t=i.filled)&&void 0!==t?t:Uoe("filled",o,s),f=M9(["bar","point","circle","square","geoshape"],c)?"transparent":void 0,d=null!==(r=null!==(n=Uoe(!0===l?"color":void 0,o,s,{vgChannel:"fill"}))&&void 0!==n?n:s.mark[!0===l&&"color"])&&void 0!==r?r:f,h=null!==(a=Uoe(!1===l?"color":void 0,o,s,{vgChannel:"stroke"}))&&void 0!==a?a:s.mark[!1===l&&"color"],p=l?"fill":"stroke",v=Object.assign(Object.assign({},d?{fill:Poe(d)}:{}),h?{stroke:Poe(h)}:{});return o.color&&(l?o.fill:o.stroke)&&Wre(b.droppingColor("property",{fill:"fill"in o,stroke:"stroke"in o})),Object.assign(Object.assign(Object.assign(Object.assign({},v),Sce("color",e,{vgChannel:p,defaultValue:l?d:h})),Sce("fill",e,{defaultValue:u.fill?d:void 0})),Sce("stroke",e,{defaultValue:u.stroke?h:void 0}))}function Ece(e,t){var n=t[function(e){switch(e){case Qee:return"xOffset";case ete:return"yOffset";case tte:return"x2Offset";case nte:return"y2Offset";case ite:return"thetaOffset";case rte:return"radiusOffset";case ote:return"theta2Offset";case ate:return"radius2Offset"}}(e)];if(n)return n}function Cce(e,t,n){var r=n.defaultPos,a=n.vgChannel,i=n.isMidPoint,o=t.encoding,u=t.markDef,s=t.config,c=t.stack,l=o[e],f=o[Xte(e)],d=t.scaleName(e),h=t.getScaleComponent(e),p=Ece(e,u),v=Ace({model:t,defaultPos:r,channel:e,scaleName:d,scale:h}),m=!l&&Qte(e)&&(o.latitude||o.longitude)?{field:t.getName(e)}:function(e){var t=e.channel,n=e.channelDef,r=e.isMidPoint,a=e.scaleName,i=e.stack,o=e.offset,u=e.markDef,s=e.config;if(aoe(n)&&i&&t===i.fieldChannel){if(Qie(n)){var c=Yie({channel:t,fieldDef:n,isMidPoint:r,markDef:u,stack:i,config:s});if(void 0!==c)return kie({scaleName:a,fieldOrDatumDef:n,startSuffix:"start",band:c,offset:o})}return wie(n,a,{suffix:"end"},{offset:o})}return bie(e)}({channel:e,channelDef:l,channel2Def:f,markDef:u,config:s,isMidPoint:i,scaleName:d,scale:h,stack:c,offset:p,defaultRef:v});return m?Object(go.a)({},a||e,m):void 0}function Ace(e){var t=e.model,n=e.defaultPos,r=e.channel,a=e.scaleName,i=e.scale,o=t.markDef,u=t.config;return function(){var e=qte(r),s=Hte(r),c=Uoe(r,o,u,{vgChannel:s});if(void 0!==c)return Sie(r,c);switch(n){case"zeroOrMin":case"zeroOrMax":if(a){var l=i.get("type");if(M9([Rae,zae,Uae],l));else if(i.domainDefinitelyIncludesZero())return{scale:a,value:0}}if("zeroOrMin"===n)return"y"===e?{field:{group:"height"}}:{value:0};switch(e){case"radius":return{signal:"min(".concat(t.width.signal,",").concat(t.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":var f=t[Yte(r)];return Object.assign(Object.assign({},f),{mult:.5})}}}var Tce={left:"x",center:"xc",right:"x2"},Nce={top:"y",middle:"yc",bottom:"y2"};function Mce(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle";if("radius"===e||"theta"===e)return Hte(e);var a="x"===e?"align":"baseline",i=Uoe(a,t,n);return"x"===e?Tce[i||("top"===r?"left":"center")]:Nce[i||r]}function Dce(e,t,n){var r=n.defaultPos,a=n.defaultPos2;return n.range?Ice(e,t,{defaultPos:r,defaultPos2:a}):Cce(e,t,{defaultPos:r})}function Ice(e,t,n){var r=n.defaultPos,a=n.defaultPos2,i=t.markDef,o=t.config,u=Xte(e),s=Yte(e),c=function(e,t,n){var r,a=e.encoding,i=e.mark,o=e.markDef,u=e.stack,s=e.config,c=qte(n),l=Yte(n),f=Hte(n),d=a[c],h=e.scaleName(c),p=e.getScaleComponent(c),v=Ece(n in a||n in o?n:c,e.markDef);if(!d&&("x2"===n||"y2"===n)&&(a.latitude||a.longitude))return Object(go.a)({},f,{field:e.getName(n)});var m=function(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,a=e.markDef,i=e.config,o=e.scaleName,u=e.scale,s=e.stack,c=e.offset,l=e.defaultRef;if(aoe(n)&&s&&t.charAt(0)===s.fieldChannel.charAt(0))return wie(n,o,{suffix:"start"},{offset:c});return bie({channel:t,channelDef:r,scaleName:o,scale:u,stack:s,markDef:a,config:i,offset:c,defaultRef:l})}({channel:n,channelDef:d,channel2Def:a[n],markDef:o,config:s,scaleName:h,scale:p,stack:u,offset:v,defaultRef:void 0});if(void 0!==m)return Object(go.a)({},f,m);return Fce(n,o)||Fce(n,(r={},Object(go.a)(r,n,Voe(n,o,s.style)),Object(go.a)(r,l,Voe(l,o,s.style)),r))||Fce(n,s[i])||Fce(n,s.mark)||Object(go.a)({},f,Ace({model:e,defaultPos:t,channel:n,scaleName:h,scale:p})())}(t,a,u),l=c[s]?Mce(e,i,o):Hte(e);return Object.assign(Object.assign({},Cce(e,t,{defaultPos:r,vgChannel:l})),c)}function Fce(e,t){var n=Yte(e),r=Hte(e);return void 0!==t[r]?Object(go.a)({},r,Sie(e,t[r])):void 0!==t[e]?Object(go.a)({},r,Sie(e,t[e])):t[n]?Object(go.a)({},n,Sie(e,t[n])):void 0}function Rce(e,t,n){var r,a,i,o,u=e.config,s=e.encoding,c=e.markDef,l=e.stack,f=Xte(t),d=Yte(t),h=s[t],p=s[f],v=e.getScaleComponent(t),m=v?v.get("type"):void 0,g=e.scaleName(t),y=c.orient,x=null!==(a=null!==(r=s[d])&&void 0!==r?r:s.size)&&void 0!==a?a:Uoe("size",c,u,{vgChannel:d}),_="bar"===n&&("x"===t?"vertical"===y:"horizontal"===y);if(Qie(h)&&(hne(h.bin)||pne(h.bin)||h.timeUnit&&!p)&&!x&&!iie(m)){var w=Yie({channel:t,fieldDef:h,stack:l,markDef:c,config:u}),k=null===(i=e.component.axes[t])||void 0===i?void 0:i[0];return function(e){var t,n=e.fieldDef,r=e.fieldDef2,a=e.channel,i=e.band,o=e.scaleName,u=e.markDef,s=e.spacing,c=void 0===s?0:s,l=e.axisTranslate,f=e.reverse,d=e.config,h=Xte(a),p=Hte(a),v=Hte(h),m=Ece(a,u);if(hne(n.bin)||n.timeUnit)return t={},Object(go.a)(t,v,Lce({channel:a,fieldDef:n,scaleName:o,markDef:u,band:(1-i)/2,offset:Pce(h,c,f,l,m),config:d})),Object(go.a)(t,p,Lce({channel:a,fieldDef:n,scaleName:o,markDef:u,band:1-(1-i)/2,offset:Pce(a,c,f,l,m),config:d})),t;if(pne(n.bin)){var g,y,x=wie(n,o,{},{offset:Pce(h,c,f,l,m)});if(Qie(r))return g={},Object(go.a)(g,v,x),Object(go.a)(g,p,wie(r,o,{},{offset:Pce(a,c,f,l,m)})),g;if(vne(n.bin)&&n.bin.step)return y={},Object(go.a)(y,v,x),Object(go.a)(y,p,{signal:'scale("'.concat(o,'", ').concat(doe(n,{expr:"datum"})," + ").concat(n.bin.step,")"),offset:Pce(a,c,f,l,m)}),y}return void Wre(b.channelRequiredForBinned(h))}({fieldDef:h,fieldDef2:p,channel:t,markDef:c,scaleName:g,band:w,axisTranslate:null!==(o=null===k||void 0===k?void 0:k.get("translate"))&&void 0!==o?o:.5,spacing:Qte(t)?Uoe("binSpacing",c,u):void 0,reverse:v.get("reverse"),config:u})}return(aoe(h)&&iie(m)||_)&&!p?function(e,t,n,r){var a,i,o=r.markDef,u=r.encoding,s=r.config,c=r.stack,l=o.orient,f=r.scaleName(n),d=r.getScaleComponent(n),h=Yte(n),p=Xte(n),v="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n,m=Uoe(v?"size":h,o,s,{vgChannel:h});(u.size||void 0!==m)&&(v?i=Sce("size",r,{vgChannel:h,defaultValue:m}):Wre(b.cannotApplySizeToNonOrientedMark(o.type)));var g=null!==(a=aoe(t)?Yie({channel:n,fieldDef:t,markDef:o,stack:c,config:s}):void 0)&&void 0!==a?a:1;i=i||Object(go.a)({},h,function(e,t,n,r,a,i){if(r){var o=r.get("type");if("point"===o||"band"===o){if(void 0!==a[e].discreteBandSize)return{value:a[e].discreteBandSize};if(o===qae){var u=r.get("range");return cae(u)&&yt(u.step)?{value:u.step-2}:{value:Vue-2}}return{scale:n,band:i}}return{value:a[e].continuousBandSize}}var s=Uue(a.view,t),c=nee(a[e].discreteBandSize,s-2);return void 0!==c?{value:c}:void 0}(e,h,f,d,s,g));var y="band"!==(null===d||void 0===d?void 0:d.get("type"))||!("band"in i[h]),x=Mce(n,o,s,y?"middle":"top"),_=Ece(n,o),w=bie({channel:n,channelDef:t,markDef:o,config:s,scaleName:f,scale:d,stack:c,offset:_,defaultRef:Ace({model:r,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:y?.5:(1-g)/2});if(h)return Object.assign(Object(go.a)({},x,w),i);var k,O=Hte(p),S=i[h],j=_?Object.assign(Object.assign({},S),{offset:_}):S;return k={},Object(go.a)(k,x,w),Object(go.a)(k,O,je(w)?[w[0],Object.assign(Object.assign({},w[1]),{offset:j})]:Object.assign(Object.assign({},w),{offset:j})),k}(n,h,t,e):Ice(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Pce(e,t,n,r,a){if(Nte(e))return 0;var i="x"===e||"y2"===e?-t/2:t/2;if(sae(n)){var o=Boe(a);return{signal:"".concat(n.signal," ? ").concat(r-i).concat(o?"-"+o:""," : ").concat(r+i).concat(o?"+"+o:"")}}if(sae(a)){var u=r+(n?-i:i);return{signal:"".concat(u||"").concat(n?" - ":u?" + ":"").concat(a.signal)}}return a=a||0,r+(n?-a-i:+a+i)}function Lce(e){var t=e.channel,n=e.fieldDef,r=e.scaleName,a=e.markDef,i=e.band,o=e.offset,u=e.config;return yie({fieldDef:n,channel:t,markDef:a,ref:kie({scaleName:r,fieldOrDatumDef:n,band:i,offset:o}),config:u})}var Bce=new Set(["aria"]);function zce(e,t){var n="include"===t.color?jce(e):{},r=n.fill,a=void 0===r?void 0:r,i=n.stroke,o=void 0===i?void 0:i;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},function(e,t){return fae.reduce((function(n,r){return Bce.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=Poe(e[r])),n}),{})}(e.markDef,t)),Uce(e,"fill",a)),Uce(e,"stroke",o)),Sce("opacity",e)),Sce("fillOpacity",e)),Sce("strokeOpacity",e)),Sce("strokeWidth",e)),Sce("strokeDash",e)),_ce(e)),yce(e,"href")),Oce(e))}function Uce(e,t,n){var r=e.config,a=e.mark;if("hide"===Uoe("invalid",e.markDef,r)&&n&&!Tee(a)){var i=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&oie(a)&&(t[i]=!0)}return t}),{}),i=U9(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return _ie(e,r)})).join(" ".concat(o," "))}return}(e,{invalid:!0,channels:one});if(i)return Object(go.a)({},t,[{test:i,value:null}].concat(Object(mo.a)(Ze(n))))}return n?Object(go.a)({},t,n):{}}function Wce(e){var t=e.config;if(Uoe("invalid",e.markDef,t)){var n=function(e,t){var n=t.invalid,r=void 0!==n&&n,a=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var a=r.get("type"),i=e.vgField(n,{expr:"datum"});i&&oie(a)&&(t[i]=!0)}return t}),{}),i=U9(a);if(i.length>0){var o=r?"||":"&&";return i.map((function(e){return _ie(e,r)})).join(" ".concat(o," "))}return}(e,{channels:Jte});if(n)return{defined:{signal:n}}}return{}}function Vce(e,t){if(void 0!==t)return Object(go.a)({},e,Poe(t))}var Gce="voronoi",qce={has:function(e){return"interval"!==e.type&&e.nearest},parse:function(e,t){if(t.events){var n,r=Object(tr.a)(t.events);try{for(r.s();!(n=r.n()).done;){n.value.markname=e.getName(Gce)}}catch(a){r.e(a)}finally{r.f()}}},marks:function(e,t,n){var r=t.project.hasChannel,a=r.x,i=r.y,o=e.mark;if(Tee(o))return Wre(b.nearestNotSupportForContinuous(o)),n;var u={name:e.getName(Gce),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},_ce(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:a||!i?"datum.datum.x || 0":"0"},y:{expr:i||!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},s=0,c=!1;return n.forEach((function(t,n){var r,a=null!==(r=t.name)&&void 0!==r?r:"";a===e.component.mark[0].name?s=n:a.indexOf(Gce)>=0&&(c=!0)})),c||n.splice(s+1,0,u),n}},Hce=function(){function e(t,n){Object(Rx.a)(this,e),this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}return Object(Px.a)(e,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"parent",get:function(){return this._parent},set:function(e){this._parent=e,e&&e.addChild(this)}},{key:"children",get:function(){return this._children}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);return this._children.splice(t,1),t}},{key:"remove",value:function(){var e,t=this._parent.removeChild(this),n=Object(tr.a)(this._children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r._parent=this._parent,this._parent.addChild(r,t++)}}catch(a){n.e(a)}finally{n.f()}}},{key:"insertAsParentOf",value:function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}},{key:"swapWithParent",value:function(){var e,t=this._parent,n=t.parent,r=Object(tr.a)(this._children);try{for(r.s();!(e=r.n()).done;){e.value.parent=t}}catch(a){r.e(a)}finally{r.f()}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}]),e}(),Xce=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;return Object(Rx.a)(this,n),(o=t.call(this,e,r)).type=a,o.refCounts=i,o._source=o._name=r,o.refCounts&&!(o._name in o.refCounts)&&(o.refCounts[o._name]=0),o}return Object(Px.a)(n,[{key:"clone",value:function(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash="Output ".concat(aee())),this._hash}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(e){this._source=e}}]),n}(Hce),Yce=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).formula=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.formula))}},{key:"merge",value:function(e){for(var t in this.formula=Object.assign({},this.formula),e.formula)this.formula[t]&&!e.formula[t].band||(this.formula[t]=e.formula[t]);var n,r=Object(tr.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.removeChild(a),a.parent=this}}catch(i){r.e(i)}finally{r.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(W9(this.formula).map((function(e){return e.as})))}},{key:"dependentFields",value:function(){return new Set(W9(this.formula).map((function(e){return e.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(T9(this.formula))}},{key:"assemble",value:function(){var e,t=[],n=Object(tr.a)(W9(this.formula));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.field,i=r.as,o=oae(r.timeUnit),u=o.unit,s=o.utc,c=h9(o,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:J9(a),type:"timeunit"},u?{units:nae(u)}:{}),s?{timezone:"utc"}:{}),c),{as:[i,"".concat(i,"_end")]}))}}catch(l){n.e(l)}finally{n.f()}return t}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){var a=n.field,i=n.timeUnit,o=Vpe(t)?t.encoding[Xte(r)]:void 0,u=Vpe(t)&&Kie(r,n,o,t.stack,t.markDef,t.config);if(i){var s=doe(n,{forAs:!0});e[T9({as:s,field:a,timeUnit:i})]=Object.assign({as:s,field:a,timeUnit:i},u?{band:!0}:{})}return e}),{});return z9(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t){var r=Object.assign({},t),a=r.timeUnit,i=h9(r,["timeUnit"]),o=oae(a),u=Object.assign(Object.assign({},i),{timeUnit:o});return new n(e,Object(go.a)({},T9(u),u))}}]),n}(Hce),Kce="_tuple_fields",$ce=function e(){Object(Rx.a)(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.items=n,this.hasChannel={},this.hasField={}},Zce={has:function(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Mue(e.bind)},parse:function(e,t,n,r){r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:function(e,t,n){var r=t.name,a=t.project,i=t.bind,o=t.init&&t.init[0],u=qce.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return a.items.forEach((function(e,a){var s,c,l=q9("".concat(r,"_").concat(e.field));n.filter((function(e){return e.name===l})).length||n.unshift(Object.assign(Object.assign({name:l},o?{init:vle(o[a])}:{value:null}),{on:t.events?[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(At(e.field),"] : null")}]:[],bind:null!==(c=null!==(s=i[e.field])&&void 0!==s?s:i[e.channel])&&void 0!==c?c:i}))})),n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.filter((function(e){return e.name===r+jle}))[0],o=r+Kce,u=a.items.map((function(e){return q9("".concat(r,"_").concat(e.field))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && ");return u.length&&(i.update="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null")),delete i.value,delete i.on,n}},Jce="_toggle",Qce={has:function(e){return"multi"===e.type&&!!e.toggle},signals:function(e,t,n){return n.concat({name:t.name+Jce,value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t){var n=t.name+jle,r=t.name+Jce;return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(Mle(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},ele={has:function(e){return void 0!==e.clear&&!1!==e.clear},parse:function(e,t,n){n.clear&&(t.clear=_t(n.clear)?j5(n.clear,"scope"):n.clear)},topLevelSignals:function(e,t,n){if(Zce.has(t)){var r,a=Object(tr.a)(t.project.items);try{var i=function(){var e=r.value,a=n.findIndex((function(n){return n.name===q9("".concat(t.name,"_").concat(e.field))}));-1!==a&&n[a].on.push({events:t.clear,update:"null"})};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n},signals:function(e,t,n){function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type){var a,i=Object(tr.a)(t.project.items);try{var o=function(){var e=a.value,t=n.findIndex((function(t){return t.name===e.signals.visual}));(r(t,"[0, 0]"),-1===t)&&r(n.findIndex((function(t){return t.name===e.signals.data})),"null")};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}else{var u=n.findIndex((function(e){return e.name===t.name+jle}));r(u,"null"),Qce.has(t)&&r(u=n.findIndex((function(e){return e.name===t.name+Jce})),"false")}return n}},tle={has:function(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function(e,t){var n,r=t.scales=[],a=Object(tr.a)(t.project.items);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.channel;if(une(o)){var u=e.getScaleComponent(o),s=u?u.get("type"):void 0;if(u&&oie(s)){var c={selection:t.name,field:i.field};u.set("selectionExtent",c,!0),r.push(i)}else Wre(b.SCALE_BINDINGS_CONTINUOUS)}}}catch(l){a.e(l)}finally{a.f()}},topLevelSignals:function(e,t,n){var r=t.scales.filter((function(e){return 0===n.filter((function(t){return t.name===e.signals.data})).length}));if(!e.parent||rle(e)||0===r.length)return n;var a=n.filter((function(e){return e.name===t.name}))[0],i=a.update;if(i.indexOf(Cle)>=0)a.update="{".concat(r.map((function(e){return"".concat(At(e.field),": ").concat(e.signals.data)})).join(", "),"}");else{var o,u=Object(tr.a)(r);try{for(u.s();!(o=u.n()).done;){var s=o.value,c="".concat(At(s.field),": ").concat(s.signals.data);i.indexOf(c)<0&&(i="".concat(i.substring(0,i.length-1),", ").concat(c,"}"))}}catch(l){u.e(l)}finally{u.f()}a.update=i}return n.concat(r.map((function(e){return{name:e.signals.data}})))},signals:function(e,t,n){if(e.parent&&!rle(e)){var r,a=Object(tr.a)(t.scales);try{var i=function(){var e=r.value,t=n.filter((function(t){return t.name===e.signals.data}))[0];t.push="outer",delete t.value,delete t.update};for(a.s();!(r=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}return n}};function nle(e,t){var n=At(e.scaleName(t));return"domain(".concat(n,")")}function rle(e){var t;return e.parent&&Hpe(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:rle(e.parent.parent))}var ale={has:function(e){var t="global"===e.resolve&&e.bind&&Mue(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Tue;return t&&!n&&Wre(b.LEGEND_BINDINGS_PROJECT_LENGTH),t&&n},parse:function(e,t,n,r){var a;if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){var i,o='event.item && indexof(event.item.mark.role, "legend") < 0',u=Object(tr.a)(t.events);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.filter=Ze(null!==(a=s.filter)&&void 0!==a?a:[]),s.filter.indexOf(o)<0&&s.filter.push(o)}}catch(f){u.e(f)}finally{u.f()}}var c=Due(t.bind)?t.bind.legend:"click",l=_t(c)?j5(c,"view"):Ze(c);t.bind={legend:{merge:l}}},topLevelSignals:function(e,t,n){var r,a=t.name,i=Due(t.bind)&&t.bind.legend,o=function(e){return function(t){var n=j9(t);return n.markname=e,n}},u=Object(tr.a)(t.project.items);try{var s=function(){var e=r.value;if(!e.hasLegend)return"continue";var u="".concat(q9(e.field),"_legend"),s="".concat(a,"_").concat(u);if(0===n.filter((function(e){return e.name===s})).length){var c=i.merge.map(o("".concat(u,"_symbols"))).concat(i.merge.map(o("".concat(u,"_labels")))).concat(i.merge.map(o("".concat(u,"_entries"))));n.unshift(Object.assign(Object.assign({name:s},t.init?{}:{value:null}),{on:[{events:c,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : ".concat(s),force:!0}]}))}};for(u.s();!(r=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}return n},signals:function(e,t,n){var r=t.name,a=t.project,i=n.find((function(e){return e.name===r+jle})),o=r+Kce,u=a.items.filter((function(e){return e.hasLegend})).map((function(e){return q9("".concat(r,"_").concat(q9(e.field),"_legend"))})),s=u.map((function(e){return"".concat(e," !== null")})).join(" && "),c="".concat(s," ? {fields: ").concat(o,", values: [").concat(u.join(", "),"]} : null");t.events&&u.length>0?i.on.push({events:u.map((function(e){return{signal:e}})),update:c}):u.length>0&&(i.update=c,delete i.value,delete i.on);var l=n.find((function(e){return e.name===r+Jce})),f=Due(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push(Object.assign(Object.assign({},l.on[0]),{events:f})):l.on[0].events=f),n}};var ile="_translate_anchor",ole="_translate_delta",ule={has:function(e){return"interval"===e.type&&e.translate},signals:function(e,t,n){var r=t.name,a=tle.has(t),i=r+ile,o=t.project.hasChannel,u=o.x,s=o.y,c=j5(t.translate,"scope");return a||(c=c.map((function(e){return e.between[0].markname=r+ble,e}))),n.push({name:i,value:{},on:[{events:c.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==u?", extent_x: "+(a?nle(e,Qee):"slice(".concat(u.signals.visual,")")):"")+(void 0!==s?", extent_y: "+(a?nle(e,ete):"slice(".concat(s.signals.visual,")")):"")+"}"}]},{name:r+ole,value:{},on:[{events:c,update:"{x: ".concat(i,".x - x(unit), y: ").concat(i,".y - y(unit)}")}]}),void 0!==u&&sle(e,t,u,"width",n),void 0!==s&&sle(e,t,s,"height",n),n}};function sle(e,t,n,r,a){var i,o=t.name,u=o+ile,s=o+ole,c=n.channel,l=tle.has(t),f=a.filter((function(e){return e.name===n.signals[l?"data":"visual"]}))[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(c),p=h.get("type"),v=l&&c===Qee?"-":"",m="".concat(u,".extent_").concat(c),g="".concat(v).concat(s,".").concat(c," / ")+(l?"".concat(d):"span(".concat(m,")")),b="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(m,", ").concat(g)+(l&&"pow"===p?", ".concat(null!==(i=h.get("exponent"))&&void 0!==i?i:1):"")+")";f.on.push({events:{signal:s},update:l?b:"clampRange(".concat(b,", 0, ").concat(d,")")})}var cle="_zoom_anchor",lle="_zoom_delta",fle={has:function(e){return"interval"===e.type&&e.zoom},signals:function(e,t,n){var r=t.name,a=tle.has(t),i=r+lle,o=t.project.hasChannel,u=o.x,s=o.y,c=At(e.scaleName(Qee)),l=At(e.scaleName(ete)),f=j5(t.zoom,"scope");return a||(f=f.map((function(e){return e.markname=r+ble,e}))),n.push({name:r+cle,on:[{events:f,update:a?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:i,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==u&&dle(e,t,u,"width",n),void 0!==s&&dle(e,t,s,"height",n),n}};function dle(e,t,n,r,a){var i,o=t.name,u=n.channel,s=tle.has(t),c=a.filter((function(e){return e.name===n.signals[s?"data":"visual"]}))[0],l=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(u),d=f.get("type"),h=s?nle(e,u):c.name,p=o+lle,v="".concat(o).concat(cle,".").concat(u),m="".concat(s?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear","(").concat(h,", ").concat(v,", ").concat(p)+(s&&"pow"===d?", ".concat(null!==(i=f.get("exponent"))&&void 0!==i?i:1):"")+")";c.on.push({events:{signal:p},update:s?m:"clampRange(".concat(m,", 0, ").concat(l,")")})}var hle=[{has:function(){return!0},parse:function(e,t,n){var r,a,i,o=t.name,u=null!==(r=t.project)&&void 0!==r?r:t.project=new $ce,s={},c={},l=new Set,f=function(e,t){for(var n="visual"===t?e.channel:e.field,r=q9("".concat(o,"_").concat(n)),a=1;l.has(r);a++)r=q9("".concat(o,"_").concat(n,"_").concat(a));return l.add(r),Object(go.a)({},t,r)};if(!n.fields&&!n.encodings){var d=e.config.selection[n.type];if(n.init){var h,p=Object(tr.a)(Ze(n.init));try{for(p.s();!(h=p.n()).done;){var v,m=h.value,g=Object(tr.a)(U9(m));try{for(g.s();!(v=g.n()).done;){var y=v.value;Ute[y]?(n.encodings||(n.encodings=[])).push(y):"interval"===n.type?(Wre('Interval selections should be initialized using "x" and/or "y" keys.'),n.encodings=d.encodings):(n.fields||(n.fields=[])).push(y)}}catch(I){g.e(I)}finally{g.f()}}}catch(I){p.e(I)}finally{p.f()}}else n.encodings=d.encodings,n.fields=d.fields}var x,_=Object(tr.a)(null!==(a=n.fields)&&void 0!==a?a:[]);try{for(_.s();!(x=_.n()).done;){var w=x.value,k={type:"E",field:w};k.signals=Object.assign({},f(k,"data")),u.items.push(k),u.hasField[w]=k}}catch(I){_.e(I)}finally{_.f()}var O,S=Object(tr.a)(null!==(i=n.encodings)&&void 0!==i?i:[]);try{for(S.s();!(O=S.n()).done;){var j=O.value,E=e.fieldDef(j);if(E){var C=E.field;if(E.aggregate){Wre(b.cannotProjectAggregate(j,E.aggregate));continue}if(!C){Wre(b.cannotProjectOnChannelWithoutField(j));continue}if(E.timeUnit){C=e.vgField(j);var A={timeUnit:E.timeUnit,as:C,field:E.field};c[T9(A)]=A}if(!s[C]){var T="E";if("interval"===t.type)oie(e.getScaleComponent(j).get("type"))&&(T="R");else E.bin&&(T="R-RE");var N={field:C,channel:j,type:T};N.signals=Object.assign(Object.assign({},f(N,"data")),f(N,"visual")),u.items.push(s[C]=N),u.hasField[C]=u.hasChannel[j]=s[C]}}else Wre(b.cannotProjectOnChannelWithoutField(j))}}catch(I){S.e(I)}finally{S.f()}if(n.init){var M=function(e){return u.items.map((function(t){return void 0!==e[t.channel]?e[t.channel]:e[t.field]}))};if("interval"===n.type)t.init=M(n.init);else{var D=Ze(n.init);t.init=D.map(M)}}z9(c)||(u.timeUnit=new Yce(null,c))},signals:function(e,t,n){var r=t.name+Kce;return n.filter((function(e){return e.name===r})).length>0?n:n.concat({name:r,value:t.project.items.map((function(e){e.signals,e.hasLegend;var t=h9(e,["signals","hasLegend"]);return t.field=J9(t.field),t}))})}},Qce,tle,ale,ule,fle,Zce,qce,ele];function ple(e,t){var n,r=Object(tr.a)(hle);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.has(e)&&t(a)}}catch(i){r.e(i)}finally{r.f()}}function vle(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pe;if(je(e)){var r=e.map((function(e){return vle(e,t,n)}));return t?"[".concat(r.join(", "),"]"):r}return Vre(e)?n(t?Kre(e):Zre(e)):t?n(JSON.stringify(e)):e}function mle(e,t){return Tle(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,ple(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function gle(e){return e.map((function(e){return e.on&&!e.on.length&&delete e.on,e}))}var ble="_brush",yle="_scale_trigger",xle={signals:function(e,t){var n=t.name,r=n+Kce,a=tle.has(t),i=[],o=[],u=[];if(t.translate&&!a){var s="!event.item || event.item.mark.name !== ".concat(At(n+ble));_le(t,(function(e,t){var n,r=Ze(null!==(n=t.between[0].filter)&&void 0!==n?n:t.between[0].filter=[]);return r.indexOf(s)<0&&r.push(s),e}))}t.project.items.forEach((function(n,r){var a=n.channel;if(a===Qee||a===ete){var s=t.init?t.init[r]:null,c=function(e,t,n,r){var a=n.channel,i=n.signals.visual,o=n.signals.data,u=tle.has(t),s=At(e.scaleName(a)),c=e.getScaleComponent(a),l=c?c.get("type"):void 0,f=function(e){return"scale(".concat(s,", ").concat(e,")")},d=e.getSizeSignalRef(a===Qee?"width":"height").signal,h="".concat(a,"(unit)"),p=_le(t,(function(e,t){return[].concat(Object(mo.a)(e),[{events:t.between[0],update:"[".concat(h,", ").concat(h,"]")},{events:t,update:"[".concat(i,"[0], clamp(").concat(h,", 0, ").concat(d,")]")}])}));return p.push({events:{signal:t.name+yle},update:oie(l)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),u?[{name:o,on:[]}]:[Object.assign(Object.assign({name:i},r?{init:vle(r,!0,f)}:{value:[]}),{on:p}),Object.assign(Object.assign({name:o},r?{init:vle(r)}:{}),{on:[{events:{signal:i},update:"".concat(i,"[0] === ").concat(i,"[1] ? null : invert(").concat(s,", ").concat(i,")")}]})]}(e,t,n,s),l=n.signals.data,f=n.signals.visual,d=At(e.scaleName(a)),h=oie(e.getScaleComponent(a).get("type"))?"+":"";i.push.apply(i,Object(mo.a)(c)),o.push(l),u.push({scaleName:e.scaleName(a),expr:"(!isArray(".concat(l,") || ")+"(".concat(h,"invert(").concat(d,", ").concat(f,")[0] === ").concat(h).concat(l,"[0] && ")+"".concat(h,"invert(").concat(d,", ").concat(f,")[1] === ").concat(h).concat(l,"[1]))")})}else Wre("Interval selections only support x and y encoding channels.")})),a||i.push({name:n+yle,value:{},on:[{events:u.map((function(e){return{scale:e.scaleName}})),update:u.map((function(e){return e.expr})).join(" && ")+" ? ".concat(n+yle," : {}")}]});var c=t.init,l="unit: ".concat(Mle(e),", fields: ").concat(r,", values");return i.concat(Object.assign(Object.assign({name:n+jle},c?{init:"{".concat(l,": ").concat(vle(c),"}")}:{}),{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+" ? {".concat(l,": [").concat(o,"]} : null")}]}))},modifyExpr:function(e,t){return t.name+jle+", "+("global"===t.resolve?"true":"{unit: ".concat(Mle(e),"}"))},marks:function(e,t,n){var r=t.name,a=t.project.hasChannel,i=a.x,o=a.y,u=i&&i.signals.visual,s=o&&o.signals.visual,c="data(".concat(At(t.name+Sle),")");if(tle.has(t))return n;var l={x:void 0!==i?{signal:"".concat(u,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(s,"[0]")}:{value:0},x2:void 0!==i?{signal:"".concat(u,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(s,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var f,d=Object(tr.a)(U9(l));try{for(d.s();!(f=d.n()).done;){var h=f.value;l[h]=[Object.assign({test:"".concat(c,".length && ").concat(c,"[0].unit === ").concat(Mle(e))},l[h]),{value:0}]}}catch(x){d.e(x)}finally{d.f()}}var p=t.mark,v=p.fill,m=p.fillOpacity,g=p.cursor,b=h9(p,["fill","fillOpacity","cursor"]),y=U9(b).reduce((function(e,t){return e[t]=[{test:[void 0!==i&&"".concat(u,"[0] !== ").concat(u,"[1]"),void 0!==o&&"".concat(s,"[0] !== ").concat(s,"[1]")].filter((function(e){return e})).join(" && "),value:b[t]},{value:null}],e}),{});return[{name:r+ble+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:v},fillOpacity:{value:m}},update:l}}].concat(Object(mo.a)(n),[{name:r+ble,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},g?{cursor:{value:g}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},l),y)}}])}};function _le(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):(Wre("".concat(n," is not an ordered event stream for interval selections.")),e)}),[])}function wle(e,t){var n=t.name,r=n+Kce,a=t.project,i="(item().isVoronoi ? datum.datum : datum)",o=a.items.map((function(t){var n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(i,"[").concat(At(e.vgField(t.channel,{})),"], ")+"".concat(i,"[").concat(At(e.vgField(t.channel,{binSuffix:"end"})),"]]"):"".concat(i,"[").concat(At(t.field),"]")})).join(", "),u="unit: ".concat(Mle(e),", fields: ").concat(r,", values"),s=t.events;return[{name:n+jle,on:s?[{events:s,update:"datum && item().mark.marktype !== 'group' ? {".concat(u,": [").concat(o,"]} : null"),force:!0}]:[]}]}var kle={signals:wle,modifyExpr:function(e,t){return t.name+jle+", "+("global"===t.resolve?"null":"{unit: ".concat(Mle(e),"}"))}},Ole={signals:wle,modifyExpr:function(e,t){return t.name+jle+", "+("global"===t.resolve?"true":"{unit: ".concat(Mle(e),"}"))}},Sle="_store",jle="_tuple",Ele="_modify",Cle="vlSelectionResolve",Ale={single:Ole,multi:kle,interval:xle};function Tle(e,t){var n=e.component.selection;if(n){var r,a=Object(tr.a)(W9(n));try{for(a.s();!(r=a.n()).done;){var i=r.value;if(!0===t(i,Ale[i.type]))break}}catch(o){a.e(o)}finally{a.f()}}}function Nle(e){for(var t=e.parent;t&&!Gpe(t);)t=t.parent;return t}function Mle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{escape:!0},n=t.escape,r=n?At(e.name):e.name,a=Nle(e);if(a){var i,o=a.facet,u=Object(tr.a)(Pte);try{for(u.s();!(i=u.n()).done;){var s=i.value;o[s]&&(r+=" + '__facet_".concat(s,"_' + (facet[").concat(At(a.vgField(s)),"])"))}}catch(c){u.e(c)}finally{u.f()}}return r}function Dle(e){var t=!1;return Tle(e,(function(e){t=t||e.project.items.some((function(e){return e.field===Tue}))})),t}var Ile,Fle,Rle,Ple,Lle,Ble="RawCode",zle="Literal",Ule="Property",Wle="Identifier",Vle="ArrayExpression",Gle="BinaryExpression",qle="CallExpression",Hle="ConditionalExpression",Xle="LogicalExpression",Yle="MemberExpression",Kle="ObjectExpression",$le="UnaryExpression";function Zle(e){this.type=e}Zle.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function(e){switch(e.type){case Vle:return e.elements;case Gle:case Xle:return[e.left,e.right];case qle:return[e.callee].concat(e.arguments);case Hle:return[e.test,e.consequent,e.alternate];case Yle:return[e.object,e.property];case Kle:return e.properties;case Ule:return[e.key,e.value];case $le:return[e.argument];case Wle:case zle:case Ble:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};(Ile={})[1]="Boolean",Ile[2]="<end>",Ile[3]="Identifier",Ile[4]="Keyword",Ile[5]="Null",Ile[6]="Numeric",Ile[7]="Punctuator",Ile[8]="String",Ile[9]="RegularExpression";var Jle="Identifier",Qle="Unexpected token %0",efe="Invalid regular expression",tfe="Invalid regular expression: missing /",nfe="Octal literals are not allowed in strict mode.",rfe="ILLEGAL",afe="Disabled.",ife=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ofe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ufe(e,t){if(!e)throw new Error("ASSERT: "+t)}function sfe(e){return e>=48&&e<=57}function cfe(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function lfe(e){return"01234567".indexOf(e)>=0}function ffe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function dfe(e){return 10===e||13===e||8232===e||8233===e}function hfe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&ife.test(String.fromCharCode(e))}function pfe(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&ofe.test(String.fromCharCode(e))}var vfe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function mfe(){for(var e;Rle<Ple&&(ffe(e=Fle.charCodeAt(Rle))||dfe(e));)++Rle}function gfe(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t)Rle<Ple&&cfe(Fle[Rle])?(r=Fle[Rle++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())):Dfe({},Qle,rfe);return String.fromCharCode(a)}function bfe(){var e,t,n,r;for(t=0,"}"===(e=Fle[Rle])&&Dfe({},Qle,rfe);Rle<Ple&&cfe(e=Fle[Rle++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Dfe({},Qle,rfe),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function yfe(){var e,t;for(e=Fle.charCodeAt(Rle++),t=String.fromCharCode(e),92===e&&(117!==Fle.charCodeAt(Rle)&&Dfe({},Qle,rfe),++Rle,(e=gfe("u"))&&"\\"!==e&&hfe(e.charCodeAt(0))||Dfe({},Qle,rfe),t=e);Rle<Ple&&pfe(e=Fle.charCodeAt(Rle));)++Rle,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Fle.charCodeAt(Rle)&&Dfe({},Qle,rfe),++Rle,(e=gfe("u"))&&"\\"!==e&&pfe(e.charCodeAt(0))||Dfe({},Qle,rfe),t+=e);return t}function xfe(){var e,t;return e=Rle,{type:1===(t=92===Fle.charCodeAt(Rle)?yfe():function(){var e,t;for(e=Rle++;Rle<Ple;){if(92===(t=Fle.charCodeAt(Rle)))return Rle=e,yfe();if(!pfe(t))break;++Rle}return Fle.slice(e,Rle)}()).length?3:vfe.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:Rle}}function _fe(){var e,t,n,r,a=Rle,i=Fle.charCodeAt(Rle),o=Fle[Rle];switch(i){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Rle,{type:7,value:String.fromCharCode(i),start:a,end:Rle};default:if(61===(e=Fle.charCodeAt(Rle+1)))switch(i){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Rle+=2,{type:7,value:String.fromCharCode(i)+String.fromCharCode(e),start:a,end:Rle};case 33:case 61:return Rle+=2,61===Fle.charCodeAt(Rle)&&++Rle,{type:7,value:Fle.slice(a,Rle),start:a,end:Rle}}}return">>>="===(r=Fle.substr(Rle,4))?{type:7,value:r,start:a,end:Rle+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:a,end:Rle+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:7,value:t,start:a,end:Rle+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:a,end:++Rle}:void Dfe({},Qle,rfe)}function wfe(){var e,t,n;if(ufe(sfe((n=Fle[Rle]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Rle,e="","."!==n){if(e=Fle[Rle++],n=Fle[Rle],"0"===e){if("x"===n||"X"===n)return++Rle,function(e){for(var t="";Rle<Ple&&cfe(Fle[Rle]);)t+=Fle[Rle++];return 0===t.length&&Dfe({},Qle,rfe),hfe(Fle.charCodeAt(Rle))&&Dfe({},Qle,rfe),{type:6,value:parseInt("0x"+t,16),start:e,end:Rle}}(t);if(lfe(n))return function(e){for(var t="0"+Fle[Rle++];Rle<Ple&&lfe(Fle[Rle]);)t+=Fle[Rle++];return(hfe(Fle.charCodeAt(Rle))||sfe(Fle.charCodeAt(Rle)))&&Dfe({},Qle,rfe),{type:6,value:parseInt(t,8),octal:!0,start:e,end:Rle}}(t);n&&sfe(n.charCodeAt(0))&&Dfe({},Qle,rfe)}for(;sfe(Fle.charCodeAt(Rle));)e+=Fle[Rle++];n=Fle[Rle]}if("."===n){for(e+=Fle[Rle++];sfe(Fle.charCodeAt(Rle));)e+=Fle[Rle++];n=Fle[Rle]}if("e"===n||"E"===n)if(e+=Fle[Rle++],"+"!==(n=Fle[Rle])&&"-"!==n||(e+=Fle[Rle++]),sfe(Fle.charCodeAt(Rle)))for(;sfe(Fle.charCodeAt(Rle));)e+=Fle[Rle++];else Dfe({},Qle,rfe);return hfe(Fle.charCodeAt(Rle))&&Dfe({},Qle,rfe),{type:6,value:parseFloat(e),start:t,end:Rle}}function kfe(){var e,t,n,r;return Lle=null,mfe(),e=Rle,t=function(){var e,t,n,r;for(ufe("/"===(e=Fle[Rle]),"Regular expression literal must start with a slash"),t=Fle[Rle++],n=!1,r=!1;Rle<Ple;)if(t+=e=Fle[Rle++],"\\"===e)dfe((e=Fle[Rle++]).charCodeAt(0))&&Dfe({},tfe),t+=e;else if(dfe(e.charCodeAt(0)))Dfe({},tfe);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Dfe({},tfe),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";Rle<Ple&&pfe((e=Fle[Rle]).charCodeAt(0));)++Rle,"\\"===e&&Rle<Ple?Dfe({},Qle,rfe):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Dfe({},efe,n),{value:n,literal:t}}(),r=function(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";Dfe({},efe)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){Dfe({},efe)}try{return new RegExp(e,t)}catch(a){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Rle}}function Ofe(){var e;return mfe(),Rle>=Ple?{type:2,start:Rle,end:Rle}:hfe(e=Fle.charCodeAt(Rle))?xfe():40===e||41===e||59===e?_fe():39===e||34===e?function(){var e,t,n,r,a="",i=!1;for(ufe("'"===(e=Fle[Rle])||'"'===e,"String literal must starts with a quote"),t=Rle,++Rle;Rle<Ple;){if((n=Fle[Rle++])===e){e="";break}if("\\"===n)if((n=Fle[Rle++])&&dfe(n.charCodeAt(0)))"\r"===n&&"\n"===Fle[Rle]&&++Rle;else switch(n){case"u":case"x":"{"===Fle[Rle]?(++Rle,a+=bfe()):a+=gfe(n);break;case"n":a+="\n";break;case"r":a+="\r";break;case"t":a+="\t";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:lfe(n)?(0!==(r="01234567".indexOf(n))&&(i=!0),Rle<Ple&&lfe(Fle[Rle])&&(i=!0,r=8*r+"01234567".indexOf(Fle[Rle++]),"0123".indexOf(n)>=0&&Rle<Ple&&lfe(Fle[Rle])&&(r=8*r+"01234567".indexOf(Fle[Rle++]))),a+=String.fromCharCode(r)):a+=n}else{if(dfe(n.charCodeAt(0)))break;a+=n}}return""!==e&&Dfe({},Qle,rfe),{type:8,value:a,octal:i,start:t,end:Rle}}():46===e?sfe(Fle.charCodeAt(Rle+1))?wfe():_fe():sfe(e)?wfe():_fe()}function Sfe(){var e;return Rle=(e=Lle).end,Lle=Ofe(),Rle=e.end,e}function jfe(){var e;e=Rle,Lle=Ofe(),Rle=e}function Efe(e,t,n){var r=new Zle("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function Cfe(e,t){var n=new Zle("CallExpression");return n.callee=e,n.arguments=t,n}function Afe(e){var t=new Zle(Jle);return t.name=e,t}function Tfe(e){var t=new Zle("Literal");return t.value=e.value,t.raw=Fle.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Nfe(e,t,n){var r=new Zle("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Mfe(e,t,n){var r=new Zle("Property");return r.key=t,r.value=n,r.kind=e,r}function Dfe(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return ufe(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(a)).index=Rle,n.description=a,n}function Ife(e){2===e.type&&Dfe(e,"Unexpected end of input"),6===e.type&&Dfe(e,"Unexpected number"),8===e.type&&Dfe(e,"Unexpected string"),3===e.type&&Dfe(e,"Unexpected identifier"),4===e.type&&Dfe(e,"Unexpected reserved word"),Dfe(e,Qle,e.value)}function Ffe(e){var t=Sfe();7===t.type&&t.value===e||Ife(t)}function Rfe(e){return 7===Lle.type&&Lle.value===e}function Pfe(e){return 4===Lle.type&&Lle.value===e}function Lfe(){var e=[];for(Rle=Lle.start,Ffe("[");!Rfe("]");)Rfe(",")?(Sfe(),e.push(null)):(e.push($fe()),Rfe("]")||Ffe(","));return Sfe(),function(e){var t=new Zle("ArrayExpression");return t.elements=e,t}(e)}function Bfe(){var e;return Rle=Lle.start,8===(e=Sfe()).type||6===e.type?(e.octal&&Dfe(e,nfe),Tfe(e)):Afe(e.value)}function zfe(){var e,t,n;return Rle=Lle.start,3===(e=Lle).type?(n=Bfe(),Ffe(":"),Mfe("init",n,$fe())):2!==e.type&&7!==e.type?(t=Bfe(),Ffe(":"),Mfe("init",t,$fe())):void Ife(e)}function Ufe(){var e,t,n=[],r={},a=String;for(Rle=Lle.start,Ffe("{");!Rfe("}");)t="$"+((e=zfe()).key.type===Jle?e.key.name:a(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?Dfe({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),Rfe("}")||Ffe(",");return Ffe("}"),function(e){var t=new Zle("ObjectExpression");return t.properties=e,t}(n)}var Wfe={if:1};function Vfe(){var e,t,n;if(Rfe("("))return function(){var e;return Ffe("("),e=Zfe(),Ffe(")"),e}();if(Rfe("["))return Lfe();if(Rfe("{"))return Ufe();if(e=Lle.type,Rle=Lle.start,3===e||Wfe[Lle.value])n=Afe(Sfe().value);else if(8===e||6===e)Lle.octal&&Dfe(Lle,nfe),n=Tfe(Sfe());else{if(4===e)throw new Error(afe);1===e?((t=Sfe()).value="true"===t.value,n=Tfe(t)):5===e?((t=Sfe()).value=null,n=Tfe(t)):Rfe("/")||Rfe("/=")?(n=Tfe(kfe()),jfe()):Ife(Sfe())}return n}function Gfe(){var e=[];if(Ffe("("),!Rfe(")"))for(;Rle<Ple&&(e.push($fe()),!Rfe(")"));)Ffe(",");return Ffe(")"),e}function qfe(){return Ffe("."),function(){var e;return Rle=Lle.start,function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e=Sfe())||Ife(e),Afe(e.value)}()}function Hfe(){var e;return Ffe("["),e=Zfe(),Ffe("]"),e}function Xfe(){var e=function(){var e;for(e=Vfe();;)if(Rfe("."))e=Nfe(".",e,qfe());else if(Rfe("("))e=Cfe(e,Gfe());else{if(!Rfe("["))break;e=Nfe("[",e,Hfe())}return e}();if(7===Lle.type&&(Rfe("++")||Rfe("--")))throw new Error(afe);return e}function Yfe(){var e,t;if(7!==Lle.type&&4!==Lle.type)t=Xfe();else{if(Rfe("++")||Rfe("--"))throw new Error(afe);if(Rfe("+")||Rfe("-")||Rfe("~")||Rfe("!"))e=Sfe(),t=Yfe(),t=function(e,t){var n=new Zle("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(Pfe("delete")||Pfe("void")||Pfe("typeof"))throw new Error(afe);t=Xfe()}}return t}function Kfe(e){var t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function $fe(){var e,t;return e=function(){var e,t,n,r,a,i,o,u,s,c;if(e=Lle,s=Yfe(),0===(a=Kfe(r=Lle)))return s;for(r.prec=a,Sfe(),t=[e,Lle],i=[s,r,o=Yfe()];(a=Kfe(Lle))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),u=i.pop().value,s=i.pop(),t.pop(),n=Efe(u,s,o),i.push(n);(r=Sfe()).prec=a,i.push(r),t.push(Lle),n=Yfe(),i.push(n)}for(n=i[c=i.length-1],t.pop();c>1;)t.pop(),n=Efe(i[c-1].value,i[c-2],n),c-=2;return n}(),Rfe("?")&&(Sfe(),t=$fe(),Ffe(":"),e=function(e,t,n){var r=new Zle("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,$fe())),e}function Zfe(){var e=$fe();if(Rfe(","))throw new Error(afe);return e}function Jfe(e,t,n){return e.fields=t||[],e.fname=n,e}function Qfe(e){return 1===e.length?ede(e[0]):tde(e)}var ede=function(e){return function(t){return t[e]}},tde=function(e){var t=e.length;return function(n){for(var r=0;r<t;++r)n=n[e[r]];return n}};function nde(e){throw Error(e)}function rde(e){var t,n,r,a=[],i=e.length,o=null,u=0,s="";function c(){a.push(s+e.substring(t,n)),s="",t=n+1}for(e+="",t=n=0;n<i;++n)if("\\"===(r=e[n]))s+=e.substring(t,n),s+=e.substring(++n,++n),t=n;else if(r===o)c(),o=null,u=-1;else{if(o)continue;t===u&&'"'===r||t===u&&"'"===r?(t=n+1,o=r):"."!==r||u?"["===r?(n>t&&c(),u=t=n+1):"]"===r&&(u||nde("Access path missing open bracket: "+e),u>0&&c(),u=0,t=n+1):n>t?c():t=n+1}return u&&nde("Access path missing closing bracket: "+e),o&&nde("Access path missing closing quote: "+e),n>t&&(n++,c()),a}function ade(e,t,n){var r=rde(e);return e=1===r.length?r[0]:e,Jfe((n&&n.get||Qfe)(r),[e],t||e)}ade("id"),Jfe((function(e){return e}),[],"identity"),Jfe((function(){return 0}),[],"zero"),Jfe((function(){return 1}),[],"one"),Jfe((function(){return!0}),[],"true"),Jfe((function(){return!1}),[],"false");Array.isArray;Object.prototype.hasOwnProperty;function ide(e){var t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push.apply(t,Object(mo.a)(ide(e.object))),t.push.apply(t,Object(mo.a)(ide(e.property)))),t)}function ode(e){return"MemberExpression"===e.object.type?ode(e.object):"datum"===e.object.name}function ude(e){var t=function(e){Rle=0,Ple=(Fle=e).length,Lle=null,jfe();var t=Zfe();if(2!==Lle.type)throw new Error("Unexpect token after expression.");return t}(e),n=new Set;return t.visit((function(e){"MemberExpression"===e.type&&ode(e)&&n.add(ide(e).slice(1).join("."))})),n}var sde=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a){var i;return Object(Rx.a)(this,n),(i=t.call(this,e)).model=r,i.filter=a,i.expr=fde(i.model,i.filter,Object(Pse.a)(i)),i._dependentFields=ude(i.expr),i}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,this.model,j9(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"producedFields",value:function(){return new Set}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),n}(Hce);function cde(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"datum",a=[];function i(t){var i=q9(t),o=e.getSelectionComponent(i,t),u=At(i+Sle);if(o.project.timeUnit){var s=null!==n&&void 0!==n?n:e.component.data.raw,c=o.project.timeUnit.clone();s.parent?c.insertAsParentOf(s):s.parent=c}return"none"!==o.empty&&a.push(u),"vlSelectionTest(".concat(u,", ").concat(r)+("global"===o.resolve?")":", ".concat(At(o.resolve),")"))}var o=H9(t,i);return(a.length?"!("+a.map((function(e){return"length(data(".concat(e,"))")})).join(" || ")+") || ":"")+"(".concat(o,")")}function lde(e,t){var n=t.encoding,r=t.field;if(n||r){if(n&&!r){var a=e.project.items.filter((function(e){return e.channel===n}));!a.length||a.length>1?(r=e.project.items[0].field,Wre((a.length?"Multiple ":"No ")+"matching ".concat(At(n)," encoding found for selection ").concat(At(t.selection),". ")+'Using "field": '.concat(At(r),"."))):r=a[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&Wre('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(At(r),"."));return"".concat(e.name,"[").concat(At(r),"]")}function fde(e,t,n){return H9(t,(function(t){return _t(t)?t:function(e){return null===e||void 0===e?void 0:e.selection}(t)?cde(e,t.selection,n):Sae(t)}))}function dde(e,t){if(e)return je(e)&&!Roe(e)?e.map((function(e){return woe(e,t)})).join(", "):e}function hde(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function pde(e,t,n){var r,a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},o=e.combine(),u=o.disable,s=o.orient,c=o.scale,l=o.labelExpr,f=o.title,d=o.zindex,h=h9(o,["disable","orient","scale","labelExpr","title","zindex"]);if(!u){for(var p in h){var v=fee[p],m=h[p];if(v&&v!==t&&"both"!==v)delete h[p];else if(cee(m)){var g=m.condition,b=h9(m,["condition"]),y=Ze(g),x=see[p];if(x){var _=x.vgProp,w=x.part,k=[].concat(Object(mo.a)(y.map((function(e){var t=e.test,n=h9(e,["test"]);return Object.assign({test:fde(null,t)},n)}))),[b]);hde(h,w,_,k),delete h[p]}else if(null===x){var O={signal:y.map((function(e){var t=e.test,n=h9(e,["test"]);return"".concat(fde(null,t)," ? ").concat(Loe(n)," : ")})).join("")+Loe(b)};h[p]=O}}else if(sae(m)){var S=see[p];if(S){var j=S.vgProp,E=S.part;hde(h,E,j,m),delete h[p]}}}if("grid"===t){if(!h.grid)return;if(h.encode){var C=h.encode.grid;h.encode=Object.assign({},C?{grid:C}:{}),z9(h.encode)&&delete h.encode}return Object.assign(Object.assign({scale:c,orient:s},h),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:nee(d,0)})}if(i.header||!e.mainExtracted){if(void 0!==l){var A=l;(null===(a=null===(r=h.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&sae(h.encode.labels.update.text)&&(A=Q9(l,"datum.label",h.encode.labels.update.text.signal)),hde(h,"labels","text",{signal:A})}if(null===h.labelAlign&&delete h.labelAlign,h.encode){var T,N=Object(tr.a)(lee);try{for(N.s();!(T=N.n()).done;){var M=T.value;e.hasAxisPart(M)||delete h.encode[M]}}catch(I){N.e(I)}finally{N.f()}z9(h.encode)&&delete h.encode}var D=dde(f,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:c,orient:s,grid:!1},D?{title:D}:{}),h),!1===n.aria?{aria:!1}:{}),{zindex:nee(d,0)})}}}function vde(e){var t,n=e.component.axes,r=[],a=Object(tr.a)(Jte);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(n[i]){var o,u=Object(tr.a)(n[i]);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(!s.get("disable")&&!s.get("gridScale")){var c="x"===i?"height":"width",l=e.getSizeSignalRef(c).signal;c!==l&&r.push({name:c,update:l})}}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){a.e(f)}finally{a.f()}return r}var mde={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},gde={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},bde=U9(mde),yde=U9(gde);function xde(e,t,n,r){return Object.assign.apply(null,[{}].concat(Object(mo.a)(e.map((function(e){if("axisOrient"===e){var a,i="x"===n?"bottom":"left",o=t["x"===n?"axisBottom":"axisLeft"]||{},u=t["x"===n?"axisTop":"axisRight"]||{},s=new Set([].concat(Object(mo.a)(U9(o)),Object(mo.a)(U9(u)))),c={},l=Object(tr.a)(s.values());try{for(l.s();!(a=l.n()).done;){var f=a.value;c[f]={signal:"".concat(r.signal,' === "').concat(i,'" ? ').concat(Boe(o[f])," : ").concat(Boe(u[f]))}}}catch(d){l.e(d)}finally{l.f()}return c}return t[e]})))))}function _de(e,t,n,r){var a="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in eie?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],i="x"===e?"axisX":"axisY",o=sae(n)?"axisOrient":"axis"+Y9(n),u=[].concat(a,Object(mo.a)(a.map((function(e){return i+e.substr(4)})))),s=["axis",o,i];return{vlOnlyAxisConfig:xde(u,r,e,n),vgAxisConfig:xde(s,r,e,n),axisConfigStyle:wde([].concat(s,Object(mo.a)(u)),r)}}function wde(e,t){var n,r,a=[{}],i=Object(tr.a)(e);try{for(i.s();!(r=i.n()).done;){var o=null===(n=t[r.value])||void 0===n?void 0:n.style;if(o){o=Ze(o);var u,s=Object(tr.a)(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;a.push(t.style[c])}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return Object.assign.apply(null,a)}function kde(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Goe(e,n,t.style);if(void 0!==i)return{configFrom:"style",configValue:i};for(var o=0,u=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<u.length;o++){var s=u[o];if(void 0!==(null===(r=a[s])||void 0===r?void 0:r[e]))return{configFrom:s,configValue:a[s][e]}}return{}}var Ode={scale:function(e){var t=e.model,n=e.channel;return t.scaleName(n)},format:function(e){var t=e.fieldOrDatumDef,n=e.config,r=e.axis,a=r.format,i=r.formatType;return Nie(t,t.type,a,i,n,!0)},formatType:function(e){var t=e.axis,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return Mie(a,n,r)},grid:function(e){var t,n=e.fieldOrDatumDef,r=e.axis,a=e.scaleType;return(!Qie(n)||!pne(n.bin))&&(null!==(t=r.grid)&&void 0!==t?t:function(e,t){return!iie(e)&&Qie(t)&&!hne(null===t||void 0===t?void 0:t.bin)}(a,n))},gridScale:function(e){return function(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e.model,e.channel)},labelAlign:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelAlign||Ede(n,r,a)},labelAngle:function(e){return e.labelAngle},labelBaseline:function(e){var t=e.axis,n=e.labelAngle,r=e.orient,a=e.channel;return t.labelBaseline||jde(n,r,a)},labelFlush:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.channel;return null!==(t=n.labelFlush)&&void 0!==t?t:function(e,t){if("x"===t&&M9(["quantitative","temporal"],e))return!0;return}(r.type,a)},labelOverlap:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.scaleType;return null!==(t=n.labelOverlap)&&void 0!==t?t:function(e,t){if("nominal"!==e)return"log"!==t||"greedy";return}(r.type,a)},orient:function(e){return e.orient},tickCount:function(e){var t,n=e.channel,r=e.model,a=e.axis,i=e.fieldOrDatumDef,o=e.scaleType,u="x"===n?"width":"y"===n?"height":void 0,s=u?r.getSizeSignalRef(u):void 0;return null!==(t=a.tickCount)&&void 0!==t?t:function(e){var t,n=e.fieldOrDatumDef,r=e.scaleType,a=e.size;if(!e.values&&!iie(r)&&"log"!==r){if(Qie(n)){if(hne(n.bin))return{signal:"ceil(".concat(a.signal,"/10)")};if(n.timeUnit&&M9(["month","hours","day","quarter"],null===(t=oae(n.timeUnit))||void 0===t?void 0:t.unit))return}return{signal:"ceil(".concat(a.signal,"/40)")}}return}({fieldOrDatumDef:i,scaleType:o,size:s,values:a.values})},title:function(e){var t=e.axis,n=e.model,r=e.channel;if(void 0!==t.title)return t.title;var a=Cde(n,r);if(void 0!==a)return a;var i=n.typedFieldDef(r),o="x"===r?"x2":"y2",u=n.fieldDef(o);return Hoe(i?[Hie(i)]:[],Qie(u)?[Hie(u)]:[])},values:function(e){return function(e,t){var n=e.values;if(je(n))return Doe(t,n);if(sae(n))return n;return}(e.axis,e.fieldOrDatumDef)},zindex:function(e){var t,n=e.axis,r=e.fieldOrDatumDef,a=e.mark;return null!==(t=n.zindex)&&void 0!==t?t:function(e,t){if("rect"===e&&hoe(t))return 1;return 0}(a,r)}};function Sde(e){return"(((".concat(e.signal," % 360) + 360) % 360)")}function jde(e,t,n,r){if(void 0!==e){if("x"===n){if(sae(e)){var a=Sde(e),i=sae(t)?"(".concat(t.signal,' === "top")'):"top"===t;return{signal:"(45 < ".concat(a," && ").concat(a," < 135) || (225 < ").concat(a," && ").concat(a,' < 315) ? "middle" :')+"(".concat(a," <= 45 || 315 <= ").concat(a,") === ").concat(i,' ? "bottom" : "top"')}}if(45<e&&e<135||225<e&&e<315)return"middle";if(sae(t)){var o=e<=45||315<=e?"===":"!==";return{signal:"".concat(t.signal," ").concat(o,' "top" ? "bottom" : "top"')}}return(e<=45||315<=e)===("top"===t)?"bottom":"top"}if(sae(e)){var u=Sde(e),s=sae(t)?"(".concat(t.signal,' === "left")'):"left"===t,c=r?'"middle"':"null";return{signal:"".concat(u," <= 45 || 315 <= ").concat(u," || (135 <= ").concat(u," && ").concat(u," <= 225) ? ").concat(c," : (45 <= ").concat(u," && ").concat(u," <= 135) === ").concat(s,' ? "top" : "bottom"')}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(sae(t)){var l=45<=e&&e<=135?"===":"!==";return{signal:"".concat(t.signal," ").concat(l,' "left" ? "top" : "bottom"')}}return(45<=e&&e<=135)===("left"===t)?"top":"bottom"}}function Ede(e,t,n){if(void 0!==e){var r="x"===n,a=r?0:90,i=r?"bottom":"left";if(sae(e)){var o=Sde(e),u=sae(t)?"(".concat(t.signal,' === "').concat(i,'")'):t===i;return{signal:"(".concat(a?"("+o+" + 90)":o," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(a," < ").concat(o," && ").concat(o," < ").concat(180+a,") === ").concat(u,' ? "left" : "right"')}}if((e+a)%180===0)return r?null:"center";if(sae(t)){var s=a<e&&e<180+a?"===":"!==",c="".concat(t.signal," ").concat(s,' "').concat(i,'"');return{signal:"".concat(c,' ? "left" : "right"')}}return(a<e&&e<180+a)===(t===i)?"left":"right"}}function Cde(e,t){var n="x"===t?"x2":"y2",r=e.fieldDef(t),a=e.fieldDef(n),i=r?r.title:void 0,o=a?a.title:void 0;return i&&o?Xoe(i,o):i||(o||(void 0!==i?i:void 0!==o?o:void 0))}var Ade=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a._dependentFields=ude(a.transform.calculate),a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(T9(this.transform))}}],[{key:"parseAllForSortIndex",value:function(e,t){return t.forEachFieldDef((function(t,r){if(uoe(t)&&Wie(t.sort)){var a=t.field,i=t.timeUnit,o=t.sort,u=o.map((function(e,t){return"".concat(Sae({field:a,timeUnit:i,equal:e})," ? ").concat(t," : ")})).join("")+o.length;e=new n(e,{calculate:u,as:Tde(t,r,{forAs:!0})})}})),e}}]),n}(Hce);function Tde(e,t,n){return doe(e,Object.assign({prefix:t,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function Nde(e,t){return M9(["top","bottom"],t)?"column":M9(["left","right"],t)||"row"===e?"row":"column"}function Mde(e,t,n,r){var a="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return nee(((null===t||void 0===t?void 0:t.header)||{})[e],a[e],n.header[e])}function Dde(e,t,n,r){var a,i={},o=Object(tr.a)(e);try{for(o.s();!(a=o.n()).done;){var u=a.value,s=Mde(u,t,n,r);void 0!==s&&(i[u]=s)}}catch(c){o.e(c)}finally{o.f()}return i}var Ide=["row","column"],Fde=["header","footer"];function Rde(e,t){var n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,a=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,i=Dde(["titleAnchor","titleAngle","titleOrient"],a,r,t),o=i.titleAnchor,u=i.titleAngle,s=Nde(t,i.titleOrient),c=oee(u);return{name:"".concat(t,"-title"),type:"group",role:"".concat(s,"-title"),title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},"row"===t?{orient:"left"}:{}),{style:"guide-title"}),Lde(c,s)),Pde(s,c,o)),qde(r,a,t,bde,mde))}}function Pde(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle";switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}var r=Ede(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function Lde(e,t){var n=jde(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function Bde(e,t){var n,r=e.component.layoutHeaders[t],a=[],i=Object(tr.a)(Fde);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r[o]){var u,s=Object(tr.a)(r[o]);try{for(s.s();!(u=s.n()).done;){var c=Wde(e,t,o,r,u.value);null!=c&&a.push(c)}}catch(l){s.e(l)}finally{s.f()}}}}catch(l){i.e(l)}finally{i.f()}return a}function zde(e,t){var n,r=e.sort;return Uie(r)?{field:doe(r,{expr:"datum"}),order:null!==(n=r.order)&&void 0!==n?n:"ascending"}:je(r)?{field:Tde(e,t,{expr:"datum"}),order:"ascending"}:{field:doe(e,{expr:"datum"}),order:null!==r&&void 0!==r?r:"ascending"}}function Ude(e,t,n){var r=Dde(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e,n,t),a=r.format,i=r.formatType,o=r.labelAngle,u=r.labelAnchor,s=r.labelOrient,c=r.labelExpr,l=Cie({fieldOrDatumDef:e,format:a,formatType:i,expr:"parent",config:n}).signal,f=Nde(t,s);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:c?Q9(Q9(c,"datum.label",l),"datum.value",doe(e,{expr:"parent"})):l}},"row"===t?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),Lde(o,f)),Pde(f,o,u)),qde(n,e,t,yde,gde))}function Wde(e,t,n,r,a){if(a){var i=null,o=r.facetFieldDef,u=e.config?e.config:void 0;if(o&&a.labels){var s=Dde(["labelOrient"],o,u,t).labelOrient;("row"===t&&!M9(["top","bottom"],s)||"column"===t&&!M9(["left","right"],s))&&(i=Ude(o,t,u))}var c=Gpe(e)&&!Vie(e.facet),l=a.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(i||f){var d="row"===t?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:zde(o,t)}:{}),f&&c?{from:{data:e.getName("facet_domain_".concat(t))}}:{}),i?{title:i}:{}),a.sizeSignal?{encode:{update:Object(go.a)({},d,a.sizeSignal)}}:{}),f?{axes:l}:{})}}return null}var Vde={column:{start:0,end:1},row:{start:1,end:0}};function Gde(e,t){return Vde[t][e]}function qde(e,t,n,r,a){var i,o={},u=Object(tr.a)(r);try{for(u.s();!(i=u.n()).done;){var s=i.value;if(a[s]){var c=Mde(s,t,e,n);void 0!==c&&(o[a[s]]=c)}}}catch(l){u.e(l)}finally{u.f()}return o}function Hde(e){return[].concat(Object(mo.a)(Xde(e,"width")),Object(mo.a)(Xde(e,"height")),Object(mo.a)(Xde(e,"childWidth")),Object(mo.a)(Xde(e,"childHeight")))}function Xde(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var a=e.getSizeSignalRef(t).signal;if("step"===r){var i=e.getScaleComponent(n);if(i){var o=i.get("type"),u=i.get("range");if(iie(o)&&cae(u)){var s=e.scaleName(n);if(Gpe(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[Yde(s,u)];return[Yde(s,u),{name:a,update:Kde(s,i,"domain('".concat(s,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){var c=a.endsWith("width"),l=c?"containerSize()[0]":"containerSize()[1]",f=zue(e.config.view,c?"width":"height"),d="isFinite(".concat(l,") ? ").concat(l," : ").concat(f);return[{name:a,init:d,on:[{update:d,events:"window:resize"}]}]}return[{name:a,value:r}]}function Yde(e,t){return{name:e+"_step",value:t.step}}function Kde(e,t,n){var r=t.get("type"),a=t.get("padding"),i=nee(t.get("paddingOuter"),a),o=t.get("paddingInner");return o="band"===r?void 0!==o?o:a:1,"bandspace(".concat(n,", ").concat(o,", ").concat(i,") * ").concat(e,"_step")}function $de(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Zde(e,t){return U9(e).reduce((function(n,r){var a=e[r];return Object.assign(Object.assign({},n),bce(t,a,r,(function(e){return sae(e)?e:{value:e.value}})))}),{})}function Jde(e,t){if(Hpe(t)||Gpe(t))return"shared";if(qpe(t))return Qte(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Qde(e,t){var n=e.scale[t],r=Qte(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&Wre(b.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var ehe=Object.assign(Object.assign({},Aue),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),the=U9(ehe),nhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return n}(Lse),rhe={symbols:function(e,t){var n,r,a,i,o,u=t.fieldOrDatumDef,s=t.model,c=t.channel,l=t.legendCmpt;if("symbol"!==t.legendType)return;var f=s.markDef,d=s.encoding,h=s.config,p=s.mark,v=f.filled&&"trail"!==p,m=Object.assign(Object.assign({},function(e,t,n){var r,a=Object(tr.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=Woe(i,t.markDef,t.config);void 0!==o&&(e[i]=Poe(o))}}catch(u){a.e(u)}finally{a.f()}return e}({},s,Iee)),jce(s,{filled:v})),g=null!==(n=ahe(d.opacity))&&void 0!==n?n:f.opacity;if(m.fill)if("fill"===c||v&&c===fte)delete m.fill;else if(m.fill.field)l.get("symbolFillColor")?delete m.fill:(m.fill=Poe(null!==(r=h.legend.symbolBaseFillColor)&&void 0!==r?r:"black"),m.fillOpacity=Poe(null!==g&&void 0!==g?g:1));else if(je(m.fill)){var b=null!==(o=null!==(i=ihe(null!==(a=d.fill)&&void 0!==a?a:d.color))&&void 0!==i?i:f.fill)&&void 0!==o?o:v&&f.color;b&&(m.fill=Poe(b))}if(m.stroke)if("stroke"===c||!v&&c===fte)delete m.stroke;else if(m.stroke.field)delete m.stroke;else if(je(m.stroke)){var y=nee(ihe(d.stroke||d.color),f.stroke,v?f.color:void 0);y&&(m.stroke={value:y})}if(c!==gte){var x=Qie(u)&&uhe(s,l,u);x?m.opacity=[Object.assign({test:x},Poe(null!==g&&void 0!==g?g:1)),Poe(h.legend.unselectedOpacity)]:g&&(m.opacity=Poe(g))}return z9(m=Object.assign(Object.assign({},m),e))?void 0:m},gradient:function(e,t){var n=t.model;if("gradient"!==t.legendType)return;var r={},a=ahe(n.encoding.opacity)||n.markDef.opacity;a&&(r.opacity=Poe(a));return z9(r=Object.assign(Object.assign({},r),e))?void 0:r},labels:function(e,t){var n=t.fieldOrDatumDef,r=t.model,a=t.channel,i=t.legendCmpt,o=r.legend(a)||{},u=r.config,s=Qie(n)?uhe(r,i,n):void 0,c=s?[{test:s,value:1},{value:u.legend.unselectedOpacity}]:void 0,l=o.format,f=o.formatType,d=jie(f)?Tie({fieldOrDatumDef:n,field:"datum.value",format:l,formatType:f,config:u}):void 0,h=Object.assign(Object.assign(Object.assign({},c?{opacity:c}:{}),d?{text:d}:{}),e);return z9(h)?void 0:h},entries:function(e,t){var n=t.legendCmpt.get("selections");return(null===n||void 0===n?void 0:n.length)?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}};function ahe(e){return ohe(e,(function(e,t){return Math.max(e,t.value)}))}function ihe(e){return ohe(e,(function(e,t){return nee(e,t.value)}))}function ohe(e,t){return function(e){var t=e&&e.condition;return!!t&&(je(t)||ooe(t))}(e)?Ze(e.condition).reduce(t,e.value):ooe(e)?e.value:void 0}function uhe(e,t,n){var r=t.get("selections");if(null===r||void 0===r?void 0:r.length){var a=At(n.field);return r.map((function(e){var t=At(q9(e)+Sle);return"(!length(data(".concat(t,")) || (").concat(e,"[").concat(a,"] && indexof(").concat(e,"[").concat(a,"], datum.value) >= 0))")})).join(" || ")}}var she={direction:function(e){return e.direction},format:function(e){var t=e.fieldOrDatumDef,n=e.legend,r=e.config,a=n.format,i=n.formatType;return Nie(t,t.type,a,i,r,!1)},formatType:function(e){var t=e.legend,n=e.fieldOrDatumDef,r=e.scaleType,a=t.formatType;return Mie(a,n,r)},gradientLength:function(e){var t,n,r=e.legend,a=e.legendConfig;return null!==(n=null!==(t=r.gradientLength)&&void 0!==t?t:a.gradientLength)&&void 0!==n?n:function(e){var t=e.legendConfig,n=e.model,r=e.direction,a=e.orient,i=e.scaleType,o=t.gradientHorizontalMaxLength,u=t.gradientHorizontalMinLength,s=t.gradientVerticalMaxLength,c=t.gradientVerticalMinLength;if(uie(i))return"horizontal"===r?"top"===a||"bottom"===a?fhe(n,"width",u,o):u:fhe(n,"height",c,s);return}(e)},labelOverlap:function(e){var t,n,r=e.legend,a=e.legendConfig,i=e.scaleType;return null!==(n=null!==(t=r.labelOverlap)&&void 0!==t?t:a.labelOverlap)&&void 0!==n?n:function(e){if(M9(["quantile","threshold","log"],e))return"greedy";return}(i)},symbolType:function(e){var t,n=e.legend,r=e.markDef,a=e.channel,i=e.encoding;return null!==(t=n.symbolType)&&void 0!==t?t:function(e,t,n,r){var a;if("shape"!==t){var i=null!==(a=ihe(n))&&void 0!==a?a:r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(r.type,a,i.shape,r.shape)},title:function(e){return xoe(e.fieldOrDatumDef,e.config,{allowDisabling:!0})},type:function(e){var t=e.legendType,n=e.scaleType;if(Fte(e.channel)&&uie(n)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:function(e){var t=e.fieldOrDatumDef;return function(e,t){var n=e.values;if(je(n))return Doe(t,n);if(sae(n))return n;return}(e.legend,t)}};function che(e){return nee(e.legend.type,function(e){var t=e.channel,n=e.timeUnit,r=e.scaleType;if(Fte(t)){if(M9(["quarter","month","day"],n))return"symbol";if(uie(r))return"gradient"}return"symbol"}(e))}function lhe(e){var t,n,r=e.legendConfig,a=e.legendType,i=e.orient;return null!==(n=null!==(t=e.legend.direction)&&void 0!==t?t:r[a?"gradientDirection":"symbolDirection"])&&void 0!==n?n:function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(i,a)}function fhe(e,t,n,r){var a=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(a,", ").concat(n,", ").concat(r,")")}}function dhe(e){var t=Vpe(e)?function(e){for(var t=e.encoding,n={},r=0,a=[fte].concat(Object(mo.a)(Eue));r<a.length;r++){var i=a[r],o=Soe(t[i]);o&&e.getScaleComponent(i)&&(i===pte&&Qie(o)&&o.type===Dae||(n[i]=phe(e,i)))}return n}(e):function(e){var t,n=e.component,r=n.legends,a=n.resolve,i=Object(tr.a)(e.children);try{for(i.s();!(t=i.n()).done;){var o=t.value;dhe(o);var u,s=Object(tr.a)(U9(o.component.legends));try{for(s.s();!(u=s.n()).done;){var c=u.value;a.legend[c]=Qde(e.component.resolve,c),"shared"===a.legend[c]&&(r[c]=vhe(r[c],o.component.legends[c]),r[c]||(a.legend[c]="independent",delete r[c]))}}catch(m){s.e(m)}finally{s.f()}}}catch(m){i.e(m)}finally{i.f()}var l,f=Object(tr.a)(U9(r));try{for(f.s();!(l=f.n()).done;){var d,h=l.value,p=Object(tr.a)(e.children);try{for(p.s();!(d=p.n()).done;){var v=d.value;v.component.legends[h]&&("shared"===a.legend[h]&&delete v.component.legends[h])}}catch(m){p.e(m)}finally{p.f()}}}catch(m){f.e(m)}finally{f.f()}return r}(e);return e.component.legends=t,t}function hhe(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===t&&e===(null===r||void 0===r?void 0:r.title))return!0}return e===(n||{})[t]}function phe(e,t){var n,r,a,i=e.legend(t),o=e.markDef,u=e.encoding,s=e.config,c=s.legend,l=new nhe({},function(e,t){var n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:Object(go.a)({},t,n)}(e,t));!function(e,t,n){var r,a=null===(r=e.fieldDef(t))||void 0===r?void 0:r.field;Tle(e,(function(e){var r,i,o=null!==(r=e.project.hasField[a])&&void 0!==r?r:e.project.hasChannel[t];if(o&&ale.has(e)){var u=null!==(i=n.get("selections"))&&void 0!==i?i:[];u.push(e.name),n.set("selections",u,!1),o.hasLegend=!0}}))}(e,t,l);var f=void 0!==i?!i:c.disable;if(l.set("disable",f,void 0!==i),f)return l;i=i||{};var d,h=e.getScaleComponent(t).get("type"),p=Soe(u[t]),v=Qie(p)?null===(n=oae(p.timeUnit))||void 0===n?void 0:n.unit:void 0,m=i.orient||s.legend.orient||"right",g=che({legend:i,channel:t,timeUnit:v,scaleType:h}),b={legend:i,channel:t,model:e,markDef:o,encoding:u,fieldOrDatumDef:p,legendConfig:c,config:s,scaleType:h,orient:m,legendType:g,direction:lhe({legend:i,legendType:g,orient:m,legendConfig:c})},y=Object(tr.a)(the);try{for(y.s();!(d=y.n()).done;){var x=d.value,_=x in she?she[x](b):i[x];if(void 0!==_){var w=hhe(_,x,i,e.fieldDef(t));(w||void 0===s.legend[x])&&l.set(x,_,w)}}}catch(M){y.e(M)}finally{y.f()}for(var k=null!==(r=null===i||void 0===i?void 0:i.encoding)&&void 0!==r?r:{},O=l.get("selections"),S={},j={fieldOrDatumDef:p,model:e,channel:t,legendCmpt:l,legendType:g},E=0,C=["labels","legend","title","symbols","gradient","entries"];E<C.length;E++){var A=C[E],T=Zde(null!==(a=k[A])&&void 0!==a?a:{},e),N=A in rhe?rhe[A](T,j):T;void 0===N||z9(N)||(S[A]=Object.assign(Object.assign(Object.assign({},(null===O||void 0===O?void 0:O.length)&&Qie(p)?{name:"".concat(q9(p.field),"_legend_").concat(A)}:{}),(null===O||void 0===O?void 0:O.length)?{interactive:!!O}:{}),{update:N}))}return z9(S)||l.set("encode",S,!!(null===i||void 0===i?void 0:i.encoding)),l}function vhe(e,t){var n,r,a,i;if(!e)return t.clone();var o=e.getWithExplicit("orient"),u=t.getWithExplicit("orient");if(!o.explicit||!u.explicit||o.value===u.value){var s,c=!1,l=Object(tr.a)(the);try{var f=function(){var n=s.value,r=Vse(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"symbolType":return function(e,t){if("circle"===t.value)return t;return e}(e,t);case"title":return Yoe(e,t);case"type":return c=!0,zse("symbol")}return Wse(e,t,n,"legend")}));e.setWithExplicit(n,r)};for(l.s();!(s=l.n()).done;)f()}catch(d){l.e(d)}finally{l.f()}return c&&((null===(r=null===(n=e.implicit)||void 0===n?void 0:n.encode)||void 0===r?void 0:r.gradient)&&X9(e.implicit,["encode","gradient"]),(null===(i=null===(a=e.explicit)||void 0===a?void 0:a.encode)||void 0===i?void 0:i.gradient)&&X9(e.explicit,["encode","gradient"])),e}}function mhe(e,t,n,r){var a,i,o;e.encode=null!==(a=e.encode)&&void 0!==a?a:{},e.encode[t]=null!==(i=e.encode[t])&&void 0!==i?i:{},e.encode[t].update=null!==(o=e.encode[t].update)&&void 0!==o?o:{},e.encode[t].update[n]=r}function ghe(e){var t,n=e.component.legends,r={},a=Object(tr.a)(U9(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=e.getScaleComponent(i),u=A9(o.get("domains"));if(r[u]){var s,c=Object(tr.a)(r[u]);try{for(c.s();!(s=c.n()).done;){vhe(s.value,n[i])||r[u].push(n[i])}}catch(l){c.e(l)}finally{c.f()}}else r[u]=[n[i].clone()]}}catch(l){a.e(l)}finally{a.f()}return W9(r).flat().map((function(t){return function(e,t){var n,r,a,i=e.combine(),o=i.disable,u=i.labelExpr,s=(i.selections,h9(i,["disable","labelExpr","selections"]));if(o)return;!1===t.aria&&void 0==s.aria&&(s.aria=!1);if(null===(n=s.encode)||void 0===n?void 0:n.symbols){var c=s.encode.symbols.update;!c.fill||"transparent"===c.fill.value||c.stroke||s.stroke||(c.stroke={value:"transparent"});var f,d=Object(tr.a)(Eue);try{for(d.s();!(f=d.n()).done;){var h=f.value;s[h]&&delete c[h]}}catch(l){d.e(l)}finally{d.f()}}s.title||delete s.title;if(void 0!==u){var p=u;(null===(a=null===(r=s.encode)||void 0===r?void 0:r.labels)||void 0===a?void 0:a.update)&&sae(s.encode.labels.update.text)&&(p=Q9(u,"datum.label",s.encode.labels.update.text.signal)),mhe(s,"labels","text",{signal:p})}for(var v in s){var m=s[v];if(sae(m)){var g=Cue[v];if(g){var b=g.vgProp;mhe(s,g.part,b,m),delete s[v]}}}return s}(t,e.config)})).filter((function(e){return void 0!==e}))}function bhe(e){return Hpe(e)||qpe(e)?function(e){return e.children.reduce((function(e,t){return e.concat(t.assembleProjections())}),yhe(e))}(e):yhe(e)}function yhe(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name;if(t.data){var a={signal:"[".concat(t.size.map((function(e){return e.signal})).join(", "),"]")},i=t.data.reduce((function(t,n){var r=sae(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return M9(t,r)||t.push(r),t}),[]);if(i.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:i.length>1?"[".concat(i.join(", "),"]"):i[0]}},n)]}return[Object.assign(Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}var xhe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],_he=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;return Object(Rx.a)(this,n),(o=t.call(this,Object.assign({},r),{name:e})).specifiedProjection=r,o.size=a,o.data=i,o.merged=!1,o}return Object(Px.a)(n,[{key:"isFit",get:function(){return!!this.data}}]),n}(Lse);function whe(e){e.component.projection=Vpe(e)?function(e){var t;if(e.hasProjection){var n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),a=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=r?function(e){for(var t=[],n=e.encoding,r=0,a=[[ste,ute],[lte,cte]];r<a.length;r++){var i=a[r];(Soe(n[i[0]])||Soe(n[i[1]]))&&t.push({signal:e.getName("geojson_".concat(t.length))})}e.channelHasField(pte)&&e.typedFieldDef(pte).type===Dae&&t.push({signal:e.getName("geojson_".concat(t.length))});0===t.length&&t.push(e.requestDataName(Jse));return t}(e):void 0;return new _he(e.projectionName(!0),Object.assign(Object.assign({},null!==(t=e.config.projection)&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{}),a,i)}return}(e):function(e){if(0===e.children.length)return;var t,n,r=Object(tr.a)(e.children);try{for(r.s();!(n=r.n()).done;){whe(n.value)}}catch(d){r.e(d)}finally{r.f()}var a=I9(e.children,(function(e){var n=e.component.projection;if(n){if(t){var r=function(e,t){var n=I9(xhe,(function(n){return!ft(e.explicit,n)&&!ft(t.explicit,n)||!(!ft(e.explicit,n)||!ft(t.explicit,n)||A9(e.get(n))!==A9(t.get(n)))}));if(A9(e.size)===A9(t.size)){if(n)return e;if(A9(e.explicit)===A9({}))return t;if(A9(t.explicit)===A9({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0}));if(t&&a){var i,o=e.projectionName(!0),u=new _he(o,t.specifiedProjection,t.size,j9(t.data)),s=Object(tr.a)(e.children);try{for(s.s();!(i=s.n()).done;){var c=i.value,l=c.component.projection;if(l){var f;if(l.isFit)(f=u.data).push.apply(f,Object(mo.a)(c.component.projection.data));c.renameProjection(l.get("name"),o),l.merged=!0}}}catch(d){s.e(d)}finally{s.f()}return u}return}(e)}var khe=n(205);function Ohe(e,t){return"".concat(dne(e),"_").concat(t)}function She(e,t,n){var r,a=Ohe(null!==(r=Aoe(n,void 0))&&void 0!==r?r:{},t);return e.getName("".concat(a,"_bins"))}function jhe(e,t,n){var r,a;r=function(e){return"as"in e}(e)?_t(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[doe(e,{forAs:!0}),doe(e,{binSuffix:"end",forAs:!0})];var i=Object.assign({},Aoe(t,void 0)),o=Ohe(i,e.field),u=function(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}(n,o),s=u.signal,c=u.extentSignal;if(mne(i.extent)){var l=i.extent,f=l.selection;a=lde(n.getSelectionComponent(q9(f),f),l),delete i.extent}return{key:o,binComponent:Object.assign(Object.assign(Object.assign({bin:i,field:e.field,as:[r]},s?{signal:s}:{}),c?{extentSignal:c}:{}),a?{span:a}:{})}}var Ehe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).bins=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.bins))}},{key:"merge",value:function(e,t){var n,r=Object(tr.a)(U9(e.bins));try{for(r.s();!(n=r.n()).done;){var a=n.value;a in this.bins?(t(e.bins[a].signal,this.bins[a].signal),this.bins[a].as=R9([].concat(Object(mo.a)(this.bins[a].as),Object(mo.a)(e.bins[a].as)),T9)):this.bins[a]=e.bins[a]}}catch(s){r.e(s)}finally{r.f()}var i,o=Object(tr.a)(e.children);try{for(o.s();!(i=o.n()).done;){var u=i.value;e.removeChild(u),u.parent=this}}catch(s){o.e(s)}finally{o.f()}e.remove()}},{key:"producedFields",value:function(){return new Set(W9(this.bins).map((function(e){return e.as})).flat(2))}},{key:"dependentFields",value:function(){return new Set(W9(this.bins).map((function(e){return e.field})))}},{key:"hash",value:function(){return"Bin ".concat(T9(this.bins))}},{key:"assemble",value:function(){return W9(this.bins).flatMap((function(e){var t=[],n=Object(khe.a)(e.as),r=n[0],a=n.slice(1),i=e.bin,o=i.extent,u=h9(i,["extent"]),s=Object.assign(Object.assign(Object.assign({type:"bin",field:J9(e.field),as:r,signal:e.signal},mne(o)?{extent:null}:{extent:o}),e.span?{span:{signal:"span(".concat(e.span,")")}}:{}),u);!o&&e.extentSignal&&(t.push({type:"extent",field:J9(e.field),signal:e.extentSignal}),s.extent={signal:e.extentSignal}),t.push(s);var c,l=Object(tr.a)(a);try{for(l.s();!(c=l.n()).done;)for(var f=c.value,d=0;d<2;d++)t.push({type:"formula",expr:doe({field:r[d]},{expr:"datum"}),as:f[d]})}catch(h){l.e(h)}finally{l.f()}return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}],[{key:"makeFromEncoding",value:function(e,t){var r=t.reduceFieldDef((function(e,n,r){if(ioe(n)&&hne(n.bin)){var a=jhe(n,n.bin,t),i=a.key,o=a.binComponent;e[i]=Object.assign(Object.assign(Object.assign({},o),e[i]),function(e,t,n,r){var a,i;if(Ioe(t,n)){var o=Vpe(e)&&null!==(i=null!==(a=e.axis(n))&&void 0!==a?a:e.legend(n))&&void 0!==i?i:{},u=doe(t,{expr:"datum"}),s=doe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:doe(t,{binSuffix:"range",forAs:!0}),formula:Rie(u,s,o.format,o.formatType,r)}}return{}}(t,n,r,t.config))}return e}),{});return z9(r)?null:new n(e,r)}},{key:"makeFromTransform",value:function(e,t,r){var a=jhe(t,t.bin,r),i=a.key,o=a.binComponent;return new n(e,Object(go.a)({},i,o))}}]),n}(Hce),Che=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e){var r,a;if(Object(Rx.a)(this,n),r=t.call(this,null),Yse(e=null!==e&&void 0!==e?e:{name:"source"})||(a=e.format?Object.assign({},C9(e.format,["parse"])):{}),Hse(e))r._data={values:e.values};else if(qse(e)){if(r._data={url:e.url},!a.type){var i=/(?:\.([^.]+))?$/.exec(e.url)[1];M9(["json","csv","tsv","dsv","topojson"],i)||(i="json"),a.type=i}}else $se(e)?r._data={values:[{type:"Sphere"}]}:(Xse(e)||Yse(e))&&(r._data={});return r._generator=Yse(e),e.name&&(r._name=e.name),a&&!z9(a)&&(r._data.format=a),r}return Object(Px.a)(n,[{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"data",get:function(){return this._data}},{key:"hasName",value:function(){return!!this._name}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(e){this._name=e}},{key:"parent",set:function(e){throw new Error("Source nodes have to be roots.")}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}]),n}(Hce);function Ahe(e){var t,n=Object(tr.a)(e);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,i=Object(tr.a)(a.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.parent!==a)return console.error("Dataflow graph is inconsistent.",a,o),!1}}catch(u){i.e(u)}finally{i.f()}if(!Ahe(a.children))return!1}}catch(u){n.e(u)}finally{n.f()}return!0}var The=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).params=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){}},{key:"hash",value:function(){return"Graticule ".concat(T9(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),n}(Hce),Nhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).params=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,this.params)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){var e;return new Set([null!==(e=this.params.as)&&void 0!==e?e:"data"])}},{key:"hash",value:function(){return"Hash ".concat(T9(this.params))}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),n}(Hce);function Mhe(e){return e instanceof Che||e instanceof The||e instanceof Nhe}var Dhe=function(){function e(){Object(Rx.a)(this,e),this._mutated=!1}return Object(Px.a)(e,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),e}(),Ihe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){var e;return Object(Rx.a)(this,n),(e=t.call(this))._continue=!1,e}return Object(Px.a)(n,[{key:"setContinue",value:function(){this._continue=!0}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(e){var t=e.continueFlag,n=e.mutatedFlag;t&&this.setContinue(),n&&this.setMutated()}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(e){if(Mhe(e))return!1;var t=e.parent;return this.run(e).continueFlag&&this.optimizeNextFromLeaves(t),this.mutatedFlag}}]),n}(Dhe),Fhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return n}(Dhe);function Rhe(e,t,n,r){var a=Vpe(r)?r.encoding[Xte(t)]:void 0;if(ioe(n)&&Vpe(r)&&Kie(t,n,a,r.stack,r.markDef,r.config))e.add(doe(n,{})),e.add(doe(n,{suffix:"end"})),n.bin&&Ioe(n,t)&&e.add(doe(n,{binSuffix:"range"}));else if(t in Mte){var i=function(e){switch(e){case ute:return"y";case cte:return"y2";case ste:return"x";case lte:return"x2"}}(t);e.add(r.getName(i))}else e.add(doe(n));return e}var Phe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a){var i;return Object(Rx.a)(this,n),(i=t.call(this,e)).dimensions=r,i.measures=a,i}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,new Set(this.dimensions),j9(this.measures))}},{key:"groupBy",get:function(){return this.dimensions}},{key:"merge",value:function(e){return function(e,t){if(e.size!==t.size)return!1;var n,r=Object(tr.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(this.dimensions,e.dimensions)?(function(e,t){var n,r,a=Object(tr.a)(U9(t));try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=t[o],s=Object(tr.a)(U9(u));try{for(s.s();!(i=s.n()).done;){var c=i.value;o in e?e[o][c]=new Set([].concat(Object(mo.a)(null!==(n=e[o][c])&&void 0!==n?n:[]),Object(mo.a)(u[c]))):e[o]=Object(go.a)({},c,u[c])}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}}(this.measures,e.measures),!0):(function(){var e;(e=Bre).debug.apply(e,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(e){e.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(mo.a)(this.dimensions),Object(mo.a)(U9(this.measures))))}},{key:"producedFields",value:function(){var e,t=new Set,n=Object(tr.a)(U9(this.measures));try{for(n.s();!(e=n.n()).done;){var r,a=e.value,i=Object(tr.a)(U9(this.measures[a]));try{for(i.s();!(r=i.n()).done;){var o=r.value,u=this.measures[a][o];0===u.size?t.add("".concat(o,"_").concat(a)):u.forEach(t.add,t)}}catch(s){i.e(s)}finally{i.f()}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"hash",value:function(){return"Aggregate ".concat(T9({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=Object(tr.a)(U9(this.measures));try{for(a.s();!(e=a.n()).done;){var i,o=e.value,u=Object(tr.a)(U9(this.measures[o]));try{for(u.s();!(i=u.n()).done;){var s,c=i.value,l=Object(tr.a)(this.measures[o][c]);try{for(l.s();!(s=l.n()).done;){var f=s.value;r.push(f),t.push(c),n.push("*"===o?null:J9(o))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){u.e(d)}finally{u.f()}}}catch(d){a.e(d)}finally{a.f()}return{type:"aggregate",groupby:Object(mo.a)(this.dimensions).map(J9),ops:t,fields:n,as:r}}}],[{key:"makeFromEncoding",value:function(e,t){var r=!1;t.forEachFieldDef((function(e){e.aggregate&&(r=!0)}));var a={},i=new Set;return r?(t.forEachFieldDef((function(e,n){var r,o,u,s,c=e.aggregate,l=e.field;if(c)if("count"===c)a["*"]=null!==(r=a["*"])&&void 0!==r?r:{},a["*"].count=new Set([doe(e,{forAs:!0})]);else{if(Vee(c)||Gee(c)){var f=Vee(c)?"argmin":"argmax",d=c[f];a[d]=null!==(o=a[d])&&void 0!==o?o:{},a[d][f]=new Set([doe({op:f,field:d},{forAs:!0})])}else a[l]=null!==(u=a[l])&&void 0!==u?u:{},a[l][c]=new Set([doe(e,{forAs:!0})]);une(n)&&"unaggregated"===t.scaleDomain(n)&&(a[l]=null!==(s=a[l])&&void 0!==s?s:{},a[l].min=new Set([doe({field:l,aggregate:"min"},{forAs:!0})]),a[l].max=new Set([doe({field:l,aggregate:"max"},{forAs:!0})]))}else Rhe(i,n,e,t)})),i.size+U9(a).length===0?null:new n(e,i,a)):null}},{key:"makeFromTransform",value:function(e,t){var r,a,i,o,u=new Set,s={},c=Object(tr.a)(t.aggregate);try{for(c.s();!(o=c.n()).done;){var l=o.value,f=l.op,d=l.field,h=l.as;f&&("count"===f?(s["*"]=null!==(r=s["*"])&&void 0!==r?r:{},s["*"].count=new Set([h||doe(l,{forAs:!0})])):(s[d]=null!==(a=s[d])&&void 0!==a?a:{},s[d][f]=new Set([h||doe(l,{forAs:!0})])))}}catch(g){c.e(g)}finally{c.f()}var p,v=Object(tr.a)(null!==(i=t.groupby)&&void 0!==i?i:[]);try{for(v.s();!(p=v.n()).done;){var m=p.value;u.add(m)}}catch(g){v.e(g)}finally{v.f()}return u.size+U9(s).length===0?null:new n(e,u,s)}}]),n}(Hce),Lhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;Object(Rx.a)(this,n),(o=t.call(this,e)).model=r,o.name=a,o.data=i;var u,s=Object(tr.a)(Pte);try{for(s.s();!(u=s.n()).done;){var c=u.value,l=r.facet[c];if(l){var f=l.bin,d=l.sort;o[c]=Object.assign({name:r.getName("".concat(c,"_domain")),fields:[doe(l)].concat(Object(mo.a)(hne(f)?[doe(l,{binSuffix:"end"})]:[]))},Uie(d)?{sortField:d}:je(d)?{sortIndexField:Tde(l,c)}:{})}}}catch(h){s.e(h)}finally{s.f()}return o.childModel=r.child,o}return Object(Px.a)(n,[{key:"hash",value:function(){var e,t="Facet",n=Object(tr.a)(Pte);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(t+=" ".concat(r.charAt(0),":").concat(T9(this[r])))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"fields",get:function(){var e,t,n=[],r=Object(tr.a)(Pte);try{for(r.s();!(t=r.n()).done;){var a=t.value;(null===(e=this[a])||void 0===e?void 0:e.fields)&&n.push.apply(n,Object(mo.a)(this[a].fields))}}catch(i){r.e(i)}finally{r.f()}return n}},{key:"dependentFields",value:function(){var e,t=new Set(this.fields),n=Object(tr.a)(Pte);try{for(n.s();!(e=n.n()).done;){var r=e.value;this[r]&&(this[r].sortField&&t.add(this[r].sortField.field),this[r].sortIndexField&&t.add(this[r].sortIndexField))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){var e,t={},n=Object(tr.a)(Jte);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this.childModel.component.scales[r];if(a&&!a.merged){var i=a.get("type"),o=a.get("range");if(iie(i)&&cae(o)){var u=wpe(kpe(this.childModel,r));u?t[r]=u:Wre("Unknown field for ".concat(r,". Cannot calculate view size."))}}}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"assembleRowColumnHeaderData",value:function(e,t,n){var r={row:"y",column:"x"}[e],a=[],i=[],o=[];n&&n[r]&&(t?(a.push("distinct_".concat(n[r])),i.push("max")):(a.push(n[r]),i.push("distinct")),o.push("distinct_".concat(n[r])));var u=this[e],s=u.sortField,c=u.sortIndexField;if(s){var l=s.op,f=void 0===l?Pie:l,d=s.field;a.push(d),i.push(f),o.push(doe(s,{forAs:!0}))}else c&&(a.push(c),i.push("max"),o.push(c));return{name:this[e].name,source:null!==t&&void 0!==t?t:this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},a.length?{fields:a,ops:i,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(e){var t,n,r,a=this.model.layout.columns,i=this.model.component.layoutHeaders,o=[],u={},s=Object(tr.a)(Ide);try{for(s.s();!(r=s.n()).done;){var c,l=r.value,f=Object(tr.a)(Fde);try{for(f.s();!(c=f.n()).done;){var d,h=c.value,p=null!==(t=i[l]&&i[l][h])&&void 0!==t?t:[],v=Object(tr.a)(p);try{for(v.s();!(d=v.n()).done;){if((null===(n=d.value.axes)||void 0===n?void 0:n.length)>0){u[l]=!0;break}}}catch(x){v.e(x)}finally{v.f()}}}catch(x){f.e(x)}finally{f.f()}if(u[l]){var m='length(data("'.concat(this.facet.name,'"))'),g="row"===l?a?{signal:"ceil(".concat(m," / ").concat(a,")")}:1:a?{signal:"min(".concat(m,", ").concat(a,")")}:{signal:m};o.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:g}]})}}}catch(x){s.e(x)}finally{s.f()}var b=u.row,y=u.column;return(b||y)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,e)),o}},{key:"assemble",value:function(){var e,t,n=[],r=null,a=this.getChildIndependentFieldsWithStep(),i=this.column,o=this.row,u=this.facet;if(i&&o&&(a.x||a.y)){r="cross_".concat(this.column.name,"_").concat(this.row.name);var s=[].concat(null!==(e=a.x)&&void 0!==e?e:[],null!==(t=a.y)&&void 0!==t?t:[]),c=s.map((function(){return"distinct"}));n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:c}]})}for(var l=0,f=[Zee,$ee];l<f.length;l++){var d=f[l];this[d]&&n.push(this.assembleRowColumnHeaderData(d,r,a))}if(u){var h=this.assembleFacetHeaderData(a);h&&n.push.apply(n,Object(mo.a)(h))}return n}}]),n}(Hce);function Bhe(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function zhe(e,t){var n=K9(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=Bhe(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===t.indexOf("utc:")){var a=Bhe(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(a,"')")}return Wre(b.unrecognizedParse(t)),null}function Uhe(e){var t={};return k9(e.filter,(function(e){var n;if(wae(e)){var r=null;pae(e)?r=e.equal:yae(e)?r=e.range[0]:xae(e)&&(r=(null!==(n=e.oneOf)&&void 0!==n?n:e.in)[0]),r&&(Vre(r)?t[e.field]="date":yt(r)?t[e.field]="number":_t(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function Whe(e){var t={};function n(e){var n;Noe(e)?t[e.field]="date":"quantitative"===e.type&&(n=e.aggregate,_t(n)&&M9(["min","max"],n))?t[e.field]="number":tee(e.field)>1?e.field in t||(t[e.field]="flatten"):uoe(e)&&Uie(e.sort)&&tee(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Vpe(e)||Gpe(e))&&e.forEachFieldDef((function(t,r){if(ioe(t))n(t);else{var a=qte(r),i=e.fieldDef(a);n(Object.assign(Object.assign({},t),{type:i.type}))}})),Vpe(e)){var r=e.mark,a=e.markDef,i=e.encoding;if(Tee(r)&&!e.encoding.order){var o=i["horizontal"===a.orient?"y":"x"];Qie(o)&&"quantitative"===o.type&&!(o.field in t)&&(t[o.field]="number")}}return t}var Vhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e))._parse=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this._parse))}},{key:"hash",value:function(){return"Parse ".concat(T9(this._parse))}},{key:"parse",get:function(){return this._parse}},{key:"merge",value:function(e){this._parse=Object.assign(Object.assign({},this._parse),e.parse),e.remove()}},{key:"assembleFormatParse",value:function(){var e,t={},n=Object(tr.a)(U9(this._parse));try{for(n.s();!(e=n.n()).done;){var r=e.value,a=this._parse[r];1===tee(r)&&(t[r]=a)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"producedFields",value:function(){return new Set(U9(this._parse))}},{key:"dependentFields",value:function(){return new Set(U9(this._parse))}},{key:"assembleTransforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return U9(this._parse).filter((function(e){return!t||tee(e)>1})).map((function(t){var n=zhe(t,e._parse[t]);return n?{type:"formula",expr:n,as:eee(t)}:null})).filter((function(e){return null!==e}))}}],[{key:"makeExplicit",value:function(e,t,n){var r={},a=t.data;return!Yse(a)&&a&&a.format&&a.format.parse&&(r=a.format.parse),this.makeWithAncestors(e,r,{},n)}},{key:"makeWithAncestors",value:function(e,t,r,a){var i,o=Object(tr.a)(U9(r));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=a.getWithExplicit(u);void 0!==s.value&&(s.explicit||s.value===r[u]||"derived"===s.value||"flatten"===r[u]?delete r[u]:Wre(b.differentParse(u,r[u],s.value)))}}catch(x){o.e(x)}finally{o.f()}var c,l=Object(tr.a)(U9(t));try{for(l.s();!(c=l.n()).done;){var f=c.value,d=a.get(f);void 0!==d&&(d===t[f]?delete t[f]:Wre(b.differentParse(f,t[f],d)))}}catch(x){l.e(x)}finally{l.f()}var h=new Lse(t,r);a.copyAll(h);var p,v={},m=Object(tr.a)(U9(h.combine()));try{for(m.s();!(p=m.n()).done;){var g=p.value,y=h.get(g);null!==y&&(v[g]=y)}}catch(x){m.e(x)}finally{m.f()}return 0===U9(v).length||a.parseNothing?null:new n(e,v)}}]),n}(Hce),Ghe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e){return Object(Rx.a)(this,n),t.call(this,e)}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null)}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set([Tue])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:Tue}}}]),n}(Hce),qhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=R9(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:doe(e)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e,t=[],n=[],r=[],a=Object(tr.a)(this.transform.joinaggregate);try{for(a.s();!(e=a.n()).done;){var i=e.value;n.push(i.op),r.push(this.getDefaultName(i)),t.push(void 0===i.field?null:i.field)}}catch(u){a.e(u)}finally{a.f()}var o=this.transform.groupby;return Object.assign({type:"joinaggregate",as:r,ops:n,fields:t},void 0!==o?{groupby:o}:{})}}]),n}(Hce);var Hhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e))._stack=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this._stack))}},{key:"stack",get:function(){return this._stack}},{key:"addDimensions",value:function(e){var t;(t=this._stack.facetby).push.apply(t,Object(mo.a)(e))}},{key:"dependentFields",value:function(){var e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(T9(this._stack))}},{key:"getGroupbyFields",value:function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[doe(t,{binSuffix:"mid"})]:[doe(t,{}),doe(t,{binSuffix:"end"})]:[doe(t)]:null!==r&&void 0!==r?r:[]}},{key:"assemble",value:function(){var e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,a=t.stackField,i=t.stackby,o=t.sort,u=t.offset,s=t.impute,c=t.as;if(s&&r){var l=r.band,f=void 0===l?.5:l;r.bin&&e.push({type:"formula",expr:"".concat(f,"*")+doe(r,{expr:"datum"})+"+".concat(1-f,"*")+doe(r,{expr:"datum",binSuffix:"end"}),as:doe(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:a,groupby:[].concat(Object(mo.a)(i),Object(mo.a)(n)),key:doe(r,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[].concat(Object(mo.a)(this.getGroupbyFields()),Object(mo.a)(n)),field:a,sort:o,as:c,offset:u}),e}}],[{key:"makeFromTransform",value:function(e,t){var r=t.stack,a=t.groupby,i=t.as,o=t.offset,u=void 0===o?"zero":o,s=[],c=[];if(void 0!==t.sort){var l,f=Object(tr.a)(t.sort);try{for(f.s();!(l=f.n()).done;){var d=l.value;s.push(d.field),c.push(nee(d.order,"ascending"))}}catch(h){f.e(h)}finally{f.f()}}return new n(e,{stackField:r,groupby:a,offset:u,sort:{field:s,order:c},facetby:[],as:function(e){return je(e)&&e.every((function(e){return _t(e)}))&&e.length>1}(i)?i:_t(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"]})}},{key:"makeFromEncoding",value:function(e,t){var r=t.stack,a=t.encoding;if(!r)return null;var i,o=r.groupbyChannel,u=r.fieldChannel,s=r.offset,c=r.impute;o&&(i=Ooe(a[o]));var l,f=function(e){return e.stack.stackBy.reduce((function(e,t){var n=doe(t.fieldDef);return n&&e.push(n),e}),[])}(t),d=t.encoding.order;return l=je(d)||Qie(d)?qoe(d):f.reduce((function(e,t){return e.field.push(t),e.order.push("y"===u?"descending":"ascending"),e}),{field:[],order:[]}),new n(e,{dimensionFieldDef:i,stackField:t.vgField(u),facetby:[],stackby:f,sort:l,offset:s,impute:c,as:[t.vgField(u,{suffix:"start",forAs:!0}),t.vgField(u,{suffix:"end",forAs:!0})]})}}]),n}(Hce),Xhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"addDimensions",value:function(e){this.transform.groupby=R9(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function(){var e,t,n=new Set;return(null!==(e=this.transform.groupby)&&void 0!==e?e:[]).forEach(n.add,n),(null!==(t=this.transform.sort)&&void 0!==t?t:[]).forEach((function(e){return n.add(e.field)})),this.transform.window.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach(n.add,n),n}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(e){var t;return null!==(t=e.as)&&void 0!==t?t:doe(e)}},{key:"hash",value:function(){return"WindowTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e,t,n=[],r=[],a=[],i=[],o=Object(tr.a)(this.transform.window);try{for(o.s();!(t=o.n()).done;){var u=t.value;r.push(u.op),a.push(this.getDefaultName(u)),i.push(void 0===u.param?null:u.param),n.push(void 0===u.field?null:u.field)}}catch(g){o.e(g)}finally{o.f()}var s=this.transform.frame,c=this.transform.groupby;if(s&&null===s[0]&&null===s[1]&&r.every((function(e){return qee(e)})))return Object.assign({type:"joinaggregate",as:a,ops:r,fields:n},void 0!==c?{groupby:c}:{});var l=[],f=[];if(void 0!==this.transform.sort){var d,h=Object(tr.a)(this.transform.sort);try{for(h.s();!(d=h.n()).done;){var p=d.value;l.push(p.field),f.push(null!==(e=p.order)&&void 0!==e?e:"ascending")}}catch(g){h.e(g)}finally{h.f()}}var v={field:l,order:f},m=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:i,as:a,ops:r,fields:n,sort:v},void 0!==m?{ignorePeers:m}:{}),void 0!==c?{groupby:c}:{}),void 0!==s?{frame:s}:{})}}]),n}(Hce),Yhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){var t=e.parent;if(e instanceof Vhe){if(Mhe(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof Vhe)this.setMutated(),t.merge(e);else{if(B9(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}]),n}(Ihe),Khe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"mergeNodes",value:function(e,t){var n,r=t.shift(),a=Object(tr.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;e.removeChild(i),i.parent=r,i.remove()}}catch(o){a.e(o)}finally{a.f()}}},{key:"run",value:function(e){for(var t=e.children.map((function(e){return e.hash()})),n={},r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);var a,i=Object(tr.a)(U9(n));try{for(i.s();!(a=i.n()).done;){var o=a.value;n[o].length>1&&(this.setMutated(),this.mergeNodes(e,n[o]))}}catch(l){i.e(l)}finally{i.f()}var u,s=Object(tr.a)(e.children);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.run(c)}}catch(l){s.e(l)}finally{s.f()}return this.mutatedFlag}}]),n}(Fhe),$he=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){return e instanceof Xce||e.numChildren()>0||e instanceof Lhe||(this.setMutated(),e.remove()),this.flags}}]),n}(Ihe),Zhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){var e;return Object(Rx.a)(this,n),(e=t.apply(this,arguments)).fields=new Set,e.prev=null,e}return Object(Px.a)(n,[{key:"run",value:function(e){if(this.setContinue(),e instanceof Yce){var t=e.producedFields();P9(t,this.fields)?(this.setMutated(),this.prev.remove()):this.fields=new Set([].concat(Object(mo.a)(this.fields),Object(mo.a)(t))),this.prev=e}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),n}(Ihe),Jhe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){this.setContinue();var t,n=e.parent.children.filter((function(e){return e instanceof Yce})),r=n.pop(),a=Object(tr.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.setMutated(),r.merge(i)}}catch(o){a.e(o)}finally{a.f()}return this.flags}}]),n}(Ihe);function Qhe(e){if(e instanceof Lhe)if(1!==e.numChildren()||e.children[0]instanceof Xce){var t=e.model.component.data.main;epe(t);var n,r=(u=e,function e(t){if(!(t instanceof Lhe)){var n=t.clone();if(n instanceof Xce){var r=upe+n.getSource();n.setSource(r),u.model.component.data.outputNodes[r]=n}else(n instanceof Phe||n instanceof Hhe||n instanceof Xhe||n instanceof qhe)&&n.addDimensions(u.fields);var a,i=Object(tr.a)(t.children.flatMap(e));try{for(i.s();!(a=i.n()).done;)a.value.parent=n}catch(o){i.e(o)}finally{i.f()}return[n]}return t.children.flatMap(e)}),a=e.children.map(r).flat(),i=Object(tr.a)(a);try{for(i.s();!(n=i.n()).done;){n.value.parent=t}}catch(s){i.e(s)}finally{i.f()}}else{var o=e.children[0];(o instanceof Phe||o instanceof Hhe||o instanceof Xhe||o instanceof qhe)&&o.addDimensions(e.fields),o.swapWithParent(),Qhe(e)}else e.children.map(Qhe);var u}function epe(e){if(e instanceof Xce&&e.type===Jse&&1===e.numChildren()){var t=e.children[0];t instanceof Lhe||(t.swapWithParent(),epe(e))}}var tpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.call(this)}return Object(Px.a)(n,[{key:"run",value:function(e){e instanceof Xce&&!e.isRequired()&&(this.setMutated(),e.remove());var t,n=Object(tr.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(Fhe),npe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e){var r;return Object(Rx.a)(this,n),(r=t.call(this)).requiresSelectionId=e&&Dle(e),r}return Object(Px.a)(n,[{key:"run",value:function(e){e instanceof Ghe&&(this.requiresSelectionId&&(Mhe(e.parent)||e.parent instanceof Phe||e.parent instanceof Vhe)||(this.setMutated(),e.remove()));var t,n=Object(tr.a)(e.children);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.run(r)}}catch(a){n.e(a)}finally{n.f()}return this.mutatedFlag}}]),n}(Fhe),rpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){var t=e.parent,n=Object(mo.a)(t.children),r=t.children.filter((function(e){return e instanceof Vhe}));if(t.numChildren()>1&&r.length>=1){var a,i={},o=new Set,u=Object(tr.a)(r);try{for(u.s();!(a=u.n()).done;){var s,c=a.value.parse,l=Object(tr.a)(U9(c));try{for(l.s();!(s=l.n()).done;){var f=s.value;f in i?i[f]!==c[f]&&o.add(f):i[f]=c[f]}}catch(_){l.e(_)}finally{l.f()}}}catch(_){u.e(_)}finally{u.f()}var d,h=Object(tr.a)(o);try{for(h.s();!(d=h.n()).done;){delete i[d.value]}}catch(_){h.e(_)}finally{h.f()}if(!z9(i)){this.setMutated();var p,v=new Vhe(t,i),m=Object(tr.a)(n);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g instanceof Vhe){var b,y=Object(tr.a)(U9(i));try{for(y.s();!(b=y.n()).done;){var x=b.value;delete g.parse[x]}}catch(_){y.e(_)}finally{y.f()}}t.removeChild(g),g.parent=v,g instanceof Vhe&&0===U9(g.parse).length&&g.remove()}}catch(_){m.e(_)}finally{m.f()}}}return this.setContinue(),this.flags}}]),n}(Ihe),ape=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){var t,n=e.parent,r=n.children.filter((function(e){return e instanceof Phe})),a={},i=Object(tr.a)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value,u=T9(o.groupBy);u in a||(a[u]=[]),a[u].push(o)}}catch(v){i.e(v)}finally{i.f()}var s,c=Object(tr.a)(U9(a));try{for(c.s();!(s=c.n()).done;){var l=a[s.value];if(l.length>1){var f,d=l.pop(),h=Object(tr.a)(l);try{for(h.s();!(f=h.n()).done;){var p=f.value;d.merge(p)&&(n.removeChild(p),p.parent=d,p.remove(),this.setMutated())}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){c.e(v)}finally{c.f()}return this.setContinue(),this.flags}}]),n}(Ihe),ipe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e){var r;return Object(Rx.a)(this,n),(r=t.call(this)).model=e,r}return Object(Px.a)(n,[{key:"run",value:function(e){var t,n=e.parent,r=!(Mhe(n)||n instanceof sde||n instanceof Vhe||n instanceof Ghe),a=[],i=[],o=Object(tr.a)(n.children);try{for(o.s();!(t=o.n()).done;){var u=t.value;u instanceof Ehe&&(r&&!B9(n.producedFields(),u.dependentFields())?a.push(u):i.push(u))}}catch(m){o.e(m)}finally{o.f()}if(a.length>0){var s,c=a.pop(),l=Object(tr.a)(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.merge(f,this.model.renameSignal.bind(this.model))}}catch(m){l.e(m)}finally{l.f()}this.setMutated(),n instanceof Ehe?n.merge(c,this.model.renameSignal.bind(this.model)):c.swapWithParent()}if(i.length>1){var d,h=i.pop(),p=Object(tr.a)(i);try{for(p.s();!(d=p.n()).done;){var v=d.value;h.merge(v,this.model.renameSignal.bind(this.model))}}catch(m){p.e(m)}finally{p.f()}this.setMutated()}return this.setContinue(),this.flags}}]),n}(Ihe),ope=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"run",value:function(e){var t=e.parent,n=Object(mo.a)(t.children);if(!D9(n,(function(e){return e instanceof Xce}))||t.numChildren()<=1)return this.setContinue(),this.flags;var r,a,i=[],o=Object(tr.a)(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u instanceof Xce){for(var s=u;1===s.numChildren();){var c=s.children[0];if(!(c instanceof Xce))break;s=c}i.push.apply(i,Object(mo.a)(s.children)),r?(t.removeChild(u),u.parent=r.parent,r.parent.removeChild(r),r.parent=s,this.setMutated()):r=s}else i.push(u)}}catch(h){o.e(h)}finally{o.f()}if(i.length){this.setMutated();var l,f=Object(tr.a)(i);try{for(f.s();!(l=f.n()).done;){var d=l.value;d.parent.removeChild(d),d.parent=r}}catch(h){f.e(h)}finally{f.f()}}return this.setContinue(),this.flags}}]),n}(Ihe),upe="scale_";function spe(e){var t=[];function n(e){if(0===e.numChildren())t.push(e);else{var r,a=Object(tr.a)(e.children);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}}}var r,a=Object(tr.a)(e);try{for(a.s();!(r=a.n()).done;){n(r.value)}}catch(i){a.e(i)}finally{a.f()}return t}function cpe(e){return e}function lpe(e,t){return t.map((function(t){if(e instanceof Ihe){var n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)})).some(cpe)}function fpe(e,t){var n=e.sources,r=new Set;return r.add(lpe(new tpe,n)),r.add(lpe(new npe(t),n)),n=n.filter((function(e){return e.numChildren()>0})),r.add(lpe(new $he,spe(n))),n=n.filter((function(e){return e.numChildren()>0})),r.add(lpe(new Yhe,spe(n))),r.add(lpe(new ipe(t),spe(n))),r.add(lpe(new Zhe,spe(n))),r.add(lpe(new rpe,spe(n))),r.add(lpe(new ape,spe(n))),r.add(lpe(new Jhe,spe(n))),r.add(lpe(new Khe,n)),r.add(lpe(new ope,spe(n))),e.sources=n,r.has(!0)}function dpe(e,t){Ahe(e.sources);for(var n=0,r=0,a=0;a<5&&fpe(e,t);a++)n++;e.sources.map(Qhe);for(var i=0;i<5&&fpe(e,t);i++)r++;Ahe(e.sources),5===Math.max(n,r)&&Wre("Maximum optimization runs(".concat(5,") reached."))}var hpe=function(){function e(t){Object(Rx.a)(this,e),Object.defineProperty(this,"signal",{enumerable:!0,get:t})}return Object(Px.a)(e,null,[{key:"fromName",value:function(t,n){return new e((function(){return t(n)}))}}]),e}();function ppe(e){Vpe(e)?function(e){var t,n=e.component.scales,r=Object(tr.a)(U9(n));try{for(r.s();!(t=r.n()).done;){var a=t.value,i=vpe(e,a);if(n[a].setWithExplicit("domains",i),ype(e,a),e.component.data.isFaceted){for(var o=e;!Gpe(o)&&o.parent;)o=o.parent;if("shared"===o.component.resolve.scale[a]){var u,s=Object(tr.a)(i.value);try{for(s.s();!(u=s.n()).done;){var c=u.value;lae(c)&&(c.data=upe+c.data.replace(upe,""))}}catch(l){s.e(l)}finally{s.f()}}}}}catch(l){r.e(l)}finally{r.f()}}(e):function(e){var t,n=Object(tr.a)(e.children);try{for(n.s();!(t=n.n()).done;){ppe(t.value)}}catch(h){n.e(h)}finally{n.f()}var r,a=e.component.scales,i=Object(tr.a)(U9(a));try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=void 0,c=null,l=Object(tr.a)(e.children);try{for(l.s();!(o=l.n()).done;){var f=o.value.component.scales[u];if(f){s=void 0===s?f.getWithExplicit("domains"):Vse(s,f.getWithExplicit("domains"),"domains","scale",_pe);var d=f.get("selectionExtent");c&&d&&c.selection!==d.selection&&Wre("The same selection must be used to override scale domains in a layered view."),c=d}}}catch(h){l.e(h)}finally{l.f()}a[u].setWithExplicit("domains",s),c&&a[u].set("selectionExtent",c,!0)}}catch(h){i.e(h)}finally{i.f()}}(e)}function vpe(e,t){var n=e.getScaleComponent(t).get("type"),r=e.encoding,a=function(e,t,n,r){if("unaggregated"===e){var a=xpe(t,n),i=a.valid,o=a.reason;if(!i)return void Wre(o)}else if(void 0===e&&r.useUnaggregatedDomain&&xpe(t,n).valid)return"unaggregated";return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return a!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:a})),"x"===t&&Soe(r.x2)?Soe(r.x)?Vse(gpe(n,a,e,"x"),gpe(n,a,e,"x2"),"domain","scale",_pe):gpe(n,a,e,"x2"):"y"===t&&Soe(r.y2)?Soe(r.y)?Vse(gpe(n,a,e,"y"),gpe(n,a,e,"y2"),"domain","scale",_pe):gpe(n,a,e,"y2"):gpe(n,a,e,t)}function mpe(e,t,n){var r,a=null===(r=oae(n))||void 0===r?void 0:r.unit;return"temporal"===t||a?function(e,t,n){return e.map((function(e){var r=Moe(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}(e,t,a):[e]}function gpe(e,t,n,r){var a=Soe(n.encoding[r]),i=a.type,o=a.timeUnit;if(function(e){return e&&e.unionWith}(t)){var u=gpe(e,void 0,n,r),s=mpe(t.unionWith,i,o);return Bse([].concat(Object(mo.a)(u.value),Object(mo.a)(s)))}if(sae(t))return Bse([t]);if(t&&"unaggregated"!==t&&!cie(t))return Bse(mpe(t,i,o));var c=n.stack;if(c&&r===c.fieldChannel){if("normalize"===c.offset)return zse([[0,1]]);var l=n.requestDataName(Jse);return zse([{data:l,field:n.vgField(r,{suffix:"start"})},{data:l,field:n.vgField(r,{suffix:"end"})}])}var f=une(r)&&Qie(a)?function(e,t,n){if(!iie(n))return;var r=e.fieldDef(t),a=r.sort;if(Wie(a))return{op:"min",field:Tde(r,t),order:"ascending"};var i=e.stack,o=i?[].concat(Object(mo.a)(i.groupbyField?[i.groupbyField]:[]),Object(mo.a)(i.stackBy.map((function(e){return e.fieldDef.field})))):void 0;if(Uie(a))return bpe(a,i&&!M9(o,a.field));if(zie(a)){var u=a.encoding,s=a.order,c=e.fieldDef(u),l=c.aggregate,f=c.field,d=i&&!M9(o,f);if(Vee(l)||Gee(l))return bpe({field:doe(c),order:s},d);if(qee(l)||!l)return bpe({op:l,field:f,order:s},d)}else{if("descending"===a)return{op:"min",field:e.vgField(t),order:"descending"};if(M9(["ascending",void 0],a))return!0}return}(n,r,e):void 0;if(toe(a))return zse(mpe([a.datum],i,o));var d=a;if("unaggregated"===t){var h=n.requestDataName(Jse),p=a.field;return zse([{data:h,field:doe({field:p,aggregate:"min"})},{data:h,field:doe({field:p,aggregate:"max"})}])}if(hne(d.bin)){if(iie(e))return zse("bin-ordinal"===e?[]:[{data:G9(f)?n.requestDataName(Jse):n.requestDataName(Qse),field:n.vgField(r,Ioe(d,r)?{binSuffix:"range"}:{}),sort:!0!==f&&Ee(f)?f:{field:n.vgField(r,{}),op:"min"}}]);var v=d.bin;if(hne(v)){var m=She(n,d.field,v);return zse([new hpe((function(){var e=n.getSignalName(m);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return zse([{data:n.requestDataName(Jse),field:n.vgField(r,{})}])}if(d.timeUnit&&M9(["time","utc"],e)&&Kie(r,d,Vpe(n)?n.encoding[Xte(r)]:void 0,n.stack,n.markDef,n.config)){var g=n.requestDataName(Jse);return zse([{data:g,field:n.vgField(r)},{data:g,field:n.vgField(r,{suffix:"end"})}])}return zse(f?[{data:G9(f)?n.requestDataName(Jse):n.requestDataName(Qse),field:n.vgField(r),sort:f}]:[{data:n.requestDataName(Jse),field:n.vgField(r)}])}function bpe(e,t){var n=e.op,r=e.field,a=e.order;return Object.assign(Object.assign({op:null!==n&&void 0!==n?n:t?"sum":Pie},r?{field:J9(r)}:{}),a?{order:a}:{})}function ype(e,t){var n,r=e.component.scales[t],a=e.specifiedScales[t].domain,i=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,o=cie(a)&&a,u=vne(i)&&mne(i.extent)&&i.extent;(o||u)&&r.set("selectionExtent",null!==o&&void 0!==o?o:u,!0)}function xpe(e,t){var n=e.aggregate,r=e.type;return n?_t(n)&&!Kee[n]?{valid:!1,reason:b.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:b.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:b.unaggregateDomainHasNoEffectForRawField(e)}}function _pe(e,t,n,r){return e.explicit&&t.explicit&&Wre(b.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[].concat(Object(mo.a)(e.value),Object(mo.a)(t.value))}}function wpe(e){if(lae(e)&&_t(e.field))return e.field;if(function(e){return!je(e)&&"fields"in e&&!("data"in e)}(e)){var t,n,r=Object(tr.a)(e.fields);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(lae(a)&&_t(a.field))if(t){if(t!==a.field)return Wre(b.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=a.field}}catch(o){r.e(o)}finally{r.f()}return Wre(b.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!je(e)&&"fields"in e&&"data"in e}(e)){Wre(b.FACETED_INDEPENDENT_SAME_SOURCE);var i=e.fields[0];return _t(i)?i:void 0}}function kpe(e,t){return function(e){var t=R9(e.map((function(e){return lae(e)?(e.sort,h9(e,["sort"])):e})),T9),n=R9(e.map((function(e){if(lae(e)){var t=e.sort;return void 0===t||G9(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),T9);if(0!==t.length){if(1===t.length){var r=e[0];if(lae(r)&&n.length>0){var a=n[0];if(n.length>1)Wre(b.MORE_THAN_ONE_SORT),a=!0;else if(Ee(a)&&"field"in a){var i=a.field;r.field===i&&(a=!a.order||{order:a.order})}return Object.assign(Object.assign({},r),{sort:a})}return r}var o,u=R9(n.map((function(e){return G9(e)||!("op"in e)||e.op in Wee?e:(Wre(b.domainSortDropped(e)),!0)})),T9);1===u.length?o=u[0]:u.length>1&&(Wre(b.MORE_THAN_ONE_SORT),o=!0);var s=R9(e.map((function(e){return lae(e)?e.data:null})),(function(e){return e}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:t.map((function(e){return e.field}))},o?{sort:o}:{}):Object.assign({fields:t},o?{sort:o}:{})}}(e.component.scales[t].get("domains").map((function(t){return lae(t)&&(t.data=e.lookupDataSource(t.data)),t})))}function Ope(e){return Hpe(e)||qpe(e)?e.children.reduce((function(e,t){return e.concat(Ope(t))}),Spe(e)):Spe(e)}function Spe(e){return U9(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var a,i=r.combine(),o=i.name,u=i.type,s=i.selectionExtent,c=(i.domains,i.range,i.reverse),l=h9(i,["name","type","selectionExtent","domains","range","reverse"]),f=function(e,t,n){if(Qte(n)&&cae(e))return{step:{signal:t+"_step"}};return e}(i.range,o,n);s&&(a=function(e,t){var n=t.selection;return{signal:lde(e.getSelectionComponent(n,q9(n)),t)}}(e,s));var d=kpe(e,n);return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:o,type:u},d?{domain:d}:{}),a?{domainRaw:a}:{}),{range:f}),void 0!==c?{reverse:c}:{}),l)),t}),[])}var jpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,{},{name:e})).merged=!1,a.setWithExplicit("type",r),a}return Object(Px.a)(n,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||D9(this.get("domains"),(function(e){return je(e)&&2===e.length&&e[0]<=0&&e[1]>=0}))}}]),n}(Lse),Epe=["range","scheme"];function Cpe(e){return"x"===e?"width":"y"===e?"height":void 0}function Ape(e,t){var n=e.fieldDef(t);if(n&&n.bin&&hne(n.bin)){var r=She(e,n.field,n.bin),a=Cpe(t),i=e.getName(a);return new hpe((function(){var t=e.getSignalName(r),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(i)," / (").concat(n,")")}))}}function Tpe(e,t){var n,r=t.specifiedScales[e],a=t.size,i=t.getScaleComponent(e).get("type"),o=Object(tr.a)(Epe);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(void 0!==r[u]){var s=hie(i,u),c=pie(e,u);if(s)if(c)Wre(c);else switch(u){case"range":return je(r.range)&&Qte(e)?Bse(r.range.map((function(e){if("width"===e||"height"===e){var n=t.getName(e),r=t.getSignalName.bind(t);return hpe.fromName(r,n)}return e}))):Bse(r.range);case"scheme":return Bse(Npe(r[u]))}else Wre(b.scalePropertyNotWorkWithScaleType(i,u,e))}}}catch(d){o.e(d)}finally{o.f()}if(e===Qee||e===ete){var l=e===Qee?"width":"height",f=a[l];if(Pue(f)){if(iie(i))return Bse({step:f.step});Wre(b.stepDropped(l))}}return zse(function(e,t){var n=t.size,r=t.config,a=t.mark,i=t.encoding,o=t.getSignalName.bind(t),u=Soe(i[e]).type,s=t.getScaleComponent(e).get("type"),c=t.specifiedScales[e],l=c.domain,f=c.domainMid;switch(e){case Qee:case ete:if(M9(["point","band"],s))if(e!==Qee||n.width){if(e===ete&&!n.height){var d=Wue(r.view,"height");if(Pue(d))return d}}else{var h=Wue(r.view,"width");if(Pue(h))return h}var p=Cpe(e),v=t.getName(p);return e===ete&&oie(s)?[hpe.fromName(o,v),0]:[0,hpe.fromName(o,v)];case vte:var m=Mpe(a,t.component.scales[e].get("zero"),r),g=function(e,t,n,r){var a={x:Ape(n,"x"),y:Ape(n,"y")};switch(e){case"bar":case"tick":if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;var i=Ipe(t,a,r.view);return yt(i)?i-1:new hpe((function(){return"".concat(i.signal," - 1")}));case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":if(r.scale.maxSize)return r.scale.maxSize;var o=Ipe(t,a,r.view);return yt(o)?Math.pow(Dpe*o,2):new hpe((function(){return"pow(".concat(Dpe," * ").concat(o.signal,", 2)")}))}throw new Error(b.incompatibleChannel("size",e))}(a,n,t,r);return sie(s)?function(e,t,n){var r=function(){var r=Boe(t),a=Boe(e),i="(".concat(r," - ").concat(a,") / (").concat(n," - 1)");return"sequence(".concat(a,", ").concat(r," + ").concat(i,", ").concat(i,")")};return sae(t)?new hpe(r):{signal:r()}}(m,g,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&je(n)?n.length+1:(Wre(b.domainRequiredForThresholdScale(r)),3)}}(s,r,l,e)):[m,g];case ite:return[0,2*Math.PI];case mte:return[0,360];case rte:return[0,new hpe((function(){var e=t.getSignalName("width"),n=t.getSignalName("height");return"min(".concat(e,",").concat(n,")/2")}))];case xte:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case _te:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case pte:return"symbol";case fte:case dte:case hte:return"ordinal"===s?"nominal"===u?"category":"ordinal":void 0!==f?"diverging":"rect"===a||"geoshape"===a?"heatmap":"ramp";case gte:case bte:case yte:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}(e,t))}function Npe(e){return function(e){return!_t(e)&&!!e.name}(e)?Object.assign({scheme:e.name},C9(e,["name"])):{scheme:e}}function Mpe(e,t,n){if(t)return sae(t)?{signal:"".concat(t.signal," ? 0 : ").concat(Mpe(e,!1,n))}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(b.incompatibleChannel("size",e))}var Dpe=.95;function Ipe(e,t,n){var r=Pue(e.width)?e.width.step:Uue(n,"width"),a=Pue(e.height)?e.height.step:Uue(n,"height");return t.x||t.y?new hpe((function(){var e=[t.x?t.x.signal:r,t.y?t.y.signal:a];return"min(".concat(e.join(", "),")")})):Math.min(r,a)}function Fpe(e,t){Vpe(e)?function(e,t){var n,r=e.component.scales,a=e.config,i=e.encoding,o=e.markDef,u=e.specifiedScales,s=Object(tr.a)(U9(r));try{for(s.s();!(n=s.n()).done;){var c=n.value,l=u[c],f=r[c],d=e.getScaleComponent(c),h=Soe(i[c]),p=l[t],v=d.get("type"),m=d.get("padding"),g=d.get("paddingInner"),y=hie(v,t),x=pie(c,t);if(void 0!==p&&(y?x&&Wre(x):Wre(b.scalePropertyNotWorkWithScaleType(v,t,c))),y&&void 0===x)if(void 0!==p)f.copyKeyFromObject(t,l);else{var _=t in Rpe?Rpe[t]({model:e,channel:c,fieldOrDatumDef:h,scaleType:v,scalePadding:m,scalePaddingInner:g,domain:l.domain,markDef:o,config:a}):a.scale[t];void 0!==_&&f.set(t,_,!1)}}}catch(w){s.e(w)}finally{s.f()}}(e,t):Lpe(e,t)}var Rpe={bins:function(e){var t=e.model,n=e.fieldOrDatumDef;return Qie(n)?function(e,t){var n=t.bin;if(hne(n)){var r=She(e,t.field,n);return new hpe((function(){return e.getSignalName(r)}))}if(pne(n)&&vne(n)&&void 0!==n.step)return{step:n.step};return}(t,n):void 0},interpolate:function(e){return function(e,t){if(M9([fte,dte,hte],e)&&"nominal"!==t)return"hcl";return}(e.channel,e.fieldOrDatumDef.type)},nice:function(e){return function(e,t,n){var r;if((null===(r=Ooe(n))||void 0===r?void 0:r.bin)||M9([zae,Uae],e))return;return t in Zte||void 0}(e.scaleType,e.channel,e.fieldOrDatumDef)},padding:function(e){var t=e.channel,n=e.scaleType,r=e.fieldOrDatumDef,a=e.markDef,i=e.config;return function(e,t,n,r,a,i){if(e in Zte){if(uie(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=a.type,u=a.orient;if("bar"===o&&(!Qie(r)||!r.bin&&!r.timeUnit)&&("vertical"===u&&"x"===e||"horizontal"===u&&"y"===e))return i.continuousBandSize}if(t===qae)return n.pointPadding}return}(t,n,i.scale,r,a,i.bar)},paddingInner:function(e){var t=e.scalePadding,n=e.channel,r=e.markDef,a=e.config;return function(e,t,n,r){if(void 0!==e)return;if(t in Zte){var a=r.bandPaddingInner,i=r.barBandPaddingInner,o=r.rectBandPaddingInner;return nee(a,"bar"===n?i:o)}return}(t,n,r.type,a.scale)},paddingOuter:function(e){var t=e.scalePadding,n=e.channel,r=e.scaleType,a=e.markDef,i=e.scalePaddingInner,o=e.config;return function(e,t,n,r,a,i){if(void 0!==e)return;if(t in Zte){if(n===Hae)return nee(i.bandPaddingOuter,sae(a)?{signal:"".concat(a.signal,"/2")}:a/2)}return}(t,n,r,a.type,i,o.scale)},reverse:function(e){var t=e.fieldOrDatumDef,n=e.scaleType,r=e.channel,a=e.config;return function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return oie(e)&&"descending"===t?sae(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse;if(oie(e)&&"descending"===t)return!0;return}(n,Qie(t)?t.sort:void 0,r,a.scale)},zero:function(e){return function(e,t,n,r,a){if(n&&"unaggregated"!==n&&oie(a)){if(je(n)){var i=n[0],o=n[n.length-1];if(i<=0&&o>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!sie(a))return!0;if((!Qie(t)||!t.bin)&&M9([].concat(Object(mo.a)(Jte),Object(mo.a)(tne)),e)){var u=r.orient;return!M9(["bar","area","line","trail"],r.type)||!("horizontal"===u&&"y"===e||"vertical"===u&&"x"===e)}return!1}(e.channel,e.fieldOrDatumDef,e.domain,e.markDef,e.scaleType)}};function Ppe(e){Vpe(e)?function(e){var t,n=e.component.scales,r=Object(tr.a)(one);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=n[a];if(i){var o=Tpe(a,e);i.setWithExplicit("range",o)}}}catch(u){r.e(u)}finally{r.f()}}(e):Lpe(e,"range")}function Lpe(e,t){var n,r=e.component.scales,a=Object(tr.a)(e.children);try{for(a.s();!(n=a.n()).done;){var i=n.value;"range"===t?Ppe(i):Fpe(i,t)}}catch(h){a.e(h)}finally{a.f()}var o,u=Object(tr.a)(U9(r));try{for(u.s();!(o=u.n()).done;){var s,c=o.value,l=void 0,f=Object(tr.a)(e.children);try{for(f.s();!(s=f.n()).done;){var d=s.value.component.scales[c];if(d)l=Vse(l,d.getWithExplicit(t),t,"scale",Use((function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}catch(h){f.e(h)}finally{f.f()}r[c].setWithExplicit(t,l)}}catch(h){u.e(h)}finally{u.f()}}function Bpe(e,t,n,r){var a=function(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(Fte(e)||"discrete"===fne(e))return"shape"===e&&"ordinal"===t.type&&Wre(b.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in Zte){if(M9(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&e in ene)return"band";return void 0!==t.band||soe(t)&&(null===(r=t.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return Fte(e)?"time":"discrete"===fne(e)?(Wre(b.discreteChannelCannotEncode(e,"temporal")),"ordinal"):Qie(t)&&t.timeUnit&&oae(t.timeUnit).utc?"utc":"time";case"quantitative":return Fte(e)?Qie(t)&&hne(t.bin)?"bin-ordinal":"linear":"discrete"===fne(e)?(Wre(b.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(b.invalidFieldType(t.type))}(t,n,r),i=e.type;return une(t)?void 0!==i?mie(t,i)?Qie(n)&&!vie(i,n.type)?(Wre(b.scaleTypeNotWorkWithFieldDef(i,a)),a):i:(Wre(b.scaleTypeNotWorkWithChannel(t,i,a)),a):a:null}function zpe(e){Vpe(e)?e.component.scales=function(e){var t=e.encoding,n=e.mark;return one.reduce((function(r,a){var i=Soe(t[a]);if(i&&n===Aee&&a===pte&&i.type===Dae)return r;var o=i&&i.scale;if(i&&null!==o&&!1!==o){var u=Bpe(o=null!==o&&void 0!==o?o:{},a,i,n);r[a]=new jpe(e.scaleName(a+"",!0),{value:u,explicit:o.type===u})}return r}),{})}(e):e.component.scales=function(e){var t,n,r=e.component.scales={},a={},i=e.component.resolve,o=Object(tr.a)(e.children);try{for(o.s();!(n=o.n()).done;){var u=n.value;zpe(u);var s,c=Object(tr.a)(U9(u.component.scales));try{for(c.s();!(s=c.n()).done;){var l=s.value;if(i.scale[l]=null!==(t=i.scale[l])&&void 0!==t?t:Jde(l,e),"shared"===i.scale[l]){var f=a[l],d=u.component.scales[l].getWithExplicit("type");f?Kae(f.value,d.value)?a[l]=Vse(f,d,"type","scale",Upe):(i.scale[l]="independent",delete a[l]):a[l]=d}}}catch(w){c.e(w)}finally{c.f()}}}catch(w){o.e(w)}finally{o.f()}var h,p=Object(tr.a)(U9(a));try{for(p.s();!(h=p.n()).done;){var v=h.value,m=e.scaleName(v,!0),g=a[v];r[v]=new jpe(m,g);var b,y=Object(tr.a)(e.children);try{for(y.s();!(b=y.n()).done;){var x=b.value,_=x.component.scales[v];_&&(x.renameScale(_.get("name"),m),_.merged=!0)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){p.e(w)}finally{p.f()}return r}(e)}var Upe=Use((function(e,t){return Zae(e)-Zae(t)}));var Wpe=function(){function e(){Object(Rx.a)(this,e),this.nameMap={}}return Object(Px.a)(e,[{key:"rename",value:function(e,t){this.nameMap[e]=t}},{key:"has",value:function(e){return void 0!==this.nameMap[e]}},{key:"get",value:function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}]),e}();function Vpe(e){return"unit"===(null===e||void 0===e?void 0:e.type)}function Gpe(e){return"facet"===(null===e||void 0===e?void 0:e.type)}function qpe(e){return"concat"===(null===e||void 0===e?void 0:e.type)}function Hpe(e){return"layer"===(null===e||void 0===e?void 0:e.type)}var Xpe=function(){function e(t,n,r,a,i,o,u){var s,c,l=this;Object(Rx.a)(this,e),this.type=n,this.parent=r,this.config=i,this.view=u,this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=l.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=l.lookupDataSource(e.from.facet.data)),e},this.parent=r,this.config=i,this.name=null!==(s=t.name)&&void 0!==s?s:a,this.title=Roe(t.title)?{text:t.title}:t.title,this.scaleNameMap=r?r.scaleNameMap:new Wpe,this.projectionNameMap=r?r.projectionNameMap:new Wpe,this.signalNameMap=r?r.signalNameMap:new Wpe,this.data=t.data,this.description=t.description,this.transforms=(null!==(c=t.transform)&&void 0!==c?c:[]).map((function(e){return ece(e)?{filter:O9(e.filter,Eae)}:e})),this.layout="layer"===n||"unit"===n?{}:function(e,t,n){var r,a,i=n[t],o={},u=i.spacing,s=i.columns;void 0!==u&&(o.spacing=u),void 0!==s&&(qie(e)&&!Vie(e.facet)||Iue(e))&&(o.columns=s),Fue(e)&&(o.columns=1);var c,l=Object(tr.a)(Bue);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(void 0!==e[f])if("spacing"===f){var d=e[f];o[f]=yt(d)?d:{row:null!==(r=d.row)&&void 0!==r?r:u,column:null!==(a=d.column)&&void 0!==a?a:u}}else o[f]=e[f]}}catch(h){l.e(h)}finally{l.f()}return o}(t,n,i),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:qie(t)||r&&r.component.data.isFaceted&&void 0===t.data},layoutSize:new Lse,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?j9(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(Px.a)(e,[{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreRange;zpe(e),ppe(e);var n,r=Object(tr.a)(die);try{for(r.s();!(n=r.n()).done;){Fpe(e,n.value)}}catch(a){r.e(a)}finally{r.f()}t||Ppe(e)}(this)}},{key:"parseProjection",value:function(){whe(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){dhe(this)}},{key:"assembleGroupStyle",value:function(){var e,t;if("unit"===this.type||"layer"===this.type)return null!==(t=null===(e=this.view)||void 0===e?void 0:e.style)&&void 0!==t?t:"cell"}},{key:"assembleEncodeFromView",value:function(e){e.style;var t,n=h9(e,["style"]),r={},a=Object(tr.a)(U9(n));try{for(a.s();!(t=a.n()).done;){var i=t.value,o=n[i];void 0!==o&&(r[i]=Poe(o))}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"assembleGroupEncodeEntry",value:function(e){var t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=Poe(this.description)),"unit"!==this.type&&"layer"!==this.type)?z9(t)?void 0:t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==t&&void 0!==t?t:{})}},{key:"assembleLayout",value:function(){if(this.layout){var e=this.layout,t=e.spacing,n=h9(e,["spacing"]),r=this.component,a=this.config,i=function(e,t){var n,r={},a=Object(tr.a)(Pte);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=e[i];if(null===o||void 0===o?void 0:o.facetFieldDef){var u=Dde(["titleAnchor","titleOrient"],o.facetFieldDef,t,i),s=u.titleAnchor,c=Nde(i,u.titleOrient),l=Gde(s,c);void 0!==l&&(r[c]=l)}}}catch(f){a.e(f)}finally{a.f()}return z9(r)?void 0:r}(r.layoutHeaders,a);return Object.assign(Object.assign(Object.assign({padding:t},this.assembleDefaultLayout()),n),i?{titleBand:i}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var e,t=this.component.layoutHeaders,n=[],r=Object(tr.a)(Pte);try{for(r.s();!(e=r.n()).done;){var a=e.value;t[a].title&&n.push(Rde(this,a))}}catch(s){r.e(s)}finally{r.f()}var i,o=Object(tr.a)(Ide);try{for(o.s();!(i=o.n()).done;){var u=i.value;n=n.concat(Bde(this,u))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"assembleAxes",value:function(){return function(e,t){var n=e.x,r=void 0===n?[]:n,a=e.y,i=void 0===a?[]:a;return[].concat(Object(mo.a)(r.map((function(e){return pde(e,"grid",t)}))),Object(mo.a)(i.map((function(e){return pde(e,"grid",t)}))),Object(mo.a)(r.map((function(e){return pde(e,"main",t)}))),Object(mo.a)(i.map((function(e){return pde(e,"main",t)})))).filter((function(e){return e}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return ghe(this)}},{key:"assembleProjections",value:function(){return bhe(this)}},{key:"assembleTitle",value:function(){var e,t,n,r=null!==(e=this.title)&&void 0!==e?e:{},a=r.encoding,i=h9(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},Foe(this.config.title).nonMark),i),a?{encode:{update:a}}:{});if(o.text)return M9(["unit","layer"],this.type)?M9(["middle",void 0],o.anchor)&&(o.frame=null!==(t=o.frame)&&void 0!==t?t:"group"):o.anchor=null!==(n=o.anchor)&&void 0!==n?n:"start",z9(o)?void 0:o}},{key:"assembleGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||Gpe(this.parent)?Ope(this):[];r.length>0&&(t.scales=r);var a=this.assembleAxes();a.length>0&&(t.axes=a);var i=this.assembleLegends();return i.length>0&&(t.legends=i),t}},{key:"getName",value:function(e){return q9((this.name?this.name+"_":"")+e)}},{key:"requestDataName",value:function(e){var t,n=this.getName(e),r=this.component.data.outputNodeRefCounts;return r[n]=(null!==(t=r[n])&&void 0!==t?t:0)+1,n}},{key:"getSizeSignalRef",value:function(e){if(Gpe(this.parent)){var t=nne($de(e)),n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),a=n.get("range");if(iie(r)&&cae(a)){var i=n.get("name"),o=wpe(kpe(this,t));return o?{signal:Kde(i,n,doe({aggregate:"distinct",field:o},{expr:"datum"}))}:(Wre("Unknown field for ".concat(t,". Cannot calculate view size.")),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}},{key:"lookupDataSource",value:function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e}},{key:"getSignalName",value:function(e){return this.signalNameMap.get(e)}},{key:"renameSignal",value:function(e,t){this.signalNameMap.rename(e,t)}},{key:"renameScale",value:function(e,t){this.scaleNameMap.rename(e,t)}},{key:"renameProjection",value:function(e,t){this.projectionNameMap.rename(e,t)}},{key:"scaleName",value:function(e,t){return t?this.getName(e):Wte(e)&&une(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}},{key:"projectionName",value:function(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}},{key:"getSelectionComponent",value:function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(b.selectionNotFound(t));return n}},{key:"hasAxisOrientSignalRef",value:function(){var e,t;return(null===(e=this.component.axes.x)||void 0===e?void 0:e.some((function(e){return e.hasOrientSignalRef()})))||(null===(t=this.component.axes.y)||void 0===t?void 0:t.some((function(e){return e.hasOrientSignalRef()})))}}]),e}(),Ype=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"vgField",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(e);if(n)return doe(n,t)}},{key:"reduceFieldDef",value:function(e,t){return tue(this.getMapping(),(function(t,n,r){var a=Ooe(n);return a?e(t,a,r):t}),t)}},{key:"forEachFieldDef",value:function(e,t){eue(this.getMapping(),(function(t,n){var r=Ooe(t);r&&e(r,n)}),t)}}]),n}(Xpe),Kpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a,i,o,u;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"value",null!==(u=s[1])&&void 0!==u?u:"density"],a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.density].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"DensityTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.density,n=h9(e,["density"]);return Object.assign({type:"kde",field:t},n)}}]),n}(Hce),$pe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).filter=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(U9(this.filter))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"FilterInvalid ".concat(T9(this.filter))}},{key:"assemble",value:function(){var e=this,t=U9(this.filter).reduce((function(t,n){var r=e.filter[n],a=doe(r,{expr:"datum"});return null!==r&&("temporal"===r.type?t.push("(isDate(".concat(a,") || (isValid(").concat(a,") && isFinite(+").concat(a,")))")):"quantitative"===r.type&&(t.push("isValid(".concat(a,")")),t.push("isFinite(+".concat(a,")")))),t}),[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}],[{key:"make",value:function(e,t){var r=t.config,a=t.mark;if("filter"!==Uoe("invalid",t.markDef,r))return null;var i=t.reduceFieldDef((function(e,n,r){var i=une(r)&&t.getScaleComponent(r);i&&(oie(i.get("type"))&&"count"!==n.aggregate&&!Tee(a)&&(e[n.field]=n));return e}),{});return U9(i).length?new n(e,i):null}}]),n}(Hce),Zpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var i=a.transform,o=i.flatten,u=i.as,s=void 0===u?[]:u;return a.transform.as=o.map((function(e,t){var n;return null!==(n=s[t])&&void 0!==n?n:e})),a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(this.parent,j9(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.flatten)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}]),n}(Hce),Jpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a,i,o,u;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"key",null!==(u=s[1])&&void 0!==u?u:"value"],a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){return new Set(this.transform.fold)}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}]),n}(Hce),Qpe=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;return Object(Rx.a)(this,n),(o=t.call(this,e)).fields=r,o.geojson=a,o.signal=i,o}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.fields),this.geojson,this.signal)}},{key:"dependentFields",value:function(){var e,t=(null!==(e=this.fields)&&void 0!==e?e:[]).filter(_t);return new Set([].concat(Object(mo.a)(this.geojson?[this.geojson]:[]),Object(mo.a)(t)))}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(T9(this.fields))}},{key:"assemble",value:function(){return Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})}}],[{key:"parseAll",value:function(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;for(var r=0,a=0,i=[[ste,ute],[lte,cte]];a<i.length;a++){var o=i[a].map((function(e){var n=Soe(t.encoding[e]);return Qie(n)?n.field:toe(n)?{expr:"".concat(n.datum)}:ooe(n)?{expr:"".concat(n.value)}:void 0}));(o[0]||o[1])&&(e=new n(e,o,null,t.getName("geojson_".concat(r++))))}if(t.channelHasField(pte)){var u=t.typedFieldDef(pte);u.type===Dae&&(e=new n(e,null,u.field,t.getName("geojson_".concat(r++))))}return e}}]),n}(Hce),eve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;return Object(Rx.a)(this,n),(o=t.call(this,e)).projection=r,o.fields=a,o.as=i,o}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,this.projection,j9(this.fields),j9(this.as))}},{key:"dependentFields",value:function(){return new Set(this.fields.filter(_t))}},{key:"producedFields",value:function(){return new Set(this.as)}},{key:"hash",value:function(){return"Geopoint ".concat(this.projection," ").concat(T9(this.fields)," ").concat(T9(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(e,t){if(!t.projectionName())return e;for(var r=0,a=[[ste,ute],[lte,cte]];r<a.length;r++){var i=a[r],o=i.map((function(e){var n=Soe(t.encoding[e]);return Qie(n)?n.field:toe(n)?{expr:"".concat(n.datum)}:ooe(n)?{expr:"".concat(n.value)}:void 0})),u=i[0]===lte?"2":"";(o[0]||o[1])&&(e=new n(e,t.projectionName(),o,[t.getName("x"+u),t.getName("y"+u)]))}return e}}]),n}(Hce),tve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.impute,this.transform.key].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(e){var t=e.start,n=void 0===t?0:t,r=e.stop,a=e.step,i=[n,r].concat(Object(mo.a)(a?[a]:[])).join(",");return{signal:"sequence(".concat(i,")")}}},{key:"hash",value:function(){return"Impute ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e,t=this.transform,n=t.impute,r=t.key,a=t.keyvals,i=t.method,o=t.groupby,u=t.value,s=t.frame,c=void 0===s?[null,null]:s,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:n,key:r},a?{keyvals:(e=a,void 0!==(null===e||void 0===e?void 0:e.stop)?this.processSequence(a):a)}:{}),{method:"value"}),o?{groupby:o}:{}),{value:i&&"value"!==i?null:u});return i&&"value"!==i?[l,Object.assign({type:"window",as:["imputed_".concat(n,"_value")],ops:[i],fields:[n],frame:c,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:"datum.".concat(n," === null ? datum.imputed_").concat(n,"_value : datum.").concat(n),as:n}]:[l]}}],[{key:"makeFromTransform",value:function(e,t){return new n(e,t)}},{key:"makeFromEncoding",value:function(e,t){var r=t.encoding,a=r.x,i=r.y;if(Qie(a)&&Qie(i)){var o=a.impute?a:i.impute?i:void 0;if(void 0===o)return;var u=a.impute?i:i.impute?a:void 0,s=o.impute,c=s.method,l=s.value,f=s.frame,d=s.keyvals,h=nue(t.mark,r);return new n(e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:o.field,key:u.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==d?{keyvals:d}:{}),h.length?{groupby:h}:{}))}return null}}]),n}(Hce),nve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a,i,o,u;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.loess],a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.loess,this.transform.on].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"LoessTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.loess,n=e.on,r=h9(e,["loess","on"]);return Object.assign({type:"loess",x:n,y:t},r)}}]),n}(Hce),rve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a){var i;return Object(Rx.a)(this,n),(i=t.call(this,e)).transform=r,i.secondary=a,i}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform),this.secondary)}},{key:"dependentFields",value:function(){return new Set([this.transform.lookup])}},{key:"producedFields",value:function(){return new Set(this.transform.as?Ze(this.transform.as):this.transform.from.fields)}},{key:"hash",value:function(){return"Lookup ".concat(T9({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Ze(this.transform.as)}:{});else{var t=this.transform.as;_t(t)||(Wre(b.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(e,t,r,a){var i=t.component.data.sources,o=r.from,u=null;if(function(e){return"data"in e}(o)){var s=yve(o.data,i);s||(s=new Che(o.data),i.push(s));var c=t.getName("lookup_".concat(a));u=new Xce(s,c,"lookup",t.component.data.outputNodeRefCounts),t.component.data.outputNodes[c]=u}else if(function(e){return"selection"in e}(o)){var l=o.selection;if(r=Object.assign({as:l},r),!(u=t.getSelectionComponent(q9(l),l).materialized))throw new Error(b.noSameUnitLookup(l))}return new n(e,r,u.getSource())}}]),n}(Hce),ave=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a,i,o,u;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:"prob",null!==(u=s[1])&&void 0!==u?u:"value"],a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.quantile].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"QuantileTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.quantile,n=h9(e,["quantile"]);return Object.assign({type:"quantile",field:t},n)}}]),n}(Hce),ive=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a,i,o,u;Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a.transform=j9(r);var s=null!==(i=a.transform.as)&&void 0!==i?i:[void 0,void 0];return a.transform.as=[null!==(o=s[0])&&void 0!==o?o:r.on,null!==(u=s[1])&&void 0!==u?u:r.regression],a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.regression,this.transform.on].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"RegressionTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.regression,n=e.on,r=h9(e,["regression","on"]);return Object.assign({type:"regression",x:n,y:t},r)}}]),n}(Hce),ove=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"addDimensions",value:function(e){var t;this.transform.groupby=R9((null!==(t=this.transform.groupby)&&void 0!==t?t:[]).concat(e),(function(e){return e}))}},{key:"producedFields",value:function(){}},{key:"dependentFields",value:function(){var e;return new Set([this.transform.pivot,this.transform.value].concat(Object(mo.a)(null!==(e=this.transform.groupby)&&void 0!==e?e:[])))}},{key:"hash",value:function(){return"PivotTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){var e=this.transform,t=e.pivot,n=e.value,r=e.groupby,a=e.limit,i=e.op;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},void 0!==a?{limit:a}:{}),void 0!==i?{op:i}:{}),void 0!==r?{groupby:r}:{})}}]),n}(Hce),uve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r){var a;return Object(Rx.a)(this,n),(a=t.call(this,e)).transform=r,a}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(null,j9(this.transform))}},{key:"dependentFields",value:function(){return new Set}},{key:"producedFields",value:function(){return new Set}},{key:"hash",value:function(){return"SampleTransform ".concat(T9(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),n}(Hce);function sve(e){var t=0;return function n(r,a){var i,o,u;if(r instanceof Che&&(r.isGenerator||qse(r.data)||(e.push(a),a={name:null,source:a.name,transform:[]})),r instanceof Vhe&&(r.parent instanceof Che&&!a.source?(a.format=Object.assign(Object.assign({},null!==(i=a.format)&&void 0!==i?i:{}),{parse:r.assembleFormatParse()}),(o=a.transform).push.apply(o,Object(mo.a)(r.assembleTransforms(!0)))):(u=a.transform).push.apply(u,Object(mo.a)(r.assembleTransforms()))),r instanceof Lhe){a.name||(a.name="data_".concat(t++)),!a.source||a.transform.length>0?(e.push(a),r.data=a.name):r.data=a.source;var s,c=Object(tr.a)(r.assemble());try{for(c.s();!(s=c.n()).done;){var l=s.value;e.push(l)}}catch(v){c.e(v)}finally{c.f()}}else{var f;if((r instanceof The||r instanceof Nhe||r instanceof $pe||r instanceof sde||r instanceof Ade||r instanceof eve||r instanceof Qpe||r instanceof Phe||r instanceof rve||r instanceof Xhe||r instanceof qhe||r instanceof Jpe||r instanceof Zpe||r instanceof Kpe||r instanceof nve||r instanceof ave||r instanceof ive||r instanceof Ghe||r instanceof uve||r instanceof ove)&&a.transform.push(r.assemble()),r instanceof Ehe||r instanceof Yce||r instanceof tve||r instanceof Hhe)(f=a.transform).push.apply(f,Object(mo.a)(r.assemble()));if(r instanceof Xce)if(a.source&&0===a.transform.length)r.setSource(a.source);else if(r.parent instanceof Xce)r.setSource(a.name);else{if(a.name||(a.name="data_".concat(t++)),r.setSource(a.name),1===r.numChildren())e.push(a),a={name:null,source:a.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Xce&&(!a.source||a.transform.length>0)&&e.push(a);break;case 1:n(r.children[0],a);break;default:a.name||(a.name="data_".concat(t++));var d=a.name;!a.source||a.transform.length>0?e.push(a):d=a.source;var h,p=Object(tr.a)(r.children);try{for(p.s();!(h=p.n()).done;){n(h.value,{name:null,source:d,transform:[]})}}catch(v){p.e(v)}finally{p.f()}}}}}function cve(e,t){var n,r,a,i=[],o=sve(i),u=0,s=Object(tr.a)(e.sources);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.hasName()||(c.dataName="source_".concat(u++));var l=c.assemble();o(c,l)}}catch(A){s.e(A)}finally{s.f()}for(var f=0,d=i;f<d.length;f++){var h=d[f];0===h.transform.length&&delete h.transform}var p,v=0,m=Object(tr.a)(i.entries());try{for(m.s();!(p=m.n()).done;){var g=Object(Nr.a)(p.value,2),b=g[0],y=g[1];0!==(null!==(n=y.transform)&&void 0!==n?n:[]).length||y.source||i.splice(v++,0,i.splice(b,1)[0])}}catch(A){m.e(A)}finally{m.f()}for(var x=0,_=i;x<_.length;x++){var w,k=_[x],O=Object(tr.a)(null!==(r=k.transform)&&void 0!==r?r:[]);try{for(O.s();!(w=O.n()).done;){var S=w.value;"lookup"===S.type&&(S.from=e.outputNodes[S.from].getSource())}}catch(A){O.e(A)}finally{O.f()}}for(var j=0,E=i;j<E.length;j++){var C=E[j];C.name in t&&(C.values=t[C.name])}return i}function lve(e,t){var n,r=e.facet,a=e.config,i=e.child,o=e.component;if(e.channelHasField(t)){var u=r[t],s=Mde("title",null,a,t),c=xoe(u,a,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(c=je(c)?c.join(", "):c,c+=" / "+i.component.layoutHeaders[t].title,i.component.layoutHeaders[t].title=null);var l=Mde("labelOrient",u,a,t),f=nee((null!==(n=u.header)&&void 0!==n?n:{}).labels,a.header.labels,!0),d=M9(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]=Object(go.a)({title:c,facetFieldDef:u},d,"facet"===t?[]:[fve(e,t,f)])}}function fve(e,t,n){var r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function dve(e,t){var n,r,a=e.child;if(a.component.axes[t]){var i=e.component,o=i.layoutHeaders,u=i.resolve;if(u.axis[t]=Qde(u,t),"shared"===u.axis[t]){var s,c="x"===t?"column":"row",l=o[c],f=Object(tr.a)(a.component.axes[t]);try{for(f.s();!(s=f.n()).done;){var d=s.value,h="top"===(r=d.get("orient"))||"left"===r||sae(r)?"header":"footer";l[h]=null!==(n=l[h])&&void 0!==n?n:[fve(e,c,!1)];var p=pde(d,"main",e.config,{header:!0});p&&l[h][0].axes.push(p),d.mainExtracted=!0}}catch(v){f.e(v)}finally{f.f()}}}}function hve(e){pve(e);var t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";vve(e,t),vve(e,n)}function pve(e){var t,n=Object(tr.a)(e.children);try{for(n.s();!(t=n.n()).done;){t.value.parseLayoutSize()}}catch(r){n.e(r)}finally{n.f()}}function vve(e,t){var n,r,a=$de(t),i=nne(a),o=e.component.resolve,u=e.component.layoutSize,s=Object(tr.a)(e.children);try{for(s.s();!(r=s.n()).done;){var c=r.value.component.layoutSize.getWithExplicit(a),l=o.scale[i];if("independent"===l&&"step"===c.value){n=void 0;break}if(n){if("independent"===l&&n.value!==c.value){n=void 0;break}n=Vse(n,c,a,"")}else n=c}}catch(p){s.e(p)}finally{s.f()}if(n){var f,d=Object(tr.a)(e.children);try{for(d.s();!(f=d.n()).done;){var h=f.value;e.renameSignal(h.getName(a),e.getName(t)),h.component.layoutSize.set(a,"merged",!1)}}catch(p){d.e(p)}finally{d.f()}u.setWithExplicit(t,n)}else u.setWithExplicit(t,{explicit:!1,value:void 0})}function mve(e,t){var n="width"===t?"x":"y",r=e.config,a=e.getScaleComponent(n);if(a){var i=a.get("type"),o=a.get("range");if(iie(i)){var u=Wue(r.view,t);return cae(o)||Pue(u)?"step":u}return zue(r.view,t)}if(e.hasProjection||"arc"===e.mark)return zue(r.view,t);var s=Wue(r.view,t);return Pue(s)?s.step:s}function gve(e,t,n){return doe(t,Object.assign({suffix:"by_".concat(doe(e))},null!==n&&void 0!==n?n:{}))}var bve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o;return Object(Rx.a)(this,n),(o=t.call(this,e,"facet",r,a,i,e.resolve)).child=Xve(e.spec,Object(Pse.a)(o),o.getName("child"),void 0,i),o.children=[o.child],o.facet=o.initFacet(e.facet,i),o}return Object(Px.a)(n,[{key:"initFacet",value:function(e,t){return Vie(e)?tue(e,(function(e,n,r){return M9([$ee,Zee],r)?void 0===n.field?(Wre(b.emptyFieldDef(n,r)),e):(e[r]=joe(n,r,t),e):(Wre(b.incompatibleChannel(r,"facet")),e)}),{}):{facet:joe(e,"facet",t)}}},{key:"channelHasField",value:function(e){return!!this.facet[e]}},{key:"fieldDef",value:function(e){return this.facet[e]}},{key:"parseData",value:function(){this.component.data=_ve(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){pve(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(e){var t,n=Object(tr.a)(Pte);try{for(n.s();!(t=n.n()).done;)lve(e,t.value)}catch(r){n.e(r)}finally{n.f()}dve(e,"x"),dve(e,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.child.assembleSelectionTopLevelSignals(e)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(e){return this.child.assembleSelectionData(e)}},{key:"getHeaderLayoutMixins",value:function(){var e,t,n,r,a={},i=Object(tr.a)(Pte);try{for(i.s();!(r=i.n()).done;){var o,u=r.value,s=Object(tr.a)(Fde);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=this.component.layoutHeaders[u],f=l[c],d=l.facetFieldDef;if(d){var h=Mde("titleOrient",d,this.config,u);if(M9(["right","bottom"],h)){var p=Nde(u,h);a.titleAnchor=null!==(e=a.titleAnchor)&&void 0!==e?e:{},a.titleAnchor[p]="end"}}if(null===f||void 0===f?void 0:f[0]){var v="row"===u?"height":"width",m="header"===c?"headerBand":"footerBand";"facet"===u||this.child.component.layoutSize.get(v)||(a[m]=null!==(t=a[m])&&void 0!==t?t:{},a[m][u]=.5),l.title&&(a.offset=null!==(n=a.offset)&&void 0!==n?n:{},a.offset["row"===u?"rowTitle":"columnTitle"]=10)}}}catch(g){s.e(g)}finally{s.f()}}}catch(g){i.e(g)}finally{i.f()}return a}},{key:"assembleDefaultLayout",value:function(){var e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0,a="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(a="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{bounds:"full",align:a})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof n)){var e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}},{key:"assembleGroup",value:function(e){return this.parent&&this.parent instanceof n?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:doe(this.facet.column,{prefix:"distinct"})}}}}:{}),Object(ase.a)(Object(ise.a)(n.prototype),"assembleGroup",this).call(this,e)):Object(ase.a)(Object(ise.a)(n.prototype),"assembleGroup",this).call(this,e)}},{key:"getCardinalityAggregateForChild",value:function(){var e=[],t=[],r=[];if(this.child instanceof n){if(this.child.channelHasField("column")){var a=doe(this.child.facet.column);e.push(a),t.push("distinct"),r.push("distinct_".concat(a))}}else{var i,o=Object(tr.a)(Jte);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=this.child.component.scales[u];if(s&&!s.merged){var c=s.get("type"),l=s.get("range");if(iie(c)&&cae(l)){var f=wpe(kpe(this.child,u));f?(e.push(f),t.push("distinct"),r.push("distinct_".concat(f))):Wre("Unknown field for ".concat(u,". Cannot calculate view size."))}}}}catch(d){o.e(d)}finally{o.f()}}return{fields:e,ops:t,as:r}}},{key:"assembleFacet",value:function(){var e,t=this.component.data.facetRoot,n=t.name,r=t.data,a=this.facet,i=a.row,o=a.column,u=this.getCardinalityAggregateForChild(),s=u.fields,c=u.ops,l=u.as,f=[],d=Object(tr.a)(Pte);try{for(d.s();!(e=d.n()).done;){var h=e.value,p=this.facet[h];if(p){f.push(doe(p));var v=p.bin,m=p.sort;if(hne(v)&&f.push(doe(p,{binSuffix:"end"})),Uie(m)){var g=m.field,b=m.op,y=void 0===b?Pie:b,x=gve(p,m);i&&o?(s.push(x),c.push("max"),l.push(x)):(s.push(g),c.push(y),l.push(x))}else if(je(m)){var _=Tde(p,h);s.push(_),c.push("max"),l.push(_)}}}}catch(k){d.e(k)}finally{d.f()}var w=!!i&&!!o;return Object.assign({name:n,data:r,groupby:f},w||s.length>0?{aggregate:Object.assign(Object.assign({},w?{cross:w}:{}),s.length?{fields:s,ops:c,as:l}:{})}:{})}},{key:"facetSortFields",value:function(e){var t=this.facet[e];return t?Uie(t.sort)?[gve(t,t.sort,{expr:"datum"})]:je(t.sort)?[Tde(t,e,{expr:"datum"})]:[doe(t,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(e){var t=this.facet[e];if(t){var n=t.sort;return[(Uie(n)?n.order:!je(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var e=this.facet,t=this.config;if(e.facet)return Ude(e.facet,"facet",t);var n,r={row:["top","bottom"],column:["left","right"]},a=Object(tr.a)(Ide);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(e[i]){var o=Mde("labelOrient",e[i],t,i);if(M9(r[i],o))return Ude(e[i],i,t)}}}catch(u){a.e(u)}finally{a.f()}}},{key:"assembleMarks",value:function(){var e=this,t=this.child,n=function(e){var t,n=[],r=sve(n),a=Object(tr.a)(e.children);try{for(a.s();!(t=a.n()).done;)r(t.value,{source:e.name,name:null,transform:[]})}catch(i){a.e(i)}finally{a.f()}return n}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),i=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},a?{title:a}:{}),i?{style:i}:{}),{from:{facet:this.assembleFacet()},sort:{field:Pte.map((function(t){return e.facetSortFields(t)})).flat(),order:Pte.map((function(t){return e.facetSortOrder(t)})).flat()}}),n.length>0?{data:n}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(function(e,t){if(e.component.selection&&U9(e.component.selection).length){var n=At(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:j5("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return gle(t)}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),n}(Ype);function yve(e,t){var n,r,a,i,o,u,s,c,l,f,d,h=Object(tr.a)(t);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=p.data;if((!e.name||!p.hasName()||e.name===p.dataName)&&((!(null===(n=e.format)||void 0===n?void 0:n.mesh)||!(null===(r=v.format)||void 0===r?void 0:r.feature))&&(!(null===(a=e.format)||void 0===a?void 0:a.feature)&&!(null===(i=v.format)||void 0===i?void 0:i.feature)||(null===(o=e.format)||void 0===o?void 0:o.feature)===(null===(u=v.format)||void 0===u?void 0:u.feature))&&(!(null===(s=e.format)||void 0===s?void 0:s.mesh)&&!(null===(c=v.format)||void 0===c?void 0:c.mesh)||(null===(l=e.format)||void 0===l?void 0:l.mesh)===(null===(f=v.format)||void 0===f?void 0:f.mesh))))if(Hse(e)&&Hse(v)){if(S9(e.values,v.values))return p}else if(qse(e)&&qse(v)){if(e.url===v.url)return p}else if(Xse(e)&&e.name===p.dataName)return p}}catch(m){h.e(m)}finally{h.f()}return null}function xve(e,t){if(e.data||!e.parent){if(null===e.data){var n=new Che({values:[]});return t.push(n),n}var r=yve(e.data,t);if(r)return Yse(e.data)||(r.data.format=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];F9(e,null!==o&&void 0!==o?o:{})}return e}({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;var a=new Che(e.data);return t.push(a),a}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function _ve(e){var t,n,r,a,i,o,u,s,c,l,f=xve(e,e.component.data.sources),d=e.component.data,h=d.outputNodes,p=d.outputNodeRefCounts,v=e.parent?e.parent.component.data.ancestorParse.clone():new Gse,m=e.data;Yse(m)?(Kse(m)?f=new Nhe(f,m.sequence):Zse(m)&&(f=new The(f,m.graticule)),v.parseNothing=!0):null===(null===(t=null===m||void 0===m?void 0:m.format)||void 0===t?void 0:t.parse)&&(v.parseNothing=!0),f=null!==(n=Vhe.makeExplicit(f,e,v))&&void 0!==n?n:f,f=new Ghe(f);var g=e.parent&&Hpe(e.parent);(Vpe(e)||Gpe(e))&&g&&(f=null!==(r=Ehe.makeFromEncoding(f,e))&&void 0!==r?r:f),e.transforms.length>0&&(f=function(e,t,n){var r,a,i,o=0,u=Object(tr.a)(t.transforms);try{for(u.s();!(i=u.n()).done;){var s=i.value,c=void 0,l=void 0;if(fce(s))l=e=new Ade(e,s),c="derived";else if(ece(s)){var f=Uhe(s);l=e=null!==(r=Vhe.makeWithAncestors(e,{},f,n))&&void 0!==r?r:e,e=new sde(e,t,s.filter)}else if(dce(s))l=e=Ehe.makeFromTransform(e,s,t),c="number";else if(pce(s))c="date",void 0===n.getWithExplicit(s.field).value&&(e=new Vhe(e,Object(go.a)({},s.field,c)),n.set(s.field,c,!1)),l=e=Yce.makeFromTransform(e,s);else if(vce(s))l=e=Phe.makeFromTransform(e,s),c="number",Dle(t)&&(e=new Ghe(e));else if(tce(s))l=e=rve.make(e,t,s,o++),c="derived";else if(sce(s))l=e=new Xhe(e,s),c="number";else if(cce(s))l=e=new qhe(e,s),c="number";else if(mce(s))l=e=Hhe.makeFromTransform(e,s),c="derived";else if(gce(s))l=e=new Jpe(e,s),c="derived";else if(lce(s))l=e=new Zpe(e,s),c="derived";else if(nce(s))l=e=new ove(e,s),c="derived";else if(uce(s))e=new uve(e,s);else if(hce(s))l=e=tve.makeFromTransform(e,s),c="derived";else if(rce(s))l=e=new Kpe(e,s),c="derived";else if(ace(s))l=e=new ave(e,s),c="derived";else if(ice(s))l=e=new ive(e,s),c="derived";else{if(!oce(s)){Wre(b.invalidTransformIgnored(s));continue}l=e=new nve(e,s),c="derived"}if(l&&void 0!==c){var d,h=Object(tr.a)(null!==(a=l.producedFields())&&void 0!==a?a:[]);try{for(h.s();!(d=h.n()).done;){var p=d.value;n.set(p,c,!1)}}catch(v){h.e(v)}finally{h.f()}}}}catch(v){u.e(v)}finally{u.f()}return e}(f,e,v));var y=function(e){var t={};if(Vpe(e)&&e.component.selection){var n,r=Object(tr.a)(U9(e.component.selection));try{for(r.s();!(n=r.n()).done;){var a,i=n.value,o=e.component.selection[i],u=Object(tr.a)(o.project.items);try{for(u.s();!(a=u.n()).done;){var s=a.value;!s.channel&&tee(s.field)>1&&(t[s.field]="flatten")}}catch(c){u.e(c)}finally{u.f()}}}catch(c){r.e(c)}finally{r.f()}}return t}(e),x=Whe(e);f=null!==(a=Vhe.makeWithAncestors(f,{},Object.assign(Object.assign({},y),x),v))&&void 0!==a?a:f,Vpe(e)&&(f=Qpe.parseAll(f,e),f=eve.parseAll(f,e)),(Vpe(e)||Gpe(e))&&(g||(f=null!==(i=Ehe.makeFromEncoding(f,e))&&void 0!==i?i:f),f=null!==(o=Yce.makeFromEncoding(f,e))&&void 0!==o?o:f,f=Ade.parseAllForSortIndex(f,e));var _=e.getName(Qse),w=new Xce(f,_,Qse,p);if(h[_]=w,f=w,Vpe(e)){var k=Phe.makeFromEncoding(f,e);k&&(f=k,Dle(e)&&(f=new Ghe(f))),f=null!==(u=tve.makeFromEncoding(f,e))&&void 0!==u?u:f,f=null!==(s=Hhe.makeFromEncoding(f,e))&&void 0!==s?s:f}Vpe(e)&&(f=null!==(c=$pe.make(f,e))&&void 0!==c?c:f);var O=e.getName(Jse),S=new Xce(f,O,Jse,p);h[O]=S,f=S,Vpe(e)&&function(e,t){Tle(e,(function(n){var r=n.name,a=e.getName("lookup_".concat(r));e.component.data.outputNodes[a]=n.materialized=new Xce(new sde(t,e,{selection:r}),a,"lookup",e.component.data.outputNodeRefCounts)}))}(e,S);var j=null;if(Gpe(e)){var E=e.getName("facet");f=null!==(l=function(e,t){var n=t.row,r=t.column;if(n&&r){for(var a=null,i=0,o=[n,r];i<o.length;i++){var u=o[i];if(Uie(u.sort)){var s=u.sort,c=s.field,l=s.op;e=a=new qhe(e,{joinaggregate:[{op:void 0===l?Pie:l,field:c,as:gve(u,u.sort,{forAs:!0})}],groupby:[doe(u)]})}}return a}return null}(f,e.facet))&&void 0!==l?l:f,j=new Lhe(f,e,E,S.getSource()),h[E]=j}return Object.assign(Object.assign({},e.component.data),{outputNodes:h,outputNodeRefCounts:p,raw:w,main:S,facetRoot:j,ancestorParse:v})}var wve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i){var o,u,s,c,l;return Object(Rx.a)(this,n),o=t.call(this,e,"concat",r,a,i,e.resolve),"shared"!==(null===(s=null===(u=e.resolve)||void 0===u?void 0:u.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(l=null===(c=e.resolve)||void 0===c?void 0:c.axis)||void 0===l?void 0:l.y)||Wre(b.CONCAT_CANNOT_SHARE_AXIS),o.children=o.getChildren(e).map((function(e,t){return Xve(e,Object(Pse.a)(o),o.getName("concat_"+t),void 0,i)})),o}return Object(Px.a)(n,[{key:"parseData",value:function(){this.component.data=_ve(this);var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=Object(tr.a)(U9(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseAxesAndHeaders()}}catch(n){t.e(n)}finally{t.f()}}},{key:"getChildren",value:function(e){return Fue(e)?e.vconcat:Rue(e)?e.hconcat:e.concat}},{key:"parseLayoutSize",value:function(){hve(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(e){return e.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){var e,t=Hde(this),n=Object(tr.a)(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Object(mo.a)(r.assembleLayoutSignals()))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleMarks",value:function(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}},{key:"assembleDefaultLayout",value:function(){var e=this.layout.columns;return Object.assign(Object.assign({},null!=e?{columns:e}:{}),{bounds:"full",align:"each"})}}]),n}(Xpe);var kve=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},dee),{labelExpr:1,encode:1}),Ove=U9(kve),Sve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(Rx.a)(this,n),(e=t.call(this)).explicit=r,e.implicit=a,e.mainExtracted=i,e}return Object(Px.a)(n,[{key:"clone",value:function(){return new n(j9(this.explicit),j9(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}},{key:"hasOrientSignalRef",value:function(){return sae(this.explicit.orient)}}]),n}(Lse);var jve={bottom:"top",top:"bottom",left:"right",right:"left"};function Eve(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var a=e[r],i=t[r];if(!!a!==!!i)return;if(a&&i){var o=a.getWithExplicit("orient"),u=i.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[r]=Cve(a,i)}}return e}}function Cve(e,t){var n,r=Object(tr.a)(Ove);try{var a=function(){var r=n.value,a=Vse(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",(function(e,t){switch(r){case"title":return Yoe(e,t);case"gridScale":return{explicit:e.explicit,value:nee(e.value,t.value)}}return Wse(e,t,r,"axis")}));e.setWithExplicit(r,a)};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}return e}function Ave(e,t,n,r,a){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(sae(n.labelAngle)?n.labelAngle:oee(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Cde(r,a))return!0}return e===n[t]}var Tve=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Nve(e,t){var n,r,a,i=t.axis(e),o=new Sve,u=Soe(t.encoding[e]),s=t.mark,c=t.config,l=(null===i||void 0===i?void 0:i.orient)||(null===(n=c["x"===e?"axisX":"axisY"])||void 0===n?void 0:n.orient)||(null===(r=c.axis)||void 0===r?void 0:r.orient)||function(e){return"x"===e?"bottom":"left"}(e),f=t.getScaleComponent(e).get("type"),d=_de(e,f,l,t.config),h=void 0!==i?!i:kde("disable",c,null===i||void 0===i?void 0:i.style,d).configValue;if(o.set("disable",h,void 0!==i),h)return o;var p,v=function(e,t,n,r,a){var i=null===t||void 0===t?void 0:t.labelAngle;if(void 0!==i)return sae(i)?i:oee(i);var o=kde("labelAngle",e.config,null===t||void 0===t?void 0:t.style,a).configValue;return void 0!==o?oee(o):n===Qee&&M9([Mae,Tae],r.type)?270:void 0}(t,i=i||{},e,u,d),m={fieldOrDatumDef:u,axis:i,channel:e,model:t,scaleType:f,orient:l,labelAngle:v,mark:s,config:c},g=Object(tr.a)(Ove);try{for(g.s();!(p=g.n()).done;){var b=p.value,y=b in Ode?Ode[b](m):pee(b)?i[b]:void 0,x=void 0!==y,_=Ave(y,b,i,t,e);if(x&&_)o.set(b,y,_);else{var w=pee(b)&&"values"!==b?kde(b,t.config,i.style,d):{},k=w.configValue,O=void 0===k?void 0:k,S=w.configFrom,j=void 0===S?void 0:S,E=void 0!==O;x&&!E?o.set(b,y,_):("vgAxisConfig"!==j||Tve.has(b)&&E||cee(O)||sae(O))&&o.set(b,O,!1)}}}catch(T){g.e(T)}finally{g.f()}var C=null!==(a=i.encoding)&&void 0!==a?a:{},A=lee.reduce((function(n,r){var a;if(!o.hasAxisPart(r))return n;var i=Zde(null!==(a=C[r])&&void 0!==a?a:{},t),u="labels"===r?function(e,t,n){var r,a=e.encoding,i=e.config,o=null!==(r=Soe(a[t]))&&void 0!==r?r:Soe(a[Xte(t)]),u=e.axis(t)||{},s=u.format,c=u.formatType;return jie(c)?Object.assign({text:Tie({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:c,config:i})},n):n}(t,e,i):i;return void 0===u||z9(u)||(n[r]={update:u}),n}),{});return z9(A)||o.set("encode",A,!!i.encoding||void 0!==i.labelAngle),o}function Mve(e){var t,n=e.encoding,r=e.size,a=Object(tr.a)(Jte);try{for(a.s();!(t=a.n()).done;){var i=t.value,o=Yte(i);Pue(r[o])&&noe(n[i])&&(delete r[o],Wre(b.stepDropped(o)))}}catch(u){a.e(u)}finally{a.f()}return r}function Dve(e,t,n,r){var a=r.graticule,i=Dee(e)?Object.assign({},e):{type:e},o=Uoe("orient",i,n);if(i.orient=function(e,t,n){switch(e){case _ee:case Eee:case Cee:case Oee:case wee:case yee:return}var r=t.x,a=t.y,i=t.x2,o=t.y2;switch(e){case bee:if(Qie(r)&&(pne(r.bin)||Qie(a)&&a.aggregate&&!r.aggregate))return"vertical";if(Qie(a)&&(pne(a.bin)||Qie(r)&&r.aggregate&&!a.aggregate))return"horizontal";if(o||i){if(n)return n;if(!i&&(Qie(r)&&r.type===Aae&&!hne(r.bin)||roe(r)))return"horizontal";if(!o&&(Qie(a)&&a.type===Aae&&!hne(a.bin)||roe(a)))return"vertical"}case kee:if(i&&(!Qie(r)||!pne(r.bin))&&o&&(!Qie(a)||!pne(a.bin)))return;case gee:if(o)return Qie(a)&&pne(a.bin)?"horizontal":"vertical";if(i)return Qie(r)&&pne(r.bin)?"vertical":"horizontal";if(e===kee){if(r&&!a)return"vertical";if(a&&!r)return"horizontal"}case xee:case See:var u=noe(r),s=noe(a);if(u&&!s)return"tick"!==e?"horizontal":"vertical";if(!u&&s)return"tick"!==e?"vertical":"horizontal";if(u&&s){var c=r,l=a,f=c.type===Nae,d=l.type===Nae;return f&&!d?"tick"!==e?"vertical":"horizontal":!f&&d?"tick"!==e?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==e?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(i.type,t,o),void 0!==o&&o!==i.orient&&Wre(b.orientOverridden(i.orient,o)),"bar"===i.type&&i.orient){var u=Uoe("cornerRadiusEnd",i,n);if(void 0!==u){var s,c="horizontal"===i.orient&&t.x2||"vertical"===i.orient&&t.y2?["cornerRadius"]:Ree[i.orient],l=Object(tr.a)(c);try{for(l.s();!(s=l.n()).done;){i[s.value]=u}}catch(f){l.e(f)}finally{l.f()}void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===Uoe("opacity",i,n)&&(i.opacity=function(e,t){if(M9([_ee,See,Eee,Cee],e)&&!$oe(t))return.7;return}(i.type,t)),void 0===i.filled&&(i.filled=!a&&function(e,t){var n=Woe("filled",e,t),r=e.type;return nee(n,r!==_ee&&r!==xee&&r!==kee)}(i,n)),void 0===Uoe("cursor",i,n)&&(i.cursor=function(e,t,n){if(t.href||e.href||Uoe("href",e,n))return"pointer";return e.cursor}(i,t,n)),i}function Ive(e,t){e.config;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cce("x",e,{defaultPos:"mid"})),Cce("y",e,{defaultPos:"mid"})),Sce("size",e)),Sce("angle",e)),function(e,t,n){if(n)return{shape:{value:n}};return Sce("shape",e)}(e,0,t))}function Fve(e){var t,n=e.config,r=e.markDef,a=r.orient,i="horizontal"===a?"width":"height",o=e.getScaleComponent("horizontal"===a?"x":"y"),u=null!==(t=Uoe("size",r,n,{vgChannel:i}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==u)return u;var s=o?o.get("range"):void 0;return s&&cae(s)&&yt(s.step)?3*s.step/4:3*Uue(n.view,i)/4}var Rve={arc:{vgMark:"arc",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cce("x",e,{defaultPos:"mid"})),Cce("y",e,{defaultPos:"mid"})),Rce(e,"radius","arc")),Rce(e,"theta","arc"))}},area:{vgMark:"area",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),Dce("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),Dce("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),Wce(e))}},bar:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Rce(e,"x","bar")),Rce(e,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(e){return Ive(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(e){return Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}))},postEncodingTransform:function(e){var t=e.encoding.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},t&&Qie(t)&&t.type===Dae?{field:doe(t,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Rce(e,"x","image")),Rce(e,"y","image")),yce(e,"url"))}},line:{vgMark:"line",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Cce("x",e,{defaultPos:"mid"})),Cce("y",e,{defaultPos:"mid"})),Sce("size",e,{vgChannel:"strokeWidth"})),Wce(e))}},point:{vgMark:"symbol",encodeEntry:function(e){return Ive(e)}},rect:{vgMark:"rect",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Rce(e,"x","rect")),Rce(e,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function(e){var t=e.markDef.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Dce("x",e,{defaultPos:"horizontal"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==t})),Dce("y",e,{defaultPos:"vertical"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==t})),Sce("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(e){return Ive(e,"square")}},text:{vgMark:"text",encodeEntry:function(e){var t=e.config;e.encoding;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Cce("x",e,{defaultPos:"mid"})),Cce("y",e,{defaultPos:"mid"})),yce(e)),Sce("size",e,{vgChannel:"fontSize"})),Sce("angle",e)),Vce("align",function(e,t,n){if(void 0===Uoe("align",e,n))return"center";return}(e.markDef,0,t))),Vce("baseline",function(e,t,n){if(void 0===Uoe("baseline",e,n))return"middle";return}(e.markDef,0,t))),Cce("radius",e,{defaultPos:null,isMidPoint:!0})),Cce("theta",e,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:function(e){var t=e.config,n=e.markDef,r=n.orient,a="horizontal"===r?"width":"height",i="horizontal"===r?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Cce("x",e,{defaultPos:"mid",vgChannel:"xc"})),Cce("y",e,{defaultPos:"mid",vgChannel:"yc"})),Sce("size",e,{defaultValue:Fve(e),vgChannel:a})),Object(go.a)({},i,Poe(Uoe("thickness",n,t))))}},trail:{vgMark:"trail",encodeEntry:function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zce(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Cce("x",e,{defaultPos:"mid"})),Cce("y",e,{defaultPos:"mid"})),Sce("size",e)),Wce(e))}}};function Pve(e){return M9([xee,gee,jee],e.mark)?function(e){var t=nue(e.mark,e.encoding),n=Uve(e,{fromPrefix:t.length>0?Lve:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Lve+e.requestDataName(Jse),data:e.requestDataName(Jse),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):M9([bee],e.mark)?function(e){var t=hae.some((function(t){return Uoe(t,e.markDef,e.config)}));if(e.stack&&!e.fieldDef("size")&&t){var n,r,a=Uve(e,{fromPrefix:Bve}),i=Object(Nr.a)(a,1)[0],o=e.scaleName(e.stack.fieldChannel),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.vgField(e.stack.fieldChannel,t)},s=function(e,t){var n=[u({prefix:"min",suffix:"start",expr:t}),u({prefix:"max",suffix:"start",expr:t}),u({prefix:"min",suffix:"end",expr:t}),u({prefix:"max",suffix:"end",expr:t})];return"".concat(e,"(").concat(n.map((function(e){return"scale('".concat(o,"',").concat(e,")")})).join(","),")")};"x"===e.stack.fieldChannel?(n=Object.assign(Object.assign({},E9(i.encode.update,["y","yc","y2","height"].concat(Object(mo.a)(hae)))),{x:{signal:s("min","datum")},x2:{signal:s("max","datum")},clip:{value:!0}}),r={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},i.encode.update=Object.assign(Object.assign({},C9(i.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(n=Object.assign(Object.assign({},E9(i.encode.update,["x","xc","x2","width"])),{y:{signal:s("min","datum")},y2:{signal:s("max","datum")},clip:{value:!0}}),r={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},i.encode.update=Object.assign(Object.assign({},C9(i.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));var c,l=Object(tr.a)(hae);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=Woe(f,e.markDef,e.config);i.encode.update[f]?(n[f]=i.encode.update[f],delete i.encode.update[f]):d&&(n[f]=Poe(d)),d&&(i.encode.update[f]={value:0})}}catch(v){l.e(v)}finally{l.f()}var h=e.fieldDef(e.stack.groupbyChannel),p=doe(h)?[doe(h)]:[];return((null===h||void 0===h?void 0:h.bin)||(null===h||void 0===h?void 0:h.timeUnit))&&p.push(doe(h,{binSuffix:"end"})),(n=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((function(t,n){if(i.encode.update[n])return Object.assign(Object.assign({},t),Object(go.a)({},n,i.encode.update[n]));var r=Woe(n,e.markDef,e.config);return void 0!==r?Object.assign(Object.assign({},t),Object(go.a)({},n,Poe(r))):t}),n)).stroke&&(n.strokeForeground={value:!0},n.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Jse),name:Bve+e.requestDataName(Jse),groupby:p,aggregate:{fields:[u({suffix:"start"}),u({suffix:"start"}),u({suffix:"end"}),u({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:n},marks:[{type:"group",encode:{update:r},marks:[i]}]}]}return Uve(e)}(e):Uve(e)}var Lve="faceted_path_";var Bve="stack_group_";function zve(e){var t=e.encoding,n=e.stack,r=e.mark,a=e.markDef,i=e.config,o=t.order;if(!(!je(o)&&ooe(o)&&N9(o.value)||!o&&N9(Uoe("order",a,i)))){if((je(o)||Qie(o))&&!n)return qoe(o,{expr:"datum"});if(Tee(r)){var u="horizontal"===a.orient?"y":"x",s=t[u];if(Qie(s)){var c=s.sort;return je(c)?{field:doe(s,{prefix:u,suffix:"sort_index",expr:"datum"})}:Uie(c)?{field:doe({aggregate:$oe(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:zie(c)?{field:doe(e.fieldDef(c.encoding),{expr:"datum"}),order:c.order}:null===c?void 0:{field:doe(s,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}function Uve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=e.mark,r=e.markDef,a=e.config,i=nee(r.clip,Wve(e),Vve(e)),o=zoe(r),u=e.encoding.key,s=zve(e),c=Gve(e),l=Uoe("aria",r,a),f=Rve[n].postEncodingTransform?Rve[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:Rve[n].vgMark},i?{clip:!0}:{}),o?{style:o}:{}),u?{key:u.field}:{}),s?{sort:s}:{}),c||{}),!1===l?{aria:l}:{}),{from:{data:t.fromPrefix+e.requestDataName(Jse)},encode:{update:Rve[n].encodeEntry(e)}}),f?{transform:f}:{})]}function Wve(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function Vve(e){var t=e.component.projection;return!(!t||t.isFit)||void 0}function Gve(e){if(!e.component.selection)return null;for(var t=U9(e.component.selection).length,n=t,r=e.parent;r&&0===n;)n=U9(r.component.selection).length,r=r.parent;return n?{interactive:t>0}:null}var qve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a){var i,o,u,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4?arguments[4]:void 0;Object(Rx.a)(this,n),(i=t.call(this,e,"unit",r,a,c,void 0,Lue(e)?e.view:void 0)).specifiedScales={},i.specifiedAxes={},i.specifiedLegends={},i.specifiedProjection={},i.selection={},i.children=[];var l=Dee(e.mark)?e.mark.type:e.mark;i.markDef=Dve(e.mark,null!==(o=e.encoding)&&void 0!==o?o:{},c,{graticule:e.data&&Zse(e.data)});var f=i.encoding=Joe(null!==(u=e.encoding)&&void 0!==u?u:{},i.markDef,c);return i.size=Mve({encoding:f,size:Lue(e)?Object.assign(Object.assign(Object.assign({},s),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):s}),i.stack=vse(l,f),i.specifiedScales=i.initScales(l,f),i.specifiedAxes=i.initAxes(f),i.specifiedLegends=i.initLegend(f),i.specifiedProjection=e.projection,i.selection=e.selection,i}return Object(Px.a)(n,[{key:"hasProjection",get:function(){var e=this.encoding,t=this.mark===Aee,n=e&&Dte.some((function(t){return aoe(e[t])}));return t||n}},{key:"scaleDomain",value:function(e){var t=this.specifiedScales[e];return t?t.domain:void 0}},{key:"axis",value:function(e){return this.specifiedAxes[e]}},{key:"legend",value:function(e){return this.specifiedLegends[e]}},{key:"initScales",value:function(e,t){return one.reduce((function(e,n){var r,a=Soe(t[n]);return a&&(e[n]=null!==(r=a.scale)&&void 0!==r?r:{}),e}),{})}},{key:"initAxes",value:function(e){return Jte.reduce((function(t,n){var r=e[n];if(aoe(r)||n===Qee&&aoe(e.x2)||n===ete&&aoe(e.y2)){var a=aoe(r)?r.axis:void 0;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"initLegend",value:function(e){return ane.reduce((function(t,n){var r=Soe(e[n]);if(r&&function(e){switch(e){case fte:case dte:case hte:case vte:case pte:case gte:case xte:case _te:return!0;case bte:case yte:case mte:return!1}}(n)){var a=r.legend;t[n]=a?Object.assign({},a):a}return t}),{})}},{key:"parseData",value:function(){this.component.data=_ve(this)}},{key:"parseLayoutSize",value:function(){!function(e){var t,n=e.size,r=e.component,a=Object(tr.a)(Jte);try{for(a.s();!(t=a.n()).done;){var i=Yte(t.value);if(n[i]){var o=n[i];r.layoutSize.set(i,Pue(o)?"step":o,!0)}else{var u=mve(e,i);r.layoutSize.set(i,u,!1)}}}catch(s){a.e(s)}finally{a.f()}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(e,t){var n,r,a={},i=e.config.selection,o=Object(tr.a)(U9(null!==t&&void 0!==t?t:{}));try{var u=function(){var o=r.value,u=j9(t[o]),s=i[u.type],c=(s.fields,s.encodings,h9(s,["fields","encodings"]));for(var l in c)"encodings"===l&&u.fields||"fields"===l&&u.encodings||("mark"===l&&(u[l]=Object.assign(Object.assign({},c[l]),u[l])),void 0!==u[l]&&!0!==u[l]||(u[l]=null!==(n=c[l])&&void 0!==n?n:u[l]));var f=q9(o),d=a[f]=Object.assign(Object.assign({},u),{name:f,events:_t(u.on)?j5(u.on,"scope"):j9(u.on)});ple(d,(function(n){n.has(d)&&n.parse&&n.parse(e,d,u,t[o])}))};for(o.s();!(r=o.n()).done;)u()}catch(s){o.e(s)}finally{o.f()}return a}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=Pve(this)}},{key:"parseAxesAndHeaders",value:function(){var e;this.component.axes=(e=this,Jte.reduce((function(t,n){return e.component.scales[n]&&(t[n]=[Nve(n,e)]),t}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(e){return function(e,t){var n=!1;return Tle(e,(function(r,a){var i=r.name,o=At(i+Sle);if(0===t.filter((function(e){return e.name===i})).length){var u="global"===r.resolve?"union":r.resolve,s="multi"===r.type?", true)":")";t.push({name:r.name,update:"".concat(Cle,"(").concat(o,", ").concat(At(u)).concat(s)})}n=!0,a.topLevelSignals&&(t=a.topLevelSignals(e,r,t)),ple(r,(function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n&&0===t.filter((function(e){return"unit"===e.name})).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),gle(t)}(this,e)}},{key:"assembleSignals",value:function(){return[].concat(Object(mo.a)(vde(this)),Object(mo.a)((t=[],Tle(e=this,(function(n,r){var a,i=n.name,o=r.modifyExpr(e,n);(a=t).push.apply(a,Object(mo.a)(r.signals(e,n))),ple(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:i+Ele,on:[{events:{signal:n.name+jle},update:"modify(".concat(At(n.name+Sle),", ").concat(o,")")}]})})),gle(t))));var e,t}},{key:"assembleSelectionData",value:function(e){return function(e,t){var n=Object(mo.a)(t);return Tle(e,(function(t){var r={name:t.name+Sle};if(t.init){var a=t.project.items.map((function(e){return e.signals,h9(e,["signals"])})),i=t.init.map((function(e){return vle(e,!1)}));r.values="interval"===t.type?[{unit:Mle(e,{escape:!1}),fields:a,values:i}]:i.map((function(t){return{unit:Mle(e,{escape:!1}),fields:a,values:t}}))}n.filter((function(e){return e.name===t.name+Sle})).length||n.push(r)})),n}(this,e)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return Hde(this)}},{key:"assembleMarks",value:function(){var e,t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&Hpe(this.parent)||(t=mle(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"mark",get:function(){return this.markDef.type}},{key:"channelHasField",value:function(e){return Koe(this.encoding,e)}},{key:"fieldDef",value:function(e){return Ooe(this.encoding[e])}},{key:"typedFieldDef",value:function(e){var t=this.fieldDef(e);return ioe(t)?t:null}}]),n}(Ype),Hve=function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(e,r,a,i,o){var u;Object(Rx.a)(this,n),u=t.call(this,e,"layer",r,a,o,e.resolve,e.view);var s=Object.assign(Object.assign(Object.assign({},i),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});return u.children=e.layer.map((function(e,t){if(rse(e))return new n(e,Object(Pse.a)(u),u.getName("layer_"+t),s,o);if(Bee(e))return new qve(e,Object(Pse.a)(u),u.getName("layer_"+t),s,o);throw new Error(b.invalidSpec(e))})),u}return Object(Px.a)(n,[{key:"parseData",value:function(){this.component.data=_ve(this);var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseData()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseLayoutSize",value:function(){var e;pve(e=this),vve(e,"width"),vve(e,"height")}},{key:"parseSelections",value:function(){this.component.selection={};var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parseSelections();var r,a=Object(tr.a)(U9(n.component.selection));try{for(a.s();!(r=a.n()).done;){var i=r.value;this.component.selection[i]=n.component.selection[i]}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},{key:"parseMarkGroup",value:function(){var e,t=Object(tr.a)(this.children);try{for(t.s();!(e=t.n()).done;){e.value.parseMarkGroup()}}catch(n){t.e(n)}finally{t.f()}}},{key:"parseAxesAndHeaders",value:function(){!function(e){var t,n,r=e.component,a=r.axes,i=r.resolve,o={top:0,bottom:0,right:0,left:0},u=Object(tr.a)(e.children);try{for(u.s();!(n=u.n()).done;){var s=n.value;s.parseAxesAndHeaders();var c,l=Object(tr.a)(U9(s.component.axes));try{for(l.s();!(c=l.n()).done;){var f=c.value;i.axis[f]=Qde(e.component.resolve,f),"shared"===i.axis[f]&&(a[f]=Eve(a[f],s.component.axes[f]),a[f]||(i.axis[f]="independent",delete a[f]))}}catch(C){l.e(C)}finally{l.f()}}}catch(C){u.e(C)}finally{u.f()}var d,h=Object(tr.a)(Jte);try{for(h.s();!(d=h.n()).done;){var p,v=d.value,m=Object(tr.a)(e.children);try{for(m.s();!(p=m.n()).done;){var g=p.value;if(g.component.axes[v]){if("independent"===i.axis[v]){a[v]=(null!==(t=a[v])&&void 0!==t?t:[]).concat(g.component.axes[v]);var b,y=Object(tr.a)(g.component.axes[v]);try{for(y.s();!(b=y.n()).done;){var x=b.value,_=x.getWithExplicit("orient"),w=_.value,k=_.explicit;if(!sae(w)){if(o[w]>0&&!k){var O=jve[w];o[w]>o[O]&&x.set("orient",O,!1)}o[w]++}}}catch(C){y.e(C)}finally{y.f()}}delete g.component.axes[v]}}}catch(C){m.e(C)}finally{m.f()}if("independent"===i.axis[v]&&a[v]&&a[v].length>1){var S,j=Object(tr.a)(a[v]);try{for(j.s();!(S=j.n()).done;){var E=S.value;E.get("grid")&&!E.explicit.grid&&(E.implicit.grid=!1)}}catch(C){j.e(C)}finally{j.f()}}}}catch(C){h.e(C)}finally{h.f()}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleSignals())}),vde(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),Hde(this))}},{key:"assembleSelectionData",value:function(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleTitle",value:function(){var e=Object(ase.a)(Object(ise.a)(n.prototype),"assembleTitle",this).call(this);if(e)return e;var t,r=Object(tr.a)(this.children);try{for(r.s();!(t=r.n()).done;){if(e=t.value.assembleTitle())return e}}catch(a){r.e(a)}finally{r.f()}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(e,t){var n,r=Object(tr.a)(e.children);try{for(r.s();!(n=r.n()).done;){var a=n.value;Vpe(a)&&(t=mle(a,t))}}catch(i){r.e(i)}finally{r.f()}return t}(this,this.children.flatMap((function(e){return e.assembleMarks()})))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),ghe(this))}}]),n}(Xpe);function Xve(e,t,n,r,a){if(qie(e))return new bve(e,t,n,a);if(rse(e))return new Hve(e,t,n,r,a);if(Bee(e))return new qve(e,t,n,r,a);if(function(e){return Fue(e)||Rue(e)||Iue(e)}(e))return new wve(e,t,n,a);throw new Error(b.invalidSpec(e))}function Yve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.logger&&zre(t.logger),t.fieldTitle&&boe(t.fieldTitle);try{var n=Zue(Ae(t.config,e.config)),r=Mse(e,n),a=Xve(r,null,"",void 0,n);a.parse(),dpe(a.component.data,a);var i=$ve(a,Kve(e,r.autosize,n,a),e.datasets,e.usermeta);return{spec:i,normalized:r}}finally{t.logger&&Ure(),t.fieldTitle&&yoe()}}function Kve(e,t,n,r){var a,i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):_t(t)&&(t={type:t}),i&&o&&("fit"===(a=t.type)||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)Wre(b.droppingFit()),t.type="pad";else if("step"===i||"step"===o){var u="step"===i?"width":"height";Wre(b.droppingFit(nne(u)));var s="width"===u?"height":"width";t.type=function(e){return e?"fit-".concat(nne(e)):"fit"}(s)}return Object.assign(Object.assign(Object.assign({},1===U9(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),Rse(n)),Rse(e))}function $ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=e.config?tse(e.config):void 0,i=[].concat(e.assembleSelectionData([]),cve(e.component.data,n)),o=e.assembleProjections(),u=e.assembleTitle(),s=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0),l=e.assembleLayoutSignals();return l=l.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),t),u?{title:u}:{}),s?{style:s}:{}),c?{encode:{update:c}}:{}),{data:i}),o.length>0?{projections:o}:{}),e.assembleGroup([].concat(Object(mo.a)(l),Object(mo.a)(e.assembleSelectionTopLevelSignals([]))))),a?{config:a}:{}),r?{usermeta:r}:{})}var Zve=new(function(e){Object(ose.a)(n,e);var t=Object(use.a)(n);function n(){return Object(Rx.a)(this,n),t.apply(this,arguments)}return Object(Px.a)(n,[{key:"mapUnit",value:function(e,t){var n=t.config;if(e.encoding){var r=e.encoding,a=e.transform,i=Zoe(r,n),o=i.bins,u=i.timeUnits,s=i.aggregate,c=i.groupby,l=i.encoding,f=[].concat(Object(mo.a)(a||[]),Object(mo.a)(o),Object(mo.a)(u),Object(mo.a)(0===s.length?[]:[{aggregate:s,groupby:c}]));return Object.assign(Object.assign(Object.assign({},e),f.length>0?{transform:f}:{}),{encoding:l})}return e}}]),n}(sse));function Jve(e,t){return Zve.map(e,{config:t})}var Qve=d9.version,eme=n(317),tme=n.n(eme),nme="#fff",rme={background:"#333",title:{color:nme,subtitleColor:nme},style:{"guide-label":{fill:nme},"guide-title":{fill:nme}},axis:{domainColor:nme,gridColor:"#888",tickColor:nme}},ame="#4572a7",ime={background:"#fff",arc:{fill:ame},area:{fill:ame},line:{stroke:ame,strokeWidth:2},path:{stroke:ame},rect:{fill:ame},shape:{stroke:ame},symbol:{fill:ame,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ome="#30a2da",ume="#cbcbcb",sme="#f0f0f0",cme="#333",lme={arc:{fill:ome},area:{fill:ome},axis:{domainColor:ume,grid:!0,gridColor:ume,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:ume,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:sme,group:{fill:sme},legend:{labelColor:cme,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:cme,titleFontSize:14,titlePadding:10},line:{stroke:ome,strokeWidth:2},path:{stroke:ome,strokeWidth:.5},rect:{fill:ome},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ome},bar:{binSpacing:2,fill:ome,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},fme="#000",dme={group:{fill:"#e5e5e5"},arc:{fill:fme},area:{fill:fme},line:{stroke:fme},path:{stroke:fme},rect:{fill:fme},shape:{stroke:fme},symbol:{fill:fme,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},hme="Benton Gothic, sans-serif",pme="#82c6df",vme="Benton Gothic Bold, sans-serif",mme="normal",gme={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},bme={background:"#ffffff",title:{anchor:"start",color:"#000000",font:vme,fontSize:22,fontWeight:"normal"},arc:{fill:pme},area:{fill:pme},line:{stroke:pme,strokeWidth:2},path:{stroke:pme},rect:{fill:pme},shape:{stroke:pme},symbol:{fill:pme,size:30},axis:{labelFont:hme,labelFontSize:11.5,labelFontWeight:"normal",titleFont:vme,titleFontSize:13,titleFontWeight:mme},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:hme,labelFontSize:11.5,symbolType:"square",titleFont:vme,titleFontSize:13,titleFontWeight:mme},range:{category:gme["category-6"],diverging:gme["fireandice-6"],heatmap:gme["fire-7"],ordinal:gme["fire-7"],ramp:gme["fire-7"]}},yme="#ab5787",xme="#979797",_me={background:"#f9f9f9",arc:{fill:yme},area:{fill:yme},line:{stroke:yme},path:{stroke:yme},rect:{fill:yme},shape:{stroke:yme},symbol:{fill:yme,size:30},axis:{domainColor:xme,domainWidth:.5,gridWidth:.2,labelColor:xme,tickColor:xme,tickWidth:.2,titleColor:xme},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},wme="#3e5c69",kme={background:"#fff",arc:{fill:wme},area:{fill:wme},line:{stroke:wme},path:{stroke:wme},rect:{fill:wme},shape:{stroke:wme},symbol:{fill:wme},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ome="#1696d2",Sme="#000000",jme="Lato",Eme="Lato",Cme={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Ame={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:jme},axisX:{domain:!0,domainColor:Sme,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Eme,labelAngle:0,tickColor:Sme,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:jme},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Eme,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:jme,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Eme,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:jme,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Cme["six-groups-cat-1"],diverging:Cme["diverging-colors"],heatmap:Cme["diverging-colors"],ordinal:Cme["six-groups-seq"],ramp:Cme["shades-blue"]},area:{fill:Ome},rect:{fill:Ome},line:{color:Ome,stroke:Ome,strokeWidth:5},trail:{color:Ome,stroke:Ome,strokeWidth:0,size:1},path:{stroke:Ome,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Ome,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ome,stroke:null}},arc:{fill:Ome},shape:{stroke:Ome},symbol:{fill:Ome,size:30}},Tme="#3366CC",Nme="#ccc",Mme="Arial, sans-serif",Dme={arc:{fill:Tme},area:{fill:Tme},path:{stroke:Tme},rect:{fill:Tme},shape:{stroke:Tme},symbol:{stroke:Tme},circle:{fill:Tme},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Mme,fontSize:12},"guide-title":{font:Mme,fontSize:12},"group-title":{font:Mme,fontSize:12}},title:{font:Mme,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Nme,tickColor:Nme,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Ime="2.10.0",Fme=n(386),Rme="vg-tooltip-element",Pme={offsetX:10,offsetY:10,id:Rme,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var Lme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function Bme(e,t){return JSON.stringify(e,function(e){var t=[];return function(n,r){if("object"!==typeof r||null===r)return r;var a=t.indexOf(this)+1;return t.length=a,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var zme,Ume=function(){function e(t){Object(Rx.a)(this,e),this.options=Object.assign(Object.assign({},Pme),t);var n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(Rme,e)}(n);var a=document.head;a.childNodes.length>0?a.insertBefore(r,a.childNodes[0]):a.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return Object(Px.a)(e,[{key:"tooltipHandler",value:function(e,t,n,r){if(null!=r&&""!==r){this.el.innerHTML=function(e,t,n){if(je(e))return"[".concat(e.map((function(e){return t(_t(e)?e:Bme(e,n))})).join(", "),"]");if(Ee(e)){var r="",a=e,i=a.title,o=a.image,u=Lme(a,["title","image"]);i&&(r+="<h2>".concat(t(i),"</h2>")),o&&(r+='<img src="'.concat(t(o),'">'));var s=Object.keys(u);if(s.length>0){r+="<table>";var c,l=Object(tr.a)(s);try{for(l.s();!(c=l.n()).done;){var f=c.value,d=u[f];void 0!==d&&(Ee(d)&&(d=Bme(d,n)),r+='<tr><td class="key">'.concat(t(f),':</td><td class="value">').concat(t(d),"</td></tr>"))}}catch(h){l.e(h)}finally{l.f()}r+="</table>"}return r||"{}"}return t(e)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var a=function(e,t,n,r){var a=e.clientX+n;a+t.width>window.innerWidth&&(a=+e.clientX-n-t.width);var i=e.clientY+r;return i+t.height>window.innerHeight&&(i=+e.clientY-r-t.height),{x:a,y:i}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),i=a.x,o=a.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(i,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),e}(),Wme=(Fme.version,function(e,t,n){var r=e.open(t),a=new URL(t).origin,i=40;e.addEventListener("message",(function t(n){n.source===r&&(i=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){i<=0||(r.postMessage(n,a),setTimeout(e,250),i-=1)}),250)}),Vme='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function Gme(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];qme(e,o)}return e}function qme(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Te(e,a,t[a],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var Hme=g,Xme=y,Yme="undefined"!==typeof window?window:void 0;void 0===Xme&&(null===(zme=null===Yme||void 0===Yme?void 0:Yme.vl)||void 0===zme?void 0:zme.compile)&&(Xme=Yme.vl);var Kme={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},$me={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Zme={vega:"Vega","vega-lite":"Vega-Lite"},Jme={vega:Hme.version,"vega-lite":Xme?Xme.version:"not available"},Qme={vega:function(e){return e},"vega-lite":function(e,t){return Xme.compile(e,{config:t}).spec}},ege='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function tge(e){return"function"===typeof e}function nge(e,t,n,r){var a="<html><head>".concat(t,'</head><body><pre><code class="json">'),i="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(a+e+i),o.document.title="".concat(Zme[r]," JSON Source")}function rge(e,t){var n;if(e.$schema){var r=tme()(e.$schema);t&&t!==r.library&&console.warn("The given visualization spec is written in ".concat(Zme[r.library],", but mode argument sets ").concat(null!==(n=Zme[t])&&void 0!==n?n:t,"."));var a=r.library;return Object(ne.satisfies)(Jme[a],"^".concat(r.version.slice(1)))||console.warn("The input spec uses ".concat(Zme[a]," ").concat(r.version,", but the current version of ").concat(Zme[a]," is v").concat(Jme[a],".")),a}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!==t&&void 0!==t?t:"vega"}function age(e){return!(!e||!("load"in e))}function ige(e,t){var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return k(this,void 0,void 0,w.a.mark((function o(){var u,s,c,l,f;return w.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(u=age(i.loader)?i.loader:Hme.loader(i.loader),!_t(t)){o.next=9;break}return o.t1=JSON,o.next=5,u.load(t);case 5:o.t2=o.sent,o.t0=o.t1.parse.call(o.t1,o.t2),o.next=10;break;case 9:o.t0=t;case 10:return s=o.t0,o.next=13,oge(null!==(n=s.usermeta&&s.usermeta.embedOptions)&&void 0!==n?n:{},u);case 13:return c=o.sent,o.next=16,oge(i,u);case 16:return l=o.sent,f=Object.assign(Object.assign({},Gme(l,c)),{config:Ae(null!==(r=l.config)&&void 0!==r?r:{},null!==(a=c.config)&&void 0!==a?a:{})}),o.next=20,uge(e,s,f,u);case 20:return o.abrupt("return",o.sent);case 21:case"end":return o.stop()}}),o)})))}function oge(e,t){var n;return k(this,void 0,void 0,w.a.mark((function r(){var a,i;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!_t(e.config)){r.next=8;break}return r.t1=JSON,r.next=4,t.load(e.config);case 4:r.t2=r.sent,r.t0=r.t1.parse.call(r.t1,r.t2),r.next=9;break;case 8:r.t0=null!==(n=e.config)&&void 0!==n?n:{};case 9:if(a=r.t0,!_t(e.patch)){r.next=18;break}return r.t4=JSON,r.next=14,t.load(e.patch);case 14:r.t5=r.sent,r.t3=r.t4.parse.call(r.t4,r.t5),r.next=19;break;case 18:r.t3=e.patch;case 19:return i=r.t3,r.abrupt("return",Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),a?{config:a}:{}));case 21:case"end":return r.stop()}}),r)})))}function uge(e,t){var n,r,a,i,o,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0;return k(this,void 0,void 0,w.a.mark((function l(){var f,d,h,p,v,m,g,b,y,_,O,S,j,E,C,A,T,N,M,D,I,F,R,P,L,B,z,W,V,G,q,H,X;return w.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(X=function(){I&&document.removeEventListener("click",I),C.finalize()},f=s.theme?Ae(x[s.theme],null!==(n=s.config)&&void 0!==n?n:{}):s.config,d=gt(s.actions)?s.actions:Gme({},Kme,null!==(r=s.actions)&&void 0!==r?r:{}),h=Object.assign(Object.assign({},$me),s.i18n),p=null!==(a=s.renderer)&&void 0!==a?a:"canvas",v=null!==(i=s.logLevel)&&void 0!==i?i:Hme.Warn,m=null!==(o=s.downloadFileName)&&void 0!==o?o:"visualization",!1!==s.defaultStyle&&(g="vega-embed-style",document.getElementById(g)||((b=document.createElement("style")).id=g,b.innerText=void 0===s.defaultStyle||!0===s.defaultStyle?Vme.toString():s.defaultStyle,document.head.appendChild(b))),y=rge(t,s.mode),_=Qme[y](t,f),"vega-lite"===y&&_.$schema&&(O=tme()(_.$schema),Object(ne.satisfies)(Jme.vega,"^".concat(O.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(O.version,", but current version is v").concat(Jme.vega,"."))),S="string"===typeof e?document.querySelector(e):e){l.next=14;break}throw Error("".concat(e," does not exist"));case 14:return S.classList.add("vega-embed"),d&&S.classList.add("has-actions"),S.innerHTML="",(j=s.patch)&&(_=j instanceof Function?j(_):U(_,j,!0,!1).newDocument),s.formatLocale&&Hme.formatLocale(s.formatLocale),s.timeFormatLocale&&Hme.timeFormatLocale(s.timeFormatLocale),E=Hme.parse(_,"vega-lite"===y?{}:f),C=new Hme.View(E,{loader:c,logLevel:v,renderer:p}),!1!==s.tooltip&&(A=tge(s.tooltip)?s.tooltip:new Ume(!0===s.tooltip?{}:s.tooltip).call,C.tooltip(A)),void 0===(T=s.hover)&&(T="vega"===y),T&&(M=(N="boolean"===typeof T?{}:T).hoverSet,D=N.updateSet,C.hover(M,D)),s&&(null!=s.width&&C.width(s.width),null!=s.height&&C.height(s.height),null!=s.padding&&C.padding(s.padding)),l.next=30,C.initialize(e).runAsync();case 30:if(!1!==d){if(F=S,!1!==s.defaultStyle&&((R=document.createElement("details")).title=h.CLICK_TO_VIEW_ACTIONS,S.append(R),F=R,(P=document.createElement("summary")).innerHTML=ege,R.append(P),I=function(e){R.contains(e.target)||R.removeAttribute("open")},document.addEventListener("click",I)),L=document.createElement("div"),F.append(L),L.classList.add("vega-actions"),!0===d||!1!==d.export)for(B=function(){var e=W[z];if(!0===d||!0===d.export||d.export[e]){var t=h["".concat(e.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=t,n.href="#",n.target="_blank",n.download="".concat(m,".").concat(e),n.addEventListener("mousedown",(function(t){return k(this,void 0,void 0,w.a.mark((function n(){var r;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,C.toImageURL(e,s.scaleFactor);case 3:r=n.sent,this.href=r;case 5:case"end":return n.stop()}}),n,this)})))})),L.append(n)}},z=0,W=["svg","png"];z<W.length;z++)B();!0!==d&&!1===d.source||((V=document.createElement("a")).text=h.SOURCE_ACTION,V.href="#",V.addEventListener("click",(function(e){var n,r;nge(te()(t),null!==(n=s.sourceHeader)&&void 0!==n?n:"",null!==(r=s.sourceFooter)&&void 0!==r?r:"",y),e.preventDefault()})),L.append(V)),"vega-lite"!==y||!0!==d&&!1===d.compiled||((G=document.createElement("a")).text=h.COMPILED_ACTION,G.href="#",G.addEventListener("click",(function(e){var t,n;nge(te()(_),null!==(t=s.sourceHeader)&&void 0!==t?t:"",null!==(n=s.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),L.append(G)),!0!==d&&!1===d.editor||(q=null!==(u=s.editorUrl)&&void 0!==u?u:"https://vega.github.io/editor/",(H=document.createElement("a")).text=h.EDITOR_ACTION,H.href="#",H.addEventListener("click",(function(e){Wme(window,q,{config:f,mode:y,renderer:p,spec:te()(t)}),e.preventDefault()})),L.append(H))}return l.abrupt("return",{view:C,spec:t,vgSpec:_,finalize:X});case 32:case"end":return l.stop()}}),l)})))}},function(e,t,n){"use strict";n.r(t),n.d(t,"validateUpdateShape",(function(){return i})),n.d(t,"validateInput",(function(){return o})),n.d(t,"calculateShapes",(function(){return u}));var r=n(12),a=n(20);function i(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var u=0;u<n.rank-a;++u)if(n.shape[u+a]!==e[u+r])throw new Error(i+" updates.shape[".concat(u+a,"] (").concat(n.shape[u+a],") != shape[").concat(u+a,"] (").concat(e[u+a],")"))}function o(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}i(n,t,e)}function u(e,t,n){for(var i=t.shape.length,o=i>1?t.shape[i-1]:1,u=n.length,s=1,c=o;c<u;++c)s*=n[c];var l=o<1?1:o;return{sliceRank:o,numUpdates:Object(a.O)(t.shape)/l,sliceSize:s,strides:[].concat(Object(r.a)(Object(a.j)(n.slice(0,o))),[1]),outputSize:Object(a.O)(n)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"assertParamsValid",(function(){return i})),n.d(t,"maskToAxes",(function(){return o})),n.d(t,"computeOutShape",(function(){return u})),n.d(t,"stridesWithElidedDims",(function(){return s})),n.d(t,"getNormalizedAxes",(function(){return f})),n.d(t,"startIndicesWithElidedDims",(function(){return d})),n.d(t,"stopIndicesWithElidedDims",(function(){return h})),n.d(t,"stridesForAxis",(function(){return p})),n.d(t,"startForAxis",(function(){return v})),n.d(t,"stopForAxis",(function(){return m})),n.d(t,"isSliceContinous",(function(){return g})),n.d(t,"computeFlatOffset",(function(){return b})),n.d(t,"parseSliceParams",(function(){return y})),n.d(t,"sliceInfo",(function(){return x}));var r=n(12),a=n(20);function i(e,t,n){var r=e.shape.length;a.b(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),a.b(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var i=function(i){a.b(t[i]+n[i]<=e.shape[i],(function(){return"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(t[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(e.shape[i],")")}))},o=0;o<r;++o)i(o)}function o(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function u(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function s(e,t,n,a){for(var i=Object(r.a)(e),o=i.length;o<a.length;o++)i.push(1);for(var u=0;u<n;u++)0===u?i[t]=1:(i.splice(t,0,1),i.pop());return i}function c(e,t,n){return n<=e?n:n-(t-1)}function l(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function f(e,t,n,r,a,i,o,u,c){var l=e.length,f=new Array(l),g=new Array(l),b=new Array(l);if(t.length&&n>0){var y=t[0],x=n+1;f=d(o,y,x,r,e),g=h(u,y,x,a,e),b=s(i,y,x,e)}else for(var _=0;_<l;_++)f[_]=v(o,r,i,e,_,c),g[_]=m(u,a,i,e,_,c),b[_]=p(i,_,c);return{begin:f,end:g,strides:b}}function d(e,t,n,a,i){for(var o=Object(r.a)(i),u=l(n,t),s=0;s<o.length;s++)if(u.indexOf(s)>-1)o[s]=0;else{var f=c(t,n,s),d=a[f];e&1<<f&&(d=0),o[s]=d}return o}function h(e,t,n,i,o){for(var u=Object(r.a)(o),s=l(n,t),f=0;f<u.length;f++)if(s.indexOf(f)>-1)u[f]=Number.MAX_SAFE_INTEGER;else{var d=c(t,n,f),h=i[d];e&1<<d&&(h=Number.MAX_SAFE_INTEGER),u[f]=h}for(var p=0;p<u.length;p++){var v=o[p];u[p]<0&&(u[p]+=v),u[p]=a.i(0,u[p],o[p])}return u}function p(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function v(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=a.i(0,u,c-1)}function m(e,t,n,r,i,o){var u=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==u)&&(u=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var c=r[i];return u<0&&(u+=c),u=s>0?a.i(0,u,c):a.i(-1,u,c-1)}function g(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function b(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function y(e,t,n){var i,o,u=e.shape.length;return(i="number"===typeof t?[t].concat(Object(r.a)(new Array(u-1).fill(0))):t.length<u?t.concat(new Array(u-t.length).fill(0)):t.slice()).forEach((function(e){a.b(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(u).fill(-1):"number"===typeof n?[n].concat(Object(r.a)(new Array(u-1).fill(-1))):n.length<u?n.concat(new Array(u-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(a.b(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-i[n])})),[i,o]}function x(e,t,n,r,a,i,s,c,l){var d=t.slice(),h=n.slice(),p=r;null==r&&(p=new Array(d.length));var v=o(s);if(v.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==s&&0!==c)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==s&&0!==l)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var m=e.length-d.length,g=o(c),b=e.slice();g.forEach((function(e){d[e]=0,h[e]=1,b.splice(e,0,1)}));var y=f(b,v,m,d,h,p,a,i,s),x=y.begin,_=y.end,w=y.strides;d=x,h=_,p=w;var k=o(l);k.forEach((function(e){h[e]=d[e]+1,p[e]=1}));var O=u(d,h,p),S=O.filter((function(e,t){return-1===k.indexOf(t)}));return{nonStrided:p.every((function(e){return 1===e})),$begin:d,$end:h,$strides:p,size:O,newShape:b,outShape:S}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({floorDiv_:function(e,t){var n=Object(u.a)(e,"a","floorDiv"),s=Object(u.a)(t,"b","floorDiv"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.gb,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11),a=n(4);function i(e,t,n){var i={shape:e,value:t,dtype:n};return r.a.runKernel(a.db,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(27),s=n(54),c=n(10),l=n(18);var f=Object(c.b)({avgPool_:function(e,t,n,c,f){var d=Object(i.a)(e,"x","avgPool","float32");o.b(s.h(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var h=d,p=!1;3===d.rank&&(p=!0,h=Object(l.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.b(4===h.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(h.rank,".")})),null!=f&&o.b(o.v(c),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(c,".")}));var v={x:h},m={filterSize:t,strides:n,pad:c,dimRoundingMode:f},g=r.a.runKernel(a.o,v,m);return g=Object(u.a)(g,d.dtype),p?Object(l.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({cos_:function(e){var t={x:Object(i.a)(e,"x","cos")};return r.a.runKernel(a.I,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=Object(i.a)(e,"x","cumsum"),s={x:u},c={axis:t,exclusive:n,reverse:o};return r.a.runKernel(a.L,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({elu_:function(e){var t={x:Object(i.a)(e,"x","elu")};return r.a.runKernel(a.V,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({floor_:function(e){var t={x:Object(i.a)(e,"x","floor")};return r.a.runKernel(a.fb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({imag_:function(e){var t={input:Object(i.a)(e,"input","imag")};return r.a.runKernel(a.rb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Object(i.a)(e,"x","leakyRelu"),o={x:n},u={alpha:t};return r.a.runKernel(a.xb,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({less_:function(e,t){var n=Object(u.a)(e,"a","less"),c=Object(u.a)(t,"b","less"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.yb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(5),a=n(20),i=n(29),o=n(67),u=n(69),s=n(110),c=n(102),l=n(10),f=n(18),d=n(30),h=n(35);var p=Object(l.b)({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=Object(r.a)(e,"x","logSumExp"),p=Object(a.I)(t,l.shape),v=Object(c.a)(l,p,!0),m=Object(d.a)(l,v),g=Object(u.a)(m),b=Object(h.a)(g,p),y=Object(s.a)(b),x=Object(i.a)(Object(f.a)(v,y.shape),y);if(n){var _=Object(o.e)(x.shape,p);return Object(f.a)(x,_)}return x}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(33),u=n(10);var s=Object(u.b)({logicalOr_:function(e,t){var n=Object(i.a)(e,"a","logicalOr","bool"),u=Object(i.a)(t,"b","logicalOr","bool");Object(o.a)(n.shape,u.shape);var s={a:n,b:u};return r.a.runKernel(a.Gb,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(54),s=n(10),c=n(18);var l=Object(s.b)({maxPool_:function(e,t,n,s,l){var f=Object(i.a)(e,"x","maxPool"),d=f,h=!1;3===f.rank&&(h=!0,d=Object(c.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.b(4===d.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(d.rank,".")})),o.b(u.h(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),null!=l&&o.b(o.v(s),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var p={x:d},v={filterSize:t,strides:n,pad:s,dimRoundingMode:l},m=r.a.runKernel(a.Ib,p,v);return h?Object(c.a)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(27),l=n(10);var f=Object(l.b)({minimum_:function(e,t){var n=Object(u.a)(e,"a","minimum"),l=Object(u.a)(t,"b","minimum"),f=Object(o.makeTypesMatch)(n,l),d=Object(r.a)(f,2);n=d[0],l=d[1],"bool"===n.dtype&&(n=Object(c.a)(n,"int32"),l=Object(c.a)(l,"int32")),Object(s.a)(n.shape,l.shape);var h={a:n,b:l};return a.a.runKernel(i.Qb,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({notEqual_:function(e,t){var n=Object(u.a)(e,"a","notEqual"),c=Object(u.a)(t,"b","notEqual"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Zb,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({prelu_:function(e,t){var n={x:Object(i.a)(e,"x","prelu"),alpha:Object(i.a)(t,"alpha","prelu")};return r.a.runKernel(a.gc,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({relu6_:function(e){var t={x:Object(i.a)(e,"x","relu6")};return r.a.runKernel(a.nc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(20),o=n(10);var u=Object(o.b)({fft_:function(e){Object(i.b)("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return r.a.runKernel(a.cb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(20),a=n(91),i=n(53),o=n(183),u=n(10),s=n(160),c=n(18),l=n(44),f=n(111),d=n(117),h=n(37),p=n(193);var v=Object(u.b)({rfft_:function(e,t){Object(r.b)("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,u=e.shape[e.shape.length-1],v=e.size/u;if(null!=t&&t<u){var m=e.shape.map((function(e){return 0})),g=e.shape.map((function(e){return e}));g[e.shape.length-1]=t,n=Object(l.a)(e,m,g),u=t}else if(null!=t&&t>u){var b=e.shape.map((function(e){return e}));b[e.shape.length-1]=t-u,n=Object(i.a)([e,Object(d.a)(b)],e.shape.length-1),u=t}else n=e;var y=Object(h.a)(n),x=Object(c.a)(Object(a.a)(n,y),[v,u]),_=Object(p.a)(x),w=Math.floor(u/2)+1,k=Object(s.a)(_),O=Object(o.a)(_),S=Object(f.a)(k,[w,u-w],k.shape.length-1),j=Object(f.a)(O,[w,u-w],O.shape.length-1),E=n.shape.slice();return E[n.shape.length-1]=w,Object(c.a)(Object(a.a)(S[0],j[0]),E)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(33),c=n(10);var l=Object(c.b)({squaredDifference_:function(e,t){var n=Object(u.a)(e,"a","squaredDifference"),c=Object(u.a)(t,"b","squaredDifference"),l=Object(o.makeTypesMatch)(n,c),f=Object(r.a)(l,2);n=f[0],c=f[1],Object(s.a)(n.shape,c.shape);var d={a:n,b:c};return a.a.runKernel(i.Mc,d,{})}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({unsortedSegmentSum_:function(e,t,n){var u=Object(i.a)(e,"x","unsortedSegmentSum"),s=Object(i.a)(t,"segmentIds","unsortedSegmentSum","int32");Object(o.b)(Object(o.v)(n),(function(){return"numSegments must be of dtype int"}));var c={x:u,segmentIds:s},l={numSegments:n};return r.a.runKernel(a.Yc,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(5),a=n(20),i=n(72),o=n(67),u=n(102),s=n(158),c=n(10),l=n(85),f=n(18),d=n(32),h=n(64),p=n(42),v=n(35);function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Object(i.a)(e);if(1!==e.rank&&null===n)return m(Object(f.a)(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Object(v.a)(Object(i.a)(e),n);if(t===1/0)return Object(u.a)(Object(i.a)(e),n);if(t===-1/0)return Object(s.a)(Object(i.a)(e),n);if("euclidean"===t||2===t)return Object(h.a)(Object(v.a)(Object(l.a)(Object(i.a)(e),Object(d.a)(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Object(u.a)(Object(v.a)(Object(i.a)(e),n[0]),n[1]-1);if(t===1/0)return Object(u.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if(t===-1/0)return Object(s.a)(Object(v.a)(Object(i.a)(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Object(h.a)(Object(v.a)(Object(p.a)(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var g=Object(c.b)({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=m(e=Object(r.a)(e,"x","norm"),t,n),s=u.shape;if(i){var c=Object(a.I)(n,e.shape);s=o.e(u.shape,c)}return Object(f.a)(u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(6),a=n(57),i=!0,o=!1,u=null,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function l(){i=!1}function f(){"hidden"===this.visibilityState&&o&&(i=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function h(){o=!0,window.clearTimeout(u),u=window.setTimeout((function(){o=!1}),100)}function p(){return{isFocusVisible:d,onBlurVisible:h,ref:r.useCallback((function(e){var t,n=a.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("touchstart",l,!0),t.addEventListener("visibilitychange",f,!0))}),[])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(6);function a(e){var t=e.controlled,n=e.default,a=(e.name,e.state,r.useRef(void 0!==t).current),i=r.useState(n),o=i[0],u=i[1];return[a?t:o,r.useCallback((function(e){a||u(e)}),[])]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(63);function a(e){return Object(r.a)(e).defaultView||window}},function(e,t,n){"use strict";var r=n(213),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||a}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!u||!u[g])){var b=d(n,g);try{c(t,g,b)}catch(y){}}}}return t}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(20),o=n(10),u=n(18);var s=Object(o.b)({conv2DBackpropInput_:function(e,t,n,o,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0;i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var f=e,d=t,h=!1;3===t.rank&&(h=!0,d=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),f=[1,e[0],e[1],e[2]]),i.b(4===f.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(f.length,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(d.rank)})),i.b(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var p="NHWC"===c?f[3]:f[1],v="NHWC"===c?d.shape[3]:d.shape[1];i.b(p===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(p,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),i.b(v===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(v,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=l&&i.b(i.v(s),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var m={dy:d,filter:n},g={strides:o,pad:s,dataFormat:c,dimRoundingMode:l,inputShape:f},b=r.a.runKernel(a.E,m,g);return h?Object(u.a)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}})},function(e,t,n){"use strict";n.r(t),n.d(t,"TEST_EPSILON_FLOAT16",(function(){return u})),n.d(t,"expectArraysClose",(function(){return s})),n.d(t,"testEpsilon",(function(){return c})),n.d(t,"expectPromiseToFail",(function(){return f})),n.d(t,"expectArraysEqual",(function(){return d})),n.d(t,"expectNumbersClose",(function(){return h})),n.d(t,"expectValuesInRange",(function(){return v})),n.d(t,"expectArrayBuffersEqual",(function(){return m})),n.d(t,"encodeStrings",(function(){return g}));var r=n(11),a=n(5),i=n(20),o=n(22),u=.1;function s(e,t,n){return null==n&&(n=c()),l(e,t,(function(e,t){return p(e,t,n)}))}function c(){return 32===r.a.backend.floatPrecision()?.001:u}function l(e,t,n){var r=!0;if((Object(i.A)(e)||Object(i.A)(t))&&(r=!1),Object(i.A)(e)&&Object(i.A)(t)&&(r=!0),r){var o=e.constructor.name,u=t.constructor.name;if(o!==u)throw new Error("Arrays are of different type. Actual: ".concat(o,". ")+"Expected: ".concat(u))}if(Array.isArray(e)&&Array.isArray(t)){var s=Object(a.c)(e),c=Object(a.c)(t);if(!Object(i.a)(s,c))throw new Error("Arrays have different shapes. "+"Actual: [".concat(s,"]. Expected: [").concat(c,"]"))}var l=Object(i.A)(e)?e:Object(i.m)(e),f=Object(i.A)(t)?t:Object(i.m)(t);if(l.length!==f.length)throw new Error("Arrays have different lengths actual: ".concat(l.length," vs ")+"expected: ".concat(f.length,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."));for(var d=0;d<f.length;++d){var h=l[d],p=f[d];if(!n(h,p))throw new Error("Arrays differ: actual[".concat(d,"] = ").concat(h,", expected[").concat(d,"] = ").concat(p,".\n")+"Actual:   ".concat(l,".\n")+"Expected: ".concat(f,"."))}}function f(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function d(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return Object(i.z)(e)||Object(i.z)(e[0])||Object(i.z)(t)||Object(i.z)(t[0])?l(e,n,(function(e,t){return e==t})):l(e,t,(function(e,t){return p(e,t,0)}))}function h(e,t,n){if(null==n&&(n=c()),!p(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function p(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function v(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function m(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function g(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?g(n):e[t]=Object(o.encodeString)(n)}return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(277),a=n(282),i=n(145),o=n(278);function u(e){return Object(r.a)(e)||Object(a.a)(e)||Object(i.a)(e)||Object(o.a)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(20),o=n(10),u=n(18);var s=Object(o.b)({conv2DBackpropFilter_:function(e,t,n,o,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",l=arguments.length>6?arguments[6]:void 0,f=e;3===e.rank&&(f=Object(u.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var d=t;3===d.rank&&(d=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.b(4===f.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(f.shape,".")})),i.b(4===d.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(d.shape,".")})),i.b(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var h="NHWC"===c?f.shape[3]:f.shape[1],p="NHWC"===c?d.shape[3]:d.shape[1];i.b(h===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(h,") must ")+"match input depth in filter (".concat(n[2],".")})),i.b(p===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(p,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=l&&i.b(i.v(s),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var v={x:f,dy:d},m={strides:o,pad:s,dataFormat:c,dimRoundingMode:l,filterShape:n};return r.a.runKernel(a.D,v,m)}})},function(e,t,n){"use strict";t.a=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var r=n(6),a=n.n(r);t.a=a.a.createContext(null)},,,,function(e,t,n){"use strict";e.exports=n(436)},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){n(11);var t=n(242),r=n(41),a=Object(r.c)();a.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(function(){return t.isBrowser()})),a.registerFlag("IS_NODE",(function(){return"undefined"!==typeof e&&"undefined"!==typeof e.versions&&"undefined"!==typeof e.versions.node})),a.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),a.registerFlag("PROD",(function(){return!1})),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return a.getBool("DEBUG")})),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),a.registerFlag("IS_TEST",(function(){return!1})),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}))}).call(this,n(214))},function(e,t,n){"use strict";(function(e){var r=n(438),a=n(439),i=n(440);function o(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=d(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),a=(e=u(e,r)).write(t,n);a!==r&&(e=e.slice(0,a));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|h(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?u(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|h(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){var i,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,d=0;d<s;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[n+o]=u}return o}function x(e,t,n,r){return V(U(t,e.length-n),e,n,r)}function _(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return _(e,t,n,r)}function k(e,t,n,r){return V(W(t),e,n,r)}function O(e,t,n,r){return V(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,u,s,c=e[a],l=null,f=c>239?4:c>223?3:c>191?2:1;if(a+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(i=e[a+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=e[a+1],o=e[a+2],128===(192&i)&&128===(192&o)&&(s=(15&c)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=e[a+1],o=e[a+2],u=e[a+3],128===(192&i)&&128===(192&o)&&128===(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=f}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=o(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,a){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),u=Math.min(i,o),c=this.slice(r,a),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],o=l[f];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=z(e[i]);return a}function N(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function M(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,a,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function R(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,i){return i||R(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||R(e,0,n,8),a.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var a=t-e;n=new s(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||M(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=0,o=1,u=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);D(this,e,t,n,a-1,-a)}var i=n-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var o=s.isBuffer(e)?e:U(new s(e,r).toString()),u=o.length;for(i=0;i<n-t;++i)this[i+t]=o[i%u]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function V(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}}).call(this,n(170))},function(e,t,n){var r=n(308);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.merge=t.$=t.style=t.presets=t.keyframes=t.fontFace=t.insertGlobal=t.insertRule=t.plugins=t.styleSheet=void 0,t.speedy=function(e){return f.speedy(e)},t.simulations=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];v=!!e},t.simulate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t=(0,o.default)(t)))return{};if(!v)return m||(console.warn("can't simulate without once calling simulations(true)"),m=!0),g||(console.warn("don't use simulation outside dev"),g=!0),{};return t.reduce((function(e,t){return e["data-simulate-"+y(t)]="",e}),{})},t.cssLabels=function(e){b=!!e},t.isLikeRule=_,t.idFor=w,t.css=G,t.rehydrate=function(e){(0,r.default)(A,e.reduce((function(e,t){return e[t]=!0,e}),{}))},t.flush=function(){A=f.inserted={},T=f.registered={},M={},f.flush(),f.inject()},t.select=H,t.parent=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return G(l({},e+" &",n))},t.media=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return G(l({},"@media "+e,n))},t.pseudo=X,t.active=function(e){return X(":active",e)},t.any=function(e){return X(":any",e)},t.checked=function(e){return X(":checked",e)},t.disabled=function(e){return X(":disabled",e)},t.empty=function(e){return X(":empty",e)},t.enabled=function(e){return X(":enabled",e)},t._default=function(e){return X(":default",e)},t.first=function(e){return X(":first",e)},t.firstChild=function(e){return X(":first-child",e)},t.firstOfType=function(e){return X(":first-of-type",e)},t.fullscreen=function(e){return X(":fullscreen",e)},t.focus=function(e){return X(":focus",e)},t.hover=function(e){return X(":hover",e)},t.indeterminate=function(e){return X(":indeterminate",e)},t.inRange=function(e){return X(":in-range",e)},t.invalid=function(e){return X(":invalid",e)},t.lastChild=function(e){return X(":last-child",e)},t.lastOfType=function(e){return X(":last-of-type",e)},t.left=function(e){return X(":left",e)},t.link=function(e){return X(":link",e)},t.onlyChild=function(e){return X(":only-child",e)},t.onlyOfType=function(e){return X(":only-of-type",e)},t.optional=function(e){return X(":optional",e)},t.outOfRange=function(e){return X(":out-of-range",e)},t.readOnly=function(e){return X(":read-only",e)},t.readWrite=function(e){return X(":read-write",e)},t.required=function(e){return X(":required",e)},t.right=function(e){return X(":right",e)},t.root=function(e){return X(":root",e)},t.scope=function(e){return X(":scope",e)},t.target=function(e){return X(":target",e)},t.valid=function(e){return X(":valid",e)},t.visited=function(e){return X(":visited",e)},t.dir=function(e,t){return X(":dir("+e+")",t)},t.lang=function(e,t){return X(":lang("+e+")",t)},t.not=function(e,t){var n=e.split(",").map((function(e){return e.trim()})).map((function(e){return":not("+e+")"}));if(1===n.length)return X(":not("+e+")",t);return H(n.join(""),t)},t.nthChild=function(e,t){return X(":nth-child("+e+")",t)},t.nthLastChild=function(e,t){return X(":nth-last-child("+e+")",t)},t.nthLastOfType=function(e,t){return X(":nth-last-of-type("+e+")",t)},t.nthOfType=function(e,t){return X(":nth-of-type("+e+")",t)},t.after=function(e){return X("::after",e)},t.before=function(e){return X("::before",e)},t.firstLetter=function(e){return X("::first-letter",e)},t.firstLine=function(e){return X("::first-line",e)},t.selection=function(e){return X("::selection",e)},t.backdrop=function(e){return X("::backdrop",e)},t.placeholder=function(e){return G({"::placeholder":e})},t.cssFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=(0,o.default)(t))?t.map((function(e){var t={label:[]};return L(t,{src:e}),C(x(t),E(t)).join("")})).join(""):""},t.attribsFor=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(t=(0,o.default)(t))?t.map((function(e){w(e);var t=Object.keys(e)[0];return t+'="'+(e[t]||"")+'"'})).join(" "):"";return r};var r=c(n(169)),a=n(481),i=n(368),o=c(n(490)),u=n(491),s=c(n(507));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=t.styleSheet=new a.StyleSheet;f.inject();var d=t.plugins=f.plugins=new u.PluginSet([u.prefixes,u.contentWrap,u.fallbacks]);d.media=new u.PluginSet,d.fontFace=new u.PluginSet,d.keyframes=new u.PluginSet([u.prefixes,u.fallbacks]);var h=!1,p="undefined"!==typeof window,v=h,m=!1,g=!1;var b=h;function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function x(e){var t=JSON.stringify(e),n=(0,s.default)(t).toString(36);return e.label&&e.label.length,n}function _(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));return 1===t.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function w(e){var t=Object.keys(e).filter((function(e){return"toString"!==e}));if(1!==t.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0]);if(!n)throw new Error("not a rule");return n[1]}var k=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function O(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],r=[],a=0;t=k.exec(e);)switch(t[0]){case"(":a++;break;case")":a--;break;case",":if(a)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function S(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=O(t).map((function(t){return t.indexOf("&")>=0?[t.replace(/\&/gm,".css-"+e),t.replace(/\&/gm,"[data-css-"+e+"]")].join(","):".css-"+e+t+",[data-css-"+e+"]"+t})).join(",");return v&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+y(t)+"],[data-css-"+e+"][data-simulate-"+y(t)+"]"),n}function j(e){var t=e.selector,n=e.style,r=d.transform({selector:t,style:n});return r.selector+"{"+(0,i.createMarkupForStyles)(r.style)+"}"}function E(e){var t=void 0,n=void 0,r=void 0,a=void 0;return Object.keys(e).forEach((function(i){i.indexOf("&")>=0?(n=n||{})[i]=e[i]:0===i.indexOf("@media")?(r=r||{})[i]=E(e[i]):0===i.indexOf("@supports")?(a=a||{})[i]=E(e[i]):"label"===i?e.label.length>0&&((t=t||{}).label=b?e.label.join("."):""):(t=t||{})[i]=e[i]})),{plain:t,selects:n,medias:r,supports:a}}function C(e,t){var n=[],r=t.plain,a=t.selects,i=t.medias,o=t.supports;return r&&n.push(j({style:r,selector:S(e)})),a&&Object.keys(a).forEach((function(t){return n.push(j({style:a[t],selector:S(e,t)}))})),i&&Object.keys(i).forEach((function(t){return n.push(t+"{"+C(e,i[t]).join("")+"}")})),o&&Object.keys(o).forEach((function(t){return n.push(t+"{"+C(e,o[t]).join("")+"}")})),n}var A=f.inserted={};var T=f.registered={};function N(e){T[e.id]||(T[e.id]=e)}var M={};function D(e){if(N(e),function(e){if(!A[e.id]){A[e.id]=!0;var t=E(e.style),n=C(e.id,t);A[e.id]=!!p||n,n.forEach((function(e){return f.insert(e)}))}}(e),M[e.id])return M[e.id];var t=l({},"data-css-"+e.id,b&&e.label||"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),M[e.id]=t,t}function I(e,t){var n=O(e).map((function(e){return e.indexOf("&")>=0?e:"&"+e}));return O(t).map((function(e){return e.indexOf("&")>=0?e:"&"+e})).reduce((function(e,t){return e.concat(n.map((function(e){return t.replace(/\&/g,e)})))}),[]).join(",")}function F(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function R(e){for(var t=[],n=0;n<e.length;n++)t=Array.isArray(e[n])?t.concat(R(e[n])):t.concat(e[n]);return t}var P={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]};function L(e,t){var n=t.selector,r=void 0===n?"":n,a=t.mq,i=void 0===a?"":a,u=t.supp,s=void 0===u?"":u,c=t.src,l=void 0===c?{}:c;Array.isArray(l)||(l=[l]),(l=R(l)).forEach((function(t){if(_(t)){var n=function(e){if(_(e)){var t=T[w(e)];if(null==t)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}(t);if("css"!==n.type)throw new Error("cannot merge this rule");t=n.style}(t=(0,o.default)(t))&&t.composes&&L(e,{selector:r,mq:i,supp:s,src:t.composes}),Object.keys(t||{}).forEach((function(n){if(function(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),a=0;a<t.length;a++)if(r===t[a]){n=!0;break}return n||e.indexOf("&")>=0}(n))P[n]&&P[n].forEach((function(a){return L(e,{selector:I(r,a),mq:i,supp:s,src:t[n]})})),L(e,{selector:I(r,n),mq:i,supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@media")}(n))L(e,{selector:r,mq:(o=i,u=n,o?"@media "+o.substring(6)+" and "+u.substring(6):u),supp:s,src:t[n]});else if(function(e){return 0===e.indexOf("@supports")}(n))L(e,{selector:r,mq:i,supp:F(s,n),src:t[n]});else if("composes"===n);else{var a=e;s&&(a[s]=a[s]||{},a=a[s]),i&&(a[i]=a[i]||{},a=a[i]),r&&(a[r]=a[r]||{},a=a[r]),"label"===n?b&&(e.label=e.label.concat(t.label)):a[n]=t[n]}var o,u}))}))}function B(e){var t={label:[]};return L(t,{src:e}),D({id:x(t),style:t,label:b?t.label.join("."):"",type:"css"})}var z={};Object.defineProperty(z,"toString",{enumerable:!1,value:function(){return"css-nil"}});var U="undefined"!==typeof WeakMap?[z,new WeakMap,new WeakMap,new WeakMap]:[z];var W,V="undefined"!==typeof WeakMap?(W=B,function(e){if(U[e.length]){for(var t=U[e.length],n=0;n<e.length-1;)t.has(e[n])||t.set(e[n],new WeakMap),t=t.get(e[n]),n++;if(t.has(e[e.length-1])){var r=t.get(e[n]);if(T[r.toString().substring(4)])return r}}var a=W(e);if(U[e.length]){for(var i=0,o=U[e.length];i<e.length-1;)o=o.get(e[i]),i++;try{o.set(e[i],a)}catch(u){}}return a}):B;function G(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return(t=(0,o.default)(t))?V(t):z}G.insert=function(e){var t={id:x(e),css:e,type:"raw"};N(t),A[t.id]||(f.insert(t.css),A[t.id]=!!p||[t.css])};t.insertRule=G.insert;G.global=function(e,t){if(t=(0,o.default)(t))return G.insert(j({selector:e,style:t}))};t.insertGlobal=G.global;G.keyframes=function(e,t){t||(t=e,e="animation");var n={id:x({name:e,kfs:t=(0,o.default)(t)||{}}),type:"keyframes",name:e,keyframes:t};return N(n),function(e){if(!A[e.id]){var t=Object.keys(e.keyframes).map((function(t){var n=d.keyframes.transform({id:e.id,name:t,style:e.keyframes[t]});return n.name+"{"+(0,i.createMarkupForStyles)(n.style)+"}"})).join(""),n=["-webkit-","-moz-","-o-",""].map((function(n){return"@"+n+"keyframes "+e.name+"_"+e.id+"{"+t+"}"}));n.forEach((function(e){return f.insert(e)})),A[e.id]=!!p||n}}(n),e+"_"+n.id},G.fontFace=function(e){var t={id:x(e=(0,o.default)(e)),type:"font-face",font:e};return N(t),function(e){if(!A[e.id]){var t="@font-face{"+(0,i.createMarkupForStyles)(e.font)+"}";f.insert(t),A[e.id]=!!p||[t]}}(t),e.fontFamily};t.fontFace=G.fontFace,t.keyframes=G.keyframes;t.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"};var q=t.style=G;function H(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?G(l({},e,n)):q(n)}t.$=H;t.merge=G,t.compose=G;function X(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return G(l({},e,n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(1),a=n(9),i=function(){function e(t,n){Object(r.a)(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Object(a.a)(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),o=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"refCount",value:function(e){return u("refCount")}},{key:"incRef",value:function(e){return u("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return u("time")}},{key:"read",value:function(e){return u("read")}},{key:"readSync",value:function(e){return u("readSync")}},{key:"numDataIds",value:function(){return u("numDataIds")}},{key:"disposeData",value:function(e,t){return u("disposeData")}},{key:"write",value:function(e,t,n){return u("write")}},{key:"move",value:function(e,t,n,r,a){return u("move")}},{key:"memory",value:function(){return u("memory")}},{key:"floatPrecision",value:function(){return u("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return u("dispose")}}]),e}();function u(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({tanh_:function(e){var t={x:Object(i.a)(e,"x","tanh")};return r.a.runKernel(a.Sc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11),a=n(4);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var o={start:e,stop:t,step:n,dtype:i};return r.a.runKernel(a.ic,{},o)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=1.7580993408473768,a=1.0507009873554805},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n(66),a=n(70),i=n(6),o=n.n(i),u=n(106),s=(n(38),n(17)),c=n(86),l=n(96),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(u.a)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return o.a.createElement(r.b,{history:this.history,children:this.props.children})},t}(o.a.Component);o.a.Component;var d=function(e,t){return"function"===typeof e?e(t):e},h=function(e,t){return"string"===typeof e?Object(u.c)(e,null,null,t):e},p=function(e){return e},v=o.a.forwardRef;"undefined"===typeof v&&(v=p);var m=v((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,i=Object(c.a)(e,["innerRef","navigate","onClick"]),u=i.target,l=Object(s.a)({},i,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==v&&t||n,o.a.createElement("a",l)}));var g=v((function(e,t){var n=e.component,a=void 0===n?m:n,i=e.replace,u=e.to,f=e.innerRef,g=Object(c.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=h(d(u,e.location),e.location),c=r?n.createHref(r):"",m=Object(s.a)({},g,{href:c,navigate:function(){var t=d(u,e.location);(i?n.replace:n.push)(t)}});return p!==v?m.ref=t||f:m.innerRef=f,o.a.createElement(a,m)}))})),b=function(e){return e},y=o.a.forwardRef;"undefined"===typeof y&&(y=b);y((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,i=e.activeClassName,u=void 0===i?"active":i,f=e.activeStyle,p=e.className,v=e.exact,m=e.isActive,x=e.location,_=e.sensitive,w=e.strict,k=e.style,O=e.to,S=e.innerRef,j=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(r.d.Consumer,null,(function(e){e||Object(l.a)(!1);var n=x||e.location,i=h(d(O,n),n),c=i.pathname,E=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=E?Object(r.e)(n.pathname,{path:E,exact:v,sensitive:_,strict:w}):null,A=!!(m?m(C,n):C),T=A?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(p,u):p,N=A?Object(s.a)({},k,{},f):k,M=Object(s.a)({"aria-current":A&&a||null,className:T,style:N,to:i},j);return b!==y?M.ref=t||S:M.innerRef=S,o.a.createElement(g,M)}))}))},function(e,t,n){"use strict";var r=n(52),a=Object(r.a)((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));a.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(r.a)((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},t.a=a;a.range},function(e,t,n){"use strict";var r=n(52),a=Object(r.a)((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));a.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Object(r.a)((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},t.a=a;a.range},,,,function(e,t){var n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},function(e,t,n){(function(t){var n="object"===typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"/ca-ml-webapp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:"/ca-ml-webapp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/ca-ml-webapp",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG)?function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["SEMVER"].concat(n))}:function(){};e.exports=n}).call(this,n(214))},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return r(e,t,n)>0}},function(e,t,n){var r=n(150),a=n(151),i=Symbol("SemVer ANY"),o=function(){"use strict";function e(t,n){if(r(this,e),n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),t instanceof e){if(t.loose===!!n.loose)return t;t=t.value}f("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===i?this.value="":this.value=this.operator+this.semver.version,f("comp",this)}return a(e,[{key:"parse",value:function(e){var t=this.options.loose?s[c.COMPARATORLOOSE]:s[c.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=i}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(f("Comparator.test",e,this.options.loose),this.semver===i||e===i)return!0;if("string"===typeof e)try{e=new d(e,this.options)}catch(t){return!1}return l(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");if(n&&"object"===typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new h(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new h(this.value,n).test(t.semver);var r=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),a=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),i=this.semver.version===t.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),u=l(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),s=l(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||a||i&&o||u||s}}],[{key:"ANY",get:function(){return i}}]),e}();e.exports=o;var u=n(171),s=u.re,c=u.t,l=n(365),f=n(235),d=n(84),h=n(108)},function(e,t,n){var r=n(108);e.exports=function(e,t,n){try{t=new r(t,n)}catch(a){return!1}return t.test(e)}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function a(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=r,t.assertShapesMatch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(a(e,t),n+" Shapes ".concat(e," and ").concat(t," must match"))},t.arraysEqual=a,t.DECIMAL_PLACES_TO_CHECK=4},function(e,t,n){"use strict";var r=n(2),a=n(307),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),u=n(239);t.arrayStats=function(e){if(!Array.isArray(e))throw new Error("input must be an array");if(0===e.length)return{numVals:0,numNans:0,numZeros:0,max:void 0,min:void 0};for(var t=e.length,n=-1/0,r=1/0,a=0,i=0,o=0,u=0;u<t;u++){var s=e[u];s>n&&(n=s),s<r&&(r=s),0===s&&(a+=1),isNaN(s)?i+=1:isFinite(s)||(o+=1)}var c={numVals:t,numZeros:a,numNans:i,max:n,min:r,numInfs:o};return c.max===-1/0&&(c.max=NaN),c.min===1/0&&(c.min=NaN),c},t.tensorStats=function(e){return i(this,void 0,void 0,r.mark((function t(){var n,i,u,s,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.tidy((function(){var t=o.scalar(0,e.dtype);return[e.min(),e.max(),e.equal(t).sum()]})),i=a(n,3),u=i[0],s=i[1],c=i[2],t.abrupt("return",Promise.all([e.data(),u.data(),s.data(),c.data()]).then((function(e){for(var t=a(e,4),n=t[0],r=t[1],i=t[2],o=t[3],u=n.length,s=0,c=0,l=0;l<u;l++){var f=n[l];isNaN(f)?s+=1:isFinite(f)||(c+=1)}var d=r[0],h=i[0];return s===u&&(d=NaN,h=NaN),{numVals:u,numZeros:o[0],numNans:s,min:d,max:h,numInfs:c}})));case 2:case"end":return t.stop()}}),t)})))},t.confusionMatrix=function(e,t,n,s){return i(this,void 0,void 0,r.mark((function i(){var c,l,f;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null!=s&&u.assert(s.size===t.size,"labels and predictions must be the same length"),c=e.cast("int32"),l=t.cast("int32"),null==n&&(n=o.tidy((function(){return o.maximum(c.max(),l.max()).cast("int32").dataSync()[0]+1}))),f=Promise.resolve(null),null!=s&&(f=s.data()),r.abrupt("return",Promise.all([c.data(),l.data(),f]).then((function(e){for(var t=a(e,3),r=t[0],i=t[1],o=t[2],u=Array(n).fill(0),s=0;s<n;s++)u[s]=Array(n).fill(0);for(var c=0;c<r.length;c++){var l=r[c],f=i[c];u[l][f]+=null!=o?o[c]:1}return u})));case 10:case"end":return r.stop()}}),i)})))},t.accuracy=function(e,t){return i(this,void 0,void 0,r.mark((function n(){var a,i,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u.assertShapesMatch(e.shape,t.shape,"Error computing accuracy."),a=e.equal(t),i=a.mean(),n.next=5,i.data();case 5:return s=n.sent[0],o.dispose([a,i]),n.abrupt("return",s);case 8:case"end":return n.stop()}}),n)})))},t.perClassAccuracy=function(e,t,n){return i(this,void 0,void 0,r.mark((function i(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u.assert(1===e.rank,"labels must be a 1D tensor"),u.assert(1===t.rank,"predictions must be a 1D tensor"),u.assert(e.size===t.size,"labels and predictions must be the same length"),null==n&&(n=o.tidy((function(){return o.maximum(e.max(),t.max()).dataSync()[0]+1}))),r.abrupt("return",Promise.all([e.data(),t.data()]).then((function(e){for(var t=a(e,2),r=t[0],i=t[1],o=Array(n).fill(0),u=Array(n).fill(0),s=0;s<r.length;s++){var c=r[s],l=i[s];o[c]+=1,c===l&&(u[c]+=1)}for(var f=[],d=0;d<o.length;d++)f.push({count:o[d],accuracy:0===o[d]?0:u[d]/o[d]});return f})));case 5:case"end":return r.stop()}}),i)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),a=n(548),i=n(218),o=n(109);t.table=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&null==t.headers)throw new Error('Data to render must have a "headers" property');if(t&&null==t.values)throw new Error('Data to render must have a "values" property');var s=o.getDrawArea(e),c=Object.assign({},u,n),l=a.select(s).select("table.tf-table"),f=i.css({fontSize:c.fontSize||".875rem",width:"100%",maxWidth:"64rem",marginRight:"auto",marginLeft:"auto"});if(0===l.size()&&((l=a.select(s).append("table")).attr("class"," ".concat(f," tf-table")),l.append("thead").append("tr"),l.append("tbody")),1!==l.size())throw new Error("Error inserting table");var d=i.css({fontWeight:"600",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )",textAlign:"left",paddingBottom:"1rem",paddingRight:"1rem",backgroundColor:"#fff"}),h=l.select("thead").select("tr").selectAll("th").data(t.headers),p=h.enter().append("th").attr("class","".concat(d));h.merge(p).html((function(e){return e})),h.exit().remove();var v=r.format(",.4~f"),m=l.select("tbody").selectAll("tr").data(t.values),g=m.enter().append("tr"),b=i.css({padding:"0.25rem",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"rgba( 0, 0, 0, .2 )"}),y=m.merge(g).selectAll("td").data((function(e){return e})),x=y.enter().append("td").attr("class","".concat(b));y.merge(x).html((function(e){return"number"===typeof e?v(e):e})),y.exit().remove(),m.exit().remove()};var u={fontSize:14}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function a(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}n.r(t),n.d(t,"isMobile",(function(){return r})),n.d(t,"isBrowser",(function(){return a}))},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","all","bool"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.f,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.a)(e,"x","any","bool"),u={x:o},s={axis:t,keepDims:n};return r.a.runKernel(a.g,u,s)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMax"),o={x:n},u={axis:t};return r.a.runKernel(a.h,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(i.a)(e,"x","argMin"),o={x:n},u={axis:t};return r.a.runKernel(a.i,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({atan2_:function(e,t){var n=Object(u.a)(e,"a","atan2"),s=Object(u.a)(t,"b","atan2"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.m,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(20),i=n(98),o=n(54),u=n(10),s=n(18);var c=Object(u.b)({conv1d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,f=arguments.length>6?arguments[6]:void 0,d=Object(r.a)(e,"x","conv1d"),h=Object(r.a)(t,"filter","conv1d"),p=d,v=!1;2===d.rank&&(v=!0,p=Object(s.a)(d,[1,d.shape[0],d.shape[1]])),a.b(3===p.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(p.rank,".")})),a.b(3===h.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(h.rank,".")})),null!=f&&a.b(a.v(u),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(f," but got pad ").concat(u,".")})),a.b(p.shape[2]===h.shape[1],(function(){return"Error in conv1d: depth of input (".concat(p.shape[2],") must match ")+"input depth for filter ".concat(h.shape[1],".")})),a.b(o.h(n,l),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(l,"'")})),a.b("NWC"===c,(function(){return"Error in conv1d: got dataFormat of ".concat(c," but only NWC is currently supported.")}));var m=Object(s.a)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),g=Object(s.a)(p,[p.shape[0],1,p.shape[1],p.shape[2]]),b=[1,n],y=[1,l],x="NHWC",_=Object(i.a)(g,m,b,u,x,y,f);return v?Object(s.a)(_,[_.shape[2],_.shape[3]]):Object(s.a)(_,[_.shape[0],_.shape[2],_.shape[3]])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5),a=n(203),i=n(10);var o=Object(i.b)({conv2dTranspose_:function(e,t,n,i,o,u){var s=Object(r.a)(e,"x","conv2dTranspose"),c=Object(r.a)(t,"filter","conv2dTranspose");return Object(a.a)(n,s,c,i,o,"NHWC",u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({cosh_:function(e){var t={x:Object(i.a)(e,"x","cosh")};return r.a.runKernel(a.J,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",u=Object(i.a)(e,"x","depthToSpace"),s="NHWC"===n?u.shape[1]:u.shape[2],c="NHWC"===n?u.shape[2]:u.shape[3],l="NHWC"===n?u.shape[3]:u.shape[1];o.b(s*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(s," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(u.shape)})),o.b(c*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(c," and ").concat(t," for depthToSpace with input shape\n        ").concat(u.shape)})),o.b(l%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(l," for depthToSpace with input shape ").concat(u.shape)}));var f={x:u},d={blockSize:t,dataFormat:n};return r.a.runKernel(a.N,f,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10),s=n(18);var c=Object(u.b)({dilation2d_:function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",f=Object(i.a)(e,"x","dilation2d"),d=Object(i.a)(t,"filter","dilation2d");o.b(3===f.rank||4===f.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(f.rank,".")})),o.b(3===d.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(d.rank,".")})),o.b("NHWC"===l,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(l)}));var h=f,p=!1;3===f.rank&&(h=Object(s.a)(f,[1,f.shape[0],f.shape[1],f.shape[2]]),p=!0);var v={x:h,filter:d},m={strides:n,pad:u,dilations:c},g=r.a.runKernel(a.S,v,m);return p?Object(s.a)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(7),a=n(40),i=n(5),o=n(31),u=n(139),s=n(10),c=n(62),l=n(37);var f=Object(s.b)({divNoNan_:function(e,t){var n=Object(i.a)(e,"a","div"),s=Object(i.a)(t,"b","div"),f=Object(a.makeTypesMatch)(n,s),d=Object(r.a)(f,2);n=d[0],s=d[1];var h=Object(o.a)(n,s),p=Object(l.a)(h),v=Object(u.a)(s,p);return Object(c.a)(v,p,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(5),a=n(20),i=n(45),o=n(10),u=n(18);var s=Object(o.b)({dot_:function(e,t){var n=Object(r.a)(e,"t1","dot"),o=Object(r.a)(t,"t2","dot");a.b((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(o.rank,".")}));var s=1===n.rank?n.size:n.shape[1],c=1===o.rank?o.size:o.shape[0];if(a.b(s===c,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(s," and ").concat(c,".")})),1===n.rank&&1===o.rank){var l=Object(u.a)(n,[1,-1]),f=Object(u.a)(o,[-1,1]),d=Object(i.a)(l,f);return Object(u.a)(d,[])}if(1===n.rank&&2===o.rank){var h=Object(u.a)(n,[1,-1]),p=Object(u.a)(o,[o.shape[0],o.shape[1]]),v=Object(i.a)(h,p);return Object(u.a)(v,[v.size])}if(2===n.rank&&1===o.rank){var m=Object(u.a)(o,[-1,1]),g=Object(i.a)(n,m);return Object(u.a)(g,[g.size])}var b=Object(u.a)(o,[o.shape[0],o.shape[1]]);return Object(i.a)(n,b)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10),s=n(18);var c=Object(u.b)({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,l=Object(i.a)(e,"x","localResponseNormalization");o.b(4===l.rank||3===l.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(l.rank,".")})),o.b(o.v(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(s.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));var h={x:f},p={depthRadius:t,bias:n,alpha:u,beta:c},v=r.a.runKernel(a.vb,h,p);return d?Object(s.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({log1p_:function(e){var t={x:Object(i.a)(e,"x","log1p")};return r.a.runKernel(a.Cb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({softplus_:function(e){var t={x:Object(i.a)(e,"x","softplus")};return r.a.runKernel(a.Gc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(33),i=n(92),o=n(141),u=n(187),s=n(10);var c=Object(s.b)({logicalXor_:function(e,t){var n=Object(r.a)(e,"a","logicalXor","bool"),s=Object(r.a)(t,"b","logicalXor","bool");return Object(a.a)(n.shape,s.shape),Object(i.a)(Object(u.a)(e,t),Object(o.a)(Object(i.a)(e,t)))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({mirrorPad_:function(e,t,n){o.b("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var u=Object(i.a)(e,"x","mirrorPad");if(0===u.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.b(t.length===u.rank,(function(){return"Padding doesn't match input. Must be ".concat(u.rank,". ")+"Got ".concat(t.length,".")}));for(var s="reflect"===n?1:0,c=function(e){o.b(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),o.b(t[e][0]>=0&&t[e][0]<=u.shape[e]-s&&t[e][1]>=0&&t[e][1]<=u.shape[e]-s,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(u.shape[e]-s," or less than 0 for input of ")+"shape ".concat(u.shape)}))},l=0;l<u.rank;l++)c(l);var f={paddings:t,mode:n},d={x:u};return r.a.runKernel(a.Rb,d,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(40),u=n(5),s=n(10);var c=Object(s.b)({mod_:function(e,t){var n=Object(u.a)(e,"a","mod"),s=Object(u.a)(t,"b","mod"),c=Object(o.makeTypesMatch)(n,s),l=Object(r.a)(c,2),f={a:n=l[0],b:s=l[1]};return a.a.runKernel(i.Sb,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(7),a=n(5),i=n(20),o=n(178),u=n(137),s=n(54),c=n(188),l=n(10),f=n(18),d=n(142);var h=Object(l.b)({pool_:function(e,t,n,l,h,p){null==h&&(h=[1,1]),null==p&&(p=1),0===l&&(l="valid");var v=Object(a.a)(e,"x","maxPool"),m=v,g=!1;3===v.rank&&(g=!0,m=Object(f.a)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),i.b(s.h(p,h),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(p," and dilations '").concat(h,"'")}));var b,y=s.e(m.shape,t,p,h,l),x=[y.dilationHeight,y.dilationWidth];b="same"===l?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([y.filterHeight,y.filterWidth],x):[[0,0],[0,0]];var _=1===x[0]&&1===x[1],w=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),u=a.map((function(e,t){return e+o[t]})),s=t.map((function(e,t){return[r[t],u[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[s,c]}([y.inHeight,y.inWidth],x,b),k=Object(r.a)(w,2),O=k[0],S=k[1],j=_?l:"valid",E=_?m:Object(d.a)(m,x,O),C=("avg"===n?function(){return Object(o.a)(E,t,p,j)}:function(){return Object(c.a)(E,t,p,j)})(),A=_?C:Object(u.a)(C,x,S);return g?Object(f.a)(A,[A.shape[1],A.shape[2],A.shape[3]]):A}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(27),u=n(10);var s=Object(u.b)({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=Object(i.a)(e,"x","prod");"bool"===u.dtype&&(u=Object(o.a)(u,"int32"));var s={x:u},c={axis:t,keepDims:n};return r.a.runKernel(a.hc,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(77),a=n(10),i=n(147);var o=Object(a.b)({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",o=arguments.length>4?arguments[4]:void 0,u=Object(r.a)(e,a),s=new i.c(t,n,null,o),c=0;c<u.values.length;c++)u.values[c]=s.nextValue();return u.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({rsqrt_:function(e){var t={x:Object(i.a)(e,"x","rsqrt")};return r.a.runKernel(a.wc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({selu_:function(e){var t={x:Object(i.a)(e,"x","selu")};return r.a.runKernel(a.zc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),a=n(20),i=n(98),o=n(138),u=n(10),s=n(18);var c=Object(u.b)({separableConv2d_:function(e,t,n,u,c){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",d=Object(r.a)(e,"x","separableConv2d"),h=Object(r.a)(t,"depthwiseFilter","separableConv2d"),p=Object(r.a)(n,"pointwiseFilter","separableConv2d"),v=d,m=!1;if(3===d.rank&&(m=!0,v=Object(s.a)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),"NCHW"===f)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.b(4===v.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(v.rank,".")})),a.b(4===h.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(h.rank,".")})),a.b(4===p.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(h.rank,".")})),a.b(1===p.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(p.shape[0],".")})),a.b(1===p.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(p.shape[1],".")}));var g=h.shape[2],b=h.shape[3];a.b(p.shape[2]===g*b,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(g*b,", ")+"but got ".concat(p.shape[2],".")}));var y=Object(o.a)(v,h,u,c,f,l),x=1,_=Object(i.a)(y,p,x,"valid",f);return m?Object(s.a)(_,[_.shape[1],_.shape[2],_.shape[3]]):_}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({sin_:function(e){var t={x:Object(i.a)(e,"x","sin")};return r.a.runKernel(a.Cc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({sinh_:function(e){var t={x:Object(i.a)(e,"x","sinh")};return r.a.runKernel(a.Dc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(91),a=n(53),i=n(183),o=n(21),u=n(10),s=n(160),c=n(18),l=n(78),f=n(32),d=n(44),h=n(161);var p=Object(u.b)({irfft_:function(e){var t,n=e.shape[e.shape.length-1],u=e.size/n;if(n<=2){var p=Object(c.a)(e,[u,n]);t=Object(h.a)(p)}else{var v=[u,2*(n-1)],m=Object(c.a)(Object(s.a)(e),[u,n]),g=Object(c.a)(Object(i.a)(e),[u,n]),b=Object(l.a)(Object(d.a)(m,[0,1],[u,n-2]),1),y=Object(o.a)(Object(l.a)(Object(d.a)(g,[0,1],[u,n-2]),1),Object(f.a)(-1)),x=Object(a.a)([m,b],1),_=Object(a.a)([g,y],1),w=Object(c.a)(Object(r.a)(x,_),[v[0],v[1]]);t=Object(h.a)(w)}if(t=Object(s.a)(t),3===e.rank&&0!==e.shape[0]){var k=t,O=e.shape[0];t=Object(c.a)(t,[O,t.shape[0]/O,t.shape[1]]),k.dispose()}return t}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(5),a=n(20),i=n(80);function o(e,t,n){if(Object(a.d)(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var o=Object(r.c)(e,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Object(i.a)(e,t,o,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),a=n(11),i=n(4),o=n(5),u=n(10);var s=Object(u.b)({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=Object(o.a)(e,"x","topk");if(0===u.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var s=u.shape[u.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(s,") ")+"but got ".concat(t));var c={x:u},l={k:t,sorted:n},f=a.a.runKernel(i.Uc,c,l),d=Object(r.a)(f,2),h=d[0],p=d[1];return{values:h,indices:p}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(7),a=n(11),i=n(4),o=n(5),u=n(20),s=n(10);var c=Object(s.b)({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(o.a)(e,"x","unique","string_or_numeric");Object(u.b)(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var s={x:n},c={axis:t},l=a.a.runKernel(i.Wc,s,c),f=Object(r.a)(l,2),d=f[0],h=f[1];return{values:d,indices:h}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n.n(r),i=n(16),o=n(275),u=n(5);function s(){return(s=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,i=Object(o.a)(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=function(e){return s.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(77);function a(e,t){for(var n=[],a=0;a<t.length;a++)t[a]&&n.push(a);for(var i=Object(r.a)(e,"int32"),o=Object(r.a)([n.length,e.length],"int32"),u=0;u<n.length;u++){var s=i.indexToLoc(n[u]),c=u*e.length;o.values.set(s,c)}return o.toTensor()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(17),a=n(6),i=n.n(a),o=n(23),u=(n(38),n(26)),s=n(34),c=n(46),l=a.forwardRef((function(e,t){var n=e.children,i=e.classes,s=e.className,l=e.color,f=void 0===l?"inherit":l,d=e.component,h=void 0===d?"svg":d,p=e.fontSize,v=void 0===p?"default":p,m=e.htmlColor,g=e.titleAccess,b=e.viewBox,y=void 0===b?"0 0 24 24":b,x=Object(o.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return a.createElement(h,Object(r.a)({className:Object(u.a)(i.root,s,"inherit"!==f&&i["color".concat(Object(c.a)(f))],"default"!==v&&i["fontSize".concat(Object(c.a)(v))]),focusable:"false",viewBox:y,color:m,"aria-hidden":!g||void 0,role:g?"img":void 0,ref:t},x),n,g?a.createElement("title",null,g):null)}));l.muiName="SvgIcon";var f=Object(s.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(l);function d(e,t){var n=function(t,n){return i.a.createElement(f,Object(r.a)({ref:n},t),e)};return n.muiName=f.muiName,i.a.memo(i.a.forwardRef(n))}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,a=/^ms-/,i={};function o(e){return"-"+e.toLowerCase()}t.default=function(e){if(i.hasOwnProperty(e))return i[e];var t=e.replace(r,o);return i[e]=a.test(t)?"-"+t:t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(226);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500}},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(20),o=n(10),u=n(18);var s=Object(o.b)({conv3DBackpropInput_:function(e,t,n,o,s){i.b(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var c=e,l=t,f=!1;4===t.rank&&(f=!0,l=Object(u.a)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),c=[1,e[0],e[1],e[2],e[3]]);var d=c[4],h=l.shape[4];i.b(5===c.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(c.length,".")})),i.b(5===l.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(l.rank)})),i.b(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),i.b(d===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(d,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),i.b(h===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var p={dy:l,filter:n},v={pad:s,strides:o,inputShape:c},m=r.a.runKernel(a.H,p,v);return f?Object(u.a)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(205),a=n(11),i=n(4),o=n(5),u=n(20),s=n(10),c=n(18);var l=Object(s.b)({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeNearestNeighbor");u.b(3===l.rank||4===l.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.b(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),u.b("float32"===l.dtype||"int32"===l.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),u.b(!1===s||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var h={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.a.runKernel(i.rc,h,p);return d?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(205),a=n(11),i=n(4),o=n(5),u=n(20),s=n(10),c=n(18);var l=Object(s.b)({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=Object(o.a)(e,"images","resizeBilinear");u.b(3===l.rank||4===l.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(l.rank,".")})),u.b(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),u.b(!1===s||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var f=l,d=!1;3===l.rank&&(d=!0,f=Object(c.a)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),Object(r.a)(t);var h={images:f},p={alignCorners:n,halfPixelCenters:s,size:t},v=a.a.runKernel(i.pc,h,p);return d?Object(c.a)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(10),o=n(18);var u=Object(i.b)({depthwiseConv2dNativeBackpropInput_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=t,f=!1;3===t.rank&&(f=!0,l=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={dy:l,filter:n},h={strides:i,pad:u,dimRoundingMode:c,dilations:s,inputShape:e},p=r.a.runKernel(a.Q,d,h);return f?Object(o.a)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(10),o=n(18);var u=Object(i.b)({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,i,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],c=arguments.length>6?arguments[6]:void 0,l=e;3===e.rank&&(l=Object(o.a)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var f=t;3===f.rank&&(f=Object(o.a)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var d={x:l,dy:f},h={strides:i,pad:u,dimRoundingMode:c,dilations:s,filterShape:n};return r.a.runKernel(a.P,d,h)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(202),a=n(283);function i(e,t,n){return(i=Object(a.a)()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&Object(r.a)(i,n.prototype),i}).apply(null,arguments)}},function(e,t,n){var r=n(528),a=n(529),i=n(530),o=n(531),u=n(532),s=n(533),c=n(534);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e,t,n){"use strict";function r(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(444),a=n(445),i=n(446),o=n(447),u=n(448),s=n(449),c=n(450);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e,t,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function(e,t){var n,a,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),a=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,u){var s,c,l,f,d,h,p,v,m,g,b,y;if(t&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0===(b=JSON.stringify(t,i)))return b;if(p=a-o.length-u,b.length<=p&&(m=b.replace(r,(function(e,t){return t||e+" "}))).length<=p)return m;if(null!=i&&(t=JSON.parse(b),i=void 0),"object"===typeof t&&null!==t){if(v=o+n,l=[],c=0,Array.isArray(t))for(g="[",s="]",p=t.length;c<p;c++)l.push(e(t[c],v,c===p-1?0:1)||"null");else for(g="{",s="}",p=(h=Object.keys(t)).length;c<p;c++)f=h[c],d=JSON.stringify(f)+": ",void 0!==(y=e(t[f],v,d.length+(c===p-1?0:1)))&&l.push(d+y);if(l.length>0)return[g,n+l.join(",\n"+v),s].join("\n"+o)}return b}(e,"",0)}},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(46),c={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},l=i.forwardRef((function(e,t){var n=e.align,u=void 0===n?"inherit":n,l=e.classes,f=e.className,d=e.color,h=void 0===d?"initial":d,p=e.component,v=e.display,m=void 0===v?"initial":v,g=e.gutterBottom,b=void 0!==g&&g,y=e.noWrap,x=void 0!==y&&y,_=e.paragraph,w=void 0!==_&&_,k=e.variant,O=void 0===k?"body1":k,S=e.variantMapping,j=void 0===S?c:S,E=Object(a.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),C=p||(w?"p":j[O]||c[O])||"span";return i.createElement(C,Object(r.a)({className:Object(o.a)(l.root,f,"inherit"!==O&&l[O],"initial"!==h&&l["color".concat(Object(s.a)(h))],x&&l.noWrap,b&&l.gutterBottom,w&&l.paragraph,"inherit"!==u&&l["align".concat(Object(s.a)(u))],"initial"!==m&&l["display".concat(Object(s.a)(m))]),ref:t},E))}));t.a=Object(u.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(l)},,,,,,function(e,t){var n=/^[0-9]+$/,r=function(e,t){var r=n.test(e),a=n.test(t);return r&&a&&(e=+e,t=+t),e===t?0:r&&!a?-1:a&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:function(e,t){return r(t,e)}}},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return 0===r(e,t,n)}},function(e,t,n){var r=n(84);e.exports=function(e,t,n){var a=new r(e,n),i=new r(t,n);return a.compare(i)||a.compareBuild(i)}},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return r(e,t,n)<0}},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return r(e,t,n)>=0}},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return r(e,t,n)<=0}},function(e,t,n){var r=n(84),a=n(237),i=a.ANY,o=n(108),u=n(238),s=n(236),c=n(303),l=n(305),f=n(304);e.exports=function(e,t,n,d){var h,p,v,m,g;switch(e=new r(e,d),t=new o(t,d),n){case">":h=s,p=l,v=c,m=">",g=">=";break;case"<":h=c,p=f,v=s,m="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,d))return!1;for(var b=function(n){var r=t.set[n],o=null,u=null;return r.forEach((function(e){e.semver===i&&(e=new a(">=0.0.0")),o=o||e,u=u||e,h(e.semver,o.semver,d)?o=e:v(e.semver,u.semver,d)&&(u=e)})),o.operator===m||o.operator===g?{v:!1}:u.operator&&u.operator!==m||!p(e,u.semver)?u.operator===g&&v(e,u.semver)?{v:!1}:void 0:{v:!1}},y=0;y<t.set.length;++y){var x=b(y);if("object"===typeof x)return x.v}return!0}},function(e,t,n){var r=n(477),a=n(478),i=n(308),o=n(479);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()}},function(e,t,n){var r=n(366);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){var r=n(509);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(510),a=n(511),i=n(512);e.exports=function(e){var t=a();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"h",(function(){return u})),n.d(t,"createElement",(function(){return u})),n.d(t,"cloneElement",(function(){return l})),n.d(t,"Component",(function(){return R})),n.d(t,"render",(function(){return P})),n.d(t,"rerender",(function(){return p})),n.d(t,"options",(function(){return a}));var a={},i=[],o=[];function u(e,t){var n,u,s,c,l=o;for(c=arguments.length;c-- >2;)i.push(arguments[c]);for(t&&null!=t.children&&(i.length||i.push(t.children),delete t.children);i.length;)if((u=i.pop())&&void 0!==u.pop)for(c=u.length;c--;)i.push(u[c]);else"boolean"===typeof u&&(u=null),(s="function"!==typeof e)&&(null==u?u="":"number"===typeof u?u=String(u):"string"!==typeof u&&(s=!1)),s&&n?l[l.length-1]+=u:l===o?l=[u]:l.push(u),n=s;var f=new r;return f.nodeName=e,f.children=l,f.attributes=null==t?void 0:t,f.key=null==t?void 0:t.key,void 0!==a.vnode&&a.vnode(f),f}function s(e,t){for(var n in t)e[n]=t[n];return e}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function l(e,t){return u(e.nodeName,s(s({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}var f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,d=[];function h(e){!e._dirty&&(e._dirty=!0)&&1==d.push(e)&&(a.debounceRendering||c)(p)}function p(){var e,t=d;for(d=[];e=t.pop();)e._dirty&&I(e)}function v(e,t,n){return"string"===typeof t||"number"===typeof t?void 0!==e.splitText:"string"===typeof t.nodeName?!e._componentConstructor&&m(e,t.nodeName):n||e._componentConstructor===t.nodeName}function m(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function g(e){var t=s({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function y(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!==typeof r&&"string"!==typeof n||(e.style.cssText=r||""),r&&"object"===typeof r){if("string"!==typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"===typeof r[i]&&!1===f.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,x,o):e.removeEventListener(t,x,o),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e)!function(e,t,n){try{e[t]=n}catch(r){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var u=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?u?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!==typeof r&&(u?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function x(e){return this._listeners[e.type](a.event&&a.event(e)||e)}var _=[],w=0,k=!1,O=!1;function S(){for(var e;e=_.pop();)a.afterMount&&a.afterMount(e),e.componentDidMount&&e.componentDidMount()}function j(e,t,n,r,a,i){w++||(k=null!=a&&void 0!==a.ownerSVGElement,O=null!=e&&!("__preactattr_"in e));var o=E(e,t,n,r,i);return a&&o.parentNode!==a&&a.appendChild(o),--w||(O=!1,i||S()),o}function E(e,t,n,r,a){var i=e,o=k;if(null!=t&&"boolean"!==typeof t||(t=""),"string"===typeof t||"number"===typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0))),i.__preactattr_=!0,i;var u=t.nodeName;if("function"===typeof u)return function(e,t,n,r){var a=e&&e._component,i=a,o=e,u=a&&e._componentConstructor===t.nodeName,s=u,c=g(t);for(;a&&!s&&(a=a._parentComponent);)s=a.constructor===t.nodeName;a&&s&&(!r||a._component)?(D(a,c,3,n,r),e=a.base):(i&&!u&&(F(i),e=o=null),a=N(t.nodeName,c,n),e&&!a.nextBase&&(a.nextBase=e,o=null),D(a,c,1,n,r),e=a.base,o&&e!==o&&(o._component=null,C(o,!1)));return e}(e,t,n,r);if(k="svg"===u||"foreignObject"!==u&&k,u=String(u),(!e||!m(e,u))&&(i=function(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.normalizedNodeName=e,n}(u,k),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),C(e,!0)}var s=i.firstChild,c=i.__preactattr_,l=t.children;if(null==c){c=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)c[f[d].name]=f[d].value}return!O&&l&&1===l.length&&"string"===typeof l[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=l[0]&&(s.nodeValue=l[0]):(l&&l.length||null!=s)&&function(e,t,n,r,a){var i,o,u,s,c,l=e.childNodes,f=[],d={},h=0,p=0,m=l.length,g=0,y=t?t.length:0;if(0!==m)for(var x=0;x<m;x++){var _=l[x],w=_.__preactattr_;null!=(k=y&&w?_._component?_._component.__key:w.key:null)?(h++,d[k]=_):(w||(void 0!==_.splitText?!a||_.nodeValue.trim():a))&&(f[g++]=_)}if(0!==y)for(x=0;x<y;x++){var k;if(c=null,null!=(k=(s=t[x]).key))h&&void 0!==d[k]&&(c=d[k],d[k]=void 0,h--);else if(!c&&p<g)for(i=p;i<g;i++)if(void 0!==f[i]&&v(o=f[i],s,a)){c=o,f[i]=void 0,i===g-1&&g--,i===p&&p++;break}c=E(c,s,n,r),u=l[x],c&&c!==e&&c!==u&&(null==u?e.appendChild(c):c===u.nextSibling?b(u):e.insertBefore(c,u))}if(h)for(var x in d)void 0!==d[x]&&C(d[x],!1);for(;p<=g;)void 0!==(c=f[g--])&&C(c,!1)}(i,l,n,r,O||null!=c.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||y(e,r,n[r],n[r]=void 0,k);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||y(e,r,n[r],n[r]=t[r],k)}(i,t.attributes,c),k=o,i}function C(e,t){var n=e._component;n?F(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||b(e),A(e))}function A(e){for(e=e.lastChild;e;){var t=e.previousSibling;C(e,!0),e=t}}var T={};function N(e,t,n){var r,a=T[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),R.call(r,t,n)):((r=new R(t,n)).constructor=e,r.render=M),a)for(var i=a.length;i--;)if(a[i].constructor===e){r.nextBase=a[i].nextBase,a.splice(i,1);break}return r}function M(e,t,n){return this.constructor(e,n)}function D(e,t,n,r,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===a.syncComponentUpdates&&e.base?h(e):I(e,1,i)),e.__ref&&e.__ref(e))}function I(e,t,n,r){if(!e._disable){var i,o,u,c=e.props,l=e.state,f=e.context,d=e.prevProps||c,h=e.prevState||l,p=e.prevContext||f,v=e.base,m=e.nextBase,b=v||m,y=e._component,x=!1;if(v&&(e.props=d,e.state=h,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,l,f)?x=!0:e.componentWillUpdate&&e.componentWillUpdate(c,l,f),e.props=c,e.state=l,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!x){i=e.render(c,l,f),e.getChildContext&&(f=s(s({},f),e.getChildContext()));var k,O,E=i&&i.nodeName;if("function"===typeof E){var A=g(i);(o=y)&&o.constructor===E&&A.key==o.__key?D(o,A,1,f,!1):(k=o,e._component=o=N(E,A,f),o.nextBase=o.nextBase||m,o._parentComponent=e,D(o,A,0,f,!1),I(o,1,n,!0)),O=o.base}else u=b,(k=y)&&(u=e._component=null),(b||1===t)&&(u&&(u._component=null),O=j(u,i,f,n||!v,b&&b.parentNode,!0));if(b&&O!==b&&o!==y){var T=b.parentNode;T&&O!==T&&(T.replaceChild(O,b),k||(b._component=null,C(b,!1)))}if(k&&F(k),e.base=O,O&&!r){for(var M=e,R=e;R=R._parentComponent;)(M=R).base=O;O._component=M,O._componentConstructor=M.constructor}}if(!v||n?_.unshift(e):x||(e.componentDidUpdate&&e.componentDidUpdate(d,h,p),a.afterUpdate&&a.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);w||r||S()}}function F(e){a.beforeUnmount&&a.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?F(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,b(t),function(e){var t=e.constructor.name;(T[t]||(T[t]=[])).push(e)}(e),A(t)),e.__ref&&e.__ref(null)}function R(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function P(e,t,n){return j(n,e,{},!1,t,!1)}s(R.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=s({},n)),s(n,"function"===typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),h(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),I(this,2)},render:function(){}});var L={h:u,createElement:u,cloneElement:l,Component:R,render:P,rerender:p,options:a};t.default=L},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(114),u=i(n(173)),s=n(134),c=n(240),l=n(241),f={maxBins:12,fontSize:11};function d(e,t,n){var r=o.format(",.4~f"),a=o.format(".4~p"),i=[],u=[];if(null!=e.numVals&&(i.push("Num Vals"),u.push(r(e.numVals))),null!=e.min&&(i.push("Min"),u.push(r(e.min))),null!=e.max&&(i.push("Max"),u.push(r(e.max))),null!=e.numZeros){i.push("# Zeros");var s="";e.numVals&&(s=e.numZeros>0?"(".concat(a(e.numZeros/e.numVals),")"):""),u.push("".concat(r(e.numZeros)," ").concat(s))}if(null!=e.numNans){i.push("# NaNs");var c="";e.numVals&&(c=e.numNans>0?"(".concat(a(e.numNans/e.numVals),")"):""),u.push("".concat(r(e.numNans)," ").concat(c))}if(null!=e.numInfs){i.push("# Infinity");var f="";e.numVals&&(f=e.numInfs>0?"(".concat(a(e.numInfs/e.numVals),")"):""),u.push("".concat(r(e.numInfs)," ").concat(f))}l.table(t,{headers:i,values:[u]},n)}function h(e){if(null==e.length)throw new Error("input data must be an array");if(0===e.length)return[];if("object"===typeof e[0]){if(null==e[0].value)throw new Error("input data must have a value field");return e}for(var t=Array(e.length),n=0;n<e.length;n++)t[n]={value:e[n]};return t}t.histogram=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,o,l,p,v,m,g,b,y;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=h(t),o=Object.assign({},f,n),l={actions:!1,mode:"vega-lite",defaultStyle:!1},p=s.subSurface(e,"histogram"),!1!==n.stats&&(v=s.subSurface(e,"stats",{prepend:!0}),d(n.stats?n.stats:c.arrayStats(i.map((function(e){return e.value}))),v,{fontSize:o.fontSize})),0!==i.length){r.next=7;break}return r.abrupt("return",void 0);case 7:for(m=[],g=0;g<i.length;g++)null!=(b=i[g].value)&&isFinite(b)&&m.push(i[g]);return y={width:o.width||s.getDefaultWidth(p),height:o.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},data:{values:m},mark:{type:"bar",tooltip:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},encoding:{x:{bin:{maxbins:o.maxBins},field:"value",type:"quantitative"},y:{aggregate:"count",type:"quantitative"},color:{value:o.color||"#001B44"}}},r.abrupt("return",u.default(p,y,l));case 11:case"end":return r.stop()}}),a)})))}},function(e,t,n){"use strict";function r(e){return function(){return null}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t);var r=n(72),a=n(15);Object(a.d)().prototype.abs=function(){return this.throwIfDisposed(),Object(r.a)(this)};var i=n(328);Object(a.d)().prototype.acos=function(){return this.throwIfDisposed(),Object(i.a)(this)};var o=n(329);Object(a.d)().prototype.acosh=function(){return this.throwIfDisposed(),Object(o.a)(this)};var u=n(29);Object(a.d)().prototype.add=function(e){return this.throwIfDisposed(),Object(u.a)(this,e)};var s=n(244);Object(a.d)().prototype.all=function(e,t){return this.throwIfDisposed(),Object(s.a)(this,e,t)};var c=n(245);Object(a.d)().prototype.any=function(e,t){return this.throwIfDisposed(),Object(c.a)(this,e,t)};var l=n(246);Object(a.d)().prototype.argMax=function(e){return this.throwIfDisposed(),Object(l.a)(this,e)};var f=n(247);Object(a.d)().prototype.argMin=function(e){return this.throwIfDisposed(),Object(f.a)(this,e)};var d=n(18),h=n(20);Object(a.d)().prototype.asScalar=function(){return this.throwIfDisposed(),Object(h.b)(1===this.size,(function(){return"The array must have only 1 element."})),Object(d.a)(this,[])};var p=n(27);Object(a.d)().prototype.asType=function(e){return this.throwIfDisposed(),Object(p.a)(this,e)},Object(a.d)().prototype.as1D=function(){return this.throwIfDisposed(),Object(d.a)(this,[this.size])},Object(a.d)().prototype.as2D=function(e,t){return this.throwIfDisposed(),Object(d.a)(this,[e,t])},Object(a.d)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n])},Object(a.d)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n,r])},Object(a.d)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Object(d.a)(this,[e,t,n,r,a])};var v=n(331);Object(a.d)().prototype.asin=function(){return this.throwIfDisposed(),Object(v.a)(this)};var m=n(332);Object(a.d)().prototype.asinh=function(){return this.throwIfDisposed(),Object(m.a)(this)};var g=n(333);Object(a.d)().prototype.atan=function(){return this.throwIfDisposed(),Object(g.a)(this)};var b=n(248);Object(a.d)().prototype.atan2=function(e){return this.throwIfDisposed(),Object(b.a)(this,e)};var y=n(334);Object(a.d)().prototype.atanh=function(){return this.throwIfDisposed(),Object(y.a)(this)};var x=n(178);Object(a.d)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Object(x.a)(this,e,t,n,r)};var _=n(137);Object(a.d)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Object(_.a)(this,e,t)};var w=n(121);Object(a.d)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Object(w.a)(this,e,t,n,r,a)};var k=n(157);Object(a.d)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Object(k.a)(this,e)},Object(a.d)().prototype.cast=function(e){return this.throwIfDisposed(),Object(p.a)(this,e)};var O=n(337);Object(a.d)().prototype.ceil=function(){return this.throwIfDisposed(),Object(O.a)(this)};var S=n(338);Object(a.d)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Object(S.a)(this,e,t)};var j=n(12),E=n(53);Object(a.d)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof a.a&&(e=[e]),Object(E.a)([this].concat(Object(j.a)(e)),t)};var C=n(249);Object(a.d)().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(C.a)(this,e,t,n,r,a,i)};var A=n(250);Object(a.d)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Object(A.a)(this,e,t,n,r,a)};var T=n(98);Object(a.d)().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(T.a)(this,e,t,n,r,a,i)};var N=n(179);Object(a.d)().prototype.cos=function(){return this.throwIfDisposed(),Object(N.a)(this)};var M=n(251);Object(a.d)().prototype.cosh=function(){return this.throwIfDisposed(),Object(M.a)(this)};var D=n(180);Object(a.d)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Object(D.a)(this,e,t,n)};var I=n(252);Object(a.d)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Object(I.a)(this,e,t)};var F=n(138);Object(a.d)().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(F.a)(this,e,t,n,r,a,i)};var R=n(253);Object(a.d)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Object(R.a)(this,e,t,n,r,a)};var P=n(254);Object(a.d)().prototype.divNoNan=function(e){return this.throwIfDisposed(),Object(P.a)(this,e)};var L=n(31);Object(a.d)().prototype.div=function(e){return this.throwIfDisposed(),Object(L.a)(this,e)};var B=n(255);Object(a.d)().prototype.dot=function(e){return this.throwIfDisposed(),Object(B.a)(this,e)};var z=n(181);Object(a.d)().prototype.elu=function(){return this.throwIfDisposed(),Object(z.a)(this)};var U=n(139);Object(a.d)().prototype.equal=function(e){return this.throwIfDisposed(),Object(U.a)(this,e)};var W=n(341);Object(a.d)().prototype.erf=function(){return this.throwIfDisposed(),Object(W.a)(this)};var V=n(69);Object(a.d)().prototype.exp=function(){return this.throwIfDisposed(),Object(V.a)(this)};var G=n(95);Object(a.d)().prototype.expandDims=function(e){return this.throwIfDisposed(),Object(G.a)(this,e)};var q=n(342);Object(a.d)().prototype.expm1=function(){return this.throwIfDisposed(),Object(q.a)(this)};var H=n(193);Object(a.d)().prototype.fft=function(){return this.throwIfDisposed(),Object(H.a)(this)},Object(a.d)().prototype.flatten=function(){return this.throwIfDisposed(),Object(d.a)(this,[this.size])};var X=n(182);Object(a.d)().prototype.floor=function(){return this.throwIfDisposed(),Object(X.a)(this)};var Y=n(176);Object(a.d)().prototype.floorDiv=function(e){return this.throwIfDisposed(),Object(Y.a)(this,e)};var K=n(140);Object(a.d)().prototype.gather=function(e,t){return this.throwIfDisposed(),Object(K.a)(this,e,t)};var $=n(99);Object(a.d)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Object($.a)(this,e)};var Z=n(79);Object(a.d)().prototype.greater=function(e){return this.throwIfDisposed(),Object(Z.a)(this,e)};var J=n(161);Object(a.d)().prototype.ifft=function(){return this.throwIfDisposed(),Object(J.a)(this)};var Q=n(270);Object(a.d)().prototype.irfft=function(){return this.throwIfDisposed(),Object(Q.a)(this)};var ee=n(343);Object(a.d)().prototype.isFinite=function(){return this.throwIfDisposed(),Object(ee.a)(this)};var te=n(344);Object(a.d)().prototype.isInf=function(){return this.throwIfDisposed(),Object(te.a)(this)};var ne=n(345);Object(a.d)().prototype.isNaN=function(){return this.throwIfDisposed(),Object(ne.a)(this)};var re=n(184);Object(a.d)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),Object(re.a)(this,e)};var ae=n(100);Object(a.d)().prototype.lessEqual=function(e){return this.throwIfDisposed(),Object(ae.a)(this,e)};var ie=n(185);Object(a.d)().prototype.less=function(e){return this.throwIfDisposed(),Object(ie.a)(this,e)};var oe=n(256);Object(a.d)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Object(oe.a)(this,e,t,n,r)};var ue=n(347);Object(a.d)().prototype.logSigmoid=function(){return this.throwIfDisposed(),Object(ue.a)(this)};var se=n(348);Object(a.d)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Object(se.a)(this,e)};var ce=n(186);Object(a.d)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Object(ce.a)(this,e,t)};var le=n(110);Object(a.d)().prototype.log=function(){return this.throwIfDisposed(),Object(le.a)(this)};var fe=n(257);Object(a.d)().prototype.log1p=function(){return this.throwIfDisposed(),Object(fe.a)(this)};var de=n(92);Object(a.d)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Object(de.a)(this,e)};var he=n(141);Object(a.d)().prototype.logicalNot=function(){return this.throwIfDisposed(),Object(he.a)(this)};var pe=n(187);Object(a.d)().prototype.logicalOr=function(e){return this.throwIfDisposed(),Object(pe.a)(this,e)};var ve=n(259);Object(a.d)().prototype.logicalXor=function(e){return this.throwIfDisposed(),Object(ve.a)(this,e)};var me=n(45);Object(a.d)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Object(me.a)(this,e,t,n)};var ge=n(188);Object(a.d)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Object(ge.a)(this,e,t,n,r)};var be=n(102);Object(a.d)().prototype.max=function(e,t){return this.throwIfDisposed(),Object(be.a)(this,e,t)};var ye=n(136);Object(a.d)().prototype.maximum=function(e){return this.throwIfDisposed(),Object(ye.a)(this,e)};var xe=n(130);Object(a.d)().prototype.mean=function(e,t){return this.throwIfDisposed(),Object(xe.a)(this,e,t)};var _e=n(158);Object(a.d)().prototype.min=function(e,t){return this.throwIfDisposed(),Object(_e.a)(this,e,t)};var we=n(189);Object(a.d)().prototype.minimum=function(e){return this.throwIfDisposed(),Object(we.a)(this,e)};var ke=n(260);Object(a.d)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Object(ke.a)(this,e,t)};var Oe=n(261);Object(a.d)().prototype.mod=function(e){return this.throwIfDisposed(),Object(Oe.a)(this,e)};var Se=n(21);Object(a.d)().prototype.mul=function(e){return this.throwIfDisposed(),Object(Se.a)(this,e)};var je=n(48);Object(a.d)().prototype.neg=function(){return this.throwIfDisposed(),Object(je.a)(this)};var Ee=n(197);Object(a.d)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),Object(Ee.a)(this,e,t,n)};var Ce=n(190);Object(a.d)().prototype.notEqual=function(e){return this.throwIfDisposed(),Object(Ce.a)(this,e)};var Ae=n(159);Object(a.d)().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Object(Ae.a)(this,e,t,n)};var Te=n(352);Object(a.d)().prototype.onesLike=function(){return this.throwIfDisposed(),Object(Te.a)(this)};var Ne=n(88);Object(a.d)().prototype.pad=function(e,t){return this.throwIfDisposed(),Object(Ne.a)(this,e,t)};var Me=n(262);Object(a.d)().prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Object(Me.a)(this,e,t,n,r,a)};var De=n(85);Object(a.d)().prototype.pow=function(e){return this.throwIfDisposed(),Object(De.a)(this,e)};var Ie=n(191);Object(a.d)().prototype.prelu=function(e){return this.throwIfDisposed(),Object(Ie.a)(this,e)};var Fe=n(263);Object(a.d)().prototype.prod=function(e,t){return this.throwIfDisposed(),Object(Fe.a)(this,e,t)};var Re=n(353);Object(a.d)().prototype.reciprocal=function(){return this.throwIfDisposed(),Object(Re.a)(this)};var Pe=n(118);Object(a.d)().prototype.relu=function(){return this.throwIfDisposed(),Object(Pe.a)(this)};var Le=n(192);Object(a.d)().prototype.relu6=function(){return this.throwIfDisposed(),Object(Le.a)(this)},Object(a.d)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Object(d.a)(this,e.shape)},Object(a.d)().prototype.reshape=function(e){return this.throwIfDisposed(),Object(d.a)(this,e)};var Be=n(286);Object(a.d)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Object(Be.a)(this,e,t,n)};var ze=n(285);Object(a.d)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Object(ze.a)(this,e,t,n)};var Ue=n(78);Object(a.d)().prototype.reverse=function(e){return this.throwIfDisposed(),Object(Ue.a)(this,e)};var We=n(194);Object(a.d)().prototype.rfft=function(){return this.throwIfDisposed(),Object(We.a)(this)};var Ve=n(354);Object(a.d)().prototype.round=function(){return this.throwIfDisposed(),Object(Ve.a)(this)};var Ge=n(265);Object(a.d)().prototype.rsqrt=function(){return this.throwIfDisposed(),Object(Ge.a)(this)};var qe=n(266);Object(a.d)().prototype.selu=function(){return this.throwIfDisposed(),Object(qe.a)(this)};var He=n(267);Object(a.d)().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Object(He.a)(this,e,t,n,r,a,i)};var Xe=n(122);Object(a.d)().prototype.sigmoid=function(){return this.throwIfDisposed(),Object(Xe.a)(this)};var Ye=n(356);Object(a.d)().prototype.sign=function(){return this.throwIfDisposed(),Object(Ye.a)(this)};var Ke=n(268);Object(a.d)().prototype.sin=function(){return this.throwIfDisposed(),Object(Ke.a)(this)};var $e=n(269);Object(a.d)().prototype.sinh=function(){return this.throwIfDisposed(),Object($e.a)(this)};var Ze=n(44);Object(a.d)().prototype.slice=function(e,t){return this.throwIfDisposed(),Object(Ze.a)(this,e,t)};var Je=n(357);Object(a.d)().prototype.softmax=function(e){return this.throwIfDisposed(),Object(Je.a)(this,e)};var Qe=n(258);Object(a.d)().prototype.softplus=function(){return this.throwIfDisposed(),Object(Qe.a)(this)};var et=n(142);Object(a.d)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Object(et.a)(this,e,t)};var tt=n(111);Object(a.d)().prototype.split=function(e,t){return this.throwIfDisposed(),Object(tt.a)(this,e,t)};var nt=n(64);Object(a.d)().prototype.sqrt=function(){return this.throwIfDisposed(),Object(nt.a)(this)};var rt=n(42);Object(a.d)().prototype.square=function(){return this.throwIfDisposed(),Object(rt.a)(this)};var at=n(195);Object(a.d)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Object(at.a)(this,e)};var it=n(143);Object(a.d)().prototype.squeeze=function(e){return this.throwIfDisposed(),Object(it.a)(this,e)};var ot=n(93);Object(a.d)().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof a.a?[this,e]:[this].concat(Object(j.a)(e));return Object(ot.a)(n,t)};var ut=n(119);Object(a.d)().prototype.step=function(e){return this.throwIfDisposed(),Object(ut.a)(this,e)};var st=n(358);Object(a.d)().prototype.stridedSlice=function(e,t,n,r,a,i,o,u){return this.throwIfDisposed(),Object(st.a)(this,e,t,n,r,a,i,o,u)};var ct=n(30);Object(a.d)().prototype.sub=function(e){return this.throwIfDisposed(),Object(ct.a)(this,e)};var lt=n(35);Object(a.d)().prototype.sum=function(e,t){return this.throwIfDisposed(),Object(lt.a)(this,e,t)};var ft=n(359);Object(a.d)().prototype.tan=function(){return this.throwIfDisposed(),Object(ft.a)(this)};var dt=n(221);Object(a.d)().prototype.tanh=function(){return this.throwIfDisposed(),Object(dt.a)(this)};var ht=n(123);Object(a.d)().prototype.tile=function(e){return this.throwIfDisposed(),Object(ht.a)(this,e)},Object(a.d)().prototype.toBool=function(){return this.throwIfDisposed(),Object(p.a)(this,"bool")},Object(a.d)().prototype.toFloat=function(){return this.throwIfDisposed(),Object(p.a)(this,"float32")},Object(a.d)().prototype.toInt=function(){return this.throwIfDisposed(),Object(p.a)(this,"int32")};var pt=n(272);Object(a.d)().prototype.topk=function(e,t){return this.throwIfDisposed(),Object(pt.a)(this,e,t)};var vt=n(81);Object(a.d)().prototype.transpose=function(e){return this.throwIfDisposed(),Object(vt.a)(this,e)};var mt=n(273);Object(a.d)().prototype.unique=function(e){return this.throwIfDisposed(),Object(mt.a)(this,e)};var gt=n(196);Object(a.d)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Object(gt.a)(this,e,t)};var bt=n(120);Object(a.d)().prototype.unstack=function(e){return this.throwIfDisposed(),Object(bt.a)(this,e)};var yt=n(62);Object(a.d)().prototype.where=function(e,t){return this.throwIfDisposed(),Object(yt.a)(e,this,t)};var xt=n(37);Object(a.d)().prototype.zerosLike=function(){return this.throwIfDisposed(),Object(xt.a)(this)}},function(e,t,n){var r=n(171);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(234).SEMVER_SPEC_VERSION,SemVer:n(84),compareIdentifiers:n(300).compareIdentifiers,rcompareIdentifiers:n(300).rcompareIdentifiers,parse:n(172),valid:n(455),clean:n(456),inc:n(457),diff:n(458),major:n(459),minor:n(460),patch:n(461),prerelease:n(462),compare:n(107),rcompare:n(463),compareLoose:n(464),compareBuild:n(302),sort:n(465),rsort:n(466),gt:n(236),lt:n(303),eq:n(301),neq:n(364),gte:n(304),lte:n(305),cmp:n(365),coerce:n(467),Comparator:n(237),Range:n(108),satisfies:n(238),toComparators:n(468),maxSatisfying:n(469),minSatisfying:n(470),minVersion:n(471),validRange:n(472),outside:n(306),gtr:n(473),ltr:n(474),intersects:n(475),simplifyRange:n(476),subset:n(480)}},function(e,t,n){"use strict";var r=n(207);t.a=function(e){var t=e,n=e;function a(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)<0?r=i+1:a=i}return r}return 1===e.length&&(t=function(t,n){return e(t)-n},n=function(e){return function(t,n){return Object(r.a)(e(t),n)}}(e)),{left:a,center:function(e,n,r,i){null==r&&(r=0),null==i&&(i=e.length);var o=a(e,n,r,i-1);return o>r&&t(e[o-1],n)>-t(e[o],n)?o-1:o},right:function(e,t,r,a){for(null==r&&(r=0),null==a&&(a=e.length);r<a;){var i=r+a>>>1;n(e[i],t)>0?a=i:r=i+1}return r}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}},function(e,t,n){"use strict";(function(e){var r=n(6),a=n.n(r),i=n(70),o=n(38),u=n.n(o),s=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var f=a.a.createContext||function(e,t){var n,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(i.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,a=e.value;((i=r)===(o=a)?0!==i||1/i===1/o:i!==i&&o!==o)?n=0:(n="function"===typeof t?t(r,a):s,0!==(n|=0)&&this.emitter.set(e.value,n))}var i,o},r.render=function(){return this.props.children},n}(r.Component);f.childContextTypes=((n={})[o]=u.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(i.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?s:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?s:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((a={})[o]=u.a.object,a),{Provider:f,Consumer:d}};t.a=f}).call(this,n(170))},function(e,t,n){var r=n(547);e.exports=h,e.exports.parse=i,e.exports.compile=function(e,t){return u(i(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=d;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=a.exec(e));){var f=n[0],d=n[1],h=n.index;if(u+=e.slice(o,h),o=h+f.length,d)u+=d[1];else{var p=e[o],v=n[2],m=n[3],g=n[4],b=n[5],y=n[6],x=n[7];u&&(r.push(u),u="");var _=null!=v&&null!=p&&p!==v,w="+"===y||"*"===y,k="?"===y||"*"===y,O=n[2]||l,S=g||b;r.push({name:m||i++,prefix:v||"",delimiter:O,optional:k,repeat:w,partial:_,asterisk:!!x,pattern:S?c(S):x?".*":"[^"+s(O)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",f(t)));return function(t,a){for(var i="",u=t||{},s=(a||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,d=u[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(f=s(d[h]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");i+=(0===h?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(d),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');i+=l.prefix+f}}else i+=l}return i}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,i=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var d=s(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+d+h+")*"),o+=h=c.optional?c.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return a||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=i?"$":a&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(h(e[a],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return d(i(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=function(e){return e},a=function(e){if(null==e)return r;var t,n,a=e.scale[0],i=e.scale[1],o=e.translate[0],u=e.translate[1];return function(e,r){r||(t=n=0);var s=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*a+o,l[1]=(n+=e[1])*i+u;s<c;)l[s]=e[s],++s;return l}},i=function(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return o(e,t)}))}:o(e,t)};function o(e,t){var n=t.id,r=t.bbox,a=null==t.properties?{}:t.properties,i=u(e,t);return null==n&&null==r?{type:"Feature",properties:a,geometry:i}:null==r?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:r,properties:a,geometry:i}}function u(e,t){var n=a(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var a=r[e<0?~e:e],i=0,o=a.length;i<o;++i)t.push(n(a[i],i));e<0&&function(e,t){for(var n,r=e.length,a=r-t;a<--r;)n=e[a],e[a++]=e[r],e[r]=n}(t,o)}function o(e){return n(e)}function u(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=u(e);t.length<4;)t.push(t[0]);return t}function c(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=u(t.arcs);break;case"MultiLineString":n=t.arcs.map(u);break;case"Polygon":n=c(t.arcs);break;case"MultiPolygon":n=t.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(t)}var s=function(e,t){var n={},r={},a={},i=[],o=-1;function u(e,t){for(var r in e){var a=e[r];delete t[a.start],delete a.start,delete a.end,a.forEach((function(e){n[e<0?~e:e]=1})),i.push(a)}}return t.forEach((function(n,r){var a,i=e.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(a=t[++o],t[o]=n,t[r]=a)})),t.forEach((function(t){var n,i,o=function(t){var n,r=e.arcs[t<0?~t:t],a=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,a]:[a,n]}(t),u=o[0],s=o[1];if(n=a[u])if(delete a[n.end],n.push(t),n.end=s,i=r[s]){delete r[i.start];var c=i===n?n:n.concat(i);r[c.start=n.start]=a[c.end=i.end]=c}else r[n.start]=a[n.end]=n;else if(n=r[s])if(delete r[n.start],n.unshift(t),n.start=u,i=a[u]){delete a[i.end];var l=i===n?n:i.concat(n);r[l.start=i.start]=a[l.end=n.end]=l}else r[n.start]=a[n.end]=n;else r[(n=[t]).start=u]=a[n.end=s]=n})),u(a,r),u(r,a),t.forEach((function(e){n[e<0?~e:e]||i.push([e])})),i},c=function(e){return u(e,l.apply(this,arguments))};function l(e,t,n){var r,a,i;if(arguments.length>1)r=f(e,t,n);else for(a=0,r=new Array(i=e.arcs.length);a<i;++a)r[a]=a;return{type:"MultiLineString",arcs:s(e,r)}}function f(e,t,n){var r,a=[],i=[];function o(e){var t=e<0?~e:e;(i[t]||(i[t]=[])).push({i:e,g:r})}function u(e){e.forEach(o)}function s(e){e.forEach(u)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":u(t.arcs);break;case"MultiLineString":case"Polygon":s(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(s)}(t.arcs)}}(t),i.forEach(null==n?function(e){a.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&a.push(e[0].i)}),a}},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=n.n(i),u=(n(38),n(57)),s=n(26),c=n(49),l=n(65),f=n(34),d=n(198),h=n(125),p=n(86),v=n(225),m=n(70),g=n(209);function b(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(i.isValidElement)(e)?t(e):e}(e)})),n}function y(e,t,n){return null!=n[t]?n[t]:e.props[t]}function x(e,t,n){var r=b(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var u={};for(var s in t){if(a[s])for(r=0;r<a[s].length;r++){var c=a[s][r];u[a[s][r]]=n(c)}u[s]=n(s)}for(r=0;r<i.length;r++)u[i[r]]=n(i[r]);return u}(t,r);return Object.keys(a).forEach((function(o){var u=a[o];if(Object(i.isValidElement)(u)){var s=o in t,c=o in r,l=t[o],f=Object(i.isValidElement)(l)&&!l.props.in;!c||s&&!f?c||!s||f?c&&s&&Object(i.isValidElement)(l)&&(a[o]=Object(i.cloneElement)(u,{onExited:n.bind(null,u),in:l.props.in,exit:y(u,"exit",e),enter:y(u,"enter",e)})):a[o]=Object(i.cloneElement)(u,{in:!1}):a[o]=Object(i.cloneElement)(u,{onExited:n.bind(null,u),in:!0,exit:y(u,"exit",e),enter:y(u,"enter",e)})}})),a}var _=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},w=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(Object(v.a)(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Object(m.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,b(n.children,(function(e){return Object(i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:y(e,"appear",n),enter:y(e,"enter",n),exit:y(e,"exit",n)})}))):x(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=b(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(r.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(p.a)(e,["component","childFactory"]),a=this.state.contextValue,i=_(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o.a.createElement(g.a.Provider,{value:a},i):o.a.createElement(g.a.Provider,{value:a},o.a.createElement(t,r,i))},t}(o.a.Component);w.propTypes={},w.defaultProps={component:"div",childFactory:function(e){return e}};var k=w,O="undefined"===typeof window?i.useEffect:i.useLayoutEffect;var S=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,a=e.rippleX,o=e.rippleY,u=e.rippleSize,c=e.in,f=e.onExited,d=void 0===f?function(){}:f,h=e.timeout,p=i.useState(!1),v=p[0],m=p[1],g=Object(s.a)(t.ripple,t.rippleVisible,r&&t.ripplePulsate),b={width:u,height:u,top:-u/2+o,left:-u/2+a},y=Object(s.a)(t.child,v&&t.childLeaving,r&&t.childPulsate),x=Object(l.a)(d);return O((function(){if(!c){m(!0);var e=setTimeout(x,h);return function(){clearTimeout(e)}}}),[x,c,h]),i.createElement("span",{className:g,style:b},i.createElement("span",{className:y}))},j=i.forwardRef((function(e,t){var n=e.center,o=void 0!==n&&n,u=e.classes,c=e.className,l=Object(a.a)(e,["center","classes","className"]),f=i.useState([]),d=f[0],p=f[1],v=i.useRef(0),m=i.useRef(null);i.useEffect((function(){m.current&&(m.current(),m.current=null)}),[d]);var g=i.useRef(!1),b=i.useRef(null),y=i.useRef(null),x=i.useRef(null);i.useEffect((function(){return function(){clearTimeout(b.current)}}),[]);var _=i.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,o=e.cb;p((function(e){return[].concat(Object(h.a)(e),[i.createElement(S,{key:v.current,classes:u,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a})])})),v.current+=1,m.current=o}),[u]),w=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,a=void 0!==r&&r,i=t.center,u=void 0===i?o||t.pulsate:i,s=t.fakeElement,c=void 0!==s&&s;if("mousedown"===e.type&&g.current)g.current=!1;else{"touchstart"===e.type&&(g.current=!0);var l,f,d,h=c?null:x.current,p=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(u||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),f=Math.round(p.height/2);else{var v=e.touches?e.touches[0]:e,m=v.clientX,w=v.clientY;l=Math.round(m-p.left),f=Math.round(w-p.top)}if(u)(d=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((h?h.clientWidth:0)-l),l)+2,O=2*Math.max(Math.abs((h?h.clientHeight:0)-f),f)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(O,2))}e.touches?null===y.current&&(y.current=function(){_({pulsate:a,rippleX:l,rippleY:f,rippleSize:d,cb:n})},b.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):_({pulsate:a,rippleX:l,rippleY:f,rippleSize:d,cb:n})}}),[o,_]),O=i.useCallback((function(){w({},{pulsate:!0})}),[w]),j=i.useCallback((function(e,t){if(clearTimeout(b.current),"touchend"===e.type&&y.current)return e.persist(),y.current(),y.current=null,void(b.current=setTimeout((function(){j(e,t)})));y.current=null,p((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return i.useImperativeHandle(t,(function(){return{pulsate:O,start:w,stop:j}}),[O,w,j]),i.createElement("span",Object(r.a)({className:Object(s.a)(u.root,c),ref:x},l),i.createElement(k,{component:null,exit:!0},d))})),E=Object(f.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(i.memo(j)),C=i.forwardRef((function(e,t){var n=e.action,o=e.buttonRef,f=e.centerRipple,h=void 0!==f&&f,p=e.children,v=e.classes,m=e.className,g=e.component,b=void 0===g?"button":g,y=e.disabled,x=void 0!==y&&y,_=e.disableRipple,w=void 0!==_&&_,k=e.disableTouchRipple,O=void 0!==k&&k,S=e.focusRipple,j=void 0!==S&&S,C=e.focusVisibleClassName,A=e.onBlur,T=e.onClick,N=e.onFocus,M=e.onFocusVisible,D=e.onKeyDown,I=e.onKeyUp,F=e.onMouseDown,R=e.onMouseLeave,P=e.onMouseUp,L=e.onTouchEnd,B=e.onTouchMove,z=e.onTouchStart,U=e.onDragLeave,W=e.tabIndex,V=void 0===W?0:W,G=e.TouchRippleProps,q=e.type,H=void 0===q?"button":q,X=Object(a.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),Y=i.useRef(null);var K=i.useRef(null),$=i.useState(!1),Z=$[0],J=$[1];x&&Z&&J(!1);var Q=Object(d.a)(),ee=Q.isFocusVisible,te=Q.onBlurVisible,ne=Q.ref;function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return Object(l.a)((function(r){return t&&t(r),!n&&K.current&&K.current[e](r),!0}))}i.useImperativeHandle(n,(function(){return{focusVisible:function(){J(!0),Y.current.focus()}}}),[]),i.useEffect((function(){Z&&j&&!w&&K.current.pulsate()}),[w,j,Z]);var ae=re("start",F),ie=re("stop",U),oe=re("stop",P),ue=re("stop",(function(e){Z&&e.preventDefault(),R&&R(e)})),se=re("start",z),ce=re("stop",L),le=re("stop",B),fe=re("stop",(function(e){Z&&(te(e),J(!1)),A&&A(e)}),!1),de=Object(l.a)((function(e){Y.current||(Y.current=e.currentTarget),ee(e)&&(J(!0),M&&M(e)),N&&N(e)})),he=function(){var e=u.findDOMNode(Y.current);return b&&"button"!==b&&!("A"===e.tagName&&e.href)},pe=i.useRef(!1),ve=Object(l.a)((function(e){j&&!pe.current&&Z&&K.current&&" "===e.key&&(pe.current=!0,e.persist(),K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&he()&&" "===e.key&&e.preventDefault(),D&&D(e),e.target===e.currentTarget&&he()&&"Enter"===e.key&&!x&&(e.preventDefault(),T&&T(e))})),me=Object(l.a)((function(e){j&&" "===e.key&&K.current&&Z&&!e.defaultPrevented&&(pe.current=!1,e.persist(),K.current.stop(e,(function(){K.current.pulsate(e)}))),I&&I(e),T&&e.target===e.currentTarget&&he()&&" "===e.key&&!e.defaultPrevented&&T(e)})),ge=b;"button"===ge&&X.href&&(ge="a");var be={};"button"===ge?(be.type=H,be.disabled=x):("a"===ge&&X.href||(be.role="button"),be["aria-disabled"]=x);var ye=Object(c.a)(o,t),xe=Object(c.a)(ne,Y),_e=Object(c.a)(ye,xe),we=i.useState(!1),ke=we[0],Oe=we[1];i.useEffect((function(){Oe(!0)}),[]);var Se=ke&&!w&&!x;return i.createElement(ge,Object(r.a)({className:Object(s.a)(v.root,m,Z&&[v.focusVisible,C],x&&v.disabled),onBlur:fe,onClick:T,onFocus:de,onKeyDown:ve,onKeyUp:me,onMouseDown:ae,onMouseLeave:ue,onMouseUp:oe,onDragLeave:ie,onTouchEnd:ce,onTouchMove:le,onTouchStart:se,ref:_e,tabIndex:x?-1:V},be,X),p,Se?i.createElement(E,Object(r.a)({ref:K,center:h},G)):null)}));t.a=Object(f.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(C)},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({acos_:function(e){var t={x:Object(i.a)(e,"x","acos")};return r.a.runKernel(a.b,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({acosh_:function(e){var t={x:Object(i.a)(e,"x","acosh")};return r.a.runKernel(a.c,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({addN_:function(e){o.b(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),o.b(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Object(i.a)(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!o.a(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var u=t;return r.a.runKernel(a.e,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({asin_:function(e){var t={x:Object(i.a)(e,"x","asin")};return r.a.runKernel(a.j,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({asinh_:function(e){var t={x:Object(i.a)(e,"x","asinh")};return r.a.runKernel(a.k,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({atan_:function(e){var t={x:Object(i.a)(e,"x","atan")};return r.a.runKernel(a.l,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({atanh_:function(e){var t={x:Object(i.a)(e,"x","atanh")};return r.a.runKernel(a.n,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(27),s=n(10),c=n(18);var l=Object(s.b)({avgPool3d_:function(e,t,n,s,l){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",d=Object(i.a)(e,"x","avgPool3d","float32"),h=d,p=!1;4===d.rank&&(p=!0,h=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===h.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(h.rank,".")})),o.b("NDHWC"===f,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(f)})),null!=l&&o.b(o.v(s),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(l," but got pad ").concat(s,".")}));var v={x:h},m={filterSize:t,strides:n,pad:s,dimRoundingMode:l,dataFormat:f},g=r.a.runKernel(a.p,v,m);return g=Object(u.a)(g,h.dtype),p?Object(c.a)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({bincount_:function(e,t,n){var u=Object(i.a)(e,"x","bincount"),s=Object(i.a)(t,"weights","bincount");o.b("int32"===u.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(u.dtype)})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(s.size===u.size||0===s.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(u.shape,", weights shape: ")+"".concat(s.shape,".")}));var c={x:u,weights:s},l={size:n};return r.a.runKernel(a.u,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({ceil_:function(e){var t={x:Object(i.a)(e,"x","ceil")};return r.a.runKernel(a.x,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({clipByValue_:function(e,t,n){var u=Object(i.a)(e,"x","clipByValue");o.b(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var s={x:u},c={clipValueMin:t,clipValueMax:n};return r.a.runKernel(a.y,s,c)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(54),s=n(10),c=n(18);var l=Object(s.b)({conv3d_:function(e,t,n,s){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],d=Object(i.a)(e,"x","conv3d"),h=Object(i.a)(t,"filter","conv3d"),p=d,v=!1;4===d.rank&&(v=!0,p=Object(c.a)(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),o.b(5===p.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(p.rank,".")})),o.b(5===h.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(h.rank,".")})),o.b(p.shape[4]===h.shape[3],(function(){return"Error in conv3d: depth of input (".concat(p.shape[4],") must match ")+"input depth for filter ".concat(h.shape[3],".")})),o.b(Object(u.h)(n,f),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(f,"'")})),o.b("NDHWC"===l,(function(){return"Error in conv3d: got dataFormat of ".concat(l," but only NDHWC is currently supported.")}));var m={x:p,filter:h},g={strides:n,pad:s,dataFormat:l,dilations:f},b=r.a.runKernel(a.F,m,g);return v?Object(c.a)(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10);var s=Object(u.b)({denseBincount_:function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(e,"x","denseBincount"),c=Object(i.a)(t,"weights","denseBincount");o.b("int32"===s.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(s.dtype)})),o.b(s.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(s.rank,".")})),o.b(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),o.b(c.size===s.size||0===c.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(s.shape,", weights shape: ")+"".concat(c.shape,".")}));var l={x:s,weights:c},f={size:n,binaryOutput:u};return r.a.runKernel(a.M,l,f)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(27),s=n(10);var c=Object(s.b)({erf_:function(e){var t=Object(i.a)(e,"x","erf");o.b("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Object(u.a)(t,"float32"));var n={x:t};return r.a.runKernel(a.Y,n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({expm1_:function(e){var t={x:Object(i.a)(e,"x","expm1")};return r.a.runKernel(a.bb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({isFinite_:function(e){var t={x:Object(i.a)(e,"x","isFinite")};return r.a.runKernel(a.sb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({isInf_:function(e){var t={x:Object(i.a)(e,"x","isInf")};return r.a.runKernel(a.tb,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({isNaN_:function(e){var t={x:Object(i.a)(e,"x","isNaN")};return r.a.runKernel(a.ub,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11),a=n(4);function i(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var i={start:e,stop:t,num:n};return r.a.runKernel(a.Ab,{},i)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(60),a=n(5),i=n(21),o=n(48),u=n(10),s=n(122),c=n(258);var l=Object(u.b)({logSigmoid_:function(e){var t=Object(a.a)(e,"x","logSigmoid");return Object(r.a)((function(e){return{value:Object(o.a)(Object(c.a)(Object(o.a)(e))),gradFunc:function(t){return Object(i.a)(t,Object(s.a)(Object(o.a)(e)))}}}))(t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(7),a=n(60),i=n(5),o=n(27),u=n(69),s=n(110),c=n(102),l=n(21),f=n(10),d=n(30),h=n(35);var p=Object(f.b)({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var f=Object(a.a)((function(e,n){var a=Object(c.a)(e,t,!0),i=Object(d.a)(e,a),f=Object(d.a)(Object(o.a)(i,"float32"),Object(s.a)(Object(h.a)(Object(u.a)(i),t,!0)));n([f]);return{value:f,gradFunc:function(e,n){var a=Object(r.a)(n,1)[0],i=Object(u.a)(a);return Object(d.a)(e,Object(l.a)(Object(h.a)(e,t,!0),i))}}}));return f(n)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(11),a=n(4),i=n(5),o=n(20),u=n(10),s=n(18);var c=Object(u.b)({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",f=Object(i.a)(e,"x","maxPool3d"),d=f,h=!1;4===f.rank&&(h=!0,d=Object(s.a)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),o.b(5===d.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(d.rank,".")})),o.b("NDHWC"===l,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(l)})),null!=c&&o.b(o.v(u),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(u,".")}));var p={x:d},v={filterSize:t,strides:n,pad:u,dimRoundingMode:c,dataFormat:l},m=r.a.runKernel(a.Jb,p,v);return h?Object(s.a)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({maxPoolWithArgmax_:function(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Object(i.a)(e,"x","maxPoolWithArgmax"),c={x:s},l={filterSize:t,strides:n,pad:o,includeBatchInIndex:u},f=r.a.runKernel(a.Mb,c,l);return{result:f[0],indexes:f[1]}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(10),u=n(18);var s=Object(o.b)({multinomial_:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=Object(i.a)(e,"logits","multinomial"),c=s.size,l=s.rank;if(c<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(c,"."));if(l>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(l));n=n||Math.random();var f=1===l?Object(u.a)(s,[1,-1]):s,d={logits:f},h={numSamples:t,seed:n,normalized:o},p=r.a.runKernel(a.Tb,d,h);return 1===l?Object(u.a)(p,[p.size]):p}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({onesLike_:function(e){var t={x:Object(i.a)(e,"x","onesLike")};return r.a.runKernel(a.bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({reciprocal_:function(e){var t={x:Object(i.a)(e,"x","reciprocal")};return r.a.runKernel(a.lc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({round_:function(e){var t={x:Object(i.a)(e,"x","round")};return r.a.runKernel(a.vc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r),i=n(16),o=n(15),u=n(5),s=n(20);function c(){return(c=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,l,f,d,h,p,v,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(t,"x","setdiff1d"),i=Object(u.a)(n,"y","setdiff1d"),s.b(r.dtype===i.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(i.dtype,").")})),s.b(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),s.b(1===i.rank,(function(){return"y should be 1D tensor, but got y (".concat(i.shape,").")})),e.next=7,r.data();case 7:return c=e.sent,e.next=10,i.data();case 10:for(l=e.sent,f=new Set(l),d=0,h=0;h<c.length;h++)f.has(c[h])||d++;for(p=new o.b([d],r.dtype),v=new o.b([d],"int32"),m=0,g=0;m<c.length;m++)f.has(c[m])||(p.values[g]=c[m],v.values[g]=m,g++);return e.abrupt("return",[p.toTensor(),v.toTensor()]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(e,t){return c.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({sign_:function(e){var t={x:Object(i.a)(e,"x","sign")};return r.a.runKernel(a.Bc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(i.a)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var o={logits:n},u={dim:t};return r.a.runKernel(a.Fc,o,u)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({stridedSlice_:function(e,t,n,o){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=Object(i.a)(e,"x","stridedSlice"),h={x:d},p={begin:t,end:n,strides:o,beginMask:u,endMask:s,ellipsisMask:c,newAxisMask:l,shrinkAxisMask:f};return r.a.runKernel(a.Oc,h,p)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({tan_:function(e){var t={x:Object(i.a)(e,"x","tan")};return r.a.runKernel(a.Rc,t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(77),a=n(10),i=n(147);var o=Object(a.b)({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");for(var u=new i.a(t,n,a,!0,o),s=Object(r.a)(e,a),c=0;c<s.values.length;c++)s.values[c]=u.nextValue();return s.toTensor()}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4),i=n(5),o=n(10),u=n(174);var s=Object(o.b)({scatterND_:function(e,t,n){var o=Object(i.a)(e,"indices","scatterND","int32"),s=Object(i.a)(t,"updates","scatterND");u.validateInput(s,o,n);var c={indices:o,updates:s},l={shape:n};return r.a.runKernel(a.xc,c,l)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(4),i=n(5),o=n(10);var u=Object(o.b)({gatherND_:function(e,t){var n=Object(i.a)(t,"indices","gatherND","int32"),o={params:Object(i.a)(e,"x","gatherND"),indices:n};return r.a.runKernel(a.lb,o)}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof e?e:function(e){return e()};function a(){return new Promise((function(e){return r((function(){return e()}))}))}}).call(this,n(452).setImmediate)},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return 0!==r(e,t,n)}},function(e,t,n){var r=n(301),a=n(364),i=n(236),o=n(304),u=n(303),s=n(305);e.exports=function(e,t,n,c){switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return a(e,n,c);case">":return i(e,n,c);case">=":return o(e,n,c);case"<":return u(e,n,c);case"<=":return s(e,n,c);default:throw new TypeError("Invalid operator: ".concat(t))}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e){e.exports=JSON.parse('{"a":"5.13.0"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processStyleName=void 0,t.createMarkupForStyles=function(e,t){var n="";for(var a in e){var i=0===a.indexOf("--");if(e.hasOwnProperty(a)&&"label"!==a){var o=e[a];0,null!=o&&(i?n+=a+":"+o+";":(n+=u(a)+":",n+=(0,r.default)(a,o,t)+";"))}}return n||null};o(n(482));var r=o(n(484)),a=o(n(487)),i=o(n(489));o(n(369));function o(e){return e&&e.__esModule?e:{default:e}}var u=t.processStyleName=(0,i.default)(a.default)},function(e,t,n){"use strict";var r=n(486);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSurfaceInfo=function(e){return null!=e.name},t.isSurface=function(e){return e.drawArea instanceof HTMLElement}},function(e,t,n){"use strict";var r=n(150),a=n(151);Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(508),u="tfjs-visor-container";t.visor=function(){if("undefined"===typeof document)throw new Error("No document defined. This library needs a browser/dom to work");if(document.getElementById(u)&&null!=i)return i;var e,t=document.getElementById(u);function n(t,n){var r=null;return e=o.VisorComponent.render(t,e,{ref:function(e){return r=e},surfaceList:Array.from(n.values())}),r}null==t&&((t=document.createElement("div")).id=u,document.body.appendChild(t));var r=new Map,a=n(t,r);return i=new s(a,t,r,n)};var s=function(){function e(t,n,a,i){r(this,e),this.visorComponent=t,this.el=n,this.surfaceList=a,this.renderVisor=i}return a(e,[{key:"surface",value:function(e){var t=e.name,n=null==e.tab?"Visor":e.tab;if(null==t||!("string"===typeof t||t instanceof String))throw new Error("You must pass a config object with a 'name' property to create or retrieve a surface");var r=Object.assign({},e,{tab:n}),a="".concat(t,"-").concat(n);return this.surfaceList.has(a)||this.surfaceList.set(a,r),this.renderVisor(this.el,this.surfaceList),this.visorComponent.getSurface(t,n)}},{key:"isFullscreen",value:function(){return this.visorComponent.isFullscreen()}},{key:"isOpen",value:function(){return this.visorComponent.isOpen()}},{key:"close",value:function(){return this.visorComponent.close()}},{key:"open",value:function(){return this.visorComponent.open()}},{key:"toggle",value:function(){return this.visorComponent.toggle()}},{key:"toggleFullScreen",value:function(){return this.visorComponent.toggleFullScreen()}},{key:"bindKeys",value:function(){return this.visorComponent.bindKeys()}},{key:"unbindKeys",value:function(){return this.visorComponent.unbindKeys()}},{key:"setActiveTab",value:function(e){if(!this.visorComponent.state.tabs.has(e))throw new Error("Tab '".concat(e,"' does not exist"));this.visorComponent.setState({activeTab:e})}}]),e}();t.Visor=s},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r=n(2),a=n(375),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(173)),s=n(134),c=n(239),l=n(109);t.linechart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,d,h,p,v,m,g,b,y,x,_,w,k,O;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Array.isArray(t.values[0])?t.values:[t.values],d=o[0].length,h=t.series?t.series:o.map((function(e,t){return"Series ".concat(t+1)})),c.assert(h.length===o.length,"Must have an equal number of series labels as there are data series"),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=[],v=function(e){var t={x:e};h.forEach((function(n,r){var a=o[r][e].y;t[n]=a,t["".concat(n,"-name")]=n})),p.push(t)},m=0;m<d;m++)v(m);return g=Object.assign({},f,n),b=function(){return g.zoomToFit?{zero:!1}:null!=g.yAxisDomain?{domain:g.yAxisDomain}:void 0},y={x:{field:"x",type:g.xType,title:g.xLabel},tooltip:[{field:"x",type:"quantitative"}].concat(a(h.map((function(e){return{field:e,type:"quantitative"}}))))},x=h.map((function(e){return{data:void 0,mark:{type:"line",clip:!0},encoding:{y:{field:e,type:g.yType,title:g.yLabel,scale:b()},color:{field:"".concat(e,"-name"),type:"nominal",legend:{values:h,title:null},scale:{range:g.seriesColors}}}}})),_={mark:"rule",selection:{hover:{type:"single",on:"mouseover",nearest:!0,clear:"mouseout"}},encoding:{color:{value:"grey",condition:{selection:{not:"hover"},value:"transparent"}}}},w=l.getDrawArea(e),k={width:g.width||s.getDefaultWidth(w),height:g.height||s.getDefaultHeight(w),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:g.fontSize,titleFontSize:g.fontSize},text:{fontSize:g.fontSize},legend:{labelFontSize:g.fontSize,titleFontSize:g.fontSize}},data:{values:p},encoding:y,layer:[].concat(a(x),[_])},O={actions:!1,mode:"vega-lite",defaultStyle:!1},r.next=18,u.default(w,k,O);case 18:return r.abrupt("return",Promise.resolve());case 19:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){var r=n(518),a=n(519),i=n(308),o=n(520);e.exports=function(e){return r(e)||a(e)||i(e)||o()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(11),a=n(4);function i(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var o=n(5),u=n(10);var s=Object(u.b)({sparseToDense_:function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(o.a)(e,"sparseIndices","sparseToDense","int32"),c=Object(o.a)(t,"sparseValues","sparseToDense"),l=Object(o.a)(u,"defaultValue","sparseToDense",c.dtype);i(s,c,n,l);var f={sparseIndices:s,sparseValues:c,defaultValue:l},d={outputShape:n};return r.a.runKernel(a.Ic,f,d)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(132),a=n(417),i=n(131),o=n(416),u=n(229),s=n(230);function c(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function l(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function f(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function d(e){var t=e.dateTime,n=e.date,u=e.time,s=e.periods,d=e.days,p=e.shortDays,v=e.months,m=e.shortMonths,g=y(s),b=x(s),J=y(d),be=x(d),Te=y(p),Ne=x(p),Me=y(v),De=x(v),Ie=y(m),Fe=x(m),Re={a:function(e){return p[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return m[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:null,d:U,e:U,f:H,g:re,G:ie,H:W,I:V,j:G,L:q,m:X,M:Y,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Ce,s:Ae,S:K,u:$,U:Z,V:Q,w:ee,W:te,x:null,X:null,y:ne,Y:ae,Z:oe,"%":Ee},Pe={a:function(e){return p[e.getUTCDay()]},A:function(e){return d[e.getUTCDay()]},b:function(e){return m[e.getUTCMonth()]},B:function(e){return v[e.getUTCMonth()]},c:null,d:ue,e:ue,f:de,g:ke,G:Se,H:se,I:ce,j:le,L:fe,m:he,M:pe,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Ce,s:Ae,S:ve,u:me,U:ge,V:ye,w:xe,W:_e,x:null,X:null,y:we,Y:Oe,Z:je,"%":Ee},Le={a:function(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ne.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=J.exec(t.slice(n));return r?(e.w=be.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=Ie.exec(t.slice(n));return r?(e.m=Fe.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=Me.exec(t.slice(n));return r?(e.m=De.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return Ue(e,t,n,r)},d:N,e:N,f:P,g:E,G:j,H:D,I:D,j:M,L:R,m:T,M:I,p:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.p=b.get(r[0].toLowerCase()),n+r[0].length):-1},q:A,Q:B,s:z,S:F,u:w,U:k,V:O,w:_,W:S,x:function(e,t,r){return Ue(e,n,t,r)},X:function(e,t,n){return Ue(e,u,t,n)},y:E,Y:j,Z:C,"%":L};function Be(e,t){return function(n){var r,a,i,o=[],u=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++u<c;)37===e.charCodeAt(u)&&(o.push(e.slice(s,u)),null!=(a=h[r=e.charAt(++u)])?r=e.charAt(++u):a="e"===r?" ":"0",(i=t[r])&&(r=i(n,a)),o.push(r),s=u+1);return o.push(e.slice(s,u)),o.join("")}}function ze(e,t){return function(n){var u,s,d=f(1900,void 0,1);if(Ue(d,e,n+="",0)!=n.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(t&&!("Z"in d)&&(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(s=(u=l(f(d.y,0,1))).getUTCDay(),u=s>4||0===s?r.a.ceil(u):Object(r.a)(u),u=a.a.offset(u,7*(d.V-1)),d.y=u.getUTCFullYear(),d.m=u.getUTCMonth(),d.d=u.getUTCDate()+(d.w+6)%7):(s=(u=c(f(d.y,0,1))).getDay(),u=s>4||0===s?i.a.ceil(u):Object(i.a)(u),u=o.a.offset(u,7*(d.V-1)),d.y=u.getFullYear(),d.m=u.getMonth(),d.d=u.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),s="Z"in d?l(f(d.y,0,1)).getUTCDay():c(f(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(s+5)%7:d.w+7*d.U-(s+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,l(d)):c(d)}}function Ue(e,t,n,r){for(var a,i,o=0,u=t.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=Le[a in h?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return Re.x=Be(n,Re),Re.X=Be(u,Re),Re.c=Be(t,Re),Pe.x=Be(n,Pe),Pe.X=Be(u,Pe),Pe.c=Be(t,Pe),{format:function(e){var t=Be(e+="",Re);return t.toString=function(){return e},t},parse:function(e){var t=ze(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Be(e+="",Pe);return t.toString=function(){return e},t},utcParse:function(e){var t=ze(e+="",!0);return t.toString=function(){return e},t}}}var h={"-":"",_:" ",0:"0"},p=/^\s*\d+/,v=/^%/,m=/[\\^$*+?|[\]().{}]/g;function g(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function b(e){return e.replace(m,"\\$&")}function y(e){return new RegExp("^(?:"+e.map(b).join("|")+")","i")}function x(e){return new Map(e.map((function(e,t){return[e.toLowerCase(),t]})))}function _(e,t,n){var r=p.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function w(e,t,n){var r=p.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function k(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function O(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function S(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function j(e,t,n){var r=p.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function E(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function C(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function A(e,t,n){var r=p.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function T(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function N(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function M(e,t,n){var r=p.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function D(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function I(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F(e,t,n){var r=p.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function R(e,t,n){var r=p.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function P(e,t,n){var r=p.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function L(e,t,n){var r=v.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function B(e,t,n){var r=p.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function z(e,t,n){var r=p.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function U(e,t){return g(e.getDate(),t,2)}function W(e,t){return g(e.getHours(),t,2)}function V(e,t){return g(e.getHours()%12||12,t,2)}function G(e,t){return g(1+o.a.count(Object(u.a)(e),e),t,3)}function q(e,t){return g(e.getMilliseconds(),t,3)}function H(e,t){return q(e,t)+"000"}function X(e,t){return g(e.getMonth()+1,t,2)}function Y(e,t){return g(e.getMinutes(),t,2)}function K(e,t){return g(e.getSeconds(),t,2)}function $(e){var t=e.getDay();return 0===t?7:t}function Z(e,t){return g(i.b.count(Object(u.a)(e)-1,e),t,2)}function J(e){var t=e.getDay();return t>=4||0===t?Object(i.c)(e):i.c.ceil(e)}function Q(e,t){return e=J(e),g(i.c.count(Object(u.a)(e),e)+(4===Object(u.a)(e).getDay()),t,2)}function ee(e){return e.getDay()}function te(e,t){return g(i.a.count(Object(u.a)(e)-1,e),t,2)}function ne(e,t){return g(e.getFullYear()%100,t,2)}function re(e,t){return g((e=J(e)).getFullYear()%100,t,2)}function ae(e,t){return g(e.getFullYear()%1e4,t,4)}function ie(e,t){var n=e.getDay();return g((e=n>=4||0===n?Object(i.c)(e):i.c.ceil(e)).getFullYear()%1e4,t,4)}function oe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+g(t/60|0,"0",2)+g(t%60,"0",2)}function ue(e,t){return g(e.getUTCDate(),t,2)}function se(e,t){return g(e.getUTCHours(),t,2)}function ce(e,t){return g(e.getUTCHours()%12||12,t,2)}function le(e,t){return g(1+a.a.count(Object(s.a)(e),e),t,3)}function fe(e,t){return g(e.getUTCMilliseconds(),t,3)}function de(e,t){return fe(e,t)+"000"}function he(e,t){return g(e.getUTCMonth()+1,t,2)}function pe(e,t){return g(e.getUTCMinutes(),t,2)}function ve(e,t){return g(e.getUTCSeconds(),t,2)}function me(e){var t=e.getUTCDay();return 0===t?7:t}function ge(e,t){return g(r.b.count(Object(s.a)(e)-1,e),t,2)}function be(e){var t=e.getUTCDay();return t>=4||0===t?Object(r.c)(e):r.c.ceil(e)}function ye(e,t){return e=be(e),g(r.c.count(Object(s.a)(e),e)+(4===Object(s.a)(e).getUTCDay()),t,2)}function xe(e){return e.getUTCDay()}function _e(e,t){return g(r.a.count(Object(s.a)(e)-1,e),t,2)}function we(e,t){return g(e.getUTCFullYear()%100,t,2)}function ke(e,t){return g((e=be(e)).getUTCFullYear()%100,t,2)}function Oe(e,t){return g(e.getUTCFullYear()%1e4,t,4)}function Se(e,t){var n=e.getUTCDay();return g((e=n>=4||0===n?Object(r.c)(e):r.c.ceil(e)).getUTCFullYear()%1e4,t,4)}function je(){return"+0000"}function Ee(){return"%"}function Ce(e){return+e}function Ae(e){return Math.floor(+e/1e3)}},function(e){e.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"4.13.1","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"changelog":"conventional-changelog -p angular -r 2","build":"yarn build:only","build:only":"yarn tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && yarn schema && babel build/vega-lite.js --out-dir build-es5 --config-file ./babel.config.js","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"yarn tsc:site && rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"find build ! -name \'vega-lite-schema.json\' -type f -delete && rm -rf site/data/* && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"pushd site && bundle exec jekyll serve -I -l && popd","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"yarn build:only && rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch:build":"yarn build:only && concurrently --kill-others -n Typescript,Rollup \'yarn tsc:src -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'yarn tsc:site -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/cli":"^7.10.1","@babel/core":"^7.10.1","@babel/preset-env":"^7.10.1","@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"^4.0.3","@rollup/plugin-node-resolve":"^8.0.0","@types/chai":"^4.2.11","@types/d3":"^5.7.2","@types/jest":"^25.2.3","@types/mkdirp":"^1.0.0","@types/puppeteer":"^3.0.0","@typescript-eslint/eslint-plugin":"^3.0.2","@typescript-eslint/parser":"^3.0.2","ajv":"^6.12.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.3","codecov":"^3.7.0","concurrently":"^5.2.0","conventional-changelog-cli":"^2.0.34","d3":"^5.16.0","eslint":"^7.1.0","eslint-config-prettier":"^6.11.0","eslint-plugin-jest":"^23.13.2","eslint-plugin-prettier":"^3.1.3","gh-pages":"^2.2.0","highlight.js":"^10.0.3","http-server":"^0.12.3","jest":"^26.0.1","jest-puppeteer":"^4.4.0","mkdirp":"^1.0.4","prettier":"^2.0.5","puppeteer":"^3.1.0","rollup":"^2.11.0","rollup-plugin-sourcemaps":"^0.6.2","rollup-plugin-terser":"^6.1.0","svg2png-many":"^0.0.7","terser":"^4.7.0","ts-jest":"^26.0.0","ts-json-schema-generator":"^0.68.1","typescript":"~3.9.3","vega-cli":"^5.12.1","vega-datasets":"^1.30.2","vega-embed":"^6.8.0","vega-tooltip":"^0.23.0","vega-typings":"^0.17.0","yaml-front-matter":"^4.1.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.1","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~2.0.0","vega-event-selector":"~2.0.3","vega-expression":"~2.6.5","vega-util":"~1.14.0","yargs":"~15.3.1"},"peerDependencies":{"vega":"^5.12.1"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(e,t,n){(function(t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var n,r,a;try{n=Map}catch(s){n=function(){}}try{r=Set}catch(s){r=function(){}}try{a=Promise}catch(s){a=function(){}}function i(o,s,c,l,f){"object"===typeof s&&(c=s.depth,l=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],h=[],p="undefined"!=typeof t;return"undefined"==typeof s&&(s=!0),"undefined"==typeof c&&(c=1/0),function o(c,v){if(null===c)return null;if(0===v)return c;var m,g;if("object"!=typeof c)return c;if(e(c,n))m=new n;else if(e(c,r))m=new r;else if(e(c,a))m=new a((function(e,t){c.then((function(t){e(o(t,v-1))}),(function(e){t(o(e,v-1))}))}));else if(i.__isArray(c))m=[];else if(i.__isRegExp(c))m=new RegExp(c.source,u(c)),c.lastIndex&&(m.lastIndex=c.lastIndex);else if(i.__isDate(c))m=new Date(c.getTime());else{if(p&&t.isBuffer(c))return m=t.allocUnsafe?t.allocUnsafe(c.length):new t(c.length),c.copy(m),m;e(c,Error)?m=Object.create(c):"undefined"==typeof l?(g=Object.getPrototypeOf(c),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var b=d.indexOf(c);if(-1!=b)return h[b];d.push(c),h.push(m)}for(var y in e(c,n)&&c.forEach((function(e,t){var n=o(t,v-1),r=o(e,v-1);m.set(n,r)})),e(c,r)&&c.forEach((function(e){var t=o(e,v-1);m.add(t)})),c){var x;g&&(x=Object.getOwnPropertyDescriptor(g,y)),x&&null==x.set||(m[y]=o(c[y],v-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(c);for(y=0;y<_.length;y++){var w=_[y];(!(O=Object.getOwnPropertyDescriptor(c,w))||O.enumerable||f)&&(m[w]=o(c[w],v-1),O.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(f){var k=Object.getOwnPropertyNames(c);for(y=0;y<k.length;y++){var O,S=k[y];(O=Object.getOwnPropertyDescriptor(c,S))&&O.enumerable||(m[S]=o(c[S],v-1),Object.defineProperty(m,S,{enumerable:!1}))}}return m}(o,c)}function o(e){return Object.prototype.toString.call(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=u,i}();e.exports&&(e.exports=n)}).call(this,n(216).Buffer)},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!==a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},function(e){e.exports=JSON.parse('{"name":"vega-tooltip","version":"0.23.2","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","tsc:src":"tsc -b tsconfig.src.json","build":"yarn tsc:src && rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"mkdir -p build && yarn copy:data && ./build-style.sh","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'yarn tsc:src -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@rollup/plugin-commonjs":"13.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^8.1.0","@types/jest":"^26.0.4","browser-sync":"^2.26.7","codecov":"^3.7.0","concurrently":"^5.2.0","gh-pages":"^3.1.0","jest":"^26.1.0","node-sass":"^4.14.1","path":"^0.12.7","rollup":"^2.21.0","terser":"^4.8.0","ts-jest":"^26.1.1","typescript":"^3.9.6","vega-datasets":"^2.1.0","vega-lite-dev-config":"^0.11.8","vega-typings":"^0.18.0"},"dependencies":{"vega-util":"^1.14.1"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},function(e,t,n){"use strict";n.r(t),n.d(t,"json",(function(){return r}));var r=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(2),a=n.n(r),i=n(16),o=n(1),u=n(9),s=n(13),c=n(14),l=n(0),f=n(74),d=n(405),h=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"decodeUTF8",value:function(){return new p(this)}}]),n}(f.a),p=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).upstream=e,r.impl=new v(e),r}return Object(u.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d.a),v=function(t){Object(s.a)(f,t);var r=Object(c.a)(f);function f(e){var t;if(Object(o.a)(this,f),(t=r.call(this)).upstream=e,Object(l.env)().get("IS_BROWSER"))t.decoder=new TextDecoder("utf-8");else{var a=n(536).StringDecoder;t.decoder=new a("utf8")}return t}return Object(u.a)(f,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var t=Object(i.a)(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.upstream.next();case 2:if(!(n=t.sent).done){t.next=7;break}return t.abrupt("return",!1);case 7:r=n.value;case 8:return i=Object(l.env)().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(e.from(r.buffer)),this.outputQueue.push(i),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),f}(f.b)}).call(this,n(216).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(8),a=n(2),i=n.n(a),o=n(16),u=n(1),s=n(9),c=n(13),l=n(14),f=n(74),d=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"split",value:function(e){return new h(this,e)}}]),n}(f.a),h=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.impl=new p(e,r),a}return Object(s.a)(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(d),p=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(u.a)(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return Object(s.a)(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:(n=t.value.split(this.separator))[0]=this.carryover+n[0],a=Object(r.a)(n.slice(0,-1));try{for(a.s();!(o=a.n()).done;)u=o.value,this.outputQueue.push(u)}catch(i){a.e(i)}finally{a.f()}return this.carryover=n[n.length-1],e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(f.b)},function(e,t,n){var r=n(538),a=n(539),i=n(540),o=n(541),u=n(542),s=n(543),c=n(544);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},function(e,t,n){(function(t){e.exports=function e(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return a(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=c(e),o=r[0],u=r[1],s=new i(function(e,t){return 3*(e+t)/4-t}(o,u)),l=0,f=0<u?o-4:o;for(n=0;n<f;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===u&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,s[l++]=255&t),1===u&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=0,u=n-a;o<u;o+=16383)i.push(l(e,o,u<o+16383?u:o+16383));return 1==a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],a=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],a[o.charCodeAt(u)]=u;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var a,i,o=[],u=t;u<n;u+=3)a=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),a=e("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function u(e){if(o<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"!=typeof e)return s(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function s(e,n,r){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|h(e,n),a=u(r),i=a.write(e,n);return i!==r&&(a=a.slice(0,i)),a}(e,n);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var a;return a=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Object.setPrototypeOf(a,t.prototype),a}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return t.from(a,n,r);var i=function(e){if(t.isBuffer(e)){var n=0|d(e.length),r=u(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||P(e.length)?u(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),u(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),n=u(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,a=2<arguments.length&&!0===arguments[2];if(!a&&0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(e).length;default:if(i)return a?-1:D(e).length;n=(""+n).toLowerCase(),i=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,n,r,a,i){if(0===e.length)return-1;if("string"==typeof r?(a=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),P(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=t.from(n,a)),t.isBuffer(n))return 0===n.length?-1:m(e,n,r,a,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):m(e,[n],r,a,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,a){var i,o=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;u/=o=2,s/=2,n/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(u<n+s&&(n=u-s),i=n;0<=i;i--){for(var f=!0,d=0;d<s;d++)if(c(e,i+d)!==c(t,d)){f=!1;break}if(f)return i}return-1}function g(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?a<(r=Number(r))&&(r=a):r=a;var i=t.length;i/2<r&&(r=i/2);for(var o=0;o<r;++o){var u=parseInt(t.substr(2*o,2),16);if(P(u))return o;e[n+o]=u}return o}function b(e,t,n,r){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return F(function(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,u,s,c=e[a],l=null,f=239<c?4:223<c?3:191<c?2:1;if(a+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[a+1]))&&127<(s=(31&c)<<6|63&i)&&(l=s);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&2047<(s=(15&c)<<12|(63&i)<<6|63&o)&&(s<55296||57343<s)&&(l=s);break;case 4:i=e[a+1],o=e[a+2],u=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&u)&&65535<(s=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&u)&&s<1114112&&(l=s)}null===l?(l=65533,f=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=f}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=o,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return a=t,i=n,c(r=e),r<=0?u(r):void 0!==a?"string"==typeof i?u(r).fill(a,i):u(r).fill(a):u(r);var r,a,i},t.allocUnsafe=function(e){return l(e)},t.allocUnsafeSlow=function(e){return l(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(R(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),R(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,a=n.length,i=0,o=Math.min(r,a);i<o;++i)if(e[i]!==n[i]){r=e[i],a=n[i];break}return r<a?-1:a<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(r=n=0;r<e.length;++r)n+=e[r].length;var a=t.allocUnsafe(n),i=0;for(r=0;r<e.length;++r){var o=e[r];if(R(o,Uint8Array)&&(o=t.from(o)),!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,i),i+=o.length}return a},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return S(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i&&(t.prototype[i]=t.prototype.inspect),t.prototype.compare=function(e,n,r,a,i){if(R(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===a&&(a=0),void 0===i&&(i=this.length),n<0||r>e.length||a<0||i>this.length)throw new RangeError("out of range index");if(i<=a&&r<=n)return 0;if(i<=a)return-1;if(r<=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(a>>>=0),u=(r>>>=0)-(n>>>=0),s=Math.min(o,u),c=this.slice(a,i),l=e.slice(n,r),f=0;f<s;++f)if(c[f]!==l[f]){o=c[f],u=l[f];break}return o<u?-1:u<o?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,o,u,s,c,l,f=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return c=t,l=n,F(D(e,(s=this).length-c),s,c,l);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return i=this,o=t,u=n,F(I(e),i,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function S(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var a="",i=t;i<n;++i)a+=L[e[i]];return a}function j(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function C(e,n,r,a,i,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<n||n<o)throw new RangeError('"value" argument is out of bounds');if(r+a>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,8),a.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e);var a=this.subarray(e,n);return Object.setPrototypeOf(a,t.prototype),a},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=t,a=1,i=this[e+--r];0<r&&(a*=256);)i+=this[e+--r]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),a.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),a.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),a.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),a.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);C(this,e,t,n,a-1,-a)}var i=0,o=1,u=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);C(this,e,t,n,a-1,-a)}var i=n-1,o=1,u=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return T(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return T(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,a){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,a||0===a||(a=this.length),n>=e.length&&(n=e.length),n=n||0,0<a&&a<r&&(a=r),a===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-n<a-r&&(a=e.length-n+r);var i=a-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,a);else if(this===e&&r<n&&n<a)for(var o=i-1;0<=o;--o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,a),n);return i},t.prototype.fill=function(e,n,r,a){if("string"==typeof e){if("string"==typeof n?(a=n,n=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(1===e.length){var i=e.charCodeAt(0);("utf8"===a&&i<128||"latin1"===a)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var o;if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=n;o<r;++o)this[o]=e;else{var u=t.isBuffer(e)?e:t.from(e,a),s=u.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=u[o%s]}return this};var M=/[^+/0-9A-Za-z-_]/g;function D(e,t){var n;t=t||1/0;for(var r=e.length,a=null,i=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function I(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function P(e){return e!=e}var L=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:9}],5:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":6}],6:[function(e,n,r){(function(t,a){var i,o;i=this,o=function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,u=void 0,s=function(e,t){v[i]=e,v[i+1]=t,2===(i+=2)&&(u?u(m):_())},c="undefined"!=typeof window?window:void 0,l=c||{},f=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var v=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,v[e])(v[e+1]),v[e]=void 0,v[e+1]=void 0;i=0}var g,b,y,x,_=void 0;function w(e,t){var n=this,r=new this.constructor(S);void 0===r[O]&&B(r);var a=n._state;if(a){var i=arguments[a-1];s((function(){return P(a,r,i,n._result)}))}else F(n,r,e,t);return r}function k(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return N(t,e),t}_=d?function(){return t.nextTick(m)}:f?(b=0,y=new f(m),x=document.createTextNode(""),y.observe(x,{characterData:!0}),function(){x.data=b=++b%2}):h?((g=new MessageChannel).port1.onmessage=m,function(){return g.port2.postMessage(0)}):void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(m)}:p()}catch(e){return p()}}():p();var O=Math.random().toString(36).substring(2);function S(){}var j=void 0,E=1,C=2;function A(e,t,n){s((function(e){var r=!1,a=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?N(e,n):D(e,n))}),(function(t){r||(r=!0,I(e,t))}),e._label);!r&&a&&(r=!0,I(e,a))}),e)}function T(e,t,r){var a,i;t.constructor===e.constructor&&r===w&&t.constructor.resolve===k?(a=e,(i=t)._state===E?D(a,i._result):i._state===C?I(a,i._result):F(i,void 0,(function(e){return N(a,e)}),(function(e){return I(a,e)}))):void 0===r?D(e,t):n(r)?A(e,t,r):D(e,t)}function N(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(a=typeof(r=t),null===r||"object"!=a&&"function"!=a)D(e,t);else{var n=void 0;try{n=t.then}catch(t){return void I(e,t)}T(e,t,n)}var r,a}function M(e){e._onerror&&e._onerror(e._result),R(e)}function D(e,t){e._state===j&&(e._result=t,e._state=E,0!==e._subscribers.length&&s(R,e))}function I(e,t){e._state===j&&(e._state=C,e._result=t,s(M,e))}function F(e,t,n,r){var a=e._subscribers,i=a.length;e._onerror=null,a[i]=t,a[i+E]=n,a[i+C]=r,0===i&&e._state&&s(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,a=void 0,i=e._result,o=0;o<t.length;o+=3)r=t[o],a=t[o+n],r?P(n,r,a,i):a(i);e._subscribers.length=0}}function P(e,t,r,a){var i=n(r),o=void 0,u=void 0,s=!0;if(i){try{o=r(a)}catch(e){s=!1,u=e}if(t===o)return void I(t,new TypeError("A promises callback cannot return that same promise."))}else o=a;t._state!==j||(i&&s?N(t,o):!1===s?I(t,u):e===E?D(t,o):e===C&&I(t,o))}var L=0;function B(e){e[O]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var z=(U.prototype._enumerate=function(e){for(var t=0;this._state===j&&t<e.length;t++)this._eachEntry(e[t],t)},U.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===k){var a=void 0,i=void 0,o=!1;try{a=e.then}catch(t){o=!0,i=t}if(a===w&&e._state!==j)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(n===W){var u=new n(S);o?I(u,i):T(u,e,a),this._willSettleAt(u,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},U.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===j&&(this._remaining--,e===C?I(r,n):this._result[t]=n),0===this._remaining&&D(r,this._result)},U.prototype._willSettleAt=function(e,t){var n=this;F(e,void 0,(function(e){return n._settledAt(E,t,e)}),(function(e){return n._settledAt(C,t,e)}))},U);function U(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[O]||B(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&D(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}var W=(V.prototype.catch=function(e){return this.then(null,e)},V.prototype.finally=function(e){var t=this.constructor;return n(e)?this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})):this.then(e,e)},V);function V(e){this[O]=L++,this._result=this._state=void 0,this._subscribers=[],S!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(e,t){try{t((function(t){N(e,t)}),(function(t){I(e,t)}))}catch(t){I(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return W.prototype.then=w,W.all=function(e){return new z(this,e).promise},W.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var a=e.length,i=0;i<a;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},W.resolve=k,W.reject=function(e){var t=new this(S);return I(t,e),t},W._setScheduler=function(e){u=e},W._setAsap=function(e){s=e},W._asap=s,W.polyfill=function(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=W},W.Promise=W},"object"==typeof r&&void 0!==n?n.exports=o():i.ES6Promise=o()}).call(this,e("_process"),"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:14}],7:[function(e,t,n){!function(e,r){if(void 0!==n&&void 0!==t)r(n,t);else{var a={exports:{}};r(a.exports,a),e.fetchJsonp=a.exports}}(this,(function(e,t){"use strict";var n=5e3,r="callback";function a(t){try{delete window[t]}catch(e){window[t]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,u=t.timeout||n,s=t.jsonpCallback||r,c=void 0;return new Promise((function(n,r){var l=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+l;window[l]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),c&&clearTimeout(c),i(f),a(l)},o+=-1===o.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+o+s+"="+l),t.charset&&d.setAttribute("charset",t.charset),d.id=f,document.getElementsByTagName("head")[0].appendChild(d),c=setTimeout((function(){r(new Error("JSONP request to "+e+" timed out")),a(l),i(f),window[l]=function(){a(l)}}),u),d.onerror=function(){r(new Error("JSONP request to "+e+" failed")),a(l),i(f),c&&clearTimeout(c)}}))}}))},{}],8:[function(e,t,n){var r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},s=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(t,l,f){function d(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var a=e["on"+t[r]];if("function"==typeof a)try{a.call(e,n||e)}catch(e){u(e)}}}(p,"writestart progress write writeend".split(" "))}f||(t=c(t));var h,p=this,v="application/octet-stream"===t.type;if(p.readyState=p.INIT,a)return h=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=h,r.download=l,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),d(),s(h),p.readyState=p.DONE}));!function(){if((o||v&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,d()},r.readAsDataURL(t),p.readyState=p.INIT}h=h||n().createObjectURL(t),v?e.location.href=h:e.open(h,"_blank")||(e.location.href=h),p.readyState=p.DONE,d(),s(h)}()},f=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],9:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,u=8*a-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=u;0<l;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;0<l;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=c}return(h?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,u,s,c=8*i-a-1,l=(1<<c)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),2<=(t+=1<=o+f?d/s:d*Math.pow(2,1-f))*s&&(o++,s/=2),l<=o+f?(u=0,o=l):1<=o+f?(u=(t*s-1)*Math.pow(2,a),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));8<=a;e[n+h]=255&u,h+=p,u/=256,a-=8);for(o=o<<a|u,c+=a;0<c;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*v}},{}],10:[function(e,t,n){"use strict";var r;function a(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function o(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?r<a?t.a-e.a+r/(r+a)*(e.a-n.a):t.a-n.a+a/(r+a)*(n.a-e.a):0}function u(e,t,n){var r=t.b-e.b,a=n.b-t.b;return 0<r+a?(t.a-n.a)*r+(t.a-e.a)*a:0}function s(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function c(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?r<a?t.b-e.b+r/(r+a)*(e.b-n.b):t.b-n.b+a/(r+a)*(n.b-e.b):0}function l(e,t,n){var r=t.a-e.a,a=n.a-t.a;return 0<r+a?(t.b-n.b)*r+(t.b-e.b)*a:0}function f(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function d(e){var t=g(e.b);return y(t,e.c),y(t.b,e.c),x(t,e.a),t}function h(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,w(t.a,e.a)),t.d!==e.d&&(n=!0,k(t.d,e.d)),b(t,e),r||(y(t,e.a),e.a.c=e),n||(x(t,e.d),e.d.a=e))}function p(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,k(e.d,e.b.d)),e.c===e?w(e.a,null):(e.b.d.a=J(e),e.a.c=e.c,b(e,J(e)),n||x(e,e.d)),t.c===t?(w(t.a,null),k(t.d,null)):(e.d.a=J(t),t.a.c=t.c,b(t,J(t))),_(e)}function v(e){var t=g(e),n=t.b;return b(t,e.e),t.a=e.b.a,y(n,t.a),t.d=n.d=e.d,t=t.b,b(e.b,J(e.b)),b(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function m(e,t){var n=!1,r=g(e),a=r.b;return t.d!==e.d&&(n=!0,k(t.d,e.d)),b(r,e.e),b(a,t),r.a=e.b.a,a.a=t.a,r.d=a.d=e.d,e.d.a=a,n||x(r,e.d),r}function g(e){var t=new Z,n=new Z,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function b(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function y(e,t){var n=t.f,r=new ee(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function x(e,t){var n=t.d,r=new $(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function _(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function w(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function k(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function O(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}var S=4e150;function j(e,t){e.f+=t.f,e.b.f+=t.b.f}function E(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?i(t.a,n.a)?u(n.b.a,t.a,n.a)<=0:0<=u(t.b.a,n.a,t.a):u(n.b.a,e,n.a)<=0:n.b.a===e?0<=u(t.b.a,e,t.a):(t=o(t.b.a,e,t.a),(e=o(n.b.a,e,n.a))<=t)}function C(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function A(e,t){p(e.a),e.c=!1,(e.a=t).i=e}function T(e){for(var t=e.a.a;(e=de(e)).a.a===t;);return e.c&&(A(e,t=m(fe(e).a.b,e.a.e)),e=de(e)),e}function N(e,t,n){var r=new le;return r.a=n,r.e=q(e.f,t.e,r),n.i=r}function M(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function D(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,C(e)}function I(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=fe(e),a=r.a;if(a.a!==t.a){if(!r.c){D(e);break}A(r,a=m(t.c.b,a.b))}t.c!==a&&(h(J(a),a),h(t,a)),D(e),t=r.a,e=r}return t}function F(e,t,n,r,a,i){for(var o=!0;N(e,t,n.b),(n=n.c)!==r;);for(null===a&&(a=fe(t).a.b.c);(n=(r=fe(t)).a.b).a===a.a;)n.c!==a&&(h(J(n),n),h(J(a),n)),r.f=t.f-n.f,r.d=M(e,r.f),t.b=!0,!o&&B(e,t)&&(j(n,a),C(t),p(a)),o=!1,t=r,a=n;t.b=!0,i&&U(e,t)}function R(e,t,n,r,a){var i=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(i,n,r,e.c)||null,null===t.d&&(a?e.n||(K(e,100156),e.n=!0):t.d=n[0])}function P(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,R(e,t.a,r,[.5,.5,0,0],!1),h(t,n)}function L(e,t,n,r,a){var i=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),o=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),u=a+1;r[a]=.5*o/(i+o),r[u]=.5*i/(i+o),e.g[0]+=r[a]*t.g[0]+r[u]*n.g[0],e.g[1]+=r[a]*t.g[1]+r[u]*n.g[1],e.g[2]+=r[a]*t.g[2]+r[u]*n.g[2]}function B(e,t){var n=fe(t),r=t.a,o=n.a;if(i(r.a,o.a)){if(0<u(o.b.a,r.a,o.a))return!1;if(a(r.a,o.a)){if(r.a!==o.a){n=e.e;var s=r.a.h;if(0<=s){var c=(n=n.b).d,l=n.e,f=n.c,d=f[s];c[d]=c[n.a],(f[c[d]]=d)<=--n.a&&(d<=1||i(l[c[d>>1]],l[c[d]])?se(n,d):ce(n,d)),l[s]=null,f[s]=n.b,n.b=s}else for(n.c[-(s+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;P(e,J(o),r)}}else v(o.b),h(r,J(o)),t.b=n.b=!0}else{if(u(r.b.a,o.a,r.a)<0)return!1;de(t).b=t.b=!0,v(r.b),h(J(o),r)}return!0}function z(e,t){var n=fe(t),r=t.a,d=n.a,p=r.a,m=d.a,g=r.b.a,b=d.b.a,y=new ee;if(u(g,e.a,p),u(b,e.a,m),p===m||Math.min(p.a,g.a)>Math.max(m.a,b.a))return!1;if(i(p,m)){if(0<u(b,p,m))return!1}else if(u(g,m,p)<0)return!1;var x,_,w=g,k=p,O=b,S=m;if(i(w,k)||(x=w,w=k,k=x),i(O,S)||(x=O,O=S,S=x),i(w,O)||(x=w,w=O,O=x,x=k,k=S,S=x),i(O,k)?i(k,S)?((x=o(w,O,k))+(_=o(O,k,S))<0&&(x=-x,_=-_),y.b=f(x,O.b,_,k.b)):((x=u(w,O,k))+(_=-u(w,S,k))<0&&(x=-x,_=-_),y.b=f(x,O.b,_,S.b)):y.b=(O.b+k.b)/2,s(w,k)||(x=w,w=k,k=x),s(O,S)||(x=O,O=S,S=x),s(w,O)||(x=w,w=O,O=x,x=k,k=S,S=x),s(O,k)?s(k,S)?((x=c(w,O,k))+(_=c(O,k,S))<0&&(x=-x,_=-_),y.a=f(x,O.a,_,k.a)):((x=l(w,O,k))+(_=-l(w,S,k))<0&&(x=-x,_=-_),y.a=f(x,O.a,_,S.a)):y.a=(O.a+k.a)/2,i(y,e.a)&&(y.b=e.a.b,y.a=e.a.a),w=i(p,m)?p:m,i(w,y)&&(y.b=w.b,y.a=w.a),a(y,p)||a(y,m))return B(e,t),!1;if(!a(g,e.a)&&0<=u(g,e.a,y)||!a(b,e.a)&&u(b,e.a,y)<=0){if(b===e.a)return v(r.b),h(d.b,r),r=fe(t=T(t)).a,I(e,fe(t),n),F(e,t,J(r),r,r,!0),!0;if(g!==e.a)return 0<=u(g,e.a,y)&&(de(t).b=t.b=!0,v(r.b),r.a.b=e.a.b,r.a.a=e.a.a),u(b,e.a,y)<=0&&(t.b=n.b=!0,v(d.b),d.a.b=e.a.b,d.a.a=e.a.a),!1;for(v(d.b),h(r.e,J(d)),m=(p=n=t).a.b.a;(p=de(p)).a.b.a===m;);return p=fe(t=p).a.b.c,n.a=J(d),F(e,t,(d=I(e,n,null)).c,r.b.c,p,!0),!0}return v(r.b),v(d.b),h(J(d),r),r.a.b=y.b,r.a.a=y.a,r.a.h=ne(e.e,r.a),r=r.a,d=[0,0,0,0],y=[p.d,g.d,m.d,b.d],r.g[0]=r.g[1]=r.g[2]=0,L(r,p,g,d,0),L(r,m,b,d,2),R(e,r,y,d,!0),de(t).b=t.b=n.b=!0,!1}function U(e,t){for(var n=fe(t);;){for(;n.b;)n=fe(t=n);if(!t.b&&(null===(t=de(n=t))||!t.b))break;t.b=!1;var r,a=t.a,o=n.a;if(r=a.b.a!==o.b.a)e:{var s=fe(r=t),c=r.a,l=s.a,f=void 0;if(i(c.b.a,l.b.a)){if(u(c.b.a,l.b.a,c.a)<0){r=!1;break e}de(r).b=r.b=!0,f=v(c),h(l.b,f),f.d.c=r.d}else{if(0<u(l.b.a,c.b.a,l.a)){r=!1;break e}r.b=s.b=!0,f=v(l),h(c.e,l.b),f.b.d.c=r.d}r=!0}if(r&&(n.c?(C(n),p(o),o=(n=fe(t)).a):t.c&&(C(t),p(a),a=(t=de(n)).a)),a.a!==o.a)if(a.b.a===o.b.a||t.c||n.c||a.b.a!==e.a&&o.b.a!==e.a)B(e,t);else if(z(e,t))break;a.a===o.a&&a.b.a===o.b.a&&(j(o,a),C(t),p(a),t=de(n))}}function W(e,t){for(var n=(e.a=t).c;null===n.i;)if((n=n.c)===t.c){n=e;var r=t;(c=new le).a=r.c.b;for(var o=(f=n.f).a;null!==(o=o.a).b&&!f.c(f.b,c,o.b););var s=fe(f=o.b),c=f.a;if(o=s.a,0===u(c.b.a,r,c.a))a((c=f.a).a,r)||a(c.b.a,r)||(v(c.b),f.c&&(p(c.c),f.c=!1),h(r.c,c),W(n,r));else{var l=i(o.b.a,c.b.a)?f:s;s=void 0,f.d||l.c?(s=l===f?m(r.c.b,c.e):m(o.b.c.b,r.c).b,l.c?A(l,s):((f=N(c=n,f,s)).f=de(f).f+f.a.f,f.d=M(c,f.f)),W(n,r)):F(n,f,r.c,r.c,null,!0)}return}if(f=(c=fe(n=T(n.i))).a,(c=I(e,c,null)).c===f){c=(f=c).c,o=fe(n),s=n.a,l=o.a;var f,d=!1;s.b.a!==l.b.a&&z(e,n),a(s.a,e.a)&&(h(J(c),s),c=fe(n=T(n)).a,I(e,fe(n),o),d=!0),a(l.a,e.a)&&(h(f,J(l)),f=I(e,o,null),d=!0),d?F(e,n,f.c,c,c,!0):(r=i(l.a,s.a)?J(l):s,F(e,n,r=m(f.c.b,r),r.c,r.c,!1),r.b.i.c=!0,U(e,n))}else F(e,n,c.c,f,f,!0)}function V(e,t){var n=new le,r=d(e.b);r.a.b=S,r.a.a=t,r.b.a.b=-S,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=q(r=e.f,r.a,n),n.e=r}function G(e){this.a=new H,this.b=e,this.c=E}function q(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new H(n,t.a,t),t.a.c=e,t.a=e}function H(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function X(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function Y(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:K(e,100151),e.u(null);break;case 1:K(e,100152),e.t()}else switch(e.d){case 2:K(e,100154),e.v();break;case 1:K(e,100153),e.w()}}function K(e,t){e.p&&e.p(t,e.c)}function $(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Z(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function J(e){return e.b.e}function Q(){this.c=new ee,this.a=new $,this.b=new Z,this.d=new Z,this.b.b=this.d,this.d.b=this.b}function ee(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function te(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ae}function ne(e,t){if(e.e){var n,r=e.b,a=++r.a;return 2*a>r.f&&(r.f*=2,r.c=ie(r.c,r.f+1)),0===r.b?n=a:(n=r.b,r.b=r.c[r.b]),r.e[n]=t,r.c[n]=a,r.d[a]=n,r.h&&ce(r,a),n}return r=e.a++,e.c[r]=t,-(r+1)}function re(e){if(0===e.a)return ue(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(oe(e.b),t))return ue(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function ae(){this.d=ie([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ie(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function oe(e){return e.e[e.d[1]]}function ue(e){var t=e.d,n=e.e,r=e.c,a=t[1],i=n[a];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[a]=null,r[a]=e.b,e.b=a,0<--e.a&&se(e,1)),i}function se(e,t){for(var n=e.d,r=e.e,a=e.c,o=t,u=n[o];;){var s=o<<1;s<e.a&&i(r[n[s+1]],r[n[s]])&&(s+=1);var c=n[s];if(s>e.a||i(r[u],r[c])){a[n[o]=u]=o;break}a[n[o]=c]=o,o=s}}function ce(e,t){for(var n=e.d,r=e.e,a=e.c,o=t,u=n[o];;){var s=o>>1,c=n[s];if(0==s||i(r[c],r[u])){a[n[o]=u]=o;break}a[n[o]=c]=o,o=s}}function le(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function fe(e){return e.e.c.b}function de(e){return e.e.a.b}(r=X.prototype).x=function(){Y(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void K(this,100900)}K(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:K(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:K(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];Y(this,2);for(var a=0;a<3;++a){var i=e[a];i<-1e150&&(i=-1e150,n=!0),1e150<i&&(i=1e150,n=!0),r[a]=i}n&&K(this,100155),null===(n=this.q)?h(n=d(this.b),n.b):(v(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){Y(this,0),this.d=1,this.b=new Q,this.c=e},r.t=function(){Y(this,1),this.d=2,this.q=null},r.v=function(){Y(this,2),this.d=1},r.w=function(){Y(this,1),this.d=0;var e,t,n=!1,r=[f=this.j[0],o=this.j[1],c=this.j[2]];if(0===f&&0===o&&0===c){for(var o=[-2e150,-2e150,-2e150],s=[2e150,2e150,2e150],c=[],l=[],f=(n=this.b.c).e;f!==n;f=f.e)for(var d=0;d<3;++d){var h=f.g[d];h<s[d]&&(s[d]=h,l[d]=f),h>o[d]&&(o[d]=h,c[d]=f)}if(f=0,o[1]-s[1]>o[0]-s[0]&&(f=1),o[2]-s[2]>o[f]-s[f]&&(f=2),s[f]>=o[f])r[0]=0,r[1]=0,r[2]=1;else{for(o=0,s=l[f],c=c[f],l=[0,0,0],s=[s.g[0]-c.g[0],s.g[1]-c.g[1],s.g[2]-c.g[2]],d=[0,0,0],f=n.e;f!==n;f=f.e)d[0]=f.g[0]-c.g[0],d[1]=f.g[1]-c.g[1],d[2]=f.g[2]-c.g[2],l[0]=s[1]*d[2]-s[2]*d[1],l[1]=s[2]*d[0]-s[0]*d[2],l[2]=s[0]*d[1]-s[1]*d[0],o<(h=l[0]*l[0]+l[1]*l[1]+l[2]*l[2])&&(o=h,r[0]=l[0],r[1]=l[1],r[2]=l[2]);o<=0&&(r[0]=r[1]=r[2]=0,r[O(s)]=1)}n=!0}for(l=O(r),f=this.b.c,o=(l+1)%3,c=(l+2)%3,l=0<r[l]?1:-1,r=f.e;r!==f;r=r.e)r.b=r.g[o],r.a=l*r.g[c];if(n){for(r=0,f=(n=this.b.a).b;f!==n;f=f.b)if(!((o=f.a).f<=0))for(;r+=(o.a.b-o.b.a.b)*(o.a.a+o.b.a.a),(o=o.e)!==f.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,f=(r=this.b.b).h;f!==r;f=n)n=f.h,o=f.e,a(f.a,f.b.a)&&f.e.e!==f&&(P(this,o,f),p(f),o=(f=o).e),o.e===f&&(o!==f&&(o!==n&&o!==n.b||(n=n.h),p(o)),f!==n&&f!==n.b||(n=n.h),p(f));for(this.e=r=new te,f=(n=this.b.c).e;f!==n;f=f.e)f.h=ne(r,f);for(function(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,n){return i(e[t],e[n])?1:-1}}(e.c)),e.e=!0,function(e){for(var t=e.a;1<=t;--t)se(e,t);e.h=!0}(e.b)}(r),this.f=new G(this),V(this,-S),V(this,S);null!==(r=re(this.e));){for(;;){e:if(f=this.e,0===f.a)n=oe(f.b);else if(n=f.c[f.d[f.a-1]],0!==f.b.a&&(f=oe(f.b),i(f,n))){n=f;break e}if(null===n||!a(n,r))break;n=re(this.e),P(this,r.c,n.c)}W(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,C(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,f=(r=this.b).a.b;f!==r.a;f=n)n=f.b,(f=f.a).e.e===f&&(j(f.c,f),p(f));if(!this.n){if(r=this.b,this.m)for(f=r.b.h;f!==r.b;f=n)n=f.h,f.b.d.c!==f.d.c?f.f=f.d.c?1:-1:p(f);else for(f=r.a.b;f!==r.a;f=n)if(n=f.b,f.c){for(f=f.a;i(f.b.a,f.a);f=f.c.b);for(;i(f.a,f.b.a);f=f.e);for(o=f.c.b,c=void 0;f.e!==o;)if(i(f.b.a,o.a)){for(;o.e!==f&&(i((t=o.e).b.a,t.a)||u(o.a,o.b.a,o.e.b.a)<=0);)o=(c=m(o.e,o)).b;o=o.c.b}else{for(;o.e!==f&&(i((e=f.c.b).a,e.b.a)||0<=u(f.b.a,f.a,f.c.b.a));)f=(c=m(f,f.c.b)).b;f=f.e}for(;o.e.e!==f;)o=(c=m(o.e,o)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),f=n.a;this.k&&this.k(f.a.d,this.c),(f=f.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,f=!1,o=-1,c=r.a.d;c!==r.a;c=c.d)if(c.c)for(f||(this.h&&this.h(4,this.c),f=!0),l=c.a;n&&o!==(s=l.b.d.c?0:1)&&(o=s,this.l&&this.l(!!o,this.c)),this.k&&this.k(l.a.d,this.c),(l=l.e)!==c.a;);f&&this.i&&this.i(this.c)}if(this.r){for(f=(r=this.b).a.b;f!==r.a;f=n)if(n=f.b,!f.c){for(c=(o=f.a).e,l=void 0;c=(l=c).e,(l.d=null)===l.b.d&&(l.c===l?w(l.a,null):(l.a.c=l.c,b(l,J(l))),(s=l.b).c===s?w(s.a,null):(s.a.c=s.c,b(s,J(s))),_(l)),l!==o;);o=f.d,((f=f.b).d=o).b=f}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:X,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},X.prototype.gluDeleteTess=X.prototype.x,X.prototype.gluTessProperty=X.prototype.B,X.prototype.gluGetTessProperty=X.prototype.y,X.prototype.gluTessNormal=X.prototype.A,X.prototype.gluTessCallback=X.prototype.z,X.prototype.gluTessVertex=X.prototype.C,X.prototype.gluTessBeginPolygon=X.prototype.u,X.prototype.gluTessBeginContour=X.prototype.t,X.prototype.gluTessEndContour=X.prototype.v,X.prototype.gluTessEndPolygon=X.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],11:[function(e,t,n){"use strict";function r(e,t,n,r){for(var a=e[t++],i=1<<a,o=1+i,u=1+o,s=a+1,c=(1<<s)-1,l=0,f=0,d=0,h=e[t++],p=new Int32Array(4096),v=null;;){for(;l<16&&0!==h;)f|=e[t++]<<l,l+=8,1===h?h=e[t++]:--h;if(l<s)break;var m=f&c;if(f>>=s,l-=s,m!=i){if(m==o)break;for(var g=m<u?m:v,b=0,y=g;i<y;)y=p[y]>>8,++b;var x=y;if(r<d+b+(g!==m?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=x;var _=d+=b;for(g!==m&&(n[d++]=x),y=g;b--;)y=p[y],n[--_]=255&y,y>>=8;null!==v&&u<4096&&(p[u++]=v<<8|x,c+1<=u&&s<12&&(++s,c=c<<1|1)),v=m}else u=1+o,c=(1<<(s=a+1))-1,v=null}return d!==r&&console.log("Warning, gif stream shorter than expected."),n}try{n.GifWriter=function(e,t,n,r){var a=0,i=void 0===(r=void 0===r?{}:r).loop?null:r.loop,o=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function u(e){var t=e.length;if(t<2||256<t||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var s=0,c=0;if(null!==o){for(var l=u(o);l>>=1;)++s;if(l=1<<s,--s,void 0!==r.background){if(l<=(c=r.background))throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=(null!==o?128:0)|s,e[a++]=c,e[a++]=0,null!==o)for(var f=0,d=o.length;f<d;++f){var h=o[f];e[a++]=h>>16&255,e[a++]=h>>8&255,e[a++]=255&h}if(null!==i){if(i<0||65535<i)throw new Error("Loop count invalid.");e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=0}var p=!1;this.addFrame=function(t,n,r,i,s,c){if(!0===p&&(--a,p=!1),c=void 0===c?{}:c,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||i<=0||65535<r||65535<i)throw new Error("Width/Height invalid.");if(s.length<r*i)throw new Error("Not enough pixels for the frame size.");var l=!0,f=c.palette;if(null==f&&(l=!1,f=o),null==f)throw new Error("Must supply either a local or global palette.");for(var d=u(f),h=0;d>>=1;)++h;d=1<<h;var v=void 0===c.delay?0:c.delay,m=void 0===c.disposal?0:c.disposal;if(m<0||3<m)throw new Error("Disposal out of range.");var g=!1,b=0;if(void 0!==c.transparent&&null!==c.transparent&&(g=!0,(b=c.transparent)<0||d<=b))throw new Error("Transparent color index.");if(0===m&&!g&&0===v||(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=m<<2|(!0===g?1:0),e[a++]=255&v,e[a++]=v>>8&255,e[a++]=b,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=!0===l?128|h-1:0,!0===l)for(var y=0,x=f.length;y<x;++y){var _=f[y];e[a++]=_>>16&255,e[a++]=_>>8&255,e[a++]=255&_}return a=function(e,t,n,r){e[t++]=n;var a=t++,i=1<<n,o=i-1,u=1+i,s=1+u,c=n+1,l=0,f=0;function d(n){for(;n<=l;)e[t++]=255&f,f>>=8,l-=8,t===a+256&&(e[a]=255,a=t++)}function h(e){f|=e<<l,l+=c,d(8)}var p=r[0]&o,v={};h(i);for(var m=1,g=r.length;m<g;++m){var b=r[m]&o,y=p<<8|b,x=v[y];if(void 0===x){for(f|=p<<l,l+=c;8<=l;)e[t++]=255&f,f>>=8,l-=8,t===a+256&&(e[a]=255,a=t++);4096===s?(h(i),s=1+u,c=n+1,v={}):(1<<c<=s&&++c,v[y]=s++),p=b}else p=x}return h(p),h(u),d(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}(e,a,h<2?2:h,s)},this.end=function(){return!1===p&&(e[a++]=59,p=!0),a},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return a},this.setOutputBufferPosition=function(e){a=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,u=1<<1+(7&i);e[t++],e[t++];var s=null,c=null;o&&(s=t,t+=3*(c=u));var l=!0,f=[],d=0,h=null,p=0,v=null;for(this.width=n,this.height=a;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(E=e[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!(0<=(E=e[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++],w=_>>6&1,k=s,O=c,S=!1;_>>7&&(S=!0,k=t,t+=3*(O=1<<1+(7&_)));var j=t;for(t++;;){var E;if(!(0<=(E=e[t++])))throw Error("Invalid block size");if(0===E)break;t+=E}f.push({x:g,y:b,width:y,height:x,has_local_palette:S,palette_offset:k,palette_size:O,data_offset:j,data_length:t-j,transparent_index:h,interlaced:!!w,delay:d,disposal:p});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(e){if(e<0||e>=f.length)throw new Error("Frame index out of range.");return f[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,u=new Uint8Array(o);r(e,i.data_offset,u,o);var s=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=n-l,d=l,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),v=h,m=4*f;!0===i.interlaced&&(m+=4*n*7);for(var g=8,b=0,y=u.length;b<y;++b){var x=u[b];if(0===d&&(d=l,p<=(v+=m)&&(m=4*f+4*n*(g-1),v=h+(l+f)*(g<<1),g>>=1)),x===c)v+=4;else{var _=e[s+3*x],w=e[s+3*x+1],k=e[s+3*x+2];a[v++]=k,a[v++]=w,a[v++]=_,a[v++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,u=new Uint8Array(o);r(e,i.data_offset,u,o);var s=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=n-l,d=l,h=4*(i.y*n+i.x),p=4*((i.y+i.height)*n+i.x),v=h,m=4*f;!0===i.interlaced&&(m+=4*n*7);for(var g=8,b=0,y=u.length;b<y;++b){var x=u[b];if(0===d&&(d=l,p<=(v+=m)&&(m=4*f+4*n*(g-1),v=h+(l+f)*(g<<1),g>>=1)),x===c)v+=4;else{var _=e[s+3*x],w=e[s+3*x+1],k=e[s+3*x+2];a[v++]=_,a[v++]=w,a[v++]=k,a[v++]=255}--d}}}}catch(e){}},{}],12:[function(e,t,n){(function(r){!function(t){"use strict";function n(e){if(null==this)throw TypeError();var t=String(this),n=t.length,r=e?Number(e):0;if(r!=r&&(r=0),!(r<0||n<=r)){var a,i=t.charCodeAt(r);return 55296<=i&&i<=56319&&r+1<n&&56320<=(a=t.charCodeAt(r+1))&&a<=57343?1024*(i-55296)+a-56320+65536:i}}var a;String.prototype.codePointAt||((a=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?a(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var i=0,o=-3;function u(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function s(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new u,this.dtree=new u}var c=new u,l=new u,f=new Uint8Array(30),d=new Uint16Array(30),h=new Uint8Array(30),p=new Uint16Array(30),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new u,g=new Uint8Array(320);function b(e,t,n,r){var a,i;for(a=0;a<n;++a)e[a]=0;for(a=0;a<30-n;++a)e[a+n]=a/n|0;for(i=r,a=0;a<30;++a)t[a]=i,i+=1<<e[a]}var y=new Uint16Array(16);function x(e,t,n,r){var a,i;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<r;++a)e.table[t[n+a]]++;for(a=i=e.table[0]=0;a<16;++a)y[a]=i,i+=e.table[a];for(a=0;a<r;++a)t[n+a]&&(e.trans[y[t[n+a]]++]=a)}function _(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function w(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function k(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,a=0,i=e.tag;r=2*r+(1&i),i>>>=1,++a,n+=t.table[a],0<=(r-=t.table[a]););return e.tag=i,e.bitcount-=a,t.trans[n+r]}function O(e,t,n){var r,a,i,o,u,s;for(r=w(e,5,257),a=w(e,5,1),i=w(e,4,4),o=0;o<19;++o)g[o]=0;for(o=0;o<i;++o){var c=w(e,3,0);g[v[o]]=c}for(x(m,g,0,19),u=0;u<r+a;){var l=k(e,m);switch(l){case 16:var f=g[u-1];for(s=w(e,2,3);s;--s)g[u++]=f;break;case 17:for(s=w(e,3,3);s;--s)g[u++]=0;break;case 18:for(s=w(e,7,11);s;--s)g[u++]=0;break;default:g[u++]=l}}x(t,g,0,r),x(n,g,r,a)}function S(e,t,n){for(;;){var r,a,o,u,s=k(e,t);if(256===s)return i;if(s<256)e.dest[e.destLen++]=s;else for(r=w(e,f[s-=257],d[s]),a=k(e,n),u=o=e.destLen-w(e,h[a],p[a]);u<o+r;++u)e.dest[e.destLen++]=e.dest[u]}}function j(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return o;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,i}!function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(c,l),b(f,d,4,3),b(h,p,2,1),f[28]=0,d[28]=258;var E=function(e,t){var n,r,a=new s(e,t);do{switch(n=_(a),w(a,2,0)){case 0:r=j(a);break;case 1:r=S(a,c,l);break;case 2:O(a,a.ltree,a.dtree),r=S(a,a.ltree,a.dtree);break;default:r=o}if(r!==i)throw new Error("Data error")}while(!n);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest};function C(e,t,n,r,a){return Math.pow(1-a,3)*e+3*Math.pow(1-a,2)*a*t+3*(1-a)*Math.pow(a,2)*n+Math.pow(a,3)*r}function A(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function T(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function N(e){throw new Error(e)}function M(e,t){e||N(t)}A.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},A.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},A.prototype.addX=function(e){this.addPoint(e,null)},A.prototype.addY=function(e){this.addPoint(null,e)},A.prototype.addBezier=function(e,t,n,r,a,i,o,u){var s=this,c=[e,t],l=[n,r],f=[a,i],d=[o,u];this.addPoint(e,t),this.addPoint(o,u);for(var h=0;h<=1;h++){var p=6*c[h]-12*l[h]+6*f[h],v=-3*c[h]+9*l[h]-9*f[h]+3*d[h],m=3*l[h]-3*c[h];if(0!=v){var g=Math.pow(p,2)-4*m*v;if(!(g<0)){var b=(-p+Math.sqrt(g))/(2*v);0<b&&b<1&&(0===h&&s.addX(C(c[h],l[h],f[h],d[h],b)),1===h&&s.addY(C(c[h],l[h],f[h],d[h],b)));var y=(-p-Math.sqrt(g))/(2*v);0<y&&y<1&&(0===h&&s.addX(C(c[h],l[h],f[h],d[h],y)),1===h&&s.addY(C(c[h],l[h],f[h],d[h],y)))}}else{if(0==p)continue;var x=-m/p;0<x&&x<1&&(0===h&&s.addX(C(c[h],l[h],f[h],d[h],x)),1===h&&s.addY(C(c[h],l[h],f[h],d[h],x)))}}},A.prototype.addQuad=function(e,t,n,r,a,i){var o=e+2/3*(n-e),u=t+2/3*(r-t),s=o+1/3*(a-e),c=u+1/3*(i-t);this.addBezier(e,t,o,u,s,c,a,i)},T.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},T.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},T.prototype.curveTo=T.prototype.bezierCurveTo=function(e,t,n,r,a,i){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:a,y:i})},T.prototype.quadTo=T.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},T.prototype.close=T.prototype.closePath=function(){this.commands.push({type:"Z"})},T.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof A){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},T.prototype.getBoundingBox=function(){for(var e=new A,t=0,n=0,r=0,a=0,i=0;i<this.commands.length;i++){var o=this.commands[i];switch(o.type){case"M":e.addPoint(o.x,o.y),t=r=o.x,n=a=o.y;break;case"L":e.addPoint(o.x,o.y),r=o.x,a=o.y;break;case"Q":e.addQuad(r,a,o.x1,o.y1,o.x,o.y),r=o.x,a=o.y;break;case"C":e.addBezier(r,a,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,a=o.y;break;case"Z":r=t,a=n;break;default:throw new Error("Unexpected path command "+o.type)}}return e.isEmpty()&&e.addPoint(0,0),e},T.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},T.prototype.toPathData=function(e){function t(){for(var t,n=arguments,r="",a=0;a<arguments.length;a+=1){var i=n[a];0<=i&&0<a&&(r+=" "),r+=(t=i,Math.round(t)===t?""+Math.round(t):t.toFixed(e))}return r}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var a=this.commands[r];"M"===a.type?n+="M"+t(a.x,a.y):"L"===a.type?n+="L"+t(a.x,a.y):"C"===a.type?n+="C"+t(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+t(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},T.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},T.prototype.toDOMElement=function(e){var t=this.toPathData(e),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),n};var D={fail:N,argument:M,assert:M},I=2147483648,F={},R={},P={};function L(e){return function(){return e}}R.BYTE=function(e){return D.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},P.BYTE=L(1),R.CHAR=function(e){return[e.charCodeAt(0)]},P.CHAR=L(1),R.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},P.CHARARRAY=function(e){return e.length},R.USHORT=function(e){return[e>>8&255,255&e]},P.USHORT=L(2),R.SHORT=function(e){return 32768<=e&&(e=-(65536-e)),[e>>8&255,255&e]},P.SHORT=L(2),R.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},P.UINT24=L(3),R.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},P.ULONG=L(4),R.LONG=function(e){return I<=e&&(e=-(2*I-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},P.LONG=L(4),R.FIXED=R.ULONG,P.FIXED=P.ULONG,R.FWORD=R.SHORT,P.FWORD=P.SHORT,R.UFWORD=R.USHORT,P.UFWORD=P.USHORT,R.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},P.LONGDATETIME=L(8),R.TAG=function(e){return D.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},P.TAG=L(4),R.Card8=R.BYTE,P.Card8=P.BYTE,R.Card16=R.USHORT,P.Card16=P.USHORT,R.OffSize=R.BYTE,P.OffSize=P.BYTE,R.SID=R.USHORT,P.SID=P.USHORT,R.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?R.NUMBER16(e):R.NUMBER32(e)},P.NUMBER=function(e){return R.NUMBER(e).length},R.NUMBER16=function(e){return[28,e>>8&255,255&e]},P.NUMBER16=L(3),R.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},P.NUMBER32=L(5),R.REAL=function(e){var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));t=(Math.round(e*r)/r).toString()}for(var a="",i=0,o=t.length;i<o;i+=1){var u=t[i];a+="e"===u?"-"===t[++i]?"c":"b":"."===u?"a":"-"===u?"e":u}for(var s=[30],c=0,l=(a+=1&a.length?"f":"ff").length;c<l;c+=2)s.push(parseInt(a.substr(c,2),16));return s},P.REAL=function(e){return R.REAL(e).length},R.NAME=R.CHARARRAY,P.NAME=P.CHARARRAY,R.STRING=R.CHARARRAY,P.STRING=P.CHARARRAY,F.UTF8=function(e,t,n){for(var r=[],a=n,i=0;i<a;i++,t+=1)r[i]=e.getUint8(t);return String.fromCharCode.apply(null,r)},F.UTF16=function(e,t,n){for(var r=[],a=n/2,i=0;i<a;i++,t+=2)r[i]=e.getUint16(t);return String.fromCharCode.apply(null,r)},R.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},P.UTF16=function(e){return 2*e.length};var B={"x-mac-croatian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e","x-mac-gaelic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83","x-mac-greek":"\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026\xa0\u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad","x-mac-icelandic":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026\xa0\u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142","x-mac-ce":"\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026\xa0\u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",macintosh:"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-romanian":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7","x-mac-turkish":"\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026\xa0\xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7"};F.MACSTRING=function(e,t,n,r){var a=B[r];if(void 0!==a){for(var i="",o=0;o<n;o++){var u=e.getUint8(t+o);i+=u<=127?String.fromCharCode(u):a[127&u]}return i}};var z,U="function"==typeof WeakMap&&new WeakMap;function W(e){return-128<=e&&e<=127}function V(e,t,n){for(var r=0,a=e.length;t<a&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}function G(e,t,n){for(var r=0,a=e.length,i=t;i<a&&r<64;){var o=e[i];if(!W(o))break;if(0===o&&i+1<a&&0===e[i+1])break;++i,++r}n.push(r-1);for(var u=t;u<i;++u)n.push(e[u]+256&255);return i}function q(e,t,n){for(var r=0,a=e.length,i=t;i<a&&r<64;){var o=e[i];if(0===o)break;if(W(o)&&i+1<a&&W(e[i+1]))break;++i,++r}n.push(64|r-1);for(var u=t;u<i;++u){var s=e[u];n.push(s+65536>>8&255,s+256&255)}return i}R.MACSTRING=function(e,t){var n=function(e){if(!z)for(var t in z={},B)z[t]=new String(t);var n=z[e];if(void 0!==n){if(U){var r=U.get(n);if(void 0!==r)return r}var a=B[e];if(void 0!==a){for(var i={},o=0;o<a.length;o++)i[a.charCodeAt(o)]=o+128;return U&&U.set(n,i),i}}}(t);if(void 0!==n){for(var r=[],a=0;a<e.length;a++){var i=e.charCodeAt(a);if(128<=i&&void 0===(i=n[i]))return;r[a]=i}return r}},P.MACSTRING=function(e,t){var n=R.MACSTRING(e,t);return void 0!==n?n.length:0},R.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=0===r?V(e,t,n):-128<=r&&r<=127?G(e,t,n):q(e,t,n)}return n},R.INDEX=function(e){for(var t=1,n=[t],r=[],a=0;a<e.length;a+=1){var i=R.OBJECT(e[a]);Array.prototype.push.apply(r,i),t+=i.length,n.push(t)}if(0===r.length)return[0,0];for(var o=[],u=1+Math.floor(Math.log(t)/Math.log(2))/8|0,s=[void 0,R.BYTE,R.USHORT,R.UINT24,R.ULONG][u],c=0;c<n.length;c+=1){var l=s(n[c]);Array.prototype.push.apply(o,l)}return Array.prototype.concat(R.Card16(e.length),R.OffSize(u),o,r)},P.INDEX=function(e){return R.INDEX(e).length},R.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,a=0;a<r;a+=1){var i=parseInt(n[a],0),o=e[i];t=(t=t.concat(R.OPERAND(o.value,o.type))).concat(R.OPERATOR(i))}return t},P.DICT=function(e){return R.DICT(e).length},R.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},R.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)D.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(R.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(R.NUMBER(e));else if("offset"===t)n=n.concat(R.NUMBER32(e));else if("number"===t)n=n.concat(R.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(R.REAL(e))}return n},R.OP=R.BYTE,P.OP=P.BYTE;var H="function"==typeof WeakMap&&new WeakMap;function X(e,t,n){for(var r=0;r<t.length;r+=1){var a=t[r];this[a.name]=a.value}if(this.tableName=e,this.fields=t,n)for(var i=Object.keys(n),o=0;o<i.length;o+=1){var u=i[o],s=n[u];void 0!==this[u]&&(this[u]=s)}}function Y(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<t.length;a++)r[a+1]={name:e+a,type:"USHORT",value:t[a]};return r}function K(e,t,n){var r=t.length,a=new Array(r+1);a[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)a[i+1]={name:e+i,type:"TABLE",value:n(t[i],i)};return a}function $(e,t,n){var r=t.length,a=[];a[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<r;i++)a=a.concat(n(t[i],i));return a}function Z(e){1===e.format?X.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Y("glyph",e.glyphs))):D.assert(!1,"Can't create coverage table format 2 yet.")}function J(e){X.call(this,"scriptListTable",$("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return D.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new X("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new X("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(Y("featureIndex",r.featureIndexes)))}].concat($("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new X("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(Y("featureIndex",n.featureIndexes)))}]}))))}]})))}function Q(e){X.call(this,"featureListTable",$("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new X("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(Y("lookupListIndex",n.lookupListIndexes)))}]})))}function ee(e,t){X.call(this,"lookupListTable",K("lookup",e,(function(e){var n=t[e.lookupType];return D.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new X("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(K("subtable",e.subtables,n)))})))}R.CHARSTRING=function(e){if(H){var t=H.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,a=0;a<r;a+=1){var i=e[a];n=n.concat(R[i.type](i.value))}return H&&H.set(e,n),n},P.CHARSTRING=function(e){return R.CHARSTRING(e).length},R.OBJECT=function(e){var t=R[e.type];return D.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},P.OBJECT=function(e){var t=P[e.type];return D.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},R.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],a=[],i=0;i<n;i+=1){var o=e.fields[i],u=R[o.type];D.argument(void 0!==u,"No encoding function for field type "+o.type+" ("+o.name+")");var s=e[o.name];void 0===s&&(s=o.value);var c=u(s);"TABLE"===o.type?(a.push(t.length),t=t.concat([0,0]),r.push(c)):t=t.concat(c)}for(var l=0;l<r.length;l+=1){var f=a[l],d=t.length;D.argument(d<65536,"Table "+e.tableName+" too big."),t[f]=d>>8,t[f+1]=255&d,t=t.concat(r[l])}return t},P.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var a=e.fields[r],i=P[a.type];D.argument(void 0!==i,"No sizeOf function for field type "+a.type+" ("+a.name+")");var o=e[a.name];void 0===o&&(o=a.value),t+=i(o),"TABLE"===a.type&&(t+=2)}return t},R.RECORD=R.TABLE,P.RECORD=P.TABLE,R.LITERAL=function(e){return e},P.LITERAL=function(e){return e.length},X.prototype.encode=function(){return R.TABLE(this)},X.prototype.sizeOf=function(){return P.TABLE(this)};var te={Table:X,Record:X,Coverage:(Z.prototype=Object.create(X.prototype)).constructor=Z,ScriptList:(J.prototype=Object.create(X.prototype)).constructor=J,FeatureList:(Q.prototype=Object.create(X.prototype)).constructor=Q,LookupList:(ee.prototype=Object.create(X.prototype)).constructor=ee,ushortList:Y,tableList:K,recordList:$};function ne(e,t){return e.getUint8(t)}function re(e,t){return e.getUint16(t,!1)}function ae(e,t){return e.getUint32(t,!1)}function ie(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var oe={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ue(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ue.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ue.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ue.prototype.parseCard8=ue.prototype.parseByte,ue.prototype.parseCard16=ue.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ue.prototype.parseSID=ue.prototype.parseUShort,ue.prototype.parseOffset16=ue.prototype.parseUShort,ue.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ue.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ue.prototype.parseOffset32=ue.prototype.parseULong=function(){var e=ae(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ue.prototype.parseFixed=function(){var e=ie(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ue.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var a=0;a<e;a++)r+=String.fromCharCode(t.getUint8(n+a));return r},ue.prototype.parseTag=function(){return this.parseString(4)},ue.prototype.parseLongDateTime=function(){var e=ae(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ue.prototype.parseVersion=function(e){var t=re(this.data,this.offset+this.relativeOffset),n=re(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+n/e/10},ue.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=oe[e]*t},ue.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ue.prototype.parseOffset16List=ue.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ue.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ue.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=n.getUint8(r++);return this.relativeOffset+=e,t},ue.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ue.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ue.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var i={},o=0;o<r.length;o++){var u=r[o],s=t[u];i[u]=s.call(this)}n[a]=i}return n},ue.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),a=0;a<e;a++){for(var i={},o=0;o<r.length;o++){var u=r[o],s=t[u];i[u]=s.call(this)}n[a]=i}return n},ue.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r],i=e[a];n[a]=i.call(this)}return n},ue.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ue.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ue.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ue(this.data,this.offset+t).parseStruct(e)},ue.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ue(this.data,this.offset+t).parseStruct(e)},ue.prototype.parseListOfLists=function(e){for(var t=this,n=this.parseOffset16List(),r=n.length,a=this.relativeOffset,i=new Array(r),o=0;o<r;o++){var u=n[o];if(0!==u)if(t.relativeOffset=u,e){for(var s=t.parseOffset16List(),c=new Array(s.length),l=0;l<s.length;l++)t.relativeOffset=u+s[l],c[l]=e.call(t);i[o]=c}else i[o]=t.parseUShortList();else i[o]=void 0}return this.relativeOffset=a,i},ue.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),a=0;a<n;a++)r[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},ue.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ue.uShort,end:ue.uShort,classId:ue.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ue.list=function(e,t){return function(){return this.parseList(e,t)}},ue.list32=function(e,t){return function(){return this.parseList32(e,t)}},ue.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ue.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ue.pointer=function(e){return function(){return this.parsePointer(e)}},ue.pointer32=function(e){return function(){return this.parsePointer32(e)}},ue.tag=ue.prototype.parseTag,ue.byte=ue.prototype.parseByte,ue.uShort=ue.offset16=ue.prototype.parseUShort,ue.uShortList=ue.prototype.parseUShortList,ue.uLong=ue.offset32=ue.prototype.parseULong,ue.uLongList=ue.prototype.parseULongList,ue.struct=ue.prototype.parseStruct,ue.coverage=ue.prototype.parseCoverage,ue.classDef=ue.prototype.parseClassDef;var se={reserved:ue.uShort,reqFeatureIndex:ue.uShort,featureIndexes:ue.uShortList};ue.prototype.parseScriptList=function(){return this.parsePointer(ue.recordList({tag:ue.tag,script:ue.pointer({defaultLangSys:ue.pointer(se),langSysRecords:ue.recordList({tag:ue.tag,langSys:ue.pointer(se)})})}))||[]},ue.prototype.parseFeatureList=function(){return this.parsePointer(ue.recordList({tag:ue.tag,feature:ue.pointer({featureParams:ue.offset16,lookupListIndexes:ue.uShortList})}))||[]},ue.prototype.parseLookupList=function(e){return this.parsePointer(ue.list(ue.pointer((function(){var t=this.parseUShort();D.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var n=this.parseUShort(),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ue.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ue.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return D.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ue.offset32,featureTableSubstitutionOffset:ue.offset32})}))||[]};var ce={getByte:ne,getCard8:ne,getUShort:re,getCard16:re,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ae,getFixed:ie,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,a=0;a<n;a+=1)r<<=8,r+=e.getUint8(t+a);return r},getBytes:function(e,t,n){for(var r=[],a=t;a<n;a+=1)r.push(e.getUint8(a));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ue},le={parse:function(e,t){var n={};n.version=ce.getUShort(e,t),D.argument(0===n.version,"cmap table version should be 0."),n.numTables=ce.getUShort(e,t+2);for(var r=-1,a=n.numTables-1;0<=a;--a){var i=ce.getUShort(e,t+4+8*a),o=ce.getUShort(e,t+4+8*a+2);if(3===i&&(0===o||1===o||10===o)||0===i&&(0===o||1===o||2===o||3===o||4===o)){r=ce.getULong(e,t+4+8*a+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var u=new ce.Parser(e,t+r);if(n.format=u.parseUShort(),12===n.format)!function(e,t){var n;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=n=t.parseULong(),e.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var a=t.parseULong(),i=t.parseULong(),o=t.parseULong(),u=a;u<=i;u+=1)e.glyphIndexMap[u]=o,o++}(n,u);else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");!function(e,t,n,r,a){var i;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=i=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new ce.Parser(n,r+a+14),u=new ce.Parser(n,r+a+16+2*i),s=new ce.Parser(n,r+a+16+4*i),c=new ce.Parser(n,r+a+16+6*i),l=r+a+16+8*i,f=0;f<i-1;f+=1)for(var d=void 0,h=o.parseUShort(),p=u.parseUShort(),v=s.parseShort(),m=c.parseUShort(),g=p;g<=h;g+=1)0!==m?(l=c.offset+c.relativeOffset-2,l+=m,l+=2*(g-p),0!==(d=ce.getUShort(n,l))&&(d=d+v&65535)):d=g+v&65535,e.glyphIndexMap[g]=d}(n,u,e,t,r)}return n},make:function(e){var t,n=!0;for(t=e.length-1;0<t;--t)if(65535<e.get(t).unicode){console.log("Adding CMAP format 12 (needed!)"),n=!1;break}var r=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:n?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:n?12:20}];n||(r=r.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),r=r.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var a,i,o,u=new te.Table("cmap",r);for(u.segments=[],t=0;t<e.length;t+=1){for(var s=e.get(t),c=0;c<s.unicodes.length;c+=1)a=u,i=s.unicodes[c],o=t,a.segments.push({end:i,start:i,delta:-(i-o),offset:0,glyphIndex:o});u.segments=u.segments.sort((function(e,t){return e.start-t.start}))}u.segments.push({end:65535,start:65535,delta:1,offset:0});var l=u.segments.length,f=0,d=[],h=[],p=[],v=[],m=[],g=[];for(t=0;t<l;t+=1){var b=u.segments[t];b.end<=65535&&b.start<=65535?(d=d.concat({name:"end_"+t,type:"USHORT",value:b.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:b.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:b.delta}),v=v.concat({name:"idRangeOffset_"+t,type:"USHORT",value:b.offset}),void 0!==b.glyphId&&(m=m.concat({name:"glyph_"+t,type:"USHORT",value:b.glyphId}))):f+=1,n||void 0===b.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+t,type:"ULONG",value:b.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:b.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:b.glyphIndex}))}if(u.segCountX2=2*(l-f),u.searchRange=2*Math.pow(2,Math.floor(Math.log(l-f)/Math.log(2))),u.entrySelector=Math.log(u.searchRange/2)/Math.log(2),u.rangeShift=u.segCountX2-u.searchRange,u.fields=u.fields.concat(d),u.fields.push({name:"reservedPad",type:"USHORT",value:0}),u.fields=u.fields.concat(h),u.fields=u.fields.concat(p),u.fields=u.fields.concat(v),u.fields=u.fields.concat(m),u.cmap4Length=14+2*d.length+2+2*h.length+2*p.length+2*v.length+2*m.length,!n){var y=16+4*g.length;u.cmap12Offset=20+u.cmap4Length,u.fields=u.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:y},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),u.fields=u.fields.concat(g)}return u}},fe=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],de=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ve(e){this.font=e}function me(e){this.cmap=e}function ge(e,t){this.encoding=e,this.charset=t}function be(e){switch(e.version){case 1:this.names=pe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<pe.length?this.names[t]=pe[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-pe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=pe[n+e.glyphNameIndex[n]];break;case 3:default:this.names=[]}}ve.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var a=n.get(r),i=0;i<a.unicodes.length;i+=1)if(a.unicodes[i]===t)return r;return null},me.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ge.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.encoding[t];return this.charset.indexOf(n)},be.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},be.prototype.glyphIndexToName=function(e){return this.names[e]};var ye={line:function(e,t,n,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.stroke()}};function xe(e){this.bindConstructorValues(e)}function _e(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function we(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}xe.prototype.bindConstructorValues=function(e){var t,n;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,n=t||new T,{configurable:!0,get:function(){return"function"==typeof n&&(n=n()),n},set:function(e){n=e}}))},xe.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},xe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},xe.prototype.getPath=function(e,t,n,r,a){var i,o;e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;var u=(r=r||{}).xScale,s=r.yScale;if(r.hinting&&a&&a.hinting&&(o=this.path&&a.hinting.exec(this,n)),o)i=a.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),u=s=1;else{i=this.path.commands;var c=1/this.path.unitsPerEm*n;void 0===u&&(u=c),void 0===s&&(s=c)}for(var l=new T,f=0;f<i.length;f+=1){var d=i[f];"M"===d.type?l.moveTo(e+d.x*u,t+-d.y*s):"L"===d.type?l.lineTo(e+d.x*u,t+-d.y*s):"Q"===d.type?l.quadraticCurveTo(e+d.x1*u,t+-d.y1*s,e+d.x*u,t+-d.y*s):"C"===d.type?l.curveTo(e+d.x1*u,t+-d.y1*s,e+d.x2*u,t+-d.y2*s,e+d.x*u,t+-d.y*s):"Z"===d.type&&l.closePath()}return l},xe.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return D.argument(0===t.length,"There are still points left in the current contour."),e},xe.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];"Z"!==a.type&&(t.push(a.x),n.push(a.y)),"Q"!==a.type&&"C"!==a.type||(t.push(a.x1),n.push(a.y1)),"C"===a.type&&(t.push(a.x2),n.push(a.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},xe.prototype.draw=function(e,t,n,r,a){this.getPath(t,n,r,a).draw(e)},xe.prototype.drawPoints=function(e,t,n,r){function a(t,n,r,a){var i=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(n+t[o].x*a,r+t[o].y*a),e.arc(n+t[o].x*a,r+t[o].y*a,2,0,i,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24;for(var i=1/this.path.unitsPerEm*r,o=[],u=[],s=this.path,c=0;c<s.commands.length;c+=1){var l=s.commands[c];void 0!==l.x&&o.push({x:l.x,y:-l.y}),void 0!==l.x1&&u.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&u.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",a(o,t,n,i),e.fillStyle="red",a(u,t,n,i)},xe.prototype.drawMetrics=function(e,t,n,r){var a;t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:24,a=1/this.path.unitsPerEm*r,e.lineWidth=1,e.strokeStyle="black",ye.line(e,t,-1e4,t,1e4),ye.line(e,-1e4,n,1e4,n);var i=this.xMin||0,o=this.yMin||0,u=this.xMax||0,s=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",ye.line(e,t+i*a,-1e4,t+i*a,1e4),ye.line(e,t+u*a,-1e4,t+u*a,1e4),ye.line(e,-1e4,n+-o*a,1e4,n+-o*a),ye.line(e,-1e4,n+-s*a,1e4,n+-s*a),e.strokeStyle="green",ye.line(e,t+c*a,-1e4,t+c*a,1e4)},we.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},we.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var ke={GlyphSet:we,glyphLoader:function(e,t){return new xe({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,a,i){return function(){var o=new xe({index:t,font:e});return o.path=function(){n(o,r,a);var t=i(e.glyphs,o);return t.unitsPerEm=e.unitsPerEm,t},_e(o,"xMin","_xMin"),_e(o,"xMax","_xMax"),_e(o,"yMin","_yMin"),_e(o,"yMax","_yMax"),o}},cffGlyphLoader:function(e,t,n,r){return function(){var a=new xe({index:t,font:e});return a.path=function(){var t=n(e,a,r);return t.unitsPerEm=e.unitsPerEm,t},a}}};function Oe(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(!Oe(e[n],t[n]))return!1;return!0}return!1}function Se(e){return e.length<1240?107:e.length<33900?1131:32768}function je(e,t,n){var r,a,i=[],o=[],u=ce.getCard16(e,t);if(0!==u){var s=ce.getByte(e,t+2);r=t+(u+1)*s+2;for(var c=t+3,l=0;l<u+1;l+=1)i.push(ce.getOffset(e,c,s)),c+=s;a=r+i[u]}else a=t+2;for(var f=0;f<i.length-1;f+=1){var d=ce.getBytes(e,r+i[f],r+i[f+1]);n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:a}}function Ee(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var r=e.parseByte(),a=r>>4,i=15&r;if(15==a)break;if(t+=n[a],15==i)break;t+=n[i]}return parseFloat(t)}(e);if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ce(e,t,n){t=void 0!==t?t:0;var r=new ce.Parser(e,t),a=[],i=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(12===o&&(o=1200+r.parseByte()),a.push([o,i]),i=[]):i.push(Ee(r,o))}return function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n][0],a=e[n][1],i=void 0;if(i=1===a.length?a[0]:a,t.hasOwnProperty(r)&&!isNaN(t[r]))throw new Error("Object "+t+" already has key "+r);t[r]=i}return t}(a)}function Ae(e,t){return t<=390?fe[t]:e[t-391]}function Te(e,t,n){for(var r,a={},i=0;i<t.length;i+=1){var o=t[i];if(Array.isArray(o.type)){var u=[];u.length=o.type.length;for(var s=0;s<o.type.length;s++)void 0===(r=void 0!==e[o.op]?e[o.op][s]:void 0)&&(r=void 0!==o.value&&void 0!==o.value[s]?o.value[s]:null),"SID"===o.type[s]&&(r=Ae(n,r)),u[s]=r;a[o.name]=u}else void 0===(r=e[o.op])&&(r=void 0!==o.value?o.value:null),"SID"===o.type&&(r=Ae(n,r)),a[o.name]=r}return a}var Ne=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Me=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function De(e,t,n,r){return Te(Ce(e,t,n),Me,r)}function Ie(e,t,n,r){for(var a,i,o=[],u=0;u<n.length;u+=1){var s=(i=r,Te(Ce(a=new DataView(new Uint8Array(n[u]).buffer),0,a.byteLength),Ne,i));s._subrs=[],s._subrsBias=0;var c=s.private[0],l=s.private[1];if(0!==c&&0!==l){var f=De(e,l+t,c,r);if(s._defaultWidthX=f.defaultWidthX,s._nominalWidthX=f.nominalWidthX,0!==f.subrs){var d=je(e,l+f.subrs+t);s._subrs=d.objects,s._subrsBias=Se(s._subrs)}s._privateDict=f}o.push(s)}return o}function Fe(e,t,n){var r,a,i,o,u,s,c,l,f=new T,d=[],h=0,p=!1,v=!1,m=0,g=0;if(e.isCIDFont){var b=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[b];u=y._subrs,s=y._subrsBias,c=y._defaultWidthX,l=y._nominalWidthX}else u=e.tables.cff.topDict._subrs,s=e.tables.cff.topDict._subrsBias,c=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var x=c;function _(e,t){v&&f.closePath(),f.moveTo(e,t),v=!0}function w(){d.length%2==0||p||(x=d.shift()+l),h+=d.length>>1,d.length=0,p=!0}return function n(c){for(var b,y,k,O,S,j,E,C,A,T,N,M,D=0;D<c.length;){var I=c[D];switch(D+=1,I){case 1:case 3:w();break;case 4:1<d.length&&!p&&(x=d.shift()+l,p=!0),g+=d.pop(),_(m,g);break;case 5:for(;0<d.length;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 6:for(;0<d.length&&(m+=d.shift(),f.lineTo(m,g),0!==d.length);)g+=d.shift(),f.lineTo(m,g);break;case 7:for(;0<d.length&&(g+=d.shift(),f.lineTo(m,g),0!==d.length);)m+=d.shift(),f.lineTo(m,g);break;case 8:for(;0<d.length;)r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 10:S=d.pop()+s,(j=u[S])&&n(j);break;case 11:return;case 12:switch(I=c[D],D+=1,I){case 35:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),E=i+d.shift(),C=o+d.shift(),A=E+d.shift(),T=C+d.shift(),N=A+d.shift(),M=T+d.shift(),m=N+d.shift(),g=M+d.shift(),d.shift(),f.curveTo(r,a,i,o,E,C),f.curveTo(A,T,N,M,m,g);break;case 34:r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),E=i+d.shift(),C=o,A=E+d.shift(),T=o,N=A+d.shift(),M=g,m=N+d.shift(),f.curveTo(r,a,i,o,E,C),f.curveTo(A,T,N,M,m,g);break;case 36:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),E=i+d.shift(),C=o,A=E+d.shift(),T=o,N=A+d.shift(),M=T+d.shift(),m=N+d.shift(),f.curveTo(r,a,i,o,E,C),f.curveTo(A,T,N,M,m,g);break;case 37:r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),E=i+d.shift(),C=o+d.shift(),A=E+d.shift(),T=C+d.shift(),N=A+d.shift(),M=T+d.shift(),Math.abs(N-m)>Math.abs(M-g)?m=N+d.shift():g=M+d.shift(),f.curveTo(r,a,i,o,E,C),f.curveTo(A,T,N,M,m,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+I),d.length=0}break;case 14:0<d.length&&!p&&(x=d.shift()+l,p=!0),v&&(f.closePath(),v=!1);break;case 18:w();break;case 19:case 20:w(),D+=h+7>>3;break;case 21:2<d.length&&!p&&(x=d.shift()+l,p=!0),g+=d.pop(),_(m+=d.pop(),g);break;case 22:1<d.length&&!p&&(x=d.shift()+l,p=!0),_(m+=d.pop(),g);break;case 23:w();break;case 24:for(;2<d.length;)r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);m+=d.shift(),g+=d.shift(),f.lineTo(m,g);break;case 25:for(;6<d.length;)m+=d.shift(),g+=d.shift(),f.lineTo(m,g);r=m+d.shift(),a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 26:for(d.length%2&&(m+=d.shift());0<d.length;)r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i,g=o+d.shift(),f.curveTo(r,a,i,o,m,g);break;case 27:for(d.length%2&&(g+=d.shift());0<d.length;)r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o,f.curveTo(r,a,i,o,m,g);break;case 28:b=c[D],y=c[D+1],d.push((b<<24|y<<16)>>16),D+=2;break;case 29:S=d.pop()+e.gsubrsBias,(j=e.gsubrs[S])&&n(j);break;case 30:for(;0<d.length&&(r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g),0!==d.length);)r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),g=o+d.shift(),m=i+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g);break;case 31:for(;0<d.length&&(r=m+d.shift(),a=g,i=r+d.shift(),o=a+d.shift(),g=o+d.shift(),m=i+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g),0!==d.length);)r=m,a=g+d.shift(),i=r+d.shift(),o=a+d.shift(),m=i+d.shift(),g=o+(1===d.length?d.shift():0),f.curveTo(r,a,i,o,m,g);break;default:I<32?console.log("Glyph "+t.index+": unknown operator "+I):I<247?d.push(I-139):I<251?(b=c[D],D+=1,d.push(256*(I-247)+b+108)):I<255?(b=c[D],D+=1,d.push(256*-(I-251)-b-108)):(b=c[D],y=c[D+1],k=c[D+2],O=c[D+3],D+=4,d.push((b<<24|y<<16|k<<8|O)/65536))}}}(n),t.advanceWidth=x,f}function Re(e,t){var n,r=fe.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+fe.length:(n=fe.length+t.length,t.push(e)),n}function Pe(e,t,n){for(var r={},a=0;a<e.length;a+=1){var i=e[a],o=t[i.name];void 0===o||Oe(o,i.value)||("SID"===i.type&&(o=Re(o,n)),r[i.op]={name:i.name,type:i.type,value:o})}return r}function Le(e,t){var n=new te.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Pe(Ne,e,t),n}function Be(e){var t=new te.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function ze(e){var t=[],n=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,a=0,i=0;i<n.commands.length;i+=1){var o=void 0,u=void 0,s=n.commands[i];if("Q"===s.type&&(s={type:"C",x:s.x,y:s.y,x1:1/3*r+2/3*s.x1,y1:1/3*a+2/3*s.y1,x2:1/3*s.x+2/3*s.x1,y2:1/3*s.y+2/3*s.y1}),"M"===s.type)o=Math.round(s.x-r),u=Math.round(s.y-a),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(s.x),a=Math.round(s.y);else if("L"===s.type)o=Math.round(s.x-r),u=Math.round(s.y-a),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(s.x),a=Math.round(s.y);else if("C"===s.type){var c=Math.round(s.x1-r),l=Math.round(s.y1-a),f=Math.round(s.x2-s.x1),d=Math.round(s.y2-s.y1);o=Math.round(s.x-s.x2),u=Math.round(s.y-s.y2),t.push({name:"dx1",type:"NUMBER",value:c}),t.push({name:"dy1",type:"NUMBER",value:l}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(s.x),a=Math.round(s.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Ue={parse:function(e,t,n){n.tables.cff={};var r,a,i,o=je(e,(r=e,a=t,(i={}).formatMajor=ce.getCard8(r,a),i.formatMinor=ce.getCard8(r,a+1),i.size=ce.getCard8(r,a+2),i.offsetSize=ce.getCard8(r,a+3),i.startOffset=a,i.endOffset=a+4,i).endOffset,ce.bytesToString),u=je(e,o.endOffset),s=je(e,u.endOffset,ce.bytesToString),c=je(e,s.endOffset);n.gsubrs=c.objects,n.gsubrsBias=Se(n.gsubrs);var l=Ie(e,t,u.objects,s.objects);if(1!==l.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+l.length);var f=l[0];if((n.tables.cff.topDict=f)._privateDict&&(n.defaultWidthX=f._privateDict.defaultWidthX,n.nominalWidthX=f._privateDict.nominalWidthX),void 0!==f.ros[0]&&void 0!==f.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){var d=f.fdArray,h=f.fdSelect;if(0===d||0===h)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=Ie(e,t,je(e,d+=t).objects,s.objects);f._fdArray=p,h+=t,f._fdSelect=function(e,t,n,r){var a,i=[],o=new ce.Parser(e,t),u=o.parseCard8();if(0===u)for(var s=0;s<n;s++){if(r<=(a=o.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");i.push(a)}else{if(3!==u)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+u);var c,l=o.parseCard16(),f=o.parseCard16();if(0!==f)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+f);for(var d=0;d<l;d++){if(a=o.parseCard8(),c=o.parseCard16(),r<=a)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+r+")");if(n<c)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+c);for(;f<c;f++)i.push(a);f=c}if(c!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+c)}return i}(e,h,n.numGlyphs,p.length)}var v=t+f.private[1],m=De(e,v,f.private[0],s.objects);if(n.defaultWidthX=m.defaultWidthX,n.nominalWidthX=m.nominalWidthX,0!==m.subrs){var g=je(e,v+m.subrs);n.subrs=g.objects,n.subrsBias=Se(n.subrs)}else n.subrs=[],n.subrsBias=0;var b=je(e,t+f.charStrings);n.nGlyphs=b.objects.length;var y=function(e,t,n,r){var a,i,o=new ce.Parser(e,t);--n;var u=[".notdef"],s=o.parseCard8();if(0===s)for(var c=0;c<n;c+=1)a=o.parseSID(),u.push(Ae(r,a));else if(1===s)for(;u.length<=n;){a=o.parseSID(),i=o.parseCard8();for(var l=0;l<=i;l+=1)u.push(Ae(r,a)),a+=1}else{if(2!==s)throw new Error("Unknown charset format "+s);for(;u.length<=n;){a=o.parseSID(),i=o.parseCard16();for(var f=0;f<=i;f+=1)u.push(Ae(r,a)),a+=1}}return u}(e,t+f.charset,n.nGlyphs,s.objects);0===f.encoding?n.cffEncoding=new ge(de,y):1===f.encoding?n.cffEncoding=new ge(he,y):n.cffEncoding=function(e,t,n){var r,a={},i=new ce.Parser(e,t),o=i.parseCard8();if(0===o)for(var u=i.parseCard8(),s=0;s<u;s+=1)a[r=i.parseCard8()]=s;else{if(1!==o)throw new Error("Unknown encoding format "+o);var c=i.parseCard8();r=1;for(var l=0;l<c;l+=1)for(var f=i.parseCard8(),d=i.parseCard8(),h=f;h<=f+d;h+=1)a[h]=r,r+=1}return new ge(a,n)}(e,t+f.encoding,y),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ke.GlyphSet(n);for(var x=0;x<n.nGlyphs;x+=1){var _=b.objects[x];n.glyphs.push(x,ke.cffGlyphLoader(n,x,Fe,_))}},make:function(e,t){for(var n,r=new te.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),a=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[a,0,0,a,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o=[],u=1;u<e.length;u+=1)n=e.get(u),o.push(n.name);var s=[];r.header=new te.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new te.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]);var c,l,f,d=Le(i,s);r.topDictIndex=Be(d),r.globalSubrIndex=new te.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new te.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var a=Re(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:a})}return n}(o,s),r.charStringsIndex=function(e){for(var t=new te.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),a=ze(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:a})}return t}(e),r.privateDict=(c={},l=s,(f=new te.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Pe(Me,c,l),f),r.stringIndex=function(e){var t=new te.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(s);var h=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),d=Le(i,s),r.topDictIndex=Be(d),r}},We={parse:function(e,t){var n={},r=new ce.Parser(e,t);return n.version=r.parseVersion(),n.fontRevision=Math.round(1e3*r.parseFixed())/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),D.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new te.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Ve={parse:function(e,t){var n={},r=new ce.Parser(e,t);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n},make:function(e){return new te.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Ge={parse:function(e,t,n,r,a){for(var i,o,u=new ce.Parser(e,t),s=0;s<r;s+=1){s<n&&(i=u.parseUShort(),o=u.parseShort());var c=a.get(s);c.advanceWidth=i,c.leftSideBearing=o}},make:function(e){for(var t=new te.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=e.get(n),a=r.advanceWidth||0,i=r.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:i})}return t}},qe={make:function(e){for(var t=new te.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,a=0;a<e.length;++a){var i=n.indexOf(e[a]);i<0&&(i=n.length,n+=e[a]),t.fields.push({name:"offset "+a,type:"USHORT",value:r+i}),t.fields.push({name:"length "+a,type:"USHORT",value:e[a].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},parse:function(e,t){var n=new ce.Parser(e,t),r=n.parseULong();D.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1);for(var a=n.parseULong(),i=[],o=0;o<a;o++){for(var u="",s=t+n.parseUShort(),c=n.parseUShort(),l=s;l<s+c;++l)u+=String.fromCharCode(e.getInt8(l));i.push(u)}return i}},He={parse:function(e,t){var n={},r=new ce.Parser(e,t);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),1===n.version&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n},make:function(e){return new te.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Xe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ye={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ke={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},$e={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Ze(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return Ye[t];case 3:return $e[t]}}var Je="utf-16",Qe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},et={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function tt(e,t,n){switch(e){case 0:return Je;case 1:return et[n]||Qe[t];case 3:if(1===t||10===t)return Je}}function nt(e){var t={};for(var n in e)t[e[n]]=parseInt(n);return t}function rt(e,t,n,r,a,i){return new te.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:i}])}function at(e,t){var n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var a=0;a<r;a++)for(;a<r;a++){for(var i=0;i<n;i++)if(t[a+i]!==e[i])continue e;return a}return-1}(e,t);if(n<0){n=t.length;for(var r=0,a=e.length;r<a;++r)t.push(e[r])}return n}var it={parse:function(e,t,n){for(var r={},a=new ce.Parser(e,t),i=a.parseUShort(),o=a.parseUShort(),u=a.offset+a.parseUShort(),s=0;s<o;s++){var c=a.parseUShort(),l=a.parseUShort(),f=a.parseUShort(),d=a.parseUShort(),h=Xe[d]||d,p=a.parseUShort(),v=a.parseUShort(),m=Ze(c,f,n),g=tt(c,l,f);if(void 0!==g&&void 0!==m){var b=void 0;if(b=g===Je?F.UTF16(e,u+v,p):F.MACSTRING(e,u+v,p,g)){var y=r[h];void 0===y&&(y=r[h]={}),y[m]=b}}}return 1===i&&a.parseUShort(),r},make:function(e,t){var n,r=[],a={},i=nt(Xe);for(var o in e){var u=i[o];if(void 0===u&&(u=o),n=parseInt(u),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');a[n]=e[o],r.push(n)}for(var s=nt(Ye),c=nt($e),l=[],f=[],d=0;d<r.length;d++){var h=a[n=r[d]];for(var p in h){var v=h[p],m=1,g=s[p],b=Ke[g],y=tt(m,b,g),x=R.MACSTRING(v,y);void 0===x&&(m=0,(g=t.indexOf(p))<0&&(g=t.length,t.push(p)),b=4,x=R.UTF16(v));var _=at(x,f);l.push(rt(m,b,g,n,x.length,_));var w=c[p];if(void 0!==w){var k=R.UTF16(v),O=at(k,f);l.push(rt(3,1,w,n,k.length,O))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var S=new te.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),j=0;j<l.length;j++)S.fields.push({name:"record_"+j,type:"RECORD",value:l[j]});return S.fields.push({name:"strings",type:"LITERAL",value:f}),S}},ot=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],ut={parse:function(e,t){var n={},r=new ce.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var a=0;a<10;a++)n.panose[a]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},make:function(e){return new te.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:ot,getUnicodeRange:function(e){for(var t=0;t<ot.length;t+=1){var n=ot[t];if(e>=n.begin&&e<n.end)return t}return-1}},st={parse:function(e,t){var n={},r=new ce.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=pe.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.glyphNameIndex[a]=r.parseUShort();n.names=[];for(var i=0;i<n.numberOfGlyphs;i++)if(n.glyphNameIndex[i]>=pe.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var u=0;u<n.numberOfGlyphs;u++)n.offset[u]=r.parseChar()}return n},make:function(){return new te.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ct=new Array(9);ct[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ue.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ue.coverage),substitute:this.parseOffset16List()}:void D.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},ct[2]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ue.coverage),sequences:this.parseListOfLists()}},ct[3]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ue.coverage),alternateSets:this.parseListOfLists()}},ct[4]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ue.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var lt={sequenceIndex:ue.uShort,lookupListIndex:ue.uShort};ct[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ue.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lt)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ue.coverage),classDef:this.parsePointer(ue.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,lt)}}))};if(3===t){var n=this.parseUShort(),r=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,ue.pointer(ue.coverage)),lookupRecords:this.parseRecordList(r,lt)}}D.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ct[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ue.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lt)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ue.coverage),backtrackClassDef:this.parsePointer(ue.classDef),inputClassDef:this.parsePointer(ue.classDef),lookaheadClassDef:this.parsePointer(ue.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lt)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ue.pointer(ue.coverage)),inputCoverage:this.parseList(ue.pointer(ue.coverage)),lookaheadCoverage:this.parseList(ue.pointer(ue.coverage)),lookupRecords:this.parseRecordList(lt)}:void D.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ct[7]=function(){var e=this.parseUShort();D.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),n=new ue(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:ct[t].call(n)}},ct[8]=function(){var e=this.parseUShort();return D.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ue.coverage),backtrackCoverage:this.parseList(ue.pointer(ue.coverage)),lookaheadCoverage:this.parseList(ue.pointer(ue.coverage)),substitutes:this.parseUShortList()}};var ft=new Array(9);ft[1]=function(e){return 1===e.substFormat?new te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new te.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new te.Coverage(e.coverage)}].concat(te.ushortList("substitute",e.substitute)))},ft[3]=function(e){return D.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new te.Coverage(e.coverage)}].concat(te.tableList("altSet",e.alternateSets,(function(e){return new te.Table("alternateSetTable",te.ushortList("alternate",e))}))))},ft[4]=function(e){return D.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new te.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new te.Coverage(e.coverage)}].concat(te.tableList("ligSet",e.ligatureSets,(function(e){return new te.Table("ligatureSetTable",te.tableList("ligature",e,(function(e){return new te.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(te.ushortList("component",e.components,e.components.length+1)))})))}))))};var dt={parse:function(e,t){var n=new ue(e,t=t||0),r=n.parseVersion(1);return D.argument(1===r||1.1===r,"Unsupported GSUB table version."),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ct)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(ct),variations:n.parseFeatureVariationsList()}},make:function(e){return new te.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new te.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new te.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new te.LookupList(e.lookups,ft)}])}},ht={parse:function(e,t){var n=new ce.Parser(e,t),r=n.parseULong();D.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var a=n.parseULong(),i={},o=0;o<a;o++){var u=n.parseTag(),s=n.parseULong(),c=n.parseULong(),l=F.UTF8(e,t+s,c);i[u]=l}return i},make:function(e){var t=Object.keys(e).length,n="",r=16+12*t,a=new te.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:t}]);for(var i in e){var o=n.length;n+=e[i],a.fields.push({name:"tag "+i,type:"TAG",value:i}),a.fields.push({name:"offset "+i,type:"ULONG",value:r+o}),a.fields.push({name:"length "+i,type:"ULONG",value:e[i].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),a}};function pt(e){return Math.log(e)/Math.log(2)|0}function vt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function mt(e,t,n,r){return new te.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function gt(e){var t=new te.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var n=Math.pow(2,pt(t.numTables));t.searchRange=16*n,t.entrySelector=pt(n),t.rangeShift=16*t.numTables-t.searchRange;for(var r=[],a=[],i=t.sizeOf()+mt().sizeOf()*t.numTables;i%4!=0;)i+=1,a.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<e.length;o+=1){var u=e[o];D.argument(4===u.tableName.length,"Table name"+u.tableName+" is invalid.");var s=u.sizeOf(),c=mt(u.tableName,vt(u.encode()),i,s);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),a.push({name:u.tableName+" table",type:"RECORD",value:u}),i+=s,D.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,a.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(a),t}function bt(e,t,n){for(var r=0;r<t.length;r+=1){var a=e.charToGlyphIndex(t[r]);if(0<a)return e.glyphs.get(a).getMetrics()}return n}var yt={make:gt,fontToTable:function(e){for(var t,n=[],r=[],a=[],i=[],o=[],u=[],s=[],c=0,l=0,f=0,d=0,h=0,p=0;p<e.glyphs.length;p+=1){var v=e.glyphs.get(p),m=0|v.unicode;if(isNaN(v.advanceWidth))throw new Error("Glyph "+v.name+" ("+p+"): advanceWidth is not a number.");(m<t||void 0===t)&&0<m&&(t=m),c<m&&(c=m);var g=ut.getUnicodeRange(m);if(g<32)l|=1<<g;else if(g<64)f|=1<<g-32;else if(g<96)d|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");h|=1<<g-96}if(".notdef"!==v.name){var b=v.getMetrics();n.push(b.xMin),r.push(b.yMin),a.push(b.xMax),i.push(b.yMax),u.push(b.leftSideBearing),s.push(b.rightSideBearing),o.push(v.advanceWidth)}}var y={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(o),minLeftSideBearing:Math.min.apply(null,u),maxLeftSideBearing:Math.max.apply(null,u),minRightSideBearing:Math.min.apply(null,s)};y.ascender=e.ascender,y.descender=e.descender;var x=We.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),_=Ve.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),w=He.make(e.glyphs.length),k=ut.make({xAvgCharWidth:Math.round(y.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:l,ulUnicodeRange2:f,ulUnicodeRange3:d,ulUnicodeRange4:h,fsSelection:e.tables.os2.fsSelection,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:bt(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:bt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),O=Ge.make(e.glyphs),S=le.make(e.glyphs),j=e.getEnglishName("fontFamily"),E=e.getEnglishName("fontSubfamily"),C=j+" "+E,A=e.getEnglishName("postScriptName");A=A||j.replace(/\s/g,"")+"-"+E;var T={};for(var N in e.names)T[N]=e.names[N];T.uniqueID||(T.uniqueID={en:e.getEnglishName("manufacturer")+":"+C}),T.postScriptName||(T.postScriptName={en:A}),T.preferredFamily||(T.preferredFamily=e.names.fontFamily),T.preferredSubfamily||(T.preferredSubfamily=e.names.fontSubfamily);var M=[],D=it.make(T,M),I=0<M.length?qe.make(M):void 0,F=st.make(),R=Ue.make(e.glyphs,{version:e.getEnglishName("version"),fullName:C,familyName:j,weightName:E,postScriptName:A,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),P=e.metas&&0<Object.keys(e.metas).length?ht.make(e.metas):void 0,L=[x,_,w,k,D,S,F,R,O];I&&L.push(I),e.tables.gsub&&L.push(dt.make(e.tables.gsub)),P&&L.push(P);for(var B=gt(L),z=vt(B.encode()),U=B.fields,W=!1,V=0;V<U.length;V+=1)if("head table"===U[V].name){U[V].value.checkSumAdjustment=2981146554-z,W=!0;break}if(!W)throw new Error("Could not find head table with checkSum to adjust.");return B},computeCheckSum:vt};function xt(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,i=e[a].tag;if(i===t)return a;i<t?n=1+a:r=a-1}return-n-1}function _t(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+r>>>1,i=e[a];if(i===t)return a;i<t?n=1+a:r=a-1}return-n-1}function wt(e,t){for(var n,r=0,a=e.length-1;r<=a;){var i=r+a>>>1,o=(n=e[i]).start;if(o===t)return n;o<t?r=1+i:a=i-1}if(0<r)return t>(n=e[r-1]).end?0:n}function kt(e,t){this.font=e,this.tableName=t}function Ot(e){kt.call(this,e,"gpos")}function St(e){kt.call(this,e,"gsub")}function jt(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Et(e,t,n){for(var r=e.subtables,a=0;a<r.length;a++){var i=r[a];if(i.substFormat===t)return i}if(n)return r.push(n),n}function Ct(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function At(e,t){if(!e)throw t}function Tt(e,t,n,r,a){var i;return 0<(t&r)?(i=e.parseByte(),0==(t&a)&&(i=-i),n+i):0<(t&a)?n:n+e.parseShort()}function Nt(e,t,n){var r,a,i=new ce.Parser(t,n);if(e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort(),0<e.numberOfContours){for(var o=e.endPointIndices=[],u=0;u<e.numberOfContours;u+=1)o.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var s=0;s<e.instructionLength;s+=1)e.instructions.push(i.parseByte());var c=o[o.length-1]+1;r=[];for(var l=0;l<c;l+=1)if(a=i.parseByte(),r.push(a),0<(8&a))for(var f=i.parseByte(),d=0;d<f;d+=1)r.push(a),l+=1;if(D.argument(r.length===c,"Bad flags."),0<o.length){var h,p=[];if(0<c){for(var v=0;v<c;v+=1)a=r[v],(h={}).onCurve=!!(1&a),h.lastPointOfContour=0<=o.indexOf(v),p.push(h);for(var m=0,g=0;g<c;g+=1)a=r[g],(h=p[g]).x=Tt(i,a,m,2,16),m=h.x;for(var b=0,y=0;y<c;y+=1)a=r[y],(h=p[y]).y=Tt(i,a,b,4,32),b=h.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var x=!0;x;){r=i.parseUShort();var _={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&r)?0<(2&r)?(_.dx=i.parseShort(),_.dy=i.parseShort()):_.matchedPoints=[i.parseUShort(),i.parseUShort()]:0<(2&r)?(_.dx=i.parseChar(),_.dy=i.parseChar()):_.matchedPoints=[i.parseByte(),i.parseByte()],0<(8&r)?_.xScale=_.yScale=i.parseF2Dot14():0<(64&r)?(_.xScale=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()):0<(128&r)&&(_.xScale=i.parseF2Dot14(),_.scale01=i.parseF2Dot14(),_.scale10=i.parseF2Dot14(),_.yScale=i.parseF2Dot14()),e.components.push(_),x=!!(32&r)}if(256&r){e.instructionLength=i.parseUShort(),e.instructions=[];for(var w=0;w<e.instructionLength;w+=1)e.instructions.push(i.parseByte())}}}function Mt(e,t){for(var n=[],r=0;r<e.length;r+=1){var a=e[r],i={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};n.push(i)}return n}function Dt(e){var t=new T;if(!e)return t;for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var a=e[r];n.push(a),a.lastPointOfContour&&(t.push(n),n=[])}return D.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var a=n[r],i=null,o=a[a.length-1],u=a[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(u.onCurve)t.moveTo(u.x,u.y);else{var s={x:.5*(o.x+u.x),y:.5*(o.y+u.y)};t.moveTo(s.x,s.y)}for(var c=0;c<a.length;++c)if(i=o,o=u,u=a[(c+1)%a.length],o.onCurve)t.lineTo(o.x,o.y);else{var l=u;i.onCurve||(o.x,i.x,o.y,i.y),u.onCurve||(l={x:.5*(o.x+u.x),y:.5*(o.y+u.y)}),t.quadraticCurveTo(o.x,o.y,l.x,l.y)}t.closePath()}return t}function It(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],a=e.get(r.glyphIndex);if(a.getPath(),a.points){var i=void 0;if(void 0===r.matchedPoints)i=Mt(a.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>a.points.length-1)throw Error("Matched points out of range in "+t.name);var o=t.points[r.matchedPoints[0]],u=a.points[r.matchedPoints[1]],s={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};u=Mt([u],s)[0],s.dx=o.x-u.x,s.dy=o.y-u.y,i=Mt(a.points,s)}t.points=t.points.concat(i)}}return Dt(t.points)}(Ot.prototype=kt.prototype={searchTag:xt,binSearch:_t,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n=this.getTable(t);if(n){e=e||"DFLT";var r=n.scripts,a=xt(n.scripts,e);if(0<=a)return r[a].script;if(t){var i={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-a,0,i),i.script}}},getLangSysTable:function(e,t,n){var r=this.getScriptTable(e,n);if(r){if(!t||"dflt"===t||"DFLT"===t)return r.defaultLangSys;var a=xt(r.langSysRecords,t);if(0<=a)return r.langSysRecords[a].langSys;if(n){var i={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-a,0,i),i.langSys}}},getFeatureTable:function(e,t,n,r){var a=this.getLangSysTable(e,t,r);if(a){for(var i,o=a.featureIndexes,u=this.font.tables[this.tableName].features,s=0;s<o.length;s++)if((i=u[o[s]]).tag===n)return i.feature;if(r){var c=u.length;return D.assert(0===c||n>=u[c-1].tag,"Features must be added in alphabetical order."),i={tag:n,feature:{params:0,lookupListIndexes:[]}},u.push(i),o.push(c),i.feature}}},getLookupTables:function(e,t,n,r,a){var i=this.getFeatureTable(e,t,n,a),o=[];if(i){for(var u,s=i.lookupListIndexes,c=this.font.tables[this.tableName].lookups,l=0;l<s.length;l++)(u=c[s[l]]).lookupType===r&&o.push(u);if(0===o.length&&a){u={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var f=c.length;return c.push(u),s.push(f),[u]}}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=wt(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=_t(e.glyphs,t);return 0<=n?n:-1;case 2:var r=wt(e.ranges,t);return r?r.index+t-r.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var a=n[r],i=a.start,o=a.end,u=i;u<=o;u++)t.push(u);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Ot.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var a=e[r].subtables,i=0;i<a.length;i++){var o=a[i],u=this.getCoverageIndex(o.coverage,t);if(!(u<0))switch(o.posFormat){case 1:for(var s=o.pairSets[u],c=0;c<s.length;c++){var l=s[c];if(l.secondGlyph===n)return l.value1&&l.value1.xAdvance||0}break;case 2:var f=this.getGlyphClass(o.classDef1,t),d=this.getGlyphClass(o.classDef2,n),h=o.classRecords[f][d];return h.value1&&h.value1.xAdvance||0}}return 0},Ot.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(St.prototype=kt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},St.prototype.getSingle=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,1),i=0;i<a.length;i++)for(var o=a[i].subtables,u=0;u<o.length;u++){var s=o[u],c=this.expandCoverage(s.coverage),l=void 0;if(1===s.substFormat){var f=s.deltaGlyphId;for(l=0;l<c.length;l++){var d=c[l];r.push({sub:d,by:d+f})}}else{var h=s.substitute;for(l=0;l<c.length;l++)r.push({sub:c[l],by:h[l]})}}return r},St.prototype.getAlternates=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,3),i=0;i<a.length;i++)for(var o=a[i].subtables,u=0;u<o.length;u++)for(var s=o[u],c=this.expandCoverage(s.coverage),l=s.alternateSets,f=0;f<c.length;f++)r.push({sub:c[f],by:l[f]});return r},St.prototype.getLigatures=function(e,t,n){for(var r=[],a=this.getLookupTables(t,n,e,4),i=0;i<a.length;i++)for(var o=a[i].subtables,u=0;u<o.length;u++)for(var s=o[u],c=this.expandCoverage(s.coverage),l=s.ligatureSets,f=0;f<c.length;f++)for(var d=c[f],h=l[f],p=0;p<h.length;p++){var v=h[p];r.push({sub:[d].concat(v.components),by:v.ligGlyph})}return r},St.prototype.addSingle=function(e,t,n,r){var a=Et(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});D.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var i=t.sub,o=this.binSearch(a.coverage.glyphs,i);o<0&&(o=-1-o,a.coverage.glyphs.splice(o,0,i),a.substitute.splice(o,0,0)),a.substitute[o]=t.by},St.prototype.addAlternate=function(e,t,n,r){var a=Et(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});D.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var i=t.sub,o=this.binSearch(a.coverage.glyphs,i);o<0&&(o=-1-o,a.coverage.glyphs.splice(o,0,i),a.alternateSets.splice(o,0,0)),a.alternateSets[o]=t.by},St.prototype.addLigature=function(e,t,n,r){var a=this.getLookupTables(n,r,e,4,!0)[0],i=a.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=i),D.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var o=t.sub[0],u=t.sub.slice(1),s={ligGlyph:t.by,components:u},c=this.binSearch(i.coverage.glyphs,o);if(0<=c){for(var l=i.ligatureSets[c],f=0;f<l.length;f++)if(jt(l[f].components,u))return;l.push(s)}else c=-1-c,i.coverage.glyphs.splice(c,0,o),i.ligatureSets.splice(c,0,[s])},St.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},St.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var Ft,Rt,Pt,Lt,Bt={getPath:Dt,parse:function(e,t,n,r){for(var a=new ke.GlyphSet(r),i=0;i<n.length-1;i+=1){var o=n[i];o!==n[i+1]?a.push(i,ke.ttfGlyphLoader(r,i,Nt,e,t+o,It)):a.push(i,ke.glyphLoader(r,i))}return a}};function zt(e){this.font=e,this.getCommands=function(e){return Bt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ut(e){return e}function Wt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Vt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Gt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function qt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Ht(e){return Math.sign(e)*Math.floor(Math.abs(e))}function Xt(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var Yt={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var a,i,o,u,s,c,l;if(!r||r===this)return a=e.xo-t.xo,i=e.xo-n.xo,s=t.x-t.xo,c=n.x-n.xo,0===(l=(o=Math.abs(a))+(u=Math.abs(i)))?void(e.x=e.xo+(s+c)/2):void(e.x=e.xo+(s*u+c*o)/l);a=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),s=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0!==(l=(o=Math.abs(a))+(u=Math.abs(i)))?Yt.setRelative(e,e,(s*u+c*o)/l,r,!0):Yt.setRelative(e,e,(s+c)/2,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,a){if(r&&r!==this){var i=a?t.xo:t.x,o=a?t.yo:t.y,u=i+n*r.x,s=o+n*r.y;e.x=u+(e.y-s)/r.normalSlope}else e.x=(a?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Kt={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var a,i,o,u,s,c,l;if(!r||r===this)return a=e.yo-t.yo,i=e.yo-n.yo,s=t.y-t.yo,c=n.y-n.yo,0===(l=(o=Math.abs(a))+(u=Math.abs(i)))?void(e.y=e.yo+(s+c)/2):void(e.y=e.yo+(s*u+c*o)/l);a=r.distance(e,t,!0,!0),i=r.distance(e,n,!0,!0),s=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0!==(l=(o=Math.abs(a))+(u=Math.abs(i)))?Kt.setRelative(e,e,(s*u+c*o)/l,r,!0):Kt.setRelative(e,e,(s+c)/2,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,a){if(r&&r!==this){var i=a?t.xo:t.x,o=a?t.yo:t.y,u=i+n*r.x,s=o+n*r.y;e.y=s+r.normalSlope*(e.x-u)}else e.y=(a?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function $t(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Zt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1===(e/=n)&&0===t?Yt:0===e&&1===t?Kt:new $t(e,t)}function Jt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Yt),Object.freeze(Kt),$t.prototype.distance=function(e,t,n,r){return this.x*Yt.distance(e,t,n,r)+this.y*Kt.distance(e,t,n,r)},$t.prototype.interpolate=function(e,t,n,r){var a,i,o,u,s,c,l;o=r.distance(e,t,!0,!0),u=r.distance(e,n,!0,!0),a=r.distance(t,t,!1,!0),i=r.distance(n,n,!1,!0),0!==(l=(s=Math.abs(o))+(c=Math.abs(u)))?this.setRelative(e,e,(a*c+i*s)/l,r,!0):this.setRelative(e,e,(a+i)/2,r,!0)},$t.prototype.setRelative=function(e,t,n,r,a){r=r||this;var i=a?t.xo:t.x,o=a?t.yo:t.y,u=i+n*r.x,s=o+n*r.y,c=r.normalSlope,l=this.slope,f=e.x,d=e.y;e.x=(l*f-c*u+s-d)/(l-c),e.y=l*(e.x-f)+d},$t.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Jt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Jt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Qt=Object.freeze(new Jt(0,0)),en={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function tn(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Yt,this.round=Wt}}function nn(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Jt(0,0)}function rn(e,t){var n,r=e.prog,a=e.ip,i=1;do{if(88===(n=r[++a]))i++;else if(89===n)i--;else if(64===n)a+=r[a+1]+1;else if(65===n)a+=2*r[a+1]+1;else if(176<=n&&n<=183)a+=n-176+1;else if(184<=n&&n<=191)a+=2*(n-184+1);else if(t&&1===i&&27===n)break}while(0<i);e.ip=a}function an(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function on(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function un(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function sn(e,n){var r,a,i=n.stack,o=i.pop(),u=i.pop(),s=n.z2[o],c=n.z1[u];t.DEBUG&&console.log("SPVTL["+e+"]",o,u),a=e?(r=s.y-c.y,c.x-s.x):(r=c.x-s.x,c.y-s.y),n.pv=n.dpv=Zt(r,a)}function cn(e,n){var r,a,i=n.stack,o=i.pop(),u=i.pop(),s=n.z2[o],c=n.z1[u];t.DEBUG&&console.log("SFVTL["+e+"]",o,u),a=e?(r=s.y-c.y,c.x-s.x):(r=c.x-s.x,c.y-s.y),n.fv=Zt(r,a)}function ln(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function fn(e,n){var r=n.stack.pop(),a=n.z0[r],i=n.fv,o=n.pv;t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r);var u=o.distance(a,Qt);e&&(u=n.round(u)),i.setRelative(a,Qt,u,o),i.touch(a),n.rp0=n.rp1=r}function dn(e,n){var r,a,i,o=n.z2,u=o.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var s=0;s<u;s++)r=o[s],e.touched(r)||(a=r.prevTouched(e))!==r&&(a===(i=r.nextTouched(e))&&e.setRelative(r,r,e.distance(a,a,!1,!0),e,!0),e.interpolate(r,a,i,e))}function hn(e,n){for(var r=n.stack,a=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[a],o=n.fv,u=n.pv,s=n.loop,c=n.z2;s--;){var l=r.pop(),f=c[l],d=u.distance(i,i,!1,!0);o.setRelative(f,f,d,u),o.touch(f),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-s)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",l)}n.loop=1}function pn(e,n){var r=n.stack,a=e?n.rp1:n.rp2,i=(e?n.z0:n.z1)[a],o=n.fv,u=n.pv,s=r.pop(),c=n.z2[n.contours[s]],l=c;t.DEBUG&&console.log(n.step,"SHC["+e+"]",s);for(var f=u.distance(i,i,!1,!0);l!==i&&o.setRelative(l,l,f,u),(l=l.nextPointOnContour)!==c;);}function vn(e,n){var r,a,i=n.stack,o=e?n.rp1:n.rp2,u=(e?n.z0:n.z1)[o],s=n.fv,c=n.pv,l=i.pop();switch(t.DEBUG&&console.log(n.step,"SHZ["+e+"]",l),l){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var f=c.distance(u,u,!1,!0),d=r.length-2,h=0;h<d;h++)a=r[h],s.setRelative(a,a,f,c)}function mn(e,n){var r=n.stack,a=r.pop()/64,i=r.pop(),o=n.z1[i],u=n.z0[n.rp0],s=n.fv,c=n.pv;s.setRelative(o,u,a,c),s.touch(o),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",a,i),n.rp1=n.rp0,n.rp2=i,e&&(n.rp0=i)}function gn(e,n){var r=n.stack,a=r.pop(),i=r.pop(),o=n.z0[i],u=n.fv,s=n.pv,c=n.cvt[a];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",a,"(",c,")",i);var l=s.distance(o,Qt);e&&(Math.abs(l-c)<n.cvCutIn&&(l=c),l=n.round(l)),u.setRelative(o,Qt,l,s),0===n.zp0&&(o.xo=o.x,o.yo=o.y),u.touch(o),n.rp0=n.rp1=i}function bn(e,n){var r=n.stack,a=r.pop(),i=n.z2[a];t.DEBUG&&console.log(n.step,"GC["+e+"]",a),r.push(64*n.dpv.distance(i,Qt,e,!1))}function yn(e,n){var r=n.stack,a=r.pop(),i=r.pop(),o=n.z1[a],u=n.z0[i],s=n.dpv.distance(u,o,e,e);t.DEBUG&&console.log(n.step,"MD["+e+"]",a,i,"->",s),n.stack.push(Math.round(64*s))}function xn(e,n){var r=n.stack,a=r.pop(),i=n.fv,o=n.pv,u=n.ppem,s=n.deltaBase+16*(e-1),c=n.deltaShift,l=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",a,r);for(var f=0;f<a;f++){var d=r.pop(),h=r.pop();if(s+((240&h)>>4)===u){var p=(15&h)-8;0<=p&&p++,t.DEBUG&&console.log(n.step,"DELTAPFIX",d,"by",p*c);var v=l[d];i.setRelative(v,v,p*c,o)}}}function _n(e,n){var r=n.stack,a=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(a/64))}function wn(e,n){var r=n.stack,a=r.pop(),i=n.ppem,o=n.deltaBase+16*(e-1),u=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",a,r);for(var s=0;s<a;s++){var c=r.pop(),l=r.pop();if(o+((240&l)>>4)===i){var f=(15&l)-8;0<=f&&f++;var d=f*u;t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",d),n.cvt[c]+=d}}}function kn(e,n){var r,a,i=n.stack,o=i.pop(),u=i.pop(),s=n.z2[o],c=n.z1[u];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",o,u),a=e?(r=s.y-c.y,c.x-s.x):(r=c.x-s.x,c.y-s.y),n.dpv=Zt(r,a)}function On(e,n){var r=n.stack,a=n.prog,i=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)r.push(a[++i]);n.ip=i}function Sn(e,n){var r=n.ip,a=n.prog,i=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var u=a[++r]<<8|a[++r];32768&u&&(u=-(1+(65535^u))),i.push(u)}n.ip=r}function jn(e,n,r,a,i,o){var u,s,c,l,f=o.stack,d=e&&f.pop(),h=f.pop(),p=o.rp0,v=o.z0[p],m=o.z1[h],g=o.minDis,b=o.fv,y=o.dpv;c=0<=(s=u=y.distance(m,v,!0,!0))?1:-1,s=Math.abs(s),e&&(l=o.cvt[d],a&&Math.abs(s-l)<o.cvCutIn&&(s=l)),r&&s<g&&(s=g),a&&(s=o.round(s)),b.setRelative(m,v,c*s,y),b.touch(m),t.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(a?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?d+"("+o.cvt[d]+","+l+")":"",h,"(d =",u,"->",c*s,")"),o.rp1=o.rp0,o.rp2=h,n&&(o.rp0=h)}zt.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,a=this._prepState;if(!a||a.ppem!==n){var i=this._fpgmState;if(!i){tn.prototype=en,(i=this._fpgmState=new tn("fpgm",r.tables.fpgm)).funcs=[],i.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Rt(i)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}tn.prototype=i,(a=this._prepState=new tn("prep",r.tables.prep)).ppem=n;var o=r.tables.cvt;if(o)for(var u=a.cvt=new Array(o.length),s=n/r.unitsPerEm,c=0;c<o.length;c++)u[c]=o[c]*s;else a.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),a.step=-1);try{Rt(a)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return Pt(e,a)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Pt=function(e,n){var r,a,i,o=n.ppem/n.font.unitsPerEm,u=o,s=e.components;if(tn.prototype=n,s){var c=n.font;a=[],r=[];for(var l=0;l<s.length;l++){var f=s[l],d=c.glyphs.get(f.glyphIndex);i=new tn("glyf",d.instructions),t.DEBUG&&(console.log("---EXEC COMP "+l+"---"),i.step=-1),Lt(d,i,o,u);for(var h=Math.round(f.dx*o),p=Math.round(f.dy*u),v=i.gZone,m=i.contours,g=0;g<v.length;g++){var b=v[g];b.xTouched=b.yTouched=!1,b.xo=b.x=b.x+h,b.yo=b.y=b.y+p}var y=a.length;a.push.apply(a,v);for(var x=0;x<m.length;x++)r.push(m[x]+y)}e.instructions&&!i.inhibitGridFit&&((i=new tn("glyf",e.instructions)).gZone=i.z0=i.z1=i.z2=a,i.contours=r,a.push(new Jt(0,0),new Jt(Math.round(e.advanceWidth*o),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),i.step=-1),Rt(i),a.length-=2)}else i=new tn("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),i.step=-1),Lt(e,i,o,u),a=i.gZone;return a},Lt=function(e,n,r,a){for(var i,o,u,s=e.points||[],c=s.length,l=n.gZone=n.z0=n.z1=n.z2=[],f=n.contours=[],d=0;d<c;d++)i=s[d],l[d]=new Jt(i.x*r,i.y*a,i.lastPointOfContour,i.onCurve);for(var h=0;h<c;h++)i=l[h],o||(o=i,f.push(h)),i.lastPointOfContour?((i.nextPointOnContour=o).prevPointOnContour=i,o=void 0):(u=l[h+1],(i.nextPointOnContour=u).prevPointOnContour=i);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var p=0;p<c;p++)console.log(p,l[p].x,l[p].y)}if(l.push(new Jt(0,0),new Jt(Math.round(e.advanceWidth*r),0)),Rt(n),l.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var v=0;v<c;v++)console.log(v,l[v].x,l[v].y)}}},Rt=function(e){var n=e.prog;if(n){var r,a=n.length;for(e.ip=0;e.ip<a;e.ip++){if(t.DEBUG&&e.step++,!(r=Ft[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},Ft=[an.bind(void 0,Kt),an.bind(void 0,Yt),on.bind(void 0,Kt),on.bind(void 0,Yt),un.bind(void 0,Kt),un.bind(void 0,Yt),sn.bind(void 0,0),sn.bind(void 0,1),cn.bind(void 0,0),cn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.pv=e.dpv=Zt(a,r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",r,a),e.fv=Zt(a,r)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=e.stack,r=n.pop(),a=n.pop(),i=n.pop(),o=n.pop(),u=n.pop(),s=e.z0,c=e.z1,l=s[r],f=s[a],d=c[i],h=c[o],p=e.z2[u];t.DEBUG&&console.log("ISECT[], ",r,a,i,o,u);var v=l.x,m=l.y,g=f.x,b=f.y,y=d.x,x=d.y,_=h.x,w=h.y,k=(v-g)*(x-w)-(m-b)*(y-_),O=v*b-m*g,S=y*w-x*_;p.x=(O*(y-_)-S*(v-g))/k,p.y=(O*(x-w)-S*(m-b))/k},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||nn(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||nn(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||nn(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n,n){case 0:e.tZone||nn(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Wt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Gt},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),rn(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},ln,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(a)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",r,a);var i=e.ip,o=e.prog;e.prog=e.funcs[r];for(var u=0;u<a;u++)Rt(e),t.DEBUG&&console.log(++e.step,u+1<a?"next loopcall":"done loopcall",u);e.ip=i,e.prog=o},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",n);var r=e.ip,a=e.prog;e.prog=e.funcs[n],Rt(e),e.ip=r,e.prog=a,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,a=e.ip,i=n.pop(),o=a;for(t.DEBUG&&console.log(e.step,"FDEF[]",i);45!==r[++a];);e.ip=a,e.funcs[i]=r.slice(o+1,a)},void 0,fn.bind(void 0,0),fn.bind(void 0,1),dn.bind(void 0,Kt),dn.bind(void 0,Yt),hn.bind(void 0,0),hn.bind(void 0,1),pn.bind(void 0,0),pn.bind(void 0,1),vn.bind(void 0,0),vn.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,a=e.fv,i=n.pop()/64,o=e.z2;r--;){var u=n.pop(),s=o[u];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",u,i),a.setRelative(s,s,i),a.touch(s)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,a=e.rp2,i=e.loop,o=e.z0[r],u=e.z1[a],s=e.fv,c=e.dpv,l=e.z2;i--;){var f=n.pop(),d=l[f];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"IP[]",f,r,"<->",a),s.interpolate(d,o,u,c),s.touch(d)}e.loop=1},mn.bind(void 0,0),mn.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,a=e.z0[r],i=e.loop,o=e.fv,u=e.pv,s=e.z1;i--;){var c=n.pop(),l=s[c];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",c),o.setRelative(l,a,0,u),o.touch(l)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Vt},gn.bind(void 0,0),gn.bind(void 0,1),function(e){var n=e.prog,r=e.ip,a=e.stack,i=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var o=0;o<i;o++)a.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,a=e.stack,i=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var o=0;o<i;o++){var u=r[++n]<<8|r[++n];32768&u&&(u=-(1+(65535^u))),a.push(u)}e.ip=n},function(e){var n=e.stack,r=e.store;r=r||(e.store=[]);var a=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"WS",a,i),r[i]=a},function(e){var n=e.stack,r=e.store,a=n.pop();t.DEBUG&&console.log(e.step,"RS",a);var i=r&&r[a]||0;n.push(i)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"WCVTP",r,a),e.cvt[a]=r/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},bn.bind(void 0,0),bn.bind(void 0,1),void 0,yn.bind(void 0,0),yn.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,a),n.push(a<r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,a),n.push(a<=r?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,a),n.push(r<a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,a),n.push(r<=a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,a),n.push(r===a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,a),n.push(r!==a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(rn(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,a),n.push(r&&a?1:0)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,a),n.push(r||a?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},xn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,a),n.push(a+r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,a),n.push(a-r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,a),n.push(64*a/r)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,a),n.push(a*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},_n.bind(void 0,0),_n.bind(void 0,1),_n.bind(void 0,2),_n.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",r,a),e.cvt[a]=r*e.ppem/e.font.unitsPerEm},xn.bind(void 0,2),xn.bind(void 0,3),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Xt,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Xt,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ut},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=qt},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Ht},ln,ln,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},kn.bind(void 0,0),kn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),a=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(a=35),32&r&&(a|=4096),n.push(a)},void 0,function(e){var n=e.stack,r=n.pop(),a=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(a),n.push(r),n.push(i)},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,a),n.push(Math.max(a,r))},function(e){var n=e.stack,r=n.pop(),a=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,a),n.push(Math.min(a,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,On.bind(void 0,1),On.bind(void 0,2),On.bind(void 0,3),On.bind(void 0,4),On.bind(void 0,5),On.bind(void 0,6),On.bind(void 0,7),On.bind(void 0,8),Sn.bind(void 0,1),Sn.bind(void 0,2),Sn.bind(void 0,3),Sn.bind(void 0,4),Sn.bind(void 0,5),Sn.bind(void 0,6),Sn.bind(void 0,7),Sn.bind(void 0,8),jn.bind(void 0,0,0,0,0,0),jn.bind(void 0,0,0,0,0,1),jn.bind(void 0,0,0,0,0,2),jn.bind(void 0,0,0,0,0,3),jn.bind(void 0,0,0,0,1,0),jn.bind(void 0,0,0,0,1,1),jn.bind(void 0,0,0,0,1,2),jn.bind(void 0,0,0,0,1,3),jn.bind(void 0,0,0,1,0,0),jn.bind(void 0,0,0,1,0,1),jn.bind(void 0,0,0,1,0,2),jn.bind(void 0,0,0,1,0,3),jn.bind(void 0,0,0,1,1,0),jn.bind(void 0,0,0,1,1,1),jn.bind(void 0,0,0,1,1,2),jn.bind(void 0,0,0,1,1,3),jn.bind(void 0,0,1,0,0,0),jn.bind(void 0,0,1,0,0,1),jn.bind(void 0,0,1,0,0,2),jn.bind(void 0,0,1,0,0,3),jn.bind(void 0,0,1,0,1,0),jn.bind(void 0,0,1,0,1,1),jn.bind(void 0,0,1,0,1,2),jn.bind(void 0,0,1,0,1,3),jn.bind(void 0,0,1,1,0,0),jn.bind(void 0,0,1,1,0,1),jn.bind(void 0,0,1,1,0,2),jn.bind(void 0,0,1,1,0,3),jn.bind(void 0,0,1,1,1,0),jn.bind(void 0,0,1,1,1,1),jn.bind(void 0,0,1,1,1,2),jn.bind(void 0,0,1,1,1,3),jn.bind(void 0,1,0,0,0,0),jn.bind(void 0,1,0,0,0,1),jn.bind(void 0,1,0,0,0,2),jn.bind(void 0,1,0,0,0,3),jn.bind(void 0,1,0,0,1,0),jn.bind(void 0,1,0,0,1,1),jn.bind(void 0,1,0,0,1,2),jn.bind(void 0,1,0,0,1,3),jn.bind(void 0,1,0,1,0,0),jn.bind(void 0,1,0,1,0,1),jn.bind(void 0,1,0,1,0,2),jn.bind(void 0,1,0,1,0,3),jn.bind(void 0,1,0,1,1,0),jn.bind(void 0,1,0,1,1,1),jn.bind(void 0,1,0,1,1,2),jn.bind(void 0,1,0,1,1,3),jn.bind(void 0,1,1,0,0,0),jn.bind(void 0,1,1,0,0,1),jn.bind(void 0,1,1,0,0,2),jn.bind(void 0,1,1,0,0,3),jn.bind(void 0,1,1,0,1,0),jn.bind(void 0,1,1,0,1,1),jn.bind(void 0,1,1,0,1,2),jn.bind(void 0,1,1,0,1,3),jn.bind(void 0,1,1,1,0,0),jn.bind(void 0,1,1,1,0,1),jn.bind(void 0,1,1,1,0,2),jn.bind(void 0,1,1,1,0,3),jn.bind(void 0,1,1,1,1,0),jn.bind(void 0,1,1,1,1,1),jn.bind(void 0,1,1,1,1,2),jn.bind(void 0,1,1,1,1,3)];var En=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Cn(e){(e=e||{}).empty||(At(e.familyName,"When creating a new Font object, familyName is required."),At(e.styleName,"When creating a new Font object, styleName is required."),At(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),At(e.ascender,"When creating a new Font object, ascender is required."),At(e.descender,"When creating a new Font object, descender is required."),At(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ke.GlyphSet(this,e.glyphs||[]),this.encoding=new ve(this),this.position=new Ot(this),this.substitution=new St(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new zt(this):void 0}})}function An(e,t){var n=JSON.stringify(e),r=256;for(var a in t){var i=parseInt(a);if(i&&!(i<256)){if(JSON.stringify(t[a])===n)return i;r<=i&&(r=i+1)}}return t[r]=e,r}function Tn(e,t,n,r){for(var a=[{name:"nameID_"+e,type:"USHORT",value:An(t.name,r)},{name:"flags_"+e,type:"USHORT",value:0}],i=0;i<n.length;++i){var o=n[i].tag;a.push({name:"axis_"+e+" "+o,type:"FIXED",value:t.coordinates[o]<<16})}return a}function Nn(e,t,n,r){var a={},i=new ce.Parser(e,t);a.name=r[i.parseUShort()]||{},i.skip("uShort",1),a.coordinates={};for(var o=0;o<n.length;++o)a.coordinates[n[o].tag]=i.parseFixed();return a}Cn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Cn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Cn.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),n=this.glyphs.get(t);return n||this.glyphs.get(0)},Cn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=En(e),r=[],a=0;a<n.length;a+=1){var i=n[a];r.push(this.charToGlyphIndex(i))}var o=r.length;if(t.features){var u=t.script||this.substitution.getDefaultScriptName(),s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",u,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",u,t.language)));for(var c=0;c<o;c+=1)for(var l=0;l<s.length;l++){for(var f=s[l],d=f.sub,h=d.length,p=0;p<h&&d[p]===r[c+p];)p++;p===h&&(r.splice(c,h,f.by),o=o-h+1)}}for(var v=new Array(o),m=this.glyphs.get(0),g=0;g<o;g+=1)v[g]=this.glyphs.get(r[g])||m;return v},Cn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Cn.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),n=this.glyphs.get(t);return n||this.glyphs.get(0)},Cn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Cn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},Cn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Cn.prototype.forEachGlyph=function(e,t,n,r,a,i){t=void 0!==t?t:0,n=void 0!==n?n:0,r=void 0!==r?r:72,a=a||this.defaultRenderOptions;var o,u=1/this.unitsPerEm*r,s=this.stringToGlyphs(e,a);if(a.kerning){var c=a.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(c,a.language)}for(var l=0;l<s.length;l+=1){var f=s[l];i.call(this,f,t,n,r,a),f.advanceWidth&&(t+=f.advanceWidth*u),a.kerning&&l<s.length-1&&(t+=(o?this.position.getKerningValue(o,f.index,s[l+1].index):this.getKerningValue(f,s[l+1]))*u),a.letterSpacing?t+=a.letterSpacing*r:a.tracking&&(t+=a.tracking/1e3*r)}return t},Cn.prototype.getPath=function(e,t,n,r,a){var i=new T;return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){var o=e.getPath(t,n,r,a,this);i.extend(o)})),i},Cn.prototype.getPaths=function(e,t,n,r,a){var i=[];return this.forEachGlyph(e,t,n,r,a,(function(e,t,n,r){var o=e.getPath(t,n,r,a,this);i.push(o)})),i},Cn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},Cn.prototype.draw=function(e,t,n,r,a,i){this.getPath(t,n,r,a,i).draw(e)},Cn.prototype.drawPoints=function(e,t,n,r,a,i){this.forEachGlyph(t,n,r,a,i,(function(t,n,r,a){t.drawPoints(e,n,r,a)}))},Cn.prototype.drawMetrics=function(e,t,n,r,a,i){this.forEachGlyph(t,n,r,a,i,(function(t,n,r,a){t.drawMetrics(e,n,r,a)}))},Cn.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Cn.prototype.validate=function(){var e=this;function t(t){var n=e.getEnglishName(t);n&&n.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Cn.prototype.toTables=function(){return yt.fontToTable(this)},Cn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Cn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},Cn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily");t=t||n.replace(/\s/g,"")+"-"+a+".otf";var i=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(i),r=new Blob([n],{type:"font/opentype"});t.write(r),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}));else{var o=e("fs"),u=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),a=0;a<t.length;++a)t[a]=n[a];return t}(i);o.writeFileSync(t,u)}},Cn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Cn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Cn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Mn={make:function(e,t){var n,r,a,i,o=new te.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);o.offsetToData=o.sizeOf();for(var u=0;u<e.axes.length;u++)o.fields=o.fields.concat((n=u,a=t,i=An((r=e.axes[u]).name,a),[{name:"tag_"+n,type:"TAG",value:r.tag},{name:"minValue_"+n,type:"FIXED",value:r.minValue<<16},{name:"defaultValue_"+n,type:"FIXED",value:r.defaultValue<<16},{name:"maxValue_"+n,type:"FIXED",value:r.maxValue<<16},{name:"flags_"+n,type:"USHORT",value:0},{name:"nameID_"+n,type:"USHORT",value:i}]));for(var s=0;s<e.instances.length;s++)o.fields=o.fields.concat(Tn(s,e.instances[s],e.axes,t));return o},parse:function(e,t,n){var r=new ce.Parser(e,t),a=r.parseULong();D.argument(65536===a,"Unsupported fvar table version.");var i=r.parseOffset16();r.skip("uShort",1);for(var o,u,s,c,l,f=r.parseUShort(),d=r.parseUShort(),h=r.parseUShort(),p=r.parseUShort(),v=[],m=0;m<f;m++)v.push((o=e,u=t+i+m*d,s=n,l=c=void 0,c={},l=new ce.Parser(o,u),c.tag=l.parseTag(),c.minValue=l.parseFixed(),c.defaultValue=l.parseFixed(),c.maxValue=l.parseFixed(),l.skip("uShort",1),c.name=s[l.parseUShort()]||{},c));for(var g=[],b=t+i+f*d,y=0;y<h;y++)g.push(Nn(e,b+y*p,v,n));return{axes:v,instances:g}}},Dn=new Array(10);Dn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ue.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ue.coverage),values:this.parseValueRecordList()}:void D.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Dn[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();D.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(ue.coverage),r=this.parseUShort(),a=this.parseUShort();if(1===t)return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:a,pairSets:this.parseList(ue.pointer(ue.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(r),value2:this.parseValueRecord(a)}}))))};if(2===t){var i=this.parsePointer(ue.classDef),o=this.parsePointer(ue.classDef),u=this.parseUShort(),s=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:r,valueFormat2:a,classDef1:i,classDef2:o,class1Count:u,class2Count:s,classRecords:this.parseList(u,ue.list(s,(function(){return{value1:this.parseValueRecord(r),value2:this.parseValueRecord(a)}})))}}},Dn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Dn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Dn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Dn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Dn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Dn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Dn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var In=new Array(10),Fn={parse:function(e,t){var n=new ue(e,t=t||0),r=n.parseVersion(1);return D.argument(1===r||1.1===r,"Unsupported GPOS table version "+r),1===r?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Dn)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Dn),variations:n.parseFeatureVariationsList()}},make:function(e){return new te.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new te.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new te.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new te.LookupList(e.lookups,In)}])}},Rn={parse:function(e,t){var n=new ce.Parser(e,t),r=n.parseUShort();if(0===r)return function(e){var t={};e.skip("uShort");var n=e.parseUShort();D.argument(0===n,"Unsupported kern sub-table version."),e.skip("uShort",2);var r=e.parseUShort();e.skip("uShort",3);for(var a=0;a<r;a+=1){var i=e.parseUShort(),o=e.parseUShort(),u=e.parseShort();t[i+","+o]=u}return t}(n);if(1===r)return function(e){var t={};e.skip("uShort"),1<e.parseULong()&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=255&e.parseUShort();if(e.skip("uShort"),0==n){var r=e.parseUShort();e.skip("uShort",3);for(var a=0;a<r;a+=1){var i=e.parseUShort(),o=e.parseUShort(),u=e.parseShort();t[i+","+o]=u}}return t}(n);throw new Error("Unsupported kern table version ("+r+").")}},Pn={parse:function(e,t,n,r){for(var a=new ce.Parser(e,t),i=r?a.parseUShort:a.parseULong,o=[],u=0;u<n+1;u+=1){var s=i.call(a);r&&(s*=2),o.push(s)}return o}};function Ln(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,Ct(t))}))}function Bn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function zn(e,t){for(var n=[],r=12,a=0;a<t;a+=1){var i=ce.getTag(e,r),o=ce.getULong(e,r+4),u=ce.getULong(e,r+8),s=ce.getULong(e,r+12);n.push({tag:i,checksum:o,offset:u,length:s,compression:!1}),r+=16}return n}function Un(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};var n=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),r=new Uint8Array(t.length);if(E(n,r),r.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(r.buffer,0),offset:0}}function Wn(e){var t,n,r,a,i,o,u,s,c,l,f,d,h,p,v=new Cn({empty:!0}),m=new DataView(e,0),g=[],b=ce.getTag(m,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b)v.outlinesFormat="truetype",g=zn(m,r=ce.getUShort(m,4));else if("OTTO"===b)v.outlinesFormat="cff",g=zn(m,r=ce.getUShort(m,4));else{if("wOFF"!==b)throw new Error("Unsupported OpenType signature "+b);var y=ce.getTag(m,4);if(y===String.fromCharCode(0,1,0,0))v.outlinesFormat="truetype";else{if("OTTO"!==y)throw new Error("Unsupported OpenType flavor "+b);v.outlinesFormat="cff"}g=function(e,t){for(var n=[],r=44,a=0;a<t;a+=1){var i=ce.getTag(e,r),o=ce.getULong(e,r+4),u=ce.getULong(e,r+8),s=ce.getULong(e,r+12),c=void 0;c=u<s&&"WOFF",n.push({tag:i,offset:o,compression:c,compressedLength:u,length:s}),r+=20}return n}(m,r=ce.getUShort(m,12))}for(var x=0;x<r;x+=1){var _=g[x],w=void 0;switch(_.tag){case"cmap":w=Un(m,_),v.tables.cmap=le.parse(w.data,w.offset),v.encoding=new me(v.tables.cmap);break;case"cvt ":w=Un(m,_),p=new ce.Parser(w.data,w.offset),v.tables.cvt=p.parseShortList(_.length/2);break;case"fvar":i=_;break;case"fpgm":w=Un(m,_),p=new ce.Parser(w.data,w.offset),v.tables.fpgm=p.parseByteList(_.length);break;case"head":w=Un(m,_),v.tables.head=We.parse(w.data,w.offset),v.unitsPerEm=v.tables.head.unitsPerEm,t=v.tables.head.indexToLocFormat;break;case"hhea":w=Un(m,_),v.tables.hhea=Ve.parse(w.data,w.offset),v.ascender=v.tables.hhea.ascender,v.descender=v.tables.hhea.descender,v.numberOfHMetrics=v.tables.hhea.numberOfHMetrics;break;case"hmtx":c=_;break;case"ltag":w=Un(m,_),n=qe.parse(w.data,w.offset);break;case"maxp":w=Un(m,_),v.tables.maxp=He.parse(w.data,w.offset),v.numGlyphs=v.tables.maxp.numGlyphs;break;case"name":d=_;break;case"OS/2":w=Un(m,_),v.tables.os2=ut.parse(w.data,w.offset);break;case"post":w=Un(m,_),v.tables.post=st.parse(w.data,w.offset),v.glyphNames=new be(v.tables.post);break;case"prep":w=Un(m,_),p=new ce.Parser(w.data,w.offset),v.tables.prep=p.parseByteList(_.length);break;case"glyf":o=_;break;case"loca":f=_;break;case"CFF ":a=_;break;case"kern":l=_;break;case"GPOS":u=_;break;case"GSUB":s=_;break;case"meta":h=_}}var k=Un(m,d);if(v.tables.name=it.parse(k.data,k.offset,n),v.names=v.tables.name,o&&f){var O=0===t,S=Un(m,f),j=Pn.parse(S.data,S.offset,v.numGlyphs,O),E=Un(m,o);v.glyphs=Bt.parse(E.data,E.offset,j,v)}else{if(!a)throw new Error("Font doesn't contain TrueType or CFF outlines.");var C=Un(m,a);Ue.parse(C.data,C.offset,v)}var A=Un(m,c);if(Ge.parse(A.data,A.offset,v.numberOfHMetrics,v.numGlyphs,v.glyphs),function(e){for(var t,n=e.tables.cmap.glyphIndexMap,r=Object.keys(n),a=0;a<r.length;a+=1){var i=r[a],o=n[i];(t=e.glyphs.get(o)).addUnicode(parseInt(i))}for(var u=0;u<e.glyphs.length;u+=1)t=e.glyphs.get(u),e.cffEncoding?e.isCIDFont?t.name="gid"+u:t.name=e.cffEncoding.charset[u]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(u))}(v),l){var T=Un(m,l);v.kerningPairs=Rn.parse(T.data,T.offset)}else v.kerningPairs={};if(u){var N=Un(m,u);v.tables.gpos=Fn.parse(N.data,N.offset),v.position.init()}if(s){var M=Un(m,s);v.tables.gsub=dt.parse(M.data,M.offset)}if(i){var D=Un(m,i);v.tables.fvar=Mn.parse(D.data,D.offset,v.names)}if(h){var I=Un(m,h);v.tables.meta=ht.parse(I.data,I.offset),v.metas=v.tables.meta}return v}t.Font=Cn,t.Glyph=xe,t.Path=T,t.BoundingBox=A,t._parse=ce,t.parse=Wn,t.load=function(e,t){("undefined"==typeof window?Ln:Bn)(e,(function(e,n){if(e)return t(e);var r;try{r=Wn(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return Wn(Ct(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],13:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",a=!1,i=arguments.length-1;-1<=i&&!a;i--){var o=0<=i?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,a="/"===o.charAt(0))}return(a?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!a).join("/"))||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),i=r(t.split("/")),o=Math.min(a.length,i.length),u=o,s=0;s<o;s++)if(a[s]!==i[s]){u=s;break}var c=[];for(s=u;s<a.length;s++)c.push("..");return(c=c.concat(i.slice(u))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,i=e.length-1;1<=i;--i)if(47===(t=e.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,i=0,o=e.length-1;0<=o;--o){var u=e.charCodeAt(o);if(47===u){if(a)continue;n=o+1;break}-1===r&&(a=!1,r=o+1),46===u?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1)}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,n){var r,a,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{a="function"==typeof clearTimeout?clearTimeout:u}catch(e){a=u}}();var c,l=[],f=!1,d=-1;function h(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!f){var e=s(h);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===u||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new v(e,t)),1!==l.length||f||s(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],15:[function(e,t,n){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in e,i="ArrayBuffer"in e;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(e){return e&&DataView.prototype.isPrototypeOf(e)},s=ArrayBuffer.isView||function(e){return e&&-1<o.indexOf(Object.prototype.toString.call(e))};p.prototype.append=function(e,t){e=f(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[f(e)]},p.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},p.prototype.set=function(e,t){this.map[f(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},y.call(x.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];w.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=x,e.Response=w,e.fetch=function(e,t){return new Promise((function(n,a){var i=new x(e,t),o=new XMLHttpRequest;o.onload=function(){var e,t,r={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var a=n.join(":").trim();t.append(r,a)}})),t)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;n(new w(a,r))},o.onerror=function(){a(new TypeError("Network request failed"))},o.ontimeout=function(){a(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&r&&(o.responseType="blob"),i.headers.forEach((function(e,t){o.setRequestHeader(t,e)})),o.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(a&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&u(e))this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!s(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=b(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=v(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function x(e,t){var n,r,a=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(a)}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}})),t}function w(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=o(e("../core/main")),i=o(e("../color/color_conversion"));function o(e){return e&&e.__esModule?e:{default:e}}var u=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],s=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];a.default.prototype._rgbColorName=function(e){var t=i.default._rgbaToHSBA(e);return function(e){var t;if(0!==e[0]){e[0]=Math.round(100*e[0]);var n=e[0].toString().split(""),a=n.length-1;n[a]=parseInt(n[a]),n[a]<2.5?n[a]=0:2.5<=n[a]&&n[a]<7.5&&(n[a]=5),2===n.length?(n[0]=parseInt(n[0]),7.5<=n[a]&&(n[a]=0,n[0]=n[0]+1),e[0]=10*n[0]+n[1]):7.5<=n[a]?e[0]=10:e[0]=n[a]}e[2]=e[2]/255;for(var i=e.length-1;1<=i;i--)e[i]<=.25?e[i]=0:.25<e[i]&&e[i]<.75?e[i]=.5:e[i]=1;if(0===e[0]&&0===e[1]&&1===e[2]){for(var o=2;0<=o;o--)r[o]=Math.round(1e4*r[o])/1e4;for(var c=0;c<u.length;c++){if(u[c].h===r[0]&&u[c].s===r[1]&&u[c].b===r[2]){t=u[c].name;break}t="white"}}else for(var l=0;l<s.length;l++)if(s[l].h===e[0]&&s[l].s===e[1]&&s[l].b===e[2]){t=s[l].name;break}return t}([(r=t)[0],t[1],t[2]])};var c=a.default;n.default=c},{"../color/color_conversion":22,"../core/main":36}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i="_Description",o="_fallbackDesc",u="_fallbackTable",s="_Label",c="_labelDesc",l="_labelTable";function f(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}a.default.prototype.describe=function(e,t){if(a.default._validateParameters("describe",arguments),"string"==typeof e){var n=this.canvas.id;e=f(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e))}},a.default.prototype.describeElement=function(e,t,n){if(a.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e){var r=this.canvas.id;t=f(t);var i=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e);e=e.replace(/[^a-zA-Z0-9 ]/g,"");var o='<th scope="row">'.concat(i,"</th><td>").concat(t,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==o&&(this.descriptions.fallbackElements[e].innerHTML=o):this._describeElementHTML("fallback",e,o),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==o&&(this.descriptions.labelElements[e].innerHTML=o):this._describeElementHTML("label",e,o))}},a.default.prototype._describeHTML=function(e,t){var n=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(n+i)))this.dummyDOM.querySelector("#"+n+u).insertAdjacentHTML("beforebegin",'<p id="'.concat(n+o,'"></p>'));else{var r='<div id="'.concat(n).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(n).concat(o,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#".concat(n)).innerHTML=r}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(n).concat(o)),void(this.descriptions.fallback.innerHTML=t)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(n+s)))this.dummyDOM.querySelector("#".concat(n+l))&&this.dummyDOM.querySelector("#".concat(n+l)).insertAdjacentHTML("beforebegin",'<p id="'.concat(n).concat(c,'"></p>'));else{var a='<div id="'.concat(n).concat(s,'" class="p5Label"><p id="').concat(n).concat(c,'"></p></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",a)}return this.descriptions.label=this.dummyDOM.querySelector("#"+n+c),void(this.descriptions.label.innerHTML=t)}},a.default.prototype._describeElementHTML=function(e,t,n){var r=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(r+i)))this.dummyDOM.querySelector("#"+r+u)||this.dummyDOM.querySelector("#"+r+o).insertAdjacentHTML("afterend",'<table id="'.concat(r).concat(u,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var a='<div id="'.concat(r).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(r).concat(u,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#"+r).innerHTML=a}var f=document.createElement("tr");return f.id=r+"_fte_"+t,this.dummyDOM.querySelector("#"+r+u).appendChild(f),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_fte_").concat(t)),void(this.descriptions.fallbackElements[t].innerHTML=n)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(r+s)))this.dummyDOM.querySelector("#".concat(r+l))||this.dummyDOM.querySelector("#"+r+c).insertAdjacentHTML("afterend",'<table id="'.concat(r+l,'"></table>'));else{var d='<div id="'.concat(r).concat(s,'" class="p5Label"><table id="').concat(r).concat(l,'"></table></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",d):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",d)}var h=document.createElement("tr");h.id=r+"_lte_"+t,this.dummyDOM.querySelector("#"+r+l).appendChild(h),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(r).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n}};var d=a.default;n.default=d},{"../core/main":36}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype._updateGridOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r="",a=0;for(var i in t){var o=0;for(var u in t[i]){var s='<li id="'.concat(e,"shape").concat(a,'">').concat(t[i][u].color," ").concat(i,",");"line"===i?s+=" location = ".concat(t[i][u].pos,", length = ").concat(t[i][u].length," pixels"):(s+=" location = ".concat(t[i][u].pos),"point"!==i&&(s+=", area = ".concat(t[i][u].area," %")),s+="</li>"),n+=s,o++,a++}r=1<o?"".concat(r," ").concat(o," ").concat(i,"s"):"".concat(r," ").concat(o," ").concat(i)}return{numShapes:[a,r],details:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var a="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]);return a=1===e[0]?"".concat(a," shape: ").concat(e[1]):"".concat(a," shapes: ").concat(e[1])}(n.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n=0,r="",a=Array.apply(null,Array(10)).map((function(){}));for(var i in a)a[i]=Array.apply(null,Array(10)).map((function(){}));for(var o in t)for(var u in t[o]){var s=void 0;s="line"!==o?'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[o][u].color," ").concat(o,"</a>"):'<a href="#'.concat(e,"shape").concat(n,'">').concat(t[o][u].color," ").concat(o," midpoint</a>"),a[t[o][u].loc.locY][t[o][u].loc.locX]?a[t[o][u].loc.locY][t[o][u].loc.locX]=a[t[o][u].loc.locY][t[o][u].loc.locX]+"  "+s:a[t[o][u].loc.locY][t[o][u].loc.locX]=s,n++}for(var c in a){var l="<tr>";for(var f in a[c])l+="<td>",void 0!==a[c][f]&&(l+=a[c][f]),l+="</td>";r=r+l+"</tr>"}return r}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),a!==t.map.innerHTML&&(t.map.innerHTML=a),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t}};var i=a.default;n.default=i},{"../core/main":36}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){return e[0]<.4*t?e[1]<.4*n?"top left":e[1]>.6*n?"bottom left":"mid left":e[0]>.6*t?e[1]<.4*n?"top right":e[1]>.6*n?"bottom right":"mid right":e[1]<.4*n?"top middle":e[1]>.6*n?"bottom middle":"middle"}function o(e,t,n){var r=Math.floor(e[0]/t*10),a=Math.floor(e[1]/n*10);return 10===r&&--r,10===a&&--a,{locX:r,locY:a}}a.default.prototype.textOutput=function(e){a.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},a.default.prototype.gridOutput=function(e){a.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},a.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},a.default.prototype._createOutput=function(e,t){var n,r,a,i=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode);var o="";"Fallback"===t?(n=i+e,r=i+"accessibleOutput",this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=i+e+(o=t),r=i+"accessibleOutput"+t,this.dummyDOM.querySelector("#".concat(r))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')):this.dummyDOM.querySelector("#".concat(i)).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>')))),this._accessibleOutputs[n]={},"textOutput"===e?(o="#".concat(i,"gridOutput").concat(o),a='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("beforebegin",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(o="#".concat(i,"textOutput").concat(o),a='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("afterend",a):this.dummyDOM.querySelector("#".concat(r)).innerHTML=a,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},a.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},a.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},a.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},a.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n={},r=!0,a=function(e,t){var n,r;return r="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,r]}(e,t);if("line"===e){n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(t[0],t[1],t[2],t[3]));var u=i([t[0],[1]],this.width,this.height),s=i([t[2],[3]],this.width,this.height);n.loc=o(a,this.width,this.height),n.pos=u===s?"at ".concat(u):"from ".concat(u," to ").concat(s)}else"point"===e?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=function(e,t,n,r){var a=0;if("arc"===e){var i=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(a=i*t[2]*t[3]/8,"open"===t[6]||"chord"===t[6]){var o=t[0],u=t[1],s=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),c=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),l=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),f=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),d=Math.abs(o*(c-f)+s*(f-u)+l*(u-c))/2;i>Math.PI?a+=d:a-=d}}else"ellipse"===e||"circle"===e?a=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?a=0:"quadrilateral"===e?a=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?a=t[2]*t[3]:"triangle"===e&&(a=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2);return Math.round(100*a/(n*r))}(e,t,this.width,this.height)),n.pos=i(a,this.width,this.height),n.loc=o(a,this.width,this.height);if(this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[n]){for(var c in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][c])===JSON.stringify(n)&&(r=!1);!0===r&&this.ingredients.shapes[e].push(n)}}else this.ingredients.shapes[e]=[n]};var u=a.default;n.default=u},{"../core/main":36}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype._updateTextOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],n=function(e,t){var n="",r=0;for(var a in t)for(var i in t[a]){var o='<li><a href="#'.concat(e,"shape").concat(r,'">').concat(t[a][i].color," ").concat(a,"</a>");"line"===a?o+=", ".concat(t[a][i].pos,", ").concat(t[a][i].length," pixels long.</li>"):(o+=", at ".concat(t[a][i].pos),"point"!==a&&(o+=", covering ".concat(t[a][i].area,"% of the canvas")),o+=".</li>"),n+=o,r++}return{numShapes:r,listShapes:n}}(e,this.ingredients.shapes),r=function(e,t,n,r){var a="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following");return a=1===e?"".concat(a," shape:"):"".concat(a," ").concat(e," shapes:")}(n.numShapes,this.ingredients.colors.background,this.width,this.height),a=function(e,t){var n="",r=0;for(var a in t)for(var i in t[a]){var o='<tr id="'.concat(e,"shape").concat(r,'"><th>').concat(t[a][i].color," ").concat(a,"</th>");"line"===a?o+="<td>location = ".concat(t[a][i].pos,"</td><td>length = ").concat(t[a][i].length," pixels</td></tr>"):(o+="<td>location = ".concat(t[a][i].pos,"</td>"),"point"!==a&&(o+="<td> area = ".concat(t[a][i].area,"%</td>")),o+="</tr>"),n+=o,r++}return n}(e,this.ingredients.shapes);r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),a!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=a),this._accessibleOutputs[e]=t}};var i=a.default;n.default=i},{"../core/main":36}],21:[function(e,t,n){"use strict";var r,a=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=a.default},{"./accessibility/color_namer":16,"./accessibility/describe":17,"./accessibility/gridOutput":18,"./accessibility/outputs":19,"./accessibility/textOutput":20,"./color/color_conversion":22,"./color/creating_reading":23,"./color/p5.Color":24,"./color/setting":25,"./core/constants":26,"./core/environment":27,"./core/friendly_errors/fes_core":28,"./core/friendly_errors/file_errors":29,"./core/friendly_errors/stacktrace":30,"./core/friendly_errors/validate_params":31,"./core/helpers":32,"./core/init":33,"./core/legacy":35,"./core/main":36,"./core/p5.Element":37,"./core/p5.Graphics":38,"./core/p5.Renderer":39,"./core/p5.Renderer2D":40,"./core/preload":41,"./core/rendering":42,"./core/shape/2d_primitives":43,"./core/shape/attributes":44,"./core/shape/curves":45,"./core/shape/vertex":46,"./core/shim":47,"./core/structure":48,"./core/transform":49,"./data/local_storage.js":50,"./data/p5.TypedDict":51,"./dom/dom":52,"./events/acceleration":53,"./events/keyboard":54,"./events/mouse":55,"./events/touch":56,"./image/filters":57,"./image/image":58,"./image/loading_displaying":59,"./image/p5.Image":60,"./image/pixels":61,"./io/files":62,"./io/p5.Table":63,"./io/p5.TableRow":64,"./io/p5.XML":65,"./math/calculation":66,"./math/math":67,"./math/noise":68,"./math/p5.Vector":69,"./math/random":70,"./math/trigonometry":71,"./typography/attributes":72,"./typography/loading_displaying":73,"./typography/p5.Font":74,"./utilities/array_functions":75,"./utilities/conversion":76,"./utilities/string_functions":77,"./utilities/time_date":78,"./webgl/3d_primitives":79,"./webgl/interaction":80,"./webgl/light":81,"./webgl/loading":82,"./webgl/material":83,"./webgl/p5.Camera":84,"./webgl/p5.Geometry":85,"./webgl/p5.Matrix":86,"./webgl/p5.RenderBuffer":87,"./webgl/p5.RendererGL":90,"./webgl/p5.RendererGL.Immediate":88,"./webgl/p5.RendererGL.Retained":89,"./webgl/p5.Shader":91,"./webgl/p5.Texture":92,"./webgl/text":93}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.ColorConversion={},a.default.ColorConversion._hsbaToHSLA=function(e){var t=e[0],n=e[1],r=e[2],a=(2-n)*r/2;return 0!=a&&(1==a?n=0:a<.5?n/=2-n:n=n*r/(2-2*a)),[t,n,a,e[3]]},a.default.ColorConversion._hsbaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],a=[];if(0===n)a=[r,r,r,e[3]];else{var i,o,u,s=Math.floor(t),c=r*(1-n),l=r*(1-n*(t-s)),f=r*(1-n*(1+s-t));u=1===s?(i=l,o=r,c):2===s?(i=c,o=r,f):3===s?(i=c,o=l,r):4===s?(i=f,o=c,r):5===s?(i=r,o=c,l):(i=r,o=f,c),a=[i,o,u,e[3]]}return a},a.default.ColorConversion._hslaToHSBA=function(e){var t,n=e[0],r=e[1],a=e[2];return[n,r=2*((t=a<.5?(1+r)*a:a+r-a*r)-a)/t,t,e[3]]},a.default.ColorConversion._hslaToRGBA=function(e){var t=6*e[0],n=e[1],r=e[2],a=[];if(0===n)a=[r,r,r,e[3]];else{var i,o=2*r-(i=r<.5?(1+n)*r:r+n-r*n),u=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t};a=[u(2+t,o,i),u(t,o,i),u(t-2,o,i),e[3]]}return a},a.default.ColorConversion._rgbaToHSBA=function(e){var t,n,r=e[0],a=e[1],i=e[2],o=Math.max(r,a,i),u=o-Math.min(r,a,i);return 0==u?n=t=0:(n=u/o,r===o?t=(a-i)/u:a===o?t=2+(i-r)/u:i===o&&(t=4+(r-a)/u),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,o,e[3]]},a.default.ColorConversion._rgbaToHSLA=function(e){var t,n,r=e[0],a=e[1],i=e[2],o=Math.max(r,a,i),u=Math.min(r,a,i),s=o+u,c=o-u;return 0==c?n=t=0:(n=s<1?c/s:c/(2-s),r===o?t=(a-i)/c:a===o?t=2+(i-r)/c:i===o&&(t=4+(r-a)/c),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,s/2,e[3]]};var i=a.default.ColorConversion;n.default=i},{"../core/main":36}],23:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(e){return i.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},i.default.prototype.blue=function(e){return i.default._validateParameters("blue",arguments),this.color(e)._getBlue()},i.default.prototype.brightness=function(e){return i.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},i.default.prototype.color=function(){if(i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color)return arguments[0];var e=arguments[0]instanceof Array?arguments[0]:arguments;return new i.default.Color(this,e)},i.default.prototype.green=function(e){return i.default._validateParameters("green",arguments),this.color(e)._getGreen()},i.default.prototype.hue=function(e){return i.default._validateParameters("hue",arguments),this.color(e)._getHue()},i.default.prototype.lerpColor=function(e,t,n){i.default._validateParameters("lerpColor",arguments);var r,a,u,s,c,l,f=this._colorMode,d=this._colorMaxes;if(f===o.RGB)c=e.levels.map((function(e){return e/255})),l=t.levels.map((function(e){return e/255}));else if(f===o.HSB)e._getBrightness(),t._getBrightness(),c=e.hsba,l=t.hsba;else{if(f!==o.HSL)throw new Error("".concat(f,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),c=e.hsla,l=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),r=this.lerp(c[0],l[0],n),a=this.lerp(c[1],l[1],n),u=this.lerp(c[2],l[2],n),s=this.lerp(c[3],l[3],n),r*=d[f][0],a*=d[f][1],u*=d[f][2],s*=d[f][3],this.color(r,a,u,s)},i.default.prototype.lightness=function(e){return i.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},i.default.prototype.red=function(e){return i.default._validateParameters("red",arguments),this.color(e)._getRed()},i.default.prototype.saturation=function(e){return i.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var s=i.default;n.default=s},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"./p5.Color":24}],24:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),o=s(e("./color_conversion"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}a.default.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=a.default.Color._parseInputs.apply(this,t),this._calculateLevels(),this},a.default.Color.prototype.toString=function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}},a.default.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[i.RGB][0],this._calculateLevels()},a.default.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[i.RGB][1],this._calculateLevels()},a.default.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[i.RGB][2],this._calculateLevels()},a.default.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},a.default.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n])},a.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},a.default.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},a.default.Color.prototype._getMode=function(){return this.mode},a.default.Color.prototype._getMaxes=function(){return this.maxes},a.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},a.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},a.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},a.default.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},a.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},a.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},a.default.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=o.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=o.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},l=/\s*/,f=/(\d{1,3})/,d=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,h=new RegExp("".concat(d.source,"%")),p={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(l.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",h.source,",",h.source,",",h.source,"\\)$"].join(l.source),"i"),RGBA:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(l.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",h.source,",",h.source,",",h.source,",",d.source,"\\)$"].join(l.source),"i"),HSL:new RegExp(["^hsl\\(",f.source,",",h.source,",",h.source,"\\)$"].join(l.source),"i"),HSLA:new RegExp(["^hsla\\(",f.source,",",h.source,",",h.source,",",d.source,"\\)$"].join(l.source),"i"),HSB:new RegExp(["^hsb\\(",f.source,",",h.source,",",h.source,"\\)$"].join(l.source),"i"),HSBA:new RegExp(["^hsba\\(",f.source,",",h.source,",",h.source,",",d.source,"\\)$"].join(l.source),"i")};a.default.Color._parseInputs=function(e,t,n,r){var u,s=arguments.length,l=this.mode,f=this.maxes[l],d=[];if(3<=s){for(d[0]=e/f[0],d[1]=t/f[1],d[2]=n/f[2],d[3]="number"==typeof r?r/f[3]:1,u=d.length-1;0<=u;--u){var h=d[u];h<0?d[u]=0:1<h&&(d[u]=1)}return l===i.HSL?o.default._hslaToRGBA(d):l===i.HSB?o.default._hsbaToRGBA(d):d}if(1===s&&"string"==typeof e){var v=e.trim().toLowerCase();if(c[v])return a.default.Color._parseInputs.call(this,c[v]);if(p.HEX3.test(v))return(d=p.HEX3.exec(v).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,d;if(p.HEX6.test(v))return(d=p.HEX6.exec(v).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,d;if(p.HEX4.test(v))return p.HEX4.exec(v).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(p.HEX8.test(v))return p.HEX8.exec(v).slice(1).map((function(e){return parseInt(e,16)/255}));if(p.RGB.test(v))return(d=p.RGB.exec(v).slice(1).map((function(e){return e/255})))[3]=1,d;if(p.RGB_PERCENT.test(v))return(d=p.RGB_PERCENT.exec(v).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,d;if(p.RGBA.test(v))return p.RGBA.exec(v).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(p.RGBA_PERCENT.test(v))return p.RGBA_PERCENT.exec(v).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(p.HSL.test(v)?(d=p.HSL.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:p.HSLA.test(v)&&(d=p.HSLA.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(d=d.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return o.default._hslaToRGBA(d);if(p.HSB.test(v)?(d=p.HSB.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:p.HSBA.test(v)&&(d=p.HSBA.exec(v).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),d.length){for(u=d.length-1;0<=u;--u)d[u]=Math.max(Math.min(d[u],1),0);return o.default._hsbaToRGBA(d)}d=[1,1,1,1]}else{if(1!==s&&2!==s||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));d[0]=e/f[2],d[1]=e/f[2],d[2]=e/f[2],d[3]="number"==typeof t?t/f[3]:1,d=d.map((function(e){return Math.max(Math.min(e,1),0)}))}return d};var v=a.default.Color;n.default=v},{"../core/constants":26,"../core/main":36,"./color_conversion":22}],25:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}e("./p5.Color"),i.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},i.default.prototype.clear=function(){return this._renderer.clear(),this},i.default.prototype.colorMode=function(e,t,n,r,a){if(i.default._validateParameters("colorMode",arguments),e===o.RGB||e===o.HSB||e===o.HSL){this._colorMode=e;var u=this._colorMaxes[e];2===arguments.length?(u[0]=t,u[1]=t,u[2]=t,u[3]=t):4===arguments.length?(u[0]=t,u[1]=n,u[2]=r):5===arguments.length&&(u[0]=t,u[1]=n,u[2]=r,u[3]=a)}return this},i.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},i.default.prototype.erase=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return this._renderer.erase(e,t),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.Color":24}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FILL=n.STROKE=n.CURVE=n.BEZIER=n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL=n.P2D=void 0,n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=void 0;var r=Math.PI;n.P2D="p2d",n.WEBGL="webgl",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait";var a=r/2;n.HALF_PI=a;var i=r;n.PI=i;var o=r/4;n.QUARTER_PI=o;var u=2*r;n.TAU=u;var s=2*r;n.TWO_PI=s,n.DEGREES="degrees",n.RADIANS="radians";var c=r/180;n.DEG_TO_RAD=c;var l=180/r;n.RAD_TO_DEG=l,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback"},{}],27:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("./main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var s=[o.ARROW,o.CROSS,o.HAND,o.MOVE,o.TEXT,o.WAIT];i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60;var c=window.print;function l(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function f(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):c()},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(e,t,n){var r="auto",a=this._curElement.elt;if(s.includes(e))r=e;else if("string"==typeof e){var i="";t&&n&&"number"==typeof t&&"number"==typeof n&&(i="".concat(t," ").concat(n)),r="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(i,", auto"):e}a.style.cursor=r},i.default.prototype.frameRate=function(e){return i.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(e){return this.frameRate(e)},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=l(),i.default.prototype.windowHeight=f(),i.default.prototype._onresize=function(e){this._setProperty("windowWidth",l()),this._setProperty("windowHeight",f());var t,n=this._isGlobal?window:this;"function"==typeof n.windowResized&&(void 0===(t=n.windowResized(e))||t||e.preventDefault())},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(e){if(i.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e?function(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(e){var t;return i.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},i.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n};var d=i.default;n.default=d},{"./constants":26,"./main":36}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization");var i=null,o=null;a.default._friendlyError=a.default._checkForUserDefinedFunctions=a.default._fesErrorMonitor=function(){},i=null;var u="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";function s(e,t){t=t||console.log.bind(console),i||o(),i.some((function(n){if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W"))){var r="function"===n.type?"".concat(n.name,"()"):n.name;return t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(u)),!0}}))}o=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n;return n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:n}}))}var n={};(i=[].concat(t(a.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},a.default.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",(function(){window.removeEventListener("error",s,!1)})));var c=a.default;n.default=c},{"../constants":26,"../internationalization":34,"../main":36,"./browser_errors":void 0}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),a.default._friendlyFileLoadError=function(){};var i=a.default;n.default=i},{"../internationalization":34,"../main":36}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};function i(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),a=this.extractLocation(n?n[1]:r.pop());return{functionName:r.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(a[0])?void 0:a[0],lineNumber:a[1],columnNumber:a[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,a=this.extractLocation(e.replace(t,""));return{functionName:r,fileName:a[0],lineNumber:a[1],columnNumber:a[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],a=2,i=n.length;a<i;a+=2){var o=t.exec(n[a]);o&&r.push({fileName:o[2],lineNumber:o[1],source:n[a]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],a=0,i=n.length;a<i;a+=2){var o=t.exec(n[a]);o&&r.push({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:n[a]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),a=n.shift()||"",i=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return a.match(/\(([^)]*)\)/)&&(t=a.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:i,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}a.default._getErrorStackParser=function(){return new i};var o=a.default;n.default=o},{"../main":36}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(e){if((!e||!e.__esModule)&&null!==e&&("object"===o(e)||"function"==typeof e)){var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=r?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,t&&t.set(e,n)}})(e("../constants")),e("../internationalization"),a.default._validateParameters=a.default._clearValidateParamsCache=function(){};var u=a.default;n.default=u},{"../../../docs/parameterData.json":void 0,"../constants":26,"../internationalization":34,"../main":36}],32:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var o={modeAdjust:function(e,t,n,r,i){return i===a.CORNER?{x:e,y:t,w:n,h:r}:i===a.CORNERS?{x:e,y:t,w:n-e,h:r-t}:i===a.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:i===a.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}};n.default=o},{"./constants":26}],33:[function(e,t,n){"use strict";var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./internationalization");var i=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),i]).then((function(){void 0===window._setupDone?window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!a.default.instance&&new a.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")}))},{"../core/main":36,"./internationalization":34}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.initialize=n.translator=void 0;var r,a,i=u(e("i18next")),o=u(e("i18next-browser-languagedetector"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t,n)}var t,n,i;return t=e,(n=[{key:"fetchWithTimeout",value:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),r)}))])}},{key:"init",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};this.services=e,this.options=n}},{key:"read",value:function(e,t,n){var i=this.options.loadPath;if(e===this.options.fallback)n(null,r[e][t]);else if(a.includes(e)){var o=this.services.interpolator.interpolate(i,{lng:e,ns:t});this.loadUrl(o,n)}else n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(!t.ok)throw new Error("failed loading ".concat(e));return t.json()}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&s(t.prototype,n),i&&s(t,i),e}();c.type="backend";var l=function(e,t){console.debug("p5.js translator called before translations were loaded"),i.default.t(e,t)};n.translator=l,n.initialize=function(){return i.default.use(o.default).use(c).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=l=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,i18next:3,"i18next-browser-languagedetector":3}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},a.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},a.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},a.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var i=a.default;n.default=i},{"./main":36}],36:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var i=Object.getOwnPropertyNames(e.prototype._registeredMethods),o=!0,u=!1,s=void 0;try{for(var c,l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;this._registeredMethods[f]=e.prototype._registeredMethods[f].slice()}}catch(t){u=!0,s=t}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){a._userNode&&"string"==typeof a._userNode&&(a._userNode=document.getElementById(a._userNode));var t=a._isGlobal?window:a;if(t.preload){var n=document.getElementById(a._loadingScreenId);n||((n=document.createElement("div")).innerHTML="Loading...",n.style.position="absolute",n.id=a._loadingScreenId,(a._userNode||document.body).appendChild(n));var r=a._preloadMethods;for(var i in r){r[i]=r[i]||e;var o=r[i];o!==e.prototype&&o!==e||(a._isGlobal&&(window[i]=a._wrapPreload(a,i)),o=a),a._registeredPreloadMethods[i]=o[i],o[i]=a._wrapPreload(o,i)}t.preload(),a._runIfPreloadsAreDone()}else a._setup(),a._draw()},this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),this._setupDone||(this._lastFrameTime=window.performance.now(),e._setup(),e._draw())}},this._decrementPreload=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n._registeredPreloadMethods[t].apply(e,a)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){a.createCanvas(a._defaultCanvasSize.width,a._defaultCanvasSize.height,"p2d");var e=a._isGlobal?window:a;if("function"==typeof e.preload)for(var t in a._preloadMethods)e[t]=a._preloadMethods[t][t],e[t]&&a&&(e[t]=e[t].bind(a));a._millisStart=window.performance.now(),"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),r=!0,i=!1,o=void 0;try{for(var u,s=n[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}a._lastFrameTime=window.performance.now(),a._setupDone=!0,(a._accessibleOutputs.grid||a._accessibleOutputs.text)&&a._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-a._lastFrameTime,n=1e3/a._targetFrameRate;(!a._loop||n-5<=t)&&(a.redraw(),a._frameRate=1e3/(e-a._lastFrameTime),a.deltaTime=e-a._lastFrameTime,a._setProperty("deltaTime",a.deltaTime),a._lastFrameTime=e,void 0!==a._updateMouseCoords&&(a._updateMouseCoords(),a._setProperty("movedX",0),a._setProperty("movedY",0))),a._loop&&(a._requestAnimId=window.requestAnimationFrame(a._draw))},this._setProperty=function(e,t){a[e]=t,a._isGlobal&&(window[e]=t)},this.remove=function(){var t=document.getElementById(a._loadingScreenId);if(t&&(t.parentNode.removeChild(t),a._incrementPreload()),a._curElement){for(var n in a._loop=!1,a._requestAnimId&&window.cancelAnimationFrame(a._requestAnimId),a._events)window.removeEventListener(n,a._events[n]);var r=!0,i=!1,o=void 0;try{for(var u,s=a._elements[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var c=u.value;for(var l in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(l,c._events[l])}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var f=a;a._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(f)}))}if(a._isGlobal){for(var d in e.prototype)try{delete window[d]}catch(t){window[d]=void 0}for(var h in a)if(a.hasOwnProperty(h))try{delete window[h]}catch(t){window[h]=void 0}e.instance=null}},this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var d=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var h in this._isGlobal=!0,e.instance=this,e.prototype)if("function"==typeof e.prototype[h]){var p=h.substring(2);this._events.hasOwnProperty(p)||(Math.hasOwnProperty(h)&&Math[h]===e.prototype[h]?d(h,e.prototype[h]):d(h,e.prototype[h].bind(this)))}else d(h,e.prototype[h]);for(var v in this)this.hasOwnProperty(v)&&d(v,this[v])}for(var m in this._events){var g=this["_on".concat(m)];if(g){var b=g.bind(this);window.addEventListener(m,b,{passive:!1}),this._events[m]=b}}function y(){a._setProperty("focused",!0)}function x(){a._setProperty("focused",!1)}window.addEventListener("focus",y),window.addEventListener("blur",x),this.registerMethod("remove",(function(){window.removeEventListener("focus",y),window.removeEventListener("blur",x)})),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t,n,r;return t=e,(n=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(e,t){n[e]=t}}}])&&o(t.prototype,n),r&&o(t,r),e}();for(var s in u.instance=null,u.disableFriendlyErrors=!1,a)u.prototype[s]=a[s];u.prototype._preloadMethods={loadJSON:u.prototype,loadImage:u.prototype,loadStrings:u.prototype,loadXML:u.prototype,loadBytes:u.prototype,loadTable:u.prototype,loadFont:u.prototype,loadModel:u.prototype,loadShader:u.prototype},u.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},u.prototype._registeredPreloadMethods={};var c=u;n.default=c},{"./constants":26,"./shim":47}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.Element=function(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},a.default.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof a.default.Element&&(e=e.elt),e.appendChild(this.elt),this)},a.default.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},a.default.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},a.default.Element.prototype.mousePressed=function(e){return a.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this)}),this),this},a.default.Element.prototype.doubleClicked=function(e){return a.default.Element._adjustListener("dblclick",e,this),this},a.default.Element.prototype.mouseWheel=function(e){return a.default.Element._adjustListener("wheel",e,this),this},a.default.Element.prototype.mouseReleased=function(e){return a.default.Element._adjustListener("mouseup",e,this),this},a.default.Element.prototype.mouseClicked=function(e){return a.default.Element._adjustListener("click",e,this),this},a.default.Element.prototype.mouseMoved=function(e){return a.default.Element._adjustListener("mousemove",e,this),this},a.default.Element.prototype.mouseOver=function(e){return a.default.Element._adjustListener("mouseover",e,this),this},a.default.Element.prototype.mouseOut=function(e){return a.default.Element._adjustListener("mouseout",e,this),this},a.default.Element.prototype.touchStarted=function(e){return a.default.Element._adjustListener("touchstart",e,this),this},a.default.Element.prototype.touchMoved=function(e){return a.default.Element._adjustListener("touchmove",e,this),this},a.default.Element.prototype.touchEnded=function(e){return a.default.Element._adjustListener("touchend",e,this),this},a.default.Element.prototype.dragOver=function(e){return a.default.Element._adjustListener("dragover",e,this),this},a.default.Element.prototype.dragLeave=function(e){return a.default.Element._adjustListener("dragleave",e,this),this},a.default.Element._adjustListener=function(e,t,n){return!1===t?a.default.Element._detachListener(e,n):a.default.Element._attachListener(e,t,n),this},a.default.Element._attachListener=function(e,t,n){n._events[e]&&a.default.Element._detachListener(e,n);var r=t.bind(n);n.elt.addEventListener(e,r,!1),n._events[e]=r},a.default.Element._detachListener=function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null},a.default.Element.prototype._setProperty=function(e,t){this[e]=t};var i=a.default.Element;n.default=i},{"./main":36}],38:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("./main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.Graphics=function(e,t,n,r){var a=n||o.P2D;this.canvas=document.createElement("canvas");var u=r._userNode||document.body;for(var s in u.appendChild(this.canvas),i.default.Element.call(this,this.canvas,r),i.default.prototype)this[s]||("function"==typeof i.default.prototype[s]?this[s]=i.default.prototype[s].bind(this):this[s]=i.default.prototype[s]);return i.default.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=r._pixelDensity,a===o.WEBGL?this._renderer=new i.default.RendererGL(this.canvas,this,!1):this._renderer=new i.default.Renderer2D(this.canvas,this,!1),r._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},i.default.Graphics.prototype=Object.create(i.default.Element.prototype),i.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},i.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e=this._pInst._elements.indexOf(this);for(var t in-1!==e&&this._pInst._elements.splice(e,1),this._events)this.elt.removeEventListener(t,this._events[t])};var s=i.default.Graphics;n.default=s},{"./constants":26,"./main":36}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}a.default.Renderer=function(e,t,n){a.default.Element.call(this,e,t),this.canvas=e,this._pixelsState=t,n?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=i.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=i.LEFT,this._textBaseline=i.BASELINE,this._rectMode=i.CORNER,this._ellipseMode=i.CENTER,this._curveTightness=0,this._imageMode=i.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1},a.default.Renderer.prototype=Object.create(a.default.Element.prototype),a.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle}}},a.default.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},a.default.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.default.Renderer.prototype.get=function(e,t,n,r){var i=this._pixelsState,o=i._pixelDensity,u=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=i.width,r=i.height;else if(e*=o,t*=o,void 0===n&&void 0===r)return e<0||t<0||e>=u.width||t>=u.height?[0,0,0,0]:this._getPixel(e,t);var s=new a.default.Image(n,r);return s.canvas.getContext("2d").drawImage(u,e,t,n*o,r*o,0,0,n,r),s},a.default.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_textLeading",e),this._pInst):this._textLeading},a.default.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._setProperty("_textLeading",e*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.default.Renderer.prototype.textStyle=function(e){return e?(e!==i.NORMAL&&e!==i.ITALIC&&e!==i.BOLD&&e!==i.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},a.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},a.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},a.default.Renderer.prototype.textAlign=function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},a.default.Renderer.prototype.text=function(e,t,n,r,a){var o,u,s,c,l,f,d,h,p,v=this._pInst,m=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&void 0!==e){if("string"!=typeof e&&(e=e.toString()),o=(e=e.replace(/(\t)/g,"  ")).split("\n"),void 0!==r){for(s=h=0;s<o.length;s++){for(l="",d=o[s].split(" "),u=0;u<d.length;u++)if(f="".concat(l+d[u]," "),r<this.textWidth(f)){for(var g=d[u],b=0;b<g.length;b++)f="".concat(l+g[b]),r<this.textWidth(f)&&0<l.length?(l="".concat(g[b]),h+=v.textLeading()):l=f;l="".concat(l," ")}else l=f;s<o.length-1&&(h+=v.textLeading())}switch(this._rectMode===i.CENTER&&(t-=r/2,n-=a/2),this._textAlign){case i.CENTER:t+=r/2;break;case i.RIGHT:t+=r}var y=!1;if(void 0!==a){switch(this._textBaseline){case i.BOTTOM:p=n+(a-h),n=Math.max(p,n);break;case i.CENTER:p=n+(a-h)/2,n=Math.max(p,n);break;case i.BASELINE:y=!0,this._textBaseline=i.TOP}m=n+a-v.textAscent()}for(s=0;s<o.length;s++){for(l="",d=o[s].split(" "),u=0;u<d.length;u++)if(f="".concat(l+d[u]," "),r<this.textWidth(f)){for(var x=d[u],_=0;_<x.length;_++)if(f="".concat(l+x[_]),r<this.textWidth(f)&&0<l.length){var w=l.slice(-1),k="\n"!==w&&" "!==w;l="".concat(l).concat(k?"-":""),this._renderText(v,l,t,n,m),n+=v.textLeading(),l="".concat(x[_])}else l=f;l="".concat(l," ")}else l=f;this._renderText(v,l,t,n,m),n+=v.textLeading(),y&&(this._textBaseline=i.BASELINE)}}else{var O=0,S=v.textAlign().vertical;for(S===i.CENTER?O=(o.length-1)*v.textLeading()/2:S===i.BOTTOM&&(O=(o.length-1)*v.textLeading()),c=0;c<o.length;c++)this._renderText(v,o[c],t,n-O,m),n+=v.textLeading()}return v}},a.default.Renderer.prototype._applyDefaults=function(){return this},a.default.Renderer.prototype._isOpenType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===u(e)&&e.font&&e.font.supported},a.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var e=document.createElement("span");e.style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var n=document.createElement("div");n.appendChild(e),n.appendChild(t),n.style.height="0px",n.style.overflow="hidden",document.body.appendChild(n),t.style.verticalAlign="baseline";var r=s(t),a=s(e),i=r[1]-a[1];t.style.verticalAlign="bottom",r=s(t),a=s(e);var o=r[1]-a[1]-i;return document.body.removeChild(n),this._setProperty("_textAscent",i),this._setProperty("_textDescent",o),this};var c=a.default.Renderer;n.default=c},{"../core/constants":26,"./main":36}],40:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("./main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("./constants")),o=s(e("../image/filters"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}e("./p5.Renderer");var c="rgba(0,0,0,0)";a.default.Renderer2D=function(e,t,n){return a.default.Renderer.call(this,e,t,n),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},a.default.Renderer2D.prototype=Object.create(a.default.Renderer.prototype),a.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"},a.default.Renderer2D.prototype.resize=function(e,t){a.default.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},a.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof a.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var e,t=this._getFill(),n=(e=this._pInst).color.apply(e,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(n.levels);var r=n.toString();this._setFill(r),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},a.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},a.default.Renderer2D.prototype.fill=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setFill(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",t.levels)},a.default.Renderer2D.prototype.stroke=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setStroke(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",t.levels)},a.default.Renderer2D.prototype.erase=function(e,t){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var n=this._pInst.color(255,e).toString();this.drawingContext.fillStyle=n,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var r=this._pInst.color(255,t).toString();this.drawingContext.strokeStyle=r;var a=this._cachedBlendMode;this.blendMode(i.REMOVE),this._cachedBlendMode=a,this._isErasing=!0}},a.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},a.default.Renderer2D.prototype.image=function(e,t,n,r,i,o,u,s,c){var l;e.gifProperties&&e._animateGif(this._pInst);try{this._tint&&(a.default.MediaElement&&e instanceof a.default.MediaElement&&e.loadPixels(),e.canvas&&(l=this._getTintedImageCanvas(e))),l=l||e.canvas||e.elt;var f=1;e.width&&0<e.width&&(f=l.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(l,f*t,f*n,f*r,f*i,o,u,s,c),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},a.default.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=o.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),a=r.createImageData(e.canvas.width,e.canvas.height),i=a.data,u=0;u<t.length;u+=4){var s=t[u],c=t[u+1],l=t[u+2],f=t[u+3];i[u]=s*this._tint[0]/255,i[u+1]=c*this._tint[1]/255,i[u+2]=l*this._tint[2]/255,i[u+3]=f*this._tint[3]/255}return r.putImageData(a,0,0),n},a.default.Renderer2D.prototype.blendMode=function(e){if(e===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==i.BLEND&&e!==i.REMOVE&&e!==i.DARKEST&&e!==i.LIGHTEST&&e!==i.DIFFERENCE&&e!==i.MULTIPLY&&e!==i.EXCLUSION&&e!==i.SCREEN&&e!==i.REPLACE&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE&&e!==i.BURN&&e!==i.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}},a.default.Renderer2D.prototype.blend=function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[n.length-1],o=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=i,a.default.prototype.copy.apply(this,o),this.drawingContext.globalCompositeOperation=e},a.default.Renderer2D.prototype._getPixel=function(e,t){var n;return[(n=this.drawingContext.getImageData(e,t,1,1).data)[0],n[1],n[2],n[3]]},a.default.Renderer2D.prototype.loadPixels=function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t,r=this.height*t,a=this.drawingContext.getImageData(0,0,n,r);e._setProperty("imageData",a),e._setProperty("pixels",a.data)},a.default.Renderer2D.prototype.set=function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof a.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var i=0,o=0,u=0,s=0,c=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels.call(r),"number"==typeof n)c<r.pixels.length&&(u=o=i=n,s=255);else if(n instanceof Array){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");c<r.pixels.length&&(i=n[0],o=n[1],u=n[2],s=n[3])}else n instanceof a.default.Color&&c<r.pixels.length&&(i=n.levels[0],o=n.levels[1],u=n.levels[2],s=n.levels[3]);for(var l=0;l<r._pixelDensity;l++)for(var f=0;f<r._pixelDensity;f++)c=4*((t*r._pixelDensity+f)*this.width*r._pixelDensity+(e*r._pixelDensity+l)),r.pixels[c]=i,r.pixels[c+1]=o,r.pixels[c+2]=u,r.pixels[c+3]=s}},a.default.Renderer2D.prototype.updatePixels=function(e,t,n,r){var a=this._pixelsState,i=a._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=i,t*=i,n*=i,r*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=a.imageData),this.drawingContext.putImageData(a.imageData,e,t,0,0,n,r)},a.default.Renderer2D.prototype._acuteArcToBezier=function(e,t){var n=t/2,r=Math.cos(n),a=Math.sin(n),i=1/Math.tan(n),o=e+n,u=Math.cos(o),s=Math.sin(o),c=(4-r)/3,l=a+(r-c)*i;return{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(c*u+l*s).toFixed(7),by:(c*s-l*u).toFixed(7),cx:(c*u-l*s).toFixed(7),cy:(c*s+l*u).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}},a.default.Renderer2D.prototype.arc=function(e,t,n,r,a,o,u){var s=this.drawingContext,c=n/2,l=r/2,f=0,d=[];for(e+=c,t+=l;1e-5<=o-a;)f=Math.min(o-a,i.HALF_PI),d.push(this._acuteArcToBezier(a,f)),a+=f;return this._doFill&&(s.beginPath(),d.forEach((function(n,r){0===r&&s.moveTo(e+n.ax*c,t+n.ay*l),s.bezierCurveTo(e+n.bx*c,t+n.by*l,e+n.cx*c,t+n.cy*l,e+n.dx*c,t+n.dy*l)})),u!==i.PIE&&null!=u||s.lineTo(e,t),s.closePath(),s.fill()),this._doStroke&&(s.beginPath(),d.forEach((function(n,r){0===r&&s.moveTo(e+n.ax*c,t+n.ay*l),s.bezierCurveTo(e+n.bx*c,t+n.by*l,e+n.cx*c,t+n.cy*l,e+n.dx*c,t+n.dy*l)})),u===i.PIE?(s.lineTo(e,t),s.closePath()):u===i.CHORD&&s.closePath(),s.stroke()),this},a.default.Renderer2D.prototype.ellipse=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=parseFloat(e[0]),i=parseFloat(e[1]),o=parseFloat(e[2]),u=parseFloat(e[3]);if(n&&!r){if(this._getFill()===c)return this}else if(!n&&r&&this._getStroke()===c)return this;var s=o/2*.5522847498,l=u/2*.5522847498,f=a+o,d=i+u,h=a+o/2,p=i+u/2;t.beginPath(),t.moveTo(a,p),t.bezierCurveTo(a,p-l,h-s,i,h,i),t.bezierCurveTo(h+s,i,f,p-l,f,p),t.bezierCurveTo(f,p+l,h+s,d,h,d),t.bezierCurveTo(h-s,d,a,p+l,a,p),n&&t.fill(),r&&t.stroke()},a.default.Renderer2D.prototype.line=function(e,t,n,r){var a=this.drawingContext;return this._doStroke&&(this._getStroke()===c||(a.beginPath(),a.moveTo(e,t),a.lineTo(n,r),a.stroke())),this},a.default.Renderer2D.prototype.point=function(e,t){var n=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===c)return this;var r=this._getStroke(),a=this._getFill();e=Math.round(e),t=Math.round(t),this._setFill(r),1<n.lineWidth?(n.beginPath(),n.arc(e,t,n.lineWidth/2,0,i.TWO_PI,!1),n.fill()):n.fillRect(e,t,1,1),this._setFill(a)},a.default.Renderer2D.prototype.quad=function(e,t,n,r,a,i,o,u){var s=this.drawingContext,l=this._doFill,f=this._doStroke;if(l&&!f){if(this._getFill()===c)return this}else if(!l&&f&&this._getStroke()===c)return this;return s.beginPath(),s.moveTo(e,t),s.lineTo(n,r),s.lineTo(a,i),s.lineTo(o,u),s.closePath(),l&&s.fill(),f&&s.stroke(),this},a.default.Renderer2D.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],u=e[6],s=e[7],l=this.drawingContext,f=this._doFill,d=this._doStroke;if(f&&!d){if(this._getFill()===c)return this}else if(!f&&d&&this._getStroke()===c)return this;if(l.beginPath(),void 0===i)l.rect(t,n,r,a);else{void 0===o&&(o=i),void 0===u&&(u=o),void 0===s&&(s=u);var h=Math.abs(r),p=Math.abs(a),v=h/2,m=p/2;h<2*i&&(i=v),p<2*i&&(i=m),h<2*o&&(o=v),p<2*o&&(o=m),h<2*u&&(u=v),p<2*u&&(u=m),h<2*s&&(s=v),p<2*s&&(s=m),l.beginPath(),l.moveTo(t+i,n),l.arcTo(t+r,n,t+r,n+a,o),l.arcTo(t+r,n+a,t,n+a,u),l.arcTo(t,n+a,t,n,s),l.arcTo(t,n,t+r,n,i),l.closePath()}return this._doFill&&l.fill(),this._doStroke&&l.stroke(),this},a.default.Renderer2D.prototype.triangle=function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,a=e[0],i=e[1],o=e[2],u=e[3],s=e[4],l=e[5];if(n&&!r){if(this._getFill()===c)return this}else if(!n&&r&&this._getStroke()===c)return this;t.beginPath(),t.moveTo(a,i),t.lineTo(o,u),t.lineTo(s,l),t.closePath(),n&&t.fill(),r&&t.stroke()},a.default.Renderer2D.prototype.endShape=function(e,t,n,r,a,o,u){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var s,c,l,f=e===i.CLOSE;f&&!o&&t.push(t[0]);var d=t.length;if(!n||u!==i.POLYGON&&null!==u)if(!r||u!==i.POLYGON&&null!==u)if(!a||u!==i.POLYGON&&null!==u)if(u===i.POINTS)for(c=0;c<d;c++)s=t[c],this._doStroke&&this._pInst.stroke(s[6]),this._pInst.point(s[0],s[1]);else if(u===i.LINES)for(c=0;c+1<d;c+=2)s=t[c],this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(s[0],s[1],t[c+1][0],t[c+1][1]);else if(u===i.TRIANGLES)for(c=0;c+2<d;c+=3)s=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(s[0],s[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke());else if(u===i.TRIANGLE_STRIP)for(c=0;c+1<d;c++)s=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(s[0],s[1]),this._doStroke&&this._pInst.stroke(t[c+1][6]),this._doFill&&this._pInst.fill(t[c+1][5]),c+2<d&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this._doStroke&&this._pInst.stroke(t[c+2][6]),this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose(f);else if(u===i.TRIANGLE_FAN){if(2<d){for(this.drawingContext.beginPath(),c=2;c<d;c++)s=t[c],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(s[0],s[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),c<d-1&&(this._doFill&&s[5]!==t[c+1][5]||this._doStroke&&s[6]!==t[c+1][6])&&(this._doFill&&(this._pInst.fill(s[5]),this.drawingContext.fill(),this._pInst.fill(t[c+1][5])),this._doStroke&&(this._pInst.stroke(s[6]),this.drawingContext.stroke(),this._pInst.stroke(t[c+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(f)}}else if(u===i.QUADS)for(c=0;c+3<d;c+=4){for(s=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(s[0],s[1]),l=1;l<4;l++)this.drawingContext.lineTo(t[c+l][0],t[c+l][1]);this.drawingContext.lineTo(s[0],s[1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose(f)}else if(u===i.QUAD_STRIP){if(3<d)for(c=0;c+1<d;c+=2)s=t[c],this.drawingContext.beginPath(),c+3<d?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(s[0],s[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(s[0],s[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<d;c++)(s=t[c]).isVert&&(s.moveTo?this.drawingContext.moveTo(s[0],s[1]):this.drawingContext.lineTo(s[0],s[1]));this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose(f)}else{for(this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose(f)}else if(3<d){var h=[],p=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<d;c++)s=t[c],h[0]=[s[0],s[1]],h[1]=[s[0]+(p*t[c+1][0]-p*t[c-1][0])/6,s[1]+(p*t[c+1][1]-p*t[c-1][1])/6],h[2]=[t[c+1][0]+(p*t[c][0]-p*t[c+2][0])/6,t[c+1][1]+(p*t[c][1]-p*t[c+2][1])/6],h[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);f&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose(f)}return o=a=r=n=!1,f&&t.pop(),this},a.default.Renderer2D.prototype.strokeCap=function(e){return e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||(this.drawingContext.lineCap=e),this},a.default.Renderer2D.prototype.strokeJoin=function(e){return e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||(this.drawingContext.lineJoin=e),this},a.default.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},a.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},a.default.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},a.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},a.default.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},a.default.Renderer2D.prototype.bezier=function(e,t,n,r,a,i,o,u){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,a,i,o,u),this._pInst.endShape(),this},a.default.Renderer2D.prototype.curve=function(e,t,n,r,a,i,o,u){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(a,i),this._pInst.curveVertex(o,u),this._pInst.endShape(),this},a.default.Renderer2D.prototype._doFillStrokeClose=function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},a.default.Renderer2D.prototype.applyMatrix=function(e,t,n,r,a,i){this.drawingContext.transform(e,t,n,r,a,i)},a.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},a.default.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},a.default.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},a.default.Renderer2D.prototype.translate=function(e,t){return e instanceof a.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},a.default.Renderer2D.prototype.text=function(e,t,n,r,o){var u;void 0!==r&&this.drawingContext.textBaseline===i.BASELINE&&(u=!0,this.drawingContext.textBaseline=i.TOP);var s=a.default.Renderer.prototype.text.apply(this,arguments);return u&&(this.drawingContext.textBaseline=i.BASELINE),s},a.default.Renderer2D.prototype._renderText=function(e,t,n,r,a){if(!(a<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e},a.default.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},a.default.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t},a.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),a.default.Renderer.prototype.push.apply(this)},a.default.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,a.default.Renderer.prototype.pop.call(this,e)};var l=a.default.Renderer2D;n.default=l},{"../image/filters":57,"./constants":26,"./main":36,"./p5.Renderer":39}],41:[function(e,t,n){"use strict";var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype._promisePreloads=[];var i=!(a.default.prototype.registerPromisePreload=function(e){a.default.prototype._promisePreloads.push(e)});function o(){return{}}a.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this._promisePreloads[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=r.value,s=this,c=u.method,l=u.addCallbacks,f=u.legacyPreloadSetup,d=u.target||this,h=d[c].bind(d);if(d===a.default.prototype){if(i)continue;s=null,h=d[c]}d[c]=this._wrapPromisePreload(s,h,l),f&&(d[f.method]=this._legacyPreloadGenerator(s,f,d[c]))}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i=!0},a.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){var e=this;this._incrementPreload();for(var r=null,a=null,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];if(n)for(var s=o.length-1;0<=s&&!a&&"function"==typeof o[s];s--)a=r,r=o.pop();var c=Promise.resolve(t.apply(this,o));return r&&c.then(r),a&&c.catch(a),c.then((function(){return e._decrementPreload()})),c};return e&&(r=r.bind(e)),r},a.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||o,a=function(){var e=this;this._incrementPreload();var t=r.apply(this,arguments);return n.apply(this,arguments).then((function(n){Object.assign(t,n),e._decrementPreload()})),t};return e&&(a=a.bind(e)),a}},{"./main":36}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("./constants"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var s="defaultCanvas0";a.default.prototype.createCanvas=function(e,t,n){a.default._validateParameters("createCanvas",arguments);var r,o=n||i.P2D;if(o===i.WEBGL){if(r=document.getElementById(s)){r.parentNode.removeChild(r);var u=this._renderer;this._elements=this._elements.filter((function(e){return e!==u}))}(r=document.createElement("canvas")).id=s,r.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)r=this.canvas;else{r=document.createElement("canvas");for(var c=0;document.getElementById("defaultCanvas".concat(c));)c++;s="defaultCanvas".concat(c),r.id=s,r.classList.add("p5Canvas")}if(this._setupDone||(r.dataset.hidden=!0,r.style.visibility="hidden"),this._userNode)this._userNode.appendChild(r);else{if(0===document.getElementsByTagName("main").length){var l=document.createElement("main");document.body.appendChild(l)}document.getElementsByTagName("main")[0].appendChild(r)}return o===i.WEBGL?(this._setProperty("_renderer",new a.default.RendererGL(r,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new a.default.Renderer2D(r,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},a.default.prototype.resizeCanvas=function(e,t,n){if(a.default._validateParameters("resizeCanvas",arguments),this._renderer){var r={};for(var i in this.drawingContext){var o=this.drawingContext[i];"object"!==u(o)&&"function"!=typeof o&&(r[i]=o)}for(var s in this._renderer.resize(e,t),this.width=e,this.height=t,r)try{this.drawingContext[s]=r[s]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},a.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},a.default.prototype.createGraphics=function(e,t,n){return a.default._validateParameters("createGraphics",arguments),new a.default.Graphics(e,t,n,this)},a.default.prototype.blendMode=function(e){a.default._validateParameters("blendMode",arguments),e===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=i.BLEND),this._renderer.blendMode(e)};var c=a.default;n.default=c},{"../webgl/p5.RendererGL":90,"./constants":26,"./main":36,"./p5.Graphics":38,"./p5.Renderer2D":40}],43:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants")),o=s(e("../helpers"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),a.default.prototype._normalizeArcAngles=function(e,t,n,r,a){var o;return e-=i.TWO_PI*Math.floor(e/i.TWO_PI),t-=i.TWO_PI*Math.floor(t/i.TWO_PI),o=Math.min(Math.abs(e-t),i.TWO_PI-Math.abs(e-t)),a&&(e=e<=i.HALF_PI?Math.atan(n/r*Math.tan(e)):e>i.HALF_PI&&e<=3*i.HALF_PI?Math.atan(n/r*Math.tan(e))+i.PI:Math.atan(n/r*Math.tan(e))+i.TWO_PI,t=t<=i.HALF_PI?Math.atan(n/r*Math.tan(t)):t>i.HALF_PI&&t<=3*i.HALF_PI?Math.atan(n/r*Math.tan(t))+i.PI:Math.atan(n/r*Math.tan(t))+i.TWO_PI),t<e&&(t+=i.TWO_PI),{start:e,stop:t,correspondToSamePoint:o<1e-5}},a.default.prototype.arc=function(e,t,n,r,i,u,s,c){if(a.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(i===u)return this;i=this._toRadians(i),u=this._toRadians(u),n=Math.abs(n),r=Math.abs(r);var l=o.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),f=this._normalizeArcAngles(i,u,l.w,l.h,!0);return f.correspondToSamePoint?this._renderer.ellipse([l.x,l.y,l.w,l.h,c]):(this._renderer.arc(l.x,l.y,l.w,l.h,f.start,f.stop,s,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[l.x,l.y,l.w,l.h,f.start,f.stop,s])),this},a.default.prototype.ellipse=function(e,t,n,r,i){return a.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},a.default.prototype.circle=function(){a.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,e)},a.default.prototype._renderEllipse=function(e,t,n,r,a){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r));var i=o.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode);return this._renderer.ellipse([i.x,i.y,i.w,i.h,a]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[i.x,i.y,i.w,i.h]),this},a.default.prototype.line=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("line",t),this._renderer._doStroke&&(r=this._renderer).line.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",t),this},a.default.prototype.point=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("point",t),this._renderer._doStroke&&(1===t.length&&t[0]instanceof a.default.Vector?this._renderer.point.call(this._renderer,t[0].x,t[0].y,t[0].z):((r=this._renderer).point.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",t))),this},a.default.prototype.quad=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("quad",t),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&t.length<=12?this._renderer.quad.call(this._renderer,t[0],t[1],0,t[2],t[3],0,t[4],t[5],0,t[6],t[7],0,t[8],t[9]):((r=this._renderer).quad.apply(r,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",t))),this},a.default.prototype.rect=function(){return a.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},a.default.prototype.square=function(e,t,n,r,i,o,u){return a.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,i,o,u)},a.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=o.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},a.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this};var c=a.default;n.default=c},{"../constants":26,"../friendly_errors/fes_core":28,"../friendly_errors/file_errors":29,"../friendly_errors/validate_params":31,"../helpers":32,"../main":36}],44:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype.ellipseMode=function(e){return i.default._validateParameters("ellipseMode",arguments),e!==o.CORNER&&e!==o.CORNERS&&e!==o.RADIUS&&e!==o.CENTER||(this._renderer._ellipseMode=e),this},i.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(e){return i.default._validateParameters("rectMode",arguments),e!==o.CORNER&&e!==o.CORNERS&&e!==o.RADIUS&&e!==o.CENTER||(this._renderer._rectMode=e),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(e){return i.default._validateParameters("strokeCap",arguments),e!==o.ROUND&&e!==o.SQUARE&&e!==o.PROJECT||this._renderer.strokeCap(e),this},i.default.prototype.strokeJoin=function(e){return i.default._validateParameters("strokeJoin",arguments),e!==o.ROUND&&e!==o.BEVEL&&e!==o.MITER||this._renderer.strokeJoin(e),this},i.default.prototype.strokeWeight=function(e){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var s=i.default;n.default=s},{"../constants":26,"../main":36}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../main"))&&r.__esModule?r:{default:r};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),a.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},a.default.prototype.bezierDetail=function(e){return a.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},a.default.prototype.bezierPoint=function(e,t,n,r,i){a.default._validateParameters("bezierPoint",arguments);var o=1-i;return Math.pow(o,3)*e+3*Math.pow(o,2)*i*t+3*o*Math.pow(i,2)*n+Math.pow(i,3)*r},a.default.prototype.bezierTangent=function(e,t,n,r,i){a.default._validateParameters("bezierTangent",arguments);var o=1-i;return 3*r*Math.pow(i,2)-3*n*Math.pow(i,2)+6*n*o*i-6*t*o*i+3*t*Math.pow(o,2)-3*e*Math.pow(o,2)},a.default.prototype.curve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return a.default._validateParameters("curve",t),this._renderer._doStroke&&(r=this._renderer).curve.apply(r,t),this},a.default.prototype.curveDetail=function(e){return a.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},a.default.prototype.curveTightness=function(e){return a.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},a.default.prototype.curvePoint=function(e,t,n,r,i){a.default._validateParameters("curvePoint",arguments);var o=i*i*i,u=i*i;return e*(-.5*o+u-.5*i)+t*(1.5*o-2.5*u+1)+n*(-1.5*o+2*u+.5*i)+r*(.5*o-.5*u)},a.default.prototype.curveTangent=function(e,t,n,r,i){a.default._validateParameters("curveTangent",arguments);var o=i*i;return e*(-3*o/2+2*i-.5)+t*(9*o/2-5*i)+n*(-9*o/2+4*i+.5)+r*(3*o/2-i)};var i=a.default;n.default=i},{"../friendly_errors/fes_core":28,"../friendly_errors/file_errors":29,"../friendly_errors/validate_params":31,"../main":36}],46:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var s=null,c=[],l=[],f=!1,d=!1,h=!1,p=!1,v=!0;i.default.prototype.beginContour=function(){return l=[],p=!0,this},i.default.prototype.beginShape=function(e){var t;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(s=e===o.POINTS||e===o.LINES||e===o.TRIANGLES||e===o.TRIANGLE_FAN||e===o.TRIANGLE_STRIP||e===o.QUADS||e===o.QUAD_STRIP?e:null,c=[],l=[]),this},i.default.prototype.bezierVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;if(i.default._validateParameters("bezierVertex",t),this._renderer.isP3D)(r=this._renderer).bezierVertex.apply(r,t);else if(0===c.length)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{f=!0;for(var a=[],o=0;o<t.length;o++)a[o]=t[o];a.isVert=!1,p?l.push(a):c.push(a)}return this},i.default.prototype.curveVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;return i.default._validateParameters("curveVertex",t),this._renderer.isP3D?(r=this._renderer).curveVertex.apply(r,t):(d=!0,this.vertex(t[0],t[1])),this},i.default.prototype.endContour=function(){var e=l[0].slice();e.isVert=l[0].isVert,e.moveTo=!1,l.push(e),v&&(c.push(c[0]),v=!1);for(var t=0;t<l.length;t++)c.push(l[t]);return this},i.default.prototype.endShape=function(e){if(i.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,d,f,h,p,s);else{if(0===c.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===o.CLOSE;t&&!p&&c.push(c[0]),this._renderer.endShape(e,c,d,f,h,p,s),v=!(p=h=f=d=!1),t&&c.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(i.default._validateParameters("quadraticVertex",t),this._renderer.isP3D){var r;(r=this._renderer).quadraticVertex.apply(r,t)}else{if(this._contourInited){var a={};return a.x=t[0],a.y=t[1],a.x3=t[2],a.y3=t[3],a.type=o.QUADRATIC,this._contourVertices.push(a),this}if(0<c.length){h=!0;for(var u=[],s=0;s<t.length;s++)u[s]=t[s];u.isVert=!1,p?l.push(u):c.push(u)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(e,t,n,r,a){if(this._renderer.isP3D){var i;(i=this._renderer).vertex.apply(i,arguments)}else{var o=[];o.isVert=!0,o[0]=e,o[1]=t,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),n&&(o.moveTo=n),p?(0===l.length&&(o.moveTo=!0),l.push(o)):c.push(o)}return this};var m=i.default;n.default=m},{"../constants":26,"../main":36}],47:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var e=Object.keys,t=Object.defineProperty,n="function"==typeof Symbol&&"symbol"===r(Symbol()),a=Object.prototype.propertyIsEnumerable,i=function(e){return function(t){return a.call(e,t)}};t(Object,"assign",{value:function(t,r){if(null==t)throw new TypeError("target must be an object");var a,o,u,s,c=Object(t);for(a=1;a<arguments.length;++a)for(o=Object(arguments[a]),s=e(o),n&&Object.getOwnPropertySymbols&&s.push.apply(s,Object.getOwnPropertySymbols(o).filter(i(o))),u=0;u<s.length;++u)c[s[u]]=o[s[u]];return c},configurable:!0,enumerable:!1,writable:!0})}}()},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};a.default.prototype.noLoop=function(){this._loop=!1},a.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},a.default.prototype.isLooping=function(){return this._loop},a.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},a.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},a.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e);(isNaN(t)||t<1)&&(t=1);var n=this._isGlobal?window:this;if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=function(e){e.call(n)},a=0;a<t;a++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),n._registeredMethods.pre.forEach(r),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}n._registeredMethods.post.forEach(r)}}}};var i=a.default;n.default=i},{"./main":36}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("./main"))&&r.__esModule?r:{default:r};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.default.prototype.applyMatrix=function(){var e,t;return Array.isArray(arguments[0])?(e=this._renderer).applyMatrix.apply(e,i(arguments[0])):(t=this._renderer).applyMatrix.apply(t,arguments),this},a.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},a.default.prototype.rotate=function(e,t){return a.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},a.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),a.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},a.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),a.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},a.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),a.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},a.default.prototype.scale=function(e,t,n){if(a.default._validateParameters("scale",arguments),e instanceof a.default.Vector){var r=e;e=r.x,t=r.y,n=r.z}else if(e instanceof Array){var i=e;e=i[0],t=i[1],n=i[2]||1}return isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,e,t,n),this},a.default.prototype.shearX=function(e){a.default._validateParameters("shearX",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},a.default.prototype.shearY=function(e){a.default._validateParameters("shearY",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},a.default.prototype.translate=function(e,t,n){return a.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this};var o=a.default;n.default=o},{"./main":36}],50:[function(e,t,n){"use strict";var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=o(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof a.default.Color?n="p5.Color":t instanceof a.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t);var r="".concat(e,"p5TypeID");localStorage.setItem(r,n)},a.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,i(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,i(t))}return t},a.default.prototype.clearStorage=function(){localStorage.clear()},a.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":36}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.createStringDict=function(e,t){return a.default._validateParameters("createStringDict",arguments),new a.default.StringDict(e,t)},a.default.prototype.createNumberDict=function(e,t){return a.default._validateParameters("createNumberDict",arguments),new a.default.NumberDict(e,t)},a.default.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},a.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},a.default.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},a.default.TypedDict.prototype.get=function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))},a.default.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},a.default.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},a.default.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},a.default.TypedDict.prototype.clear=function(){this.data={}},a.default.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]},a.default.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))},a.default.TypedDict.prototype.saveTable=function(e){var t="";for(var n in this.data)t+="".concat(n,",").concat(this.data[n],"\n");var r=new Blob([t],{type:"text/csv"});a.default.prototype.downloadFile(r,e||"mycsv","csv")},a.default.TypedDict.prototype.saveJSON=function(e,t){a.default.prototype.saveJSON(this.data,e,t)},a.default.TypedDict.prototype._validate=function(e){return!0},a.default.StringDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.TypedDict.apply(this,t)},a.default.StringDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.StringDict.prototype._validate=function(e){return"string"==typeof e},a.default.NumberDict=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default.TypedDict.apply(this,t)},a.default.NumberDict.prototype=Object.create(a.default.TypedDict.prototype),a.default.NumberDict.prototype._validate=function(e){return"number"==typeof e},a.default.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},a.default.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},a.default.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t=this.data[Object.keys(this.data)[0]];for(var n in this.data)this.data[n]*e<t*e&&(t=this.data[n]);return t},a.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},a.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},a.default.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t},a.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},a.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var i=a.default.TypedDict;n.default=i},{"../core/main":36}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){(t._userNode?t._userNode:document.body).appendChild(e);var r=n?new a.default.MediaElement(e,t):new a.default.Element(e,t);return t._elements.push(r),r}function u(e,t,n,r){var a=document.createElement(t);"string"==typeof(n=n||"")&&(n=[n]);var i=!0,u=!1,s=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value,d=document.createElement("source");d.setAttribute("src",f),a.appendChild(d)}}catch(e){u=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(u)throw s}}"function"==typeof r&&a.addEventListener("canplaythrough",(function e(){r(),a.removeEventListener("canplaythrough",e)}));var h=o(a,e,!0);return h.loadedmetadata=!1,a.addEventListener("loadedmetadata",(function(){h.width=a.videoWidth,h.height=a.videoHeight,0===h.elt.width&&(h.elt.width=a.videoWidth),0===h.elt.height&&(h.elt.height=a.videoHeight),h.presetPlaybackRate&&(h.elt.playbackRate=h.presetPlaybackRate,delete h.presetPlaybackRate),h.loadedmetadata=!0})),h}function s(e,t,n,r){this.callback=e,this.time=t,this.id=n,this.val=r}a.default.prototype.select=function(e,t){a.default._validateParameters("select",arguments);var n=this._getContainer(t).querySelector(e);return n?this._wrapElement(n):null},a.default.prototype.selectAll=function(e,t){a.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var i=0;i<r.length;i++){var o=this._wrapElement(r[i]);n.push(o)}return n},a.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof a.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},a.default.prototype._wrapElement=function(e){var t=Array.prototype.slice.call(e.children);if("INPUT"!==e.tagName||"checkbox"!==e.type)return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new a.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new a.default.Element(e,this)):0<t.length&&t.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))?this.createRadio(new a.default.Element(e,this)):new a.default.Element(e,this);var n=new a.default.Element(e,this);return n.checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},n},a.default.prototype.removeElements=function(e){a.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},a.default.Element.prototype.changed=function(e){return a.default.Element._adjustListener("change",e,this),this},a.default.Element.prototype.input=function(e){return a.default.Element._adjustListener("input",e,this),this},a.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,o(t,this)},a.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,o(t,this)},a.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,o(t,this)},a.default.prototype.createImg=function(){a.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=o(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},a.default.prototype.createA=function(e,t,n){a.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),o(r,this)},a.default.prototype.createSlider=function(e,t,n,r){a.default._validateParameters("createSlider",arguments);var i=document.createElement("input");return i.type="range",i.min=e,i.max=t,0===r?i.step=1e-18:r&&(i.step=r),"number"==typeof n&&(i.value=n),o(i,this)},a.default.prototype.createButton=function(e,t){a.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),o(n,this)},a.default.prototype.createCheckbox=function(){a.default._validateParameters("createCheckbox",arguments);var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox",e.appendChild(t);var n=o(e,this);if(n.checked=function(){var e=n.elt.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!!arguments[0]}return n},this.value=function(e){return n.value=e,this},arguments[0]){var r=Math.random().toString(36).slice(2),i=document.createElement("label");t.setAttribute("id",r),i.htmlFor=r,n.value(arguments[0]),i.appendChild(document.createTextNode(arguments[0])),e.appendChild(i)}return arguments[1]&&(t.checked=!0),n},a.default.prototype.createSelect=function(){var e;a.default._validateParameters("createSelect",arguments);var t=arguments[0];if(t instanceof a.default.Element&&t.elt instanceof HTMLSelectElement)e=t,this.elt=t.elt;else if(t instanceof HTMLSelectElement)e=o(t,this),this.elt=t;else{var n=document.createElement("select");t&&"boolean"==typeof t&&n.setAttribute("multiple","true"),e=o(n,this),this.elt=n}return e.option=function(e,t){var n;if(void 0!==e){for(var r=0;r<this.elt.length;r+=1)if(this.elt[r].innerHTML===e){n=r;break}if(void 0!==n)!1===t?this.elt.remove(n):this.elt[n].value=t;else{var a=document.createElement("option");a.innerHTML=e,a.value=void 0===t?e:t,this.elt.appendChild(a),this._pInst._elements.push(a)}}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=this.elt.selectedOptions[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n.push(s.value)}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e},a.default.prototype.createRadio=function(){var e,t,n=arguments[0];n instanceof HTMLDivElement||n instanceof HTMLSpanElement?(e=n,"string"==typeof arguments[1]&&(t=arguments[1])):("string"==typeof n&&(t=n),e=document.createElement("div"));var r=o(this.elt=e,this);function a(e){return e instanceof HTMLInputElement&&"radio"===e.type}function i(e){return e.nextElementSibling instanceof HTMLLabelElement}return r._name=t||"radioOption",r._getOptionsArray=function(){return Array.from(this.elt.children).filter(a)},r.option=function(e,t){var n,a,o=!0,u=!1,s=void 0;try{for(var c,l=r._getOptionsArray()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;if(f.value===e){n=f;break}}}catch(e){u=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw s}}return void 0===n&&((n=document.createElement("input")).setAttribute("type","radio"),n.setAttribute("value",e),this.elt.appendChild(n)),i(n)?a=n.nextElementSibling:(a=document.createElement("label"),n.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===t?e:t,n.setAttribute("name",r._name),n},r.remove=function(e){var t=!0,n=!1,a=void 0;try{for(var o,u=r._getOptionsArray()[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var s=o.value;if(s.value===e)return i(s)&&s.nextElementSibling.remove(),void s.remove()}}catch(e){n=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw a}}},r.value=function(){var e="",t=!0,n=!1,a=void 0;try{for(var i,o=r._getOptionsArray()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;if(u.checked){e=u.value;break}}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e},r.selected=function(e){var t=null;if(void 0===e){var n=!0,a=!1,i=void 0;try{for(var o,u=r._getOptionsArray()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;if(s.checked){t=s;break}}}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}}else{var c=!0,l=!1,f=void 0;try{for(var d,h=r._getOptionsArray()[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;p.value===e&&(p.setAttribute("checked",!0),t=p)}}catch(e){l=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw f}}}return t},r.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,n=!1,a=void 0;try{for(var i,o=r._getOptionsArray()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.setAttribute("disabled",e)}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}},r},a.default.prototype.createColorPicker=function(e){a.default._validateParameters("createColorPicker",arguments);var t,n=document.createElement("input");return n.type="color",e?e instanceof a.default.Color?n.value=e.toString("#rrggbb"):(a.default.prototype._colorMode="rgb",a.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},n.value=a.default.prototype.color(e).toString("#rrggbb")):n.value="#000000",(t=o(n,this)).color=function(){return e&&(e.mode&&(a.default.prototype._colorMode=e.mode),e.maxes&&(a.default.prototype._colorMaxes=e.maxes)),a.default.prototype.color(this.elt.value)},t},a.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text";a.default._validateParameters("createInput",arguments);var n=document.createElement("input");return n.setAttribute("value",e),n.setAttribute("type",t),o(n,this)},a.default.prototype.createFileInput=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(a.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var n=document.createElement("input");return n.setAttribute("type","file"),t&&n.setAttribute("multiple",!0),n.addEventListener("change",(function(t){var n=!0,r=!1,i=void 0;try{for(var o,u=t.target.files[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;a.default.File._load(s,e)}}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}),!1),o(n,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},a.default.prototype.createVideo=function(e,t){return a.default._validateParameters("createVideo",arguments),u(this,"video",e,t)},a.default.prototype.createAudio=function(e,t){return a.default._validateParameters("createAudio",arguments),u(this,"audio",e,t)},a.default.prototype.VIDEO="video",a.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),a.default.prototype.createCapture=function(){if(a.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var e,t,n=!0,r=!0,u=!0,s=!1,c=void 0;try{for(var l,f=arguments[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var d=l.value;d===a.default.prototype.VIDEO?r=!1:d===a.default.prototype.AUDIO?n=!1:"object"===i(d)?e=d:"function"==typeof d&&(t=d)}}catch(e){s=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}e=e||{video:n,audio:r};var h=document.createElement("video");h.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(e).then((function(t){try{"srcObject"in h?h.srcObject=t:h.src=window.URL.createObjectURL(t)}catch(e){h.src=t}}),console.log);var p=o(h,this,!0);return p.loadedmetadata=!1,h.addEventListener("loadedmetadata",(function(){h.play(),h.width?(p.width=h.width,p.height=h.height):(p.width=p.elt.width=h.videoWidth,p.height=p.elt.height=h.videoHeight),p.loadedmetadata=!0,t&&t(h.srcObject)})),p},a.default.prototype.createElement=function(e,t){a.default._validateParameters("createElement",arguments);var n=document.createElement(e);return void 0!==t&&(n.innerHTML=t),o(n,this)},a.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},a.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},a.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},a.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},a.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof a.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},a.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,a={x:this.elt.offsetLeft,y:this.elt.offsetTop};n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var i=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),o=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(i/2+this.parent().offsetLeft,o/2+this.parent().offsetTop):"horizontal"===e?this.position(i/2+this.parent().offsetLeft,a.y):"vertical"===e&&this.position(a.x,o/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},a.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},a.default.Element.prototype.position=function(){if(0===arguments.length)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var e="absolute";return"static"!==arguments[2]&&"fixed"!==arguments[2]&&"relative"!==arguments[2]&&"sticky"!==arguments[2]&&"initial"!==arguments[2]&&"inherit"!==arguments[2]||(e=arguments[2]),this.elt.style.position=e,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},a.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=e,this},a.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},a.default.Element.prototype.style=function(e,t){if(t instanceof a.default.Color&&(t="rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")"),void 0===t){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var i=n[r].split(":");i[0]&&i[1]&&(this.elt.style[i[0].trim()]=i[1].trim())}}else if(this.elt.style[e]=t,"width"===e||"height"===e||"left"===e||"top"===e){var o=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/\D+/g,"");this[e]=parseInt(o,10)}return this},a.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},a.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},a.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},a.default.Element.prototype.show=function(){return this.elt.style.display="block",this},a.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},a.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,i=a.default.prototype.AUTO;if(n!==i||r!==i){if(n===i?n=t*this.width/this.height:r===i&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var o,u={},s=this.elt.getContext("2d");for(o in s)u[o]=s[o];for(o in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),u)this.elt.getContext("2d")[o]=u[o]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},a.default.Element.prototype.remove=function(){if(this instanceof a.default.MediaElement){this.stop();var e=this.elt.srcObject;null!==e&&e.getTracks().forEach((function(e){e.stop()}))}var t=this._pInst._elements.indexOf(this);for(var n in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(n,this._events[n]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},a.default.Element.prototype.drop=function(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var n=function(e){e.preventDefault()};this.elt.addEventListener("dragover",n),this.elt.addEventListener("dragleave",n)}a.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n);for(var r=n.dataTransfer.files,i=0;i<r.length;i++){var o=r[i];a.default.File._load(o,e)}}),this)}else console.log("The File APIs are not fully supported in this browser.");return this},a.default.MediaElement=function(e,t){a.default.Element.call(this,e,t);var n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var a=document.createElement("source");a.src=t,e.appendChild(a),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}},a.default.MediaElement.prototype=Object.create(a.default.Element.prototype),a.default.MediaElement.prototype.play=function(){var e,t=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?a.default._friendlyAutoplayError(t.src):console.error("Media play method encountered an unexpected error",e)})),this},a.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},a.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},a.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},a.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},a.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var e=this,t=setTimeout((function(){return a.default._friendlyAutoplayError(e.src)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})},a.default.MediaElement.prototype.autoplay=function(e){var t=this,n=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",e),e&&!n){var r=function(){return t._setupAutoplayFailDetection()};4===this.elt.readyState?r():this.elt.addEventListener("canplay",r,{passive:!0,once:!0})}return this},a.default.MediaElement.prototype.volume=function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e},a.default.MediaElement.prototype.speed=function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e},a.default.MediaElement.prototype.time=function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)},a.default.MediaElement.prototype.duration=function(){return this.elt.duration},a.default.MediaElement.prototype.pixels=[],a.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},a.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},a.default.MediaElement.prototype.updatePixels=function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this},a.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),a.default.Renderer2D.prototype.get.apply(this,arguments)},a.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),a.default.Renderer2D.prototype._getPixel.apply(this,arguments)},a.default.MediaElement.prototype.set=function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),a.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))},a.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),a.default.prototype.copy.apply(this,arguments)},a.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),a.default.Image.prototype.mask.apply(this,arguments)},a.default.MediaElement.prototype.isModified=function(){return this._modified},a.default.MediaElement.prototype.setModified=function(e){this._modified=e},a.default.MediaElement.prototype.onended=function(e){return this._onended=e,this},a.default.MediaElement.prototype.connect=function(e){var t,n;if("function"==typeof a.default.prototype.getAudioContext)t=a.default.prototype.getAudioContext(),n=a.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)},a.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},a.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},a.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},a.default.MediaElement.prototype.addCue=function(e,t,n){var r=this._cueIDCounter++,a=new s(t,e,r,n);return this._cues.push(a),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r},a.default.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},a.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},a.default.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e},a.default.File=function(e,t){this.file=e,this._pInst=t;var n=e.type.split("/");this.type=n[0],this.subtype=n[1],this.name=e.name,this.size=e.size,this.data=void 0},a.default.File._createLoader=function(e,t){var n=new FileReader;return n.onload=function(n){var r=new a.default.File(e);if("application/json"===r.file.type)r.data=JSON.parse(n.target.result);else if("text/xml"===r.file.type){var i=(new DOMParser).parseFromString(n.target.result,"text/xml");r.data=new a.default.XML(i.documentElement)}else r.data=n.target.result;t(r)},n},a.default.File._load=function(e,t){if(/^text\//.test(e.type)||"application/json"===e.type)a.default.File._createLoader(e,t).readAsText(e);else if(/^(video|audio)\//.test(e.type)){var n=new a.default.File(e);n.data=URL.createObjectURL(e),t(n)}else a.default.File._createLoader(e,t).readAsDataURL(e)};var c=a.default;n.default=c},{"../core/main":36}],53:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var s=i.default.prototype.pRotationZ=0,c=0,l=0,f="clockwise",d="clockwise",h="clockwise";i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0;var p=.5,v=30;i.default.prototype.setMoveThreshold=function(e){i.default._validateParameters("setMoveThreshold",arguments),p=e},i.default.prototype.setShakeThreshold=function(e){i.default._validateParameters("setShakeThreshold",arguments),v=e},i.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===o.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n=this._isGlobal?window:this;if("function"==typeof n.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>p||Math.abs(this.accelerationY-this.pAccelerationY)>p||Math.abs(this.accelerationZ-this.pAccelerationZ)>p)&&n.deviceMoved(),"function"==typeof n.deviceTurned){var r=this.rotationX+180,a=this.pRotationX+180,i=s+180;0<r-a&&r-a<270||r-a<-270?f="clockwise":(r-a<0||270<r-a)&&(f="counter-clockwise"),f!==this.pRotateDirectionX&&(i=r),90<Math.abs(r-i)&&Math.abs(r-i)<270&&(i=r,this._setProperty("turnAxis","X"),n.deviceTurned()),this.pRotateDirectionX=f,s=i-180;var o=this.rotationY+180,u=this.pRotationY+180,m=c+180;0<o-u&&o-u<270||o-u<-270?d="clockwise":(o-u<0||270<o-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(m=o),90<Math.abs(o-m)&&Math.abs(o-m)<270&&(m=o,this._setProperty("turnAxis","Y"),n.deviceTurned()),this.pRotateDirectionY=d,c=m-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?h="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(h="counter-clockwise"),h!==this.pRotateDirectionZ&&(l=this.rotationZ),90<Math.abs(this.rotationZ-l)&&Math.abs(this.rotationZ-l)<270&&(l=this.rotationZ,this._setProperty("turnAxis","Z"),n.deviceTurned()),this.pRotateDirectionZ=h,this._setProperty("turnAxis",void 0)}"function"==typeof n.deviceShaken&&(null!==this.pAccelerationX&&(e=Math.abs(this.accelerationX-this.pAccelerationX),t=Math.abs(this.accelerationY-this.pAccelerationY)),v<e+t&&n.deviceShaken())};var m=i.default;n.default=m},{"../core/constants":26,"../core/main":36}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.isKeyPressed=!1,a.default.prototype.keyIsPressed=!1,a.default.prototype.key="",a.default.prototype.keyCode=0,a.default.prototype._onkeydown=function(e){if(!this._downKeys[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"!=typeof t.keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault()}},a.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},a.default.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyTyped&&!1===t.keyTyped(e)&&e.preventDefault()}},a.default.prototype._onblur=function(e){this._downKeys={}},a.default.prototype.keyIsDown=function(e){return a.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},a.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1};var i=a.default;n.default=i},{"../core/main":36}],55:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement&&(!e.touches||0<e.touches.length)){var t=function(e,t,n,r){r&&!r.clientX&&(r.touches?r=r.touches[0]:r.changedTouches&&(r=r.changedTouches[0]));var a=e.getBoundingClientRect(),i=e.scrollWidth/t||1,o=e.scrollHeight/n||1;return{x:(r.clientX-a.left)/i,y:(r.clientY-a.top)/o,winX:r.clientX,winY:r.clientY,id:r.identifier}}(this._curElement.elt,this.width,this.height,e);this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",o.CENTER):2===e.button?this._setProperty("mouseButton",o.RIGHT):this._setProperty("mouseButton",o.LEFT)},i.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},i.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},i.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},i.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},i.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n,r,a){var i=4<arguments.length&&void 0!==a?a:0,o=e.getBoundingClientRect(),u=e.scrollWidth/t||1,s=e.scrollHeight/n||1,c=r.touches[i]||r.changedTouches[i];return{x:(c.clientX-o.left)/u,y:(c.clientY-o.top)/s,winX:c.clientX,winY:c.clientY,id:c.identifier}}a.default.prototype.touches=[],a.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=i(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},a.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},a.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},a.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()};var o=a.default;n.default=o},{"../core/main":36}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a,i,o,u={};function s(e,t){for(var n,s,c,l,f,d,h,p,v,m,g=u._toPixels(e),b=e.width,y=e.height,x=b*y,_=new Int32Array(x),w=0;w<x;w++)_[w]=u._getARGB(g,w);var k,O,S,j,E=new Int32Array(x),C=new Int32Array(x),A=new Int32Array(x),T=new Int32Array(x),N=0;for(function(e){var t=3.5*e|0;if(r!==(t=t<1?1:t<248?t:248)){a=1+(r=t)<<1,i=new Int32Array(a),o=new Array(a);for(var n=0;n<a;n++)o[n]=new Int32Array(256);for(var u,s,c,l,f=1,d=t-1;f<t;f++){i[t+f]=i[d]=s=d*d,c=o[t+f],l=o[d--];for(var h=0;h<256;h++)c[h]=l[h]=s*h}u=i[t]=t*t,c=o[t];for(var p=0;p<256;p++)c[p]=u*p}}(t),O=0;O<y;O++){for(k=0;k<b;k++){if(l=c=s=f=n=0,(d=k-r)<0)m=-d,d=0;else{if(b<=d)break;m=0}for(S=m;S<a&&!(b<=d);S++){var M=_[d+N];f+=(j=o[S])[(-16777216&M)>>>24],s+=j[(16711680&M)>>16],c+=j[(65280&M)>>8],l+=j[255&M],n+=i[S],d++}E[h=N+k]=f/n,C[h]=s/n,A[h]=c/n,T[h]=l/n}N+=b}for(v=(p=-r)*b,O=N=0;O<y;O++){for(k=0;k<b;k++){if(l=c=s=f=n=0,p<0)m=h=-p,d=k;else{if(y<=p)break;m=0,h=p,d=k+v}for(S=m;S<a&&!(y<=h);S++)f+=(j=o[S])[E[d]],s+=j[C[d]],c+=j[A[d]],l+=j[T[d]],n+=i[S],h++,d+=b;_[k+N]=f/n<<24|s/n<<16|c/n<<8|l/n}N+=b,v+=b,p++}u._setPixels(g,_)}u._toPixels=function(e){return e instanceof ImageData?e.data:e.getContext("2d").getImageData(0,0,e.width,e.height).data},u._getARGB=function(e,t){var n=4*t;return e[3+n]<<24&4278190080|e[n]<<16&16711680|e[1+n]<<8&65280|255&e[2+n]},u._setPixels=function(e,t){for(var n=0,r=0,a=e.length;r<a;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[n+1]=(65280&t[r])>>>8,e[n+2]=255&t[r],e[n+3]=(4278190080&t[r])>>>24},u._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},u._createImageData=function(e,t){return u._tmpCanvas=document.createElement("canvas"),u._tmpCtx=u._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},u.apply=function(e,t,n){var r=e.getContext("2d"),a=r.getImageData(0,0,e.width,e.height),i=t(a,n);i instanceof ImageData?r.putImageData(i,0,0,0,0,e.width,e.height):r.putImageData(a,0,0,0,0,e.width,e.height)},u.threshold=function(e,t){var n=u._toPixels(e);void 0===t&&(t=.5);for(var r=Math.floor(255*t),a=0;a<n.length;a+=4){var i=void 0;i=r<=.2126*n[a]+.7152*n[a+1]+.0722*n[a+2]?255:0,n[a]=n[a+1]=n[a+2]=i}},u.gray=function(e){for(var t=u._toPixels(e),n=0;n<t.length;n+=4){var r=.2126*t[n]+.7152*t[n+1]+.0722*t[n+2];t[n]=t[n+1]=t[n+2]=r}},u.opaque=function(e){for(var t=u._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},u.invert=function(e){for(var t=u._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},u.posterize=function(e,t){var n=u._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,a=0;a<n.length;a+=4){var i=n[a],o=n[a+1],s=n[a+2];n[a]=255*(i*t>>8)/r,n[a+1]=255*(o*t>>8)/r,n[a+2]=255*(s*t>>8)/r}},u.dilate=function(e){for(var t,n,r,a,i,o,s,c,l,f,d,h,p,v,m,g,b,y=u._toPixels(e),x=0,_=y.length?y.length/4:0,w=new Int32Array(_);x<_;)for(n=(t=x)+e.width;x<n;)r=a=u._getARGB(y,x),(s=x-1)<t&&(s=x),n<=(o=x+1)&&(o=x),(c=x-e.width)<0&&(c=0),_<=(l=x+e.width)&&(l=x),h=u._getARGB(y,c),d=u._getARGB(y,s),p=u._getARGB(y,l),(i=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))<(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))&&(a=d,i=m),i<(v=77*((f=u._getARGB(y,o))>>16&255)+151*(f>>8&255)+28*(255&f))&&(a=f,i=v),i<(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))&&(a=h,i=g),i<(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(a=p,i=b),w[x++]=a;u._setPixels(y,w)},u.erode=function(e){for(var t,n,r,a,i,o,s,c,l,f,d,h,p,v,m,g,b,y=u._toPixels(e),x=0,_=y.length?y.length/4:0,w=new Int32Array(_);x<_;)for(n=(t=x)+e.width;x<n;)r=a=u._getARGB(y,x),(s=x-1)<t&&(s=x),n<=(o=x+1)&&(o=x),(c=x-e.width)<0&&(c=0),_<=(l=x+e.width)&&(l=x),h=u._getARGB(y,c),d=u._getARGB(y,s),p=u._getARGB(y,l),(m=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<(i=77*(r>>16&255)+151*(r>>8&255)+28*(255&r))&&(a=d,i=m),(v=77*((f=u._getARGB(y,o))>>16&255)+151*(f>>8&255)+28*(255&f))<i&&(a=f,i=v),(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))<i&&(a=h,i=g),(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<i&&(a=p,i=b),w[x++]=a;u._setPixels(y,w)},u.blur=function(e,t){s(e,t)};var c=u;n.default=c},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("omggif"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){r.default._validateParameters("saveCanvas",arguments);var e,t,n,a,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],i.shift()):arguments[0]instanceof r.default.Element?(e=arguments[0].elt,i.shift()):e=this._curElement&&this._curElement.elt,1<=i.length&&(t=i[0]),2<=i.length&&(n=i[1]),n=n||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:a="image/png";break;case"jpeg":case"jpg":a="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n)}),a)},r.default.prototype.saveGif=function(e,t){var n=e.gifProperties,i=n.loopLimit;1===i?i=null:null===i&&(i=0);for(var u=new Uint8Array(e.width*e.height*n.numFrames),s=[],c={},l=0;l<n.numFrames;l++){for(var f=new Set,d=n.frames[l].image.data,h=d.length,p=new Uint32Array(e.width*e.height),v=0,m=0;v<h;v+=4,m++){var g=d[v+0]<<16|d[v+1]<<8|d[v+2]<<0;f.add(g),p[m]=g}var b=o(f).sort().toString();void 0===c[b]?c[b]={freq:1,frames:[l]}:(c[b].freq+=1,c[b].frames.push(l)),s.push(p)}var y=[],x=Object.keys(c).sort((function(e,t){return c[t].freq-c[e].freq})),_=x[0].split(",").map((function(e){return parseInt(e)}));y=y.concat(c[_].frames);for(var w=new Set(_),k=1;k<x.length;k++){var O=x[k].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!w.has(e)}));if(_.length+O.length<=256){for(var S=0;S<O.length;S++)_.push(O[S]),w.add(O[S]);y=y.concat(c[x[k]].frames)}}y=new Set(y);for(var j={},E=0;E<_.length;E++)j[_[E]]||(j[_[E]]=E);for(var C=1;C<_.length;)C<<=1;_.length=C;for(var A={loop:i,palette:new Uint32Array(_)},T=new a.default.GifWriter(u,e.width,e.height,A),N={},M=function(t){for(var r=!y.has(t),a=r?[]:_,i=new Uint8Array(e.width*e.height),o={},u=new Set,c=0;c<s[t].length;c++){var l=s[t][c];r?(void 0===o[l]&&(o[l]=a.length,a.push(l)),i[c]=o[l]):i[c]=j[l],0<t&&s[t-1][c]!==l&&u.add(l)}var f={},d=a.filter((function(e){return!u.has(e)}));if(0<d.length){var h=d[0],p=r?o[h]:j[h];if(0<t){for(var v=0;v<s[t].length;v++)s[t-1][v]===s[t][v]&&(i[v]=p);f.transparent=p,N.frameOpts.disposal=1}}if(f.delay=n.frames[t].delay/10,r){for(var m=1;m<a.length;)m<<=1;a.length=m,f.palette=new Uint32Array(a)}0<t&&T.addFrame(0,0,e.width,e.height,N.pixelPaletteIndex,N.frameOpts),N={pixelPaletteIndex:i,frameOpts:f}},D=0;D<n.numFrames;D++)M(D);N.frameOpts.disposal=1,T.addFrame(0,0,e.width,e.height,N.pixelPaletteIndex,N.frameOpts);var I=new Blob([u.slice(0,T.end())],{type:"image/gif"});r.default.prototype.downloadFile(I,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,a,i){r.default._validateParameters("saveFrames",arguments);var o=n||3;o=r.default.prototype.constrain(o,0,15),o*=1e3;var u=a||15;u=r.default.prototype.constrain(u,0,22);var s=0,c=r.default.prototype._makeFrame,l=this._curElement.elt,f=[],d=setInterval((function(){f.push(c(e+s,t,l)),s++}),1e3/u);setTimeout((function(){if(clearInterval(d),i)i(f);else{var e=!0,t=!1,n=void 0;try{for(var a,o=f[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var u=a.value;r.default.prototype.downloadFile(u.imageData,u.filename,u.ext)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}f=[]}),o+.01)},r.default.prototype._makeFrame=function(e,t,n){var r,a;if(r=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":a="image/png";break;case"jpeg":case"jpg":a="image/jpeg";break;default:a="image/png"}else t="png",a="image/png";var i=r.toDataURL(a);i=i.replace(a,"image/octet-stream");var o={};return o.imageData=i,o.filename=e,o.ext=t,o};var u=r.default;n.default=u},{"../core/main":36,omggif:11}],59:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("../core/main")),i=l(e("./filters")),o=l(e("../core/helpers")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),s=l(e("omggif"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.loadImage=function(e,t,n){a.default._validateParameters("loadImage",arguments);var r=new a.default.Image(1,1,this),i=this,o=new Request(e,{method:"GET",mode:"cors"});return fetch(e,o).then((function(o){var u=o.headers.get("content-type");if(null===u&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),u&&u.includes("image/gif"))o.arrayBuffer().then((function(e){e&&function(e,t,n,r,i){var o=new s.default.GifReader(e);t.width=t.canvas.width=o.width,t.height=t.canvas.height=o.height;var u=[],c=o.numFrames(),l=new Uint8ClampedArray(t.width*t.height*4);if(1<c){for(var f=function(e,n){try{n.decodeAndBlitFrameRGBA(e,l)}catch(e){a.default._friendlyFileLoadError(8,t.src),"function"==typeof r?r(e):console.error(e)}},d=0;d<c;d++){var h=o.frameInfo(d);1===o.frameInfo(d).disposal&&0<d?t.drawingContext.putImageData(u[d-1].image,0,0):(t.drawingContext.clearRect(0,0,t.width,t.height),l=new Uint8ClampedArray(t.width*t.height*4)),f(d,o);var p=new ImageData(l,t.width,t.height);t.drawingContext.putImageData(p,0,0);var v=h.delay;0===v&&(v=10),u.push({image:t.drawingContext.getImageData(0,0,t.width,t.height),delay:10*v})}var m=o.loopCount();null===m?m=1:0===m&&(m=null),t.drawingContext.putImageData(u[0].image,0,0),t.gifProperties={displayIndex:0,loopLimit:m,loopCount:0,frames:u,numFrames:c,playing:!0,timeDisplayed:0,lastChangeTime:0}}"function"==typeof n&&n(t),i()}(new Uint8Array(e),r,t,n,function(e){i._decrementPreload()}.bind(i))}),(function(e){"function"==typeof n?n(e):console.error(e)}));else{var c=new Image;c.onload=function(){r.width=r.canvas.width=c.width,r.height=r.canvas.height=c.height,r.drawingContext.drawImage(c,0,0),r.modified=!0,"function"==typeof t&&t(r),i._decrementPreload()},c.onerror=function(e){a.default._friendlyFileLoadError(0,c.src),"function"==typeof n?n(e):console.error(e)},0!==e.indexOf("data:image/")&&(c.crossOrigin="Anonymous"),c.src=e}r.modified=!0})),r},a.default.prototype.image=function(e,t,n,r,i,u,s,c,l){a.default._validateParameters("image",arguments);var d=e.width,h=e.height;e.elt&&e.elt.videoWidth&&!e.canvas&&(d=e.elt.videoWidth,h=e.elt.videoHeight);var p=t,v=n,m=r||d,g=i||h,b=u||0,y=s||0,x=c||d,_=l||h;x=f(x,d),_=f(_,h);var w=1;e.elt&&!e.canvas&&e.elt.style.width&&(w=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,w/=parseInt(e.elt.style.width,10)),b*=w,y*=w,_*=w,x*=w;var k=o.default.modeAdjust(p,v,m,g,this._renderer._imageMode);this._renderer.image(e,b,y,x,_,k.x,k.y,k.w,k.h)},a.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},a.default.prototype.noTint=function(){this._renderer._tint=null},a.default.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=i.default._toPixels(e.canvas),n=document.createElement("canvas");n.width=e.canvas.width,n.height=e.canvas.height;for(var r=n.getContext("2d"),a=r.createImageData(e.canvas.width,e.canvas.height),o=a.data,u=0;u<t.length;u+=4){var s=t[u],c=t[u+1],l=t[u+2],f=t[u+3];o[u]=s*this._renderer._tint[0]/255,o[u+1]=c*this._renderer._tint[1]/255,o[u+2]=l*this._renderer._tint[2]/255,o[u+3]=f*this._renderer._tint[3]/255}return r.putImageData(a,0,0),n},a.default.prototype.imageMode=function(e){a.default._validateParameters("imageMode",arguments),e!==u.CORNER&&e!==u.CORNERS&&e!==u.CENTER||(this._renderer._imageMode=e)};var d=a.default;n.default=d},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/helpers":32,"../core/main":36,"./filters":57,omggif:11}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},r.default.Image.prototype._animateGif=function(e){var t=this.gifProperties,n=e._lastFrameTime+e.deltaTime;if(0===t.lastChangeTime&&(t.lastChangeTime=n),t.playing){t.timeDisplayed=n-t.lastChangeTime;var r=t.frames[t.displayIndex].delay;if(t.timeDisplayed>=r){var a=Math.floor(t.timeDisplayed/r);if(t.timeDisplayed=0,t.lastChangeTime=n,t.displayIndex+=a,t.loopCount=Math.floor(t.displayIndex/t.numFrames),null!==t.loopLimit&&t.loopCount>=t.loopLimit)t.playing=!1;else{var i=t.displayIndex%t.numFrames;this.drawingContext.putImageData(t.frames[i].image,0,0),t.displayIndex=i,this.setModified(!0)}}}},r.default.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},r.default.Image.prototype.loadPixels=function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},r.default.Image.prototype.updatePixels=function(e,t,n,a){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,a),this.setModified(!0)},r.default.Image.prototype.get=function(e,t,n,a){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)},r.default.Image.prototype._getPixel=r.default.Renderer2D.prototype._getPixel,r.default.Image.prototype.set=function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)},r.default.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,a=function(e,t){for(var n=0,r=0;r<t.height;r++)for(var a=0;a<t.width;a++){var i=Math.floor(a*e.width/t.width),o=4*(Math.floor(r*e.height/t.height)*e.width+i);t.data[n++]=e.data[o++],t.data[n++]=e.data[o++],t.data[n++]=e.data[o++],t.data[n++]=e.data[o++]}},i=0;i<r.numFrames;i++){var o=this.drawingContext.createImageData(e,t);a(r.frames[i].image,o),r.frames[i].image=o}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},r.default.Image.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)},r.default.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,n=1;e instanceof r.default.Renderer&&(n=e._pInst._pixelDensity);var a=[e,0,0,n*e.width,n*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",r.default.Image.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=t,this.setModified(!0)},r.default.Image.prototype.filter=function(e,t){a.default.apply(this.canvas,a.default[e],t),this.setModified(!0)},r.default.Image.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)},r.default.Image.prototype.setModified=function(e){this._modified=e},r.default.Image.prototype.isModified=function(){return this._modified},r.default.Image.prototype.save=function(e,t){this.gifProperties?r.default.prototype.saveGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)},r.default.Image.prototype.reset=function(){if(this.gifProperties){var e=this.gifProperties;e.playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0)}},r.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var e=this.gifProperties;return e.displayIndex%e.numFrames}},r.default.Image.prototype.setFrame=function(e){if(this.gifProperties){var t=this.gifProperties;e<t.numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},r.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},r.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},r.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},r.default.Image.prototype.delay=function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,a=!1,i=void 0;try{for(var o,u=n.frames[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)o.value.delay=e}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}}}};var o=r.default.Image;n.default=o},{"../core/main":36,"./filters":57}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("../core/main")),a=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a;r.default._validateParameters("blend",t),this._renderer?(a=this._renderer).blend.apply(a,t):r.default.Renderer2D.prototype.blend.apply(this,t)},r.default.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a,i,o,u,s,c,l,f,d;if(r.default._validateParameters("copy",t),9===t.length)a=t[0],i=t[1],o=t[2],u=t[3],s=t[4],c=t[5],l=t[6],f=t[7],d=t[8];else{if(8!==t.length)throw new Error("Signature not supported");a=this,i=t[0],o=t[1],u=t[2],s=t[3],c=t[4],l=t[5],f=t[6],d=t[7]}r.default.prototype._copyHelper(this,a,i,o,u,s,c,l,f,d)},r.default.prototype._copyHelper=function(e,t,n,a,i,o,u,s,c,l){t.loadPixels();var f=t.canvas.width/t.width,d=0,h=0;t._renderer&&t._renderer.isP3D&&(d=t.width/2,h=t.height/2),e._renderer&&e._renderer.isP3D?r.default.RendererGL.prototype.image.call(e._renderer,t,n+d,a+h,i,o,u,s,c,l):e.drawingContext.drawImage(t.canvas,f*(n+d),f*(a+h),f*i,f*o,u,s,c,l)},r.default.prototype.filter=function(e,t){r.default._validateParameters("filter",arguments),void 0!==this.canvas?a.default.apply(this.canvas,a.default[e],t):a.default.apply(this.elt,a.default[e],t)},r.default.prototype.get=function(e,t,n,a){var i;return r.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,a){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,a)};var o=r.default;n.default=o},{"../color/p5.Color":24,"../core/main":36,"./filters":57}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var a=o(e("fetch-jsonp")),i=o(e("file-saver"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n={};if(void 0===(t=t||[]))for(var r=0;r<e.length;r++)t[r.toString()]=r;for(var a=0;a<t.length;a++){var i=t[a],o=e[a];n[i]=o}return n}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function l(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadJSON",t);for(var a,i,o,s=t[0],c={},l="json",f=1;f<t.length;f++){var d=t[f];"string"==typeof d?"jsonp"!==d&&"json"!==d||(l=d):"function"==typeof d?a?i=d:a=d:"object"===u(d)&&(d.hasOwnProperty("jsonpCallback")||d.hasOwnProperty("jsonpCallbackFunction"))&&(l="jsonp",o=d)}var h=this;return this.httpDo(s,"GET",o,l,(function(e){for(var t in e)c[t]=e[t];void 0!==a&&a(e),h._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(5,s),!i)throw e;i(e)})),c},r.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadStrings",t);for(var a,i,o=[],u=1;u<t.length;u++){var s=t[u];"function"==typeof s&&(void 0===a?a=s:void 0===i&&(i=s))}var c=this;return r.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,r=t.length;n<r;n+=32768)Array.prototype.push.apply(o,t.slice(n,Math.min(n+32768,r)));void 0!==a&&a(o),c._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(3,e),!i)throw e;i(e)})),o},r.default.prototype.loadTable=function(e){var t,n,a,i=[],o=!1,u=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===u?a=",":"ssv"===u?a=";":"tsv"===u&&(a="\t");for(var c=1;c<arguments.length;c++)"function"==typeof arguments[c]?void 0===t?t=arguments[c]:void 0===n&&(n=arguments[c]):"string"==typeof arguments[c]&&(i.push(arguments[c]),"header"===arguments[c]&&(o=!0),"csv"===arguments[c]?a=",":"ssv"===arguments[c]?a=";":"tsv"===arguments[c]&&(a="\t"));var l=new r.default.Table,f=this;return this.httpDo(e,"GET","table",(function(e){for(var n,i,u={},c=[],d=0,h=null,p=function(){u.currentState=0,u.token=""},v=function(){h.push(u.token),p()},m=function(){u.currentState=4,c.push(h),h=null};;){if(null==(n=e[d++])){if(u.escaped)throw new Error("Unclosed quote in file.");if(h){v(),m();break}}if(null===h&&(u.escaped=!1,h=[],p()),0===u.currentState){if('"'===n){u.escaped=!0,u.currentState=1;continue}u.currentState=1}if(1===u.currentState&&u.escaped)if('"'===n)'"'===e[d]?(u.token+='"',d++):(u.escaped=!1,u.currentState=2);else{if("\r"===n)continue;u.token+=n}else"\r"===n?("\n"===e[d]&&d++,v(),m()):"\n"===n?(v(),m()):n===a?v():1===u.currentState&&(u.token+=n)}if(o)l.columns=c.shift();else for(var g=0;g<c[0].length;g++)l.columns[g]="null";for(var b=0;b<c.length;b++)(1!==c[b].length||"undefined"!==c[b][0]&&""!==c[b][0])&&((i=new r.default.TableRow).arr=c[b],i.obj=s(c[b],l.columns),l.addRow(i));"function"==typeof t&&t(l),f._decrementPreload()}),(function(t){r.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),l},r.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a,i,o=new r.default.XML,u=1;u<t.length;u++){var s=t[u];"function"==typeof s&&(void 0===a?a=s:void 0===i&&(i=s))}var c=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)o[t]=e[t];void 0!==a&&a(o),c._decrementPreload()}),(function(e){if(r.default._friendlyFileLoadError(1,e),!i)throw e;i(e)})),o},r.default.prototype.loadBytes=function(e,t,n){var a={},i=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){a.bytes=new Uint8Array(e),"function"==typeof t&&t(a),i._decrementPreload()}),(function(t){if(r.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),a},r.default.prototype.httpGet=function(){r.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpPost=function(){r.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),r.default.prototype.httpDo.apply(this,e)},r.default.prototype.httpDo=function(){for(var e,t,n,i,o,s={},c=0,l="text/plain",f=arguments.length-1;0<f&&"function"==typeof(f<0||arguments.length<=f?void 0:arguments[f]);f--)c++;var d=arguments.length<=0?void 0:arguments[0];if(2==arguments.length-c&&"string"==typeof d&&"object"===u(arguments.length<=1?void 0:arguments[1]))i=new Request(d,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var h,p="GET",v=1;v<arguments.length;v++){var m=v<0||arguments.length<=v?void 0:arguments[v];if("string"==typeof m)"GET"===m||"POST"===m||"PUT"===m||"DELETE"===m?p=m:"json"===m||"jsonp"===m||"binary"===m||"arrayBuffer"===m||"xml"===m||"text"===m||"table"===m?e=m:h=m;else if("number"==typeof m)h=m.toString();else if("object"===u(m))if(m.hasOwnProperty("jsonpCallback")||m.hasOwnProperty("jsonpCallbackFunction"))for(var g in m)s[g]=m[g];else l=m instanceof r.default.XML?(h=m.serialize(),"application/xml"):(h=JSON.stringify(m),"application/json");else"function"==typeof m&&(t?n=m:t=m)}var b="GET"===p?new Headers:new Headers({"Content-Type":l});i=new Request(d,{method:p,mode:"cors",body:h,headers:b})}return(o=(o="jsonp"===(e=e||(d.includes("json")?"json":d.includes("xml")?"xml":"text"))?(0,a.default)(d,s):fetch(i)).then((function(t){if(!t.ok){var n=new Error(t.body);throw n.status=t.status,n.ok=!1,n}var a=0;switch("jsonp"!==e&&(a=t.headers.get("content-length")),a&&64e6<a&&r.default._friendlyFileLoadError(7,d),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){var t=(new DOMParser).parseFromString(e,"text/xml");return new r.default.XML(t.documentElement)}));default:return t.text()}}))).then(t||function(){}),o.catch(n||console.error),o},window.URL=window.URL||window.webkitURL,r.default.prototype._pWriters=[],r.default.prototype.createWriter=function(e,t){var n;for(var a in r.default.prototype._pWriters)if(r.default.prototype._pWriters[a].name===e)return n=new r.default.PrintWriter(e+this.millis(),t),r.default.prototype._pWriters.push(n),n;return n=new r.default.PrintWriter(e,t),r.default.prototype._pWriters.push(n),n},r.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var a=[];for(var i in a.push(this.content),r.default.prototype.writeFile(a,e,t),r.default.prototype._pWriters)r.default.prototype._pWriters[i].name===this.name&&r.default.prototype._pWriters.splice(i,1);n.clear(),n={}}},r.default.prototype.save=function(e,t,n){var a=arguments,i=this._curElement?this._curElement.elt:this.elt;if(0!==a.length)if(a[0]instanceof r.default.Renderer||a[0]instanceof r.default.Graphics)r.default.prototype.saveCanvas(a[0].elt,a[1],a[2]);else if(1===a.length&&"string"==typeof a[0])r.default.prototype.saveCanvas(i,a[0]);else switch(l(a[1],a[2])[1]){case"json":return void r.default.prototype.saveJSON(a[0],a[1],a[2]);case"txt":return void r.default.prototype.saveStrings(a[0],a[1],a[2]);default:a[0]instanceof Array?r.default.prototype.saveStrings(a[0],a[1],a[2]):a[0]instanceof r.default.Table?r.default.prototype.saveTable(a[0],a[1],a[2]):a[0]instanceof r.default.Image?r.default.prototype.saveCanvas(a[0].canvas,a[1]):a[0]instanceof r.default.SoundFile&&r.default.prototype.saveSound(a[0],a[1],a[2],a[3])}else r.default.prototype.saveCanvas(i)},r.default.prototype.saveJSON=function(e,t,n){var a;r.default._validateParameters("saveJSON",arguments),a=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(a.split("\n"),t,"json")},r.default.prototype.saveJSONObject=r.default.prototype.saveJSON,r.default.prototype.saveJSONArray=r.default.prototype.saveJSON,r.default.prototype.saveStrings=function(e,t,n,a){r.default._validateParameters("saveStrings",arguments);for(var i=n||"txt",o=this.createWriter(t,i),u=0;u<e.length;u++)a?o.write(e[u]+"\r\n"):o.write(e[u]+"\n");o.close(),o.clear()},r.default.prototype.saveTable=function(e,t,n){var a;r.default._validateParameters("saveTable",arguments),a=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var i=this.createWriter(t,a),o=e.columns,u=",";if("tsv"===a&&(u="\t"),"html"!==a){if("0"!==o[0]){for(var s=0;s<o.length;s++)s<o.length-1?i.write(o[s]+u):i.write(o[s]);i.write("\n")}for(var l=0;l<e.rows.length;l++){var f=void 0;for(f=0;f<e.rows[l].arr.length;f++)f<e.rows[l].arr.length-1?"csv"===a&&String(e.rows[l].arr[f]).includes(",")?i.write('"'+e.rows[l].arr[f]+'"'+u):i.write(e.rows[l].arr[f]+u):"csv"===a&&String(e.rows[l].arr[f]).includes(",")?i.write('"'+e.rows[l].arr[f]+'"'):i.write(e.rows[l].arr[f]);i.write("\n")}}else{if(i.print("<html>"),i.print("<head>"),i.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),i.print("</head>"),i.print("<body>"),i.print("  <table>"),"0"!==o[0]){i.print("    <tr>");for(var d=0;d<o.length;d++){var h=c(o[d]);i.print("      <td>".concat(h)),i.print("      </td>")}i.print("    </tr>")}for(var p=0;p<e.rows.length;p++){i.print("    <tr>");for(var v=0;v<e.columns.length;v++){var m=c(e.rows[p].getString(v));i.print("      <td>".concat(m)),i.print("      </td>")}i.print("    </tr>")}i.print("  </table>"),i.print("</body>"),i.print("</html>")}i.close(),i.clear()},r.default.prototype.writeFile=function(e,t,n){var a="application/octet-stream";r.default.prototype._isSafari()&&(a="text/plain");var i=new Blob(e,{type:a});r.default.prototype.downloadFile(i,t,n)},r.default.prototype.downloadFile=function(e,t,n){var a=l(t,n),o=a[0];if(e instanceof Blob)i.default.saveAs(e,o);else{var u=document.createElement("a");if(u.href=e,u.download=o,u.onclick=function(e){var t;t=e,document.body.removeChild(t.target),e.stopPropagation()},u.style.display="none",document.body.appendChild(u),r.default.prototype._isSafari()){var s="Hello, Safari user! To download this file...\n";s+="1. Go to File --\x3e Save As.\n",s+='2. Choose "Page Source" as the Format.\n',s+='3. Name it with this extension: ."'.concat(a[1],'"'),alert(s)}u.click()}},r.default.prototype._checkFileExtension=l,r.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var f=r.default;n.default=f},{"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"es6-promise/auto":5,"fetch-jsonp":7,"file-saver":8,"whatwg-fetch":15}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Table=function(e){this.columns=[],this.rows=[]},a.default.Table.prototype.addRow=function(e){var t=e||new a.default.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error("invalid TableRow: ".concat(t));return(t.table=this).rows.push(t),t},a.default.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},a.default.Table.prototype.getRow=function(e){return this.rows[e]},a.default.Table.prototype.getRows=function(){return this.rows},a.default.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null},a.default.Table.prototype.findRows=function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[t]===e&&n.push(this.rows[a]);return n},a.default.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null},a.default.Table.prototype.matchRows=function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[t].match(e)&&n.push(this.rows[a]);return n},a.default.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t},a.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},a.default.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},a.default.Table.prototype.getColumnCount=function(){return this.columns.length},a.default.Table.prototype.getRowCount=function(){return this.rows.length},a.default.Table.prototype.removeTokens=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var a=new RegExp(n.join("|"),"g");if(void 0===t)for(var i=0;i<this.columns.length;i++)for(var o=0;o<this.rows.length;o++){var u=this.rows[o].arr[i];u=u.replace(a,""),this.rows[o].arr[i]=u,this.rows[o].obj[this.columns[i]]=u}else if("string"==typeof t)for(var s=0;s<this.rows.length;s++){var c=this.rows[s].obj[t];c=c.replace(a,""),this.rows[s].obj[t]=c;var l=this.columns.indexOf(t);this.rows[s].arr[l]=c}else for(var f=0;f<this.rows.length;f++){var d=this.rows[f].arr[t];d=d.replace(a,""),this.rows[f].arr[t]=d,this.rows[f].obj[this.columns[t]]=d}},a.default.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var a=this.rows[r].arr[n];a=a.replace(t,""),this.rows[r].arr[n]=a,this.rows[r].obj[this.columns[n]]=a}else if("string"==typeof e)for(var i=0;i<this.rows.length;i++){var o=this.rows[i].obj[e];o=o.replace(t,""),this.rows[i].obj[e]=o;var u=this.columns.indexOf(e);this.rows[i].arr[u]=o}else for(var s=0;s<this.rows.length;s++){var c=this.rows[s].arr[e];c=c.replace(t,""),this.rows[s].arr[e]=c,this.rows[s].obj[this.columns[e]]=c}},a.default.Table.prototype.removeColumn=function(e){var t,n;"string"==typeof e?(t=e,n=this.columns.indexOf(e)):(n=e,t=this.columns[e]);var r=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(r);for(var a=0;a<this.rows.length;a++){var i=this.rows[a].arr,o=i.splice(n+1,i.length);i.pop(),this.rows[a].arr=i.concat(o),delete this.rows[a].obj[t]}},a.default.Table.prototype.set=function(e,t,n){this.rows[e].set(t,n)},a.default.Table.prototype.setNum=function(e,t,n){this.rows[e].setNum(t,n)},a.default.Table.prototype.setString=function(e,t,n){this.rows[e].setString(t,n)},a.default.Table.prototype.get=function(e,t){return this.rows[e].get(t)},a.default.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},a.default.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},a.default.Table.prototype.getObject=function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n},a.default.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e};var i=a.default;n.default=i},{"../core/main":36}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.TableRow=function(e,t){var n=[],r={};e&&(t=t||",",n=e.split(t));for(var a=0;a<n.length;a++){var i=a,o=n[a];r[i]=o}this.arr=n,this.obj=r,this.table=null},a.default.TableRow.prototype.set=function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t;var r=this.table.columns[e];this.obj[r]=t}},a.default.TableRow.prototype.setNum=function(e,t){var n=parseFloat(t);this.set(e,n)},a.default.TableRow.prototype.setString=function(e,t){var n=t.toString();this.set(e,n)},a.default.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},a.default.TableRow.prototype.getNum=function(e){var t;if("NaN"===(t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e])).toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t},a.default.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()};var i=a.default;n.default=i},{"../core/main":36}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){for(var t=[],n=0;n<e.length;n++)t.push(new a.default.XML(e[n]));return t}a.default.XML=function(e){if(e)this.DOM=e;else{var t=document.implementation.createDocument(null,"doc");this.DOM=t.createElement("root")}},a.default.XML.prototype.getParent=function(){return new a.default.XML(this.DOM.parentElement)},a.default.XML.prototype.getName=function(){return this.DOM.tagName},a.default.XML.prototype.setName=function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var a=0;a<n.length;a++)r.setAttribute(n[a].nodeName,n.nodeValue);this.DOM=r},a.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},a.default.XML.prototype.listChildren=function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e},a.default.XML.prototype.getChildren=function(e){return i(e?this.DOM.getElementsByTagName(e):this.DOM.children)},a.default.XML.prototype.getChild=function(e){if("string"!=typeof e)return new a.default.XML(this.DOM.children[e]);var t=!0,n=!1,r=void 0;try{for(var i,o=this.DOM.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;if(u.tagName===e)return new a.default.XML(u)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},a.default.XML.prototype.addChild=function(e){e instanceof a.default.XML&&this.DOM.appendChild(e.DOM)},a.default.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])},a.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},a.default.XML.prototype.listAttributes=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,i=this.DOM.attributes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;e.push(o.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e},a.default.XML.prototype.hasAttribute=function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,o=this.DOM.attributes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;t[u.nodeName]=u.nodeValue}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return!!t[e]},a.default.XML.prototype.getNum=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,u=this.DOM.attributes[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n[s.nodeName]=s.nodeValue}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return Number(n[e])||t||0},a.default.XML.prototype.getString=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,u=this.DOM.attributes[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n[s.nodeName]=s.nodeValue}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n[e]?String(n[e]):t||null},a.default.XML.prototype.setAttribute=function(e,t){this.DOM.setAttribute(e,t)},a.default.XML.prototype.getContent=function(e){return this.DOM.textContent.replace(/\s\s+/g,",")||e||null},a.default.XML.prototype.setContent=function(e){this.DOM.children.length||(this.DOM.textContent=e)},a.default.XML.prototype.serialize=function(){return(new XMLSerializer).serializeToString(this.DOM)};var o=a.default;n.default=o},{"../core/main":36}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],n=0,r=0;r<e;r++){var a=arguments[r];if((a=+a)===1/0||a===-1/0)return 1/0;n<(a=Math.abs(a))&&(n=a),t[r]=a}0===n&&(n=1);for(var i=0,o=0,u=0;u<e;u++){var s=t[u]/n,c=s*s-o,l=i+c;o=l-i-c,i=l}return Math.sqrt(i)*n}a.default.prototype.abs=Math.abs,a.default.prototype.ceil=Math.ceil,a.default.prototype.constrain=function(e,t,n){return a.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},a.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("dist",t),4===t.length?i(t[2]-t[0],t[3]-t[1]):6===t.length?i(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},a.default.prototype.exp=Math.exp,a.default.prototype.floor=Math.floor,a.default.prototype.lerp=function(e,t,n){return a.default._validateParameters("lerp",arguments),n*(t-e)+e},a.default.prototype.log=Math.log,a.default.prototype.mag=function(e,t){return a.default._validateParameters("mag",arguments),i(e,t)},a.default.prototype.map=function(e,t,n,r,i,o){a.default._validateParameters("map",arguments);var u=(e-t)/(n-t)*(i-r)+r;return o?r<i?this.constrain(u,r,i):this.constrain(u,i,r):u},a.default.prototype.max=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.max.apply(null,t[0]):Math.max.apply(null,t)},a.default.prototype.min=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[0]instanceof Array?Math.min.apply(null,t[0]):Math.min.apply(null,t)},a.default.prototype.norm=function(e,t,n){return a.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},a.default.prototype.pow=Math.pow,a.default.prototype.round=function(e,t){return t?Number(Math.round(e+"e"+t)+"e-"+t):Math.round(e)},a.default.prototype.sq=function(e){return e*e},a.default.prototype.sqrt=Math.sqrt,a.default.prototype.fract=function(e){a.default._validateParameters("fract",arguments);var t=0,n=Number(e);if(isNaN(n)||Math.abs(n)===1/0)return n;if(n<0&&(n=-n,t=1),!String(n).includes(".")||String(n).includes("e"))return n<1?Math.abs(t-n):0;var r=String(n);return r=Number("0"+r.slice(r.indexOf("."))),Math.abs(t-r)};var o=a.default;n.default=o},{"../core/main":36}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.createVector=function(e,t,n){return this instanceof a.default?new a.default.Vector(this,arguments):new a.default.Vector(e,t,n)};var i=a.default;n.default=i},{"../core/main":36}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e){return.5*(1-Math.cos(e*Math.PI))}var o,u=4095,s=4,c=.5;a.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==o){o=new Array(4096);for(var r=0;r<4096;r++)o[r]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var a,l,f,d,h,p=Math.floor(e),v=Math.floor(t),m=Math.floor(n),g=e-p,b=t-v,y=n-m,x=0,_=.5,w=0;w<s;w++){var k=p+(v<<4)+(m<<8);a=i(g),l=i(b),f=o[k&u],f+=a*(o[k+1&u]-f),d=o[k+16&u],f+=l*((d+=a*(o[k+16+1&u]-d))-f),d=o[(k+=256)&u],d+=a*(o[k+1&u]-d),h=o[k+16&u],d+=l*((h+=a*(o[k+16+1&u]-h))-d),x+=(f+=i(y)*(d-f))*_,_*=c,p<<=1,v<<=1,m<<=1,1<=(g*=2)&&(p++,g--),1<=(b*=2)&&(v++,b--),1<=(y*=2)&&(m++,y--)}return x},a.default.prototype.noiseDetail=function(e,t){0<e&&(s=e),0<t&&(c=t)},a.default.prototype.noiseSeed=function(e){var t,n,r,a=(r=4294967296,{setSeed:function(e){n=t=(null==e?Math.random()*r:e)>>>0},getSeed:function(){return t},rand:function(){return(n=(1664525*n+1013904223)%r)/r}});a.setSeed(e),o=new Array(4096);for(var i=0;i<4096;i++)o[i]=a.rand()};var l=a.default;n.default=l},{"../core/main":36}],69:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function c(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}i.default.Vector=function(e,t,n){var r,a,o;o=e instanceof i.default?(this.p5=e,r=t[0]||0,a=t[1]||0,t[2]||0):(r=e||0,a=t||0,n||0),this.x=r,this.y=a,this.z=o},i.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},i.default.Vector.prototype.set=function(e,t,n){return e instanceof i.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this},i.default.Vector.prototype.copy=function(){return this.p5?new i.default.Vector(this.p5,[this.x,this.y,this.z]):new i.default.Vector(this.x,this.y,this.z)},i.default.Vector.prototype.add=function(e,t,n){return e instanceof i.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this},i.default.Vector.prototype.rem=function(e,t,n){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)){var r=parseFloat(e.x),a=parseFloat(e.y),o=parseFloat(e.z);c.call(this,r,a,o)}}else if(e instanceof Array)e.every((function(e){return Number.isFinite(e)}))&&(2===e.length&&s.call(this,e[0],e[1]),3===e.length&&c.call(this,e[0],e[1],e[2]));else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var u=Array.prototype.slice.call(arguments);u.every((function(e){return Number.isFinite(e)}))&&2===u.length&&s.call(this,u[0],u[1])}else if(3===arguments.length){var l=Array.prototype.slice.call(arguments);l.every((function(e){return Number.isFinite(e)}))&&3===l.length&&c.call(this,l[0],l[1],l[2])}},i.default.Vector.prototype.sub=function(e,t,n){return e instanceof i.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this},i.default.Vector.prototype.mult=function(e,t,n){if(e instanceof i.default.Vector)return Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(e instanceof Array)return e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var r=Array.prototype.slice.call(arguments);return r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=n)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},i.default.Vector.prototype.div=function(e,t,n){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){if(0===e.x||0===e.y||0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,this.z/=e.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(e instanceof Array){if(e.every((function(e){return Number.isFinite(e)}))&&e.every((function(e){return"number"==typeof e}))){if(e.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var r=Array.prototype.slice.call(arguments);if(r.every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=n)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},i.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},i.default.Vector.prototype.magSq=function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n},i.default.Vector.prototype.dot=function(e,t,n){return e instanceof i.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)},i.default.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return this.p5?new i.default.Vector(this.p5,[t,n,r]):new i.default.Vector(t,n,r)},i.default.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},i.default.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},i.default.Vector.prototype.limit=function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this},i.default.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},i.default.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.p5?this.p5._fromRadians(e):e},i.default.Vector.prototype.setHeading=function(e){var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},i.default.Vector.prototype.rotate=function(e){var t=this.heading()+e;this.p5&&(t=this.p5._toRadians(t));var n=this.mag();return this.x=Math.cos(t)*n,this.y=Math.sin(t)*n,this},i.default.Vector.prototype.angleBetween=function(e){var t,n=this.dot(e)/(this.mag()*e.mag());return t=Math.acos(Math.min(1,Math.max(-1,n))),t*=Math.sign(this.cross(e).z||1),this.p5&&(t=this.p5._fromRadians(t)),t},i.default.Vector.prototype.lerp=function(e,t,n,r){return e instanceof i.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)},i.default.Vector.prototype.reflect=function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))},i.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},i.default.Vector.prototype.equals=function(e,t,n){var r,a,o;return o=e instanceof i.default.Vector?(r=e.x||0,a=e.y||0,e.z||0):e instanceof Array?(r=e[0]||0,a=e[1]||0,e[2]||0):(r=e||0,a=t||0,n||0),this.x===r&&this.y===a&&this.z===o},i.default.Vector.fromAngle=function(e,t){return void 0===t&&(t=1),new i.default.Vector(t*Math.cos(e),t*Math.sin(e),0)},i.default.Vector.fromAngles=function(e,t,n){void 0===n&&(n=1);var r=Math.cos(t),a=Math.sin(t),o=Math.cos(e),u=Math.sin(e);return new i.default.Vector(n*u*a,-n*o,n*u*r)},i.default.Vector.random2D=function(){return this.fromAngle(Math.random()*o.TWO_PI)},i.default.Vector.random3D=function(){var e=Math.random()*o.TWO_PI,t=2*Math.random()-1,n=Math.sqrt(1-t*t),r=n*Math.cos(e),a=n*Math.sin(e);return new i.default.Vector(r,a,t)},i.default.Vector.add=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),n.add(t),n},i.default.Vector.rem=function(e,t){if(e instanceof i.default.Vector&&t instanceof i.default.Vector){var n=e.copy();return n.rem(t),n}},i.default.Vector.sub=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),n.sub(t),n},i.default.Vector.mult=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),n.mult(t),n},i.default.Vector.rotate=function(e,t,n){return 2===arguments.length?n=e.copy():(n instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),n.set(e)),n.rotate(t),n},i.default.Vector.div=function(e,t,n){return n?n.set(e):(n=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),n.div(t),n},i.default.Vector.dot=function(e,t){return e.dot(t)},i.default.Vector.cross=function(e,t){return e.cross(t)},i.default.Vector.dist=function(e,t){return e.dist(t)},i.default.Vector.lerp=function(e,t,n,r){return r?r.set(e):(r=e.copy(),4===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),r.lerp(t,n),r},i.default.Vector.mag=function(e){var t=e.x,n=e.y,r=e.z,a=t*t+n*n+r*r;return Math.sqrt(a)},i.default.Vector.normalize=function(e,t){return arguments.length<2?t=e.copy():(t instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()};var l=i.default.Vector;n.default=l},{"../core/constants":26,"../core/main":36}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i="_lcg_random_state",o=4294967296,u=0;a.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%o,this[e]/o},a.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*o:t)>>>0},a.default.prototype.randomSeed=function(e){this._lcgSetSeed(i,e),this._gaussian_previous=!1},a.default.prototype.random=function(e,t){var n;if(a.default._validateParameters("random",arguments),n=null!=this[i]?this._lcg(i):Math.random(),void 0===e)return n;if(void 0===t)return e instanceof Array?e[Math.floor(n*e.length)]:n*e;if(t<e){var r=e;e=t,t=r}return n*(t-e)+e},a.default.prototype.randomGaussian=function(e){var t,n,r,a,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=u,this._gaussian_previous=!1;else{for(;1<=(a=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(a=Math.sqrt(-2*Math.log(a)/a)),u=r*a,this._gaussian_previous=!0}return t*i+(e||0)};var s=a.default;n.default=s},{"../core/main":36}],71:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype._angleMode=o.RADIANS,i.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},i.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},i.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},i.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},i.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},i.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},i.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},i.default.prototype.degrees=function(e){return e*o.RAD_TO_DEG},i.default.prototype.radians=function(e){return e*o.DEG_TO_RAD},i.default.prototype.angleMode=function(e){e!==o.DEGREES&&e!==o.RADIANS||(this._angleMode=e)},i.default.prototype._toRadians=function(e){return this._angleMode===o.DEGREES?e*o.DEG_TO_RAD:e},i.default.prototype._toDegrees=function(e){return this._angleMode===o.RADIANS?e*o.RAD_TO_DEG:e},i.default.prototype._fromRadians=function(e){return this._angleMode===o.DEGREES?e*o.RAD_TO_DEG:e};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.textAlign=function(e,t){var n;return a.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},a.default.prototype.textLeading=function(e){var t;return a.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},a.default.prototype.textSize=function(e){var t;return a.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},a.default.prototype.textStyle=function(e){var t;return a.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},a.default.prototype.textWidth=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n[0]+="",a.default._validateParameters("textWidth",n),0===n[0].length?0:(e=this._renderer).textWidth.apply(e,n)},a.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("textAscent",t),this._renderer.textAscent()},a.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.default._validateParameters("textDescent",t),this._renderer.textDescent()},a.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()};var i=a.default;n.default=i},{"../core/main":36}],73:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=c(e("../core/constants")),u=c(e("opentype.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(e,t,n){i.default._validateParameters("loadFont",arguments);var r=new i.default.Font(this),a=this;return u.load(e,(function(o,u){if(o)return i.default._friendlyFileLoadError(4,e),void 0!==n?n(o):void console.error(o,e);r.font=u,void 0!==t&&t(r),a._decrementPreload();var s,c,l=e.split("\\").pop().split("/").pop(),f=l.lastIndexOf("."),d=f<1?null:l.substr(f+1);["ttf","otf","woff","woff2"].includes(d)&&(s=l.substr(0,f),(c=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(s,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(c))})),r},i.default.prototype.text=function(e,t,n,r,a){var o;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(o=this._renderer).text.apply(o,arguments):this},i.default.prototype.textFont=function(e,t){if(i.default._validateParameters("textFont",arguments),arguments.length){if(!e)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*o._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var l=i.default;n.default=l},{"../core/constants":26,"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36,"opentype.js":12}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=function(e,t){if("object"!==u(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0}),r=v(e,0,1),a=r/(r*n.sampleFactor),i=[],o=0;o<r;o+=a)i.push(v(e,o));return n.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)d(f(e,n-1),f(e,n),f(e,n+1),t)&&e.splice(n%e.length,1)}(i,n.simplifyThreshold),i}function c(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(l(e[r]));return n.push(t),n}function l(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function f(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function d(e,t,n,r){if(!r)return 0==(a=e,o=n,((i=t)[0]-a[0])*(o[1]-a[1])-(o[0]-a[0])*(i[1]-a[1]));var a,i,o;void 0===d.tmpPoint1&&(d.tmpPoint1=[],d.tmpPoint2=[]);var u=d.tmpPoint1,s=d.tmpPoint2;u.x=t.x-e.x,u.y=t.y-e.y,s.x=n.x-t.x,s.y=n.y-t.y;var c=u.x*s.x+u.y*s.y,l=Math.sqrt(u.x*u.x+u.y*u.y),f=Math.sqrt(s.x*s.x+s.y*s.y);return Math.acos(c/(l*f))<r}function h(e,t,n,r,a,i,o,u,s){var c=1-s,l=Math.pow(c,3),f=Math.pow(c,2),d=s*s,h=d*s,p=l*e+3*f*s*n+3*c*s*s*a+h*o,v=l*t+3*f*s*r+3*c*s*s*i+h*u,m=e+2*s*(n-e)+d*(a-2*n+e),g=t+2*s*(r-t)+d*(i-2*r+t),b=n+2*s*(a-n)+d*(o-2*a+n),y=r+2*s*(i-r)+d*(u-2*i+r),x=c*e+s*n,_=c*t+s*r,w=c*a+s*o,k=c*i+s*u,O=90-180*Math.atan2(m-b,g-y)/Math.PI;return(b<m||g<y)&&(O+=180),{x:p,y:v,m:{x:m,y:g},n:{x:b,y:y},start:{x:x,y:_},end:{x:w,y:k},alpha:O}}function p(e,t,n,r,a,i,o,u,s){return null==s?x(e,t,n,r,a,i,o,u):h(e,t,n,r,a,i,o,u,function(e,t,n,r,a,i,o,u,s){if(!(s<0||x(e,t,n,r,a,i,o,u)<s)){var c,l=.5,f=1-l;for(c=x(e,t,n,r,a,i,o,u,f);.01<Math.abs(c-s);)c=x(e,t,n,r,a,i,o,u,f+=(c<s?1:-1)*(l/=2));return f}}(e,t,n,r,a,i,o,u,s))}function v(e,t,n){for(var r,a,i,o,u,s=0,c=0,l=(e=function(e,t){function n(e,t,n){var r,a;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,n,r,a,i,o,u,s,c,l){var f,d,h,p,v,m=Math.PI,g=120*m/180,b=m/180*(+i||0),y=[],x=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(l)f=l[0],d=l[1],h=l[2],p=l[3];else{t=(v=x(t,n,-b)).x,n=v.y;var _=(t-(s=(v=x(s,c,-b)).x))/2,w=(n-(c=v.y))/2,k=_*_/(r*r)+w*w/(a*a);1<k&&(r*=k=Math.sqrt(k),a*=k);var O=r*r,S=a*a,j=(o===u?-1:1)*Math.sqrt(Math.abs((O*S-O*w*w-S*_*_)/(O*w*w+S*_*_)));h=j*r*w/a+(t+s)/2,p=j*-a*_/r+(n+c)/2,f=Math.asin(((n-p)/a).toFixed(9)),d=Math.asin(((c-p)/a).toFixed(9)),(f=t<h?m-f:f)<0&&(f=2*m+f),(d=s<h?m-d:d)<0&&(d=2*m+d),u&&d<f&&(f-=2*m),!u&&f<d&&(d-=2*m)}var E=d-f;if(Math.abs(E)>g){var C=d,A=s,T=c;d=f+g*(u&&f<d?1:-1),y=e(s=h+r*Math.cos(d),c=p+a*Math.sin(d),r,a,i,0,u,A,T,[d,C,h,p])}E=d-f;var N=Math.cos(f),M=Math.sin(f),D=Math.cos(d),I=Math.sin(d),F=Math.tan(E/4),R=4/3*r*F,P=4/3*a*F,L=[t,n],B=[t+R*M,n-P*N],z=[s+R*I,c-P*D],U=[s,c];if(B[0]=2*L[0]-B[0],B[1]=2*L[1]-B[1],l)return[B,z,U].concat(y);for(var W=[],V=0,G=(y=[B,z,U].concat(y).join().split(",")).length;V<G;V++)W[V]=V%2?x(y[V-1],y[V],b).y:x(y[V],y[V+1],b).x;return W}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":a="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,a].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(y(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(y(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(b(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(b(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(b(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(b(t.x,t.y,t.X,t.Y))}return e}function r(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)l[t]="A",u&&(f[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),i=Math.max(o.length,u&&u.length||0)}}function a(e,t,n,r,a){e&&t&&"M"===e[a][0]&&"M"!==t[a][0]&&(t.splice(a,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],i=Math.max(o.length,u&&u.length||0))}var i,o=m(e),u=t&&m(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],f=[],d="",h="";i=Math.max(o.length,u&&u.length||0);for(var p=0;p<i;p++){o[p]&&(d=o[p][0]),"C"!==d&&(l[p]=d,p&&(h=l[p-1])),o[p]=n(o[p],s,h),"A"!==l[p]&&"C"===d&&(l[p]="C"),r(o,p),u&&(u[p]&&(d=u[p][0]),"C"!==d&&(f[p]=d,p&&(h=f[p-1])),u[p]=n(u[p],c,h),"A"!==f[p]&&"C"===d&&(f[p]="C"),r(u,p)),a(o,u,s,c,p),a(u,o,c,s,p);var v=o[p],g=u&&u[p],x=v.length,_=u&&g.length;s.x=v[x-2],s.y=v[x-1],s.bx=parseFloat(v[x-4])||s.x,s.by=parseFloat(v[x-3])||s.y,c.bx=u&&(parseFloat(g[_-4])||c.x),c.by=u&&(parseFloat(g[_-3])||c.y),c.x=u&&g[_-2],c.y=u&&g[_-1]}return u?[o,u]:o}(e)).length;c<l;c++){if("M"===(i=e[c])[0])r=+i[1],a=+i[2];else{if(t<s+(o=p(r,a,i[1],i[2],i[3],i[4],i[5],i[6]))&&!n)return{x:(u=p(r,a,i[1],i[2],i[3],i[4],i[5],i[6],t-s)).x,y:u.y,alpha:u.alpha};s+=o,r=+i[5],a=+i[6]}i.shift()}return(u=n?s:h(r,a,i[0],i[1],i[2],i[3],i[4],i[5],1)).alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}function m(e){var t,n=[],r=0,a=0,i=0,o=0,u=0;if(!e)return n;"M"===e[0][0]&&(i=r=+e[0][1],o=a=+e[0][2],u++,n[0]=["M",r,a]);for(var s,c,l=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),f=u,d=e.length;f<d;f++){if(n.push(s=[]),(c=e[f])[0]!==String.prototype.toUpperCase.call(c[0]))switch(s[0]=String.prototype.toUpperCase.call(c[0]),s[0]){case"A":s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=+(c[6]+r),s[7]=+(c[7]+a);break;case"V":s[1]=+c[1]+a;break;case"H":s[1]=+c[1]+r;break;case"R":for(var h=2,p=(t=[r,a].concat(c.slice(1))).length;h<p;h++)t[h]=+t[h]+r,t[++h]=+t[h]+a;n.pop(),n=n.concat(g(t,l));break;case"M":i=+c[1]+r,o=+c[2]+a;break;default:for(var v=1,m=c.length;v<m;v++)s[v]=+c[v]+(v%2?r:a)}else if("R"===c[0])t=[r,a].concat(c.slice(1)),n.pop(),n=n.concat(g(t,l)),s=["R"].concat(c.slice(-2));else for(var b=0,y=c.length;b<y;b++)s[b]=c[b];switch(s[0]){case"Z":r=i,a=o;break;case"H":r=s[1];break;case"V":a=s[1];break;case"M":i=s[s.length-2],o=s[s.length-1];break;default:r=s[s.length-2],a=s[s.length-1]}}return n}function g(e,t){for(var n=[],r=0,a=e.length;r<a-2*!t;r+=2){var i=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?a-4===r?i[3]={x:+e[0],y:+e[1]}:a-2===r&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[a-2],y:+e[a-1]}:a-4===r?i[3]=i[2]:r||(i[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return n}function b(e,t,n,r){return[e,t,n,r,n,r]}function y(e,t,n,r,a,i){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*a+2/3*n,1/3*i+2/3*r,a,i]}function x(e,t,n,r,a,i,o,u,s){null==s&&(s=1);for(var c=(s=1<s?1:s<0?0:s)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=0,d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0;h<12;h++){var p=c*l[h]+c,v=_(p,e,n,a,o),m=_(p,t,r,i,u),g=v*v+m*m;f+=d[h]*Math.sqrt(g)}return c*f}function _(e,t,n,r,a){return e*(e*(-3*t+9*n-9*r+3*a)+6*t-12*n+6*r)-3*t+3*n}a.default.Font=function(e){this.parent=e,this.cache={},this.font=void 0},a.default.Font.prototype.textBounds=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0,u=o&&o.renderer&&o.renderer._pInst||this.parent,s=u._renderer.drawingContext;if(s.textAlign||i.LEFT,s.textBaseline||i.BASELINE,a=a||u._renderer._textSize,!t){var c,l,f=[],d=[],h=[];h[0]=[];var p=[],v=this._scale(a),m=u._renderer.textLeading(),g=0;this.font.forEachGlyph(e,n,r,a,o,(function(e,t,n,r){var a=e.getMetrics();0===e.index||10===e.index?h[g+=1]=[]:(h[g].push(t+a.xMin*v),h[g].push(t+a.xMax*v),p.push(n+g*m+-a.yMin*v),p.push(n+g*m+-a.yMax*v))})),0<h[g].length&&(f[g]=Math.min.apply(null,h[g]),d[g]=Math.max.apply(null,h[g]));for(var b=0,y=0;y<=g;y++){f[y]=Math.min.apply(null,h[y]),d[y]=Math.max.apply(null,h[y]);var x=d[y]-f[y];b<x&&(b=x)}var _=Math.min.apply(null,f);t={x:_,y:c=Math.min.apply(null,p),h:Math.max.apply(null,p)-c,w:b,advance:_-n},l=this._handleAlignment(u._renderer,e,t.x,t.y,t.w+t.advance),t.x=l.x,t.y=l.y}return t},a.default.Font.prototype.textToPoints=function(e,t,n,r,a){var i,o=0,u=[],l=this._getGlyphs(e);r=r||this.parent._renderer._textSize;for(var f=0;f<l.length;f++){if(!(l[i=f].name&&"space"===l[i].name||e.length===l.length&&" "===e[i]||l[i].index&&3===l[i].index))for(var d=c(l[f].getPath(t,n,r).commands),h=0;h<d.length;h++)for(var p=s(d[h],a),v=0;v<p.length;v++)p[v].x+=o,u.push(p[v]);o+=l[f].advanceWidth*this._scale(r)}return u},a.default.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},a.default.Font.prototype._getPath=function(e,t,n,r){var a=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer,i=this._handleAlignment(a,e,t,n);return this.font.getPath(e,i.x,i.y,a._textSize,r)},a.default.Font.prototype._getPathData=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===u(t)&&(r=t),r&&"number"==typeof r.decimals&&(a=r.decimals),e.toPathData(a)},a.default.Font.prototype._getSVG=function(e,t,n,r){var a=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===u(t)&&(r=t),r&&("number"==typeof r.decimals&&(a=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(a)},a.default.Font.prototype._renderPath=function(e,t,n,r){var a,o=r&&r.renderer||this.parent._renderer,s=o.drawingContext;a="object"===u(e)&&e.commands?e.commands:this._getPath(e,t,n,r).commands,s.beginPath();var c=!0,l=!1,f=void 0;try{for(var d,h=a[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;"M"===p.type?s.moveTo(p.x,p.y):"L"===p.type?s.lineTo(p.x,p.y):"C"===p.type?s.bezierCurveTo(p.x1,p.y1,p.x2,p.y2,p.x,p.y):"Q"===p.type?s.quadraticCurveTo(p.x1,p.y1,p.x,p.y):"Z"===p.type&&s.closePath()}}catch(e){l=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw f}}return o._doStroke&&o._strokeSet&&s.stroke(),o._doFill&&(o._fillSet||o._setFill(i._DEFAULT_TEXT_FILL),s.fill()),this},a.default.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},a.default.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},a.default.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},a.default.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},a.default.Font.prototype._handleAlignment=function(e,t,n,r,a){var o=e._textSize;switch(void 0===a&&(a=this._textWidth(t,o)),e._textAlign){case i.CENTER:n-=a/2;break;case i.RIGHT:n-=a}switch(e._textBaseline){case i.TOP:r+=this._textAscent(o);break;case i.CENTER:r+=this._textAscent(o)/2;break;case i.BOTTOM:r-=this._textDescent(o)}return{x:n,y:r}};var w=a.default;n.default=w},{"../core/constants":26,"../core/main":36}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.append=function(e,t){return e.push(t),e},a.default.prototype.arrayCopy=function(e,t,n,r,a){var i,o;e=void 0!==a?(o=Math.min(a,e.length),i=r,e.slice(t,o+t)):(o=void 0!==n?(o=n,Math.min(o,e.length)):e.length,i=0,n=t,e.slice(0,o)),Array.prototype.splice.apply(n,[i,o].concat(e))},a.default.prototype.concat=function(e,t){return e.concat(t)},a.default.prototype.reverse=function(e){return e.reverse()},a.default.prototype.shorten=function(e){return e.pop(),e},a.default.prototype.shuffle=function(e,t){for(var n,r,a=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),i=(e=t||a?e:e.slice()).length;1<i;)n=this.random(0,1)*i|0,r=e[--i],e[i]=e[n],e[n]=r;return e},a.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e,r=t?e.slice(Math.min(t,e.length)):[];return(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(r)},a.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},a.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)};var i=a.default;n.default=i},{"../core/main":36}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},a.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return a.default.prototype.int(e,t)})):void 0},a.default.prototype.str=function(e){return e instanceof Array?e.map(a.default.prototype.str):String(e)},a.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(a.default.prototype.boolean):void 0},a.default.prototype.byte=function(e){var t=a.default.prototype.int(e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(a.default.prototype.byte):void 0},a.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(a.default.prototype.char):"string"==typeof e?a.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},a.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(a.default.prototype.unchar):void 0},a.default.prototype.hex=function(e,t){if(t=null==t?t=8:t,e instanceof Array)return e.map((function(e){return a.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t&&(n=n.substring(n.length-t,n.length)),n}},a.default.prototype.unhex=function(e){return e instanceof Array?e.map(a.default.prototype.unhex):parseInt("0x".concat(e),16)};var i=a.default;n.default=i},{"../core/main":36}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){var r=e<0,a=r?e.toString().substring(1):e.toString(),i=a.indexOf("."),o=-1!==i?a.substring(0,i):a,u=-1!==i?a.substring(i+1):"",s=r?"-":"";if(void 0!==n){var c="";(-1!==i||0<n-u.length)&&(c="."),u.length>n&&(u=u.substring(0,n));for(var l=0;l<t-o.length;l++)s+="0";s+=o,s+=c,s+=u;for(var f=0;f<n-u.length;f++)s+="0";return s}for(var d=0;d<Math.max(t-o.length,0);d++)s+="0";return s+a}function o(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"",a=-1!==n?e.substring(0,n):e;if(a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length)for(var i=t-(r+=-1===n?".":"").length+1,o=0;o<i;o++)r+="0";else r=r.substring(0,t+1);return a+r}function u(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function s(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),a.default.prototype.join=function(e,t){return a.default._validateParameters("join",arguments),e.join(t)},a.default.prototype.match=function(e,t){return a.default._validateParameters("match",arguments),e.match(t)},a.default.prototype.matchAll=function(e,t){a.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),r=n.exec(e),i=[];null!==r;)i.push(r),r=n.exec(e);return i},a.default.prototype.nf=function(e,t,n){return a.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return i(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):i(e,t,n)},a.default.prototype.nfc=function(e,t){return a.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return o(e,t)})):o(e,t)},a.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("nfp",t);var r=a.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(u):u(r)},a.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.default._validateParameters("nfs",t);var r=a.default.prototype.nf.apply(this,t);return r instanceof Array?r.map(s):s(r)},a.default.prototype.split=function(e,t){return a.default._validateParameters("split",arguments),e.split(t)},a.default.prototype.splitTokens=function(e,t){var n;if(a.default._validateParameters("splitTokens",arguments),void 0!==t){var r=t,i=/\]/g.exec(r),o=/\[/g.exec(r);n=o&&i?(r=r.slice(0,i.index)+r.slice(i.index+1),o=/\[/g.exec(r),r=r.slice(0,o.index)+r.slice(o.index+1),new RegExp("[\\[".concat(r,"\\]]"),"g")):i?(r=r.slice(0,i.index)+r.slice(i.index+1),new RegExp("[".concat(r,"\\]]"),"g")):o?(r=r.slice(0,o.index)+r.slice(o.index+1),new RegExp("[".concat(r,"\\[]"),"g")):new RegExp("[".concat(r,"]"),"g")}else n=/\s/g;return e.split(n).filter((function(e){return e}))},a.default.prototype.trim=function(e){return a.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var c=a.default;n.default=c},{"../core/friendly_errors/fes_core":28,"../core/friendly_errors/file_errors":29,"../core/friendly_errors/validate_params":31,"../core/main":36}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.day=function(){return(new Date).getDate()},a.default.prototype.hour=function(){return(new Date).getHours()},a.default.prototype.minute=function(){return(new Date).getMinutes()},a.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},a.default.prototype.month=function(){return(new Date).getMonth()+1},a.default.prototype.second=function(){return(new Date).getSeconds()},a.default.prototype.year=function(){return(new Date).getFullYear()};var i=a.default;n.default=i},{"../core/main":36}],79:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a};e("./p5.Geometry");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e,t,n,r,a,o,u){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;var s,c,l,f=(o=void 0===o||o)?-2:0,d=(a=a<1?1:a)+((u=void 0===u?0!==t:u)?2:0),h=Math.atan2(e-t,n),p=Math.sin(h),v=Math.cos(h);for(s=f;s<=d;++s){var m=s/a,g=n*m,b=void 0;for(b=s<0?(m=g=0,e):a<s?(g=n,m=1,t):e+(t-e)*m,-2!==s&&s!==a+2||(b=0),g-=n/2,c=0;c<r;++c){var y=c/(r-1),x=2*Math.PI*y,_=Math.sin(x),w=Math.cos(x);this.vertices.push(new i.default.Vector(_*b,g,w*b));var k=void 0;k=s<0?new i.default.Vector(0,-1,0):a<s&&t?new i.default.Vector(0,1,0):new i.default.Vector(_*v,p,w*v),this.vertexNormals.push(k),this.uvs.push(y,m)}}var O=0;if(o){for(l=0;l<r;++l){var S=(l+1)%r;this.faces.push([O+l,O+r+S,O+r+l])}O+=2*r}for(s=0;s<a;++s){for(c=0;c<r;++c){var j=(c+1)%r;this.faces.push([O+c,O+j,O+r+j]),this.faces.push([O+c,O+r+j,O+r+c])}O+=r}if(u)for(O+=r,c=0;c<r;++c)this.faces.push([O+c,O+(c+1)%r,O+r])}i.default.prototype.plane=function(e,t,n,r){this._assert3d("plane"),i.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=1),void 0===r&&(r=1);var a="plane|".concat(n,"|").concat(r);if(!this._renderer.geometryInHash(a)){var o=new i.default.Geometry(n,r,(function(){for(var e,t,n,r=0;r<=this.detailY;r++){t=r/this.detailY;for(var a=0;a<=this.detailX;a++)e=a/this.detailX,n=new i.default.Vector(e-.5,t-.5,0),this.vertices.push(n),this.uvs.push(e,t)}}));o.computeFaces().computeNormals(),n<=1&&r<=1?o._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(a,o)}return this._renderer.drawBuffersScaled(a,e,t,1),this},i.default.prototype.box=function(e,t,n,r,a){this._assert3d("box"),i.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var o=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===r&&(r=o?1:4),void 0===a&&(a=o?1:4);var u="box|".concat(r,"|").concat(a);if(!this._renderer.geometryInHash(u)){var s=new i.default.Geometry(r,a,(function(){var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var t=0;t<e.length;t++){for(var n=e[t],r=4*t,a=0;a<4;a++){var o=n[a],u=new i.default.Vector((2*(1&o)-1)/2,((2&o)-1)/2,((4&o)/2-1)/2);this.vertices.push(u),this.uvs.push(1&a,(2&a)/2)}this.faces.push([r,1+r,2+r]),this.faces.push([2+r,1+r,3+r])}}));s.computeNormals(),r<=4&&a<=4?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(u,s)}return this._renderer.drawBuffersScaled(u,e,t,n),this},i.default.prototype.sphere=function(e,t,n){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),void 0===e&&(e=50),void 0===t&&(t=24),void 0===n&&(n=16),this.ellipsoid(e,e,e,t,n),this},i.default.prototype.cylinder=function(e,t,n,r,a,o){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===o&&(o=!0),void 0===a&&(a=!0);var u="cylinder|".concat(n,"|").concat(r,"|").concat(a,"|").concat(o);if(!this._renderer.geometryInHash(u)){var c=new i.default.Geometry(n,r);s.call(c,1,1,1,n,r,a,o),n<=24&&r<=16?c._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(u,c)}return this._renderer.drawBuffersScaled(u,e,t,e),this},i.default.prototype.cone=function(e,t,n,r,a){this._assert3d("cone"),i.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=24),void 0===r&&(r=1),void 0===a&&(a=!0);var o="cone|".concat(n,"|").concat(r,"|").concat(a);if(!this._renderer.geometryInHash(o)){var u=new i.default.Geometry(n,r);s.call(u,1,0,1,n,r,a,!1),n<=24&&r<=16?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(o,u)}return this._renderer.drawBuffersScaled(o,e,t,e),this},i.default.prototype.ellipsoid=function(e,t,n,r,a){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=24),void 0===a&&(a=16);var o="ellipsoid|".concat(r,"|").concat(a);if(!this._renderer.geometryInHash(o)){var u=new i.default.Geometry(r,a,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),a=Math.sin(n),o=0;o<=this.detailX;o++){var u=o/this.detailX,s=2*Math.PI*u,c=Math.cos(s),l=Math.sin(s),f=new i.default.Vector(r*l,a,r*c);this.vertices.push(f),this.vertexNormals.push(f),this.uvs.push(u,t)}}));u.computeFaces(),r<=24&&a<=24?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(o,u)}return this._renderer.drawBuffersScaled(o,e,t,n),this},i.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var a=(t/e).toPrecision(4),o="torus|".concat(a,"|").concat(n,"|").concat(r);if(!this._renderer.geometryInHash(o)){var u=new i.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),o=Math.sin(n),u=1+a*r,s=0;s<=this.detailX;s++){var c=s/this.detailX,l=2*Math.PI*c,f=Math.cos(l),d=Math.sin(l),h=new i.default.Vector(u*f,u*d,a*o),p=new i.default.Vector(r*f,r*d,o);this.vertices.push(h),this.vertexNormals.push(p),this.uvs.push(c,t)}}));u.computeFaces(),n<=24&&r<=16?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(o,u)}return this._renderer.drawBuffersScaled(o,e,e,e),this},i.default.RendererGL.prototype.point=function(e,t,n){void 0===n&&(n=0);var r=[];return r.push(new i.default.Vector(e,t,n)),this._drawPoints(r,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],u=e[5];if(!this.geometryInHash("tri")){var s=new i.default.Geometry(1,1,(function(){var e=[];e.push(new i.default.Vector(0,0,0)),e.push(new i.default.Vector(0,1,0)),e.push(new i.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]}));s._makeTriangleEdges()._edgesToVertices(),s.computeNormals(),this.createBuffers("tri",s)}var c=this.uMVMatrix.copy();try{var l=new i.default.Matrix([r-t,a-n,0,0,o-t,u-n,0,0,0,0,1,0,t,n,0,1]).mult(this.uMVMatrix);this.uMVMatrix=l,this.drawBuffers("tri")}finally{this.uMVMatrix=c}return this},i.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,o.TWO_PI,o.OPEN,e[4])},i.default.RendererGL.prototype.arc=function(e){var t,n=e,r=arguments[1],a=arguments[2],u=arguments[3],s=arguments[4],c=arguments[5],l=arguments[6],f=arguments[7]||25;if(t=Math.abs(c-s)>=o.TWO_PI?"".concat("ellipse","|").concat(f,"|"):"".concat("arc","|").concat(s,"|").concat(c,"|").concat(l,"|").concat(f,"|"),!this.geometryInHash(t)){var d=new i.default.Geometry(f,1,(function(){if(this.strokeIndices=[],s.toFixed(10)!==c.toFixed(10)){l!==o.PIE&&void 0!==l||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=f;e++){var t=e/f*(c-s)+s,n=.5+Math.cos(t)/2,r=.5+Math.sin(t)/2;this.vertices.push(new i.default.Vector(n,r,0)),this.uvs.push([n,r]),e<f-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}switch(l){case o.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case o.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case o.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}}));d.computeNormals(),f<=50?d._makeTriangleEdges()._edgesToVertices(d):this._renderer._doStroke&&console.log("Cannot stroke ${shape} with more than 50 detail"),this.createBuffers(t,d)}var h=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,r,0]),this.uMVMatrix.scale(a,u,1),this.drawBuffers(t)}finally{this.uMVMatrix=h}return this},i.default.RendererGL.prototype.rect=function(e){var t=this._pInst._glAttributes.perPixelLighting,n=e[0],r=e[1],a=e[2],o=e[3],u=e[4]||(t?1:24),s=e[5]||(t?1:16),c="rect|".concat(u,"|").concat(s);if(!this.geometryInHash(c)){var l=new i.default.Geometry(u,s,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,a=new i.default.Vector(r,t,0);this.vertices.push(a),this.uvs.push(r,t)}0<u&&0<s&&(this.strokeIndices=[[0,u],[u,(u+1)*(s+1)-1],[(u+1)*(s+1)-1,(u+1)*s],[(u+1)*s,0]])}));l.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(c,l)}var f=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,r,0]),this.uMVMatrix.scale(a,o,1),this.drawBuffers(c)}finally{this.uMVMatrix=f}return this},i.default.RendererGL.prototype.quad=function(e,t,n,r,a,o,u,s,c,l,f,d,h,p){void 0===h&&(h=2),void 0===p&&(p=2);var v="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(a,"|").concat(o,"|").concat(u,"|").concat(s,"|").concat(c,"|").concat(l,"|").concat(f,"|").concat(d,"|").concat(h,"|").concat(p);if(!this.geometryInHash(v)){var m=new i.default.Geometry(h,p,(function(){for(var h=1/(this.detailX-1),p=1/(this.detailY-1),v=0;v<this.detailY;v++)for(var m=0;m<this.detailX;m++){var g=m*h,b=v*p,y=(1-g)*((1-b)*e+b*l)+g*((1-b)*r+b*u),x=(1-g)*((1-b)*t+b*f)+g*((1-b)*a+b*s),_=(1-g)*((1-b)*n+b*d)+g*((1-b)*o+b*c);this.vertices.push(new i.default.Vector(y,x,_)),this.uvs.push([g,b])}}));m.faces=[];for(var g=0;g<p-1;g++)for(var b=0;b<h-1;b++){var y=b+g*h,x=b+1+g*h,_=b+1+(g+1)*h,w=b+(g+1)*h;m.faces.push([y,x,_]),m.faces.push([y,_,w])}m.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(v,m)}return this.drawBuffers(v),this},i.default.RendererGL.prototype.bezier=function(e,t,n,r,a,i,o,u,s,c,l,f){8===arguments.length&&(l=u,c=o,u=i,o=a,a=r,r=n,n=i=s=f=0);var d=this._pInst._bezierDetail||20;this.beginShape();for(var h=0;h<=d;h++){var p=Math.pow(1-h/d,3),v=h/d*3*Math.pow(1-h/d,2),m=3*Math.pow(h/d,2)*(1-h/d),g=Math.pow(h/d,3);this.vertex(e*p+r*v+o*m+c*g,t*p+a*v+u*m+l*g,n*p+i*v+s*m+f*g)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(e,t,n,r,a,i,o,u,s,c,l,f){8===arguments.length&&(c=o,l=u,o=a,u=r,a=r=n,n=i=s=f=0);var d=this._pInst._curveDetail;this.beginShape();for(var h=0;h<=d;h++){var p=.5*Math.pow(h/d,3),v=.5*Math.pow(h/d,2),m=h/d*.5,g=p*(3*r-e-3*o+c)+v*(2*e-5*r+4*o-c)+m*(-e+o)+2*r*.5,b=p*(3*a-t-3*u+l)+v*(2*t-5*a+4*u-l)+m*(-t+u)+2*a*.5,y=p*(3*i-n-3*s+f)+v*(2*n-5*i+4*s-f)+m*(-n+s)+2*i*.5;this.vertex(g,b,y)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(o.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(o.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,a,i=[],o=[],u=[],s=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,l=0,f=1,d=0;l<1;){if(e=parseFloat(l.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),f.toFixed(6)===c.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(l.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}l+=c,f-=c,++d}}var h=this._lookUpTableBezier.length;if(6===s){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],o=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],this.vertex(t,n);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===s){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],o=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],u=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],r=u[0]*this._lookUpTableBezier[a][0]+u[1]*this._lookUpTableBezier[a][1]+u[2]*this._lookUpTableBezier[a][2]+u[3]*this._lookUpTableBezier[a][3],this.vertex(t,n,r);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,a,i=[],o=[],u=[],s=arguments.length;if((e=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,l=0,f=1,d=0;l<1;){if(e=parseFloat(l.toFixed(6)),this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e),f.toFixed(6)===c.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(l.toFixed(6)),++d,this._lookUpTableQuadratic[d]=this._quadraticCoefficients(e);break}l+=c,f-=c,++d}}var h=this._lookUpTableQuadratic.length;if(4===s){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],o=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],a=0;a<h;a++)t=i[0]*this._lookUpTableQuadratic[a][0]+i[1]*this._lookUpTableQuadratic[a][1]+i[2]*this._lookUpTableQuadratic[a][2],n=o[0]*this._lookUpTableQuadratic[a][0]+o[1]*this._lookUpTableQuadratic[a][1]+o[2]*this._lookUpTableQuadratic[a][2],this.vertex(t,n);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===s){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],o=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],u=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],a=0;a<h;a++)t=i[0]*this._lookUpTableQuadratic[a][0]+i[1]*this._lookUpTableQuadratic[a][1]+i[2]*this._lookUpTableQuadratic[a][2],n=o[0]*this._lookUpTableQuadratic[a][0]+o[1]*this._lookUpTableQuadratic[a][1]+o[2]*this._lookUpTableQuadratic[a][2],r=u[0]*this._lookUpTableQuadratic[a][0]+u[1]*this._lookUpTableQuadratic[a][1]+u[2]*this._lookUpTableQuadratic[a][2],this.vertex(t,n,r);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,a,i=[],o=[],u=[],s=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,l=0,f=1,d=0;l<1;){if(e=parseFloat(l.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(e),f.toFixed(6)===c.toFixed(6)){e=parseFloat(f.toFixed(6))+parseFloat(l.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(e);break}l+=c,f-=c,++d}}var h=this._lookUpTableBezier.length;if(2===s){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],this.vertex(t,n);for(a=0;a<s;a++)this.immediateMode._curveVertex.shift()}}else if(3===s&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),u=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),a=0;a<h;a++)t=i[0]*this._lookUpTableBezier[a][0]+i[1]*this._lookUpTableBezier[a][1]+i[2]*this._lookUpTableBezier[a][2]+i[3]*this._lookUpTableBezier[a][3],n=o[0]*this._lookUpTableBezier[a][0]+o[1]*this._lookUpTableBezier[a][1]+o[2]*this._lookUpTableBezier[a][2]+o[3]*this._lookUpTableBezier[a][3],r=u[0]*this._lookUpTableBezier[a][0]+u[1]*this._lookUpTableBezier[a][1]+u[2]*this._lookUpTableBezier[a][2]+u[3]*this._lookUpTableBezier[a][3],this.vertex(t,n,r);for(a=0;a<s;a++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(e,t,n,r,a,i,u,s,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(e),this._pInst.textureMode(o.NORMAL);var l=0;t<=e.width&&(l=t/e.width);var f=1;t+r<=e.width&&(f=(t+r)/e.width);var d=0;n<=e.height&&(d=n/e.height);var h=1;n+a<=e.height&&(h=(n+a)/e.height),this.beginShape(),this.vertex(i,u,0,l,d),this.vertex(i+s,u,0,f,d),this.vertex(i+s,u+c,0,f,h),this.vertex(i,u+c,0,l,h),this.endShape(o.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(o.REMOVE)};var c=i.default;n.default=c},{"../core/constants":26,"../core/main":36,"./p5.Geometry":85}],80:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype.orbitControl=function(e,t,n){if(this._assert3d("orbitControl"),i.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var r=this._renderer._curCamera;void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=.5),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var a=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,n*a):this._renderer._curCamera._orbit(0,0,-n*a)),this.mouseIsPressed)if(this.mouseButton===this.LEFT){var o=-e*(this.mouseX-this.pmouseX)/a,u=t*(this.mouseY-this.pmouseY)/a;this._renderer._curCamera._orbit(o,u,0)}else if(this.mouseButton===this.RIGHT){var s=r._getLocalAxes(),c=Math.sqrt(s.x[0]*s.x[0]+s.x[2]*s.x[2]);0!==c&&(s.x[0]/=c,s.x[2]/=c);var l=Math.sqrt(s.y[0]*s.y[0]+s.y[2]*s.y[2]);0!==l&&(s.y[0]/=l,s.y[2]/=l);var f=-1*e*(this.mouseX-this.pmouseX),d=-1*t*(this.mouseY-this.pmouseY);r.setPosition(r.eyeX+f*s.x[0]+d*s.z[0],r.eyeY,r.eyeZ+f*s.x[2]+d*s.z[2])}return this}},i.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===o.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===o.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},i.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},i.default.prototype._grid=function(e,t,n,r,a){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=0);var i=e/t,o=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-o+n,r,e*i-o+a),this.vertex(+o+n,r,e*i-o+a),this.endShape();for(var u=0;u<=t;u++)this.beginShape(this.LINES),this.vertex(u*i-o+n,r,-o+a),this.vertex(u*i-o+n,r,+o+a),this.endShape();this.pop()}},i.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36}],81:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.prototype.ambientLight=function(e,t,n,r){this._assert3d("ambientLight"),i.default._validateParameters("ambientLight",arguments);var a=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(a._array[0],a._array[1],a._array[2]),this._renderer._enableLighting=!0,this},i.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),i.default._validateParameters("specularColor",arguments);var r=this.color.apply(this,arguments);return this._renderer.specularColors=[r._array[0],r._array[1],r._array[2]],this},i.default.prototype.directionalLight=function(e,t,n,r,a,o){var u,s,c,l;this._assert3d("directionalLight"),i.default._validateParameters("directionalLight",arguments),u=e instanceof i.default.Color?e:this.color(e,t,n);var f=arguments[arguments.length-1];l="number"==typeof f?(s=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(s=f.x,c=f.y,f.z);var d=Math.sqrt(s*s+c*c+l*l);return this._renderer.directionalLightDirections.push(s/d,c/d,l/d),this._renderer.directionalLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.pointLight=function(e,t,n,r,a,o){var u,s,c,l;this._assert3d("pointLight"),i.default._validateParameters("pointLight",arguments),u=e instanceof i.default.Color?e:this.color(e,t,n);var f=arguments[arguments.length-1];return l="number"==typeof f?(s=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(s=f.x,c=f.y,f.z),this._renderer.pointLightPositions.push(s,c,l),this._renderer.pointLightDiffuseColors.push(u._array[0],u._array[1],u._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===o.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var e=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,e),this.directionalLight(0,0,e,0,0,-1)}return this},i.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),i.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},i.default.prototype.spotLight=function(e,t,n,r,a,o,u,s,c,l,f){var d,h,p;this._assert3d("spotLight"),i.default._validateParameters("spotLight",arguments);var v=arguments.length;switch(v){case 11:case 10:d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=new i.default.Vector(u,s,c);break;case 9:e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),p=new i.default.Vector(a,o,u),l=s,f=c):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=new i.default.Vector(a,o,u),l=s,f=c):u instanceof i.default.Vector?(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=u,l=s,f=c):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),p=new i.default.Vector(u,s,c));break;case 8:p=e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),new i.default.Vector(a,o,u)):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,new i.default.Vector(a,o,u)):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),u),l=s;break;case 7:e instanceof i.default.Color&&t instanceof i.default.Vector?(d=e,h=t,p=new i.default.Vector(n,r,a),l=o,f=u):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a,l=o,f=u):r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a,l=o,f=u):p=e instanceof i.default.Color?(d=e,h=new i.default.Vector(t,n,r),new i.default.Vector(a,o,u)):r instanceof i.default.Vector?(d=this.color(e,t,n),h=r,new i.default.Vector(a,o,u)):(d=this.color(e,t,n),h=new i.default.Vector(r,a,o),u);break;case 6:r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a,l=o):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a,l=o):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,h=t,p=new i.default.Vector(n,r,a),l=o);break;case 5:e instanceof i.default.Color&&t instanceof i.default.Vector&&n instanceof i.default.Vector?(d=e,h=t,p=n,l=r,f=a):r instanceof i.default.Vector&&a instanceof i.default.Vector?(d=this.color(e,t,n),h=r,p=a):e instanceof i.default.Color&&a instanceof i.default.Vector?(d=e,h=new i.default.Vector(t,n,r),p=a):e instanceof i.default.Color&&t instanceof i.default.Vector&&(d=e,h=t,p=new i.default.Vector(n,r,a));break;case 4:d=e,h=t,p=n,l=r;break;case 3:d=e,h=t,p=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(v<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(h.x,h.y,h.z),p.normalize(),this._renderer.spotLightDirections.push(p.x,p.y,p.z),void 0===l&&(l=Math.PI/3),void 0!==f&&f<1?(f=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===f&&(f=100),l=this._renderer._pInst._toRadians(l),this._renderer.spotLightAngle.push(Math.cos(l)),this._renderer.spotLightConc.push(f),this._renderer._enableLighting=!0,this},i.default.prototype.noLights=function(){return this._assert3d("noLights"),i.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};function i(e,t,n){for(var r=0,a=e.length;r<a;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}e("./p5.Geometry"),a.default.prototype.loadModel=function(e){var t,n,r;a.default._validateParameters("loadModel",arguments);var o=e.slice(-4);"boolean"==typeof arguments[1]?(t=arguments[1],n=arguments[2],r=arguments[3],void 0!==arguments[4]&&(o=arguments[4])):(t=!1,n=arguments[1],r=arguments[2],void 0!==arguments[3]&&(o=arguments[3]));var u=new a.default.Geometry;u.gid="".concat(e,"|").concat(t);var s=this;return o.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){!function(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(i(n,t,r))return!1;return!0}(t))!function(e,t){for(var n,r,i,o,u,s,c,l=new DataView(t),f=l.getUint32(80,!0),d=!1,h=0;h<70;h++)1129270351===l.getUint32(h,!1)&&82===l.getUint8(h+4)&&61===l.getUint8(h+5)&&(d=!0,o=[],u=l.getUint8(h+6)/255,s=l.getUint8(h+7)/255,c=l.getUint8(h+8)/255);for(var p=0;p<f;p++){var v=84+50*p,m=l.getFloat32(v,!0),g=l.getFloat32(4+v,!0),b=l.getFloat32(8+v,!0);if(d){var y=l.getUint16(48+v,!0);i=0==(32768&y)?(n=(31&y)/31,r=(y>>5&31)/31,(y>>10&31)/31):(n=u,r=s,c)}for(var x=new a.default.Vector(m,g,b),_=1;_<=3;_++){var w=v+12*_,k=new a.default.Vector(l.getFloat32(w,!0),l.getFloat32(4+w,!0),l.getFloat32(8+w,!0));e.vertices.push(k),e.vertexNormals.push(x),d&&o.push(n,r,i)}e.faces.push([3*p,3*p+1,3*p+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{var n=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(e,t){for(var n,r,i="",o=[],u=0;u<t.length;++u){for(var s=t[u].trim(),c=s.split(" "),l=0;l<c.length;++l)""===c[l]&&c.splice(l,1);if(0!==c.length)switch(i){case"":if("solid"!==c[0])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "solid"'));i="solid";break;case"solid":if("facet"!==c[0]||"normal"!==c[1])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "facet normal"'));n=new a.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),i="facet normal";break;case"facet normal":if("outer"!==c[0]||"loop"!==c[1])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "outer loop"'));i="vertex";break;case"vertex":if("vertex"===c[0])r=new a.default.Vector(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),e.vertices.push(r),e.uvs.push([0,0]),o.push(e.vertices.indexOf(r));else{if("endloop"!==c[0])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "vertex" or "endloop"'));e.faces.push(o),o=[],i="endloop"}break;case"endloop":if("endfacet"!==c[0])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "endfacet"'));i="endfacet";break;case"endfacet":if("endsolid"!==c[0]){if("facet"!==c[0]||"normal"!==c[1])return console.error(s),console.error('Invalid state "'.concat(c[0],'", should be "endsolid" or "facet normal"'));n=new a.default.Vector(parseFloat(c[2]),parseFloat(c[3]),parseFloat(c[4])),e.vertexNormals.push(n,n,n),i="facet normal"}break;default:console.error('Invalid state "'.concat(i,'"'))}}}(e,new TextDecoder("utf-8").decode(n).split("\n"))}}(u,e),t&&u.normalize(),s._decrementPreload(),"function"==typeof n&&n(u)}),r):o.match(/\.obj$/i)?this.loadStrings(e,(function(e){!function(e,t){for(var n={v:[],vt:[],vn:[]},r={},i=0;i<t.length;++i){var o=t[i].trim().split(/\b\s+/);if(0<o.length)if("v"===o[0]||"vn"===o[0]){var u=new a.default.Vector(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]));n[o[0]].push(u)}else if("vt"===o[0]){var s=[parseFloat(o[1]),1-parseFloat(o[2])];n[o[0]].push(s)}else if("f"===o[0])for(var c=3;c<o.length;++c){for(var l=[],f=[1,c-1,c],d=0;d<f.length;++d){var h=o[f[d]],p=0;if(void 0!==r[h])p=r[h];else{for(var v=h.split("/"),m=0;m<v.length;m++)v[m]=parseInt(v[m])-1;p=r[h]=e.vertices.length,e.vertices.push(n.v[v[0]].copy()),n.vt[v[1]]?e.uvs.push(n.vt[v[1]].slice()):e.uvs.push([0,0]),n.vn[v[2]]&&e.vertexNormals.push(n.vn[v[2]].copy())}l.push(p)}l[0]!==l[1]&&l[0]!==l[2]&&l[1]!==l[2]&&e.faces.push(l)}}0===e.vertexNormals.length&&e.computeNormals()}(u,e),t&&u.normalize(),s._decrementPreload(),"function"==typeof n&&n(u)}),r):(a.default._friendlyFileLoadError(3,e),r?r():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),u},a.default.prototype.model=function(e){this._assert3d("model"),a.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var o=a.default;n.default=o},{"../core/main":36,"./p5.Geometry":85}],83:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}e("./p5.Texture"),i.default.prototype.loadShader=function(e,t,n,r){function a(){u._decrementPreload(),n&&n(o)}i.default._validateParameters("loadShader",arguments),r=r||console.error;var o=new i.default.Shader,u=this,s=!1,c=!1;return this.loadStrings(e,(function(e){o._vertSrc=e.join("\n"),c=!0,s&&a()}),r),this.loadStrings(t,(function(e){o._fragSrc=e.join("\n"),s=!0,c&&a()}),r),o},i.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,e,t)},i.default.prototype.shader=function(e){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),e.init(),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("normalMaterial",t),this._renderer.drawMode=o.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.texture=function(e){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=o.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(e){e!==o.IMAGE&&e!==o.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},i.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;this._renderer.textureWrapX=e,this._renderer.textureWrapY=t;for(var n=this._renderer.textures,r=0;r<n.length;r++)n[r].setWrapMode(e,t)},i.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var r=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=r._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var a=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=a._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.shininess=function(e){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),e<1&&(e=1),this._renderer._useShininess=e,this},i.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,n=this.drawMode===o.TEXTURE||e[e.length-1]<1||this._isErasing;return n!==this._isBlending&&(n||this.curBlendMode!==o.BLEND&&this.curBlendMode!==o.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=n),this._applyBlendMode(),e},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case o.BLEND:case o.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);break;case o.REMOVE:e.blendEquation(e.FUNC_REVERSE_SUBTRACT),e.blendFunc(e.SRC_ALPHA,e.DST_ALPHA);break;case o.MULTIPLY:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ONE,e.ONE);break;case o.SCREEN:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE,e.ONE,e.ONE);break;case o.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case o.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case o.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case o.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case o.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var s=i.default;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.Texture":92}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},a.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},a.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},a.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},a.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new a.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},a.default.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new a.default.Matrix,this.projMatrix=new a.default.Matrix},a.default.Camera.prototype.perspective=function(e,t,n,r){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===r&&(r=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),r<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=r,this.projMatrix=a.default.Matrix.identity();var i=1/Math.tan(this.cameraFOV/2),o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/t,0,0,0,0,-i,0,0,0,0,(r+n)*o,-1,0,0,2*r*n*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},a.default.Camera.prototype.ortho=function(e,t,n,r,i,o){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===i&&(i=0),void 0===o&&(o=Math.max(this._renderer.width,this._renderer.height));var u=t-e,s=r-n,c=o-i,l=2/u,f=2/s,d=-2/c,h=-(t+e)/u,p=-(r+n)/s,v=-(o+i)/c;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(l,0,0,0,0,-f,0,0,0,0,d,0,h,p,v,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype.frustum=function(e,t,n,r,i,o){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===n&&(n=-this._renderer.height/2),void 0===r&&(r=this._renderer.height/2),void 0===i&&(i=0),void 0===o&&(o=Math.max(this._renderer.width,this._renderer.height));var u=t-e,s=r-n,c=o-i,l=2*i/u,f=2*i/s,d=-2*o*i/c,h=(t+e)/u,p=(r+n)/s,v=-(o+i)/c;this.projMatrix=a.default.Matrix.identity(),this.projMatrix.set(l,0,0,0,0,f,0,0,h,p,v,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},a.default.Camera.prototype._rotateView=function(e,t,n,r){var i=this.centerX,o=this.centerY,u=this.centerZ;i-=this.eyeX,o-=this.eyeY,u-=this.eyeZ;var s=a.default.Matrix.identity(this._renderer._pInst);s.rotate(this._renderer._pInst._toRadians(e),t,n,r);var c=[i*s.mat4[0]+o*s.mat4[4]+u*s.mat4[8],i*s.mat4[1]+o*s.mat4[5]+u*s.mat4[9],i*s.mat4[2]+o*s.mat4[6]+u*s.mat4[10]];c[0]+=this.eyeX,c[1]+=this.eyeY,c[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,c[0],c[1],c[2],this.upX,this.upY,this.upZ)},a.default.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},a.default.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},a.default.Camera.prototype.lookAt=function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)},a.default.Camera.prototype.camera=function(e,t,n,r,a,i,o,u,s){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,a=t,u=1,s=o=i=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=a,this.centerZ=i),void 0!==o&&(this.upX=o,this.upY=u,this.upZ=s);var c=this._getLocalAxes();this.cameraMatrix.set(c.x[0],c.y[0],c.z[0],0,c.x[1],c.y[1],c.z[1],0,c.x[2],c.y[2],c.z[2],0,0,0,0,1);var l=-e,f=-t,d=-n;return this.cameraMatrix.translate([l,f,d]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},a.default.Camera.prototype.move=function(e,t,n){var r=this._getLocalAxes(),a=[r.x[0]*e,r.x[1]*e,r.x[2]*e],i=[r.y[0]*t,r.y[1]*t,r.y[2]*t],o=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+a[0]+i[0]+o[0],this.eyeY+a[1]+i[1]+o[1],this.eyeZ+a[2]+i[2]+o[2],this.centerX+a[0]+i[0]+o[0],this.centerY+a[1]+i[1]+o[1],this.centerZ+a[2]+i[2]+o[2],0,1,0)},a.default.Camera.prototype.setPosition=function(e,t,n){var r=e-this.eyeX,a=t-this.eyeY,i=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+a,this.centerZ+i,0,1,0)},a.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},a.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},a.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},a.default.Camera.prototype.copy=function(){var e=new a.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},a.default.Camera.prototype._getLocalAxes=function(){var e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ,r=Math.sqrt(e*e+t*t+n*n);0!==r&&(e/=r,t/=r,n/=r);var a=this.upX,i=this.upY,o=this.upZ,u=i*n-o*t,s=-a*n+o*e,c=a*t-i*e;a=t*c-n*s,i=-e*c+n*u,o=e*s-t*u;var l=Math.sqrt(u*u+s*s+c*c);0!==l&&(u/=l,s/=l,c/=l);var f=Math.sqrt(a*a+i*i+o*o);return 0!==f&&(a/=f,i/=f,o/=f),{x:[u,s,c],y:[a,i,o],z:[e,t,n]}},a.default.Camera.prototype._orbit=function(e,t,n){var r=this.eyeX-this.centerX,a=this.eyeY-this.centerY,i=this.eyeZ-this.centerZ,o=Math.sqrt(r*r+a*a+i*i),u=Math.atan2(r,i),s=Math.acos(Math.max(-1,Math.min(1,a/o)));u+=e,(o+=n)<0&&(o=.1),(s+=t)>Math.PI?s=Math.PI:s<=0&&(s=.001);var c=Math.sin(s)*o*Math.sin(u),l=Math.cos(s)*o,f=Math.sin(s)*o*Math.cos(u);this.camera(c+this.centerX,l+this.centerY,f+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},a.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},a.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])};var i=a.default.Camera;n.default=i},{"../core/main":36}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Geometry=function(e,t,n){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},n instanceof Function&&n.call(this),this},a.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},a.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var e,t,n,r,a=this.detailX+1,i=0;i<this.detailY;i++)for(var o=0;o<this.detailX;o++)t=(e=i*a+o)+1,n=(i+1)*a+o+1,r=(i+1)*a+o,this.faces.push([e,t,r]),this.faces.push([r,t,n]);return this},a.default.Geometry.prototype._getFaceNormal=function(e){var t=this.faces[e],n=this.vertices[t[0]],r=this.vertices[t[1]],i=this.vertices[t[2]],o=a.default.Vector.sub(r,n),u=a.default.Vector.sub(i,n),s=a.default.Vector.cross(o,u),c=a.default.Vector.mag(s),l=c/(a.default.Vector.mag(o)*a.default.Vector.mag(u));return 0===l||isNaN(l)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),s):(1<l&&(l=1),s.mult(Math.asin(l)/c))},a.default.Geometry.prototype.computeNormals=function(){var e,t=this.vertexNormals,n=this.vertices,r=this.faces;for(e=t.length=0;e<n.length;++e)t.push(new a.default.Vector);for(var i=0;i<r.length;++i)for(var o=r[i],u=this._getFaceNormal(i),s=0;s<3;++s)t[o[s]].add(u);for(e=0;e<n.length;++e)t[e].normalize();return this},a.default.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=a.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=a.default.Vector.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this},a.default.Geometry.prototype.averagePoleNormals=function(){for(var e=new a.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=a.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new a.default.Vector(0,0,0);for(var r=this.vertices.length-1;r>this.vertices.length-1-this.detailX;r--)e.add(this.vertexNormals[r]);e=a.default.Vector.div(e,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=e;return this},a.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var n=0;n<this.faces.length;n++)this.edges.push([this.faces[n][0],this.faces[n][1]]),this.edges.push([this.faces[n][1],this.faces[n][2]]),this.edges.push([this.faces[n][2],this.faces[n][0]]);return this},a.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var e=this.lineNormals.length=0;e<this.edges.length;e++){var t=this.vertices[this.edges[e][0]],n=this.vertices[this.edges[e][1]],r=n.copy().sub(t).normalize(),a=t.array(),i=t.array(),o=n.array(),u=n.array(),s=r.array(),c=r.array();s.push(1),c.push(-1),this.lineNormals.push(s,c,s,s,c,c),this.lineVertices.push(a,i,o,o,i,u)}return this},a.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var r=a.default.Vector.lerp(e,t,.5),i=a.default.Vector.sub(e,t),o=200/Math.max(Math.max(i.x,i.y),i.z),u=0;u<this.vertices.length;u++)this.vertices[u].sub(r),this.vertices[u].mult(o)}return this};var i=a.default.Geometry;n.default=i},{"../core/main":36}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r},i=Array,o=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(i=Float32Array,o=function(e){return e instanceof Array||e instanceof Float32Array}),a.default.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.length&&e[e.length-1]instanceof a.default&&(this.p5=e[e.length-1]),"mat3"===e[0]?this.mat3=Array.isArray(e[1])?e[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(e[0])?e[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},a.default.Matrix.prototype.set=function(e){return e instanceof a.default.Matrix?this.mat4=e.mat4:o(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},a.default.Matrix.prototype.get=function(){return new a.default.Matrix(this.mat4,this.p5)},a.default.Matrix.prototype.copy=function(){var e=new a.default.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},a.default.Matrix.identity=function(e){return new a.default.Matrix(e)},a.default.Matrix.prototype.transpose=function(e){var t,n,r,i,u,s;return e instanceof a.default.Matrix?(t=e.mat4[1],n=e.mat4[2],r=e.mat4[3],i=e.mat4[6],u=e.mat4[7],s=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=r,this.mat4[13]=u,this.mat4[14]=s,this.mat4[15]=e.mat4[15]):o(e)&&(t=e[1],n=e[2],r=e[3],i=e[6],u=e[7],s=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=i,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=r,this.mat4[13]=u,this.mat4[14]=s,this.mat4[15]=e[15]),this},a.default.Matrix.prototype.invert=function(e){var t,n,r,i,u,s,c,l,f,d,h,p,v,m,g,b;e instanceof a.default.Matrix?(t=e.mat4[0],n=e.mat4[1],r=e.mat4[2],i=e.mat4[3],u=e.mat4[4],s=e.mat4[5],c=e.mat4[6],l=e.mat4[7],f=e.mat4[8],d=e.mat4[9],h=e.mat4[10],p=e.mat4[11],v=e.mat4[12],m=e.mat4[13],g=e.mat4[14],b=e.mat4[15]):o(e)&&(t=e[0],n=e[1],r=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],v=e[12],m=e[13],g=e[14],b=e[15]);var y=t*s-n*u,x=t*c-r*u,_=t*l-i*u,w=n*c-r*s,k=n*l-i*s,O=r*l-i*c,S=f*m-d*v,j=f*g-h*v,E=f*b-p*v,C=d*g-h*m,A=d*b-p*m,T=h*b-p*g,N=y*T-x*A+_*C+w*E-k*j+O*S;return N?(N=1/N,this.mat4[0]=(s*T-c*A+l*C)*N,this.mat4[1]=(r*A-n*T-i*C)*N,this.mat4[2]=(m*O-g*k+b*w)*N,this.mat4[3]=(h*k-d*O-p*w)*N,this.mat4[4]=(c*E-u*T-l*j)*N,this.mat4[5]=(t*T-r*E+i*j)*N,this.mat4[6]=(g*_-v*O-b*x)*N,this.mat4[7]=(f*O-h*_+p*x)*N,this.mat4[8]=(u*A-s*E+l*S)*N,this.mat4[9]=(n*E-t*A-i*S)*N,this.mat4[10]=(v*k-m*_+b*y)*N,this.mat4[11]=(d*_-f*k-p*y)*N,this.mat4[12]=(s*j-u*C-c*S)*N,this.mat4[13]=(t*C-n*j+r*S)*N,this.mat4[14]=(m*x-v*w-g*y)*N,this.mat4[15]=(f*w-d*x+h*y)*N,this):null},a.default.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],a=this.mat3[4],i=this.mat3[5],o=this.mat3[6],u=this.mat3[7],s=this.mat3[8],c=s*a-i*u,l=-s*r+i*o,f=u*r-a*o,d=e*c+t*l+n*f;return d?(d=1/d,this.mat3[0]=c*d,this.mat3[1]=(-s*t+n*u)*d,this.mat3[2]=(i*t-n*a)*d,this.mat3[3]=l*d,this.mat3[4]=(s*e-n*o)*d,this.mat3[5]=(-i*e+n*r)*d,this.mat3[6]=f*d,this.mat3[7]=(-u*e+t*o)*d,this.mat3[8]=(a*e-t*r)*d,this):null},a.default.Matrix.prototype.transpose3x3=function(e){var t=e[1],n=e[2],r=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this},a.default.Matrix.prototype.inverseTranspose=function(e){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]);var t=this.invert3x3();if(t)t.transpose3x3(this.mat3);else for(var n=0;n<9;n++)this.mat3[n]=0;return this},a.default.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],a=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],o=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],u=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],s=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],l=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*l+n*c+r*s-a*u+i*o},a.default.Matrix.prototype.mult=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof a.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4[0],r=this.mat4[1],i=this.mat4[2],u=this.mat4[3];return this.mat4[0]=n*t[0]+r*t[4]+i*t[8]+u*t[12],this.mat4[1]=n*t[1]+r*t[5]+i*t[9]+u*t[13],this.mat4[2]=n*t[2]+r*t[6]+i*t[10]+u*t[14],this.mat4[3]=n*t[3]+r*t[7]+i*t[11]+u*t[15],n=this.mat4[4],r=this.mat4[5],i=this.mat4[6],u=this.mat4[7],this.mat4[4]=n*t[0]+r*t[4]+i*t[8]+u*t[12],this.mat4[5]=n*t[1]+r*t[5]+i*t[9]+u*t[13],this.mat4[6]=n*t[2]+r*t[6]+i*t[10]+u*t[14],this.mat4[7]=n*t[3]+r*t[7]+i*t[11]+u*t[15],n=this.mat4[8],r=this.mat4[9],i=this.mat4[10],u=this.mat4[11],this.mat4[8]=n*t[0]+r*t[4]+i*t[8]+u*t[12],this.mat4[9]=n*t[1]+r*t[5]+i*t[9]+u*t[13],this.mat4[10]=n*t[2]+r*t[6]+i*t[10]+u*t[14],this.mat4[11]=n*t[3]+r*t[7]+i*t[11]+u*t[15],n=this.mat4[12],r=this.mat4[13],i=this.mat4[14],u=this.mat4[15],this.mat4[12]=n*t[0]+r*t[4]+i*t[8]+u*t[12],this.mat4[13]=n*t[1]+r*t[5]+i*t[9]+u*t[13],this.mat4[14]=n*t[2]+r*t[6]+i*t[10]+u*t[14],this.mat4[15]=n*t[3]+r*t[7]+i*t[11]+u*t[15],this},a.default.Matrix.prototype.apply=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof a.default.Matrix)t=e.mat4;else if(o(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=this.mat4,r=n[0],i=n[4],u=n[8],s=n[12];n[0]=t[0]*r+t[1]*i+t[2]*u+t[3]*s,n[4]=t[4]*r+t[5]*i+t[6]*u+t[7]*s,n[8]=t[8]*r+t[9]*i+t[10]*u+t[11]*s,n[12]=t[12]*r+t[13]*i+t[14]*u+t[15]*s;var c=n[1],l=n[5],f=n[9],d=n[13];n[1]=t[0]*c+t[1]*l+t[2]*f+t[3]*d,n[5]=t[4]*c+t[5]*l+t[6]*f+t[7]*d,n[9]=t[8]*c+t[9]*l+t[10]*f+t[11]*d,n[13]=t[12]*c+t[13]*l+t[14]*f+t[15]*d;var h=n[2],p=n[6],v=n[10],m=n[14];n[2]=t[0]*h+t[1]*p+t[2]*v+t[3]*m,n[6]=t[4]*h+t[5]*p+t[6]*v+t[7]*m,n[10]=t[8]*h+t[9]*p+t[10]*v+t[11]*m,n[14]=t[12]*h+t[13]*p+t[14]*v+t[15]*m;var g=n[3],b=n[7],y=n[11],x=n[15];return n[3]=t[0]*g+t[1]*b+t[2]*y+t[3]*x,n[7]=t[4]*g+t[5]*b+t[6]*y+t[7]*x,n[11]=t[8]*g+t[9]*b+t[10]*y+t[11]*x,n[15]=t[12]*g+t[13]*b+t[14]*y+t[15]*x,this},a.default.Matrix.prototype.scale=function(e,t,n){return e instanceof a.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this},a.default.Matrix.prototype.rotate=function(e,t,n,r){t instanceof a.default.Vector?(n=t.y,r=t.z,t=t.x):t instanceof Array&&(n=t[1],r=t[2],t=t[0]);var i=Math.sqrt(t*t+n*n+r*r);t*=1/i,n*=1/i,r*=1/i;var o=this.mat4[0],u=this.mat4[1],s=this.mat4[2],c=this.mat4[3],l=this.mat4[4],f=this.mat4[5],d=this.mat4[6],h=this.mat4[7],p=this.mat4[8],v=this.mat4[9],m=this.mat4[10],g=this.mat4[11],b=Math.sin(e),y=Math.cos(e),x=1-y,_=t*t*x+y,w=n*t*x+r*b,k=r*t*x-n*b,O=t*n*x-r*b,S=n*n*x+y,j=r*n*x+t*b,E=t*r*x+n*b,C=n*r*x-t*b,A=r*r*x+y;return this.mat4[0]=o*_+l*w+p*k,this.mat4[1]=u*_+f*w+v*k,this.mat4[2]=s*_+d*w+m*k,this.mat4[3]=c*_+h*w+g*k,this.mat4[4]=o*O+l*S+p*j,this.mat4[5]=u*O+f*S+v*j,this.mat4[6]=s*O+d*S+m*j,this.mat4[7]=c*O+h*S+g*j,this.mat4[8]=o*E+l*C+p*A,this.mat4[9]=u*E+f*C+v*A,this.mat4[10]=s*E+d*C+m*A,this.mat4[11]=c*E+h*C+g*A,this},a.default.Matrix.prototype.translate=function(e){var t=e[0],n=e[1],r=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*r,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*r,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*r,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*r},a.default.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},a.default.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},a.default.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},a.default.Matrix.prototype.perspective=function(e,t,n,r){var a=1/Math.tan(e/2),i=1/(n-r);return this.mat4[0]=a/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*i,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*i,this.mat4[15]=0,this},a.default.Matrix.prototype.ortho=function(e,t,n,r,a,i){var o=1/(e-t),u=1/(n-r),s=1/(a-i);return this.mat4[0]=-2*o,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*u,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*s,this.mat4[11]=0,this.mat4[12]=(e+t)*o,this.mat4[13]=(r+n)*u,this.mat4[14]=(i+a)*s,this.mat4[15]=1,this};var u=a.default.Matrix;n.default=u},{"../core/main":36}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.RenderBuffer=function(e,t,n,r,a,i){this.size=e,this.src=t,this.dst=n,this.attr=r,this._renderer=a,this.map=i},a.default.RenderBuffer.prototype._prepareBuffer=function(e,t){var n,r=t.attributes,a=this._renderer.GL;n=e.model?e.model:e;var i=r[this.attr];if(i){var o=e[this.dst],u=n[this.src];if(0<u.length){var s=!o;if(s&&(e[this.dst]=o=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,o),s||!1!==n.dirtyFlags[this.src]){var c=this.map,l=c?c(u):u;this._renderer._bindBuffer(o,a.ARRAY_BUFFER,l),n.dirtyFlags[this.src]=!1}t.enableAttrib(i,this.size)}}};var i=a.default.RenderBuffer;n.default=i},{"../core/main":36}],88:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}e("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:o.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},i.default.RendererGL.prototype.vertex=function(e,t){var n,r,a;n=r=a=0,3===arguments.length?n=arguments[2]:4===arguments.length?(r=arguments[2],a=arguments[3]):5===arguments.length&&(n=arguments[2],r=arguments[3],a=arguments[4]);var u=new i.default.Vector(e,t,n);this.immediateMode.geometry.vertices.push(u);var s=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(s[0],s[1],s[2],s[3]),this.textureMode===o.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(r/=this._tex.width,a/=this._tex.height):null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(r,a),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=n,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=n,this},i.default.RendererGL.prototype.endShape=function(e,t,n,r,a,i){return this.immediateMode.shapeMode===o.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(e){if(0!==this.immediateMode.geometry.vertices.length){var t=this._doStroke&&this.drawMode!==o.TEXTURE,n=e===o.CLOSE;t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,n),this.immediateMode.geometry._edgesToVertices());var r=this.immediateMode.shapeMode===o.TESS;(this.isBezier||this.isQuadratic||this.isCurve||r)&&this.immediateMode.shapeMode!==o.LINES&&this._tesselateShape()}},i.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],a=0;switch(e){case o.TRIANGLE_STRIP:for(a=0;a<t.length-2;a++)r.push([a,a+1]),r.push([a,a+2]);r.push([a,a+1]);break;case o.TRIANGLES:for(a=0;a<t.length-2;a+=3)r.push([a,a+1]),r.push([a+1,a+2]),r.push([a+2,a]);break;case o.LINES:for(a=0;a<t.length-1;a+=2)r.push([a,a+1]);break;default:for(a=0;a<t.length-1;a++)r.push([a,a+1])}return n&&r.push([t.length-1,0]),r},i.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=o.TRIANGLES;var e=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],t=this._triangulate(e);this.immediateMode.geometry.vertices=[];for(var n=0,r=t.length;n<r;n+=3)this.vertex(t[n],t[n+1],t[n+2])},i.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=this._getImmediateFillShader();this._calculateNormals(this.immediateMode.geometry),this._setFillUniforms(t);var n=!0,r=!1,a=void 0;try{for(var i,u=this.immediateMode.buffers.fill[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}this.immediateMode.shapeMode!==o.LINE_STRIP&&this.immediateMode.shapeMode!==o.LINES||(this.immediateMode.shapeMode=o.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=this._getImmediateStrokeShader();this._setStrokeUniforms(t);var n=!0,r=!1,a=void 0;try{for(var i,o=this.immediateMode.buffers.stroke[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t.unbindShader()},i.default.RendererGL.prototype._calculateNormals=function(e){e.vertices.forEach((function(){e.vertexNormals.push(new i.default.Vector(0,0,1))}))};var s=i.default.RendererGL;n.default=s},{"../core/constants":26,"../core/main":36,"./p5.RenderBuffer":87}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};e("./p5.RendererGL"),e("./p5.RenderBuffer");var i=0;a.default.RendererGL.prototype._initBufferDefaults=function(e){if(this._freeBuffers(e),1e3<++i){var t=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[t],i--}return this.retainedMode.geometry[e]={}},a.default.RendererGL.prototype._freeBuffers=function(e){var t=this.retainedMode.geometry[e];if(t){delete this.retainedMode.geometry[e],i--;var n=this.GL;t.indexBuffer&&n.deleteBuffer(t.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill)}function r(e){var r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;t[s.dst]&&(n.deleteBuffer(t[s.dst]),t[s.dst]=null)}}catch(e){a=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}}},a.default.RendererGL.prototype.createBuffers=function(e,t){var n=this.GL,r=this._initBufferDefaults(e);r.model=t;var i=r.indexBuffer;if(t.faces.length){i=i||(r.indexBuffer=n.createBuffer());var o=a.default.RendererGL.prototype._flatten(t.faces);this._bindBuffer(i,n.ELEMENT_ARRAY_BUFFER,o,Uint16Array),r.vertexCount=3*t.faces.length}else i&&(n.deleteBuffer(i),r.indexBuffer=null),r.vertexCount=t.vertices?t.vertices.length:0;return r.lineVertexCount=t.lineVertices?t.lineVertices.length:0,r},a.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(this._doStroke&&0<n.lineVertexCount){var r=this._getRetainedStrokeShader();this._setStrokeUniforms(r);var a=!0,i=!1,o=void 0;try{for(var u,s=this.retainedMode.buffers.stroke[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)u.value._prepareBuffer(n,r)}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),r.unbindShader()}if(this._doFill){var c=this._getRetainedFillShader();this._setFillUniforms(c);var l=!0,f=!1,d=void 0;try{for(var h,p=this.retainedMode.buffers.fill[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)h.value._prepareBuffer(n,c)}catch(e){f=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(f)throw d}}n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),c.unbindShader()}return this},a.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var a=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uMVMatrix=a}},a.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},a.default.RendererGL.prototype._drawElements=function(e,t){var n=this.retainedMode.geometry[t],r=this.GL;n.indexBuffer?r.drawElements(r.TRIANGLES,n.vertexCount,r.UNSIGNED_SHORT,0):r.drawArrays(e||r.TRIANGLES,0,n.vertexCount)},a.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),n.drawArrays(n.Points,0,e.length),r.unbindShader()};var o=a.default.RendererGL;n.default=o},{"../core/main":36,"./p5.RenderBuffer":87,"./p5.RendererGL":90}],90:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants")),o=s(e("libtess"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var l="precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n",f={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:l+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;\n  }\n}",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n}\n",phongFrag:l+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;\n  }\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  vec2 curPerspScale;\n\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};a.default.RendererGL=function(e,t,n,r){return a.default.Renderer.call(this,e,t,n),this._setAttributeDefaults(t),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=i.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=i.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new a.default.Matrix,this.uPMatrix=new a.default.Matrix,this.uNMatrix=new a.default.Matrix("mat3"),this._curCamera=new a.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new a.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new a.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aMaterialColor",this),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new a.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new a.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new a.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new a.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new a.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new a.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new a.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new a.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=i.IMAGE,this.textureWrapX=i.CLAMP,this.textureWrapY=i.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},a.default.RendererGL.prototype=Object.create(a.default.Renderer.prototype),a.default.RendererGL.prototype._setAttributeDefaults=function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)},a.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(e){throw e}},a.default.RendererGL.prototype._resetContext=function(e,t){var n=this.width,r=this.height,i=this.canvas.id,o=this._pInst instanceof a.default.Graphics;if(o){var u=this._pInst;u.canvas.parentNode.removeChild(u.canvas),u.canvas=document.createElement("canvas"),(u._pInst._userNode||document.body).appendChild(u.canvas),a.default.Element.call(u,u.canvas,u._pInst),u.width=n,u.height=r}else{var s=this.canvas;s&&s.parentNode.removeChild(s),(s=document.createElement("canvas")).id=i,this._pInst._userNode?this._pInst._userNode.appendChild(s):document.body.appendChild(s),this._pInst.canvas=s}var c=new a.default.RendererGL(this._pInst.canvas,this._pInst,!o);this._pInst._setProperty("_renderer",c),c.resize(n,r),c._applyDefaults(),o||this._pInst._elements.push(c),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)},a.default.prototype.setAttributes=function(e,t){if(void 0!==this._glAttributes){var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},a.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},a.default.RendererGL.prototype.background=function(){var e,t=(e=this._pInst).color.apply(e,arguments),n=t.levels[0]/255,r=t.levels[1]/255,a=t.levels[2]/255,i=t.levels[3]/255;this.GL.clearColor(n,r,a,i),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},a.default.RendererGL.prototype.fill=function(e,t,n,r){var o=a.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=o._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null},a.default.RendererGL.prototype.stroke=function(e,t,n,r){arguments[3]=255;var i=a.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array},a.default.RendererGL.prototype.strokeCap=function(e){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},a.default.RendererGL.prototype.strokeJoin=function(e){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},a.default.RendererGL.prototype.filter=function(e){console.error("filter() does not work in WEBGL mode")},a.default.RendererGL.prototype.blendMode=function(e){e===i.DARKEST||e===i.LIGHTEST||e===i.ADD||e===i.BLEND||e===i.SUBTRACT||e===i.SCREEN||e===i.EXCLUSION||e===i.REPLACE||e===i.MULTIPLY||e===i.REMOVE?this.curBlendMode=e:e!==i.BURN&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},a.default.RendererGL.prototype.erase=function(e,t){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])},a.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},a.default.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)},a.default.RendererGL.prototype._getPixel=function(e,t){var n;return n=new Uint8Array(4),this.drawingContext.readPixels(e,t,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,n),[n[0],n[1],n[2],n[3]]},a.default.RendererGL.prototype.loadPixels=function(){var e=this._pixelsState;if(!0===this._pInst._glAttributes.preserveDrawingBuffer){var t=e.pixels,n=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;t instanceof Uint8Array&&t.length===n||(t=new Uint8Array(n),this._pixelsState._setProperty("pixels",t));var r=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*r,this.height*r,this.GL.RGBA,this.GL.UNSIGNED_BYTE,t)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},a.default.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.retainedMode.geometry[e]},a.default.RendererGL.prototype.resize=function(e,t){a.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var n=this._pixelsState;void 0!==n.pixels&&n._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},a.default.RendererGL.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e,t,n,r),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},a.default.RendererGL.prototype.applyMatrix=function(e,t,n,r,i,o){16===arguments.length?a.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,i,o,0,1])},a.default.RendererGL.prototype.translate=function(e,t,n){return e instanceof a.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,n]),this},a.default.RendererGL.prototype.scale=function(e,t,n){return this.uMVMatrix.scale(e,t,n),this},a.default.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(a.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},a.default.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},a.default.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},a.default.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},a.default.RendererGL.prototype.push=function(){var e=a.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,e},a.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=a.default.Matrix.identity(this._pInst),this},a.default.RendererGL.prototype._getImmediateStrokeShader=function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()},a.default.RendererGL.prototype._getRetainedStrokeShader=a.default.RendererGL.prototype._getImmediateStrokeShader,a.default.RendererGL.prototype._getImmediateFillShader=function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e},a.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e},a.default.RendererGL.prototype._getImmediatePointShader=function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()},a.default.RendererGL.prototype._getRetainedLineShader=a.default.RendererGL.prototype._getImmediateLineShader,a.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new a.default.Shader(this,f.phongVert,f.phongFrag):this._defaultLightShader=new a.default.Shader(this,f.lightVert,f.lightTextureFrag)),this._defaultLightShader},a.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new a.default.Shader(this,f.immediateVert,f.vertexColorFrag)),this._defaultImmediateModeShader},a.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new a.default.Shader(this,f.normalVert,f.normalFrag)),this._defaultNormalShader},a.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new a.default.Shader(this,f.normalVert,f.basicFrag)),this._defaultColorShader},a.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new a.default.Shader(this,f.pointVert,f.pointFrag)),this._defaultPointShader},a.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new a.default.Shader(this,f.lineVert,f.lineFrag)),this._defaultLineShader},a.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new a.default.Shader(this,f.fontVert,f.fontFrag)),this._defaultFontShader},a.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var e=new a.default.Image(1,1);e.set(0,0,255),this._emptyTexture=new a.default.Texture(this,e)}return this._emptyTexture},a.default.RendererGL.prototype.getTexture=function(e){var t=this.textures,n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=o.value;if(s.src===e)return s}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}var c=new a.default.Texture(this,e);return t.push(c),c},a.default.RendererGL.prototype._setStrokeUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight)},a.default.RendererGL.prototype._setFillUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var n=this.directionalLightDiffuseColors.length/3;e.setUniform("uDirectionalLightCount",n),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var r=this.ambientLightColors.length/3;e.setUniform("uAmbientLightCount",r),e.setUniform("uAmbientColor",this.ambientLightColors);var a=this.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",a),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()},a.default.RendererGL.prototype._setPointUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},a.default.RendererGL.prototype._bindBuffer=function(e,t,n,r,a){if(t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n){var i=new(r||Float32Array)(n);this.GL.bufferData(t,i,a||this.GL.STATIC_DRAW)}},a.default.RendererGL.prototype._arraysEqual=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},a.default.RendererGL.prototype._isTypedArray=function(e){return Float32Array,Float64Array,Int16Array,Uint16Array,e instanceof Uint32Array},a.default.RendererGL.prototype._flatten=function(e){if(0===e.length)return[];if(2e4<e.length){var t,n=Object.prototype.toString,r=[],a=e.slice();for(t=a.pop();"[object Array]"===n.call(t)?a.push.apply(a,c(t)):r.push(t),a.length&&void 0!==(t=a.pop()););return r.reverse(),r}var i;return(i=[]).concat.apply(i,c(e))},a.default.RendererGL.prototype._vToNArray=function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;t.push(u.x,u.y,u.z)}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t},a.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},a.default.RendererGL.prototype._initTessy=function(){var e=new o.default.GluTesselator;return e.gluTessCallback(o.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2]})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==o.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){return[e[0],e[1],e[2]]})),e.gluTessCallback(o.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e},a.default.RendererGL.prototype._triangulate=function(e){this._tessy.gluTessNormal(0,0,1);var t=[];this._tessy.gluTessBeginPolygon(t);for(var n=0;n<e.length;n++){this._tessy.gluTessBeginContour();for(var r=e[n],a=0;a<r.length;a+=3){var i=[r[a],r[a+1],r[a+2]];this._tessy.gluTessVertex(i,i)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),t},a.default.RendererGL.prototype._bezierCoefficients=function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]},a.default.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},a.default.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]};var d=a.default.RendererGL;n.default=d},{"../core/constants":26,"../core/main":36,"../core/p5.Renderer":39,"./p5.Camera":84,"./p5.Matrix":86,"./p5.Shader":91,libtess:10,path:13}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("../core/main"))&&r.__esModule?r:{default:r};a.default.Shader=function(e,t,n){this._renderer=e,this._vertSrc=t,this._fragSrc=n,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},a.default.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},a.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),a=r.name,i=e.getAttribLocation(this._glProgram,a),o={};o.name=a,o.location=i,o.index=n,o.type=r.type,o.size=r.size,this.attributes[a]=o}this._loadedAttributes=!0}},a.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var a=e.getActiveUniform(this._glProgram,r),i={};i.location=e.getUniformLocation(this._glProgram,a.name),i.size=a.size;var o=a.name;1<a.size&&(o=o.substring(0,o.indexOf("[0]"))),i.name=o,i.type=a.type,i._cachedData=void 0,i.type===e.SAMPLER_2D&&(i.samplerIndex=n,n++,this.samplers.push(i)),i.isArray=i.type===e.FLOAT_MAT3||i.type===e.FLOAT_MAT4||i.type===e.FLOAT_VEC2||i.type===e.FLOAT_VEC3||i.type===e.FLOAT_VEC4||i.type===e.INT_VEC2||i.type===e.INT_VEC3||i.type===e.INT_VEC4,this.uniforms[o]=i}this._loadedUniforms=!0}},a.default.Shader.prototype.compile=function(){},a.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},a.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},a.default.Shader.prototype.bindTextures=function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var a,i=this.samplers[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=o.texture;void 0===u&&(u=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+o.samplerIndex),u.bindTexture(),u.update(),e.uniform1i(o.location,o.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},a.default.Shader.prototype.updateTextures=function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.samplers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value.texture;i&&i.update()}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},a.default.Shader.prototype.unbindTextures=function(){},a.default.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},a.default.Shader.prototype.useProgram=function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this},a.default.Shader.prototype.setUniform=function(e,t){var n=this.uniforms[e];if(n){var r=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;n._cachedData=t}var a=n.location;switch(this.useProgram(),n.type){case r.BOOL:!0===t?r.uniform1i(a,1):r.uniform1i(a,0);break;case r.INT:1<n.size?t.length&&r.uniform1iv(a,t):r.uniform1i(a,t);break;case r.FLOAT:1<n.size?t.length&&r.uniform1fv(a,t):r.uniform1f(a,t);break;case r.FLOAT_MAT3:r.uniformMatrix3fv(a,!1,t);break;case r.FLOAT_MAT4:r.uniformMatrix4fv(a,!1,t);break;case r.FLOAT_VEC2:1<n.size?t.length&&r.uniform2fv(a,t):r.uniform2f(a,t[0],t[1]);break;case r.FLOAT_VEC3:1<n.size?t.length&&r.uniform3fv(a,t):r.uniform3f(a,t[0],t[1],t[2]);break;case r.FLOAT_VEC4:1<n.size?t.length&&r.uniform4fv(a,t):r.uniform4f(a,t[0],t[1],t[2],t[3]);break;case r.INT_VEC2:1<n.size?t.length&&r.uniform2iv(a,t):r.uniform2i(a,t[0],t[1]);break;case r.INT_VEC3:1<n.size?t.length&&r.uniform3iv(a,t):r.uniform3i(a,t[0],t[1],t[2]);break;case r.INT_VEC4:1<n.size?t.length&&r.uniform4iv(a,t):r.uniform4i(a,t[0],t[1],t[2],t[3]);break;case r.SAMPLER_2D:r.activeTexture(r.TEXTURE0+n.samplerIndex),n.texture=this._renderer.getTexture(t),r.uniform1i(n.location,n.samplerIndex)}return this}},a.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},a.default.Shader.prototype.isNormalShader=function(){return void 0!==this.attributes.aNormal},a.default.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},a.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},a.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},a.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},a.default.Shader.prototype.enableAttrib=function(e,t,n,r,a,i){if(e){var o=e.location;if(-1!==o){var u=this._renderer.GL;e.enabled||(u.enableVertexAttribArray(o),e.enabled=!0),this._renderer.GL.vertexAttribPointer(o,t,n||u.FLOAT,r||!1,a||0,i||0)}}return this};var i=a.default.Shader;n.default=i},{"../core/main":36}],92:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}i.default.Texture=function(e,t){this._renderer=e;var n=this._renderer.GL;this.src=t,this.glTex=void 0,this.glTarget=n.TEXTURE_2D,this.glFormat=n.RGBA,this.mipmaps=!1,this.glMinFilter=n.LINEAR,this.glMagFilter=n.LINEAR,this.glWrapS=n.CLAMP_TO_EDGE,this.glWrapT=n.CLAMP_TO_EDGE,this.isSrcMediaElement=void 0!==i.default.MediaElement&&t instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==i.default.Element&&t instanceof i.default.Element&&!(t instanceof i.default.Graphics),this.isSrcP5Image=t instanceof i.default.Image,this.isSrcP5Graphics=t instanceof i.default.Graphics,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData;var r=this._getTextureDataFromSource();return this.width=r.width,this.height=r.height,this.init(r),this},i.default.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},i.default.Texture.prototype.init=function(e){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){var n=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,t.UNSIGNED_BYTE,n)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,t.UNSIGNED_BYTE,e)},i.default.Texture.prototype.update=function(){var e=this.src;if(0===e.width||0===e.height)return!1;var t=this._getTextureDataFromSource(),n=!1,r=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(n=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(n=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(n=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),n=!0):this.isImageData?e._dirty&&(n=!(e._dirty=!1)):n=!0,n&&(this.bindTexture(),r.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,r.UNSIGNED_BYTE,t)),n},i.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},i.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},i.default.Texture.prototype.setInterpolation=function(e,t){var n=this._renderer.GL;e===o.NEAREST?this.glMinFilter=n.NEAREST:this.glMinFilter=n.LINEAR,t===o.NEAREST?this.glMagFilter=n.NEAREST:this.glMagFilter=n.LINEAR,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},i.default.Texture.prototype.setWrapMode=function(e,t){function n(e){return 0==(e&e-1)}var r=this._renderer.GL,a=n(this.width),i=n(this.height);e===o.REPEAT?a&&i?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===o.MIRROR?a&&i?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===o.REPEAT?a&&i?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===o.MIRROR?a&&i?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var s=i.default.Texture;n.default=s},{"../core/constants":26,"../core/main":36}],93:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,i=(a=e("../core/main"))&&a.__esModule?a:{default:a},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e("../core/constants"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var a=this.infos.length-1;0<=a;--a){var i=this.infos[a];if(i.index+e<r){n=(t=i).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var o=document.getElementsByTagName("canvas")[0],u=!o;o||((o=document.createElement("canvas")).style.display="none",document.body.appendChild(o));var s=o.getContext("2d");s&&(n=s.createImageData(this.width,this.height)),u&&document.body.removeChild(o)}t={index:0,imageData:n},this.infos.push(t)}var c=t.index;return t.index+=e,n._dirty=!0,{imageData:n,index:c}}}function c(e,t,n,r,a){var i=e.imageData.data,o=4*e.index++;i[o++]=t,i[o++]=n,i[o++]=r,i[o++]=a}function l(e){this.font=e,this.strokeImageInfos=new s(64,64),this.colDimImageInfos=new s(64,64),this.rowDimImageInfos=new s(64,64),this.colCellImageInfos=new s(64,64),this.rowCellImageInfos=new s(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){var t=this.glyphInfos[e.index];if(t)return t;var n,r=e.getBoundingBox(),a=r.x1,o=r.y1,u=r.x2-a,s=r.y2-o,l=e.path.commands;if(0==u||0==s||!l.length)return this.glyphInfos[e.index]={};var d,h,p,v,m=[],g=[],b=[];for(n=8;0<=n;--n)b.push([]);for(n=8;0<=n;--n)g.push([]);function y(e,t,n){var r=m.length;function a(e,t,n){for(var r=e.length;0<r--;){var a=e[r];a<t&&(t=a),n<a&&(n=a)}return{min:t,max:n}}m.push(n);for(var i=a(e,1,0),o=Math.max(Math.floor(9*i.min),0),u=Math.min(Math.ceil(9*i.max),9),s=o;s<u;++s)b[s].push(r);for(var c=a(t,1,0),l=Math.max(Math.floor(9*c.min),0),f=Math.min(Math.ceil(9*c.max),9),d=l;d<f;++d)g[d].push(r)}function x(e){return(t=(r=255)*e)<(n=0)?n:r<t?r:t;var t,n,r}function _(e,t,n,r){this.p0=e,this.c0=t,this.c1=n,this.p1=r,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return i.default.Vector.sub(i.default.Vector.sub(this.p1,this.p0),i.default.Vector.mult(i.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(e){var t=i.default.Vector.lerp(this.p0,this.c0,e),n=i.default.Vector.lerp(this.c0,this.c1,e),r=i.default.Vector.lerp(t,n,e);this.c1=i.default.Vector.lerp(this.c1,this.p1,e),this.c0=i.default.Vector.lerp(n,this.c1,e);var a=i.default.Vector.lerp(r,this.c0,e),o=new _(this.p0,t,r,a);return this.p0=a,o},this.splitInflections=function(){var e=i.default.Vector.sub(this.c0,this.p0),t=i.default.Vector.sub(i.default.Vector.sub(this.c1,this.c0),e),n=i.default.Vector.sub(i.default.Vector.sub(i.default.Vector.sub(this.p1,this.c1),e),i.default.Vector.mult(t,2)),r=[],a=t.x*n.y-t.y*n.x;if(0!==a){var o=e.x*n.y-e.y*n.x,u=e.x*t.y-e.y*t.x,s=o*o-4*a*u;if(0<=s){a<0&&(a=-a,o=-o,u=-u);var c=Math.sqrt(s),l=(-o-c)/(2*a),f=(-o+c)/(2*a);0<l&&l<1&&(r.push(this.split(l)),f=1-(1-f)/(1-l)),0<f&&f<1&&r.push(this.split(f))}}return r.push(this),r}}function w(e,t,n,r,a,o,u,s){var c=new _(new i.default.Vector(e,t),new i.default.Vector(n,r),new i.default.Vector(a,o),new i.default.Vector(u,s)).splitInflections(),l=[],d=30/f,h=!0,p=!1,v=void 0;try{for(var m,g=c[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){for(var b=m.value,y=[],x=void 0;!(.125<=(x=d/b.quadError()));){var w=Math.pow(x,1/3),k=b.split(w),O=b.split(1-w/(1-w));l.push(k),y.push(b),b=O}x<1&&l.push(b.split(.5)),l.push(b),Array.prototype.push.apply(l,y.reverse())}}catch(e){p=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw v}}return l}function k(e,t,n,r){y([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function O(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}var S=!0,j=!1,E=void 0;try{for(var C,A=l[Symbol.iterator]();!(S=(C=A.next()).done);S=!0){var T=C.value,N=(T.x-a)/u,M=(T.y-o)/s;if(!O(d,h,N,M)){switch(T.type){case"M":p=N,v=M;break;case"L":k(d,h,N,M);break;case"Q":var D=(T.x1-a)/u,I=(T.y1-o)/s;y([d,N,D],[h,M,I],{x:d,y:h,cx:D,cy:I});break;case"Z":O(d,h,p,v)?m.push({x:d,y:h}):(k(d,h,p,v),m.push({x:p,y:v}));break;case"C":for(var F=w(d,h,(T.x1-a)/u,(T.y1-o)/s,(T.x2-a)/u,(T.y2-o)/s,N,M),R=0;R<F.length;R++){var P=F[R].toQuadratic();y([P.x,P.x1,P.cx],[P.y,P.y1,P.cy],P)}break;default:throw new Error("unknown command type: ".concat(T.type))}d=N,h=M}}}catch(e){j=!0,E=e}finally{try{S||null==A.return||A.return()}finally{if(j)throw E}}for(var L=m.length,B=this.strokeImageInfos.findImage(L),z=B.index,U=0;U<L;++U){var W=m[U];c(B,x(W.x),x(W.y),x(W.cx),x(W.cy))}function V(e,t,n){for(var r=e.length,a=t.findImage(r),i=a.index,o=0,u=0;u<r;++u)o+=e[u].length;for(var s=n.findImage(o),l=0;l<r;++l){var f=e[l],d=f.length,h=s.index;c(a,h>>7,127&h,d>>7,127&d);for(var p=0;p<d;++p){var v=f[p]+z;c(s,v>>7,127&v,0,0)}}return{cellImageInfo:s,dimOffset:i,dimImageInfo:a}}return(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[r.x1,-r.y1,r.x2,-r.y2],strokeImageInfo:B,strokes:m,colInfo:V(b,this.colDimImageInfos,this.colCellImageInfos),rowInfo:V(g,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset],t}}e("./p5.Shader"),e("./p5.RendererGL.Retained"),i.default.RendererGL.prototype._applyTextProperties=function(){},i.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var f=Math.sqrt(3);i.default.RendererGL.prototype._renderText=function(e,t,n,r,a){if(this._textFont&&"string"!=typeof this._textFont){if(!(a<=r)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),e;e.push();var u=this._doStroke,s=this.drawMode;this._doStroke=!1,this.drawMode=o.TEXTURE;var c=this._textFont.font,f=this._textFont._fontInfo;f=f||(this._textFont._fontInfo=new l(c));var d=this._textFont._handleAlignment(this,t,n,r),h=this._textSize/c.unitsPerEm;this.translate(d.x,d.y,0),this.scale(h,h,1);var p=this.GL,v=!this._defaultFontShader,m=this._getFontShader();m.init(),m.bindShader(),v&&(m.setUniform("uGridImageSize",[64,64]),m.setUniform("uCellsImageSize",[64,64]),m.setUniform("uStrokeImageSize",[64,64]),m.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var g=this.retainedMode.geometry.glyph;if(!g){var b=this._textGeom=new i.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new i.default.Vector(t,e,0)),this.uvs.push(t,e)}));b.computeFaces().computeNormals(),g=this.createBuffers("glyph",b)}var y=!0,x=!1,_=void 0;try{for(var w,k=this.retainedMode.buffers.text[Symbol.iterator]();!(y=(w=k.next()).done);y=!0)w.value._prepareBuffer(g,m)}catch(e){x=!0,_=e}finally{try{y||null==k.return||k.return()}finally{if(x)throw _}}this._bindBuffer(g.indexBuffer,p.ELEMENT_ARRAY_BUFFER),m.setUniform("uMaterialColor",this.curFillColor);try{var O=0,S=null,j=c.stringToGlyphs(t),E=!0,C=!1,A=void 0;try{for(var T,N=j[Symbol.iterator]();!(E=(T=N.next()).done);E=!0){var M=T.value;S&&(O+=c.getKerningValue(S,M));var D=f.getGlyphInfo(M);if(D.uGlyphRect){var I=D.rowInfo,F=D.colInfo;m.setUniform("uSamplerStrokes",D.strokeImageInfo.imageData),m.setUniform("uSamplerRowStrokes",I.cellImageInfo.imageData),m.setUniform("uSamplerRows",I.dimImageInfo.imageData),m.setUniform("uSamplerColStrokes",F.cellImageInfo.imageData),m.setUniform("uSamplerCols",F.dimImageInfo.imageData),m.setUniform("uGridOffset",D.uGridOffset),m.setUniform("uGlyphRect",D.uGlyphRect),m.setUniform("uGlyphOffset",O),m.bindTextures(),p.drawElements(p.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}O+=M.advanceWidth,S=M}}catch(e){C=!0,A=e}finally{try{E||null==N.return||N.return()}finally{if(C)throw A}}}finally{m.unbindShader(),this._doStroke=u,this.drawMode=s,e.pop()}return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":26,"../core/main":36,"./p5.RendererGL.Retained":89,"./p5.Shader":91}]},{},[21])(21)}).call(this,n(170))},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"}),"LooksOne");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5c-.49 0-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-6 8h-4v-2h4v2zm0-4h-4v-2h4v2z"}),"BugReport");t.default=o},function(e,t,n){"use strict";var r=n(152),a=n(153);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(6)),o=(0,r(n(154)).default)(i.createElement("path",{d:"M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"}),"Texture");t.default=o},function(e,t,n){"use strict";function r(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){return e.setHours(0,0,0,0)}),(function(e,t){return e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*a.c)/a.a}),(function(e){return e.getDate()-1}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/a.a}),(function(e){return e.getUTCDate()-1}));t.a=i;i.range},,,,,,,,,,,function(e,t,n){"use strict";var r=n(169),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;a=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var y=b.prototype=new g;y.constructor=b,r(y,m.prototype),y.isPureReactComponent=!0;var x={current:null},_=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:x.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case i:s=!0}}if(s)return o=o(s=e),e=""===r?"."+j(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),E(o,t,n,"",(function(e){return e}))):null!=o&&(O(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+j(u=e[c],c);s+=E(u,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=E(u=u.value,t,n,l=r+j(u,c++),o);else if("object"===u)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],a=0;return E(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function N(){var e=T.current;if(null===e)throw Error(h(321));return e}var M={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error(h(143));return e}},t.Component=m,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(6),a=n(169),i=n(430);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(v,e)||!h.call(p,e)&&(d.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,k=60106,O=60107,S=60108,j=60114,E=60109,C=60110,A=60112,T=60113,N=60120,M=60115,D=60116,I=60121,F=60128,R=60129,P=60130,L=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;w=B("react.element"),k=B("react.portal"),O=B("react.fragment"),S=B("react.strict_mode"),j=B("react.profiler"),E=B("react.provider"),C=B("react.context"),A=B("react.forward_ref"),T=B("react.suspense"),N=B("react.suspense_list"),M=B("react.memo"),D=B("react.lazy"),I=B("react.block"),B("react.scope"),F=B("react.opaque.id"),R=B("react.debug_trace_mode"),P=B("react.offscreen"),L=B("react.legacy_hidden")}var z,U="function"===typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function V(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var G=!1;function q(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var a=s.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,u=i.length-1;1<=o&&0<=u&&a[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(a[o]!==i[u]){if(1!==o||1!==u)do{if(o--,0>--u||a[o]!==i[u])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function H(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 22:return e=q(e.type._render,!1);case 1:return e=q(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case O:return"Fragment";case k:return"Portal";case j:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return X(e.type);case I:return X(e._render);case D:t=e._payload,e=e._init;try{return X(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ce(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(ye).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var ke=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Ae=null;function Te(e){if(e=ea(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=na(t),Ee(e.stateNode,e.type,t))}}function Ne(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Me(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function De(e,t){return e(t)}function Ie(e,t,n,r,a){return e(t,n,r,a)}function Fe(){}var Re=De,Pe=!1,Le=!1;function Be(){null===Ce&&null===Ae||(Fe(),Me())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=na(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(f)try{var We={};Object.defineProperty(We,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch(me){Ue=!1}function Ve(e,t,n,r,a,i,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ge=!1,qe=null,He=!1,Xe=null,Ye={onError:function(e){Ge=!0,qe=e}};function Ke(e,t,n,r,a,i,o,u,s){Ge=!1,qe=null,Ve.apply(Ye,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(o(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var u=!1,s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u){for(s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,dt=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=pt(t,n,r,a,i),null!==t&&(null!==(t=ea(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=Qr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ea(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){bt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ea(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&bt(ut)&&(ut=null),null!==st&&bt(st)&&(st=null),null!==ct&&bt(ct)&&(ct=null),lt.forEach(yt),ft.forEach(yt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xt)))}function wt(e){function t(t){return _t(t,e)}if(0<ot.length){_t(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&_t(ut,e),null!==st&&_t(st,e),null!==ct&&_t(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)gt(n),null===n.blockedOn&&dt.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ot={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},jt={};function Et(e){if(St[e])return St[e];if(!Ot[e])return e;var t,n=Ot[e];for(t in n)if(n.hasOwnProperty(t)&&t in jt)return St[e]=n[t];return e}f&&(jt=document.createElement("div").style,"AnimationEvent"in window||(delete Ot.animationend.animation,delete Ot.animationiteration.animation,delete Ot.animationstart.animation),"TransitionEvent"in window||delete Ot.transitionend.transition);var Ct=Et("animationend"),At=Et("animationiteration"),Tt=Et("animationstart"),Nt=Et("transitionend"),Mt=new Map,Dt=new Map,It=["abort","abort",Ct,"animationEnd",At,"animationIteration",Tt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Dt.set(r,t),Mt.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Rt=8;function Pt(e){if(0!==(1&e))return Rt=15,1;if(0!==(2&e))return Rt=14,2;if(0!==(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!==(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!==(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!==(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!==(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!==(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Lt(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==i)r=i,a=Rt=15;else if(0!==(i=134217727&n)){var s=i&~o;0!==s?(r=Pt(s),a=Rt):0!==(u&=i)&&(r=Pt(u),a=Rt)}else 0!==(i=n&~o)?(r=Pt(i),a=Rt):0!==u&&(r=Pt(u),a=Rt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Pt(t),a<=Rt)return t;Rt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Gt(t)),r|=e[n],t&=~a;return r}function Bt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?zt(10,t):e;case 10:return 0===(e=Ut(192&~t))?zt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(qt(e)/Ht|0)|0},qt=Math.log,Ht=Math.LN2;var Xt=i.unstable_UserBlockingPriority,Yt=i.unstable_runWithPriority,Kt=!0;function $t(e,t,n,r){Pe||Fe();var a=Jt,i=Pe;Pe=!0;try{Ie(a,e,t,n,r)}finally{(Pe=i)||Be()}}function Zt(e,t,n,r){Yt(Xt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Kt)if((a=0===(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var i=Qt(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<ht.indexOf(e))return e=pt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return ut=mt(ut,e,t,n,r,a),!0;case"dragenter":return st=mt(st,e,t,n,r,a),!0;case"mouseover":return ct=mt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ft.set(i,mt(ft.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Mr(e,t,r,null,n)}}}function Qt(e,t,n,r){var a=je(r);if(null!==(a=Qr(a))){var i=$e(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Ze(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Mr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:un,this.isPropagationStopped=un,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(dn),pn=a({},dn,{view:0,detail:0}),vn=sn(pn),mn=a({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=sn(mn),bn=sn(a({},mn,{dataTransfer:0})),yn=sn(a({},pn,{relatedTarget:0})),xn=sn(a({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=sn(a({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=sn(a({},dn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},On={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return jn}var Cn=sn(a({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?On[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=sn(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(a({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(a({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=sn(a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Dn=[9,13,27,32],In=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Rn=f&&"TextEvent"in window&&!Fn,Pn=f&&(!In||Fn&&8<Fn&&11>=Fn),Ln=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=Ir(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Xn=null;function Yn(e){jr(e,0)}function Kn(e){if(Z(ta(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(f){var Jn;if(f){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Xn=Hn=null)}function nr(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];if(qn(t,Xn,e,je(e)),e=Yn,Pe)e(t);else{Pe=!0;try{De(e,t)}finally{Pe=!1,Be()}}}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},sr=Object.prototype.hasOwnProperty;function cr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=f&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,br=null,yr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Ir(gr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(It,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<_r.length;wr++)Dt.set(_r[wr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,u,s,c){if(Ke.apply(this,arguments),Ge){if(!Ge)throw Error(o(198));var l=qe;Ge=!1,qe=null,He||(He=!0,Xe=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==i&&a.isPropagationStopped())break e;Sr(a,u,c),i=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==i&&a.isPropagationStopped())break e;Sr(a,u,c),i=s}}}if(He)throw e=Xe,He=!1,Xe=null,e}function Er(e,t){var n=ra(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Cr]||(e[Cr]=!0,u.forEach((function(t){Or.has(t)||Tr(t,!1,e,null),Tr(t,!0,e,null)})))}function Tr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Or.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=ra(i),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(a|=4),Nr(i,e,a,t),o.add(u))}function Nr(e,t,n,r){var a=Dt.get(t);switch(void 0===a?2:a){case 0:a=$t;break;case 1:a=Zt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===a||8===u.nodeType&&u.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===a||8===s.nodeType&&s.parentNode===a))return;o=o.return}for(;null!==u;){if(null===(o=Qr(u)))return;if(5===(s=o.tag)||6===s){r=i=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Le)return e(t,n);Le=!0;try{Re(e,t,n)}finally{Le=!1,Be()}}((function(){var r=i,a=je(n),o=[];e:{var u=Mt.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=Cn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Ct:case At:case Tt:s=xn;break;case Nt:s=Nn;break;case"scroll":s=vn;break;case"wheel":s=Mn;break;case"copy":case"cut":case"paste":s=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=ze(p,d))&&l.push(Dr(p,v,h)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,a),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Qr(c)&&!c[Zr])&&(s||u)&&(u=a.window===a?a:(u=a.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?Qr(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=gn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==s?u:ta(s),h=null==c?u:ta(c),(u=new l(v,p+"leave",s,n,a)).target=f,u.relatedTarget=h,v=null,Qr(a)===r&&((l=new l(d,p+"enter",c,n,a)).target=h,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,p=0,h=l=s;h;h=Fr(h))p++;for(h=0,v=d;v;v=Fr(v))h++;for(;0<p-h;)l=Fr(l),p--;for(;0<h-p;)d=Fr(d),h--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Fr(l),d=Fr(d)}l=null}else l=null;null!==s&&Rr(o,u,s,l,!1),null!==c&&null!==f&&Rr(o,f,c,l,!0)}if("select"===(s=(u=r?ta(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Gn(u))if(Zn)m=or;else{m=ar;var g=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ir);switch(m&&(m=m(e,r))?qn(o,m,n,a):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ae(u,"number",u.value)),g=r?ta(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,br=null);break;case"focusout":br=gr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var b;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Wn?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Pn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Wn&&(b=rn()):(tn="value"in(en=a)?en.value:en.textContent,Wn=!0)),0<(g=Ir(r,y)).length&&(y=new wn(y,e,null,n,a),o.push({event:y,listeners:g}),b?y.data=b:null!==(b=Un(n))&&(y.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!In&&zn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ir(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=b))}jr(o,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ir(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=ze(e,n))&&r.unshift(Dr(e,i,a)),null!=(i=ze(e,t))&&r.push(Dr(e,i,a))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Rr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,a?null!=(s=ze(n,i))&&o.unshift(Dr(n,s,u)):a||null!=(s=ze(n,i))&&o.push(Dr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Pr(){}var Lr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Vr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Yr=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Yr,$r="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,Jr="__reactEvents$"+Yr;function Qr(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Kr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[Kr])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ea(e){return!(e=e[Kr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ta(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function na(e){return e[$r]||null}function ra(e){var t=e[Jr];return void 0===t&&(t=e[Jr]=new Set),t}var aa=[],ia=-1;function oa(e){return{current:e}}function ua(e){0>ia||(e.current=aa[ia],aa[ia]=null,ia--)}function sa(e,t){ia++,aa[ia]=e.current,e.current=t}var ca={},la=oa(ca),fa=oa(!1),da=ca;function ha(e,t){var n=e.type.contextTypes;if(!n)return ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function va(){ua(fa),ua(la)}function ma(e,t,n){if(la.current!==ca)throw Error(o(168));sa(la,t),sa(fa,n)}function ga(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,X(t)||"Unknown",i));return a({},n,r)}function ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ca,da=la.current,sa(la,e),sa(fa,fa.current),!0}function ya(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ga(e,t,da),r.__reactInternalMemoizedMergedChildContext=e,ua(fa),ua(la),sa(la,e)):ua(fa),sa(fa,n)}var xa=null,_a=null,wa=i.unstable_runWithPriority,ka=i.unstable_scheduleCallback,Oa=i.unstable_cancelCallback,Sa=i.unstable_shouldYield,ja=i.unstable_requestPaint,Ea=i.unstable_now,Ca=i.unstable_getCurrentPriorityLevel,Aa=i.unstable_ImmediatePriority,Ta=i.unstable_UserBlockingPriority,Na=i.unstable_NormalPriority,Ma=i.unstable_LowPriority,Da=i.unstable_IdlePriority,Ia={},Fa=void 0!==ja?ja:function(){},Ra=null,Pa=null,La=!1,Ba=Ea(),za=1e4>Ba?Ea:function(){return Ea()-Ba};function Ua(){switch(Ca()){case Aa:return 99;case Ta:return 98;case Na:return 97;case Ma:return 96;case Da:return 95;default:throw Error(o(332))}}function Wa(e){switch(e){case 99:return Aa;case 98:return Ta;case 97:return Na;case 96:return Ma;case 95:return Da;default:throw Error(o(332))}}function Va(e,t){return e=Wa(e),wa(e,t)}function Ga(e,t,n){return e=Wa(e),ka(e,t,n)}function qa(){if(null!==Pa){var e=Pa;Pa=null,Oa(e)}Ha()}function Ha(){if(!La&&null!==Ra){La=!0;var e=0;try{var t=Ra;Va(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ra=null}catch(n){throw null!==Ra&&(Ra=Ra.slice(e+1)),ka(Aa,qa),n}finally{La=!1}}}var Xa=_.ReactCurrentBatchConfig;function Ya(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ka=oa(null),$a=null,Za=null,Ja=null;function Qa(){Ja=Za=$a=null}function ei(e){var t=Ka.current;ua(Ka),e.type._context._currentValue=t}function ti(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ni(e,t){$a=e,Ja=Za=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Io=!0),e.firstContext=null)}function ri(e,t){if(Ja!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Ja=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Za){if(null===$a)throw Error(o(308));Za=t,$a.dependencies={lanes:0,firstContext:t,responders:null}}else Za=Za.next=t;return e._currentValue}var ai=!1;function ii(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function si(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function li(e,t,n,r){var i=e.updateQueue;ai=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var d=(f=f.updateQueue).lastBaseUpdate;d!==u&&(null===d?f.firstBaseUpdate=l:d.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(d=i.baseState,u=0,f=l=c=null;;){s=o.lane;var h=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,s);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(h,d,s):p)||void 0===s)break e;d=a({},d,s);break e;case 2:ai=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else h={eventTime:h,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=h,c=d):f=f.next=h,u|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===f&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=f,Lu|=u,e.lanes=u,e.memoizedState=d}}function fi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var di=(new r.Component).refs;function hi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pi={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cs(),a=ls(e),i=ui(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),si(e,i),fs(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cs(),a=ls(e),i=ui(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),si(e,i),fs(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cs(),r=ls(e),a=ui(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),si(e,a),fs(e,r,n)}};function vi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(a,i))}function mi(e,t,n){var r=!1,a=ca,i=t.contextType;return"object"===typeof i&&null!==i?i=ri(i):(a=pa(t)?da:la.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ha(e,a):ca),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function gi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pi.enqueueReplaceState(t,t.state,null)}function bi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=di,ii(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=ri(i):(i=pa(t)?da:la.current,a.context=ha(e,i)),li(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(hi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&pi.enqueueReplaceState(a,a.state,null),li(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var yi=Array.isArray;function xi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=r.refs;t===di&&(t=r.refs={}),null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _i(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Vs(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Xs(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=xi(e,t,n),r.return=e,r):((r=Gs(n.type,n.key,n.props,null,e.mode,r)).ref=xi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ys(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=qs(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Gs(t.type,t.key,t.props,null,e.mode,n)).ref=xi(e,null,t),n.return=e,n;case k:return(t=Ys(t,e.mode,n)).return=e,t}if(yi(t)||W(t))return(t=qs(t,e.mode,n,null)).return=e,t;_i(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===O?f(e,t,n.props.children,r,a):c(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null}if(yi(n)||W(n))return null!==a?null:f(e,t,n,r,null);_i(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===O?f(t,e,r.props.children,a,r.key):c(t,e,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(yi(r)||W(r))return f(t,e=e.get(n)||null,r,a,null);_i(t,r)}return null}function v(a,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(a,f,u[v],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(a,f),o=i(g,o,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===u.length)return n(a,f),c;if(null===f){for(;v<u.length;v++)null!==(f=d(a,u[v],s))&&(o=i(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(a,f);v<u.length;v++)null!==(m=p(f,a,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(a,e)})),c}function m(a,u,s,c){var l=W(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,g=null,b=s.next();null!==v&&!b.done;m++,b=s.next()){v.index>m?(g=v,v=null):g=v.sibling;var y=h(a,v,b.value,c);if(null===y){null===v&&(v=g);break}e&&v&&null===y.alternate&&t(a,v),u=i(y,u,m),null===f?l=y:f.sibling=y,f=y,v=g}if(b.done)return n(a,v),l;if(null===v){for(;!b.done;m++,b=s.next())null!==(b=d(a,b.value,c))&&(u=i(b,u,m),null===f?l=b:f.sibling=b,f=b);return l}for(v=r(a,v);!b.done;m++,b=s.next())null!==(b=p(v,a,m,b.value,c))&&(e&&null!==b.alternate&&v.delete(null===b.key?m:b.key),u=i(b,u,m),null===f?l=b:f.sibling=b,f=b);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,s){var c="object"===typeof i&&null!==i&&i.type===O&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case w:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(i.type===O){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}break;default:if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=xi(e,c,i),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}i.type===O?((r=qs(i.props.children,e.mode,s,i.key)).return=e,e=r):((s=Gs(i.type,i.key,i.props,null,e.mode,s)).ref=xi(e,r,i),s.return=e,e=s)}return u(e);case k:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ys(i,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Xs(i,e.mode,s)).return=e,e=r),u(e);if(yi(i))return v(e,r,i,s);if(W(i))return m(e,r,i,s);if(l&&_i(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,X(e.type)||"Component"))}return n(e,r)}}var ki=wi(!0),Oi=wi(!1),Si={},ji=oa(Si),Ei=oa(Si),Ci=oa(Si);function Ai(e){if(e===Si)throw Error(o(174));return e}function Ti(e,t){switch(sa(Ci,t),sa(Ei,e),sa(ji,Si),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ua(ji),sa(ji,t)}function Ni(){ua(ji),ua(Ei),ua(Ci)}function Mi(e){Ai(Ci.current);var t=Ai(ji.current),n=pe(t,e.type);t!==n&&(sa(Ei,e),sa(ji,n))}function Di(e){Ei.current===e&&(ua(ji),ua(Ei))}var Ii=oa(0);function Fi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ri=null,Pi=null,Li=!1;function Bi(e,t){var n=Us(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ui(e){if(Li){var t=Pi;if(t){var n=t;if(!zi(e,t)){if(!(t=qr(n.nextSibling))||!zi(e,t))return e.flags=-1025&e.flags|2,Li=!1,void(Ri=e);Bi(Ri,n)}Ri=e,Pi=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Li=!1,Ri=e}}function Wi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function Vi(e){if(e!==Ri)return!1;if(!Li)return Wi(e),Li=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=Pi;t;)Bi(e,t),t=qr(t.nextSibling);if(Wi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pi=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pi=null}}else Pi=Ri?qr(e.stateNode.nextSibling):null;return!0}function Gi(){Pi=Ri=null,Li=!1}var qi=[];function Hi(){for(var e=0;e<qi.length;e++)qi[e]._workInProgressVersionPrimary=null;qi.length=0}var Xi=_.ReactCurrentDispatcher,Yi=_.ReactCurrentBatchConfig,Ki=0,$i=null,Zi=null,Ji=null,Qi=!1,eo=!1;function to(){throw Error(o(321))}function no(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function ro(e,t,n,r,a,i){if(Ki=i,$i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xi.current=null===e||null===e.memoizedState?To:No,e=n(r,a),eo){i=0;do{if(eo=!1,!(25>i))throw Error(o(301));i+=1,Ji=Zi=null,t.updateQueue=null,Xi.current=Mo,e=n(r,a)}while(eo)}if(Xi.current=Ao,t=null!==Zi&&null!==Zi.next,Ki=0,Ji=Zi=$i=null,Qi=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ji?$i.memoizedState=Ji=e:Ji=Ji.next=e,Ji}function io(){if(null===Zi){var e=$i.alternate;e=null!==e?e.memoizedState:null}else e=Zi.next;var t=null===Ji?$i.memoizedState:Ji.next;if(null!==t)Ji=t,Zi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zi=e).memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},null===Ji?$i.memoizedState=Ji=e:Ji=Ji.next=e}return Ji}function oo(e,t){return"function"===typeof t?t(e):t}function uo(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var u=a.next;a.next=i.next,i.next=u}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var s=u=i=null,c=a;do{var l=c.lane;if((Ki&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,i=r):s=s.next=f,$i.lanes|=l,Lu|=l}c=c.next}while(null!==c&&c!==a);null===s?i=r:s.next=u,ur(r,t.memoizedState)||(Io=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function so(e){var t=io(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var u=a=a.next;do{i=e(i,u.action),u=u.next}while(u!==a);ur(i,t.memoizedState)||(Io=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function co(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Ki&e)===e)&&(t._workInProgressVersionPrimary=r,qi.push(t))),e)return n(t._source);throw qi.push(t),Error(o(350))}function lo(e,t,n,r){var a=Tu;if(null===a)throw Error(o(349));var i=t._getVersion,u=i(t._source),s=Xi.current,c=s.useState((function(){return co(a,t,n)})),l=c[1],f=c[0];c=Ji;var d=e.memoizedState,h=d.refs,p=h.getSnapshot,v=d.source;d=d.subscribe;var m=$i;return e.memoizedState={refs:h,source:t,subscribe:r},s.useEffect((function(){h.getSnapshot=n,h.setSnapshot=l;var e=i(t._source);if(!ur(u,e)){e=n(t._source),ur(f,e)||(l(e),e=ls(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var s=31-Gt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=ls(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),ur(p,n)&&ur(v,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:f}).dispatch=l=Co.bind(null,$i,e),c.queue=e,c.baseQueue=null,f=co(a,t,n),c.memoizedState=c.baseState=f),f}function fo(e,t,n){return lo(io(),e,t,n)}function ho(e){var t=ao();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Co.bind(null,$i,e),[t.memoizedState,e]}function po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$i.updateQueue)?(t={lastEffect:null},$i.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(e){return e={current:e},ao().memoizedState=e}function mo(){return io().memoizedState}function go(e,t,n,r){var a=ao();$i.flags|=e,a.memoizedState=po(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var a=io();r=void 0===r?null:r;var i=void 0;if(null!==Zi){var o=Zi.memoizedState;if(i=o.destroy,null!==r&&no(r,o.deps))return void po(t,n,i,r)}$i.flags|=e,a.memoizedState=po(1|t,n,i,r)}function yo(e,t){return go(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function _o(e,t){return bo(4,2,e,t)}function wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,wo.bind(null,t,e),n)}function Oo(){}function So(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jo(e,t){var n=io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Eo(e,t){var n=Ua();Va(98>n?98:n,(function(){e(!0)})),Va(97<n?97:n,(function(){var n=Yi.transition;Yi.transition=1;try{e(!1),t()}finally{Yi.transition=n}}))}function Co(e,t,n){var r=cs(),a=ls(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===$i||null!==o&&o===$i)eo=Qi=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(i.eagerReducer=o,i.eagerState=s,ur(s,u))return}catch(c){}fs(e,a,r)}}var Ao={readContext:ri,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},To={readContext:ri,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:ri,useEffect:yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,go(4,2,wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Co.bind(null,$i,e),[r.memoizedState,e]},useRef:vo,useState:ho,useDebugValue:Oo,useDeferredValue:function(e){var t=ho(e),n=t[0],r=t[1];return yo((function(){var t=Yi.transition;Yi.transition=1;try{r(e)}finally{Yi.transition=t}}),[e]),n},useTransition:function(){var e=ho(!1),t=e[0];return vo(e=Eo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ao();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lo(r,e,t,n)},useOpaqueIdentifier:function(){if(Li){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=ho(t)[1];return 0===(2&$i.mode)&&($i.flags|=516,po(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return ho(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},No={readContext:ri,useCallback:So,useContext:ri,useEffect:xo,useImperativeHandle:ko,useLayoutEffect:_o,useMemo:jo,useReducer:uo,useRef:mo,useState:function(){return uo(oo)},useDebugValue:Oo,useDeferredValue:function(e){var t=uo(oo),n=t[0],r=t[1];return xo((function(){var t=Yi.transition;Yi.transition=1;try{r(e)}finally{Yi.transition=t}}),[e]),n},useTransition:function(){var e=uo(oo)[0];return[mo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return uo(oo)[0]},unstable_isNewReconciler:!1},Mo={readContext:ri,useCallback:So,useContext:ri,useEffect:xo,useImperativeHandle:ko,useLayoutEffect:_o,useMemo:jo,useReducer:so,useRef:mo,useState:function(){return so(oo)},useDebugValue:Oo,useDeferredValue:function(e){var t=so(oo),n=t[0],r=t[1];return xo((function(){var t=Yi.transition;Yi.transition=1;try{r(e)}finally{Yi.transition=t}}),[e]),n},useTransition:function(){var e=so(oo)[0];return[mo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Do=_.ReactCurrentOwner,Io=!1;function Fo(e,t,n,r){t.child=null===e?Oi(t,null,n,r):ki(t,e.child,n,r)}function Ro(e,t,n,r,a){n=n.render;var i=t.ref;return ni(t,a),r=ro(e,t,n,r,i,a),null===e||Io?(t.flags|=1,Fo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,nu(e,t,a))}function Po(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Ws(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gs(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Lo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)?nu(e,t,i):(t.flags|=1,(e=Vs(o,r)).ref=t.ref,e.return=t,t.child=e)}function Lo(e,t,n,r,a,i){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Io=!1,0===(i&a))return t.lanes=e.lanes,nu(e,t,i);0!==(16384&e.flags)&&(Io=!0)}return Uo(e,t,n,r,i)}function Bo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},ys(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ys(t,e),null;t.memoizedState={baseLanes:0},ys(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ys(t,r);return Fo(e,t,a,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Uo(e,t,n,r,a){var i=pa(n)?da:la.current;return i=ha(t,i),ni(t,a),n=ro(e,t,n,r,i,a),null===e||Io?(t.flags|=1,Fo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,nu(e,t,a))}function Wo(e,t,n,r,a){if(pa(n)){var i=!0;ba(t)}else i=!1;if(ni(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mi(t,n,r),bi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ri(c):c=ha(t,c=pa(n)?da:la.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&gi(t,o,r,c),ai=!1;var d=t.memoizedState;o.state=d,li(t,r,o,a),s=t.memoizedState,u!==r||d!==s||fa.current||ai?("function"===typeof l&&(hi(t,n,l,r),s=t.memoizedState),(u=ai||vi(t,n,u,r,d,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,oi(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ya(t.type,u),o.props=c,f=t.pendingProps,d=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=ri(s):s=ha(t,s=pa(n)?da:la.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||d!==s)&&gi(t,o,r,s),ai=!1,d=t.memoizedState,o.state=d,li(t,r,o,a);var p=t.memoizedState;u!==f||d!==p||fa.current||ai?("function"===typeof h&&(hi(t,n,h,r),p=t.memoizedState),(c=ai||vi(t,n,c,r,d,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Vo(e,t,n,r,i,a)}function Vo(e,t,n,r,a,i){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&ya(t,n,!1),nu(e,t,i);r=t.stateNode,Do.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,u,i)):Fo(e,t,u,i),t.memoizedState=r.state,a&&ya(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ma(0,t.context,!1),Ti(e,t.containerInfo)}var qo,Ho,Xo,Yo={dehydrated:null,retryLane:0};function Ko(e,t,n){var r,a=t.pendingProps,i=Ii.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),sa(Ii,1&i),null===e?(void 0!==a.fallback&&Ui(t),e=a.children,i=a.fallback,o?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"===typeof a.unstable_expectedLoadTime?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=Hs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=Jo(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,a):(n=Zo(e,t,a.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Hs(t,a,0,null),n=qs(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function Zo(e,t,n,r){var a=e.child;return e=a.sibling,n=Vs(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Jo(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Vs(o,u),null!==e?r=Vs(e,r):(r=qs(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Qo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ti(e.return,t)}function eu(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function tu(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ii.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n);else if(19===e.tag)Qo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(sa(Ii,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Fi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),eu(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Fi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}eu(t,!0,n,null,i,t.lastEffect);break;case"together":eu(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function nu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Vs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ru(e,t){if(!Li)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function au(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pa(t.type)&&va(),null;case 3:return Ni(),ua(fa),ua(la),Hi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Vi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Di(t);var i=Ai(Ci.current);if(n=t.type,null!==e&&null!=t.stateNode)Ho(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ai(ji.current),Vi(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Kr]=t,r[$r]=u,n){case"dialog":Er("cancel",r),Er("close",r);break;case"iframe":case"object":case"embed":Er("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Er(kr[e],r);break;case"source":Er("error",r);break;case"img":case"image":case"link":Er("error",r),Er("load",r);break;case"details":Er("toggle",r);break;case"input":ee(r,u),Er("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Er("invalid",r);break;case"textarea":se(r,u),Er("invalid",r)}for(var c in Oe(n,u),e=null,u)u.hasOwnProperty(c)&&(i=u[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):s.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Er("scroll",r));switch(n){case"input":$(r),re(r,u,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Pr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===fe&&(e=he(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Kr]=t,e[$r]=r,qo(e,t),t.stateNode=e,c=Se(n,r),n){case"dialog":Er("cancel",e),Er("close",e),i=r;break;case"iframe":case"object":case"embed":Er("load",e),i=r;break;case"video":case"audio":for(i=0;i<kr.length;i++)Er(kr[i],e);i=r;break;case"source":Er("error",e),i=r;break;case"img":case"image":case"link":Er("error",e),Er("load",e),i=r;break;case"details":Er("toggle",e),i=r;break;case"input":ee(e,r),i=Q(e,r),Er("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Er("invalid",e);break;case"textarea":se(e,r),i=ue(e,r),Er("invalid",e);break;default:i=r}Oe(n,i);var l=i;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?we(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&ge(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&be(e,f):"number"===typeof f&&be(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Er("scroll",e):null!=f&&x(e,u,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Pr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ai(Ci.current),Ai(ji.current),Vi(t)?(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Kr]=t,t.stateNode=r)}return null;case 13:return ua(Ii),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Vi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ii.current)?0===Fu&&(Fu=3):(0!==Fu&&3!==Fu||(Fu=4),null===Tu||0===(134217727&Lu)&&0===(134217727&Bu)||vs(Tu,Mu))),(r||n)&&(t.flags|=4),null);case 4:return Ni(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ei(t),null;case 17:return pa(t.type)&&va(),null;case 19:if(ua(Ii),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ru(r,!1);else{if(0!==Fu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fi(e))){for(t.flags|=64,ru(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return sa(Ii,1&Ii.current|2),t.child}e=e.sibling}null!==r.tail&&za()>Vu&&(t.flags|=64,u=!0,ru(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fi(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ru(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Li)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*za()-r.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=64,u=!0,ru(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=za(),n.sibling=null,t=Ii.current,sa(Ii,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function iu(e){switch(e.tag){case 1:pa(e.type)&&va();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ni(),ua(fa),ua(la),Hi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Di(e),null;case 13:return ua(Ii),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ua(Ii),null;case 4:return Ni(),null;case 10:return ei(e),null;case 23:case 24:return xs(),null;default:return null}}function ou(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ai(ji.current);var o,u=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),u=[];break;case"option":i=ie(e,i),r=ie(e,r),u=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),u=[];break;case"textarea":i=ue(e,i),r=ue(e,r),u=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Pr)}for(f in Oe(n,r),n=null,i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&null!=i[f])if("style"===f){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=i?i[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Er("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===F?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var su="function"===typeof WeakMap?WeakMap:Map;function cu(e,t,n){(n=ui(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,Yu=r),uu(0,t)},n}function lu(e,t,n){(n=ui(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return uu(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this),uu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fu="function"===typeof WeakSet?WeakSet:Set;function du(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ps(e,n)}else t.current=null}function hu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ya(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function pu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Is(n,e),Ds(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ya(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function vu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=_e("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mu(e,t){if(_a&&"function"===typeof _a.onCommitFiberUnmount)try{_a.onCommitFiberUnmount(xa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Is(t,n);else{r=t;try{a()}catch(i){Ps(r,i)}}n=n.next}while(n!==e)}break;case 1:if(du(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Ps(t,i)}break;case 5:du(t);break;case 4:wu(e,t)}}function gu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function yu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(be(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):_u(e,n,t)}function xu(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function _u(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function wu(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var u=e,s=a,c=s;;)if(mu(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=a.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(mu(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function ku(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,a),t=Se(e,r),a=0;a<i.length;a+=2){var u=i[a],s=i[a+1];"style"===u?we(n,s):"dangerouslySetInnerHTML"===u?ge(n,s):"children"===u?be(n,s):x(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Wu=za(),vu(t.child,!0)),void Ou(t);case 19:return void Ou(t);case 17:return;case 23:case 24:return void vu(t,null!==t.memoizedState)}throw Error(o(163))}function Ou(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Su(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ju=Math.ceil,Eu=_.ReactCurrentDispatcher,Cu=_.ReactCurrentOwner,Au=0,Tu=null,Nu=null,Mu=0,Du=0,Iu=oa(0),Fu=0,Ru=null,Pu=0,Lu=0,Bu=0,zu=0,Uu=null,Wu=0,Vu=1/0;function Gu(){Vu=za()+500}var qu,Hu=null,Xu=!1,Yu=null,Ku=null,$u=!1,Zu=null,Ju=90,Qu=[],es=[],ts=null,ns=0,rs=null,as=-1,is=0,os=0,us=null,ss=!1;function cs(){return 0!==(48&Au)?za():-1!==as?as:as=za()}function ls(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ua()?1:2;if(0===is&&(is=Pu),0!==Xa.transition){0!==os&&(os=null!==Uu?Uu.pendingLanes:0),e=is;var t=4186112&~os;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ua(),0!==(4&Au)&&98===e?e=zt(12,is):e=zt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),is),e}function fs(e,t,n){if(50<ns)throw ns=0,rs=null,Error(o(185));if(null===(e=ds(e,t)))return null;Vt(e,t,n),e===Tu&&(Bu|=t,4===Fu&&vs(e,Mu));var r=Ua();1===t?0!==(8&Au)&&0===(48&Au)?ms(e):(hs(e,n),0===Au&&(Gu(),qa())):(0===(4&Au)||98!==r&&99!==r||(null===ts?ts=new Set([e]):ts.add(e)),hs(e,n)),Uu=e}function ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function hs(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Gt(u),c=1<<s,l=i[s];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Pt(c);var f=Rt;i[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Lt(e,e===Tu?Mu:0),t=Rt,0===r)null!==n&&(n!==Ia&&Oa(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ia&&Oa(n)}15===t?(n=ms.bind(null,e),null===Ra?(Ra=[n],Pa=ka(Aa,Ha)):Ra.push(n),n=Ia):14===t?n=Ga(99,ms.bind(null,e)):n=Ga(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),ps.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function ps(e){if(as=-1,os=is=0,0!==(48&Au))throw Error(o(327));var t=e.callbackNode;if(Ms()&&e.callbackNode!==t)return null;var n=Lt(e,e===Tu?Mu:0);if(0===n)return null;var r=n,a=Au;Au|=16;var i=ks();for(Tu===e&&Mu===r||(Gu(),_s(e,r));;)try{js();break}catch(s){ws(e,s)}if(Qa(),Eu.current=i,Au=a,null!==Nu?r=0:(Tu=null,Mu=0,r=Fu),0!==(Pu&Bu))_s(e,0);else if(0!==r){if(2===r&&(Au|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Bt(e))&&(r=Os(e,n))),1===r)throw t=Ru,_s(e,0),vs(e,n),hs(e,za()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:As(e);break;case 3:if(vs(e,n),(62914560&n)===n&&10<(r=Wu+500-za())){if(0!==Lt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){cs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Wr(As.bind(null,e),r);break}As(e);break;case 4:if(vs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var u=31-Gt(n);i=1<<u,(u=r[u])>a&&(a=u),n&=~i}if(n=a,10<(n=(120>(n=za()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ju(n/1960))-n)){e.timeoutHandle=Wr(As.bind(null,e),n);break}As(e);break;case 5:As(e);break;default:throw Error(o(329))}}return hs(e,za()),e.callbackNode===t?ps.bind(null,e):null}function vs(e,t){for(t&=~zu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function ms(e){if(0!==(48&Au))throw Error(o(327));if(Ms(),e===Tu&&0!==(e.expiredLanes&Mu)){var t=Mu,n=Os(e,t);0!==(Pu&Bu)&&(n=Os(e,t=Lt(e,t)))}else n=Os(e,t=Lt(e,0));if(0!==e.tag&&2===n&&(Au|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Bt(e))&&(n=Os(e,t))),1===n)throw n=Ru,_s(e,0),vs(e,t),hs(e,za()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,As(e),hs(e,za()),null}function gs(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(Gu(),qa())}}function bs(e,t){var n=Au;Au&=-2,Au|=8;try{return e(t)}finally{0===(Au=n)&&(Gu(),qa())}}function ys(e,t){sa(Iu,Du),Du|=t,Pu|=t}function xs(){Du=Iu.current,ua(Iu)}function _s(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Vr(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&va();break;case 3:Ni(),ua(fa),ua(la),Hi();break;case 5:Di(r);break;case 4:Ni();break;case 13:case 19:ua(Ii);break;case 10:ei(r);break;case 23:case 24:xs()}n=n.return}Tu=e,Nu=Vs(e.current,null),Mu=Du=Pu=t,Fu=0,Ru=null,zu=Bu=Lu=0}function ws(e,t){for(;;){var n=Nu;try{if(Qa(),Xi.current=Ao,Qi){for(var r=$i.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}Qi=!1}if(Ki=0,Ji=Zi=$i=null,eo=!1,Cu.current=null,null===n||null===n.return){Fu=1,Ru=t,Nu=null;break}e:{var i=e,o=n.return,u=n,s=t;if(t=Mu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ii.current),d=o;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=d.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(h){var m=d.updateQueue;if(null===m){var g=new Set;g.add(c),d.updateQueue=g}else m.add(c);if(0===(2&d.mode)){if(d.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var b=ui(-1,1);b.tag=2,si(u,b)}u.lanes|=1;break e}s=void 0,u=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new su,s=new Set,y.set(c,s)):void 0===(s=y.get(c))&&(s=new Set,y.set(c,s)),!s.has(u)){s.add(u);var x=Ls.bind(null,i,c,u);c.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);s=Error((X(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fu&&(Fu=2),s=ou(s,u),d=o;do{switch(d.tag){case 3:i=s,d.flags|=4096,t&=-t,d.lanes|=t,ci(d,cu(0,i,t));break e;case 1:i=s;var _=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ku||!Ku.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,ci(d,lu(d,i,t));break e}}d=d.return}while(null!==d)}Cs(n)}catch(k){t=k,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function ks(){var e=Eu.current;return Eu.current=Ao,null===e?Ao:e}function Os(e,t){var n=Au;Au|=16;var r=ks();for(Tu===e&&Mu===t||_s(e,t);;)try{Ss();break}catch(a){ws(e,a)}if(Qa(),Au=n,Eu.current=r,null!==Nu)throw Error(o(261));return Tu=null,Mu=0,Fu}function Ss(){for(;null!==Nu;)Es(Nu)}function js(){for(;null!==Nu&&!Sa();)Es(Nu)}function Es(e){var t=qu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?Cs(e):Nu=t,Cu.current=null}function Cs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=au(n,t,Du)))return void(Nu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Du)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=iu(t)))return n.flags&=2047,void(Nu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Fu&&(Fu=5)}function As(e){var t=Ua();return Va(99,Ts.bind(null,e,t)),null}function Ts(e,t){do{Ms()}while(null!==Zu);if(0!==(48&Au))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<i;){var c=31-Gt(i),l=1<<c;a[c]=0,u[c]=-1,s[c]=-1,i&=~l}if(null!==ts&&0===(24&r)&&ts.has(e)&&ts.delete(e),e===Tu&&(Nu=Tu=null,Mu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Au,Au|=32,Cu.current=null,Lr=Kt,pr(u=hr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(j){s=null;break e}var f=0,d=-1,h=-1,p=0,v=0,m=u,g=null;t:for(;;){for(var b;m!==s||0!==i&&3!==m.nodeType||(d=f+i),m!==c||0!==l&&3!==m.nodeType||(h=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(b=m.firstChild);)g=m,m=b;for(;;){if(m===u)break t;if(g===s&&++p===i&&(d=f),g===c&&++v===l&&(h=f),null!==(b=m.nextSibling))break;g=(m=g).parentNode}m=b}s=-1===d||-1===h?null:{start:d,end:h}}else s=null;s=s||{start:0,end:0}}else s=null;Br={focusedElem:u,selectionRange:s},Kt=!1,us=null,ss=!1,Hu=r;do{try{Ns()}catch(j){if(null===Hu)throw Error(o(330));Ps(Hu,j),Hu=Hu.nextEffect}}while(null!==Hu);us=null,Hu=r;do{try{for(u=e;null!==Hu;){var y=Hu.flags;if(16&y&&be(Hu.stateNode,""),128&y){var x=Hu.alternate;if(null!==x){var _=x.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&y){case 2:yu(Hu),Hu.flags&=-3;break;case 6:yu(Hu),Hu.flags&=-3,ku(Hu.alternate,Hu);break;case 1024:Hu.flags&=-1025;break;case 1028:Hu.flags&=-1025,ku(Hu.alternate,Hu);break;case 4:ku(Hu.alternate,Hu);break;case 8:wu(u,s=Hu);var w=s.alternate;gu(s),null!==w&&gu(w)}Hu=Hu.nextEffect}}catch(j){if(null===Hu)throw Error(o(330));Ps(Hu,j),Hu=Hu.nextEffect}}while(null!==Hu);if(_=Br,x=hr(),y=_.focusedElem,u=_.selectionRange,x!==y&&y&&y.ownerDocument&&dr(y.ownerDocument.documentElement,y)){null!==u&&pr(y)&&(x=u.start,void 0===(_=u.end)&&(_=x),"selectionStart"in y?(y.selectionStart=x,y.selectionEnd=Math.min(_,y.value.length)):(_=(x=y.ownerDocument||document)&&x.defaultView||window).getSelection&&(_=_.getSelection(),s=y.textContent.length,w=Math.min(u.start,s),u=void 0===u.end?w:Math.min(u.end,s),!_.extend&&w>u&&(s=u,u=w,w=s),s=fr(y,w),i=fr(y,u),s&&i&&(1!==_.rangeCount||_.anchorNode!==s.node||_.anchorOffset!==s.offset||_.focusNode!==i.node||_.focusOffset!==i.offset)&&((x=x.createRange()).setStart(s.node,s.offset),_.removeAllRanges(),w>u?(_.addRange(x),_.extend(i.node,i.offset)):(x.setEnd(i.node,i.offset),_.addRange(x))))),x=[];for(_=y;_=_.parentNode;)1===_.nodeType&&x.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<x.length;y++)(_=x[y]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Kt=!!Lr,Br=Lr=null,e.current=n,Hu=r;do{try{for(y=e;null!==Hu;){var k=Hu.flags;if(36&k&&pu(y,Hu.alternate,Hu),128&k){x=void 0;var O=Hu.ref;if(null!==O){var S=Hu.stateNode;switch(Hu.tag){case 5:x=S;break;default:x=S}"function"===typeof O?O(x):O.current=x}}Hu=Hu.nextEffect}}catch(j){if(null===Hu)throw Error(o(330));Ps(Hu,j),Hu=Hu.nextEffect}}while(null!==Hu);Hu=null,Fa(),Au=a}else e.current=n;if($u)$u=!1,Zu=e,Ju=t;else for(Hu=r;null!==Hu;)t=Hu.nextEffect,Hu.nextEffect=null,8&Hu.flags&&((k=Hu).sibling=null,k.stateNode=null),Hu=t;if(0===(r=e.pendingLanes)&&(Ku=null),1===r?e===rs?ns++:(ns=0,rs=e):ns=0,n=n.stateNode,_a&&"function"===typeof _a.onCommitFiberRoot)try{_a.onCommitFiberRoot(xa,n,void 0,64===(64&n.current.flags))}catch(j){}if(hs(e,za()),Xu)throw Xu=!1,e=Yu,Yu=null,e;return 0!==(8&Au)||qa(),null}function Ns(){for(;null!==Hu;){var e=Hu.alternate;ss||null===us||(0!==(8&Hu.flags)?et(Hu,us)&&(ss=!0):13===Hu.tag&&Su(e,Hu)&&et(Hu,us)&&(ss=!0));var t=Hu.flags;0!==(256&t)&&hu(e,Hu),0===(512&t)||$u||($u=!0,Ga(97,(function(){return Ms(),null}))),Hu=Hu.nextEffect}}function Ms(){if(90!==Ju){var e=97<Ju?97:Ju;return Ju=90,Va(e,Fs)}return!1}function Ds(e,t){Qu.push(t,e),$u||($u=!0,Ga(97,(function(){return Ms(),null})))}function Is(e,t){es.push(t,e),$u||($u=!0,Ga(97,(function(){return Ms(),null})))}function Fs(){if(null===Zu)return!1;var e=Zu;if(Zu=null,0!==(48&Au))throw Error(o(331));var t=Au;Au|=32;var n=es;es=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],u=a.destroy;if(a.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===i)throw Error(o(330));Ps(i,c)}}for(n=Qu,Qu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var s=a.create;a.destroy=s()}catch(c){if(null===i)throw Error(o(330));Ps(i,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Au=t,qa(),!0}function Rs(e,t,n){si(e,t=cu(0,t=ou(n,t),1)),t=cs(),null!==(e=ds(e,1))&&(Vt(e,1,t),hs(e,t))}function Ps(e,t){if(3===e.tag)Rs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Rs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){var a=lu(n,e=ou(t,e),1);if(si(n,a),a=cs(),null!==(n=ds(n,1)))Vt(n,1,a),hs(n,a);else if("function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Ls(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cs(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(Mu&n)===n&&(4===Fu||3===Fu&&(62914560&Mu)===Mu&&500>za()-Wu?_s(e,0):zu|=n),hs(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ua()?1:2:(0===is&&(is=Pu),0===(t=Ut(62914560&~is))&&(t=4194304))),n=cs(),null!==(e=ds(e,t))&&(Vt(e,t,n),hs(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(e,t,n,r){return new zs(e,t,n,r)}function Ws(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vs(e,t){var n=e.alternate;return null===n?((n=Us(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gs(e,t,n,r,a,i){var u=2;if(r=e,"function"===typeof e)Ws(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case O:return qs(n.children,a,i,t);case R:u=8,a|=16;break;case S:u=8,a|=1;break;case j:return(e=Us(12,n,t,8|a)).elementType=j,e.type=j,e.lanes=i,e;case T:return(e=Us(13,n,t,a)).type=T,e.elementType=T,e.lanes=i,e;case N:return(e=Us(19,n,t,a)).elementType=N,e.lanes=i,e;case P:return Hs(n,a,i,t);case L:return(e=Us(24,n,t,a)).elementType=L,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case C:u=9;break e;case A:u=11;break e;case M:u=14;break e;case D:u=16,r=null;break e;case I:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Us(u,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function qs(e,t,n,r){return(e=Us(7,e,r,t)).lanes=n,e}function Hs(e,t,n,r){return(e=Us(23,e,r,t)).elementType=P,e.lanes=n,e}function Xs(e,t,n){return(e=Us(6,e,null,t)).lanes=n,e}function Ys(e,t,n){return(t=Us(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ks(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.mutableSourceEagerHydrationData=null}function $s(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zs(e,t,n,r){var a=t.current,i=cs(),u=ls(a);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(pa(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(pa(c)){n=ga(n,c,s);break e}}n=s}else n=ca;return null===t.context?t.context=n:t.pendingContext=n,(t=ui(i,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),si(a,t),fs(a,u,i),u}function Js(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Qs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Qs(e,t),(e=e.alternate)&&Qs(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ks(e,t,null!=n&&!0===n.hydrate),t=Us(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ii(t),e[Zr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var u=a;a=function(){var e=Js(o);u.call(e)}}Zs(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var s=a;a=function(){var e=Js(o);s.call(e)}}bs((function(){Zs(t,o,e,a)}))}return Js(o)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(o(200));return $s(e,t,null,n)}qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fa.current)Io=!0;else{if(0===(n&r)){switch(Io=!1,t.tag){case 3:Go(t),Gi();break;case 5:Mi(t);break;case 1:pa(t.type)&&ba(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;sa(Ka,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ko(e,t,n):(sa(Ii,1&Ii.current),null!==(t=nu(e,t,n))?t.sibling:null);sa(Ii,1&Ii.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return tu(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),sa(Ii,Ii.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return nu(e,t,n)}Io=0!==(16384&e.flags)}else Io=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ha(t,la.current),ni(t,n),a=ro(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pa(r)){var i=!0;ba(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ii(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&hi(t,r,u,e),a.updater=pi,t.stateNode=a,a._reactInternals=t,bi(t,r,e,n),t=Vo(null,t,r,!0,i,n)}else t.tag=0,Fo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Ws(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===M)return 14}return 2}(a),e=Ya(a,e),i){case 0:t=Uo(null,t,a,e,n);break e;case 1:t=Wo(null,t,a,e,n);break e;case 11:t=Ro(null,t,a,e,n);break e;case 14:t=Po(null,t,a,Ya(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Uo(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 1:return r=t.type,a=t.pendingProps,Wo(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,oi(e,t),li(t,r,null,n),(r=t.memoizedState.element)===a)Gi(),t=nu(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Pi=qr(t.stateNode.containerInfo.firstChild),Ri=t,i=Li=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],qi.push(i);for(n=Oi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Gi();t=t.child}return t;case 5:return Mi(t),null===e&&Ui(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,u=a.children,Ur(r,a)?u=null:null!==i&&Ur(r,i)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ui(t),null;case 13:return Ko(e,t,n);case 4:return Ti(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ki(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ro(e,t,r,a=t.elementType===r?a:Ya(r,a),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,u=t.memoizedProps,i=a.value;var s=t.type._context;if(sa(Ka,s._currentValue),s._currentValue=i,null!==u)if(s=u.value,0===(i=ur(s,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,i):1073741823))){if(u.children===a.children&&!fa.current){t=nu(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===s.tag&&((l=ui(-1,n&-n)).tag=2,si(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ti(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ni(t,n),r=r(a=ri(a,i.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return i=Ya(a=t.type,t.pendingProps),Po(e,t,a,i=Ya(a.type,i),r,n);case 15:return Lo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ya(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pa(r)?(e=!0,ba(t)):e=!1,ni(t,n),mi(t,r,a),bi(t,r,a,n),Vo(null,t,r,!0,e,n);case 19:return tu(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Zs(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zs(null,e,null,(function(){t[Zr]=null}))},tt=function(e){13===e.tag&&(fs(e,4,cs()),ec(e,4))},nt=function(e){13===e.tag&&(fs(e,67108864,cs()),ec(e,67108864))},rt=function(e){if(13===e.tag){var t=cs(),n=ls(e);fs(e,n,t),ec(e,n)}},at=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=na(r);if(!a)throw Error(o(90));Z(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=gs,Ie=function(e,t,n,r,a){var i=Au;Au|=4;try{return Va(98,e.bind(null,t,n,r,a))}finally{0===(Au=i)&&(Gu(),qa())}},Fe=function(){0===(49&Au)&&(function(){if(null!==ts){var e=ts;ts=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,hs(e,za())}))}qa()}(),Ms())},Re=function(e,t){var n=Au;Au|=2;try{return e(t)}finally{0===(Au=n)&&(Gu(),qa())}};var ic={Events:[ea,ta,na,Ne,Me,Ms,{current:!1}]},oc={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},uc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{xa=sc.inject(uc),_a=sc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ic,t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Au;if(0!==(48&n))return e(t);Au|=1;try{if(e)return Va(99,e.bind(null,t))}finally{Au=n,qa()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=gs,t.unstable_createPortal=function(e,t){return ac(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(431)},function(e,t,n){"use strict";var r,a,i,o;if("object"===typeof performance&&"function"===typeof performance.now){var u=performance;t.unstable_now=function(){return u.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,f=null,d=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(d,0))},a=function(e,t){f=setTimeout(e,t)},i=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,b=-1,y=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();x=e+y;try{g(!0,e)?w.postMessage(null):(m=!1,g=null)}catch(n){throw w.postMessage(null),n}}else m=!1},r=function(e){g=e,m||(m=!0,w.postMessage(null))},a=function(e,n){b=h((function(){e(t.unstable_now())}),n)},i=function(){p(b),b=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<j(a,t)))break e;e[r]=t,e[n]=a,n=r}}function O(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],u=i+1,s=e[u];if(void 0!==o&&0>j(o,n))void 0!==s&&0>j(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==s&&0>j(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function j(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],C=[],A=1,T=null,N=3,M=!1,D=!1,I=!1;function F(e){for(var t=O(C);null!==t;){if(null===t.callback)S(C);else{if(!(t.startTime<=e))break;S(C),t.sortIndex=t.expirationTime,k(E,t)}t=O(C)}}function R(e){if(I=!1,F(e),!D)if(null!==O(E))D=!0,r(P);else{var t=O(C);null!==t&&a(R,t.startTime-e)}}function P(e,n){D=!1,I&&(I=!1,i()),M=!0;var r=N;try{for(F(n),T=O(E);null!==T&&(!(T.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=T.callback;if("function"===typeof o){T.callback=null,N=T.priorityLevel;var u=o(T.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?T.callback=u:T===O(E)&&S(E),F(n)}else S(E);T=O(E)}if(null!==T)var s=!0;else{var c=O(C);null!==c&&a(R,c.startTime-n),s=!1}return s}finally{T=null,N=r,M=!1}}var L=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||M||(D=!0,r(P))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return O(E)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,k(C,e),null===O(E)&&e===O(C)&&(I?i():I=!0,a(R,o-u))):(e.sortIndex=s,k(E,e),D||M||(D=!0,r(P))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},,function(e,t,n){"use strict";n(169);var r=n(6),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},function(e,t,n){"use strict";var r=n(435);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case d:case o:case s:case u:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case c:return e;default:return t}}case i:return t}}}function k(e){return w(e)===d}t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=a,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=u,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===f},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===u},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===u||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===x||e.$$typeof===_||e.$$typeof===b)},t.typeOf=w},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(e,t,n){var r=f;return function(a,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw i;return T()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:d,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function m(){}function g(){}function b(){}var y={};y[i]=function(){return this};var x=Object.getPrototypeOf,_=x&&x(x(A([])));_&&_!==n&&r.call(_,i)&&(y=_);var w=b.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(a,i,o,u){var s=l(e[a],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=w.constructor=b,b.constructor=g,g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(O.prototype),O.prototype[o]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new O(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),s(w,u,"Generator"),w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),o=r[0],u=r[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,o,u)),l=0,f=u>0?o-4:o;for(n=0;n<f;n+=4)t=a[e.charCodeAt(n)]<<18|a[e.charCodeAt(n+1)]<<12|a[e.charCodeAt(n+2)]<<6|a[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=a[e.charCodeAt(n)]<<2|a[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=a[e.charCodeAt(n)]<<10|a[e.charCodeAt(n+1)]<<4|a[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],o=16383,u=0,s=n-a;u<s;u+=o)i.push(l(e,u,u+o>s?s:u+o));1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],a=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=o.length;u<s;++u)r[u]=o[u],a[o.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var a,i,o=[],u=t;u<n;u+=3)a=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),o.push(r[(i=a)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,o,u=8*a-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-l)-1,h>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=d,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=c}return(h?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,u,s,c=8*i-a-1,l=(1<<c)-1,f=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),(t+=o+f>=1?d/s:d*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(t*s-1)*Math.pow(2,a),o+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&u,h+=p,u/=256,a-=8);for(o=o<<a|u,c+=a;c>0;e[n+h]=255&o,h+=p,o/=256,c-=8);e[n+h-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){var t,r=n(1),a=n(9),i=n(41),o=function(){return n(442)};var u=function(){function u(){Object(r.a)(this,u),this.util=n(443),this.textEncoder=new this.util.TextEncoder}return Object(a.a)(u,[{key:"fetch",value:function(e,n){return null!=Object(i.c)().global.fetch?Object(i.c)().global.fetch(e,n):(null==t&&(t=o()),t(e,n))}},{key:"now",value:function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),u}();Object(i.c)().get("IS_NODE")&&Object(i.c)().setPlatform("node",new u)}).call(this,n(214))},,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){var r;!function(a,i){var o,u=this,s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(451)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(453),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(170))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,a=1,i={},o=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return i[a]=o,r(a),a++},s.clearImmediate=c}function c(e){delete i[e]}function l(e){if(o)setTimeout(l,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(170),n(214))},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(173)),u=n(134),s=n(109);t.barchart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a(this,void 0,void 0,r.mark((function a(){var i,f,d,h,p,v,m,g,b,y,x,_,w,k,O,S;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=s.getDrawArea(e),f=t,d=Object.assign({},c,n),!l.has(i)){r.next=13;break}if(h=l.get(i),!s.shallowEquals(d,h.lastOptions)){r.next=13;break}return r.next=8,s.nextFrame();case 8:return p=h.view,v=p.changeset().remove((function(){return!0})).insert(f),r.next=12,p.change("values",v).runAsync();case 12:return r.abrupt("return");case 13:return m=d.xLabel,g=d.yLabel,b=d.xType,y=d.yType,x=null,null!=m&&(x={title:m}),_=null,null!=g&&(_={title:g}),w={actions:!1,mode:"vega-lite",defaultStyle:!1},k=null!=d.color?Array.isArray(d.color)?{field:"index",type:"nominal",scale:{range:d.color}}:{value:d.color}:{value:"#4C78A0"},O={width:d.width||u.getDefaultWidth(i),height:d.height||u.getDefaultHeight(i),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:d.fontSize,titleFontSize:d.fontSize},text:{fontSize:d.fontSize},legend:{labelFontSize:d.fontSize,titleFontSize:d.fontSize}},data:{values:f,name:"values"},mark:{type:"bar",tooltip:!0},encoding:{x:{field:"index",type:b,axis:x},y:{field:"value",type:y,axis:_},color:k}},r.next=23,s.nextFrame();case 23:return r.next=25,o.default(i,O,w);case 25:S=r.sent,l.set(i,{view:S.view,lastOptions:d});case 27:case"end":return r.stop()}}),a)})))};var c={xLabel:"",yLabel:"",xType:"ordinal",yType:"quantitative",fontSize:11},l=new Map},function(e,t,n){var r=n(172);e.exports=function(e,t){var n=r(e,t);return n?n.version:null}},function(e,t,n){var r=n(172);e.exports=function(e,t){var n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},function(e,t,n){var r=n(84);e.exports=function(e,t,n,a){"string"===typeof n&&(a=n,n=void 0);try{return new r(e,n).inc(t,a).version}catch(i){return null}}},function(e,t,n){var r=n(172),a=n(301);e.exports=function(e,t){if(a(e,t))return null;var n=r(e),i=r(t),o=n.prerelease.length||i.prerelease.length,u=o?"pre":"",s=o?"prerelease":"";for(var c in n)if(("major"===c||"minor"===c||"patch"===c)&&n[c]!==i[c])return u+c;return s}},function(e,t,n){var r=n(84);e.exports=function(e,t){return new r(e,t).major}},function(e,t,n){var r=n(84);e.exports=function(e,t){return new r(e,t).minor}},function(e,t,n){var r=n(84);e.exports=function(e,t){return new r(e,t).patch}},function(e,t,n){var r=n(172);e.exports=function(e,t){var n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},function(e,t,n){var r=n(107);e.exports=function(e,t,n){return r(t,e,n)}},function(e,t,n){var r=n(107);e.exports=function(e,t){return r(e,t,!0)}},function(e,t,n){var r=n(302);e.exports=function(e,t){return e.sort((function(e,n){return r(e,n,t)}))}},function(e,t,n){var r=n(302);e.exports=function(e,t){return e.sort((function(e,n){return r(n,e,t)}))}},function(e,t,n){var r=n(84),a=n(172),i=n(171),o=i.re,u=i.t;e.exports=function(e,t){if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;var n=null;if((t=t||{}).rtl){for(var i;(i=o[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),o[u.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;o[u.COERCERTL].lastIndex=-1}else n=e.match(o[u.COERCE]);return null===n?null:a("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),t)}},function(e,t,n){var r=n(108);e.exports=function(e,t){return new r(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}},function(e,t,n){var r=n(84),a=n(108);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&-1!==o.compare(e)||(o=new r(i=e,n)))})),i}},function(e,t,n){var r=n(84),a=n(108);e.exports=function(e,t,n){var i=null,o=null,u=null;try{u=new a(t,n)}catch(s){return null}return e.forEach((function(e){u.test(e)&&(i&&1!==o.compare(e)||(o=new r(i=e,n)))})),i}},function(e,t,n){var r=n(84),a=n(108),i=n(236);e.exports=function(e,t){e=new a(e,t);var n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(var o=0;o<e.set.length;++o){e.set[o].forEach((function(e){var t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!i(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}}))}return n&&e.test(n)?n:null}},function(e,t,n){var r=n(108);e.exports=function(e,t){try{return new r(e,t).range||"*"}catch(n){return null}}},function(e,t,n){var r=n(306);e.exports=function(e,t,n){return r(e,t,">",n)}},function(e,t,n){var r=n(306);e.exports=function(e,t,n){return r(e,t,"<",n)}},function(e,t,n){var r=n(108);e.exports=function(e,t,n){return e=new r(e,n),t=new r(t,n),e.intersects(t)}},function(e,t,n){var r=n(307),a=n(217),i=n(238),o=n(107);e.exports=function(e,t,n){var u,s=[],c=null,l=null,f=e.sort((function(e,t){return o(e,t,n)})),d=a(f);try{for(d.s();!(u=d.n()).done;){var h=u.value;i(h,t,n)?(l=h,c||(c=h)):(l&&s.push([c,l]),l=null,c=null)}}catch(w){d.e(w)}finally{d.f()}c&&s.push([c,null]);for(var p=[],v=0,m=s;v<m.length;v++){var g=r(m[v],2),b=g[0],y=g[1];b===y?p.push(b):y||b!==f[0]?y?b===f[0]?p.push("<=".concat(y)):p.push("".concat(b," - ").concat(y)):p.push(">=".concat(b)):p.push("*")}var x=p.join(" || "),_="string"===typeof t.raw?t.raw:String(t);return x.length<_.length?x:t}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(217),a=n(108),i=n(237).ANY,o=n(238),u=n(107),s=function(e,t,n){if(1===e.length&&e[0].semver===i)return 1===t.length&&t[0].semver===i;var a,s,f,d,h=new Set,p=r(e);try{for(p.s();!(f=p.n()).done;){var v=f.value;">"===v.operator||">="===v.operator?a=c(a,v,n):"<"===v.operator||"<="===v.operator?s=l(s,v,n):h.add(v.semver)}}catch(E){p.e(E)}finally{p.f()}if(h.size>1)return null;if(a&&s){if((d=u(a.semver,s.semver,n))>0)return null;if(0===d&&(">="!==a.operator||"<="!==s.operator))return null}var m,g,b,y=r(h);try{for(y.s();!(m=y.n()).done;){var x=m.value;if(a&&!o(x,String(a),n))return null;if(s&&!o(x,String(s),n))return null;var _,w=r(t);try{for(w.s();!(_=w.n()).done;){var k=_.value;if(!o(x,String(k),n))return!1}}catch(E){w.e(E)}finally{w.f()}return!0}}catch(E){y.e(E)}finally{y.f()}var O,S=r(t);try{for(S.s();!(O=S.n()).done;){var j=O.value;if(b=b||">"===j.operator||">="===j.operator,g=g||"<"===j.operator||"<="===j.operator,a)if(">"===j.operator||">="===j.operator){if(c(a,j,n)===j)return!1}else if(">="===a.operator&&!o(a.semver,String(j),n))return!1;if(s)if("<"===j.operator||"<="===j.operator){if(l(s,j,n)===j)return!1}else if("<="===s.operator&&!o(s.semver,String(j),n))return!1;if(!j.operator&&(s||a)&&0!==d)return!1}}catch(E){S.e(E)}finally{S.f()}return!(a&&g&&!s&&0!==d)&&!(s&&b&&!a&&0!==d)},c=function(e,t,n){if(!e)return t;var r=u(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},l=function(e,t,n){if(!e)return t;var r=u(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t,n){e=new a(e,n),t=new a(t,n);var i,o=!1,u=r(e.set);try{e:for(u.s();!(i=u.n()).done;){var c,l=i.value,f=r(t.set);try{for(f.s();!(c=f.n()).done;){var d=c.value,h=s(l,d,n);if(o=o||null!==h,h)continue e}}catch(p){f.e(p)}finally{f.f()}if(o)return!1}}catch(p){u.e(p)}finally{u.f()}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleSheet=d;var r,a=n(169),i=(r=a)&&r.__esModule?r:{default:r};function o(e){return e[e.length-1]}function u(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}var s="undefined"!==typeof window,c=!1,l=function(){if(s){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}}();function f(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.speedy,n=void 0===t||t,r=e.maxLength,a=void 0===r?s&&l?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=a,this.ctr=0}(0,i.default)(d.prototype,{getSheet:function(){return u(o(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");s?this.tags[0]=f():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0},speedy:function(e){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var t=this.getSheet();t.insertRule(e,-1!==e.indexOf("@import")?0:t.cssRules.length)}catch(n){c}},insert:function(e){if(s)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(-1!==e.indexOf("@import")){var t=o(this.tags);t.insertBefore(document.createTextNode(e),t.firstChild)}else o(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,-1!==e.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,s&&this.ctr%this.maxLength===0&&this.tags.push(f()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){s?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!s)return this.sheet.cssRules;var e=[];return this.tags.forEach((function(t){return e.splice.apply(e,[e.length,0].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array.from(u(t).cssRules))))})),e}})},function(e,t,n){"use strict";var r=n(483),a=/^-ms-/;e.exports=function(e){return r(e.replace(a,"ms-"))}},function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(485));a(n(369));function a(e){return e&&e.__esModule?e:{default:e}}var i=r.default.isUnitlessNumber;t.default=function(e,t,n){return null==t||"boolean"===typeof t||""===t?"":isNaN(t)||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"===typeof t&&(t=t.trim()),t+"px")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var a=["Webkit","ms","Moz","O"];Object.keys(r).forEach((function(e){a.forEach((function(t){r[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=r[e]}))}));var i={isUnitlessNumber:r,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.default=i},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";var r=n(488),a=/^ms-/;e.exports=function(e){return r(e).replace(a,"-ms-")}},function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(function(e){return null===e||void 0===e||!1===e||"object"===("undefined"===typeof e?"undefined":r(e))&&0===Object.keys(e).length}(e))return null;if("object"!==("undefined"===typeof e?"undefined":r(e)))return e;for(var t={},n=Object.keys(e),a=!1,o=0;o<n.length;o++){var u=e[n[o]],s=i(u);null!==s&&s===u||(a=!0),null!==s&&(t[n[o]]=s)}return 0===Object.keys(t).length?null:a?t:e}function i(e){return Array.isArray(e)?function(e){var t=!1,n=[];return e.forEach((function(e){var r=i(e);null!==r&&r===e||(t=!0),null!==r&&n.push(r)})),0==n.length?null:t?n:e}(e):a(e)}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PluginSet=s,t.fallbacks=function(e){if(Object.keys(e.style).map((function(t){return Array.isArray(e.style[t])})).indexOf(!0)>=0){var t=e.style,n=Object.keys(t).reduce((function(e,n){return e[n]=Array.isArray(t[n])?t[n].join("; "+(0,i.processStyleName)(n)+": "):t[n],e}),{});return(0,a.default)({},e,{style:n})}return e},t.contentWrap=function(e){if(e.style.content){var t=e.style.content;return c.indexOf(t)>=0||/^(attr|calc|counters?|url)\(/.test(t)?e:t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)?r({},e,{style:r({},e.style,{content:'"'+t+'"'})}):e}return e},t.prefixes=function(e){return(0,a.default)({},e,{style:(0,o.default)(r({},e.style))})};var a=u(n(169)),i=n(368),o=u(n(492));function u(e){return e&&e.__esModule?e:{default:e}}function s(e){this.fns=e||[]}(0,a.default)(s.prototype,{add:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.fns.indexOf(t)>=0||(e.fns=[t].concat(e.fns))}))},remove:function(e){this.fns=this.fns.filter((function(t){return t!==e}))},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce((function(e,t){return t(e)}),e)}});var c=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t in e){var n=e[t],r=(0,i.default)(g,t,n,e,b);r&&(e[t]=r),(0,a.default)(b,t,e)}return e};var r=m(n(493)),a=m(n(494)),i=m(n(495)),o=m(n(496)),u=m(n(497)),s=m(n(498)),c=m(n(499)),l=m(n(500)),f=m(n(501)),d=m(n(502)),h=m(n(503)),p=m(n(504)),v=m(n(505));function m(e){return e&&e.__esModule?e:{default:e}}var g=[u.default,o.default,s.default,l.default,f.default,d.default,h.default,p.default,v.default,c.default],b=r.default.prefixMap},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Webkit"],a=["Moz"],i=["ms"],o=["Webkit","Moz"],u=["Webkit","ms"],s=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:o,userSelect:s,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:s,breakBefore:s,breakInside:s,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:u,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:u,scrollSnapPointsX:u,scrollSnapPointsY:u,scrollSnapDestination:u,scrollSnapCoordinate:u,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:s,flowInto:u,flowFrom:u,regionFragment:u,textAlignLast:a,tabSize:a,wrapFlow:i,wrapThrough:i,wrapMargin:i,gridTemplateColumns:i,gridTemplateRows:i,gridTemplateAreas:i,gridTemplate:i,gridAutoColumns:i,gridAutoRows:i,gridAutoFlow:i,grid:i,gridRowStart:i,gridColumnStart:i,gridRowEnd:i,gridRow:i,gridColumn:i,gridColumnEnd:i,gridColumnGap:i,gridRowGap:i,gridArea:i,gridGap:i,textSizeAdjust:u,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],a=0,o=r.length;a<o;++a)n[r[a]+(0,i.default)(t)]=n[t]};var r,a=n(370),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,a){for(var i=0,o=e.length;i<o;++i){var u=e[i](t,n,r,a);if(u)return u}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r,a=n(219),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("filter(")>-1)return o.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r,a=n(219),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");a.hasOwnProperty(e)&&(n[a[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&u.test(t))return o.map((function(e){return e+t}))};var r,a=n(219),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""],u=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("image-set(")>-1)return o.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r,a=n(219),i=(r=a)&&r.__esModule?r:{default:r};var o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.hasOwnProperty(e)&&i.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if("string"===typeof t&&u.hasOwnProperty(e)){var c=function(e,t){if((0,a.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),i=0,o=n.length;i<o;++i){var u=n[i],c=[u];for(var l in t){var f=(0,r.default)(l);if(u.indexOf(f)>-1&&"order"!==f)for(var d=t[l],h=0,p=d.length;h<p;++h)c.unshift(u.replace(f,s[d[h]]+f))}n[i]=c.join(",")}return n.join(",")}(t,o),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return l;var f=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,i.default)(e)]=l,n["Moz"+(0,i.default)(e)]=f,c)}};var r=o(n(506)),a=o(n(219)),i=o(n(370));function o(e){return e&&e.__esModule?e:{default:e}}var u={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var r,a=n(279),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function a(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function i(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=1540483477,o=t^e.length,u=e.length,s=0;for(;u>=4;){var c=r(e,s);c=i(c,n),c=i(c^=c>>>24,n),o=i(o,n),o^=c,s+=4,u-=4}switch(u){case 3:o^=a(e,s),o=i(o^=e.charCodeAt(s+2)<<16,n);break;case 2:o=i(o^=a(e,s),n);break;case 1:o=i(o^=e.charCodeAt(s),n)}return o=i(o^=o>>>13,n),(o^=o>>>15)>>>0}},function(e,t,n){"use strict";var r=n(217),a=n(150),i=n(151),o=n(373),u=n(309),s=n(310);Object.defineProperty(t,"__esModule",{value:!0});var c=n(311),l=n(218),f=n(514),d=n(515),h=function(e){u(n,e);var t=s(n);function n(e){var r;a(this,n),(r=t.call(this,e)).surfaces=new Map;var i=null==e.startOpen||e.startOpen;return r.state={isOpen:i,isFullscreen:!1,activeTab:null,tabs:new Set},r.keyHandler=r.keyHandler.bind(o(r)),r}return i(n,[{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"toggleFullScreen",value:function(){this.setState({isFullscreen:!this.state.isFullscreen})}},{key:"isOpen",value:function(){return this.state.isOpen}},{key:"isFullscreen",value:function(){return this.state.isFullscreen}},{key:"getSurface",value:function(e,t){var n,r=this.surfaceId(e,t);if(!this.surfaces.has(r))throw Error("Surface not found with id: ".concat(r));return{container:(n=this.surfaces.get(r)).container,label:n.label,drawArea:n.drawArea}}},{key:"bindKeys",value:function(){document.addEventListener("keydown",this.keyHandler,!1)}},{key:"unbindKeys",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"surfaceId",value:function(e,t){return e+t}},{key:"setTabs",value:function(e){var t,n,a=e.map((function(e){return e.tab})),i=this.state.tabs,o=r(a);try{for(o.s();!(n=o.n()).done;){var u=n.value;i.has(u)||(i.add(u),t=u)}}catch(s){o.e(s)}finally{o.f()}null!=t&&this.setState({tabs:i,activeTab:t})}},{key:"getTabs",value:function(){return this.state.tabs}},{key:"registerSurface",value:function(e,t,n){var r=this.surfaceId(e,t);this.surfaces.set(r,n)}},{key:"keyHandler",value:function(e){192===e.keyCode&&(e.shiftKey?this.toggleFullScreen():this.toggle())}},{key:"setActiveTab",value:function(e){this.setState({activeTab:e})}},{key:"componentDidMount",value:function(){this.bindKeys()}},{key:"componentWillMount",value:function(){this.setTabs(this.props.surfaceList)}},{key:"componentWillReceiveProps",value:function(e){this.setTabs(e.surfaceList)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,r=t.isFullscreen,a=t.activeTab,i=this.props.surfaceList,o=Array.from(this.getTabs().values()),u=r?"90vw":"550px",s=l.css({width:u,height:"100%",backgroundColor:"#fafafa",boxSizing:"border-box",padding:"10px",position:"fixed",top:"0px",transition:"right 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), width 0.5s cubic-bezier(0.645, 0.045, 0.355, 1)",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.12), 0 2px 5px rgba(0, 0, 0, 0.24)",overflow:"auto",fontFamily:"sans-serif",fontSize:"14px",zIndex:1e3}),h=l.css({right:"0"}),v=l.css({right:"calc(-".concat(u," - 10px)")}),m=n?h:v,g=l.css({});return c.h("div",{className:"".concat(s," ").concat(m," visor"),"data-isopen":n,"data-isfullscreen":r},c.h(p,{fullScreenHandler:this.toggleFullScreen.bind(this),closeHandler:this.close.bind(this),isFullScreen:r}),c.h(d.Tabs,{tabNames:o,activeTab:a,handleClick:this.setActiveTab.bind(this)}),c.h("div",{className:"".concat(g," visor-surfaces")},i.map((function(t){return c.h(f.SurfaceComponent,{key:t.name+t.tab,name:t.name,tab:t.tab,styles:t.styles,registerSurface:e.registerSurface.bind(e),visible:a===t.tab})}))))}}],[{key:"render",value:function(e,t,r){return c.render(c.h(n,Object.assign({},r)),e,t)}}]),n}(c.Component);function p(e){var t=e.isFullScreen,n=e.fullScreenHandler,r=e.closeHandler,a=l.css({display:"flex",backgroundColor:"white",border:"1px solid white",padding:"6px",paddingTop:"10px",marginBottom:"10px",borderRadius:"6px",marginTop:"-16px"}),i=l.css({fontSize:".875rem",borderRadius:".25rem",paddingLeft:"1rem",paddingRight:"1rem",paddingTop:".5rem",paddingBottom:".5rem",textDecoration:"none",transition:"color .15s ease-in",color:"#111"}),o=l.css({marginLeft:"auto"});return c.h("div",{className:"".concat(a," visor-controls")},c.h("button",{className:"".concat(i),onClick:n},t?"Minimize":"Maximize"),c.h("button",{className:"".concat(i," ").concat(o),onClick:r},"Hide"))}t.VisorComponent=h},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(513),a=n(373);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?a(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var r=n(150),a=n(151),i=n(309),o=n(310);Object.defineProperty(t,"__esModule",{value:!0});var u=n(311),s=n(218),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.tab;this.props.registerSurface(t,n,this)}},{key:"componentDidUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,a=t.visible,i=t.styles,o=Object.assign({},n.defaultStyles,i),c=o.width,l=o.height,f=o.maxHeight,d=o.maxWidth;f=l===n.defaultStyles.height?f:l,d=c===n.defaultStyles.width?d:c;var h=s.css({display:a?"block":"none",backgroundColor:"white",marginTop:"10px",marginBottom:"10px",boxShadow:"0 0 6px -3px #777",padding:"10px !important",height:l,width:c,maxHeight:f,maxWidth:d,overflow:"auto"}),p=s.css({backgroundColor:"white",boxSizing:"border-box",borderBottom:"1px solid #357EDD",lineHeight:"2em",marginBottom:"20px",fontWeight:"600",textAlign:"center"}),v=s.css({boxSizing:"border-box"});return u.h("div",{className:"".concat(h," tf-surface"),ref:function(t){return e.container=t},"data-visible":a},u.h("div",{className:"".concat(p," tf-label"),ref:function(t){return e.label=t}},r),u.h("div",{className:"".concat(v," tf-draw-area"),ref:function(t){return e.drawArea=t}}))}}]),n}(u.Component);c.defaultStyles={maxWidth:"550px",maxHeight:"580px",height:"auto",width:"auto"},t.SurfaceComponent=c},function(e,t,n){"use strict";var r=n(150),a=n(151),i=n(309),o=n(310);Object.defineProperty(t,"__esModule",{value:!0});var u=n(311),s=n(218),c=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.tabNames,n=e.activeTab,r=e.handleClick,a=t.length>0?t.map((function(e){return u.h(l,{key:e,id:e,handleClick:r,isActive:e===n},e)})):null,i=s.css({overflowX:"scroll",overflowY:"hidden",whiteSpace:"nowrap",borderBottomStyle:"solid",borderBottomWidth:"1px",borderColor:"#eee",paddingBottom:"1rem",marginTop:"1rem"});return u.h("div",{className:"".concat(i," visor-tabs")},a)}}]),n}(u.Component);t.Tabs=c;var l=function(e){i(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isActive,r=e.handleClick,a=e.id,i=s.css({borderBottomColor:n?"#357EDD":"#AAAAAA",borderBottomWidth:"1px",borderBottomStyle:"solid",cursor:"pointer",":hover":{color:"#357EDD"},display:"inline-block",marginRight:"1rem",padding:".5rem",fontSize:"1rem",fontWeight:"bold"});return u.h("a",{className:"".concat(i," tf-tab"),"data-isactive":n,onClick:function(){return r(a)}},t)}}]),n}(u.Component)},function(e,t,n){"use strict";var r=n(2),a=n(217),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(173)),s=n(134),c=n(109);t.confusionMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,f,d,h,p,v,m,g,b,y,x,_,w,k,O,S,j,E;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(o=Object.assign({},l,n),f=c.getDrawArea(e),d=[],h=t.values,p=t.tickLabels||[],v=0===p.length,m=!0,g=0;g<h.length;g++)for(b=v?"Class ".concat(g):p[g],v&&p.push(b),y=0;y<h[g].length;y++)x=v?"Class ".concat(y):p[y],_=h[g][y],g!==y||o.shadeDiagonal?(d.push({label:b,prediction:x,count:_,scaleCount:_}),0!==_&&(m=!1)):d.push({label:b,prediction:x,count:_,noFill:!0});if(!o.shadeDiagonal&&m){w=a(d);try{for(w.s();!(k=w.n()).done;)!0===(O=k.value).noFill&&(O.noFill=!1,O.scaleCount=O.count)}catch(i){w.e(i)}finally{w.f()}}return S={actions:!1,mode:"vega-lite",defaultStyle:!1},j={width:o.width||s.getDefaultWidth(f),height:o.height||s.getDefaultHeight(f),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize}},data:{values:d},encoding:{x:{field:"prediction",type:"ordinal",title:o.xLabel||"prediction",scale:{domain:p}},y:{field:"label",type:"ordinal",title:o.yLabel||"label",scale:{domain:p}}},layer:[{transform:[{filter:"datum.noFill != true"}],mark:{type:"rect"},encoding:{color:{field:"scaleCount",type:"quantitative",scale:{range:o.colorMap}},tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}]},!1===o.shadeDiagonal&&j.layer.push({transform:[{filter:"datum.noFill == true"}],mark:{type:"rect",fill:"white"},encoding:{tooltip:[{field:"label",type:"nominal"},{field:"prediction",type:"nominal"},{field:"count",type:"quantitative"}]}}),o.showTextOverlay&&j.layer.push({mark:{type:"text",baseline:"middle"},encoding:{text:{field:"count",type:"nominal"}}}),E="string"===typeof o.colorMap?{scheme:o.colorMap}:o.colorMap,j.layer[0].encoding.color.scale.range=E,r.next=17,u.default(f,j,S);case 17:case"end":return r.stop()}}),i)})))};var l={xLabel:null,yLabel:null,xType:"nominal",yType:"nominal",shadeDiagonal:!0,fontSize:12,showTextOverlay:!0,height:400,colorMap:["#f7fbff","#4292c6"]}},function(e,t,n){"use strict";var r=n(2),a=n(307),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(0)),c=u(n(173)),l=n(134),f=n(239),d=n(109);function h(e){return i(this,void 0,void 0,r.mark((function t(){var n,a,i,o;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof s.Tensor?(n=e.shape,a=e.transpose()):(n=[e.length,e[0].length],a=s.tidy((function(){return s.tensor2d(e).transpose()}))),f.assert(2===a.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),t.next=4,a.array();case 4:return i=t.sent,a.dispose(),o=[i.length,i[0].length],f.assert(n[0]===o[1]&&n[1]===o[0],"Unexpected transposed shape. Original ".concat(n," : Transposed ").concat(o)),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})))}function p(e,t,n){var r=e instanceof s.Tensor?e.shape:[e.length,e[0].length];0===n?f.assert(r[0]===t.length,"Length of xTickLabels (".concat(t.length,") must match number of rows")+" (".concat(r[0],")")):1===n&&f.assert(r[1]===t.length,"Length of yTickLabels (".concat(t.length,") must match number of columns (").concat(r[1],")"))}t.heatmap=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,u,m,g,b,y,x,_,w,k,O,S,j,E,C,A,T,N,M,D,I,F,R,P,L,B,z,U;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=Object.assign({},v,n),u=d.getDrawArea(e),m=t.values,!o.rowMajor){r.next=7;break}return r.next=6,h(t.values);case 6:m=r.sent;case 7:if(g=t.xTickLabels,b=t.yTickLabels,null!=g&&(0,p(m,g,0)),null!=b&&(1,p(m,b,1)),y="@tfidx@",x=[],!(m instanceof s.Tensor)){r.next=21;break}return f.assert(2===m.rank,"Input to renderHeatmap must be a 2d array or Tensor2d"),r.next=16,m.data();case 16:for(_=r.sent,w=a(m.shape,2),k=w[0],O=w[1],S=0;S<k;S++)for(j=g?"".concat(g[S]).concat(y).concat(S):S,E=0;E<O;E++)C=b?"".concat(b[E]).concat(y).concat(E):E,A=_[S*O+E],x.push({x:j,y:C,value:A});r.next=23;break;case 21:for(T=m,N=0;N<T.length;N++)for(M=g?"".concat(g[N]).concat(y).concat(N):N,D=0;D<T[N].length;D++)I=b?"".concat(b[D]).concat(y).concat(D):D,F=T[N][D],x.push({x:M,y:I,value:F});case 23:R={actions:!1,mode:"vega-lite",defaultStyle:!1},P={width:o.width||l.getDefaultWidth(u),height:o.height||l.getDefaultHeight(u),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},text:{fontSize:o.fontSize},legend:{labelFontSize:o.fontSize,titleFontSize:o.fontSize},scale:{bandPaddingInner:0,bandPaddingOuter:0}},data:{values:x},mark:{type:"rect",tooltip:!0},encoding:{x:{field:"x",type:o.xType,title:o.xLabel,sort:!1},y:{field:"y",type:o.yType,title:o.yLabel,sort:!1},fill:{field:"value",type:"quantitative"}}},L="".concat(y,"\\d+$"),B=new RegExp(L),g&&(P.encoding.x.axis={labelExpr:"replace(datum.value, regexp(/".concat(L,"/), '')")}),b&&(P.encoding.y.axis={labelExpr:"replace(datum.value, regexp(/".concat(L,"/), '')")}),(g||b)&&(R.tooltip={sanitize:function(e){return String(e).replace(B,"")}}),r.t0=o.colorMap,r.next="blues"===r.t0?33:"greyscale"===r.t0?35:(r.t0,37);break;case 33:return z=["#f7fbff","#4292c6"],r.abrupt("break",39);case 35:return z=["#000000","#ffffff"],r.abrupt("break",39);case 37:return z="viridis",r.abrupt("break",39);case 39:return"viridis"!==z&&(P.encoding.fill.scale={range:z}),o.domain&&(null!=(U=P.encoding.fill).scale?U.scale=Object.assign({},U.scale,{domain:o.domain}):U.scale={domain:o.domain}),r.next=43,c.default(u,P,R);case 43:case"end":return r.stop()}}),i)})))};var v={xLabel:null,yLabel:null,xType:"ordinal",yType:"ordinal",colorMap:"viridis",fontSize:12,domain:null,rowMajor:!1}},function(e,t,n){var r=n(366);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(2),a=n(375),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(173)),s=n(134),c=n(239),l=n(109);t.scatterplot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(this,void 0,void 0,r.mark((function i(){var o,d,h,p,v,m,g,b,y;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.values,d=null==t.series?[]:t.series,o=Array.isArray(o[0])?o:[o],h=[],o.forEach((function(e,t){var n=null!=d[t]?d[t]:"Series ".concat(t+1),r=e.map((function(e){return Object.assign({},e,{series:n})}));h.push.apply(h,a(r))})),null!=n.seriesColors&&c.assert(n.seriesColors.length===o.length,"Must have an equal number of series colors as there are data series"),p=l.getDrawArea(e),v=Object.assign({},f,n),m={actions:!1,mode:"vega-lite",defaultStyle:!1},g=function(){return v.zoomToFit?{zero:!1}:null!=v.xAxisDomain?{domain:v.xAxisDomain}:void 0},b=function(){return v.zoomToFit?{zero:!1}:null!=v.yAxisDomain?{domain:v.yAxisDomain}:void 0},y={width:v.width||s.getDefaultWidth(p),height:v.height||s.getDefaultHeight(p),padding:0,autosize:{type:"fit",contains:"padding",resize:!0},config:{axis:{labelFontSize:v.fontSize,titleFontSize:v.fontSize},text:{fontSize:v.fontSize},legend:{labelFontSize:v.fontSize,titleFontSize:v.fontSize}},data:{values:h},mark:{type:"point",clip:!0,tooltip:{content:"data"}},encoding:{x:{field:"x",type:v.xType,title:v.xLabel,scale:g()},y:{field:"y",type:v.yType,title:v.yLabel,scale:b()},color:{field:"series",type:"nominal",scale:{range:v.seriesColors}},shape:{field:"series",type:"nominal"}}},r.next=14,u.default(p,y,m);case 14:return r.abrupt("return",Promise.resolve());case 15:case"end":return r.stop()}}),i)})))};var f={xLabel:"x",yLabel:"y",xType:"quantitative",yType:"quantitative",zoomToFit:!1,fontSize:11}},function(e,t,n){"use strict";var r=n(523),a=n(2),i=n(217),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(374),s=n(109),c=n(134);function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(this,void 0,void 0,a.mark((function o(){var l,h,p,v,m,g,b,y,x,_,w,k,O,S,j,E,C,A;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:l=s.getDrawArea(e),h={},p=i(n);try{for(p.s();!(v=p.n()).done;)m=v.value,/val_/.test(m)?(b=m.replace("val_",""),f(h,b),y=d(t,m,n.indexOf(m)),h[b].series.push(m),h[b].values.push(y)):(g=d(t,m,n.indexOf(m)),f(h,m),h[m].series.push(m),h[m].values.push(g))}catch(o){p.e(o)}finally{p.f()}for(x=Object.keys(h),_=Object.assign({},{xLabel:"Iteration",yLabel:"Value"},r),w=[],k=0,O=x;k<O.length;k++)S=O[k],j=c.subSurface(l,S),E=h[S].series,C=h[S].values,E.every((function(e){return Boolean(e.match("acc"))}))&&(_.zoomToFitAccuracy?_.zoomToFit=!0:(_.yAxisDomain=[0,1],delete _.zoomToFit)),A=u.linechart(j,{values:C,series:E},_),w.push(A);return a.next=10,Promise.all(w);case 10:case"end":return a.stop()}}),o)})))}function f(e,t){null==e[t]&&(e[t]={series:[],values:[]})}function d(e,t,n){if(Array.isArray(e)){for(var r=Array.isArray(e[0])?e[n]:e,a=[],i=0;i<r.length;i++){var o=r[i];a.push({x:i,y:o[t]})}return a}return e.history[t].map((function(e,t){return{x:t,y:e}}))}function h(e,t,n){return null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=[]),e[t][n]}t.history=l,t.fitCallbacks=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u={},f=n.callbacks||["onEpochEnd","onBatchEnd"],d=s.getDrawArea(e),p=Object.assign({},n);function v(e){var n=this;return function(f,v){return o(n,void 0,void 0,a.mark((function n(){var o,f,m,g,b,y;return a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:/batch/i.test(e)?p.xLabel="Batch":/epoch/i.test(e)&&(p.xLabel="Epoch"),o=[],f=[],m=i(t);try{for(m.s();!(g=m.n()).done;)b=g.value,null!=v[b]&&(f.push(b),(y=h(u,e,b)).push(r({},b,v[b])),o.push(y))}catch(a){m.e(a)}finally{m.f()}return l(c.subSurface(d,e,{title:e}),o,f,p),n.next=9,s.nextFrame();case 9:case"end":return n.stop()}}),n)})))}}delete p.callbacks;var m={};return f.forEach((function(e){m[e]=v(e)})),m}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(312),o=n(109),u=n(241),s=n(134),c=n(240);function l(e){return{layers:e.layers.map(f)}}function f(e){var t;if(Array.isArray(e.outputShape[0])){var n=e.outputShape.map((function(e){return h(e)}));t="[".concat(n.join(", "),"]")}else t=h(e.outputShape);return{name:e.name,trainable:e.trainable,parameters:e.countParams(),outputShape:t}}function d(e){return a(this,void 0,void 0,r.mark((function t(){var n,a,i,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getWeights(),a=e.weights,i=n.map(c.tensorStats),t.next=5,Promise.all(i);case 5:return o=t.sent,u=n.map((function(e){return e.shape})),t.abrupt("return",n.map((function(e,t){return{name:a[t].name,stats:o[t],shape:h(u[t]),weight:e}})));case 8:case"end":return t.stop()}}),t)})))}function h(e){var t=e.slice();return 0===t.length?"Scalar":(null===t[0]&&(t[0]="batch"),"[".concat(t.join(","),"]"))}function p(e,t,n){var r="\n    <select>\n      ".concat(e.map((function(e){return"<option value=".concat(e,">").concat(e,"</option>")})),"\n    </select>\n  "),a="<div>".concat("<button>Show Values Distribution for:</button>").concat(r,"</div>");t.innerHTML=a;var i=t.querySelector("button"),o=t.querySelector("select");i.addEventListener("click",(function(){n(o.selectedOptions[0].label)}))}t.modelSummary=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,i,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=o.getDrawArea(e),i=l(t),s=["Layer Name","Output Shape","# Of Params","Trainable"],c=i.layers.map((function(e){return[e.name,e.outputShape,e.parameters,e.trainable]})),u.table(a,{headers:s,values:c});case 5:case"end":return n.stop()}}),n)})))},t.layer=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var c,l,f,h,v,m,g,b,y=this;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=o.getDrawArea(e),n.next=3,d(t);case 3:l=n.sent,f=["Weight Name","Shape","Min","Max","# Params","# Zeros","# NaNs","# Infinity"],h=s.subSurface(c,"layer-weights-info"),v=l.map((function(e){return[e.name,e.shape,e.stats.min,e.stats.max,e.weight.size,e.stats.numZeros,e.stats.numNans,e.stats.numInfs]})),u.table(h,{headers:f,values:v}),m=s.subSurface(c,"select-layer"),g=s.subSurface(c,"param-distribution"),b=function(e){return a(y,void 0,void 0,r.mark((function t(){var n,a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.filter((function(t){return t.name===e}))[0],t.next=3,n.weight.data();case 3:a=t.sent,i.histogram(g,a,{height:150,width:460,stats:!1});case 5:case"end":return t.stop()}}),t)})))},p(l.map((function(e){return e.name})),m,b);case 12:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),o=n(241);t.perClassAccuracy=function(e,t,n){return a(this,void 0,void 0,r.mark((function a(){var u,s,c,l,f,d;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(u=i.getDrawArea(e),s=["Class","Accuracy","# Samples"],c=[],l=0;l<t.length;l++)f=n?n[l]:l.toString(),d=t[l],c.push([f,d.accuracy,d.count]);return r.abrupt("return",o.table(u,{headers:s,values:c}));case 5:case"end":return r.stop()}}),a)})))}},function(e,t,n){"use strict";var r=n(2),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,u)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=n(312),o=n(109),u=n(240);t.valuesDistribution=function(e,t){return a(this,void 0,void 0,r.mark((function n(){var a,s,c;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=o.getDrawArea(e),n.next=3,u.tensorStats(t);case 3:return s=n.sent,n.next=6,t.data();case 6:c=n.sent,i.histogram(a,c,{height:150,stats:s});case 8:case"end":return n.stop()}}),n)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.version="1.5.0"},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){var r;!function(a,i){var o,u=(0,eval)("this"),s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(535)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,,,function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.alea=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor128=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorwow=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xorshift7=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),a=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=u[127&i]^=r+o)?a+1:0);for(a>=128&&(u[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=u[a+34&127],n=u[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[a]=r^n;e.w=o,e.X=u,e.i=a}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.xor4096=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){(function(e){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=s:n(47)&&n(76)?void 0===(r=function(){return s}.call(t,n,t,a))||(a.exports=r):this.tychei=s}(0,e,n(47))}).call(this,n(75)(e))},function(e,t,n){var r;!function(a,i){var o,u=this,s=256,c=i.pow(s,6),l=i.pow(2,52),f=2*l,d=255;function h(e,t,n){var r=[],d=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(s):(e=new Uint8Array(s),(u.crypto||u.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(i.random=e,t):e})(y,d,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*s+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=h,g(i.random(),a),e.exports){e.exports=h;try{o=n(545)}catch(y){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}([],Math)},,function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return be})),n.d(t,"creator",(function(){return s})),n.d(t,"local",(function(){return xe})),n.d(t,"matcher",(function(){return m})),n.d(t,"mouse",(function(){return Oe})),n.d(t,"namespace",(function(){return i})),n.d(t,"namespaces",(function(){return a})),n.d(t,"clientPoint",(function(){return ke})),n.d(t,"select",(function(){return ge})),n.d(t,"selectAll",(function(){return Se})),n.d(t,"selection",(function(){return me})),n.d(t,"selector",(function(){return l})),n.d(t,"selectorAll",(function(){return d})),n.d(t,"style",(function(){return M})),n.d(t,"touch",(function(){return je})),n.d(t,"touches",(function(){return Ee})),n.d(t,"window",(function(){return C})),n.d(t,"event",(function(){return re})),n.d(t,"customEvent",(function(){return ce}));var r="http://www.w3.org/1999/xhtml",a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},i=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),a.hasOwnProperty(t)?{space:a[t],local:e}:e};function o(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r&&t.documentElement.namespaceURI===r?t.createElement(e):t.createElementNS(n,e)}}function u(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var s=function(e){var t=i(e);return(t.local?u:o)(t)};function c(){}var l=function(e){return null==e?c:function(){return this.querySelector(e)}};function f(){return[]}var d=function(e){return null==e?f:function(){return this.querySelectorAll(e)}},h=function(e){return function(){return this.matches(e)}};if("undefined"!==typeof document){var p=document.documentElement;if(!p.matches){var v=p.webkitMatchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector;h=function(e){return function(){return v.call(this,e)}}}}var m=h,g=function(e){return new Array(e.length)};function b(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}b.prototype={constructor:b,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function y(e,t,n,r,a,i){for(var o,u=0,s=t.length,c=i.length;u<c;++u)(o=t[u])?(o.__data__=i[u],r[u]=o):n[u]=new b(e,i[u]);for(;u<s;++u)(o=t[u])&&(a[u]=o)}function x(e,t,n,r,a,i,o){var u,s,c,l={},f=t.length,d=i.length,h=new Array(f);for(u=0;u<f;++u)(s=t[u])&&(h[u]=c="$"+o.call(s,s.__data__,u,t),c in l?a[u]=s:l[c]=s);for(u=0;u<d;++u)(s=l[c="$"+o.call(e,i[u],u,i)])?(r[u]=s,s.__data__=i[u],l[c]=null):n[u]=new b(e,i[u]);for(u=0;u<f;++u)(s=t[u])&&l[h[u]]===s&&(a[u]=s)}function _(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w(e){return function(){this.removeAttribute(e)}}function k(e){return function(){this.removeAttributeNS(e.space,e.local)}}function O(e,t){return function(){this.setAttribute(e,t)}}function S(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function j(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function E(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var C=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function A(e){return function(){this.style.removeProperty(e)}}function T(e,t,n){return function(){this.style.setProperty(e,t,n)}}function N(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function M(e,t){return e.style.getPropertyValue(t)||C(e).getComputedStyle(e,null).getPropertyValue(t)}function D(e){return function(){delete this[e]}}function I(e,t){return function(){this[e]=t}}function F(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function R(e){return e.trim().split(/^|\s+/)}function P(e){return e.classList||new L(e)}function L(e){this._node=e,this._names=R(e.getAttribute("class")||"")}function B(e,t){for(var n=P(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function z(e,t){for(var n=P(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function U(e){return function(){B(this,e)}}function W(e){return function(){z(this,e)}}function V(e,t){return function(){(t.apply(this,arguments)?B:z)(this,e)}}L.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function G(){this.textContent=""}function q(e){return function(){this.textContent=e}}function H(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function X(){this.innerHTML=""}function Y(e){return function(){this.innerHTML=e}}function K(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function $(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(){return null}function Q(){var e=this.parentNode;e&&e.removeChild(this)}function ee(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function te(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var ne={},re=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(ne={mouseenter:"mouseover",mouseleave:"mouseout"}));function ae(e,t,n){return e=ie(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ie(e,t,n){return function(r){var a=re;re=r;try{e.call(this,this.__data__,t,n)}finally{re=a}}}function oe(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function ue(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function se(e,t,n){var r=ne.hasOwnProperty(e.type)?ae:ie;return function(a,i,o){var u,s=this.__on,c=r(t,i,o);if(s)for(var l=0,f=s.length;l<f;++l)if((u=s[l]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=t);this.addEventListener(e.type,c,n),u={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function ce(e,t,n,r){var a=re;e.sourceEvent=re,re=e;try{return t.apply(n,r)}finally{re=a}}function le(e,t,n){var r=C(e),a=r.CustomEvent;"function"===typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function fe(e,t){return function(){return le(this,e,t)}}function de(e,t){return function(){return le(this,e,t.apply(this,arguments))}}var he=[null];function pe(e,t){this._groups=e,this._parents=t}function ve(){return new pe([[document.documentElement]],he)}pe.prototype=ve.prototype={constructor:pe,select:function(e){"function"!==typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,u=t[a],s=u.length,c=r[a]=new Array(s),f=0;f<s;++f)(i=u[f])&&(o=e.call(i,i.__data__,f,u))&&("__data__"in i&&(o.__data__=i.__data__),c[f]=o);return new pe(r,this._parents)},selectAll:function(e){"function"!==typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,u=t[i],s=u.length,c=0;c<s;++c)(o=u[c])&&(r.push(e.call(o,o.__data__,c,u)),a.push(o));return new pe(r,a)},filter:function(e){"function"!==typeof e&&(e=m(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],u=o.length,s=r[a]=[],c=0;c<u;++c)(i=o[c])&&e.call(i,i.__data__,c,o)&&s.push(i);return new pe(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),l=-1,this.each((function(e){p[++l]=e})),p;var n,r=t?x:y,a=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=i.length,u=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var f=a[l],d=i[l],h=d.length,p=e.call(f,f&&f.__data__,l,a),v=p.length,m=s[l]=new Array(v),g=u[l]=new Array(v);r(f,d,m,g,c[l]=new Array(h),p,t);for(var b,_,w=0,k=0;w<v;++w)if(b=m[w]){for(w>=k&&(k=w+1);!(_=g[k])&&++k<v;);b._next=_||null}}return(u=new pe(u,a))._enter=s,u._exit=c,u},enter:function(){return new pe(this._enter||this._groups.map(g),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(g),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),u=0;u<i;++u)for(var s,c=t[u],l=n[u],f=c.length,d=o[u]=new Array(f),h=0;h<f;++h)(s=c[h]||l[h])&&(d[h]=s);for(;u<r;++u)o[u]=t[u];return new pe(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=_);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,u=n[i],s=u.length,c=a[i]=new Array(s),l=0;l<s;++l)(o=u[l])&&(c[l]=o);c.sort(t)}return new pe(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,u=i.length;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n=i(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?k:w:"function"===typeof t?n.local?E:j:n.local?S:O)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?A:"function"===typeof t?N:T)(e,t,null==n?"":n)):M(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?D:"function"===typeof t?F:I)(e,t)):this.node()[e]},classed:function(e,t){var n=R(e+"");if(arguments.length<2){for(var r=P(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"===typeof t?V:t?U:W)(n,t))},text:function(e){return arguments.length?this.each(null==e?G:("function"===typeof e?H:q)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?X:("function"===typeof e?K:Y)(e)):this.node().innerHTML},raise:function(){return this.each($)},lower:function(){return this.each(Z)},append:function(e){var t="function"===typeof e?e:s(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:s(e),r=null==t?J:"function"===typeof t?t:l(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Q)},clone:function(e){return this.select(e?te:ee)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=oe(e+""),o=i.length;if(!(arguments.length<2)){for(u=t?se:ue,null==n&&(n=!1),r=0;r<o;++r)this.each(u(i[r],t,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;c<l;++c)for(r=0,s=u[c];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"===typeof t?de:fe)(e,t))}};var me=ve,ge=function(e){return"string"===typeof e?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],he)},be=function(e){return ge(s(e).call(document.documentElement))},ye=0;function xe(){return new _e}function _e(){this._="@"+(++ye).toString(36)}_e.prototype=xe.prototype={constructor:_e,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var we=function(){for(var e,t=re;e=t.sourceEvent;)t=e;return t},ke=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]},Oe=function(e){var t=we();return t.changedTouches&&(t=t.changedTouches[0]),ke(e,t)},Se=function(e){return"string"===typeof e?new pe([document.querySelectorAll(e)],[document.documentElement]):new pe([null==e?[]:e],he)},je=function(e,t,n){arguments.length<3&&(n=t,t=we().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return ke(e,r);return null},Ee=function(e,t){null==t&&(t=we().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=ke(e,t[n]);return a}},,function(e,t,n){"use strict";n.r(t),n.d(t,"capitalize",(function(){return r.a})),n.d(t,"createChainedFunction",(function(){return a.a})),n.d(t,"createSvgIcon",(function(){return i.a})),n.d(t,"debounce",(function(){return o.a})),n.d(t,"deprecatedPropType",(function(){return u})),n.d(t,"isMuiElement",(function(){return s.a})),n.d(t,"ownerDocument",(function(){return c.a})),n.d(t,"ownerWindow",(function(){return l.a})),n.d(t,"requirePropFactory",(function(){return f.a})),n.d(t,"setRef",(function(){return d.a})),n.d(t,"unsupportedProp",(function(){return h})),n.d(t,"useControlled",(function(){return p.a})),n.d(t,"useEventCallback",(function(){return v.a})),n.d(t,"useForkRef",(function(){return m.a})),n.d(t,"unstable_useId",(function(){return b})),n.d(t,"useIsFocusVisible",(function(){return y.a}));var r=n(46),a=n(162),i=n(276),o=n(144);function u(e,t){return function(){return null}}var s=n(148),c=n(63),l=n(200),f=n(313),d=n(124);function h(e,t,n,r,a){return null}var p=n(199),v=n(65),m=n(49),g=n(6);function b(e){var t=g.useState(e),n=t[0],r=t[1],a=e||n;return g.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),a}var y=n(198)},function(e,t,n){"use strict";var r=n(23),a=n(17),i=n(6),o=(n(38),n(26)),u=n(34),s=i.forwardRef((function(e,t){var n=e.classes,u=e.className,s=e.component,c=void 0===s?"div":s,l=e.square,f=void 0!==l&&l,d=e.elevation,h=void 0===d?1:d,p=e.variant,v=void 0===p?"elevation":p,m=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return i.createElement(c,Object(a.a)({className:Object(o.a)(n.root,u,"outlined"===v?n.outlined:n["elevation".concat(h)],!f&&n.rounded),ref:t},m))}));t.a=Object(u.a)((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),Object(a.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(s)},function(e,t,n){"use strict";var r={},a={};function i(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function o(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function u(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function s(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+u(-t,6):t>9999?"+"+u(t,6):u(t,4))+"-"+u(e.getUTCMonth()+1,2)+"-"+u(e.getUTCDate(),2)+(i?"T"+u(n,2)+":"+u(r,2)+":"+u(a,2)+"."+u(i,3)+"Z":a?"T"+u(n,2)+":"+u(r,2)+":"+u(a,2)+"Z":r||n?"T"+u(n,2)+":"+u(r,2)+"Z":"")}t.a=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function u(e,t){var i,o=[],u=e.length,s=0,c=0,l=u<=0,f=!1;function d(){if(l)return a;if(f)return f=!1,r;var t,i,o=s;if(34===e.charCodeAt(o)){for(;s++<u&&34!==e.charCodeAt(s)||34===e.charCodeAt(++s););return(t=s)>=u?l=!0:10===(i=e.charCodeAt(s++))?f=!0:13===i&&(f=!0,10===e.charCodeAt(s)&&++s),e.slice(o+1,t-1).replace(/""/g,'"')}for(;s<u;){if(10===(i=e.charCodeAt(t=s++)))f=!0;else if(13===i)f=!0,10===e.charCodeAt(s)&&++s;else if(i!==n)continue;return e.slice(o,t)}return l=!0,e.slice(o,u)}for(10===e.charCodeAt(u-1)&&--u,13===e.charCodeAt(u-1)&&--u;(i=d())!==a;){for(var h=[];i!==r&&i!==a;)h.push(i),i=d();t&&null==(h=t(h,c++))||o.push(h)}return o}function c(t,n){return t.map((function(t){return n.map((function(e){return f(t[e])})).join(e)}))}function l(t){return t.map(f).join(e)}function f(e){return null==e?"":e instanceof Date?s(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,a=u(e,(function(e,a){if(n)return n(e,a-1);r=e,n=t?function(e,t){var n=i(e);return function(r,a){return t(n(r),a,e)}}(e,t):i(e)}));return a.columns=r||[],a},parseRows:u,format:function(t,n){return null==n&&(n=o(t)),[n.map(f).join(e)].concat(c(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=o(e)),c(e,t).join("\n")},formatRows:function(e){return e.map(l).join("\n")},formatRow:l,formatValue:f}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return fn}));var r=n(23),a=n(17),i=n(6),o=n.n(i),u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="object"===("undefined"===typeof window?"undefined":u(window))&&"object"===("undefined"===typeof document?"undefined":u(document))&&9===document.nodeType,c=(n(129),n(208)),l=n(70),f=n(225),d=n(86),h={}.constructor;function p(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(p);if(e.constructor!==h)return e;var t={};for(var n in e)t[n]=p(e[n]);return t}function v(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,a=p(t),i=r.plugins.onCreateRule(e,a,n);return i||(e[0],null)}var m=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},g=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=m(e[r]," ");else n=m(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function b(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function y(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var a=n.indent,i=void 0===a?0:a,o=t.fallbacks;if(e&&i++,o)if(Array.isArray(o))for(var u=0;u<o.length;u++){var s=o[u];for(var c in s){var l=s[c];null!=l&&(r&&(r+="\n"),r+=""+b(c+": "+g(l)+";",i))}}else for(var f in o){var d=o[f];null!=d&&(r&&(r+="\n"),r+=""+b(f+": "+g(d)+";",i))}for(var h in t){var p=t[h];null!=p&&"fallbacks"!==h&&(r&&(r+="\n"),r+=""+b(h+": "+g(p)+";",i))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),b(e+" {"+r,--i)+b("}",i)):r}var x=/([[\].#*$><+~=|^:(),"'`\s])/g,_="undefined"!==typeof CSS&&CSS.escape,w=function(e){return _?_(e):e.replace(x,"\\$1")},k=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,a=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:a&&(this.renderer=new a)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var a=t;n&&!1===n.process||(a=this.options.jss.plugins.onChangeValue(t,e,this));var i=null==a||!1===a,o=e in this.style;if(i&&!o&&!r)return this;var u=i&&o;if(u?delete this.style[e]:this.style[e]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,a),this;var s=this.options.sheet;return s&&s.attached,this},e}(),O=function(e){function t(t,n,r){var a;(a=e.call(this,t,n,r)||this).selectorText=void 0,a.id=void 0,a.renderable=void 0;var i=r.selector,o=r.scoped,u=r.sheet,s=r.generateId;return i?a.selectorText=i:!1!==o&&(a.id=s(Object(f.a)(Object(f.a)(a)),u),a.selectorText="."+w(a.id)),a}Object(l.a)(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=g(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(a.a)({},e,{allowEmpty:!0}):e;return y(this.selectorText,this.style,n)},Object(c.a)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(k),S={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new O(e,t,n)}},j={indent:1,children:!0},E=/@([\w-]+)/,C=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e;var r=e.match(E);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Z(Object(a.a)({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=j),null==e.indent&&(e.indent=j.indent),null==e.children&&(e.children=j.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),A=/@media|@supports\s+/,T={onCreateRule:function(e,t,n){return A.test(e)?new C(e,t,n):null}},N={indent:1,children:!0},M=/@keyframes\s+([\w-]+)/,D=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var r=e.match(M);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,u=n.generateId;for(var s in this.id=!1===i?this.name:w(u(this,o)),this.rules=new Z(Object(a.a)({},n,{parent:this})),t)this.rules.add(s,t[s],Object(a.a)({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=N),null==e.indent&&(e.indent=N.indent),null==e.children&&(e.children=N.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),I=/@keyframes\s+/,F=/\$([\w-]+)/g,R=function(e,t){return"string"===typeof e?e.replace(F,(function(e,n){return n in t?t[n]:e})):e},P=function(e,t,n){var r=e[t],a=R(r,n);a!==r&&(e[t]=a)},L={onCreateRule:function(e,t,n){return"string"===typeof e&&I.test(e)?new D(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&P(e,"animation-name",n.keyframes),"animation"in e&&P(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return R(e,r.keyframes);default:return e}}},B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return Object(l.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?Object(a.a)({},e,{allowEmpty:!0}):e;return y(this.key,this.style,n)},t}(k),z={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new B(e,t,n):null}},U=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=y(this.at,this.style[n]),this.style[n+1]&&(t+="\n");return t}return y(this.at,this.style,e)},e}(),W=/@font-face/,V={onCreateRule:function(e,t,n){return W.test(e)?new U(e,t,n):null}},G=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return y(this.key,this.style,e)},e}(),q={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new G(e,t,n):null}},H=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),X={"@charset":!0,"@import":!0,"@namespace":!0},Y=[S,T,L,z,V,q,{onCreateRule:function(e,t,n){return e in X?new H(e,t,n):null}}],K={process:!0},$={force:!0,process:!0},Z=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,u=r.jss,s=r.Renderer,c=r.generateId,l=r.scoped,f=Object(a.a)({classes:this.classes,parent:i,sheet:o,jss:u,Renderer:s,generateId:c,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(f.selector="."+w(this.classes[d]));var h=v(d,t,f);if(!h)return null;this.register(h);var p=void 0===f.index?this.index.length:f.index;return this.index.splice(p,0,h),h},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof O?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof D&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof O?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof D&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=K);var a=this.options,i=a.jss.plugins,o=a.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var u=t,s=u.style;if(i.onUpdate(n,t,o,r),r.process&&s&&s!==u.style){for(var c in i.onProcessStyle(u.style,u,o),u.style){var l=u.style[c];l!==s[c]&&u.prop(c,l,$)}for(var f in s){var d=u.style[f],h=s[f];null==d&&d!==h&&u.prop(f,null,$)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,a=0;a<this.index.length;a++){var i=this.index[a].toString(e);(i||r)&&(t&&(t+="\n"),t+=i)}return t},e}(),J=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(a.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Z(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var a=this.rules.add(e,t,n);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?this.deployed?(r?r.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),a):a:(this.deployed=!1,a)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var a=this.addRule(r,e[r],t);a&&n.push(a)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Q=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var a=this.registry.onCreateRule[r](e,t,n);if(a)return a}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,a=0;a<this.registry.onChangeValue.length;a++)r=this.registry.onChangeValue[a](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ee=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=Object(d.a)(t,["attached"]),a="",i=0;i<this.registry.length;i++){var o=this.registry[i];null!=n&&o.attached!==n||(a&&(a+="\n"),a+=o.toString(r))}return a},Object(c.a)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),te="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),ne="2f1acc6c3a606b082e5eef5e54414ffb";null==te[ne]&&(te[ne]=0);var re=te[ne]++,ae=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var a="",i="";return r&&(r.options.classNamePrefix&&(i=r.options.classNamePrefix),null!=r.options.jss.id&&(a=String(r.options.jss.id))),e.minify?""+(i||"c")+re+a+t:i+n.key+"-"+re+(a?"-"+a:"")+"-"+t}},ie=function(e){var t;return function(){return t||(t=e()),t}},oe=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ue=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=g(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(a){return!1}return!0},se=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},ce=function(e,t){return e.selectorText=t,e.selectorText===t},le=ie((function(){return document.querySelector("head")}));function fe(e){var t=ee.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var a=function(e){for(var t=le(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(a)return{parent:a.parentNode,node:a.nextSibling}}return!1}var de=ie((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),he=function(e,t,n){try{if("insertRule"in e)e.insertRule(t,n);else if("appendRule"in e){e.appendRule(t)}}catch(r){return!1}return e.cssRules[n]},pe=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},ve=function(){function e(e){this.getPropertyValue=oe,this.setProperty=ue,this.removeProperty=se,this.setSelector=ce,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],e&&ee.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,a=t.element;this.element=a||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var i=de();i&&this.element.setAttribute("nonce",i)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=fe(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var a=n,i=a.parentNode;i&&i.insertBefore(e,a.nextSibling)}else le().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,a=n;if("conditional"===e.type||"keyframes"===e.type){var i=pe(n,t);if(!1===(a=he(n,r.toString({children:!1}),i)))return!1;this.refCssRule(e,i,a)}return this.insertRules(r.rules,a),a}var o=e.toString();if(!o)return!1;var u=pe(n,t),s=he(n,o,u);return!1!==s&&(this.hasInsertedRules=!0,this.refCssRule(e,u,s),s)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof J&&(this.cssRules[t]=n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),me=0,ge=function(){function e(e){this.id=me++,this.version="10.5.1",this.plugins=new Q,this.options={id:{minify:!1},createGenerateId:ae,Renderer:s?ve:null,plugins:[]},this.generateId=ae({minify:!1});for(var t=0;t<Y.length;t++)this.plugins.use(Y[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(a.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===ee.index?0:ee.index+1);var r=new J(e,Object(a.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),ee.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=Object(a.a)({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=v(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();function be(e){var t=null;for(var n in e){var r=e[n],a=typeof r;if("function"===a)t||(t={}),t[n]=r;else if("object"===a&&null!==r&&!Array.isArray(r)){var i=be(r);i&&(t||(t={}),t[n]=i)}}return t}var ye="object"===typeof CSS&&null!=CSS&&"number"in CSS,xe=function(e){return new ge(e)},_e=(xe(),n(602)),we={set:function(e,t,n,r){var a=e.get(t);a||(a=new Map,e.set(t,a)),a.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},ke=n(554),Oe=(n(38),"function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__"),Se=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var je=Date.now(),Ee="fnValues"+je,Ce="fnStyle"+ ++je,Ae=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=v(e,{},n);return r[Ce]=t,r},onProcessStyle:function(e,t){if(Ee in t||Ce in t)return e;var n={};for(var r in e){var a=e[r];"function"===typeof a&&(delete e[r],n[r]=a)}return t[Ee]=n,e},onUpdate:function(e,t,n,r){var a=t,i=a[Ce];i&&(a.style=i(e)||{});var o=a[Ee];if(o)for(var u in o)a.prop(u,o[u](e),r)}}},Te="@global",Ne="@global ",Me=function(){function e(e,t,n){for(var r in this.type="global",this.at=Te,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Z(Object(a.a)({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),De=function(){function e(e,t,n){this.type="global",this.at=Te,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var r=e.substr(Ne.length);this.rule=n.jss.createRule(r,t,Object(a.a)({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ie=/\s*,\s*/g;function Fe(e,t){for(var n=e.split(Ie),r="",a=0;a<n.length;a++)r+=t+" "+n[a].trim(),n[a+1]&&(r+=", ");return r}var Re=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===Te)return new Me(e,t,n);if("@"===e[0]&&e.substr(0,Ne.length)===Ne)return new De(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[Te]:null;if(i){for(var o in i)t.addRule(o,i[o],Object(a.a)({},n,{selector:Fe(o,e.selector)}));delete r[Te]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,Te.length)===Te){var o=Fe(i.substr(Te.length),e.selector);t.addRule(o,r[i],Object(a.a)({},n,{selector:o})),delete r[i]}}(e,t))}}},Pe=/\s*,\s*/g,Le=/&/g,Be=/\$([\w-]+)/g;var ze=function(){function e(e,t){return function(n,r){var a=e.getRule(r)||t&&t.getRule(r);return a?(a=a).selector:r}}function t(e,t){for(var n=t.split(Pe),r=e.split(Pe),a="",i=0;i<n.length;i++)for(var o=n[i],u=0;u<r.length;u++){var s=r[u];a&&(a+=", "),a+=-1!==s.indexOf("&")?s.replace(Le,o):o+" "+s}return a}function n(e,t,n){if(n)return Object(a.a)({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=Object(a.a)({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var u,s,c=i,l=c.options.parent;for(var f in r){var d=-1!==f.indexOf("&"),h="@"===f[0];if(d||h){if(u=n(c,l,u),d){var p=t(f,c.selector);s||(s=e(l,o)),p=p.replace(Be,s),l.addRule(p,r[f],Object(a.a)({},u,{selector:p}))}else h&&l.addRule(f,{},u).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},Ue=n(279);function We(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Object(Ue.default)(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(We):t.fallbacks=We(e.fallbacks)),t}var Ve=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=We(e[t]);return e}return We(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Object(Ue.default)(t);return t===r?e:(n.prop(r,e),null)}}},Ge=ye&&CSS?CSS.px:"px",qe=ye&&CSS?CSS.ms:"ms",He=ye&&CSS?CSS.percent:"%";function Xe(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var a in e)r[a]=e[a],r[a.replace(t,n)]=e[a];return r}var Ye=Xe({"animation-delay":qe,"animation-duration":qe,"background-position":Ge,"background-position-x":Ge,"background-position-y":Ge,"background-size":Ge,border:Ge,"border-bottom":Ge,"border-bottom-left-radius":Ge,"border-bottom-right-radius":Ge,"border-bottom-width":Ge,"border-left":Ge,"border-left-width":Ge,"border-radius":Ge,"border-right":Ge,"border-right-width":Ge,"border-top":Ge,"border-top-left-radius":Ge,"border-top-right-radius":Ge,"border-top-width":Ge,"border-width":Ge,"border-block":Ge,"border-block-end":Ge,"border-block-end-width":Ge,"border-block-start":Ge,"border-block-start-width":Ge,"border-block-width":Ge,"border-inline":Ge,"border-inline-end":Ge,"border-inline-end-width":Ge,"border-inline-start":Ge,"border-inline-start-width":Ge,"border-inline-width":Ge,"border-start-start-radius":Ge,"border-start-end-radius":Ge,"border-end-start-radius":Ge,"border-end-end-radius":Ge,margin:Ge,"margin-bottom":Ge,"margin-left":Ge,"margin-right":Ge,"margin-top":Ge,"margin-block":Ge,"margin-block-end":Ge,"margin-block-start":Ge,"margin-inline":Ge,"margin-inline-end":Ge,"margin-inline-start":Ge,padding:Ge,"padding-bottom":Ge,"padding-left":Ge,"padding-right":Ge,"padding-top":Ge,"padding-block":Ge,"padding-block-end":Ge,"padding-block-start":Ge,"padding-inline":Ge,"padding-inline-end":Ge,"padding-inline-start":Ge,"mask-position-x":Ge,"mask-position-y":Ge,"mask-size":Ge,height:Ge,width:Ge,"min-height":Ge,"max-height":Ge,"min-width":Ge,"max-width":Ge,bottom:Ge,left:Ge,top:Ge,right:Ge,inset:Ge,"inset-block":Ge,"inset-block-end":Ge,"inset-block-start":Ge,"inset-inline":Ge,"inset-inline-end":Ge,"inset-inline-start":Ge,"box-shadow":Ge,"text-shadow":Ge,"column-gap":Ge,"column-rule":Ge,"column-rule-width":Ge,"column-width":Ge,"font-size":Ge,"font-size-delta":Ge,"letter-spacing":Ge,"text-decoration-thickness":Ge,"text-indent":Ge,"text-stroke":Ge,"text-stroke-width":Ge,"word-spacing":Ge,motion:Ge,"motion-offset":Ge,outline:Ge,"outline-offset":Ge,"outline-width":Ge,perspective:Ge,"perspective-origin-x":He,"perspective-origin-y":He,"transform-origin":He,"transform-origin-x":He,"transform-origin-y":He,"transform-origin-z":He,"transition-delay":qe,"transition-duration":qe,"vertical-align":Ge,"flex-basis":Ge,"shape-margin":Ge,size:Ge,gap:Ge,grid:Ge,"grid-gap":Ge,"row-gap":Ge,"grid-row-gap":Ge,"grid-column-gap":Ge,"grid-template-rows":Ge,"grid-template-columns":Ge,"grid-auto-rows":Ge,"grid-auto-columns":Ge,"box-shadow-x":Ge,"box-shadow-y":Ge,"box-shadow-blur":Ge,"box-shadow-spread":Ge,"font-line-height":Ge,"text-shadow-x":Ge,"text-shadow-y":Ge,"text-shadow-blur":Ge});function Ke(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Ke(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var a in t)t[a]=Ke(a,t[a],n);else for(var i in t)t[i]=Ke(e+"-"+i,t[i],n);else if("number"===typeof t&&!Number.isNaN(t)){var o=n[e]||Ye[e];return!o||0===t&&o===Ge?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var $e=function(e){void 0===e&&(e={});var t=Xe(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Ke(r,e[r],t);return e},onChangeValue:function(e,n){return Ke(n,e,t)}}},Ze=n(125),Je="",Qe="",et="",tt="",nt=s&&"ontouchstart"in document.documentElement;if(s){var rt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},at=document.createElement("p").style;for(var it in rt)if(it+"Transform"in at){Je=it,Qe=rt[it];break}"Webkit"===Je&&"msHyphens"in at&&(Je="ms",Qe=rt.ms,tt="edge"),"Webkit"===Je&&"-apple-trailing-word"in at&&(et="apple")}var ot=Je,ut=Qe,st=et,ct=tt,lt=nt;var ft={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ot?"-webkit-"+e:ut+e)}},dt={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ot?ut+"print-"+e:e)}},ht=/[-\s]+(.)?/g;function pt(e,t){return t?t.toUpperCase():""}function vt(e){return e.replace(ht,pt)}function mt(e){return vt("-"+e)}var gt,bt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ot){var n="mask-image";if(vt(n)in t)return e;if(ot+mt(n)in t)return ut+e}return e}},yt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==st||lt?e:ut+e)}},xt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:ut+e)}},_t={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:ut+e)}},wt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ot||"ms"===ot&&"edge"!==ct?ut+e:e)}},kt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ot||"ms"===ot||"apple"===st?ut+e:e)}},Ot={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ot?"WebkitColumn"+mt(e)in t&&ut+"column-"+e:"Moz"===ot&&("page"+mt(e)in t&&"page-"+e))}},St={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ot)return e;var n=e.replace("-inline","");return ot+mt(n)in t&&ut+n}},jt={supportedProperty:function(e,t){return vt(e)in t&&e}},Et={supportedProperty:function(e,t){var n=mt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ot+n in t?ut+e:"Webkit"!==ot&&"Webkit"+n in t&&"-webkit-"+e}},Ct={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ot?""+ut+e:e)}},At={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ot?ut+"scroll-chaining":e)}},Tt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Nt={supportedProperty:function(e,t){var n=Tt[e];return!!n&&(ot+mt(n)in t&&ut+n)}},Mt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Dt=Object.keys(Mt),It=function(e){return ut+e},Ft=[ft,dt,bt,yt,xt,_t,wt,kt,Ot,St,jt,Et,Ct,At,Nt,{supportedProperty:function(e,t,n){var r=n.multiple;if(Dt.indexOf(e)>-1){var a=Mt[e];if(!Array.isArray(a))return ot+mt(a)in t&&ut+a;if(!r)return!1;for(var i=0;i<a.length;i++)if(!(ot+mt(a[0])in t))return!1;return a.map(It)}return!1}}],Rt=Ft.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Pt=Ft.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(Ze.a)(t.noPrefill)),e}),[]),Lt={};if(s){gt=document.createElement("p");var Bt=window.getComputedStyle(document.documentElement,"");for(var zt in Bt)isNaN(zt)||(Lt[Bt[zt]]=Bt[zt]);Pt.forEach((function(e){return delete Lt[e]}))}function Ut(e,t){if(void 0===t&&(t={}),!gt)return e;if(null!=Lt[e])return Lt[e];"transition"!==e&&"transform"!==e||(t[e]=e in gt.style);for(var n=0;n<Rt.length&&(Lt[e]=Rt[n](e,gt.style,t),!Lt[e]);n++);try{gt.style[e]=""}catch(r){return!1}return Lt[e]}var Wt,Vt={},Gt={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},qt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Ht(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ut(t):", "+Ut(n);return r||(t||n)}function Xt(e,t){var n=t;if(!Wt||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Vt[r])return Vt[r];try{Wt.style[e]=n}catch(a){return Vt[r]=!1,!1}if(Gt[e])n=n.replace(qt,Ht);else if(""===Wt.style[e]&&("-ms-flex"===(n=ut+n)&&(Wt.style[e]="-ms-flexbox"),Wt.style[e]=n,""===Wt.style[e]))return Vt[r]=!1,!1;return Wt.style[e]="",Vt[r]=n,Vt[r]}s&&(Wt=document.createElement("p"));var Yt=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var a=!1,i=Ut(n);i&&i!==n&&(a=!0);var o=!1,u=Xt(i,g(r));u&&u!==r&&(o=!0),(a||o)&&(a&&delete t[n],t[i||n]=u||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===ot?n:"@"+ut+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Xt(t,g(e))||e}}};var Kt=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},a=Object.keys(t).sort(e),i=0;i<a.length;i++)r[a[i]]=t[a[i]];return r}}};function $t(){return{plugins:[Ae(),Re(),ze(),Ve(),$e(),"undefined"===typeof window?null:Yt(),Kt()]}}var Zt=xe($t()),Jt={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,a=void 0===r?"jss":r,i=e.seed,o=void 0===i?"":i,u=""===o?"":"".concat(o,"-"),s=0,c=function(){return s+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Se.indexOf(e.key))return"Mui-".concat(e.key);var i="".concat(u).concat(r,"-").concat(e.key);return t.options.theme[Oe]&&""===o?"".concat(i,"-").concat(c()):i}return"".concat(u).concat(a).concat(c())}}(),jss:Zt,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Qt=o.a.createContext(Jt);var en=-1e9;function tn(){return en+=1}n(156);var nn=n(603);function rn(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],u=Object(a.a)({},i);return Object.keys(o).forEach((function(e){u[e]=Object(nn.a)(u[e],o[e])})),u},options:{}}}var an={};function on(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var a=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,a=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,a=!0),a&&(r.cacheClasses.value=Object(_e.a)({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function un(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,u=e.name;if(!i.disableGeneration){var s=we.get(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},we.set(i.sheetsManager,o,r,s));var c=Object(a.a)({},o.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=i.sheetsRegistry;if(0===s.refs){var f;i.sheetsCache&&(f=we.get(i.sheetsCache,o,r));var d=o.create(r,u);f||((f=i.jss.createStyleSheet(d,Object(a.a)({link:!1},c))).attach(),i.sheetsCache&&we.set(i.sheetsCache,o,r,f)),l&&l.add(f),s.staticSheet=f,s.dynamicStyles=be(d)}if(s.dynamicStyles){var h=i.jss.createStyleSheet(s.dynamicStyles,Object(a.a)({link:!0},c));h.update(t),h.attach(),n.dynamicSheet=h,n.classes=Object(_e.a)({baseClasses:s.staticSheet.classes,newClasses:h.classes}),l&&l.add(h)}else n.classes=s.staticSheet.classes;s.refs+=1}}function sn(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function cn(e){var t=e.state,n=e.theme,r=e.stylesOptions,a=e.stylesCreator;if(!r.disableGeneration){var i=we.get(r.sheetsManager,a,n);i.refs-=1;var o=r.sheetsRegistry;0===i.refs&&(we.delete(r.sheetsManager,a,n),r.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function ln(e,t){var n,r=o.a.useRef([]),a=o.a.useMemo((function(){return{}}),t);r.current!==a&&(r.current=a,n=e()),o.a.useEffect((function(){return function(){n&&n()}}),[a])}function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,i=t.classNamePrefix,u=t.Component,s=t.defaultTheme,c=void 0===s?an:s,l=Object(r.a)(t,["name","classNamePrefix","Component","defaultTheme"]),f=rn(e),d=n||i||"makeStyles";f.options={index:tn(),name:n,meta:d,classNamePrefix:d};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(ke.a)()||c,r=Object(a.a)({},o.a.useContext(Qt),l),i=o.a.useRef(),s=o.a.useRef();ln((function(){var a={name:n,state:{},stylesCreator:f,stylesOptions:r,theme:t};return un(a,e),s.current=!1,i.current=a,function(){cn(a)}}),[t,f]),o.a.useEffect((function(){s.current&&sn(i.current,e),s.current=!0}));var d=on(i.current,e.classes,u);return d};return h}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6),a=n.n(r);var i=a.a.createContext(null);function o(){return a.a.useContext(i)}},function(e,t,n){"use strict";var r=n(23),a=n(17),i=n(415),o=n(6),u=(n(38),n(26)),s=n(103),c=n(164),l=n(34),f=n(46),d=n(49),h=n(144);function p(e,t){return parseInt(e[t],10)||0}var v="undefined"!==typeof window?o.useLayoutEffect:o.useEffect,m={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},g=o.forwardRef((function(e,t){var n=e.onChange,i=e.rows,u=e.rowsMax,s=e.rowsMin,c=void 0===s?1:s,l=e.style,f=e.value,g=Object(r.a)(e,["onChange","rows","rowsMax","rowsMin","style","value"]),b=i||c,y=o.useRef(null!=f).current,x=o.useRef(null),_=Object(d.a)(t,x),w=o.useRef(null),k=o.useRef(0),O=o.useState({}),S=O[0],j=O[1],E=o.useCallback((function(){var t=x.current,n=window.getComputedStyle(t),r=w.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],i=p(n,"padding-bottom")+p(n,"padding-top"),o=p(n,"border-bottom-width")+p(n,"border-top-width"),s=r.scrollHeight-i;r.value="x";var c=r.scrollHeight-i,l=s;b&&(l=Math.max(Number(b)*c,l)),u&&(l=Math.min(Number(u)*c,l));var f=(l=Math.max(l,c))+("border-box"===a?i+o:0),d=Math.abs(l-s)<=1;j((function(e){return k.current<20&&(f>0&&Math.abs((e.outerHeightStyle||0)-f)>1||e.overflow!==d)?(k.current+=1,{overflow:d,outerHeightStyle:f}):e}))}),[u,b,e.placeholder]);o.useEffect((function(){var e=Object(h.a)((function(){k.current=0,E()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[E]),v((function(){E()})),o.useEffect((function(){k.current=0}),[f]);return o.createElement(o.Fragment,null,o.createElement("textarea",Object(a.a)({value:f,onChange:function(e){k.current=0,y||E(),n&&n(e)},ref:_,rows:b,style:Object(a.a)({height:S.outerHeightStyle,overflow:S.overflow?"hidden":null},l)},g)),o.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:w,tabIndex:-1,style:Object(a.a)({},m,l)}))})),b=n(165),y="undefined"===typeof window?o.useEffect:o.useLayoutEffect,x=o.forwardRef((function(e,t){var n=e["aria-describedby"],l=e.autoComplete,h=e.autoFocus,p=e.classes,v=e.className,m=(e.color,e.defaultValue),x=e.disabled,_=e.endAdornment,w=(e.error,e.fullWidth),k=void 0!==w&&w,O=e.id,S=e.inputComponent,j=void 0===S?"input":S,E=e.inputProps,C=void 0===E?{}:E,A=e.inputRef,T=(e.margin,e.multiline),N=void 0!==T&&T,M=e.name,D=e.onBlur,I=e.onChange,F=e.onClick,R=e.onFocus,P=e.onKeyDown,L=e.onKeyUp,B=e.placeholder,z=e.readOnly,U=e.renderSuffix,W=e.rows,V=e.rowsMax,G=e.rowsMin,q=e.startAdornment,H=e.type,X=void 0===H?"text":H,Y=e.value,K=Object(r.a)(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","startAdornment","type","value"]),$=null!=C.value?C.value:Y,Z=o.useRef(null!=$).current,J=o.useRef(),Q=o.useCallback((function(e){0}),[]),ee=Object(d.a)(C.ref,Q),te=Object(d.a)(A,ee),ne=Object(d.a)(J,te),re=o.useState(!1),ae=re[0],ie=re[1],oe=Object(c.b)();var ue=Object(s.a)({props:e,muiFormControl:oe,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ue.focused=oe?oe.focused:ae,o.useEffect((function(){!oe&&x&&ae&&(ie(!1),D&&D())}),[oe,x,ae,D]);var se=oe&&oe.onFilled,ce=oe&&oe.onEmpty,le=o.useCallback((function(e){Object(b.b)(e)?se&&se():ce&&ce()}),[se,ce]);y((function(){Z&&le({value:$})}),[$,le,Z]);o.useEffect((function(){le(J.current)}),[]);var fe=j,de=Object(a.a)({},C,{ref:ne});"string"!==typeof fe?de=Object(a.a)({inputRef:ne,type:X},de,{ref:null}):N?!W||V||G?(de=Object(a.a)({rows:W,rowsMax:V},de),fe=g):fe="textarea":de=Object(a.a)({type:X},de);return o.useEffect((function(){oe&&oe.setAdornedStart(Boolean(q))}),[oe,q]),o.createElement("div",Object(a.a)({className:Object(u.a)(p.root,p["color".concat(Object(f.a)(ue.color||"primary"))],v,ue.disabled&&p.disabled,ue.error&&p.error,k&&p.fullWidth,ue.focused&&p.focused,oe&&p.formControl,N&&p.multiline,q&&p.adornedStart,_&&p.adornedEnd,"dense"===ue.margin&&p.marginDense),onClick:function(e){J.current&&e.currentTarget===e.target&&J.current.focus(),F&&F(e)},ref:t},K),q,o.createElement(c.a.Provider,{value:null},o.createElement(fe,Object(a.a)({"aria-invalid":ue.error,"aria-describedby":n,autoComplete:l,autoFocus:h,defaultValue:m,disabled:ue.disabled,id:O,onAnimationStart:function(e){le("mui-auto-fill-cancel"===e.animationName?J.current:{value:"x"})},name:M,placeholder:B,readOnly:z,required:ue.required,rows:W,value:$,onKeyDown:P,onKeyUp:L},de,{className:Object(u.a)(p.input,C.className,ue.disabled&&p.disabled,N&&p.inputMultiline,ue.hiddenLabel&&p.inputHiddenLabel,q&&p.inputAdornedStart,_&&p.inputAdornedEnd,"search"===X&&p.inputTypeSearch,"dense"===ue.margin&&p.inputMarginDense),onBlur:function(e){D&&D(e),C.onBlur&&C.onBlur(e),oe&&oe.onBlur?oe.onBlur(e):ie(!1)},onChange:function(e){if(!Z){var t=e.target||J.current;if(null==t)throw new Error(Object(i.a)(1));le({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];C.onChange&&C.onChange.apply(C,[e].concat(r)),I&&I.apply(void 0,[e].concat(r))},onFocus:function(e){ue.disabled?e.stopPropagation():(R&&R(e),C.onFocus&&C.onFocus(e),oe&&oe.onFocus?oe.onFocus(e):ie(!0))}}))),_,U?U(Object(a.a)({},ue,{startAdornment:q})):null)}));t.a=Object(l.a)((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},i={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:Object(a.a)({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(x)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(17),a=n(553),i=n(149);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(e,Object(r.a)({defaultTheme:i.a},t))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(17);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var a=Object(r.a)({},t);return Object.keys(n).forEach((function(e){n[e]&&(a[e]="".concat(t[e]," ").concat(n[e]))})),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17),a=n(156);function i(e){return e&&"object"===Object(a.a)(e)&&e.constructor===Object}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?Object(r.a)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e?a[r]=o(e[r],t[r],n):a[r]=t[r])})),a}},function(e,t,n){"use strict";var r=n(23),a=n(17),i=n(6),o=(n(38),n(26)),u=n(34),s=[0,1,2,3,4,5,6,7,8,9,10],c=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var f=i.forwardRef((function(e,t){var n=e.alignContent,u=void 0===n?"stretch":n,s=e.alignItems,c=void 0===s?"stretch":s,l=e.classes,f=e.className,d=e.component,h=void 0===d?"div":d,p=e.container,v=void 0!==p&&p,m=e.direction,g=void 0===m?"row":m,b=e.item,y=void 0!==b&&b,x=e.justify,_=void 0===x?"flex-start":x,w=e.lg,k=void 0!==w&&w,O=e.md,S=void 0!==O&&O,j=e.sm,E=void 0!==j&&j,C=e.spacing,A=void 0===C?0:C,T=e.wrap,N=void 0===T?"wrap":T,M=e.xl,D=void 0!==M&&M,I=e.xs,F=void 0!==I&&I,R=e.zeroMinWidth,P=void 0!==R&&R,L=Object(r.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),B=Object(o.a)(l.root,f,v&&[l.container,0!==A&&l["spacing-xs-".concat(String(A))]],y&&l.item,P&&l.zeroMinWidth,"row"!==g&&l["direction-xs-".concat(String(g))],"wrap"!==N&&l["wrap-xs-".concat(String(N))],"stretch"!==c&&l["align-items-xs-".concat(String(c))],"stretch"!==u&&l["align-content-xs-".concat(String(u))],"flex-start"!==_&&l["justify-xs-".concat(String(_))],!1!==F&&l["grid-xs-".concat(String(F))],!1!==E&&l["grid-sm-".concat(String(E))],!1!==S&&l["grid-md-".concat(String(S))],!1!==k&&l["grid-lg-".concat(String(k))],!1!==D&&l["grid-xl-".concat(String(D))]);return i.createElement(h,Object(a.a)({className:B,ref:t},L))})),d=Object(u.a)((function(e){return Object(a.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return s.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(l(a,2)),width:"calc(100% + ".concat(l(a),")"),"& > $item":{padding:l(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};c.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?Object(a.a)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(f);t.a=d},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var a,i=t.props[n];for(a in i)void 0===r[a]&&(r[a]=i[a]);return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(52),a=Object(r.a)((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}));t.a=a;a.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.d-e.getMinutes()*a.c)}),(function(e,t){e.setTime(+e+t*a.b)}),(function(e,t){return(t-e)/a.b}),(function(e){return e.getHours()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a.d)}),(function(e,t){e.setTime(+e+t*a.c)}),(function(e,t){return(t-e)/a.c}),(function(e){return e.getMinutes()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*a.d)}),(function(e,t){return(t-e)/a.d}),(function(e){return e.getUTCSeconds()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(52),a=Object(r.a)((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Object(r.a)((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):a:null},t.a=a;a.range},function(e,t,n){"use strict";var r=n(52),a=Object(r.a)((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}));t.a=a;a.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*a.b)}),(function(e,t){return(t-e)/a.b}),(function(e){return e.getUTCHours()}));t.a=i;i.range},function(e,t,n){"use strict";var r=n(52),a=n(56),i=Object(r.a)((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*a.c)}),(function(e,t){return(t-e)/a.c}),(function(e){return e.getUTCMinutes()}));t.a=i;i.range},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var r=Math.sqrt(50),a=Math.sqrt(10),i=Math.sqrt(2);function o(e,t,n){var o=(t-e)/Math.max(0,n),u=Math.floor(Math.log(o)/Math.LN10),s=o/Math.pow(10,u);return u>=0?(s>=r?10:s>=a?5:s>=i?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(s>=r?10:s>=a?5:s>=i?2:1)}function u(e,t,n){var o=Math.abs(t-e)/Math.max(0,n),u=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),s=o/u;return s>=r?u*=10:s>=a?u*=5:s>=i&&(u*=2),t<e?-u:u}t.a=function(e,t,n){var r,a,i,u,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(u=o(e,t,n))||!isFinite(u))return[];if(u>0)for(e=Math.ceil(e/u),t=Math.floor(t/u),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(e+s)*u;else for(u=-u,e=Math.ceil(e*u),t=Math.floor(t*u),i=new Array(a=Math.ceil(t-e+1));++s<a;)i[s]=(e+s)/u;return r&&i.reverse(),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u}));var r,a,i,o,u,s,c=n(382);s={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},r=Object(c.a)(s),a=r.format,i=r.parse,o=r.utcFormat,u=r.utcParse},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(82),o=n(6),u=(n(38),n(26)),s=n(34),c=n(46),l=o.forwardRef((function(e,t){var n=e.classes,i=e.className,s=e.component,l=void 0===s?"div":s,f=e.disableGutters,d=void 0!==f&&f,h=e.fixed,p=void 0!==h&&h,v=e.maxWidth,m=void 0===v?"lg":v,g=Object(a.a)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return o.createElement(l,Object(r.a)({className:Object(u.a)(n.root,i,p&&n.fixed,d&&n.disableGutters,!1!==m&&n["maxWidth".concat(Object(c.a)(String(m)))]),ref:t},g))}));t.a=Object(s.a)((function(e){return{root:Object(i.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(t,n){var r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:r}),t}),{}),maxWidthXs:Object(i.a)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:Object(i.a)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:Object(i.a)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:Object(i.a)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:Object(i.a)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(l)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(555),s=n(34),c=i.forwardRef((function(e,t){var n=e.disableUnderline,s=e.classes,c=e.fullWidth,l=void 0!==c&&c,f=e.inputComponent,d=void 0===f?"input":f,h=e.multiline,p=void 0!==h&&h,v=e.type,m=void 0===v?"text":v,g=Object(a.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return i.createElement(u.a,Object(r.a)({classes:Object(r.a)({},s,{root:Object(o.a)(s.root,!n&&s.underline),underline:null}),fullWidth:l,inputComponent:d,multiline:p,ref:t,type:m},g))}));c.muiName="Input",t.a=Object(s.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(c)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(127),c=i.forwardRef((function(e,t){var n=e.children,u=e.classes,c=e.className,l=e.component,f=void 0===l?"ul":l,d=e.dense,h=void 0!==d&&d,p=e.disablePadding,v=void 0!==p&&p,m=e.subheader,g=Object(a.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),b=i.useMemo((function(){return{dense:h}}),[h]);return i.createElement(s.a.Provider,{value:b},i.createElement(f,Object(r.a)({className:Object(o.a)(u.root,c,h&&u.dense,!v&&u.padding,m&&u.subheader),ref:t},g),m,n))}));t.a=Object(u.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(c)},function(e,t,n){"use strict";var r=n(23),a=n(17),i=n(6),o=(n(38),n(26)),u=n(34),s=n(59),c=n(321),l=n(46),f=i.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,f=e.color,d=void 0===f?"default":f,h=e.component,p=void 0===h?"button":h,v=e.disabled,m=void 0!==v&&v,g=e.disableElevation,b=void 0!==g&&g,y=e.disableFocusRipple,x=void 0!==y&&y,_=e.endIcon,w=e.focusVisibleClassName,k=e.fullWidth,O=void 0!==k&&k,S=e.size,j=void 0===S?"medium":S,E=e.startIcon,C=e.type,A=void 0===C?"button":C,T=e.variant,N=void 0===T?"text":T,M=Object(r.a)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),D=E&&i.createElement("span",{className:Object(o.a)(u.startIcon,u["iconSize".concat(Object(l.a)(j))])},E),I=_&&i.createElement("span",{className:Object(o.a)(u.endIcon,u["iconSize".concat(Object(l.a)(j))])},_);return i.createElement(c.a,Object(a.a)({className:Object(o.a)(u.root,u[N],s,"inherit"===d?u.colorInherit:"default"!==d&&u["".concat(N).concat(Object(l.a)(d))],"medium"!==j&&[u["".concat(N,"Size").concat(Object(l.a)(j))],u["size".concat(Object(l.a)(j))]],b&&u.disableElevation,m&&u.disabled,O&&u.fullWidth),component:p,disabled:m,focusRipple:!x,focusVisibleClassName:Object(o.a)(u.focusVisible,w),ref:t,type:A},M),i.createElement("span",{className:u.label},D,n,I))}));t.a=Object(u.a)((function(e){return{root:Object(a.a)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:Object(s.b)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(Object(s.b)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:Object(s.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(Object(s.b)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:Object(s.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(f)},function(e,t,n){"use strict";var r=n(17),a=n(6),i=(n(38),n(34)),o={WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box"},u=function(e){return Object(r.a)({color:e.palette.text.primary},e.typography.body2,{backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}})};t.a=Object(i.a)((function(e){return{"@global":{html:o,"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Object(r.a)({margin:0},u(e),{"&::backdrop":{backgroundColor:e.palette.background.default}})}}}),{name:"MuiCssBaseline"})((function(e){var t=e.children,n=void 0===t?null:t;return e.classes,a.createElement(a.Fragment,null,n)}))},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(46),c=n(551),l=i.forwardRef((function(e,t){var n=e.classes,u=e.className,l=e.color,f=void 0===l?"primary":l,d=e.position,h=void 0===d?"fixed":d,p=Object(a.a)(e,["classes","className","color","position"]);return i.createElement(c.a,Object(r.a)({square:!0,component:"header",elevation:4,className:Object(o.a)(n.root,n["position".concat(Object(s.a)(h))],n["color".concat(Object(s.a)(f))],u,"fixed"===h&&"mui-fixed"),ref:t},p))}));t.a=Object(u.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(l)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(82),o=n(6),u=(n(38),n(26)),s=n(34),c=o.forwardRef((function(e,t){var n=e.classes,i=e.className,s=e.component,c=void 0===s?"div":s,l=e.disableGutters,f=void 0!==l&&l,d=e.variant,h=void 0===d?"regular":d,p=Object(a.a)(e,["classes","className","component","disableGutters","variant"]);return o.createElement(c,Object(r.a)({className:Object(u.a)(n.root,n[h],i,!f&&n.gutters),ref:t},p))}));t.a=Object(s.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center"},gutters:Object(i.a)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),regular:e.mixins.toolbar,dense:{minHeight:48}}}),{name:"MuiToolbar"})(c)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(59),c=n(321),l=n(46),f=i.forwardRef((function(e,t){var n=e.edge,u=void 0!==n&&n,s=e.children,f=e.classes,d=e.className,h=e.color,p=void 0===h?"default":h,v=e.disabled,m=void 0!==v&&v,g=e.disableFocusRipple,b=void 0!==g&&g,y=e.size,x=void 0===y?"medium":y,_=Object(a.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.createElement(c.a,Object(r.a)({className:Object(o.a)(f.root,d,"default"!==p&&f["color".concat(Object(l.a)(p))],m&&f.disabled,"small"===x&&f["size".concat(Object(l.a)(x))],{start:f.edgeStart,end:f.edgeEnd}[u]),centerRipple:!0,focusRipple:!b,disabled:m,ref:t},_),i.createElement("span",{className:f.label},s))}));t.a=Object(u.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(s.b)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(s.b)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(s.b)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(f)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(59),c=i.forwardRef((function(e,t){var n=e.absolute,u=void 0!==n&&n,s=e.classes,c=e.className,l=e.component,f=void 0===l?"hr":l,d=e.flexItem,h=void 0!==d&&d,p=e.light,v=void 0!==p&&p,m=e.orientation,g=void 0===m?"horizontal":m,b=e.role,y=void 0===b?"hr"!==f?"separator":void 0:b,x=e.variant,_=void 0===x?"fullWidth":x,w=Object(a.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return i.createElement(f,Object(r.a)({className:Object(o.a)(s.root,c,"fullWidth"!==_&&s[_],u&&s.absolute,h&&s.flexItem,v&&s.light,"vertical"===g&&s.vertical),role:y,ref:t},w))}));t.a=Object(u.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(s.b)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(c)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(321),c=n(148),l=n(49),f=n(127),d=n(57),h="undefined"===typeof window?i.useEffect:i.useLayoutEffect,p=i.forwardRef((function(e,t){var n=e.alignItems,u=void 0===n?"center":n,p=e.autoFocus,v=void 0!==p&&p,m=e.button,g=void 0!==m&&m,b=e.children,y=e.classes,x=e.className,_=e.component,w=e.ContainerComponent,k=void 0===w?"li":w,O=e.ContainerProps,S=(O=void 0===O?{}:O).className,j=Object(a.a)(O,["className"]),E=e.dense,C=void 0!==E&&E,A=e.disabled,T=void 0!==A&&A,N=e.disableGutters,M=void 0!==N&&N,D=e.divider,I=void 0!==D&&D,F=e.focusVisibleClassName,R=e.selected,P=void 0!==R&&R,L=Object(a.a)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),B=i.useContext(f.a),z={dense:C||B.dense||!1,alignItems:u},U=i.useRef(null);h((function(){v&&U.current&&U.current.focus()}),[v]);var W=i.Children.toArray(b),V=W.length&&Object(c.a)(W[W.length-1],["ListItemSecondaryAction"]),G=i.useCallback((function(e){U.current=d.findDOMNode(e)}),[]),q=Object(l.a)(G,t),H=Object(r.a)({className:Object(o.a)(y.root,x,z.dense&&y.dense,!M&&y.gutters,I&&y.divider,T&&y.disabled,g&&y.button,"center"!==u&&y.alignItemsFlexStart,V&&y.secondaryAction,P&&y.selected),disabled:T},L),X=_||"li";return g&&(H.component=_||"div",H.focusVisibleClassName=Object(o.a)(y.focusVisible,F),X=s.a),V?(X=H.component||_?X:"div","li"===k&&("li"===X?X="div":"li"===H.component&&(H.component="div")),i.createElement(f.a.Provider,{value:z},i.createElement(k,Object(r.a)({className:Object(o.a)(y.container,S),ref:q},j),i.createElement(X,H,W),W.pop()))):i.createElement(f.a.Provider,{value:z},i.createElement(X,Object(r.a)({ref:q},H),W))}));t.a=Object(u.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(p)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(127),c=i.forwardRef((function(e,t){var n=e.classes,u=e.className,c=Object(a.a)(e,["classes","className"]),l=i.useContext(s.a);return i.createElement("div",Object(r.a)({className:Object(o.a)(n.root,u,"flex-start"===l.alignItems&&n.alignItemsFlexStart),ref:t},c))}));t.a=Object(u.a)((function(e){return{root:{minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},alignItemsFlexStart:{marginTop:8}}}),{name:"MuiListItemIcon"})(c)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(34),s=n(294),c=n(127),l=i.forwardRef((function(e,t){var n=e.children,u=e.classes,l=e.className,f=e.disableTypography,d=void 0!==f&&f,h=e.inset,p=void 0!==h&&h,v=e.primary,m=e.primaryTypographyProps,g=e.secondary,b=e.secondaryTypographyProps,y=Object(a.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),x=i.useContext(c.a).dense,_=null!=v?v:n;null==_||_.type===s.a||d||(_=i.createElement(s.a,Object(r.a)({variant:x?"body2":"body1",className:u.primary,component:"span",display:"block"},m),_));var w=g;return null==w||w.type===s.a||d||(w=i.createElement(s.a,Object(r.a)({variant:"body2",className:u.secondary,color:"textSecondary",display:"block"},b),w)),i.createElement("div",Object(r.a)({className:Object(o.a)(u.root,l,x&&u.dense,p&&u.inset,_&&w&&u.multiline),ref:t},y),_,w)}));t.a=Object(u.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(617),s=n(555),c=n(34),l=i.forwardRef((function(e,t){var n=e.disableUnderline,u=e.classes,c=e.fullWidth,l=void 0!==c&&c,f=e.inputComponent,d=void 0===f?"input":f,h=e.multiline,p=void 0!==h&&h,v=e.type,m=void 0===v?"text":v,g=Object(a.a)(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return i.createElement(s.a,Object(r.a)({classes:Object(r.a)({},u,{root:Object(o.a)(u.root,!n&&u.underline),underline:null}),fullWidth:l,inputComponent:d,multiline:p,ref:t,type:m},g))}));l.muiName="Input";var f=Object(c.a)((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(l),d=n(82),h=n(89),p=n(46),v=i.forwardRef((function(e,t){e.children;var n=e.classes,u=e.className,s=e.label,c=e.labelWidth,l=e.notched,f=e.style,v=Object(a.a)(e,["children","classes","className","label","labelWidth","notched","style"]),m="rtl"===Object(h.a)().direction?"right":"left";if(void 0!==s)return i.createElement("fieldset",Object(r.a)({"aria-hidden":!0,className:Object(o.a)(n.root,u),ref:t,style:f},v),i.createElement("legend",{className:Object(o.a)(n.legendLabelled,l&&n.legendNotched)},s?i.createElement("span",null,s):i.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var g=c>0?.75*c+8:.01;return i.createElement("fieldset",Object(r.a)({"aria-hidden":!0,style:Object(r.a)(Object(d.a)({},"padding".concat(Object(p.a)(m)),8),f),className:Object(o.a)(n.root,u),ref:t},v),i.createElement("legend",{className:n.legend,style:{width:l?g:.01}},i.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),m=Object(c.a)((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(v),g=i.forwardRef((function(e,t){var n=e.classes,u=e.fullWidth,c=void 0!==u&&u,l=e.inputComponent,f=void 0===l?"input":l,d=e.label,h=e.labelWidth,p=void 0===h?0:h,v=e.multiline,g=void 0!==v&&v,b=e.notched,y=e.type,x=void 0===y?"text":y,_=Object(a.a)(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return i.createElement(s.a,Object(r.a)({renderSuffix:function(e){return i.createElement(m,{className:n.notchedOutline,label:d,labelWidth:p,notched:"undefined"!==typeof b?b:Boolean(e.startAdornment||e.filled||e.focused)})},classes:Object(r.a)({},n,{root:Object(o.a)(n.root,n.underline),notchedOutline:null}),fullWidth:c,inputComponent:f,multiline:g,ref:t,type:x},_))}));g.muiName="Input";var b=Object(c.a)((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(g),y=n(103),x=n(164);function _(){return i.useContext(x.a)}var w=i.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,c=(e.color,e.component),l=void 0===c?"label":c,f=(e.disabled,e.error,e.filled,e.focused,e.required,Object(a.a)(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),d=_(),h=Object(y.a)({props:e,muiFormControl:d,states:["color","required","focused","disabled","error","filled"]});return i.createElement(l,Object(r.a)({className:Object(o.a)(u.root,u["color".concat(Object(p.a)(h.color||"primary"))],s,h.disabled&&u.disabled,h.error&&u.error,h.filled&&u.filled,h.focused&&u.focused,h.required&&u.required),ref:t},f),n,h.required&&i.createElement("span",{"aria-hidden":!0,className:Object(o.a)(u.asterisk,h.error&&u.error)},"\u2009","*"))})),k=Object(c.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(w),O=i.forwardRef((function(e,t){var n=e.classes,u=e.className,s=e.disableAnimation,c=void 0!==s&&s,l=(e.margin,e.shrink),f=(e.variant,Object(a.a)(e,["classes","className","disableAnimation","margin","shrink","variant"])),d=_(),h=l;"undefined"===typeof h&&d&&(h=d.filled||d.focused||d.adornedStart);var p=Object(y.a)({props:e,muiFormControl:d,states:["margin","variant"]});return i.createElement(k,Object(r.a)({"data-shrink":h,className:Object(o.a)(n.root,u,d&&n.formControl,!c&&n.animated,h&&n.shrink,"dense"===p.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[p.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:t},f))})),S=Object(c.a)((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(O),j=n(165),E=n(148),C=i.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,c=e.color,l=void 0===c?"primary":c,f=e.component,d=void 0===f?"div":f,h=e.disabled,v=void 0!==h&&h,m=e.error,g=void 0!==m&&m,b=e.fullWidth,y=void 0!==b&&b,_=e.focused,w=e.hiddenLabel,k=void 0!==w&&w,O=e.margin,S=void 0===O?"none":O,C=e.required,A=void 0!==C&&C,T=e.size,N=e.variant,M=void 0===N?"standard":N,D=Object(a.a)(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),I=i.useState((function(){var e=!1;return n&&i.Children.forEach(n,(function(t){if(Object(E.a)(t,["Input","Select"])){var n=Object(E.a)(t,["Select"])?t.props.input:t;n&&Object(j.a)(n.props)&&(e=!0)}})),e})),F=I[0],R=I[1],P=i.useState((function(){var e=!1;return n&&i.Children.forEach(n,(function(t){Object(E.a)(t,["Input","Select"])&&Object(j.b)(t.props,!0)&&(e=!0)})),e})),L=P[0],B=P[1],z=i.useState(!1),U=z[0],W=z[1],V=void 0!==_?_:U;v&&V&&W(!1);var G=i.useCallback((function(){B(!0)}),[]),q={adornedStart:F,setAdornedStart:R,color:l,disabled:v,error:g,filled:L,focused:V,fullWidth:y,hiddenLabel:k,margin:("small"===T?"dense":void 0)||S,onBlur:function(){W(!1)},onEmpty:i.useCallback((function(){B(!1)}),[]),onFilled:G,onFocus:function(){W(!0)},registerEffect:undefined,required:A,variant:M};return i.createElement(x.a.Provider,{value:q},i.createElement(d,Object(r.a)({className:Object(o.a)(u.root,s,"none"!==S&&u["margin".concat(Object(p.a)(S))],y&&u.fullWidth),ref:t},D),n))})),A=Object(c.a)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(C),T=i.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,c=e.component,l=void 0===c?"p":c,f=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Object(a.a)(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),d=_(),h=Object(y.a)({props:e,muiFormControl:d,states:["variant","margin","disabled","error","filled","focused","required"]});return i.createElement(l,Object(r.a)({className:Object(o.a)(u.root,("filled"===h.variant||"outlined"===h.variant)&&u.contained,s,h.disabled&&u.disabled,h.error&&u.error,h.filled&&u.filled,h.focused&&u.focused,h.required&&u.required,"dense"===h.margin&&u.marginDense),ref:t},f)," "===n?i.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),N=Object(c.a)((function(e){return{root:Object(r.a)({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(T),M=n(602),D=n(126),I=n(156),F=n(415),R=(n(213),n(63)),P=n(57),L=n(144),B=n(200),z=n(162),U=n(629),W=n(633),V=n(105),G=n(49);function q(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var H={entering:{opacity:1,transform:q(1)},entered:{opacity:1,transform:"none"}},X=i.forwardRef((function(e,t){var n=e.children,o=e.disableStrictModeCompat,u=void 0!==o&&o,s=e.in,c=e.onEnter,l=e.onEntered,f=e.onEntering,d=e.onExit,p=e.onExited,v=e.onExiting,m=e.style,g=e.timeout,b=void 0===g?"auto":g,y=e.TransitionComponent,x=void 0===y?W.a:y,_=Object(a.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),w=i.useRef(),k=i.useRef(),O=Object(h.a)(),S=O.unstable_strictMode&&!u,j=i.useRef(null),E=Object(G.a)(n.ref,t),C=Object(G.a)(S?j:void 0,E),A=function(e){return function(t,n){if(e){var r=S?[j.current,t]:[t,n],a=Object(D.a)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},T=A(f),N=A((function(e,t){Object(V.b)(e);var n,r=Object(V.a)({style:m,timeout:b},{mode:"enter"}),a=r.duration,i=r.delay;"auto"===b?(n=O.transitions.getAutoHeightDuration(e.clientHeight),k.current=n):n=a,e.style.transition=[O.transitions.create("opacity",{duration:n,delay:i}),O.transitions.create("transform",{duration:.666*n,delay:i})].join(","),c&&c(e,t)})),M=A(l),I=A(v),F=A((function(e){var t,n=Object(V.a)({style:m,timeout:b},{mode:"exit"}),r=n.duration,a=n.delay;"auto"===b?(t=O.transitions.getAutoHeightDuration(e.clientHeight),k.current=t):t=r,e.style.transition=[O.transitions.create("opacity",{duration:t,delay:a}),O.transitions.create("transform",{duration:.666*t,delay:a||.333*t})].join(","),e.style.opacity="0",e.style.transform=q(.75),d&&d(e)})),R=A(p);return i.useEffect((function(){return function(){clearTimeout(w.current)}}),[]),i.createElement(x,Object(r.a)({appear:!0,in:s,nodeRef:S?j:void 0,onEnter:N,onEntered:M,onEntering:T,onExit:F,onExited:R,onExiting:I,addEndListener:function(e,t){var n=S?e:t;"auto"===b&&(w.current=setTimeout(n,k.current||0))},timeout:"auto"===b?null:b},_),(function(e,t){return i.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,transform:q(.75),visibility:"exited"!==e||s?void 0:"hidden"},H[e],m,n.props.style),ref:C},t))}))}));X.muiSupportAuto=!0;var Y=X,K=n(551);function $(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Z(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function J(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function Q(e){return"function"===typeof e?e():e}var ee=i.forwardRef((function(e,t){var n=e.action,u=e.anchorEl,s=e.anchorOrigin,c=void 0===s?{vertical:"top",horizontal:"left"}:s,l=e.anchorPosition,f=e.anchorReference,d=void 0===f?"anchorEl":f,h=e.children,p=e.classes,v=e.className,m=e.container,g=e.elevation,b=void 0===g?8:g,y=e.getContentAnchorEl,x=e.marginThreshold,_=void 0===x?16:x,w=e.onEnter,k=e.onEntered,O=e.onEntering,S=e.onExit,j=e.onExited,E=e.onExiting,C=e.open,A=e.PaperProps,T=void 0===A?{}:A,N=e.transformOrigin,M=void 0===N?{vertical:"top",horizontal:"left"}:N,D=e.TransitionComponent,I=void 0===D?Y:D,F=e.transitionDuration,W=void 0===F?"auto":F,V=e.TransitionProps,G=void 0===V?{}:V,q=Object(a.a)(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),H=i.useRef(),X=i.useCallback((function(e){if("anchorPosition"===d)return l;var t=Q(u),n=(t&&1===t.nodeType?t:Object(R.a)(H.current).body).getBoundingClientRect(),r=0===e?c.vertical:"center";return{top:n.top+$(n,r),left:n.left+Z(n,c.horizontal)}}),[u,c.horizontal,c.vertical,l,d]),ee=i.useCallback((function(e){var t=0;if(y&&"anchorEl"===d){var n=y(e);if(n&&e.contains(n)){var r=function(e,t){for(var n=t,r=0;n&&n!==e;)r+=(n=n.parentElement).scrollTop;return r}(e,n);t=n.offsetTop+n.clientHeight/2-r||0}0}return t}),[c.vertical,d,y]),te=i.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:$(e,M.vertical)+t,horizontal:Z(e,M.horizontal)}}),[M.horizontal,M.vertical]),ne=i.useCallback((function(e){var t=ee(e),n={width:e.offsetWidth,height:e.offsetHeight},r=te(n,t);if("none"===d)return{top:null,left:null,transformOrigin:J(r)};var a=X(t),i=a.top-r.vertical,o=a.left-r.horizontal,s=i+n.height,c=o+n.width,l=Object(B.a)(Q(u)),f=l.innerHeight-_,h=l.innerWidth-_;if(i<_){var p=i-_;i-=p,r.vertical+=p}else if(s>f){var v=s-f;i-=v,r.vertical+=v}if(o<_){var m=o-_;o-=m,r.horizontal+=m}else if(c>h){var g=c-h;o-=g,r.horizontal+=g}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:J(r)}}),[u,d,X,ee,te,_]),re=i.useCallback((function(){var e=H.current;if(e){var t=ne(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[ne]),ae=i.useCallback((function(e){H.current=P.findDOMNode(e)}),[]);i.useEffect((function(){C&&re()})),i.useImperativeHandle(n,(function(){return C?{updatePosition:function(){re()}}:null}),[C,re]),i.useEffect((function(){if(C){var e=Object(L.a)((function(){re()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[C,re]);var ie=W;"auto"!==W||I.muiSupportAuto||(ie=void 0);var oe=m||(u?Object(R.a)(Q(u)).body:void 0);return i.createElement(U.a,Object(r.a)({container:oe,open:C,ref:t,BackdropProps:{invisible:!0},className:Object(o.a)(p.root,v)},q),i.createElement(I,Object(r.a)({appear:!0,in:C,onEnter:w,onEntered:k,onExit:S,onExited:j,onExiting:E,timeout:ie},G,{onEntering:Object(z.a)((function(e,t){O&&O(e,t),re()}),G.onEntering)}),i.createElement(K.a,Object(r.a)({elevation:b,ref:ae},T,{className:Object(o.a)(p.paper,T.className)}),h)))})),te=Object(c.a)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(ee),ne=n(618),re=n(291);function ae(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function ie(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function oe(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function ue(e,t,n,r,a,i){for(var o=!1,u=a(e,t,!!t&&n);u;){if(u===e.firstChild){if(o)return;o=!0}var s=!r&&(u.disabled||"true"===u.getAttribute("aria-disabled"));if(u.hasAttribute("tabindex")&&oe(u,i)&&!s)return void u.focus();u=a(e,u,n)}}var se="undefined"===typeof window?i.useEffect:i.useLayoutEffect,ce=i.forwardRef((function(e,t){var n=e.actions,o=e.autoFocus,u=void 0!==o&&o,s=e.autoFocusItem,c=void 0!==s&&s,l=e.children,f=e.className,d=e.disabledItemsFocusable,h=void 0!==d&&d,p=e.disableListWrap,v=void 0!==p&&p,m=e.onKeyDown,g=e.variant,b=void 0===g?"selectedMenu":g,y=Object(a.a)(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),x=i.useRef(null),_=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});se((function(){u&&x.current.focus()}),[u]),i.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!x.current.style.width;if(e.clientHeight<x.current.clientHeight&&n){var r="".concat(Object(re.a)(!0),"px");x.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=r,x.current.style.width="calc(100% + ".concat(r,")")}return x.current}}}),[]);var w=i.useCallback((function(e){x.current=P.findDOMNode(e)}),[]),k=Object(G.a)(w,t),O=-1;i.Children.forEach(l,(function(e,t){i.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===O)&&(O=t))}));var S=i.Children.map(l,(function(e,t){if(t===O){var n={};return c&&(n.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===b&&(n.tabIndex=0),i.cloneElement(e,n)}return e}));return i.createElement(ne.a,Object(r.a)({role:"menu",ref:k,className:f,onKeyDown:function(e){var t=x.current,n=e.key,r=Object(R.a)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),ue(t,r,v,h,ae);else if("ArrowUp"===n)e.preventDefault(),ue(t,r,v,h,ie);else if("Home"===n)e.preventDefault(),ue(t,null,v,h,ae);else if("End"===n)e.preventDefault(),ue(t,null,v,h,ie);else if(1===n.length){var a=_.current,i=n.toLowerCase(),o=performance.now();a.keys.length>0&&(o-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&i!==a.keys[0]&&(a.repeating=!1)),a.lastTime=o,a.keys.push(i);var u=r&&!a.repeating&&oe(r,a);a.previousKeyMatched&&(u||ue(t,r,!1,h,ae,a))?e.preventDefault():a.previousKeyMatched=!1}m&&m(e)},tabIndex:u?0:-1},y),S)})),le=n(124),fe={vertical:"top",horizontal:"right"},de={vertical:"top",horizontal:"left"},he=i.forwardRef((function(e,t){var n=e.autoFocus,u=void 0===n||n,s=e.children,c=e.classes,l=e.disableAutoFocusItem,f=void 0!==l&&l,d=e.MenuListProps,p=void 0===d?{}:d,v=e.onClose,m=e.onEntering,g=e.open,b=e.PaperProps,y=void 0===b?{}:b,x=e.PopoverClasses,_=e.transitionDuration,w=void 0===_?"auto":_,k=e.variant,O=void 0===k?"selectedMenu":k,S=Object(a.a)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","variant"]),j=Object(h.a)(),E=u&&!f&&g,C=i.useRef(null),A=i.useRef(null),T=-1;i.Children.map(s,(function(e,t){i.isValidElement(e)&&(e.props.disabled||("menu"!==O&&e.props.selected||-1===T)&&(T=t))}));var N=i.Children.map(s,(function(e,t){return t===T?i.cloneElement(e,{ref:function(t){A.current=P.findDOMNode(t),Object(le.a)(e.ref,t)}}):e}));return i.createElement(te,Object(r.a)({getContentAnchorEl:function(){return A.current},classes:x,onClose:v,onEntering:function(e,t){C.current&&C.current.adjustStyleForScrollbar(e,j),m&&m(e,t)},anchorOrigin:"rtl"===j.direction?fe:de,transformOrigin:"rtl"===j.direction?fe:de,PaperProps:Object(r.a)({},y,{classes:Object(r.a)({},y.classes,{root:c.paper})}),open:g,ref:t,transitionDuration:w},S),i.createElement(ce,Object(r.a)({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),v&&v(e,"tabKeyDown"))},actions:C,autoFocus:u&&(-1===T||f),autoFocusItem:E,variant:O},p,{className:Object(o.a)(c.list,p.className)}),N))})),pe=Object(c.a)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(he),ve=n(199);function me(e,t){return"object"===Object(I.a)(t)&&null!==t?e===t:String(e)===String(t)}var ge=i.forwardRef((function(e,t){var n=e["aria-label"],u=e.autoFocus,s=e.autoWidth,c=e.children,l=e.classes,f=e.className,d=e.defaultValue,h=e.disabled,v=e.displayEmpty,m=e.IconComponent,g=e.inputRef,b=e.labelId,y=e.MenuProps,x=void 0===y?{}:y,_=e.multiple,w=e.name,k=e.onBlur,O=e.onChange,S=e.onClose,E=e.onFocus,C=e.onOpen,A=e.open,T=e.readOnly,N=e.renderValue,M=e.SelectDisplayProps,I=void 0===M?{}:M,P=e.tabIndex,L=(e.type,e.value),B=e.variant,z=void 0===B?"standard":B,U=Object(a.a)(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),W=Object(ve.a)({controlled:L,default:d,name:"Select"}),V=Object(D.a)(W,2),q=V[0],H=V[1],X=i.useRef(null),Y=i.useState(null),K=Y[0],$=Y[1],Z=i.useRef(null!=A).current,J=i.useState(),Q=J[0],ee=J[1],te=i.useState(!1),ne=te[0],re=te[1],ae=Object(G.a)(t,g);i.useImperativeHandle(ae,(function(){return{focus:function(){K.focus()},node:X.current,value:q}}),[K,q]),i.useEffect((function(){u&&K&&K.focus()}),[u,K]),i.useEffect((function(){if(K){var e=Object(R.a)(K).getElementById(b);if(e){var t=function(){getSelection().isCollapsed&&K.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[b,K]);var ie,oe,ue=function(e,t){e?C&&C(t):S&&S(t),Z||(ee(s?null:K.clientWidth),re(e))},se=i.Children.toArray(c),ce=function(e){return function(t){var n;if(_||ue(!1,t),_){n=Array.isArray(q)?q.slice():[];var r=q.indexOf(e.props.value);-1===r?n.push(e.props.value):n.splice(r,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),q!==n&&(H(n),O&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:w}}),O(t,e)))}},le=null!==K&&(Z?A:ne);delete U["aria-invalid"];var fe=[],de=!1;(Object(j.b)({value:q})||v)&&(N?ie=N(q):de=!0);var he=se.map((function(e){if(!i.isValidElement(e))return null;var t;if(_){if(!Array.isArray(q))throw new Error(Object(F.a)(2));(t=q.some((function(t){return me(t,e.props.value)})))&&de&&fe.push(e.props.children)}else(t=me(q,e.props.value))&&de&&(oe=e.props.children);return t&&!0,i.cloneElement(e,{"aria-selected":t?"true":void 0,onClick:ce(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));de&&(ie=_?fe.join(", "):oe);var ge,be=Q;!s&&Z&&K&&(be=K.clientWidth),ge="undefined"!==typeof P?P:h?null:0;var ye=I.id||(w?"mui-component-select-".concat(w):void 0);return i.createElement(i.Fragment,null,i.createElement("div",Object(r.a)({className:Object(o.a)(l.root,l.select,l.selectMenu,l[z],f,h&&l.disabled),ref:$,tabIndex:ge,role:"button","aria-disabled":h?"true":void 0,"aria-expanded":le?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[b,ye].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!T){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),ue(!0,e))}},onMouseDown:h||T?null:function(e){0===e.button&&(e.preventDefault(),K.focus(),ue(!0,e))},onBlur:function(e){!le&&k&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:q,name:w}}),k(e))},onFocus:E},I,{id:ye}),function(e){return null==e||"string"===typeof e&&!e.trim()}(ie)?i.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):ie),i.createElement("input",Object(r.a)({value:Array.isArray(q)?q.join(","):q,name:w,ref:X,"aria-hidden":!0,onChange:function(e){var t=se.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=se[t];H(n.props.value),O&&O(e,n)}},tabIndex:-1,className:l.nativeInput,autoFocus:u},U)),i.createElement(m,{className:Object(o.a)(l.icon,l["icon".concat(Object(p.a)(z))],le&&l.iconOpen,h&&l.disabled)}),i.createElement(pe,Object(r.a)({id:"menu-".concat(w||""),anchorEl:K,open:le,onClose:function(e){ue(!1,e)}},x,{MenuListProps:Object(r.a)({"aria-labelledby":b,role:"listbox",disableListWrap:!0},x.MenuListProps),PaperProps:Object(r.a)({},x.PaperProps,{style:Object(r.a)({minWidth:be},null!=x.PaperProps?x.PaperProps.style:null)})}),he))})),be=n(276),ye=Object(be.a)(i.createElement("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),xe=i.forwardRef((function(e,t){var n=e.classes,u=e.className,s=e.disabled,c=e.IconComponent,l=e.inputRef,f=e.variant,d=void 0===f?"standard":f,h=Object(a.a)(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return i.createElement(i.Fragment,null,i.createElement("select",Object(r.a)({className:Object(o.a)(n.root,n.select,n[d],u,s&&n.disabled),disabled:s,ref:l||t},h)),e.multiple?null:i.createElement(c,{className:Object(o.a)(n.icon,n["icon".concat(Object(p.a)(d))],s&&n.disabled)}))})),_e=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},we=i.createElement(u.a,null),ke=i.forwardRef((function(e,t){var n=e.children,o=e.classes,u=e.IconComponent,s=void 0===u?ye:u,c=e.input,l=void 0===c?we:c,f=e.inputProps,d=(e.variant,Object(a.a)(e,["children","classes","IconComponent","input","inputProps","variant"])),h=_(),p=Object(y.a)({props:e,muiFormControl:h,states:["variant"]});return i.cloneElement(l,Object(r.a)({inputComponent:xe,inputProps:Object(r.a)({children:n,classes:o,IconComponent:s,variant:p.variant,type:void 0},f,l?l.props.inputProps:{}),ref:t},d))}));ke.muiName="Select";Object(c.a)(_e,{name:"MuiNativeSelect"})(ke);var Oe=_e,Se=i.createElement(u.a,null),je=i.createElement(f,null),Ee=i.forwardRef((function e(t,n){var o=t.autoWidth,u=void 0!==o&&o,s=t.children,c=t.classes,l=t.displayEmpty,f=void 0!==l&&l,d=t.IconComponent,h=void 0===d?ye:d,p=t.id,v=t.input,m=t.inputProps,g=t.label,x=t.labelId,w=t.labelWidth,k=void 0===w?0:w,O=t.MenuProps,S=t.multiple,j=void 0!==S&&S,E=t.native,C=void 0!==E&&E,A=t.onClose,T=t.onOpen,N=t.open,D=t.renderValue,I=t.SelectDisplayProps,F=t.variant,R=void 0===F?"standard":F,P=Object(a.a)(t,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),L=C?xe:ge,B=_(),z=Object(y.a)({props:t,muiFormControl:B,states:["variant"]}).variant||R,U=v||{standard:Se,outlined:i.createElement(b,{label:g,labelWidth:k}),filled:je}[z];return i.cloneElement(U,Object(r.a)({inputComponent:L,inputProps:Object(r.a)({children:s,IconComponent:h,variant:z,type:void 0,multiple:j},C?{id:p}:{autoWidth:u,displayEmpty:f,labelId:x,MenuProps:O,onClose:A,onOpen:T,open:N,renderValue:D,SelectDisplayProps:Object(r.a)({id:p},I)},m,{classes:m?Object(M.a)({baseClasses:c,newClasses:m.classes,Component:e}):c},v?v.props.inputProps:{}),ref:n},P))}));Ee.muiName="Select";var Ce=Object(c.a)(Oe,{name:"MuiSelect"})(Ee),Ae={standard:u.a,filled:f,outlined:b},Te=i.forwardRef((function(e,t){var n=e.autoComplete,u=e.autoFocus,s=void 0!==u&&u,c=e.children,l=e.classes,f=e.className,d=e.color,h=void 0===d?"primary":d,p=e.defaultValue,v=e.disabled,m=void 0!==v&&v,g=e.error,b=void 0!==g&&g,y=e.FormHelperTextProps,x=e.fullWidth,_=void 0!==x&&x,w=e.helperText,k=e.hiddenLabel,O=e.id,j=e.InputLabelProps,E=e.inputProps,C=e.InputProps,T=e.inputRef,M=e.label,D=e.multiline,I=void 0!==D&&D,F=e.name,R=e.onBlur,P=e.onChange,L=e.onFocus,B=e.placeholder,z=e.required,U=void 0!==z&&z,W=e.rows,V=e.rowsMax,G=e.select,q=void 0!==G&&G,H=e.SelectProps,X=e.type,Y=e.value,K=e.variant,$=void 0===K?"standard":K,Z=Object(a.a)(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","select","SelectProps","type","value","variant"]);var J={};if("outlined"===$&&(j&&"undefined"!==typeof j.shrink&&(J.notched=j.shrink),M)){var Q,ee=null!==(Q=null===j||void 0===j?void 0:j.required)&&void 0!==Q?Q:U;J.label=i.createElement(i.Fragment,null,M,ee&&"\xa0*")}q&&(H&&H.native||(J.id=void 0),J["aria-describedby"]=void 0);var te=w&&O?"".concat(O,"-helper-text"):void 0,ne=M&&O?"".concat(O,"-label"):void 0,re=Ae[$],ae=i.createElement(re,Object(r.a)({"aria-describedby":te,autoComplete:n,autoFocus:s,defaultValue:p,fullWidth:_,multiline:I,name:F,rows:W,rowsMax:V,type:X,value:Y,id:O,inputRef:T,onBlur:R,onChange:P,onFocus:L,placeholder:B,inputProps:E},J,C));return i.createElement(A,Object(r.a)({className:Object(o.a)(l.root,f),disabled:m,error:b,fullWidth:_,hiddenLabel:k,ref:t,required:U,color:h,variant:$},Z),M&&i.createElement(S,Object(r.a)({htmlFor:O,id:ne},j),M),q?i.createElement(Ce,Object(r.a)({"aria-describedby":te,id:O,labelId:ne,value:Y,input:ae},H),c):ae,w&&i.createElement(N,Object(r.a)({id:te},y),w))}));t.a=Object(c.a)({root:{}},{name:"MuiTextField"})(Te)},function(e,t,n){"use strict";var r=n(23),a=n(17),i=n(6),o=n(57),u=(n(38),n(554)),s=n(605),c=n(63),l=n(124),f=n(49);var d="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var h=i.forwardRef((function(e,t){var n=e.children,r=e.container,a=e.disablePortal,u=void 0!==a&&a,s=e.onRendered,c=i.useState(null),h=c[0],p=c[1],v=Object(f.a)(i.isValidElement(n)?n.ref:null,t);return d((function(){u||p(function(e){return e="function"===typeof e?e():e,o.findDOMNode(e)}(r)||document.body)}),[r,u]),d((function(){if(h&&!u)return Object(l.a)(t,h),function(){Object(l.a)(t,null)}}),[t,h,u]),d((function(){s&&(h||u)&&s()}),[s,h,u]),u?i.isValidElement(n)?i.cloneElement(n,{ref:v}):n:h?o.createPortal(n,h):h})),p=n(162),v=n(65),m=n(281);var g=n(208),b=n(125),y=n(291),x=n(200);function _(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function w(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0,i=[t,n].concat(Object(b.a)(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===i.indexOf(e)&&-1===o.indexOf(e.tagName)&&_(e,a)}))}function O(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function S(e,t){var n,r=[],a=[],i=e.container;if(!t.disableScrollLock){if(function(e){var t=Object(c.a)(e);return t.body===e?Object(x.a)(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(i)){var o=Object(y.a)();r.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(w(i)+o,"px"),n=Object(c.a)(i).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){a.push(e.style.paddingRight),e.style.paddingRight="".concat(w(e)+o,"px")}))}var u=i.parentElement,s="HTML"===u.nodeName&&"scroll"===window.getComputedStyle(u)["overflow-y"]?u:i;r.push({value:s.style.overflow,key:"overflow",el:s}),s.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){a[t]?e.style.paddingRight=a[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Object(g.a)(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&_(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);k(t,e.mountNode,e.modalRef,r,!0);var a=O(this.containers,(function(e){return e.container===t}));return-1!==a?(this.containers[a].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=O(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=S(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=O(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&_(e.modalRef,!0),k(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var a=r.modals[r.modals.length-1];a.modalRef&&_(a.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var E=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,a=e.disableEnforceFocus,u=void 0!==a&&a,s=e.disableRestoreFocus,l=void 0!==s&&s,d=e.getDoc,h=e.isEnabled,p=e.open,v=i.useRef(),m=i.useRef(null),g=i.useRef(null),b=i.useRef(),y=i.useRef(null),x=i.useCallback((function(e){y.current=o.findDOMNode(e)}),[]),_=Object(f.a)(t.ref,x),w=i.useRef();return i.useEffect((function(){w.current=p}),[p]),!w.current&&p&&"undefined"!==typeof window&&(b.current=d().activeElement),i.useEffect((function(){if(p){var e=Object(c.a)(y.current);r||!y.current||y.current.contains(e.activeElement)||(y.current.hasAttribute("tabIndex")||y.current.setAttribute("tabIndex",-1),y.current.focus());var t=function(){null!==y.current&&(e.hasFocus()&&!u&&h()&&!v.current?y.current&&!y.current.contains(e.activeElement)&&y.current.focus():v.current=!1)},n=function(t){!u&&h()&&9===t.keyCode&&e.activeElement===y.current&&(v.current=!0,t.shiftKey?g.current.focus():m.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var a=setInterval((function(){t()}),50);return function(){clearInterval(a),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),l||(b.current&&b.current.focus&&b.current.focus(),b.current=null)}}}),[r,u,l,h,p]),i.createElement(i.Fragment,null,i.createElement("div",{tabIndex:0,ref:m,"data-test":"sentinelStart"}),i.cloneElement(t,{ref:_}),i.createElement("div",{tabIndex:0,ref:g,"data-test":"sentinelEnd"}))},C={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},A=i.forwardRef((function(e,t){var n=e.invisible,o=void 0!==n&&n,u=e.open,s=Object(r.a)(e,["invisible","open"]);return u?i.createElement("div",Object(a.a)({"aria-hidden":!0,ref:t},s,{style:Object(a.a)({},C.root,o?C.invisible:{},s.style)})):null}));var T=new j,N=i.forwardRef((function(e,t){var n=Object(u.a)(),l=Object(s.a)({name:"MuiModal",props:Object(a.a)({},e),theme:n}),d=l.BackdropComponent,g=void 0===d?A:d,b=l.BackdropProps,y=l.children,x=l.closeAfterTransition,w=void 0!==x&&x,k=l.container,O=l.disableAutoFocus,S=void 0!==O&&O,j=l.disableBackdropClick,C=void 0!==j&&j,N=l.disableEnforceFocus,M=void 0!==N&&N,D=l.disableEscapeKeyDown,I=void 0!==D&&D,F=l.disablePortal,R=void 0!==F&&F,P=l.disableRestoreFocus,L=void 0!==P&&P,B=l.disableScrollLock,z=void 0!==B&&B,U=l.hideBackdrop,W=void 0!==U&&U,V=l.keepMounted,G=void 0!==V&&V,q=l.manager,H=void 0===q?T:q,X=l.onBackdropClick,Y=l.onClose,K=l.onEscapeKeyDown,$=l.onRendered,Z=l.open,J=Object(r.a)(l,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),Q=i.useState(!0),ee=Q[0],te=Q[1],ne=i.useRef({}),re=i.useRef(null),ae=i.useRef(null),ie=Object(f.a)(ae,t),oe=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(l),ue=function(){return Object(c.a)(re.current)},se=function(){return ne.current.modalRef=ae.current,ne.current.mountNode=re.current,ne.current},ce=function(){H.mount(se(),{disableScrollLock:z}),ae.current.scrollTop=0},le=Object(v.a)((function(){var e=function(e){return e="function"===typeof e?e():e,o.findDOMNode(e)}(k)||ue().body;H.add(se(),e),ae.current&&ce()})),fe=i.useCallback((function(){return H.isTopModal(se())}),[H]),de=Object(v.a)((function(e){re.current=e,e&&($&&$(),Z&&fe()?ce():_(ae.current,!0))})),he=i.useCallback((function(){H.remove(se())}),[H]);if(i.useEffect((function(){return function(){he()}}),[he]),i.useEffect((function(){Z?le():oe&&w||he()}),[Z,he,oe,w,le]),!G&&!Z&&(!oe||ee))return null;var pe=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:m.a}),ve={};return void 0===y.props.tabIndex&&(ve.tabIndex=y.props.tabIndex||"-1"),oe&&(ve.onEnter=Object(p.a)((function(){te(!1)}),y.props.onEnter),ve.onExited=Object(p.a)((function(){te(!0),w&&he()}),y.props.onExited)),i.createElement(h,{ref:de,container:k,disablePortal:R},i.createElement("div",Object(a.a)({ref:ie,onKeyDown:function(e){"Escape"===e.key&&fe()&&(K&&K(e),I||(e.stopPropagation(),Y&&Y(e,"escapeKeyDown")))},role:"presentation"},J,{style:Object(a.a)({},pe.root,!Z&&ee?pe.hidden:{},J.style)}),W?null:i.createElement(g,Object(a.a)({open:Z,onClick:function(e){e.target===e.currentTarget&&(X&&X(e),!C&&Y&&Y(e,"backdropClick"))}},b)),i.createElement(E,{disableEnforceFocus:M,disableAutoFocus:S,disableRestoreFocus:L,getDoc:ue,isEnabled:fe,open:Z},i.cloneElement(y,ve))))}));t.a=N},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=(n(38),n(26)),u=n(629),s=n(34),c=n(126),l=n(633),f=n(113),d=n(89),h=n(105),p=n(49),v={entering:{opacity:1},entered:{opacity:1}},m={enter:f.b.enteringScreen,exit:f.b.leavingScreen},g=i.forwardRef((function(e,t){var n=e.children,o=e.disableStrictModeCompat,u=void 0!==o&&o,s=e.in,f=e.onEnter,g=e.onEntered,b=e.onEntering,y=e.onExit,x=e.onExited,_=e.onExiting,w=e.style,k=e.TransitionComponent,O=void 0===k?l.a:k,S=e.timeout,j=void 0===S?m:S,E=Object(a.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),C=Object(d.a)(),A=C.unstable_strictMode&&!u,T=i.useRef(null),N=Object(p.a)(n.ref,t),M=Object(p.a)(A?T:void 0,N),D=function(e){return function(t,n){if(e){var r=A?[T.current,t]:[t,n],a=Object(c.a)(r,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},I=D(b),F=D((function(e,t){Object(h.b)(e);var n=Object(h.a)({style:w,timeout:j},{mode:"enter"});e.style.webkitTransition=C.transitions.create("opacity",n),e.style.transition=C.transitions.create("opacity",n),f&&f(e,t)})),R=D(g),P=D(_),L=D((function(e){var t=Object(h.a)({style:w,timeout:j},{mode:"exit"});e.style.webkitTransition=C.transitions.create("opacity",t),e.style.transition=C.transitions.create("opacity",t),y&&y(e)})),B=D(x);return i.createElement(O,Object(r.a)({appear:!0,in:s,nodeRef:A?T:void 0,onEnter:F,onEntered:R,onEntering:I,onExit:L,onExited:B,onExiting:P,timeout:j},E),(function(e,t){return i.cloneElement(n,Object(r.a)({style:Object(r.a)({opacity:0,visibility:"exited"!==e||s?void 0:"hidden"},v[e],w,n.props.style),ref:M},t))}))})),b=i.forwardRef((function(e,t){var n=e.children,u=e.classes,s=e.className,c=e.invisible,l=void 0!==c&&c,f=e.open,d=e.transitionDuration,h=e.TransitionComponent,p=void 0===h?g:h,v=Object(a.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return i.createElement(p,Object(r.a)({in:f,timeout:d},v),i.createElement("div",{className:Object(o.a)(u.root,s,l&&u.invisible),"aria-hidden":!0,ref:t},n))})),y=Object(s.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(b),x=n(57),_=n(144);function w(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var a=window.getComputedStyle(t);n=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform")}var i=0,o=0;if(n&&"none"!==n&&"string"===typeof n){var u=n.split("(")[1].split(")")[0].split(",");i=parseInt(u[4],10),o=parseInt(u[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(o-r.top,"px)"):"translateY(-".concat(r.top+r.height-o,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var k={enter:f.b.enteringScreen,exit:f.b.leavingScreen},O=i.forwardRef((function(e,t){var n=e.children,o=e.direction,u=void 0===o?"down":o,s=e.in,c=e.onEnter,f=e.onEntered,v=e.onEntering,m=e.onExit,g=e.onExited,b=e.onExiting,y=e.style,O=e.timeout,S=void 0===O?k:O,j=e.TransitionComponent,E=void 0===j?l.a:j,C=Object(a.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),A=Object(d.a)(),T=i.useRef(null),N=i.useCallback((function(e){T.current=x.findDOMNode(e)}),[]),M=Object(p.a)(n.ref,N),D=Object(p.a)(M,t),I=function(e){return function(t){e&&(void 0===t?e(T.current):e(T.current,t))}},F=I((function(e,t){w(u,e),Object(h.b)(e),c&&c(e,t)})),R=I((function(e,t){var n=Object(h.a)({timeout:S,style:y},{mode:"enter"});e.style.webkitTransition=A.transitions.create("-webkit-transform",Object(r.a)({},n,{easing:A.transitions.easing.easeOut})),e.style.transition=A.transitions.create("transform",Object(r.a)({},n,{easing:A.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",v&&v(e,t)})),P=I(f),L=I(b),B=I((function(e){var t=Object(h.a)({timeout:S,style:y},{mode:"exit"});e.style.webkitTransition=A.transitions.create("-webkit-transform",Object(r.a)({},t,{easing:A.transitions.easing.sharp})),e.style.transition=A.transitions.create("transform",Object(r.a)({},t,{easing:A.transitions.easing.sharp})),w(u,e),m&&m(e)})),z=I((function(e){e.style.webkitTransition="",e.style.transition="",g&&g(e)})),U=i.useCallback((function(){T.current&&w(u,T.current)}),[u]);return i.useEffect((function(){if(!s&&"down"!==u&&"right"!==u){var e=Object(_.a)((function(){T.current&&w(u,T.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[u,s]),i.useEffect((function(){s||U()}),[s,U]),i.createElement(E,Object(r.a)({nodeRef:T,onEnter:F,onEntered:P,onEntering:R,onExit:B,onExited:z,onExiting:L,appear:!0,in:s,timeout:S},C),(function(e,t){return i.cloneElement(n,Object(r.a)({ref:D,style:Object(r.a)({visibility:"exited"!==e||s?void 0:"hidden"},y,n.props.style)},t))}))})),S=n(551),j=n(46),E={left:"right",right:"left",top:"down",bottom:"up"};var C={enter:f.b.enteringScreen,exit:f.b.leavingScreen},A=i.forwardRef((function(e,t){var n=e.anchor,s=void 0===n?"left":n,c=e.BackdropProps,l=e.children,f=e.classes,h=e.className,p=e.elevation,v=void 0===p?16:p,m=e.ModalProps,g=(m=void 0===m?{}:m).BackdropProps,b=Object(a.a)(m,["BackdropProps"]),x=e.onClose,_=e.open,w=void 0!==_&&_,k=e.PaperProps,A=void 0===k?{}:k,T=e.SlideProps,N=e.TransitionComponent,M=void 0===N?O:N,D=e.transitionDuration,I=void 0===D?C:D,F=e.variant,R=void 0===F?"temporary":F,P=Object(a.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),L=Object(d.a)(),B=i.useRef(!1);i.useEffect((function(){B.current=!0}),[]);var z=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?E[t]:t}(L,s),U=i.createElement(S.a,Object(r.a)({elevation:"temporary"===R?v:0,square:!0},A,{className:Object(o.a)(f.paper,f["paperAnchor".concat(Object(j.a)(z))],A.className,"temporary"!==R&&f["paperAnchorDocked".concat(Object(j.a)(z))])}),l);if("permanent"===R)return i.createElement("div",Object(r.a)({className:Object(o.a)(f.root,f.docked,h),ref:t},P),U);var W=i.createElement(M,Object(r.a)({in:w,direction:E[z],timeout:I,appear:B.current},T),U);return"persistent"===R?i.createElement("div",Object(r.a)({className:Object(o.a)(f.root,f.docked,h),ref:t},P),W):i.createElement(u.a,Object(r.a)({BackdropProps:Object(r.a)({},c,g,{transitionDuration:I}),BackdropComponent:y,className:Object(o.a)(f.root,f.modal,h),open:w,onClose:x,ref:t},P,b),W)}));t.a=Object(s.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(A)},function(e,t,n){"use strict";var r=n(17),a=n(23),i=n(6),o=n.n(i),u=n(26),s=(n(38),n(201)),c=n.n(s),l=n(553);function f(e,t){var n={};return Object.keys(e).forEach((function(r){-1===t.indexOf(r)&&(n[r]=e[r])})),n}var d=n(149);t.a=function(e){var t=function(e){return function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.name,d=Object(a.a)(i,["name"]),h=s,p="function"===typeof t?function(e){return{root:function(n){return t(Object(r.a)({theme:e},n))}}}:{root:t},v=Object(l.a)(p,Object(r.a)({Component:e,name:s||e.displayName,classNamePrefix:h},d));t.filterProps&&(n=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var m=o.a.forwardRef((function(t,i){var s=t.children,c=t.className,l=t.clone,d=t.component,h=Object(a.a)(t,["children","className","clone","component"]),p=v(t),m=Object(u.a)(p.root,c),g=h;if(n&&(g=f(g,n)),l)return o.a.cloneElement(s,Object(r.a)({className:Object(u.a)(s.props.className,m)},g));if("function"===typeof s)return s(Object(r.a)({className:m},g));var b=d||e;return o.a.createElement(b,Object(r.a)({ref:i,className:m},g),s)}));return c()(m,e),m}}(e);return function(e,n){return t(e,Object(r.a)({defaultTheme:d.a},n))}}},function(e,t,n){"use strict";var r=n(125),a=n(126),i=n(23),o=n(17),u=n(6),s=(n(38),n(26)),c=n(34),l=n(89),f=n(59),d=n(198),h=n(63),p=n(65),v=n(49),m=n(46),g=n(199);var b=Object(c.a)((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:Object(o.a)({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,n=e.classes,r=e.className,a=e.open,i=e.value,o=e.valueLabelDisplay;return"off"===o?t:u.cloneElement(t,{className:Object(s.a)(t.props.className,(a||"on"===o)&&n.open,n.thumb)},u.createElement("span",{className:Object(s.a)(n.offset,r)},u.createElement("span",{className:n.circle},u.createElement("span",{className:n.label},i))))}));function y(e,t){return e-t}function x(e,t,n){return Math.min(Math.max(t,e),n)}function _(e,t){return e.reduce((function(e,n,r){var a=Math.abs(t-n);return null===e||a<e.distance||a===e.distance?{distance:a,index:r}:e}),null).index}function w(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function k(e,t,n){return 100*(e-t)/(n-t)}function O(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function S(e){var t=e.values,n=e.source,r=e.newValue,a=e.index;if(t[a]===r)return n;var i=t.slice();return i[a]=r,i}function j(e){var t=e.sliderRef,n=e.activeIndex,r=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===n||t.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var E={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},C=function(e){return e},A=u.forwardRef((function(e,t){var n=e["aria-label"],c=e["aria-labelledby"],f=e["aria-valuetext"],A=e.classes,T=e.className,N=e.color,M=void 0===N?"primary":N,D=e.component,I=void 0===D?"span":D,F=e.defaultValue,R=e.disabled,P=void 0!==R&&R,L=e.getAriaLabel,B=e.getAriaValueText,z=e.marks,U=void 0!==z&&z,W=e.max,V=void 0===W?100:W,G=e.min,q=void 0===G?0:G,H=e.name,X=e.onChange,Y=e.onChangeCommitted,K=e.onMouseDown,$=e.orientation,Z=void 0===$?"horizontal":$,J=e.scale,Q=void 0===J?C:J,ee=e.step,te=void 0===ee?1:ee,ne=e.ThumbComponent,re=void 0===ne?"span":ne,ae=e.track,ie=void 0===ae?"normal":ae,oe=e.value,ue=e.ValueLabelComponent,se=void 0===ue?b:ue,ce=e.valueLabelDisplay,le=void 0===ce?"off":ce,fe=e.valueLabelFormat,de=void 0===fe?C:fe,he=Object(i.a)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),pe=Object(l.a)(),ve=u.useRef(),me=u.useState(-1),ge=me[0],be=me[1],ye=u.useState(-1),xe=ye[0],_e=ye[1],we=Object(g.a)({controlled:oe,default:F,name:"Slider"}),ke=Object(a.a)(we,2),Oe=ke[0],Se=ke[1],je=Array.isArray(Oe),Ee=je?Oe.slice().sort(y):[Oe];Ee=Ee.map((function(e){return x(e,q,V)}));var Ce=!0===U&&null!==te?Object(r.a)(Array(Math.floor((V-q)/te)+1)).map((function(e,t){return{value:q+te*t}})):U||[],Ae=Object(d.a)(),Te=Ae.isFocusVisible,Ne=Ae.onBlurVisible,Me=Ae.ref,De=u.useState(-1),Ie=De[0],Fe=De[1],Re=u.useRef(),Pe=Object(v.a)(Me,Re),Le=Object(v.a)(t,Pe),Be=Object(p.a)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));Te(e)&&Fe(t),_e(t)})),ze=Object(p.a)((function(){-1!==Ie&&(Fe(-1),Ne()),_e(-1)})),Ue=Object(p.a)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));_e(t)})),We=Object(p.a)((function(){_e(-1)})),Ve="rtl"===pe.direction,Ge=Object(p.a)((function(e){var t,n=Number(e.currentTarget.getAttribute("data-index")),r=Ee[n],a=(V-q)/10,i=Ce.map((function(e){return e.value})),o=i.indexOf(r),u=Ve?"ArrowLeft":"ArrowRight",s=Ve?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=q;break;case"End":t=V;break;case"PageUp":te&&(t=r+a);break;case"PageDown":te&&(t=r-a);break;case u:case"ArrowUp":t=te?r+te:i[o+1]||i[i.length-1];break;case s:case"ArrowDown":t=te?r-te:i[o-1]||i[0];break;default:return}if(e.preventDefault(),te&&(t=O(t,te,q)),t=x(t,q,V),je){var c=t;t=S({values:Ee,source:Oe,newValue:t,index:n}).sort(y),j({sliderRef:Re,activeIndex:t.indexOf(c)})}Se(t),Fe(n),X&&X(e,t),Y&&Y(e,t)})),qe=u.useRef(),He=Z;Ve&&"vertical"!==Z&&(He+="-reverse");var Xe=function(e){var t,n,r=e.finger,a=e.move,i=void 0!==a&&a,o=e.values,u=e.source,s=Re.current.getBoundingClientRect(),c=s.width,l=s.height,f=s.bottom,d=s.left;if(t=0===He.indexOf("vertical")?(f-r.y)/l:(r.x-d)/c,-1!==He.indexOf("-reverse")&&(t=1-t),n=function(e,t,n){return(n-t)*e+t}(t,q,V),te)n=O(n,te,q);else{var h=Ce.map((function(e){return e.value}));n=h[_(h,n)]}n=x(n,q,V);var p=0;if(je){var v=n;p=(n=S({values:o,source:u,newValue:n,index:p=i?qe.current:_(o,n)}).sort(y)).indexOf(v),qe.current=p}return{newValue:n,activeIndex:p}},Ye=Object(p.a)((function(e){var t=w(e,ve);if(t){var n=Xe({finger:t,move:!0,values:Ee,source:Oe}),r=n.newValue,a=n.activeIndex;j({sliderRef:Re,activeIndex:a,setActive:be}),Se(r),X&&X(e,r)}})),Ke=Object(p.a)((function(e){var t=w(e,ve);if(t){var n=Xe({finger:t,values:Ee,source:Oe}).newValue;be(-1),"touchend"===e.type&&_e(-1),Y&&Y(e,n),ve.current=void 0;var r=Object(h.a)(Re.current);r.removeEventListener("mousemove",Ye),r.removeEventListener("mouseup",Ke),r.removeEventListener("touchmove",Ye),r.removeEventListener("touchend",Ke)}})),$e=Object(p.a)((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(ve.current=t.identifier);var n=w(e,ve),r=Xe({finger:n,values:Ee,source:Oe}),a=r.newValue,i=r.activeIndex;j({sliderRef:Re,activeIndex:i,setActive:be}),Se(a),X&&X(e,a);var o=Object(h.a)(Re.current);o.addEventListener("touchmove",Ye),o.addEventListener("touchend",Ke)}));u.useEffect((function(){var e=Re.current;e.addEventListener("touchstart",$e);var t=Object(h.a)(e);return function(){e.removeEventListener("touchstart",$e),t.removeEventListener("mousemove",Ye),t.removeEventListener("mouseup",Ke),t.removeEventListener("touchmove",Ye),t.removeEventListener("touchend",Ke)}}),[Ke,Ye,$e]);var Ze=Object(p.a)((function(e){K&&K(e),e.preventDefault();var t=w(e,ve),n=Xe({finger:t,values:Ee,source:Oe}),r=n.newValue,a=n.activeIndex;j({sliderRef:Re,activeIndex:a,setActive:be}),Se(r),X&&X(e,r);var i=Object(h.a)(Re.current);i.addEventListener("mousemove",Ye),i.addEventListener("mouseup",Ke)})),Je=k(je?Ee[0]:q,q,V),Qe=k(Ee[Ee.length-1],q,V)-Je,et=Object(o.a)({},E[He].offset(Je),E[He].leap(Qe));return u.createElement(I,Object(o.a)({ref:Le,className:Object(s.a)(A.root,A["color".concat(Object(m.a)(M))],T,P&&A.disabled,Ce.length>0&&Ce.some((function(e){return e.label}))&&A.marked,!1===ie&&A.trackFalse,"vertical"===Z&&A.vertical,"inverted"===ie&&A.trackInverted),onMouseDown:Ze},he),u.createElement("span",{className:A.rail}),u.createElement("span",{className:A.track,style:et}),u.createElement("input",{value:Ee.join(","),name:H,type:"hidden"}),Ce.map((function(e,t){var n,r=k(e.value,q,V),a=E[He].offset(r);return n=!1===ie?-1!==Ee.indexOf(e.value):"normal"===ie&&(je?e.value>=Ee[0]&&e.value<=Ee[Ee.length-1]:e.value<=Ee[0])||"inverted"===ie&&(je?e.value<=Ee[0]||e.value>=Ee[Ee.length-1]:e.value>=Ee[0]),u.createElement(u.Fragment,{key:e.value},u.createElement("span",{style:a,"data-index":t,className:Object(s.a)(A.mark,n&&A.markActive)}),null!=e.label?u.createElement("span",{"aria-hidden":!0,"data-index":t,style:a,className:Object(s.a)(A.markLabel,n&&A.markLabelActive)},e.label):null)})),Ee.map((function(e,t){var r=k(e,q,V),a=E[He].offset(r);return u.createElement(se,{key:t,valueLabelFormat:de,valueLabelDisplay:le,className:A.valueLabel,value:"function"===typeof de?de(Q(e),t):de,index:t,open:xe===t||ge===t||"on"===le,disabled:P},u.createElement(re,{className:Object(s.a)(A.thumb,A["thumbColor".concat(Object(m.a)(M))],ge===t&&A.active,P&&A.disabled,Ie===t&&A.focusVisible),tabIndex:P?null:0,role:"slider",style:a,"data-index":t,"aria-label":L?L(t):n,"aria-labelledby":c,"aria-orientation":Z,"aria-valuemax":Q(V),"aria-valuemin":Q(q),"aria-valuenow":Q(e),"aria-valuetext":B?B(Q(e),t):f,onKeyDown:Ge,onFocus:Be,onBlur:ze,onMouseOver:Ue,onMouseLeave:We}))})))}));t.a=Object(c.a)((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?Object(f.d)(e.palette.primary.main,.62):Object(f.a)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(f.b)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(f.b)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(Object(f.b)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(Object(f.b)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:Object(o.a)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(A)},function(e,t,n){"use strict";var r=n(86),a=n(70),i=(n(38),n(6)),o=n.n(i),u=n(57),s=n.n(u),c=!1,l=n(209),f="unmounted",d="exited",h="entering",p="entered",v="exiting",m=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=d,r.appearStatus=h):a=p:a=t.unmountOnExit||t.mountOnEnter?f:d,r.state={status:a},r.nextCallback=null,r}Object(a.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===f?{status:d}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==h&&n!==p&&(t=h):n!==h&&n!==p||(t=v)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===h?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===d&&this.setState({status:f})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[s.a.findDOMNode(this),r],i=a[0],o=a[1],u=this.getTimeouts(),l=r?u.appear:u.enter;!e&&!n||c?this.safeSetState({status:p},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:h},(function(){t.props.onEntering(i,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.a.findDOMNode(this);t&&!c?(this.props.onExit(r),this.safeSetState({status:v},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===f)return null;var t=this.props,n=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(r.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.a.createElement(l.a.Provider,{value:null},"function"===typeof n?n(e,a):o.a.cloneElement(o.a.Children.only(n),a))},t}(o.a.Component);function g(){}m.contextType=l.a,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},m.UNMOUNTED=f,m.EXITED=d,m.ENTERING=h,m.ENTERED=p,m.EXITING=v;t.a=m}]]);
//# sourceMappingURL=2.37ede93b.chunk.js.map